2018-07-16 09:27:52.338 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-16 09:27:52.367 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-16 09:27:52.369 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-16 09:27:52.369 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-16 09:27:52.370 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-16 09:27:52.370 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-16 09:28:21.415 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-16 09:28:21.444 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-16 09:28:21.447 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-16 09:28:21.447 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-16 09:28:21.447 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-16 09:28:21.447 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-16 09:28:21.735 -06:00 [FTL] Unable to start Kestrel.
System.IO.IOException: Failed to bind to address http://127.0.0.1:5000: address already in use. ---> Microsoft.AspNetCore.Server.Kestrel.Transport.Abstractions.Internal.AddressInUseException: Error -48 EADDRINUSE address already in use ---> Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Networking.UvException: Error -48 EADDRINUSE address already in use
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Networking.LibuvFunctions.ThrowError(Int32 statusCode)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Networking.UvTcpHandle.GetSockIPEndPoint()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Listener.ListenTcp(Boolean useFileHandle)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Listener.<>c.<StartAsync>b__8_0(Listener listener)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.LibuvThread.DoPostWork()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.ListenerPrimary.StartAsync(String pipeName, Byte[] pipeMessage, IEndPointInformation endPointInformation, LibuvThread thread)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.LibuvTransport.BindAsync()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.LibuvTransport.BindAsync()
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.<>c__DisplayClass23_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindLocalhostAsync(ServerAddress address, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAddressAsync(String address, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, List`1 listenOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2018-07-16 09:31:17.461 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-16 09:31:17.495 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-16 09:31:17.497 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-16 09:31:17.498 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-16 09:31:17.498 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-16 09:31:17.498 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-16 09:31:36.718 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-16 09:31:36.834 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-16 09:31:36.835 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-16 09:31:36.837 -06:00 [DBG] Start discovery request
2018-07-16 11:25:53.219 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-16 11:25:53.219 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-16 11:25:53.219 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-16 11:25:53.219 -06:00 [DBG] Start discovery request
2018-07-16 11:34:32.253 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-16 11:34:32.253 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-16 11:34:32.253 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-16 11:34:32.253 -06:00 [DBG] Start discovery request
2018-07-16 12:01:56.862 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-16 12:01:56.894 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-16 12:01:56.896 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-16 12:01:56.896 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-16 12:01:56.897 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-16 12:01:56.897 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-16 12:02:02.518 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-16 12:02:02.636 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-16 12:02:02.636 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-16 12:02:02.639 -06:00 [DBG] Start discovery request
2018-07-16 12:46:58.022 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-16 12:46:58.022 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-16 12:46:58.022 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-16 12:46:58.022 -06:00 [DBG] Start discovery request
2018-07-16 12:47:08.813 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-16 12:47:08.844 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-16 12:47:08.846 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-16 12:47:08.846 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-16 12:47:08.847 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-16 12:47:08.847 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-16 12:47:13.216 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-16 12:47:13.334 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-16 12:47:13.334 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-16 12:47:13.337 -06:00 [DBG] Start discovery request
2018-07-17 11:06:38.009 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-17 11:06:38.010 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-17 11:06:38.010 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-17 11:06:38.010 -06:00 [DBG] Start discovery request
2018-07-17 12:44:45.923 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-17 12:44:45.953 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-17 12:44:45.956 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-17 12:44:45.956 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-17 12:44:45.956 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-17 12:44:45.956 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-17 12:44:46.191 -06:00 [FTL] Unable to start Kestrel.
System.InvalidOperationException: HTTPS endpoints can only be configured using KestrelServerOptions.Listen().
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAddressAsync(String address, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, List`1 listenOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2018-07-17 12:46:02.113 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-17 12:46:02.143 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-17 12:46:02.146 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-17 12:46:02.146 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-17 12:46:02.146 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-17 12:46:02.146 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-17 12:47:00.450 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-17 12:47:00.567 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-17 12:47:00.568 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-17 12:47:00.571 -06:00 [DBG] Start discovery request
2018-07-17 12:47:00.758 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-17 12:47:00.759 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-17 12:47:00.759 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-17 12:47:00.762 -06:00 [DBG] Start key discovery request
2018-07-17 12:47:00.837 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-17 12:47:00.840 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-17 12:47:00.840 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-17 12:47:00.843 -06:00 [DBG] Start authorize request
2018-07-17 12:47:00.861 -06:00 [DBG] No user present in authorize request
2018-07-17 12:47:00.868 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 12:47:00.882 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:47:00.893 -06:00 [ERR] Invalid redirect_uri: http://localhost:5000/signin-oidc
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "AllowedRedirectUris": [
    "http://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674500208007260.Yzk3N2Y4MTUtNGI4NS00YjI3LTlmNzYtOGUzMjg1NjEwZWNiNGQ3MDFmZGUtMTQzNi00ZWNkLWFlNTMtMjk4ODhjNjcyZGFk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcgxcq6SkXwbX7AubzjMF0-UgKgFtQ3vmpxV7xZinnZ322RJMign-7k_KJf0dBFBvuk95IiZ9L_HmP4oMwlr2Wf8HnCZKtmJ1LIKELWEW8Xm7VA2RaNbHAYX7J2ilo3TBCKwmCByxYfn6Ovk5BGMWP7za4NVgNnST7Y9KyflWzcNLFAgO2RdK-NpfpZxcY0EUCBkSeFkTv27GOp2mSpAQcMkF8omVPEGKK8-tRV6PItV-88tsh4Z7HLb6Hg4isS9p8M1gclUHGCr6dkrcQ0_wlTjrX1f7plwIQqKCDQNq4khg",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 12:47:00.896 -06:00 [ERR] Request validation failed
2018-07-17 12:47:00.896 -06:00 [INF] {
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "AllowedRedirectUris": [
    "http://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674500208007260.Yzk3N2Y4MTUtNGI4NS00YjI3LTlmNzYtOGUzMjg1NjEwZWNiNGQ3MDFmZGUtMTQzNi00ZWNkLWFlNTMtMjk4ODhjNjcyZGFk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcgxcq6SkXwbX7AubzjMF0-UgKgFtQ3vmpxV7xZinnZ322RJMign-7k_KJf0dBFBvuk95IiZ9L_HmP4oMwlr2Wf8HnCZKtmJ1LIKELWEW8Xm7VA2RaNbHAYX7J2ilo3TBCKwmCByxYfn6Ovk5BGMWP7za4NVgNnST7Y9KyflWzcNLFAgO2RdK-NpfpZxcY0EUCBkSeFkTv27GOp2mSpAQcMkF8omVPEGKK8-tRV6PItV-88tsh4Z7HLb6Hg4isS9p8M1gclUHGCr6dkrcQ0_wlTjrX1f7plwIQqKCDQNq4khg",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 12:47:00.920 -06:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLFC2MN1RSSU:00000001",
  "TimeStamp": "2018-07-17T18:47:00Z",
  "ProcessId": 6101,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-17 12:48:32.699 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-17 12:48:32.730 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-17 12:48:32.733 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-17 12:48:32.733 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-17 12:48:32.733 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-17 12:48:32.733 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-17 12:48:54.232 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-17 12:48:54.348 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-17 12:48:54.349 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-17 12:48:54.351 -06:00 [DBG] Start discovery request
2018-07-17 12:48:54.476 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-17 12:48:54.477 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-17 12:48:54.477 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-17 12:48:54.479 -06:00 [DBG] Start key discovery request
2018-07-17 12:48:54.527 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-17 12:48:54.529 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-17 12:48:54.529 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-17 12:48:54.532 -06:00 [DBG] Start authorize request
2018-07-17 12:48:54.543 -06:00 [DBG] No user present in authorize request
2018-07-17 12:48:54.547 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 12:48:54.557 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:48:54.567 -06:00 [ERR] Invalid redirect_uri: http://localhost:5000/signin-oidc
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674501345054660.MTk1MjhiMDgtNGFlMi00ZTdiLTk4NTgtYWQyMWI4NTY2YTJlNDJhZThjYmQtZWI2NC00ZTRjLWE0M2YtMjEzMjhlMWIzZGUz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe7xXrUChM-CIIH4PR7UXwQ-tdiFviY3r_u7ouGWlA_cNk0GGnq3F8vIPEkkaRK4osN5f6cz4zakij8xzFrpld0JCclDzCYrTO0K0q8Hbd8K2tbdNLBLVVvNjUpTyPd5BkHSKmm0CEIbh2uXvwcRxqy-G45j6iJscjdAfVA44FMTyaezd1HtL4jb5vQQksthacJg1oQv7KBIt2XCokf9BFngDI_cMHdcy8r6qqSWIgSEIovd5aTtp60fW51WC4heqdlW9c72wEiKMDlt1CL6uabczCstl-TrARDOf1q9JGSZQ",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 12:48:54.569 -06:00 [ERR] Request validation failed
2018-07-17 12:48:54.570 -06:00 [INF] {
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674501345054660.MTk1MjhiMDgtNGFlMi00ZTdiLTk4NTgtYWQyMWI4NTY2YTJlNDJhZThjYmQtZWI2NC00ZTRjLWE0M2YtMjEzMjhlMWIzZGUz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe7xXrUChM-CIIH4PR7UXwQ-tdiFviY3r_u7ouGWlA_cNk0GGnq3F8vIPEkkaRK4osN5f6cz4zakij8xzFrpld0JCclDzCYrTO0K0q8Hbd8K2tbdNLBLVVvNjUpTyPd5BkHSKmm0CEIbh2uXvwcRxqy-G45j6iJscjdAfVA44FMTyaezd1HtL4jb5vQQksthacJg1oQv7KBIt2XCokf9BFngDI_cMHdcy8r6qqSWIgSEIovd5aTtp60fW51WC4heqdlW9c72wEiKMDlt1CL6uabczCstl-TrARDOf1q9JGSZQ",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 12:48:54.592 -06:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLFC2NMCE6E1:00000002",
  "TimeStamp": "2018-07-17T18:48:54Z",
  "ProcessId": 6303,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-17 12:50:52.444 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-17 12:50:52.474 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-17 12:50:52.476 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-17 12:50:52.476 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-17 12:50:52.476 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-17 12:50:52.477 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-17 12:51:11.210 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-17 12:51:11.323 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-17 12:51:11.323 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-17 12:51:11.325 -06:00 [DBG] Start discovery request
2018-07-17 12:51:11.495 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-17 12:51:11.496 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-17 12:51:11.496 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-17 12:51:11.499 -06:00 [DBG] Start key discovery request
2018-07-17 12:51:11.566 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-17 12:51:11.569 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-17 12:51:11.569 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-17 12:51:11.572 -06:00 [DBG] Start authorize request
2018-07-17 12:51:11.586 -06:00 [DBG] No user present in authorize request
2018-07-17 12:51:11.590 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 12:51:11.600 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:51:11.604 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 12:51:11.605 -06:00 [DBG] No PKCE used.
2018-07-17 12:51:11.629 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 12:51:11.638 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHejXbXRPbq8yrhkb0U-7P7MmRgWV2X6h4PcYxwvT99Isz46gWLRZiyXyQfCbf5GC42V1ck6fww1L7ccv1PDDCrBMhVKTxAfRJHZw7g5Ar4GQusMowD9geSY58hkbKAMJ7DLDHivQz-rdnzzpK-YSVkbDkSlCEBr3Ydl97kq1j3vk7RIcnAg-jr_UIN6MKowr6d-kpD5p1YOpzLBS2EYtAL0FpmhIx_z1UrzkG7eHrApQ5PfmkpHXFsQHryhX2uraXIaFgUDFEv5YgzIBT8G0mfnvR_8CAuKWi_INSp-23NhHQ",
  "Nonce": "636674502715317110.YWEwOGNiZjItODc0OC00Y2I0LWI1NWYtYWY5ODY0OWRkMTUyNTMyY2VhMTctNDUwOC00NjllLWFjNDAtOWUxYzhiNmFlODA1",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674502715317110.YWEwOGNiZjItODc0OC00Y2I0LWI1NWYtYWY5ODY0OWRkMTUyNTMyY2VhMTctNDUwOC00NjllLWFjNDAtOWUxYzhiNmFlODA1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHejXbXRPbq8yrhkb0U-7P7MmRgWV2X6h4PcYxwvT99Isz46gWLRZiyXyQfCbf5GC42V1ck6fww1L7ccv1PDDCrBMhVKTxAfRJHZw7g5Ar4GQusMowD9geSY58hkbKAMJ7DLDHivQz-rdnzzpK-YSVkbDkSlCEBr3Ydl97kq1j3vk7RIcnAg-jr_UIN6MKowr6d-kpD5p1YOpzLBS2EYtAL0FpmhIx_z1UrzkG7eHrApQ5PfmkpHXFsQHryhX2uraXIaFgUDFEv5YgzIBT8G0mfnvR_8CAuKWi_INSp-23NhHQ",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 12:51:11.644 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 12:51:11.932 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 12:51:11.933 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:51:11.933 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 12:51:11.933 -06:00 [DBG] No PKCE used.
2018-07-17 12:51:11.934 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 12:51:11.936 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:51:15.813 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 12:51:15.813 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:51:15.813 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 12:51:15.813 -06:00 [DBG] No PKCE used.
2018-07-17 12:51:15.814 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 12:51:15.814 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:51:33.771 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 12:51:34.937 -06:00 [DBG] Augmenting SignInContext
2018-07-17 12:51:34.938 -06:00 [DBG] Adding idp claim with value: local
2018-07-17 12:51:34.938 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-17 12:51:34.939 -06:00 [DBG] Adding auth_time claim with value: 1531853494
2018-07-17 12:51:34.967 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-17 12:51:34.993 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFC2P1NNKJE:00000002",
  "TimeStamp": "2018-07-17T18:51:34Z",
  "ProcessId": 6480,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-17 12:51:35.003 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-17 12:51:35.004 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-17 12:51:35.004 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-17 12:51:35.008 -06:00 [DBG] Start authorize callback request
2018-07-17 12:51:35.011 -06:00 [DBG] No user present in authorize request
2018-07-17 12:51:35.011 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 12:51:35.011 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:51:35.011 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 12:51:35.011 -06:00 [DBG] No PKCE used.
2018-07-17 12:51:35.011 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 12:51:35.011 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHejXbXRPbq8yrhkb0U-7P7MmRgWV2X6h4PcYxwvT99Isz46gWLRZiyXyQfCbf5GC42V1ck6fww1L7ccv1PDDCrBMhVKTxAfRJHZw7g5Ar4GQusMowD9geSY58hkbKAMJ7DLDHivQz-rdnzzpK-YSVkbDkSlCEBr3Ydl97kq1j3vk7RIcnAg-jr_UIN6MKowr6d-kpD5p1YOpzLBS2EYtAL0FpmhIx_z1UrzkG7eHrApQ5PfmkpHXFsQHryhX2uraXIaFgUDFEv5YgzIBT8G0mfnvR_8CAuKWi_INSp-23NhHQ",
  "Nonce": "636674502715317110.YWEwOGNiZjItODc0OC00Y2I0LWI1NWYtYWY5ODY0OWRkMTUyNTMyY2VhMTctNDUwOC00NjllLWFjNDAtOWUxYzhiNmFlODA1",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674502715317110.YWEwOGNiZjItODc0OC00Y2I0LWI1NWYtYWY5ODY0OWRkMTUyNTMyY2VhMTctNDUwOC00NjllLWFjNDAtOWUxYzhiNmFlODA1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHejXbXRPbq8yrhkb0U-7P7MmRgWV2X6h4PcYxwvT99Isz46gWLRZiyXyQfCbf5GC42V1ck6fww1L7ccv1PDDCrBMhVKTxAfRJHZw7g5Ar4GQusMowD9geSY58hkbKAMJ7DLDHivQz-rdnzzpK-YSVkbDkSlCEBr3Ydl97kq1j3vk7RIcnAg-jr_UIN6MKowr6d-kpD5p1YOpzLBS2EYtAL0FpmhIx_z1UrzkG7eHrApQ5PfmkpHXFsQHryhX2uraXIaFgUDFEv5YgzIBT8G0mfnvR_8CAuKWi_INSp-23NhHQ",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 12:51:35.011 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 12:51:35.014 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 12:51:35.014 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:51:35.014 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 12:51:35.014 -06:00 [DBG] No PKCE used.
2018-07-17 12:51:35.014 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 12:51:35.014 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:52:40.223 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-17 12:52:40.224 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-17 12:52:40.224 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-17 12:52:40.224 -06:00 [DBG] Start authorize request
2018-07-17 12:52:40.224 -06:00 [DBG] No user present in authorize request
2018-07-17 12:52:40.224 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 12:52:40.224 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:52:40.224 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 12:52:40.224 -06:00 [DBG] No PKCE used.
2018-07-17 12:52:40.224 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 12:52:40.225 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfowEE1UwvYnSAIJKUSpXivgvPL6mfeioXUGCAukz3lKaBeNe-mfvcsN_mPGmeFjLjK2eQiWHLGeaUggcSKSiNvY6QgE8Ukx-iyLGtzmBaa7p4gnvz-yQtDryn--7GC5QcI4pNVk7tlrUZxA_4hhgMAI6jI1EBu2KBChwVpPLWr68z0p7u7pWE3Jy4tLGoYjlCWMRuRJUWgWgul5FUD84uZSmj7gqmX7-67fu-vc7glT2LSFdJ9lit6q3faDpXcqkkVLnrTowBF26bHdHbe1D8fLZnP-mid7-Pzj9FiyIs_Pg",
  "Nonce": "636674503602136860.M2Y1NDk5MWUtZjFjOC00NjU5LTliMzEtYTQyOTQzZWJlYzVmZmUwY2JkNDAtZWFkZS00MTc3LThiMDMtZWYxODA4N2JkZWU2",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674503602136860.M2Y1NDk5MWUtZjFjOC00NjU5LTliMzEtYTQyOTQzZWJlYzVmZmUwY2JkNDAtZWFkZS00MTc3LThiMDMtZWYxODA4N2JkZWU2",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfowEE1UwvYnSAIJKUSpXivgvPL6mfeioXUGCAukz3lKaBeNe-mfvcsN_mPGmeFjLjK2eQiWHLGeaUggcSKSiNvY6QgE8Ukx-iyLGtzmBaa7p4gnvz-yQtDryn--7GC5QcI4pNVk7tlrUZxA_4hhgMAI6jI1EBu2KBChwVpPLWr68z0p7u7pWE3Jy4tLGoYjlCWMRuRJUWgWgul5FUD84uZSmj7gqmX7-67fu-vc7glT2LSFdJ9lit6q3faDpXcqkkVLnrTowBF26bHdHbe1D8fLZnP-mid7-Pzj9FiyIs_Pg",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 12:52:40.225 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 12:52:40.227 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 12:52:40.227 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:52:40.227 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 12:52:40.227 -06:00 [DBG] No PKCE used.
2018-07-17 12:52:40.227 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 12:52:40.227 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:52:40.750 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 12:52:40.750 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:52:40.750 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 12:52:40.750 -06:00 [DBG] No PKCE used.
2018-07-17 12:52:40.750 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 12:52:40.750 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:52:57.264 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 12:52:57.282 -06:00 [WRN] Invalid password for user 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5.
2018-07-17 12:52:57.282 -06:00 [WRN] User 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 failed to provide the correct password.
2018-07-17 12:52:57.431 -06:00 [INF] {
  "Name": "User Login Failure",
  "Category": "Authentication",
  "EventType": "Failure",
  "Id": 1001,
  "Username": "bob",
  "Endpoint": "UI",
  "Message": "invalid credentials",
  "ActivityId": "0HLFC2P1NNKJE:00000008",
  "TimeStamp": "2018-07-17T18:52:57Z",
  "ProcessId": 6480,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-17 12:52:57.433 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 12:52:57.434 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:52:57.434 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 12:52:57.434 -06:00 [DBG] No PKCE used.
2018-07-17 12:52:57.434 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 12:52:57.434 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:53:11.124 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 12:53:11.146 -06:00 [DBG] Augmenting SignInContext
2018-07-17 12:53:11.146 -06:00 [DBG] Adding idp claim with value: local
2018-07-17 12:53:11.146 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-17 12:53:11.147 -06:00 [DBG] Adding auth_time claim with value: 1531853591
2018-07-17 12:53:11.147 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-17 12:53:11.147 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFC2P1NNKJE:00000009",
  "TimeStamp": "2018-07-17T18:53:11Z",
  "ProcessId": 6480,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-17 12:53:11.150 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-17 12:53:11.150 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-17 12:53:11.150 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-17 12:53:11.150 -06:00 [DBG] Start authorize callback request
2018-07-17 12:53:11.151 -06:00 [DBG] No user present in authorize request
2018-07-17 12:53:11.151 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 12:53:11.151 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:53:11.151 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 12:53:11.151 -06:00 [DBG] No PKCE used.
2018-07-17 12:53:11.151 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 12:53:11.151 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfowEE1UwvYnSAIJKUSpXivgvPL6mfeioXUGCAukz3lKaBeNe-mfvcsN_mPGmeFjLjK2eQiWHLGeaUggcSKSiNvY6QgE8Ukx-iyLGtzmBaa7p4gnvz-yQtDryn--7GC5QcI4pNVk7tlrUZxA_4hhgMAI6jI1EBu2KBChwVpPLWr68z0p7u7pWE3Jy4tLGoYjlCWMRuRJUWgWgul5FUD84uZSmj7gqmX7-67fu-vc7glT2LSFdJ9lit6q3faDpXcqkkVLnrTowBF26bHdHbe1D8fLZnP-mid7-Pzj9FiyIs_Pg",
  "Nonce": "636674503602136860.M2Y1NDk5MWUtZjFjOC00NjU5LTliMzEtYTQyOTQzZWJlYzVmZmUwY2JkNDAtZWFkZS00MTc3LThiMDMtZWYxODA4N2JkZWU2",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674503602136860.M2Y1NDk5MWUtZjFjOC00NjU5LTliMzEtYTQyOTQzZWJlYzVmZmUwY2JkNDAtZWFkZS00MTc3LThiMDMtZWYxODA4N2JkZWU2",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfowEE1UwvYnSAIJKUSpXivgvPL6mfeioXUGCAukz3lKaBeNe-mfvcsN_mPGmeFjLjK2eQiWHLGeaUggcSKSiNvY6QgE8Ukx-iyLGtzmBaa7p4gnvz-yQtDryn--7GC5QcI4pNVk7tlrUZxA_4hhgMAI6jI1EBu2KBChwVpPLWr68z0p7u7pWE3Jy4tLGoYjlCWMRuRJUWgWgul5FUD84uZSmj7gqmX7-67fu-vc7glT2LSFdJ9lit6q3faDpXcqkkVLnrTowBF26bHdHbe1D8fLZnP-mid7-Pzj9FiyIs_Pg",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 12:53:11.151 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 12:53:11.153 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 12:53:11.153 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:53:11.153 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 12:53:11.153 -06:00 [DBG] No PKCE used.
2018-07-17 12:53:11.154 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 12:53:11.154 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:56:23.935 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-17 12:56:23.935 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-17 12:56:23.935 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-17 12:56:23.935 -06:00 [DBG] Start discovery request
2018-07-17 12:56:24.004 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-17 12:56:24.005 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-17 12:56:24.005 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-17 12:56:24.005 -06:00 [DBG] Start key discovery request
2018-07-17 12:56:24.045 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-17 12:56:24.045 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-17 12:56:24.045 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-17 12:56:24.045 -06:00 [DBG] Start authorize request
2018-07-17 12:56:24.045 -06:00 [DBG] No user present in authorize request
2018-07-17 12:56:24.045 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 12:56:24.045 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:56:24.045 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 12:56:24.045 -06:00 [DBG] No PKCE used.
2018-07-17 12:56:24.045 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 12:56:24.045 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcbKMoGzQrtWsJGwc4Q0e_URBW_2uq2BDcn3CYtE6r0EfyqegR--V0ij2vCrN3PwetuYxn2crUIwVdmgNV14aW-qzyPWRAk1JjFXfrBV1Gn5FUYX-P6orlxEZTf9sEaZ-bth--r-KE-QwwaVei2jXz_Xy0ughLS70da1ayrCxtJm5jQZVg8vTz6Eopyuhx5laJ3ei7jHs41DtXdygimPqB4v__z2ODsal3GTzZPU-9cp278ORjDlARXhJC-M0tQZAtPEbYUS0v-F6FyYeWOekd7cJ88oxjpHiokfW7QDx7InpggZpqw3XFwxWB2V2KvVo8",
  "Nonce": "636674505840339500.NmM1MzdmNTItNTIyNy00OTUxLWE0NTQtMWRkNzY2YmVjNjYwOWFkNWNjN2QtNWQxYi00NDJlLWFkZjctYzE4ZjQ3N2UzZDgx",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674505840339500.NmM1MzdmNTItNTIyNy00OTUxLWE0NTQtMWRkNzY2YmVjNjYwOWFkNWNjN2QtNWQxYi00NDJlLWFkZjctYzE4ZjQ3N2UzZDgx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcbKMoGzQrtWsJGwc4Q0e_URBW_2uq2BDcn3CYtE6r0EfyqegR--V0ij2vCrN3PwetuYxn2crUIwVdmgNV14aW-qzyPWRAk1JjFXfrBV1Gn5FUYX-P6orlxEZTf9sEaZ-bth--r-KE-QwwaVei2jXz_Xy0ughLS70da1ayrCxtJm5jQZVg8vTz6Eopyuhx5laJ3ei7jHs41DtXdygimPqB4v__z2ODsal3GTzZPU-9cp278ORjDlARXhJC-M0tQZAtPEbYUS0v-F6FyYeWOekd7cJ88oxjpHiokfW7QDx7InpggZpqw3XFwxWB2V2KvVo8",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 12:56:24.046 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 12:56:24.048 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 12:56:24.048 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:56:24.048 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 12:56:24.048 -06:00 [DBG] No PKCE used.
2018-07-17 12:56:24.048 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 12:56:24.048 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:56:31.728 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 12:56:31.750 -06:00 [DBG] Augmenting SignInContext
2018-07-17 12:56:31.750 -06:00 [DBG] Adding idp claim with value: local
2018-07-17 12:56:31.750 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-17 12:56:31.750 -06:00 [DBG] Adding auth_time claim with value: 1531853791
2018-07-17 12:56:31.750 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-17 12:56:31.751 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFC2P1NNKJM:00000003",
  "TimeStamp": "2018-07-17T18:56:31Z",
  "ProcessId": 6480,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-17 12:56:31.753 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-17 12:56:31.754 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-17 12:56:31.754 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-17 12:56:31.754 -06:00 [DBG] Start authorize callback request
2018-07-17 12:56:31.754 -06:00 [DBG] No user present in authorize request
2018-07-17 12:56:31.754 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 12:56:31.754 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:56:31.754 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 12:56:31.754 -06:00 [DBG] No PKCE used.
2018-07-17 12:56:31.754 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 12:56:31.755 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcbKMoGzQrtWsJGwc4Q0e_URBW_2uq2BDcn3CYtE6r0EfyqegR--V0ij2vCrN3PwetuYxn2crUIwVdmgNV14aW-qzyPWRAk1JjFXfrBV1Gn5FUYX-P6orlxEZTf9sEaZ-bth--r-KE-QwwaVei2jXz_Xy0ughLS70da1ayrCxtJm5jQZVg8vTz6Eopyuhx5laJ3ei7jHs41DtXdygimPqB4v__z2ODsal3GTzZPU-9cp278ORjDlARXhJC-M0tQZAtPEbYUS0v-F6FyYeWOekd7cJ88oxjpHiokfW7QDx7InpggZpqw3XFwxWB2V2KvVo8",
  "Nonce": "636674505840339500.NmM1MzdmNTItNTIyNy00OTUxLWE0NTQtMWRkNzY2YmVjNjYwOWFkNWNjN2QtNWQxYi00NDJlLWFkZjctYzE4ZjQ3N2UzZDgx",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674505840339500.NmM1MzdmNTItNTIyNy00OTUxLWE0NTQtMWRkNzY2YmVjNjYwOWFkNWNjN2QtNWQxYi00NDJlLWFkZjctYzE4ZjQ3N2UzZDgx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcbKMoGzQrtWsJGwc4Q0e_URBW_2uq2BDcn3CYtE6r0EfyqegR--V0ij2vCrN3PwetuYxn2crUIwVdmgNV14aW-qzyPWRAk1JjFXfrBV1Gn5FUYX-P6orlxEZTf9sEaZ-bth--r-KE-QwwaVei2jXz_Xy0ughLS70da1ayrCxtJm5jQZVg8vTz6Eopyuhx5laJ3ei7jHs41DtXdygimPqB4v__z2ODsal3GTzZPU-9cp278ORjDlARXhJC-M0tQZAtPEbYUS0v-F6FyYeWOekd7cJ88oxjpHiokfW7QDx7InpggZpqw3XFwxWB2V2KvVo8",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 12:56:31.755 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 12:56:31.758 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 12:56:31.758 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 12:56:31.758 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 12:56:31.758 -06:00 [DBG] No PKCE used.
2018-07-17 12:56:31.758 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 12:56:31.758 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:01:56.652 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-17 13:01:56.652 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-17 13:01:56.652 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-17 13:01:56.652 -06:00 [DBG] Start discovery request
2018-07-17 13:01:56.715 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-17 13:01:56.715 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-17 13:01:56.715 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-17 13:01:56.715 -06:00 [DBG] Start key discovery request
2018-07-17 13:01:56.743 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-17 13:01:56.744 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-17 13:01:56.744 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-17 13:01:56.744 -06:00 [DBG] Start authorize request
2018-07-17 13:01:56.744 -06:00 [DBG] No user present in authorize request
2018-07-17 13:01:56.744 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 13:01:56.744 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:01:56.744 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 13:01:56.744 -06:00 [DBG] No PKCE used.
2018-07-17 13:01:56.744 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 13:01:56.744 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcU49G7YYaH5MIacuPHel3pogeCkRmaTKepx-9r26TZ8kfiCx2pvFzUjE49_a-sCP3ZVKDP5VWKSCzQqY7MIH8YErlw4s_dijTPGt7rOSclbc7j_gPA0RhJ8STU2ph7Tvfw0UguyMyQfvcpykSGUpAUrV5FhU0RVY3-KulAHXACkNdpu_XTFJVv7s2UdBA1VC7V4upzxcGt6tTpRDszrlVSYyAcogWd6OmyXauWlmafrvXNX-szrIe2YkWlTW_pFZtdFhcGSqUl4qvj0d21iXAGf6snAOG28UrEtYWGfSgLzVdHuZ_czSc_dujTQDEj8q8",
  "Nonce": "636674509167299480.NGMzYzJmZjEtYzdiZi00YjU0LTg0NDEtNWE0N2UyNzc2NWIyY2Q1NGFiNTEtZDcwYS00OThkLTg3NTktMTAwZGVmYjAzODZh",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674509167299480.NGMzYzJmZjEtYzdiZi00YjU0LTg0NDEtNWE0N2UyNzc2NWIyY2Q1NGFiNTEtZDcwYS00OThkLTg3NTktMTAwZGVmYjAzODZh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcU49G7YYaH5MIacuPHel3pogeCkRmaTKepx-9r26TZ8kfiCx2pvFzUjE49_a-sCP3ZVKDP5VWKSCzQqY7MIH8YErlw4s_dijTPGt7rOSclbc7j_gPA0RhJ8STU2ph7Tvfw0UguyMyQfvcpykSGUpAUrV5FhU0RVY3-KulAHXACkNdpu_XTFJVv7s2UdBA1VC7V4upzxcGt6tTpRDszrlVSYyAcogWd6OmyXauWlmafrvXNX-szrIe2YkWlTW_pFZtdFhcGSqUl4qvj0d21iXAGf6snAOG28UrEtYWGfSgLzVdHuZ_czSc_dujTQDEj8q8",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 13:01:56.744 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 13:01:56.747 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 13:01:56.747 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:01:56.747 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 13:01:56.747 -06:00 [DBG] No PKCE used.
2018-07-17 13:01:56.747 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 13:01:56.747 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:02:05.788 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 13:02:05.802 -06:00 [DBG] Augmenting SignInContext
2018-07-17 13:02:05.802 -06:00 [DBG] Adding idp claim with value: local
2018-07-17 13:02:05.802 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-17 13:02:05.803 -06:00 [DBG] Adding auth_time claim with value: 1531854125
2018-07-17 13:02:05.803 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-17 13:02:05.803 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFC2P1NNKJV:00000003",
  "TimeStamp": "2018-07-17T19:02:05Z",
  "ProcessId": 6480,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-17 13:02:05.805 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-17 13:02:05.806 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-17 13:02:05.806 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-17 13:02:05.806 -06:00 [DBG] Start authorize callback request
2018-07-17 13:02:05.806 -06:00 [DBG] No user present in authorize request
2018-07-17 13:02:05.806 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 13:02:05.806 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:02:05.806 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 13:02:05.806 -06:00 [DBG] No PKCE used.
2018-07-17 13:02:05.806 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 13:02:05.806 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcU49G7YYaH5MIacuPHel3pogeCkRmaTKepx-9r26TZ8kfiCx2pvFzUjE49_a-sCP3ZVKDP5VWKSCzQqY7MIH8YErlw4s_dijTPGt7rOSclbc7j_gPA0RhJ8STU2ph7Tvfw0UguyMyQfvcpykSGUpAUrV5FhU0RVY3-KulAHXACkNdpu_XTFJVv7s2UdBA1VC7V4upzxcGt6tTpRDszrlVSYyAcogWd6OmyXauWlmafrvXNX-szrIe2YkWlTW_pFZtdFhcGSqUl4qvj0d21iXAGf6snAOG28UrEtYWGfSgLzVdHuZ_czSc_dujTQDEj8q8",
  "Nonce": "636674509167299480.NGMzYzJmZjEtYzdiZi00YjU0LTg0NDEtNWE0N2UyNzc2NWIyY2Q1NGFiNTEtZDcwYS00OThkLTg3NTktMTAwZGVmYjAzODZh",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674509167299480.NGMzYzJmZjEtYzdiZi00YjU0LTg0NDEtNWE0N2UyNzc2NWIyY2Q1NGFiNTEtZDcwYS00OThkLTg3NTktMTAwZGVmYjAzODZh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcU49G7YYaH5MIacuPHel3pogeCkRmaTKepx-9r26TZ8kfiCx2pvFzUjE49_a-sCP3ZVKDP5VWKSCzQqY7MIH8YErlw4s_dijTPGt7rOSclbc7j_gPA0RhJ8STU2ph7Tvfw0UguyMyQfvcpykSGUpAUrV5FhU0RVY3-KulAHXACkNdpu_XTFJVv7s2UdBA1VC7V4upzxcGt6tTpRDszrlVSYyAcogWd6OmyXauWlmafrvXNX-szrIe2YkWlTW_pFZtdFhcGSqUl4qvj0d21iXAGf6snAOG28UrEtYWGfSgLzVdHuZ_czSc_dujTQDEj8q8",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 13:02:05.806 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 13:02:05.809 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 13:02:05.809 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:02:05.809 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 13:02:05.809 -06:00 [DBG] No PKCE used.
2018-07-17 13:02:05.809 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 13:02:05.809 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:05:30.377 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-17 13:05:30.378 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-17 13:05:30.378 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-17 13:05:30.378 -06:00 [DBG] Start discovery request
2018-07-17 13:05:30.438 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-17 13:05:30.438 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-17 13:05:30.438 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-17 13:05:30.438 -06:00 [DBG] Start key discovery request
2018-07-17 13:05:30.467 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-17 13:05:30.467 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-17 13:05:30.467 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-17 13:05:30.467 -06:00 [DBG] Start authorize request
2018-07-17 13:05:30.468 -06:00 [DBG] No user present in authorize request
2018-07-17 13:05:30.468 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 13:05:30.468 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:05:30.468 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 13:05:30.468 -06:00 [DBG] No PKCE used.
2018-07-17 13:05:30.468 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 13:05:30.468 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHewZG2_Jwkzft0kU6AnTx2Epgkmkh5nV3a5qmQ3ddyfBMBD3UMYk7ISHzAvi9TX1lXm33n__lQFMx89BUUHD7zyiPrzkakRvH9Bw-QZbTZeUs8phJV9-Uu5_S4fHWQmIbISK0dj9NkTS4sFkVQ4OHYzvCtamGZHwBXxG68MUMiVz9cO48awY4Z4_5jAOAgfqEeE9zEAnKaIRThwCDjP2AsLoyqO5VzvoBClsubC4H4L26fCdZqut28vB6jmmgTkmZ9LOL5zQ2Omil6h7VvVbc-K6L4Xbd6IjW9Rx-kLzNhmiIRctthzVDAw9tBVEraA9N0",
  "Nonce": "636674511304530640.ZWE2Zjg2NTctNDM4Zi00YzFjLWFiMWMtNjgzNDBjNWYyMjc5YzgzYzBlNDctNWJhNC00NDIzLWIwMzctZGI4MGE2YjViYzVj",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674511304530640.ZWE2Zjg2NTctNDM4Zi00YzFjLWFiMWMtNjgzNDBjNWYyMjc5YzgzYzBlNDctNWJhNC00NDIzLWIwMzctZGI4MGE2YjViYzVj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHewZG2_Jwkzft0kU6AnTx2Epgkmkh5nV3a5qmQ3ddyfBMBD3UMYk7ISHzAvi9TX1lXm33n__lQFMx89BUUHD7zyiPrzkakRvH9Bw-QZbTZeUs8phJV9-Uu5_S4fHWQmIbISK0dj9NkTS4sFkVQ4OHYzvCtamGZHwBXxG68MUMiVz9cO48awY4Z4_5jAOAgfqEeE9zEAnKaIRThwCDjP2AsLoyqO5VzvoBClsubC4H4L26fCdZqut28vB6jmmgTkmZ9LOL5zQ2Omil6h7VvVbc-K6L4Xbd6IjW9Rx-kLzNhmiIRctthzVDAw9tBVEraA9N0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 13:05:30.468 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 13:05:30.470 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 13:05:30.470 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:05:30.470 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 13:05:30.470 -06:00 [DBG] No PKCE used.
2018-07-17 13:05:30.470 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 13:05:30.470 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:05:38.327 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 13:05:38.342 -06:00 [DBG] Augmenting SignInContext
2018-07-17 13:05:38.342 -06:00 [DBG] Adding idp claim with value: local
2018-07-17 13:05:38.342 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-17 13:05:38.342 -06:00 [DBG] Adding auth_time claim with value: 1531854338
2018-07-17 13:05:38.342 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-17 13:05:38.343 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFC2P1NNKK2:00000003",
  "TimeStamp": "2018-07-17T19:05:38Z",
  "ProcessId": 6480,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-17 13:05:38.346 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-17 13:05:38.346 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-17 13:05:38.346 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-17 13:05:38.346 -06:00 [DBG] Start authorize callback request
2018-07-17 13:05:38.346 -06:00 [DBG] No user present in authorize request
2018-07-17 13:05:38.346 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 13:05:38.346 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:05:38.346 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 13:05:38.346 -06:00 [DBG] No PKCE used.
2018-07-17 13:05:38.346 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 13:05:38.347 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHewZG2_Jwkzft0kU6AnTx2Epgkmkh5nV3a5qmQ3ddyfBMBD3UMYk7ISHzAvi9TX1lXm33n__lQFMx89BUUHD7zyiPrzkakRvH9Bw-QZbTZeUs8phJV9-Uu5_S4fHWQmIbISK0dj9NkTS4sFkVQ4OHYzvCtamGZHwBXxG68MUMiVz9cO48awY4Z4_5jAOAgfqEeE9zEAnKaIRThwCDjP2AsLoyqO5VzvoBClsubC4H4L26fCdZqut28vB6jmmgTkmZ9LOL5zQ2Omil6h7VvVbc-K6L4Xbd6IjW9Rx-kLzNhmiIRctthzVDAw9tBVEraA9N0",
  "Nonce": "636674511304530640.ZWE2Zjg2NTctNDM4Zi00YzFjLWFiMWMtNjgzNDBjNWYyMjc5YzgzYzBlNDctNWJhNC00NDIzLWIwMzctZGI4MGE2YjViYzVj",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674511304530640.ZWE2Zjg2NTctNDM4Zi00YzFjLWFiMWMtNjgzNDBjNWYyMjc5YzgzYzBlNDctNWJhNC00NDIzLWIwMzctZGI4MGE2YjViYzVj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHewZG2_Jwkzft0kU6AnTx2Epgkmkh5nV3a5qmQ3ddyfBMBD3UMYk7ISHzAvi9TX1lXm33n__lQFMx89BUUHD7zyiPrzkakRvH9Bw-QZbTZeUs8phJV9-Uu5_S4fHWQmIbISK0dj9NkTS4sFkVQ4OHYzvCtamGZHwBXxG68MUMiVz9cO48awY4Z4_5jAOAgfqEeE9zEAnKaIRThwCDjP2AsLoyqO5VzvoBClsubC4H4L26fCdZqut28vB6jmmgTkmZ9LOL5zQ2Omil6h7VvVbc-K6L4Xbd6IjW9Rx-kLzNhmiIRctthzVDAw9tBVEraA9N0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 13:05:38.347 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 13:05:38.349 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 13:05:38.349 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:05:38.349 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 13:05:38.349 -06:00 [DBG] No PKCE used.
2018-07-17 13:05:38.349 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 13:05:38.349 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:07:20.102 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-17 13:07:20.102 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-17 13:07:20.102 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-17 13:07:20.102 -06:00 [DBG] Start authorize request
2018-07-17 13:07:20.102 -06:00 [DBG] No user present in authorize request
2018-07-17 13:07:20.102 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 13:07:20.102 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:07:20.102 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 13:07:20.102 -06:00 [DBG] No PKCE used.
2018-07-17 13:07:20.102 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 13:07:20.102 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfN9SY11uyHUiG-DaoRZpI0c_YolIC5VT0b-7nrYLoa4YemtYUpSBveoVrQZcMTMc7mO55CVNV_PIMj0rshMgVt47kSeduVhJMRKI18Y8lrdJjJFdpCeMyUMoaEXfBiE0EKXxj9-2uLreOSglx3TdGHS91PMbInxUg_uh-wTlahiixQaCQ-vWL8Muv7FSKLpnbtsD4T-5lZN7UJCGeEhLjO90Mzuitzdmlw65HGh1Pw_gMSf7JP94H1Kb5AWBvrNJRNwztFulAiX_R3qo6iuMWiwpOoHk_9J2EbxcmQLzvGIgAVuyHFN42YqtNb-NdGAIg",
  "Nonce": "636674512400985890.NTk4MmY5NDctYTFlZi00OGU3LTkyM2UtMDk2NDgyOGQ5YTY3OWY1M2RhOTktNDc1NC00OGU1LTgzMTktM2UzZDcxYjFmNTNi",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674512400985890.NTk4MmY5NDctYTFlZi00OGU3LTkyM2UtMDk2NDgyOGQ5YTY3OWY1M2RhOTktNDc1NC00OGU1LTgzMTktM2UzZDcxYjFmNTNi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfN9SY11uyHUiG-DaoRZpI0c_YolIC5VT0b-7nrYLoa4YemtYUpSBveoVrQZcMTMc7mO55CVNV_PIMj0rshMgVt47kSeduVhJMRKI18Y8lrdJjJFdpCeMyUMoaEXfBiE0EKXxj9-2uLreOSglx3TdGHS91PMbInxUg_uh-wTlahiixQaCQ-vWL8Muv7FSKLpnbtsD4T-5lZN7UJCGeEhLjO90Mzuitzdmlw65HGh1Pw_gMSf7JP94H1Kb5AWBvrNJRNwztFulAiX_R3qo6iuMWiwpOoHk_9J2EbxcmQLzvGIgAVuyHFN42YqtNb-NdGAIg",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 13:07:20.102 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 13:07:20.105 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 13:07:20.105 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:07:20.105 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 13:07:20.105 -06:00 [DBG] No PKCE used.
2018-07-17 13:07:20.105 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 13:07:20.105 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:14:03.930 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-17 13:14:03.961 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-17 13:14:03.963 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-17 13:14:03.964 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-17 13:14:03.964 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-17 13:14:03.964 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-17 13:15:15.476 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-17 13:15:15.592 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-17 13:15:15.593 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-17 13:15:15.595 -06:00 [DBG] Start discovery request
2018-07-17 13:15:15.775 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-17 13:15:15.775 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-17 13:15:15.776 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-17 13:15:15.779 -06:00 [DBG] Start key discovery request
2018-07-17 13:15:15.846 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-17 13:15:15.849 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-17 13:15:15.849 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-17 13:15:15.852 -06:00 [DBG] Start authorize request
2018-07-17 13:15:15.869 -06:00 [DBG] No user present in authorize request
2018-07-17 13:15:15.873 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 13:15:15.886 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:15:15.891 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 13:15:15.892 -06:00 [DBG] No PKCE used.
2018-07-17 13:15:15.918 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 13:15:15.928 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeg26Co8YIkdog1k_4jlWc-Ng4cCMEHtpd9nUGZ3_rc5qr5IV4t6C5tj5ZjLuDoS875_TOPN2UZVeWSyMvpweY60td7fqpabiMMHlWL1GauEil2khwxDEOrdz8B9ZHTBuXOdaRJUixi0CWnCGzob2mtrAmX7m01i5mRJ5uNXGI0bNv3r1uhzZF_7WJ6HtUWNQCXitdGQvWdLKkFIc2lpyLdq2S3SdCKuoqFPaJlC6E_uqRgxLTHhdOG5IUmsctgvJVg37sOhLZDct2LhPZX6t35g_WKiOi4sUK1eQGx4OfuCLhM0bbF3gJhpFGtiWTuWsA",
  "Nonce": "636674517158162790.ODE0Y2Q0MjYtMGY5ZC00MDFmLWI3ZmEtOWY1OWNkNDllZGE4NzRiNzU4YTMtNmUzNy00NzQyLTkyNWYtZGM0Y2FiOWYyOThk",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674517158162790.ODE0Y2Q0MjYtMGY5ZC00MDFmLWI3ZmEtOWY1OWNkNDllZGE4NzRiNzU4YTMtNmUzNy00NzQyLTkyNWYtZGM0Y2FiOWYyOThk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeg26Co8YIkdog1k_4jlWc-Ng4cCMEHtpd9nUGZ3_rc5qr5IV4t6C5tj5ZjLuDoS875_TOPN2UZVeWSyMvpweY60td7fqpabiMMHlWL1GauEil2khwxDEOrdz8B9ZHTBuXOdaRJUixi0CWnCGzob2mtrAmX7m01i5mRJ5uNXGI0bNv3r1uhzZF_7WJ6HtUWNQCXitdGQvWdLKkFIc2lpyLdq2S3SdCKuoqFPaJlC6E_uqRgxLTHhdOG5IUmsctgvJVg37sOhLZDct2LhPZX6t35g_WKiOi4sUK1eQGx4OfuCLhM0bbF3gJhpFGtiWTuWsA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 13:15:15.934 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 13:15:16.236 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 13:15:16.237 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:15:16.237 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 13:15:16.237 -06:00 [DBG] No PKCE used.
2018-07-17 13:15:16.237 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 13:15:16.239 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:15:44.439 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 13:15:45.598 -06:00 [DBG] Augmenting SignInContext
2018-07-17 13:15:45.599 -06:00 [DBG] Adding idp claim with value: local
2018-07-17 13:15:45.600 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-17 13:15:45.600 -06:00 [DBG] Adding auth_time claim with value: 1531854945
2018-07-17 13:15:45.640 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-17 13:15:45.667 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFC36G704FM:00000003",
  "TimeStamp": "2018-07-17T19:15:45Z",
  "ProcessId": 8149,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-17 13:15:45.675 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-17 13:15:45.676 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-17 13:15:45.676 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-17 13:15:45.680 -06:00 [DBG] Start authorize callback request
2018-07-17 13:15:45.684 -06:00 [DBG] No user present in authorize request
2018-07-17 13:15:45.684 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 13:15:45.684 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:15:45.684 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 13:15:45.684 -06:00 [DBG] No PKCE used.
2018-07-17 13:15:45.684 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 13:15:45.684 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeg26Co8YIkdog1k_4jlWc-Ng4cCMEHtpd9nUGZ3_rc5qr5IV4t6C5tj5ZjLuDoS875_TOPN2UZVeWSyMvpweY60td7fqpabiMMHlWL1GauEil2khwxDEOrdz8B9ZHTBuXOdaRJUixi0CWnCGzob2mtrAmX7m01i5mRJ5uNXGI0bNv3r1uhzZF_7WJ6HtUWNQCXitdGQvWdLKkFIc2lpyLdq2S3SdCKuoqFPaJlC6E_uqRgxLTHhdOG5IUmsctgvJVg37sOhLZDct2LhPZX6t35g_WKiOi4sUK1eQGx4OfuCLhM0bbF3gJhpFGtiWTuWsA",
  "Nonce": "636674517158162790.ODE0Y2Q0MjYtMGY5ZC00MDFmLWI3ZmEtOWY1OWNkNDllZGE4NzRiNzU4YTMtNmUzNy00NzQyLTkyNWYtZGM0Y2FiOWYyOThk",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674517158162790.ODE0Y2Q0MjYtMGY5ZC00MDFmLWI3ZmEtOWY1OWNkNDllZGE4NzRiNzU4YTMtNmUzNy00NzQyLTkyNWYtZGM0Y2FiOWYyOThk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeg26Co8YIkdog1k_4jlWc-Ng4cCMEHtpd9nUGZ3_rc5qr5IV4t6C5tj5ZjLuDoS875_TOPN2UZVeWSyMvpweY60td7fqpabiMMHlWL1GauEil2khwxDEOrdz8B9ZHTBuXOdaRJUixi0CWnCGzob2mtrAmX7m01i5mRJ5uNXGI0bNv3r1uhzZF_7WJ6HtUWNQCXitdGQvWdLKkFIc2lpyLdq2S3SdCKuoqFPaJlC6E_uqRgxLTHhdOG5IUmsctgvJVg37sOhLZDct2LhPZX6t35g_WKiOi4sUK1eQGx4OfuCLhM0bbF3gJhpFGtiWTuWsA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 13:15:45.684 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 13:15:45.688 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 13:15:45.688 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 13:15:45.688 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 13:15:45.688 -06:00 [DBG] No PKCE used.
2018-07-17 13:15:45.688 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 13:15:45.689 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:03:25.170 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-17 15:03:25.170 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-17 15:03:25.170 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-17 15:03:25.170 -06:00 [DBG] Start authorize request
2018-07-17 15:03:25.171 -06:00 [DBG] No user present in authorize request
2018-07-17 15:03:25.171 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:03:25.171 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:03:25.171 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:03:25.171 -06:00 [DBG] No PKCE used.
2018-07-17 15:03:25.171 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:03:25.171 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdWayI1JU12sM603mEdqGN-sQGqozkUKeT1sP8NNsfQXsTb0Hwuma_X0A1EzLGob60uu7x1oqDd4vdy54X4QWJw9epgQc9QXloqU9Seo7gB-Nn8nX3ufyGmrnb92y7-ULD1opSPg8jaBLowsgKE-lF7sszYmUcQTD87gsF4u69atWnQ8ADNePzEyTENAWLcNgckeJ4DpG_lSDPnFjFVItPaykkMlH4_EQwh5wvDZhCCLUj9hFzrg2rhguufJUYoHtPvAB6wJ2-FlwUNsSEjH7rhyon6YxW6sLdSMSsaGeXJb7sap6AiUY3TuZvbsCv3gEE",
  "Nonce": "636674582051663110.Y2NkZTg4ODMtZDc3ZC00ZmMwLWI1MGMtMjdkMDllY2M3NTkyM2JmYmI5YjItNTJlMC00OTcyLWI3MTgtNWM4YWRmM2M0MWMz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674582051663110.Y2NkZTg4ODMtZDc3ZC00ZmMwLWI1MGMtMjdkMDllY2M3NTkyM2JmYmI5YjItNTJlMC00OTcyLWI3MTgtNWM4YWRmM2M0MWMz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdWayI1JU12sM603mEdqGN-sQGqozkUKeT1sP8NNsfQXsTb0Hwuma_X0A1EzLGob60uu7x1oqDd4vdy54X4QWJw9epgQc9QXloqU9Seo7gB-Nn8nX3ufyGmrnb92y7-ULD1opSPg8jaBLowsgKE-lF7sszYmUcQTD87gsF4u69atWnQ8ADNePzEyTENAWLcNgckeJ4DpG_lSDPnFjFVItPaykkMlH4_EQwh5wvDZhCCLUj9hFzrg2rhguufJUYoHtPvAB6wJ2-FlwUNsSEjH7rhyon6YxW6sLdSMSsaGeXJb7sap6AiUY3TuZvbsCv3gEE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 15:03:25.171 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 15:03:25.174 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:03:25.174 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:03:25.174 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:03:25.174 -06:00 [DBG] No PKCE used.
2018-07-17 15:03:25.174 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:03:25.174 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:03:35.002 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 15:03:35.022 -06:00 [DBG] Augmenting SignInContext
2018-07-17 15:03:35.022 -06:00 [DBG] Adding idp claim with value: local
2018-07-17 15:03:35.022 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-17 15:03:35.022 -06:00 [DBG] Adding auth_time claim with value: 1531861415
2018-07-17 15:03:35.023 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-17 15:03:35.023 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFC36G704FP:00000003",
  "TimeStamp": "2018-07-17T21:03:35Z",
  "ProcessId": 8149,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-17 15:03:35.026 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-17 15:03:35.026 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-17 15:03:35.026 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-17 15:03:35.026 -06:00 [DBG] Start authorize callback request
2018-07-17 15:03:35.026 -06:00 [DBG] No user present in authorize request
2018-07-17 15:03:35.026 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:03:35.026 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:03:35.026 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:03:35.026 -06:00 [DBG] No PKCE used.
2018-07-17 15:03:35.027 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:03:35.027 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdWayI1JU12sM603mEdqGN-sQGqozkUKeT1sP8NNsfQXsTb0Hwuma_X0A1EzLGob60uu7x1oqDd4vdy54X4QWJw9epgQc9QXloqU9Seo7gB-Nn8nX3ufyGmrnb92y7-ULD1opSPg8jaBLowsgKE-lF7sszYmUcQTD87gsF4u69atWnQ8ADNePzEyTENAWLcNgckeJ4DpG_lSDPnFjFVItPaykkMlH4_EQwh5wvDZhCCLUj9hFzrg2rhguufJUYoHtPvAB6wJ2-FlwUNsSEjH7rhyon6YxW6sLdSMSsaGeXJb7sap6AiUY3TuZvbsCv3gEE",
  "Nonce": "636674582051663110.Y2NkZTg4ODMtZDc3ZC00ZmMwLWI1MGMtMjdkMDllY2M3NTkyM2JmYmI5YjItNTJlMC00OTcyLWI3MTgtNWM4YWRmM2M0MWMz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674582051663110.Y2NkZTg4ODMtZDc3ZC00ZmMwLWI1MGMtMjdkMDllY2M3NTkyM2JmYmI5YjItNTJlMC00OTcyLWI3MTgtNWM4YWRmM2M0MWMz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdWayI1JU12sM603mEdqGN-sQGqozkUKeT1sP8NNsfQXsTb0Hwuma_X0A1EzLGob60uu7x1oqDd4vdy54X4QWJw9epgQc9QXloqU9Seo7gB-Nn8nX3ufyGmrnb92y7-ULD1opSPg8jaBLowsgKE-lF7sszYmUcQTD87gsF4u69atWnQ8ADNePzEyTENAWLcNgckeJ4DpG_lSDPnFjFVItPaykkMlH4_EQwh5wvDZhCCLUj9hFzrg2rhguufJUYoHtPvAB6wJ2-FlwUNsSEjH7rhyon6YxW6sLdSMSsaGeXJb7sap6AiUY3TuZvbsCv3gEE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 15:03:35.027 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 15:03:35.030 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:03:35.030 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:03:35.030 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:03:35.030 -06:00 [DBG] No PKCE used.
2018-07-17 15:03:35.031 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:03:35.031 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:05:46.899 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-17 15:05:46.900 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-17 15:05:46.900 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-17 15:05:46.900 -06:00 [DBG] Start authorize request
2018-07-17 15:05:46.900 -06:00 [DBG] No user present in authorize request
2018-07-17 15:05:46.900 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:05:46.900 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:05:46.900 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:05:46.900 -06:00 [DBG] No PKCE used.
2018-07-17 15:05:46.900 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:05:46.900 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcKfoUWX8FNi9Rblq1YjQsw0xBTq9GWxNzWrcMHeVWVKlhpEZvPakctrxzOyGwBRvaHETP3aPuLy8dIGct13MWU__eohs928y3l48JGyRLGRMRHQpYv1rWxWZFpdliaTCFE9p7cCJo0BmQ-Bmtg9ekSIbF-H9dOhIjs_PlPNrU8FOBIRQF53WV_aTqYeEm3WRLy8nxg3RTkTWxuHrM4oZWFksji2XMYTOW9pmJTYsmz08Yc0oQhwC9xWSfALu0obCERXkA3ooaAk9lExQnURX-yodjoVYsMeYyq3susTdD1w12UBtpizLNpF0T3uqzc278",
  "Nonce": "636674583468960270.Njk3NDRhYzgtZWYzNy00NTNkLWFmNjctMjAxMzlhM2VmYWZjMGUyYWVmNTktMzhkZS00Y2RlLTliZGYtMGIwMDQyOTYwY2M0",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674583468960270.Njk3NDRhYzgtZWYzNy00NTNkLWFmNjctMjAxMzlhM2VmYWZjMGUyYWVmNTktMzhkZS00Y2RlLTliZGYtMGIwMDQyOTYwY2M0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcKfoUWX8FNi9Rblq1YjQsw0xBTq9GWxNzWrcMHeVWVKlhpEZvPakctrxzOyGwBRvaHETP3aPuLy8dIGct13MWU__eohs928y3l48JGyRLGRMRHQpYv1rWxWZFpdliaTCFE9p7cCJo0BmQ-Bmtg9ekSIbF-H9dOhIjs_PlPNrU8FOBIRQF53WV_aTqYeEm3WRLy8nxg3RTkTWxuHrM4oZWFksji2XMYTOW9pmJTYsmz08Yc0oQhwC9xWSfALu0obCERXkA3ooaAk9lExQnURX-yodjoVYsMeYyq3susTdD1w12UBtpizLNpF0T3uqzc278",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 15:05:46.900 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 15:05:46.930 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:05:46.930 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:05:46.931 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:05:46.931 -06:00 [DBG] No PKCE used.
2018-07-17 15:05:46.931 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:05:46.931 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:05:57.080 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 15:05:57.097 -06:00 [DBG] Augmenting SignInContext
2018-07-17 15:05:57.097 -06:00 [DBG] Adding idp claim with value: local
2018-07-17 15:05:57.097 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-17 15:05:57.098 -06:00 [DBG] Adding auth_time claim with value: 1531861557
2018-07-17 15:05:57.098 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-17 15:05:57.098 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFC36G704FT:00000003",
  "TimeStamp": "2018-07-17T21:05:57Z",
  "ProcessId": 8149,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-17 15:05:57.101 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-17 15:05:57.101 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-17 15:05:57.101 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-17 15:05:57.101 -06:00 [DBG] Start authorize callback request
2018-07-17 15:05:57.101 -06:00 [DBG] No user present in authorize request
2018-07-17 15:05:57.101 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:05:57.101 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:05:57.101 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:05:57.101 -06:00 [DBG] No PKCE used.
2018-07-17 15:05:57.101 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:05:57.102 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcKfoUWX8FNi9Rblq1YjQsw0xBTq9GWxNzWrcMHeVWVKlhpEZvPakctrxzOyGwBRvaHETP3aPuLy8dIGct13MWU__eohs928y3l48JGyRLGRMRHQpYv1rWxWZFpdliaTCFE9p7cCJo0BmQ-Bmtg9ekSIbF-H9dOhIjs_PlPNrU8FOBIRQF53WV_aTqYeEm3WRLy8nxg3RTkTWxuHrM4oZWFksji2XMYTOW9pmJTYsmz08Yc0oQhwC9xWSfALu0obCERXkA3ooaAk9lExQnURX-yodjoVYsMeYyq3susTdD1w12UBtpizLNpF0T3uqzc278",
  "Nonce": "636674583468960270.Njk3NDRhYzgtZWYzNy00NTNkLWFmNjctMjAxMzlhM2VmYWZjMGUyYWVmNTktMzhkZS00Y2RlLTliZGYtMGIwMDQyOTYwY2M0",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674583468960270.Njk3NDRhYzgtZWYzNy00NTNkLWFmNjctMjAxMzlhM2VmYWZjMGUyYWVmNTktMzhkZS00Y2RlLTliZGYtMGIwMDQyOTYwY2M0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcKfoUWX8FNi9Rblq1YjQsw0xBTq9GWxNzWrcMHeVWVKlhpEZvPakctrxzOyGwBRvaHETP3aPuLy8dIGct13MWU__eohs928y3l48JGyRLGRMRHQpYv1rWxWZFpdliaTCFE9p7cCJo0BmQ-Bmtg9ekSIbF-H9dOhIjs_PlPNrU8FOBIRQF53WV_aTqYeEm3WRLy8nxg3RTkTWxuHrM4oZWFksji2XMYTOW9pmJTYsmz08Yc0oQhwC9xWSfALu0obCERXkA3ooaAk9lExQnURX-yodjoVYsMeYyq3susTdD1w12UBtpizLNpF0T3uqzc278",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 15:05:57.102 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 15:05:57.104 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:05:57.104 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:05:57.104 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:05:57.104 -06:00 [DBG] No PKCE used.
2018-07-17 15:05:57.104 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:05:57.104 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:09:49.080 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 15:09:49.083 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:09:49.084 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:09:49.084 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:09:49.084 -06:00 [DBG] No PKCE used.
2018-07-17 15:09:49.084 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:09:49.084 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:09:58.217 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 15:09:58.231 -06:00 [DBG] Augmenting SignInContext
2018-07-17 15:09:58.231 -06:00 [DBG] Adding idp claim with value: local
2018-07-17 15:09:58.231 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-17 15:09:58.232 -06:00 [DBG] Adding auth_time claim with value: 1531861798
2018-07-17 15:09:58.232 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-17 15:09:58.232 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFC36G704G0:00000002",
  "TimeStamp": "2018-07-17T21:09:58Z",
  "ProcessId": 8149,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-17 15:09:58.234 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-17 15:09:58.235 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-17 15:09:58.235 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-17 15:09:58.235 -06:00 [DBG] Start authorize callback request
2018-07-17 15:09:58.235 -06:00 [DBG] No user present in authorize request
2018-07-17 15:09:58.235 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:09:58.235 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:09:58.235 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:09:58.235 -06:00 [DBG] No PKCE used.
2018-07-17 15:09:58.235 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:09:58.235 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "http://localhost:5000/signin-oidc",
  "AllowedRedirectUris": [
    "http://localhost:5000/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcKfoUWX8FNi9Rblq1YjQsw0xBTq9GWxNzWrcMHeVWVKlhpEZvPakctrxzOyGwBRvaHETP3aPuLy8dIGct13MWU__eohs928y3l48JGyRLGRMRHQpYv1rWxWZFpdliaTCFE9p7cCJo0BmQ-Bmtg9ekSIbF-H9dOhIjs_PlPNrU8FOBIRQF53WV_aTqYeEm3WRLy8nxg3RTkTWxuHrM4oZWFksji2XMYTOW9pmJTYsmz08Yc0oQhwC9xWSfALu0obCERXkA3ooaAk9lExQnURX-yodjoVYsMeYyq3susTdD1w12UBtpizLNpF0T3uqzc278",
  "Nonce": "636674583468960270.Njk3NDRhYzgtZWYzNy00NTNkLWFmNjctMjAxMzlhM2VmYWZjMGUyYWVmNTktMzhkZS00Y2RlLTliZGYtMGIwMDQyOTYwY2M0",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "http://localhost:5000/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674583468960270.Njk3NDRhYzgtZWYzNy00NTNkLWFmNjctMjAxMzlhM2VmYWZjMGUyYWVmNTktMzhkZS00Y2RlLTliZGYtMGIwMDQyOTYwY2M0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcKfoUWX8FNi9Rblq1YjQsw0xBTq9GWxNzWrcMHeVWVKlhpEZvPakctrxzOyGwBRvaHETP3aPuLy8dIGct13MWU__eohs928y3l48JGyRLGRMRHQpYv1rWxWZFpdliaTCFE9p7cCJo0BmQ-Bmtg9ekSIbF-H9dOhIjs_PlPNrU8FOBIRQF53WV_aTqYeEm3WRLy8nxg3RTkTWxuHrM4oZWFksji2XMYTOW9pmJTYsmz08Yc0oQhwC9xWSfALu0obCERXkA3ooaAk9lExQnURX-yodjoVYsMeYyq3susTdD1w12UBtpizLNpF0T3uqzc278",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 15:09:58.235 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 15:09:58.238 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:09:58.238 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:09:58.238 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:09:58.238 -06:00 [DBG] No PKCE used.
2018-07-17 15:09:58.238 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:09:58.238 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:15:31.467 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-17 15:15:31.499 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-17 15:15:31.502 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-17 15:15:31.502 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-17 15:15:31.502 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-17 15:15:31.502 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-17 15:15:52.655 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-17 15:15:52.768 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-17 15:15:52.769 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-17 15:15:52.771 -06:00 [DBG] Start discovery request
2018-07-17 15:15:52.940 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-17 15:15:52.941 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-17 15:15:52.941 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-17 15:15:52.944 -06:00 [DBG] Start key discovery request
2018-07-17 15:15:53.002 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-17 15:15:53.005 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-17 15:15:53.005 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-17 15:15:53.008 -06:00 [DBG] Start authorize request
2018-07-17 15:15:53.023 -06:00 [DBG] No user present in authorize request
2018-07-17 15:15:53.026 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:15:53.035 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:15:53.039 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:15:53.040 -06:00 [DBG] No PKCE used.
2018-07-17 15:15:53.064 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:15:53.075 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd3qNrC56-AJMLBVR2Dl_YmiemsKS6N_MjcdESwKybszgsBJqwEPwhE0EMJzv2MiGRGLNY0I_rD_sEG5fq7YkvVMGlcuZFgDEts1i96GKtE4Ozd_mIBuRY15tmXGvKPEeur9kfFt2mgQgYbrzf8mfP10erQl6bbKdh6E-xFqeRLtaHZLlErWV5RULTTz9ZeKcoLY7obm-XWMk18-XNrCJZ315qhVYbQUigiygbpOoXM4khWHWVlj0Z4qrkWvlvS6u3Ss5QStxiag0hNKfGAG5SsevU-hTHDbXHEENqcaQO997frSOEzu0Djw3ItybFhRJU",
  "Nonce": "636674589529783340.NDc4MDgzZDgtNWI5ZS00NDAzLTk3NzctNjE5MGJlZmVhZGZhOTkwOTUyNWYtOWFiMC00MWU0LTgzMGYtNmM3NmE1MmI3ZDQw",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674589529783340.NDc4MDgzZDgtNWI5ZS00NDAzLTk3NzctNjE5MGJlZmVhZGZhOTkwOTUyNWYtOWFiMC00MWU0LTgzMGYtNmM3NmE1MmI3ZDQw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd3qNrC56-AJMLBVR2Dl_YmiemsKS6N_MjcdESwKybszgsBJqwEPwhE0EMJzv2MiGRGLNY0I_rD_sEG5fq7YkvVMGlcuZFgDEts1i96GKtE4Ozd_mIBuRY15tmXGvKPEeur9kfFt2mgQgYbrzf8mfP10erQl6bbKdh6E-xFqeRLtaHZLlErWV5RULTTz9ZeKcoLY7obm-XWMk18-XNrCJZ315qhVYbQUigiygbpOoXM4khWHWVlj0Z4qrkWvlvS6u3Ss5QStxiag0hNKfGAG5SsevU-hTHDbXHEENqcaQO997frSOEzu0Djw3ItybFhRJU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 15:15:53.080 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 15:15:53.369 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:15:53.370 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:15:53.370 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:15:53.370 -06:00 [DBG] No PKCE used.
2018-07-17 15:15:53.370 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:15:53.372 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:16:05.859 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 15:16:07.002 -06:00 [DBG] Augmenting SignInContext
2018-07-17 15:16:07.004 -06:00 [DBG] Adding idp claim with value: local
2018-07-17 15:16:07.004 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-17 15:16:07.004 -06:00 [DBG] Adding auth_time claim with value: 1531862167
2018-07-17 15:16:07.043 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-17 15:16:07.069 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFC59T2470E:00000003",
  "TimeStamp": "2018-07-17T21:16:07Z",
  "ProcessId": 16679,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-17 15:16:07.078 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-17 15:16:07.078 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-17 15:16:07.078 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-17 15:16:07.082 -06:00 [DBG] Start authorize callback request
2018-07-17 15:16:07.085 -06:00 [DBG] No user present in authorize request
2018-07-17 15:16:07.085 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:16:07.085 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:16:07.085 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:16:07.085 -06:00 [DBG] No PKCE used.
2018-07-17 15:16:07.085 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:16:07.085 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd3qNrC56-AJMLBVR2Dl_YmiemsKS6N_MjcdESwKybszgsBJqwEPwhE0EMJzv2MiGRGLNY0I_rD_sEG5fq7YkvVMGlcuZFgDEts1i96GKtE4Ozd_mIBuRY15tmXGvKPEeur9kfFt2mgQgYbrzf8mfP10erQl6bbKdh6E-xFqeRLtaHZLlErWV5RULTTz9ZeKcoLY7obm-XWMk18-XNrCJZ315qhVYbQUigiygbpOoXM4khWHWVlj0Z4qrkWvlvS6u3Ss5QStxiag0hNKfGAG5SsevU-hTHDbXHEENqcaQO997frSOEzu0Djw3ItybFhRJU",
  "Nonce": "636674589529783340.NDc4MDgzZDgtNWI5ZS00NDAzLTk3NzctNjE5MGJlZmVhZGZhOTkwOTUyNWYtOWFiMC00MWU0LTgzMGYtNmM3NmE1MmI3ZDQw",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674589529783340.NDc4MDgzZDgtNWI5ZS00NDAzLTk3NzctNjE5MGJlZmVhZGZhOTkwOTUyNWYtOWFiMC00MWU0LTgzMGYtNmM3NmE1MmI3ZDQw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd3qNrC56-AJMLBVR2Dl_YmiemsKS6N_MjcdESwKybszgsBJqwEPwhE0EMJzv2MiGRGLNY0I_rD_sEG5fq7YkvVMGlcuZFgDEts1i96GKtE4Ozd_mIBuRY15tmXGvKPEeur9kfFt2mgQgYbrzf8mfP10erQl6bbKdh6E-xFqeRLtaHZLlErWV5RULTTz9ZeKcoLY7obm-XWMk18-XNrCJZ315qhVYbQUigiygbpOoXM4khWHWVlj0Z4qrkWvlvS6u3Ss5QStxiag0hNKfGAG5SsevU-hTHDbXHEENqcaQO997frSOEzu0Djw3ItybFhRJU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 15:16:07.085 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 15:16:07.089 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:16:07.089 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:16:07.089 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:16:07.089 -06:00 [DBG] No PKCE used.
2018-07-17 15:16:07.089 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:16:07.089 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:22:22.434 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-17 15:22:22.434 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-17 15:22:22.434 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-17 15:22:22.434 -06:00 [DBG] Start authorize request
2018-07-17 15:22:22.434 -06:00 [DBG] No user present in authorize request
2018-07-17 15:22:22.434 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:22:22.434 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:22:22.434 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:22:22.434 -06:00 [DBG] No PKCE used.
2018-07-17 15:22:22.435 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:22:22.435 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHduv4mrlzISgxES462WYiMfvdttzjBm6eTLOKyoX4XznSlTSu4_dQ5WE5kxaYKLocevn1TSZL9Ml3sW8NC9-9NG5OLobb7ctf97QDhmYjj2cCh3HWV3VYUuAbGR2EVRLZDUaJrPVv_8CiAGzoUH53dWdNFkN0eCN9mIRTgjq3G82B5gcZG5BlevkvsLC1jBChON-en2wSyw3pXICTq7rx67jcZGYdTlZlFRfs4kfsQkBkAjXNdu1FeduIunMuRUkhQ6HlgH7MsPDgGnzNBc4BhKxu89mLbku2c5wwebLLnIzF4h005UJbfvMZg4TlJCviE",
  "Nonce": "636674593424296340.NThiODVjYjktNTZjNS00N2Y3LWFkNWUtMTE3YmYzNmNhODM2ZTA0MDA5MTEtMTFjYi00MGZhLWI4MDYtOTMzMTc0YWEzNWM5",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674593424296340.NThiODVjYjktNTZjNS00N2Y3LWFkNWUtMTE3YmYzNmNhODM2ZTA0MDA5MTEtMTFjYi00MGZhLWI4MDYtOTMzMTc0YWEzNWM5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHduv4mrlzISgxES462WYiMfvdttzjBm6eTLOKyoX4XznSlTSu4_dQ5WE5kxaYKLocevn1TSZL9Ml3sW8NC9-9NG5OLobb7ctf97QDhmYjj2cCh3HWV3VYUuAbGR2EVRLZDUaJrPVv_8CiAGzoUH53dWdNFkN0eCN9mIRTgjq3G82B5gcZG5BlevkvsLC1jBChON-en2wSyw3pXICTq7rx67jcZGYdTlZlFRfs4kfsQkBkAjXNdu1FeduIunMuRUkhQ6HlgH7MsPDgGnzNBc4BhKxu89mLbku2c5wwebLLnIzF4h005UJbfvMZg4TlJCviE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 15:22:22.435 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 15:22:22.454 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:22:22.455 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:22:22.455 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:22:22.455 -06:00 [DBG] No PKCE used.
2018-07-17 15:22:22.455 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:22:22.455 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:22:34.480 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 15:22:34.486 -06:00 [INF] {
  "Name": "User Login Failure",
  "Category": "Authentication",
  "EventType": "Failure",
  "Id": 1001,
  "Username": "jen@email.com",
  "Endpoint": "UI",
  "Message": "invalid credentials",
  "ActivityId": "0HLFC59T2470I:00000003",
  "TimeStamp": "2018-07-17T21:22:34Z",
  "ProcessId": 16679,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-17 15:22:34.488 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:22:34.488 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:22:34.488 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:22:34.488 -06:00 [DBG] No PKCE used.
2018-07-17 15:22:34.488 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:22:34.488 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:22:47.418 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:22:47.418 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:22:47.418 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:22:47.418 -06:00 [DBG] No PKCE used.
2018-07-17 15:22:47.418 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:22:47.418 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:23:34.176 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-17 15:23:34.176 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-17 15:23:34.176 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-17 15:23:34.176 -06:00 [DBG] Start authorize request
2018-07-17 15:23:34.176 -06:00 [DBG] No user present in authorize request
2018-07-17 15:23:34.176 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:23:34.176 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:23:34.176 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:23:34.176 -06:00 [DBG] No PKCE used.
2018-07-17 15:23:34.176 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:23:34.176 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcW6vBLoxVzFQOilR4G8K8AmfQ_yg63og1J_bdBzFxG7C2mlVJ0sgbRlr7KabwZOGUqV9n5f2abIeQHSGD8DZj9C-7J5AtWIc3lS2V8JVx9PIuTrnu4QmCmFJaYBDb4iCqBHkStN3Ocj9AEikIXeXjNI1tk74rk_4uttUSmdZzMKYrkntGtDGP-DhnRA99vYbw_xpDpp11ePUnFDyhbhf-aUssM_UglAuzhNsvzEDhpLB-619qUsCLMICybM6tJNBhmeNDBFJMd9X52gR3V7afb15hiHocCsSjWZtEPyueCLL9J8jrgOqnic_SPYk9ho4Y",
  "Nonce": "636674594141721620.OGM0NjdiYjktMzA5Zi00N2Y1LWIxNTgtMDNkZGM2MjY0ZmNlNzk1MmRjMDgtOTQ1Yi00M2JlLTg0OWEtNjY4MTFhZjBmMzM3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674594141721620.OGM0NjdiYjktMzA5Zi00N2Y1LWIxNTgtMDNkZGM2MjY0ZmNlNzk1MmRjMDgtOTQ1Yi00M2JlLTg0OWEtNjY4MTFhZjBmMzM3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcW6vBLoxVzFQOilR4G8K8AmfQ_yg63og1J_bdBzFxG7C2mlVJ0sgbRlr7KabwZOGUqV9n5f2abIeQHSGD8DZj9C-7J5AtWIc3lS2V8JVx9PIuTrnu4QmCmFJaYBDb4iCqBHkStN3Ocj9AEikIXeXjNI1tk74rk_4uttUSmdZzMKYrkntGtDGP-DhnRA99vYbw_xpDpp11ePUnFDyhbhf-aUssM_UglAuzhNsvzEDhpLB-619qUsCLMICybM6tJNBhmeNDBFJMd9X52gR3V7afb15hiHocCsSjWZtEPyueCLL9J8jrgOqnic_SPYk9ho4Y",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 15:23:34.176 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 15:23:34.179 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:23:34.179 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:23:34.179 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:23:34.179 -06:00 [DBG] No PKCE used.
2018-07-17 15:23:34.179 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:23:34.179 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:24:09.582 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-17 15:24:09.582 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-17 15:24:09.582 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-17 15:24:09.582 -06:00 [DBG] Start authorize request
2018-07-17 15:24:09.582 -06:00 [DBG] No user present in authorize request
2018-07-17 15:24:09.582 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:24:09.582 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:24:09.582 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:24:09.582 -06:00 [DBG] No PKCE used.
2018-07-17 15:24:09.582 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:24:09.582 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfFMMA1uk8tSSIw03wpgT4rha6YB2Zf7Ch8884PUDm22b1oM4A5hB2_Xbne1rGJZTS4XCM-lT_Nv8c-u_8FDuYqUcwQl4obOmOGE7I7Encvj0S9rarzbq7i2XSNm-5PZqeqyhMhiHFpjektB8_DOmq-z9XBk_qQndhugbasmmLjZwxtAJeiKwhx79iFHj4VQVr2Q6eiFO1TflYTAxn69VMGFA14VSg1y4_OCF9u8CtAhfnuzejh-ONhknbe0-QKM07reLvRk9Zls-xH4Lj_vFtEwxTaE58jjj36KpjhI9cwpH8Ig2zHR24PdE8BShNLXwE",
  "Nonce": "636674594495771730.MTg2ZjA2ODUtNmJiOC00NTQyLWE2MmMtNTYwNjcyOGE5NzE5MDhmNzdlMjktZTVlYy00ZWJmLTkzODQtNzBkNTA5NTQ5OGRi",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674594495771730.MTg2ZjA2ODUtNmJiOC00NTQyLWE2MmMtNTYwNjcyOGE5NzE5MDhmNzdlMjktZTVlYy00ZWJmLTkzODQtNzBkNTA5NTQ5OGRi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfFMMA1uk8tSSIw03wpgT4rha6YB2Zf7Ch8884PUDm22b1oM4A5hB2_Xbne1rGJZTS4XCM-lT_Nv8c-u_8FDuYqUcwQl4obOmOGE7I7Encvj0S9rarzbq7i2XSNm-5PZqeqyhMhiHFpjektB8_DOmq-z9XBk_qQndhugbasmmLjZwxtAJeiKwhx79iFHj4VQVr2Q6eiFO1TflYTAxn69VMGFA14VSg1y4_OCF9u8CtAhfnuzejh-ONhknbe0-QKM07reLvRk9Zls-xH4Lj_vFtEwxTaE58jjj36KpjhI9cwpH8Ig2zHR24PdE8BShNLXwE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 15:24:09.582 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 15:24:09.585 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:24:09.585 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:24:09.585 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:24:09.585 -06:00 [DBG] No PKCE used.
2018-07-17 15:24:09.585 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:24:09.585 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:24:22.324 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 15:24:22.340 -06:00 [DBG] Augmenting SignInContext
2018-07-17 15:24:22.340 -06:00 [DBG] Adding idp claim with value: local
2018-07-17 15:24:22.340 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-17 15:24:22.340 -06:00 [DBG] Adding auth_time claim with value: 1531862662
2018-07-17 15:24:22.341 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-17 15:24:22.341 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFC59T2470I:00000009",
  "TimeStamp": "2018-07-17T21:24:22Z",
  "ProcessId": 16679,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-17 15:24:22.343 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-17 15:24:22.343 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-17 15:24:22.343 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-17 15:24:22.344 -06:00 [DBG] Start authorize callback request
2018-07-17 15:24:22.344 -06:00 [DBG] No user present in authorize request
2018-07-17 15:24:22.344 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:24:22.344 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:24:22.344 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:24:22.344 -06:00 [DBG] No PKCE used.
2018-07-17 15:24:22.344 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:24:22.344 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfFMMA1uk8tSSIw03wpgT4rha6YB2Zf7Ch8884PUDm22b1oM4A5hB2_Xbne1rGJZTS4XCM-lT_Nv8c-u_8FDuYqUcwQl4obOmOGE7I7Encvj0S9rarzbq7i2XSNm-5PZqeqyhMhiHFpjektB8_DOmq-z9XBk_qQndhugbasmmLjZwxtAJeiKwhx79iFHj4VQVr2Q6eiFO1TflYTAxn69VMGFA14VSg1y4_OCF9u8CtAhfnuzejh-ONhknbe0-QKM07reLvRk9Zls-xH4Lj_vFtEwxTaE58jjj36KpjhI9cwpH8Ig2zHR24PdE8BShNLXwE",
  "Nonce": "636674594495771730.MTg2ZjA2ODUtNmJiOC00NTQyLWE2MmMtNTYwNjcyOGE5NzE5MDhmNzdlMjktZTVlYy00ZWJmLTkzODQtNzBkNTA5NTQ5OGRi",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674594495771730.MTg2ZjA2ODUtNmJiOC00NTQyLWE2MmMtNTYwNjcyOGE5NzE5MDhmNzdlMjktZTVlYy00ZWJmLTkzODQtNzBkNTA5NTQ5OGRi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfFMMA1uk8tSSIw03wpgT4rha6YB2Zf7Ch8884PUDm22b1oM4A5hB2_Xbne1rGJZTS4XCM-lT_Nv8c-u_8FDuYqUcwQl4obOmOGE7I7Encvj0S9rarzbq7i2XSNm-5PZqeqyhMhiHFpjektB8_DOmq-z9XBk_qQndhugbasmmLjZwxtAJeiKwhx79iFHj4VQVr2Q6eiFO1TflYTAxn69VMGFA14VSg1y4_OCF9u8CtAhfnuzejh-ONhknbe0-QKM07reLvRk9Zls-xH4Lj_vFtEwxTaE58jjj36KpjhI9cwpH8Ig2zHR24PdE8BShNLXwE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 15:24:22.344 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 15:24:22.347 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:24:22.347 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:24:22.347 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:24:22.347 -06:00 [DBG] No PKCE used.
2018-07-17 15:24:22.347 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:24:22.347 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:08.968 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 15:25:08.984 -06:00 [DBG] Augmenting SignInContext
2018-07-17 15:25:08.984 -06:00 [DBG] Adding idp claim with value: local
2018-07-17 15:25:08.984 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-17 15:25:08.984 -06:00 [DBG] Adding auth_time claim with value: 1531862708
2018-07-17 15:25:08.984 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-17 15:25:08.985 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFC59T2470I:0000000C",
  "TimeStamp": "2018-07-17T21:25:08Z",
  "ProcessId": 16679,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-17 15:25:08.987 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-17 15:25:08.987 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-17 15:25:08.987 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-17 15:25:08.987 -06:00 [DBG] Start authorize callback request
2018-07-17 15:25:08.987 -06:00 [DBG] No user present in authorize request
2018-07-17 15:25:08.987 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:25:08.987 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:08.987 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:25:08.987 -06:00 [DBG] No PKCE used.
2018-07-17 15:25:08.987 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:25:08.987 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfFMMA1uk8tSSIw03wpgT4rha6YB2Zf7Ch8884PUDm22b1oM4A5hB2_Xbne1rGJZTS4XCM-lT_Nv8c-u_8FDuYqUcwQl4obOmOGE7I7Encvj0S9rarzbq7i2XSNm-5PZqeqyhMhiHFpjektB8_DOmq-z9XBk_qQndhugbasmmLjZwxtAJeiKwhx79iFHj4VQVr2Q6eiFO1TflYTAxn69VMGFA14VSg1y4_OCF9u8CtAhfnuzejh-ONhknbe0-QKM07reLvRk9Zls-xH4Lj_vFtEwxTaE58jjj36KpjhI9cwpH8Ig2zHR24PdE8BShNLXwE",
  "Nonce": "636674594495771730.MTg2ZjA2ODUtNmJiOC00NTQyLWE2MmMtNTYwNjcyOGE5NzE5MDhmNzdlMjktZTVlYy00ZWJmLTkzODQtNzBkNTA5NTQ5OGRi",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674594495771730.MTg2ZjA2ODUtNmJiOC00NTQyLWE2MmMtNTYwNjcyOGE5NzE5MDhmNzdlMjktZTVlYy00ZWJmLTkzODQtNzBkNTA5NTQ5OGRi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfFMMA1uk8tSSIw03wpgT4rha6YB2Zf7Ch8884PUDm22b1oM4A5hB2_Xbne1rGJZTS4XCM-lT_Nv8c-u_8FDuYqUcwQl4obOmOGE7I7Encvj0S9rarzbq7i2XSNm-5PZqeqyhMhiHFpjektB8_DOmq-z9XBk_qQndhugbasmmLjZwxtAJeiKwhx79iFHj4VQVr2Q6eiFO1TflYTAxn69VMGFA14VSg1y4_OCF9u8CtAhfnuzejh-ONhknbe0-QKM07reLvRk9Zls-xH4Lj_vFtEwxTaE58jjj36KpjhI9cwpH8Ig2zHR24PdE8BShNLXwE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 15:25:08.987 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 15:25:08.990 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:25:08.990 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:08.990 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:25:08.990 -06:00 [DBG] No PKCE used.
2018-07-17 15:25:08.990 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:25:08.990 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:27.557 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-17 15:25:27.557 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-17 15:25:27.557 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-17 15:25:27.557 -06:00 [DBG] Start authorize request
2018-07-17 15:25:27.557 -06:00 [DBG] No user present in authorize request
2018-07-17 15:25:27.557 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:25:27.558 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:27.558 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:25:27.558 -06:00 [DBG] No PKCE used.
2018-07-17 15:25:27.558 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:25:27.558 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdgQOy70ltSaifTokrXR4wj3tuo9kYzE2ya1UYh4_vSSVwmZi7HA269qAAVhvimumxzqmLE7MVq-R71G6EXbJlLjEImYfCdKvFOB6MfNll7PdBSwKTfMxUnox2b7r6qcDHpHc_KvccYgZXK4WQhlhwvkFPzCTsTfqopou68lY_D0tZ84sj6Twdq3wr6rbL02Qz4NT4zHpsZ0-CC1aMA6TaoIk5YwE5GQ9inpko2U_YWm5MM0uZB9eRX3Nn5q9dFLOAHOv7MkON65_eF2DllU3GCBcK3cQbZs1euLt-9HcZ4xYWiRDphzPbIMPo5lTBxAlM",
  "Nonce": "636674595275524340.ZWRhY2EzZmItYmRjMC00MDc2LTg3YWEtYzcxYzliZWNiZmQ5YWEyNWZlMWUtNTljNC00ZDQwLWE3NTgtYzc3NmYxMTBiMzZj",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674595275524340.ZWRhY2EzZmItYmRjMC00MDc2LTg3YWEtYzcxYzliZWNiZmQ5YWEyNWZlMWUtNTljNC00ZDQwLWE3NTgtYzc3NmYxMTBiMzZj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdgQOy70ltSaifTokrXR4wj3tuo9kYzE2ya1UYh4_vSSVwmZi7HA269qAAVhvimumxzqmLE7MVq-R71G6EXbJlLjEImYfCdKvFOB6MfNll7PdBSwKTfMxUnox2b7r6qcDHpHc_KvccYgZXK4WQhlhwvkFPzCTsTfqopou68lY_D0tZ84sj6Twdq3wr6rbL02Qz4NT4zHpsZ0-CC1aMA6TaoIk5YwE5GQ9inpko2U_YWm5MM0uZB9eRX3Nn5q9dFLOAHOv7MkON65_eF2DllU3GCBcK3cQbZs1euLt-9HcZ4xYWiRDphzPbIMPo5lTBxAlM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 15:25:27.558 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 15:25:27.561 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:25:27.561 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:27.561 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:25:27.561 -06:00 [DBG] No PKCE used.
2018-07-17 15:25:27.561 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:25:27.561 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:31.221 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 15:25:31.221 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:25:31.221 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:31.221 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:25:31.221 -06:00 [DBG] No PKCE used.
2018-07-17 15:25:31.221 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:25:31.221 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:31.720 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 15:25:31.720 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:25:31.720 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:31.720 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:25:31.720 -06:00 [DBG] No PKCE used.
2018-07-17 15:25:31.721 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:25:31.721 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:31.811 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 15:25:31.811 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:25:31.811 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:31.811 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:25:31.811 -06:00 [DBG] No PKCE used.
2018-07-17 15:25:31.811 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:25:31.812 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:31.898 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 15:25:31.898 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:25:31.898 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:31.898 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:25:31.898 -06:00 [DBG] No PKCE used.
2018-07-17 15:25:31.898 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:25:31.898 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:31.980 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 15:25:31.981 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:25:31.981 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:31.981 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:25:31.981 -06:00 [DBG] No PKCE used.
2018-07-17 15:25:31.981 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:25:31.981 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:32.140 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 15:25:32.140 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:25:32.140 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:32.140 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:25:32.140 -06:00 [DBG] No PKCE used.
2018-07-17 15:25:32.140 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:25:32.140 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:48.107 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 15:25:48.122 -06:00 [DBG] Augmenting SignInContext
2018-07-17 15:25:48.122 -06:00 [DBG] Adding idp claim with value: local
2018-07-17 15:25:48.122 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-17 15:25:48.122 -06:00 [DBG] Adding auth_time claim with value: 1531862748
2018-07-17 15:25:48.122 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-17 15:25:48.122 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFC59T2470I:00000017",
  "TimeStamp": "2018-07-17T21:25:48Z",
  "ProcessId": 16679,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-17 15:25:48.125 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-17 15:25:48.125 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-17 15:25:48.125 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-17 15:25:48.125 -06:00 [DBG] Start authorize callback request
2018-07-17 15:25:48.125 -06:00 [DBG] No user present in authorize request
2018-07-17 15:25:48.126 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:25:48.126 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:48.126 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:25:48.126 -06:00 [DBG] No PKCE used.
2018-07-17 15:25:48.126 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:25:48.126 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdgQOy70ltSaifTokrXR4wj3tuo9kYzE2ya1UYh4_vSSVwmZi7HA269qAAVhvimumxzqmLE7MVq-R71G6EXbJlLjEImYfCdKvFOB6MfNll7PdBSwKTfMxUnox2b7r6qcDHpHc_KvccYgZXK4WQhlhwvkFPzCTsTfqopou68lY_D0tZ84sj6Twdq3wr6rbL02Qz4NT4zHpsZ0-CC1aMA6TaoIk5YwE5GQ9inpko2U_YWm5MM0uZB9eRX3Nn5q9dFLOAHOv7MkON65_eF2DllU3GCBcK3cQbZs1euLt-9HcZ4xYWiRDphzPbIMPo5lTBxAlM",
  "Nonce": "636674595275524340.ZWRhY2EzZmItYmRjMC00MDc2LTg3YWEtYzcxYzliZWNiZmQ5YWEyNWZlMWUtNTljNC00ZDQwLWE3NTgtYzc3NmYxMTBiMzZj",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674595275524340.ZWRhY2EzZmItYmRjMC00MDc2LTg3YWEtYzcxYzliZWNiZmQ5YWEyNWZlMWUtNTljNC00ZDQwLWE3NTgtYzc3NmYxMTBiMzZj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdgQOy70ltSaifTokrXR4wj3tuo9kYzE2ya1UYh4_vSSVwmZi7HA269qAAVhvimumxzqmLE7MVq-R71G6EXbJlLjEImYfCdKvFOB6MfNll7PdBSwKTfMxUnox2b7r6qcDHpHc_KvccYgZXK4WQhlhwvkFPzCTsTfqopou68lY_D0tZ84sj6Twdq3wr6rbL02Qz4NT4zHpsZ0-CC1aMA6TaoIk5YwE5GQ9inpko2U_YWm5MM0uZB9eRX3Nn5q9dFLOAHOv7MkON65_eF2DllU3GCBcK3cQbZs1euLt-9HcZ4xYWiRDphzPbIMPo5lTBxAlM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 15:25:48.126 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 15:25:48.129 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:25:48.129 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:25:48.129 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:25:48.129 -06:00 [DBG] No PKCE used.
2018-07-17 15:25:48.129 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:25:48.129 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:26:18.902 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-17 15:26:18.903 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-17 15:26:18.903 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-17 15:26:18.903 -06:00 [DBG] Start authorize request
2018-07-17 15:26:18.903 -06:00 [DBG] No user present in authorize request
2018-07-17 15:26:18.903 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:26:18.903 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:26:18.903 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:26:18.903 -06:00 [DBG] No PKCE used.
2018-07-17 15:26:18.903 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:26:18.903 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdJPRk8Gd5Q_R4hmtSvv7LqX9WjEgagS_M6vxpr1pEXpOBqNNq66PuBw4tclU39U6SfWw1cWjM96_61CO4SsLOP2knILUxEV0Dh1h3qNOIcf-yxipKul-2w0d43oFUf8svKQXqV3W47uOXRN7IZ4Py_9MvEeMRSZ4-W9Tsmr4Yl6l8-7oTNurdr41ufOMK326ea1FG_9gtzaMhZ0jtWJWnvt7iN7duunNx8pSguYUHDqY7fbGXp5RgvxvAbfoqkhqwVY8FjvqlNVwlrkaOaeSYyaEzsHLYQghV7s_zJffRXe40uW0Y3J6ApVzDGadOhE2M",
  "Nonce": "636674595788983320.NzIxMTliNjItNTZiZi00ZjVjLTkxODktZjJhN2M2ZDc3YjAwZDEyNzU1NDUtY2RjZS00YmY2LThhNjEtZGZjMDE4MjZhZTJj",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674595788983320.NzIxMTliNjItNTZiZi00ZjVjLTkxODktZjJhN2M2ZDc3YjAwZDEyNzU1NDUtY2RjZS00YmY2LThhNjEtZGZjMDE4MjZhZTJj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdJPRk8Gd5Q_R4hmtSvv7LqX9WjEgagS_M6vxpr1pEXpOBqNNq66PuBw4tclU39U6SfWw1cWjM96_61CO4SsLOP2knILUxEV0Dh1h3qNOIcf-yxipKul-2w0d43oFUf8svKQXqV3W47uOXRN7IZ4Py_9MvEeMRSZ4-W9Tsmr4Yl6l8-7oTNurdr41ufOMK326ea1FG_9gtzaMhZ0jtWJWnvt7iN7duunNx8pSguYUHDqY7fbGXp5RgvxvAbfoqkhqwVY8FjvqlNVwlrkaOaeSYyaEzsHLYQghV7s_zJffRXe40uW0Y3J6ApVzDGadOhE2M",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 15:26:18.903 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 15:26:18.906 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:26:18.906 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:26:18.906 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:26:18.906 -06:00 [DBG] No PKCE used.
2018-07-17 15:26:18.906 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:26:18.906 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:30:14.452 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-17 15:30:14.483 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-17 15:30:14.485 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-17 15:30:14.485 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-17 15:30:14.486 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-17 15:30:14.486 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-17 15:30:36.788 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-17 15:30:36.901 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-17 15:30:36.902 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-17 15:30:36.904 -06:00 [DBG] Start discovery request
2018-07-17 15:30:37.079 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-17 15:30:37.080 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-17 15:30:37.080 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-17 15:30:37.083 -06:00 [DBG] Start key discovery request
2018-07-17 15:30:37.141 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-17 15:30:37.144 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-17 15:30:37.144 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-17 15:30:37.148 -06:00 [DBG] Start authorize request
2018-07-17 15:30:37.163 -06:00 [DBG] No user present in authorize request
2018-07-17 15:30:37.167 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:30:37.176 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:30:37.180 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:30:37.181 -06:00 [DBG] No PKCE used.
2018-07-17 15:30:37.206 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:30:37.217 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeJJ_dCoef-U8RyzwjOakQO8V4P0iS3nAfo1JPyCpTGKs8OigQBK9H2eSqFj67Jf6_EtUbkTWH88D-zoVrAUjvxNIusUkNRX5sNZm1gGNZtSo7HQZTE9tQBo79fkZXYrgVO6mYB8QoGWDT7OsuK2GOLC2-HPYIFw7TQAKUzx-lOIN6ILrNDGE4LRUcSaxfDMy4MBDyBaZMZloCFNx4CV8Ap4QD6VmFHnm4bZnMl7i4n-GE0W1xeowCbBDTMvErhn-gLbbNccHzDaWPqNIJENoDH4jVL6_j6O3JPhyA0HwPHKG9gpyAZ7MdFR6AXH6J0BUM",
  "Nonce": "636674598371169110.NzI3NWJlYmQtODcyMC00ZmJhLTljOTMtMDZmYjMzYmJlYjE2MmM5ZmY1M2MtODc3NC00OTNlLThiMTItMTRmY2QwYzIwOWYz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674598371169110.NzI3NWJlYmQtODcyMC00ZmJhLTljOTMtMDZmYjMzYmJlYjE2MmM5ZmY1M2MtODc3NC00OTNlLThiMTItMTRmY2QwYzIwOWYz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeJJ_dCoef-U8RyzwjOakQO8V4P0iS3nAfo1JPyCpTGKs8OigQBK9H2eSqFj67Jf6_EtUbkTWH88D-zoVrAUjvxNIusUkNRX5sNZm1gGNZtSo7HQZTE9tQBo79fkZXYrgVO6mYB8QoGWDT7OsuK2GOLC2-HPYIFw7TQAKUzx-lOIN6ILrNDGE4LRUcSaxfDMy4MBDyBaZMZloCFNx4CV8Ap4QD6VmFHnm4bZnMl7i4n-GE0W1xeowCbBDTMvErhn-gLbbNccHzDaWPqNIJENoDH4jVL6_j6O3JPhyA0HwPHKG9gpyAZ7MdFR6AXH6J0BUM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 15:30:37.223 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 15:30:37.518 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:30:37.519 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:30:37.519 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:30:37.519 -06:00 [DBG] No PKCE used.
2018-07-17 15:30:37.519 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:30:37.521 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:30:50.221 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-17 15:30:51.370 -06:00 [DBG] Augmenting SignInContext
2018-07-17 15:30:51.371 -06:00 [DBG] Adding idp claim with value: local
2018-07-17 15:30:51.371 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-17 15:30:51.372 -06:00 [DBG] Adding auth_time claim with value: 1531863051
2018-07-17 15:30:51.410 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-17 15:30:51.437 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFC5I4HR0QV:00000003",
  "TimeStamp": "2018-07-17T21:30:51Z",
  "ProcessId": 17756,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-17 15:30:51.446 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-17 15:30:51.446 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-17 15:30:51.446 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-17 15:30:51.450 -06:00 [DBG] Start authorize callback request
2018-07-17 15:30:51.453 -06:00 [DBG] No user present in authorize request
2018-07-17 15:30:51.453 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:30:51.453 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:30:51.453 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:30:51.453 -06:00 [DBG] No PKCE used.
2018-07-17 15:30:51.453 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:30:51.453 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeJJ_dCoef-U8RyzwjOakQO8V4P0iS3nAfo1JPyCpTGKs8OigQBK9H2eSqFj67Jf6_EtUbkTWH88D-zoVrAUjvxNIusUkNRX5sNZm1gGNZtSo7HQZTE9tQBo79fkZXYrgVO6mYB8QoGWDT7OsuK2GOLC2-HPYIFw7TQAKUzx-lOIN6ILrNDGE4LRUcSaxfDMy4MBDyBaZMZloCFNx4CV8Ap4QD6VmFHnm4bZnMl7i4n-GE0W1xeowCbBDTMvErhn-gLbbNccHzDaWPqNIJENoDH4jVL6_j6O3JPhyA0HwPHKG9gpyAZ7MdFR6AXH6J0BUM",
  "Nonce": "636674598371169110.NzI3NWJlYmQtODcyMC00ZmJhLTljOTMtMDZmYjMzYmJlYjE2MmM5ZmY1M2MtODc3NC00OTNlLThiMTItMTRmY2QwYzIwOWYz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636674598371169110.NzI3NWJlYmQtODcyMC00ZmJhLTljOTMtMDZmYjMzYmJlYjE2MmM5ZmY1M2MtODc3NC00OTNlLThiMTItMTRmY2QwYzIwOWYz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeJJ_dCoef-U8RyzwjOakQO8V4P0iS3nAfo1JPyCpTGKs8OigQBK9H2eSqFj67Jf6_EtUbkTWH88D-zoVrAUjvxNIusUkNRX5sNZm1gGNZtSo7HQZTE9tQBo79fkZXYrgVO6mYB8QoGWDT7OsuK2GOLC2-HPYIFw7TQAKUzx-lOIN6ILrNDGE4LRUcSaxfDMy4MBDyBaZMZloCFNx4CV8Ap4QD6VmFHnm4bZnMl7i4n-GE0W1xeowCbBDTMvErhn-gLbbNccHzDaWPqNIJENoDH4jVL6_j6O3JPhyA0HwPHKG9gpyAZ7MdFR6AXH6J0BUM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-17 15:30:51.454 -06:00 [INF] Showing login: User is not authenticated
2018-07-17 15:30:51.457 -06:00 [DBG] Start authorize request protocol validation
2018-07-17 15:30:51.458 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-17 15:30:51.458 -06:00 [DBG] Checking for PKCE parameters
2018-07-17 15:30:51.458 -06:00 [DBG] No PKCE used.
2018-07-17 15:30:51.458 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-17 15:30:51.458 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 09:47:10.091 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-18 09:47:10.121 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-18 09:47:10.124 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-18 09:47:10.124 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-18 09:47:10.124 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-18 09:47:10.124 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-18 09:47:55.186 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 09:47:55.306 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 09:47:55.306 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 09:47:55.309 -06:00 [DBG] Start discovery request
2018-07-18 09:47:55.492 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 09:47:55.492 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 09:47:55.492 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 09:47:55.496 -06:00 [DBG] Start key discovery request
2018-07-18 09:47:55.555 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 09:47:55.559 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 09:47:55.559 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 09:47:55.561 -06:00 [DBG] Start authorize request
2018-07-18 09:47:55.578 -06:00 [DBG] No user present in authorize request
2018-07-18 09:47:55.581 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 09:47:55.591 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 09:47:55.596 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 09:47:55.597 -06:00 [DBG] No PKCE used.
2018-07-18 09:47:55.621 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 09:47:55.632 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfieSYfRXmPsOlpSKApUs9PvpZd0OYAKYC8ZDr9i6-4iybQzcg2ajYsbSGm6Yjg4migLUcWAdxw-LTYzSohlUDZ2JiL2j59ASd4XPkF5HY2M-kJSgxLHc7elf-jMWIFnodQzi8BAU8TYh7_hPgRvR14P5PRGvYzjcK3EQAAGPI_3vlRfMpfjuXwIrgcpIq_SW-t8Ye0UszYan7XvJvdoziSYr1_AzjddSqAmvwtCXFdpPVRFbXkylVDjcd-PNSZXzfCrIGWNPg4M8NUmLfbX6U1mPvD6fk8dbtgREgUnoU-p7rsKP2nto6gHmECOyNc0_o",
  "Nonce": "636675256755331080.YTljMzk5NWMtNTYxNy00YzU3LTkyNTQtOWRmYmMzZjg0YzAzODcxZjBlOWQtZjJjYy00YTViLWEzMTItY2E4ZDUzMjFkNzcz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675256755331080.YTljMzk5NWMtNTYxNy00YzU3LTkyNTQtOWRmYmMzZjg0YzAzODcxZjBlOWQtZjJjYy00YTViLWEzMTItY2E4ZDUzMjFkNzcz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfieSYfRXmPsOlpSKApUs9PvpZd0OYAKYC8ZDr9i6-4iybQzcg2ajYsbSGm6Yjg4migLUcWAdxw-LTYzSohlUDZ2JiL2j59ASd4XPkF5HY2M-kJSgxLHc7elf-jMWIFnodQzi8BAU8TYh7_hPgRvR14P5PRGvYzjcK3EQAAGPI_3vlRfMpfjuXwIrgcpIq_SW-t8Ye0UszYan7XvJvdoziSYr1_AzjddSqAmvwtCXFdpPVRFbXkylVDjcd-PNSZXzfCrIGWNPg4M8NUmLfbX6U1mPvD6fk8dbtgREgUnoU-p7rsKP2nto6gHmECOyNc0_o",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 09:47:55.638 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 09:47:55.929 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 09:47:55.930 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 09:47:55.930 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 09:47:55.930 -06:00 [DBG] No PKCE used.
2018-07-18 09:47:55.931 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 09:47:55.933 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 09:47:57.001 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 09:47:57.002 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 09:47:57.002 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 09:47:57.002 -06:00 [DBG] Start authorize request
2018-07-18 09:47:57.002 -06:00 [DBG] No user present in authorize request
2018-07-18 09:47:57.002 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 09:47:57.002 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 09:47:57.002 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 09:47:57.002 -06:00 [DBG] No PKCE used.
2018-07-18 09:47:57.002 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 09:47:57.003 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe9YjwgA-5NUmZ92mSnD6GnRRSzsJ85bwH31BgEKLa-oqHyRblaKPug49ZzGl78JB71iEyvrn_7Rc_xvgVh3lL0Wq2OO7WeGRo9g1vxe-sCQ9mVMI5g_er7gyat3end3QblFW8r88BHyakPQFJPecnxx_OU06Giz1hKfTtbFEyIyCoPGEsk8iif3W-p8NWr-Kx-JFTpbaMXxAmC0RNUkBi60qxrebv9Yarnf6UaFRcfMGkMrNIXzSyV7Gs8wjzpq9kArugNVlb9PJnkMVhXNkM91J4DEd2FKEMf9L4voP7nQbZZbfBR1YR1sk2lGvpHHFI",
  "Nonce": "636675256769989630.NzQ1ZWRhMGEtMDI1Ny00MjQ2LWI0NmEtNWZiNWRiYmMxYzc1ZGI0MmE1ZTMtODBhOS00NWVlLTgyNjEtMDI0ZjMwZjMzYzI0",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675256769989630.NzQ1ZWRhMGEtMDI1Ny00MjQ2LWI0NmEtNWZiNWRiYmMxYzc1ZGI0MmE1ZTMtODBhOS00NWVlLTgyNjEtMDI0ZjMwZjMzYzI0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe9YjwgA-5NUmZ92mSnD6GnRRSzsJ85bwH31BgEKLa-oqHyRblaKPug49ZzGl78JB71iEyvrn_7Rc_xvgVh3lL0Wq2OO7WeGRo9g1vxe-sCQ9mVMI5g_er7gyat3end3QblFW8r88BHyakPQFJPecnxx_OU06Giz1hKfTtbFEyIyCoPGEsk8iif3W-p8NWr-Kx-JFTpbaMXxAmC0RNUkBi60qxrebv9Yarnf6UaFRcfMGkMrNIXzSyV7Gs8wjzpq9kArugNVlb9PJnkMVhXNkM91J4DEd2FKEMf9L4voP7nQbZZbfBR1YR1sk2lGvpHHFI",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 09:47:57.003 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 09:47:57.010 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 09:47:57.010 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 09:47:57.010 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 09:47:57.010 -06:00 [DBG] No PKCE used.
2018-07-18 09:47:57.010 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 09:47:57.010 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 09:48:46.738 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 09:48:46.738 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 09:48:46.739 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 09:48:46.739 -06:00 [DBG] Start authorize request
2018-07-18 09:48:46.739 -06:00 [DBG] No user present in authorize request
2018-07-18 09:48:46.739 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 09:48:46.739 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 09:48:46.739 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 09:48:46.739 -06:00 [DBG] No PKCE used.
2018-07-18 09:48:46.739 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 09:48:46.739 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd4D2Py2f9ekiREU48vv8n9NX7jkLyCPHMrtJHHTdvbKmckYdev8eHxivKD8rXlyLdnE-sjeMl9168MvKbRSYtok34din3cPrEeXXkgba0T5vuHKAY-Z4pCix4Rw8WAwdrcTxHD_xuyag0MM-bDd6Vo7f8sXCjQU5vcu01LI0fqIt-nJiFnldkP6EEj38Km4GNFcif0--MXk6igmKF3EBlCT2kU-3lWOzSx4-wjgf6K1ob9BZGddjwxIjw_Yk2daqRj9-xCzaZ6Wzj-WKoFML3TsAE21FQ37_AKEhRpmlpsKzbGdxycU3VLMM0e4Y24QfEKk1YLNyXpue751__1Iyxcnejo_gutUjbEUXOlKy4rkGuBC54wl_9uQM9-41qBBPk",
  "Nonce": "636675257267359090.NzRiYjcwMjYtMDE4OS00ZDY0LWJlYjEtZjI1NjY2ZmEwODQyOGU1YTZiNDAtOGQ3Yy00NmM3LWE0YTQtYjFiODc0MjU2Yzdk",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675257267359090.NzRiYjcwMjYtMDE4OS00ZDY0LWJlYjEtZjI1NjY2ZmEwODQyOGU1YTZiNDAtOGQ3Yy00NmM3LWE0YTQtYjFiODc0MjU2Yzdk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd4D2Py2f9ekiREU48vv8n9NX7jkLyCPHMrtJHHTdvbKmckYdev8eHxivKD8rXlyLdnE-sjeMl9168MvKbRSYtok34din3cPrEeXXkgba0T5vuHKAY-Z4pCix4Rw8WAwdrcTxHD_xuyag0MM-bDd6Vo7f8sXCjQU5vcu01LI0fqIt-nJiFnldkP6EEj38Km4GNFcif0--MXk6igmKF3EBlCT2kU-3lWOzSx4-wjgf6K1ob9BZGddjwxIjw_Yk2daqRj9-xCzaZ6Wzj-WKoFML3TsAE21FQ37_AKEhRpmlpsKzbGdxycU3VLMM0e4Y24QfEKk1YLNyXpue751__1Iyxcnejo_gutUjbEUXOlKy4rkGuBC54wl_9uQM9-41qBBPk",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 09:48:46.739 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 09:48:46.742 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 09:48:46.742 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 09:48:46.742 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 09:48:46.742 -06:00 [DBG] No PKCE used.
2018-07-18 09:48:46.743 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 09:48:46.743 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 09:49:26.760 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 09:49:26.760 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 09:49:26.760 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 09:49:26.760 -06:00 [DBG] Start authorize request
2018-07-18 09:49:26.760 -06:00 [DBG] No user present in authorize request
2018-07-18 09:49:26.760 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 09:49:26.760 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 09:49:26.760 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 09:49:26.760 -06:00 [DBG] No PKCE used.
2018-07-18 09:49:26.760 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 09:49:26.760 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHff2gY-w5qqAG46pVo5jR8tJl4Xd8irCKubQimZanDJS1_cthXKmoql2yQ48ZL_2n0_DVKUw6KpqKZ1bDRWKKaUN72cUYG1ANLs2dez2F59Qql1447ORTAeVv40xh6G1a7nwLumVBQxzQt_RJrlcQ2GNQpWpCebNrqFX8PHZ62tvanABNUU1JNWjmH0MfNxi1NEnrdY691qcYkyA0tgbWcdFRJk2-_iz5Bh0QhrdG3l3wUWJxfeXvpPTY6me1Z-TLuwUVGOqW61-xJ3jwpdg1NDLxD-4pvp9m5OzWD9Br32jH10rHkgieg-yVOkJFJMmHPMfmwKAa4uOjmoohqNQT2seOufQnNlsi-yuEBnIp4WmaVEqv7PPUw-1WElv1eHcY8",
  "Nonce": "636675257667564780.OWYwZTgyN2YtMGRiNS00NzM1LWExNWItOGIxYjU1Y2MzYzFiYTI1NjA0ODEtYzQxYS00MDgxLWE1ZWEtMDIzNTZiMjgwOWRk",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675257667564780.OWYwZTgyN2YtMGRiNS00NzM1LWExNWItOGIxYjU1Y2MzYzFiYTI1NjA0ODEtYzQxYS00MDgxLWE1ZWEtMDIzNTZiMjgwOWRk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHff2gY-w5qqAG46pVo5jR8tJl4Xd8irCKubQimZanDJS1_cthXKmoql2yQ48ZL_2n0_DVKUw6KpqKZ1bDRWKKaUN72cUYG1ANLs2dez2F59Qql1447ORTAeVv40xh6G1a7nwLumVBQxzQt_RJrlcQ2GNQpWpCebNrqFX8PHZ62tvanABNUU1JNWjmH0MfNxi1NEnrdY691qcYkyA0tgbWcdFRJk2-_iz5Bh0QhrdG3l3wUWJxfeXvpPTY6me1Z-TLuwUVGOqW61-xJ3jwpdg1NDLxD-4pvp9m5OzWD9Br32jH10rHkgieg-yVOkJFJMmHPMfmwKAa4uOjmoohqNQT2seOufQnNlsi-yuEBnIp4WmaVEqv7PPUw-1WElv1eHcY8",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 09:49:26.761 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 09:49:26.763 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 09:49:26.763 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 09:49:26.763 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 09:49:26.763 -06:00 [DBG] No PKCE used.
2018-07-18 09:49:26.763 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 09:49:26.763 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 09:49:45.636 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 09:49:45.636 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 09:49:45.636 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 09:49:45.636 -06:00 [DBG] Start authorize request
2018-07-18 09:49:45.636 -06:00 [DBG] No user present in authorize request
2018-07-18 09:49:45.636 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 09:49:45.636 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 09:49:45.636 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 09:49:45.636 -06:00 [DBG] No PKCE used.
2018-07-18 09:49:45.636 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 09:49:45.637 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHemiTDrwVywGBUCb-V1cJyviKEd5l7UhPoYrizai8UTPbc_9YuV2L4TrmHO_nV_WowuAIKoRRzEfQ9NZlJQsvmCcr6EbtTCspQZ3VdCatdpoKHJY5Q86vd2MYt9ksYN-iz8TBIThWtMLEiHwfhxOVABv6zK3ejZ8p6DrrB0yUij9DxK7kJMI-wHTaam9peerVJneg2dfn23HYach8wJGYMpubMCN3iLK0NWjlSKC_JE4HOQ5mshNeKrmgLUuiKk8ByMLWYZIOZHozWcHFQfvWbnmzLIr529jNiSDSi9Q6vNILYBcHG_OIc3c6h6tUp_aIQ",
  "Nonce": "636675257856325640.NzY2NzRjYTQtNDVhYy00NmIwLWFkN2UtNTQyZDEyMmZjNzc2ZmVjYmM5OTctMzRlOC00MzY2LWFjOGYtOTIzNTAwNjYxMmNl",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675257856325640.NzY2NzRjYTQtNDVhYy00NmIwLWFkN2UtNTQyZDEyMmZjNzc2ZmVjYmM5OTctMzRlOC00MzY2LWFjOGYtOTIzNTAwNjYxMmNl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHemiTDrwVywGBUCb-V1cJyviKEd5l7UhPoYrizai8UTPbc_9YuV2L4TrmHO_nV_WowuAIKoRRzEfQ9NZlJQsvmCcr6EbtTCspQZ3VdCatdpoKHJY5Q86vd2MYt9ksYN-iz8TBIThWtMLEiHwfhxOVABv6zK3ejZ8p6DrrB0yUij9DxK7kJMI-wHTaam9peerVJneg2dfn23HYach8wJGYMpubMCN3iLK0NWjlSKC_JE4HOQ5mshNeKrmgLUuiKk8ByMLWYZIOZHozWcHFQfvWbnmzLIr529jNiSDSi9Q6vNILYBcHG_OIc3c6h6tUp_aIQ",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 09:49:45.637 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 09:49:45.640 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 09:49:45.640 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 09:49:45.640 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 09:49:45.640 -06:00 [DBG] No PKCE used.
2018-07-18 09:49:45.640 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 09:49:45.640 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 09:50:03.591 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 09:50:03.591 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 09:50:03.592 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 09:50:03.592 -06:00 [DBG] Start authorize request
2018-07-18 09:50:03.592 -06:00 [DBG] No user present in authorize request
2018-07-18 09:50:03.592 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 09:50:03.592 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 09:50:03.592 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 09:50:03.592 -06:00 [DBG] No PKCE used.
2018-07-18 09:50:03.592 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 09:50:03.592 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe3BdrQw6zKbXmr6YEcL0fYGYDQFPRDDQkNd_0x4jfOE7nwZR0Zr6BSoebyRr2P5JXp2dZdyiIcpGZhynKm6xRKUAJLI10bUSqlek_1sxxF-vKYaPGtDfXBnA8jseaYrBZdEM61kYf_NN-14sLA9WwAGx6NBfp3IEDpXSB-O1UT5SvoPzIBjAHeKPFC3udLwHy_8Na_Bh-bfeWXePJHN9YtYv5eoOPmlzjXjtUdqaw3QmVm8J5CUpsXA8E9EWGTyNelJvt6oaLC_4IWrRh3ttythStIiSO5GJTp84P4GkPZkF4-MU4pyicDpIjJeQhV-OMfRyKShALoPl0fGUCAXtsIN4-gUjuSyX0Nse6pDwN195yqwSrRDwpBGnyqMqQWWWw",
  "Nonce": "636675258035879200.ZTNmMGM1OTYtNDkzZi00NDg0LWIwNDQtMmYyYWQ4OGQ4N2Y1MzYxZTRmMjMtYzQzZC00OTE0LWFlMDItM2M3ZDZhMzQ2ZjYz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675258035879200.ZTNmMGM1OTYtNDkzZi00NDg0LWIwNDQtMmYyYWQ4OGQ4N2Y1MzYxZTRmMjMtYzQzZC00OTE0LWFlMDItM2M3ZDZhMzQ2ZjYz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe3BdrQw6zKbXmr6YEcL0fYGYDQFPRDDQkNd_0x4jfOE7nwZR0Zr6BSoebyRr2P5JXp2dZdyiIcpGZhynKm6xRKUAJLI10bUSqlek_1sxxF-vKYaPGtDfXBnA8jseaYrBZdEM61kYf_NN-14sLA9WwAGx6NBfp3IEDpXSB-O1UT5SvoPzIBjAHeKPFC3udLwHy_8Na_Bh-bfeWXePJHN9YtYv5eoOPmlzjXjtUdqaw3QmVm8J5CUpsXA8E9EWGTyNelJvt6oaLC_4IWrRh3ttythStIiSO5GJTp84P4GkPZkF4-MU4pyicDpIjJeQhV-OMfRyKShALoPl0fGUCAXtsIN4-gUjuSyX0Nse6pDwN195yqwSrRDwpBGnyqMqQWWWw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 09:50:03.592 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 09:50:03.594 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 09:50:03.594 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 09:50:03.594 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 09:50:03.594 -06:00 [DBG] No PKCE used.
2018-07-18 09:50:03.595 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 09:50:03.595 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:01:19.724 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 10:01:19.725 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 10:01:19.725 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 10:01:19.725 -06:00 [DBG] Start discovery request
2018-07-18 10:01:19.840 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 10:01:19.840 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 10:01:19.840 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 10:01:19.840 -06:00 [DBG] Start key discovery request
2018-07-18 10:01:19.920 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 10:01:19.920 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 10:01:19.920 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 10:01:19.920 -06:00 [DBG] Start authorize request
2018-07-18 10:01:19.920 -06:00 [DBG] No user present in authorize request
2018-07-18 10:01:19.920 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:01:19.920 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:01:19.920 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:01:19.920 -06:00 [DBG] No PKCE used.
2018-07-18 10:01:19.920 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:01:19.920 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc46YdvCMqFmUXB4gf_GE8SYzCRl_V6TXoo43TgIbR82Wm4Qz_R4ehitN2Q0ijfVqpDupZdJKCNxMG8mdKgJ2NFfl8ZJK6KFXWAxpt2zgDLmFr2K2ZJ1sY69ARe9FQr-hHBk0AZAxET5C3wlyWvrShbTsQA0MpKLWQyfBLdkaifIqaoVFOZfx6W15hsd4KalnaW_dRymv5f33lHxnUZaCS716mIqj_vHKiuasYhaLS38H-zdEnHqJB2D5vN68QRJ0ys9F0GJQ3KfQMiS_8hCZwV9I6-Cz3sJJR1f9HUtf0c44y0iXvFGQTF_LfEmT669wvRIFDI_0WHuHh6tMxLAKywqqBSSPMX654AFpKv-LNb5QHU38dGqszZEDj44ciiIrk",
  "Nonce": "636675264798994610.Zjg2MWZlYzYtZGQzZS00ZTRkLThhYWUtZWUxZTM4OWE5ZmNkNTNiZTc3M2ItNmQxYy00NTgxLTllMDYtNGUyZjNlNTZjY2I4",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675264798994610.Zjg2MWZlYzYtZGQzZS00ZTRkLThhYWUtZWUxZTM4OWE5ZmNkNTNiZTc3M2ItNmQxYy00NTgxLTllMDYtNGUyZjNlNTZjY2I4",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc46YdvCMqFmUXB4gf_GE8SYzCRl_V6TXoo43TgIbR82Wm4Qz_R4ehitN2Q0ijfVqpDupZdJKCNxMG8mdKgJ2NFfl8ZJK6KFXWAxpt2zgDLmFr2K2ZJ1sY69ARe9FQr-hHBk0AZAxET5C3wlyWvrShbTsQA0MpKLWQyfBLdkaifIqaoVFOZfx6W15hsd4KalnaW_dRymv5f33lHxnUZaCS716mIqj_vHKiuasYhaLS38H-zdEnHqJB2D5vN68QRJ0ys9F0GJQ3KfQMiS_8hCZwV9I6-Cz3sJJR1f9HUtf0c44y0iXvFGQTF_LfEmT669wvRIFDI_0WHuHh6tMxLAKywqqBSSPMX654AFpKv-LNb5QHU38dGqszZEDj44ciiIrk",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 10:01:19.921 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 10:01:19.923 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:01:19.923 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:01:19.923 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:01:19.923 -06:00 [DBG] No PKCE used.
2018-07-18 10:01:19.923 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:01:19.923 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:02:29.983 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 10:02:29.983 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 10:02:29.983 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 10:02:29.983 -06:00 [DBG] Start discovery request
2018-07-18 10:02:30.099 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 10:02:30.099 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 10:02:30.099 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 10:02:30.099 -06:00 [DBG] Start key discovery request
2018-07-18 10:02:30.176 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 10:02:30.176 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 10:02:30.177 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 10:02:30.177 -06:00 [DBG] Start authorize request
2018-07-18 10:02:30.177 -06:00 [DBG] No user present in authorize request
2018-07-18 10:02:30.177 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:02:30.177 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:02:30.177 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:02:30.177 -06:00 [DBG] No PKCE used.
2018-07-18 10:02:30.177 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:02:30.177 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPgJf2EPFEuzJTAIZk5WyXBrpH4aEq81xu-GC30LmkqfWjKl-SB1hVzCbo4JTYai9OQHQdmOtLfeiAIKAwHxvN3lf9C0QNAvIaFTCM_wUpGzjtnVgLtR-CcBH3hPgpcrH6yXKWVQ8Gh_CGjbCXP4WbQlgmK_4iGv3U623_QivozZad1aj36lTpHL9n_ZFKntr_-FESTDXgj6uRORt5SO0w6n2fwSJgcU6SU13alrkYx6PKfUY9-CX_WmajZeFnP42afLKyNCytIMZLo_G1apCZbhHkbMoucXedirQOVg_w39WQggcDfGWzmF--Cl0x-kishcTuLc3yp6tluhT6BPMk5wcIg6vXqQWX1wmPXJQsRRXdpex1Utv6NMnTNb-K_jw",
  "Nonce": "636675265501563270.YzZkNmIxOGQtODRjNS00NTYyLWFkODctMWIyYWVkN2Q3ZTM5Njk2YmJhMTYtMGY3Yy00OWNiLTg2OTItY2U4YWI1ZjFlNDQz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675265501563270.YzZkNmIxOGQtODRjNS00NTYyLWFkODctMWIyYWVkN2Q3ZTM5Njk2YmJhMTYtMGY3Yy00OWNiLTg2OTItY2U4YWI1ZjFlNDQz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPgJf2EPFEuzJTAIZk5WyXBrpH4aEq81xu-GC30LmkqfWjKl-SB1hVzCbo4JTYai9OQHQdmOtLfeiAIKAwHxvN3lf9C0QNAvIaFTCM_wUpGzjtnVgLtR-CcBH3hPgpcrH6yXKWVQ8Gh_CGjbCXP4WbQlgmK_4iGv3U623_QivozZad1aj36lTpHL9n_ZFKntr_-FESTDXgj6uRORt5SO0w6n2fwSJgcU6SU13alrkYx6PKfUY9-CX_WmajZeFnP42afLKyNCytIMZLo_G1apCZbhHkbMoucXedirQOVg_w39WQggcDfGWzmF--Cl0x-kishcTuLc3yp6tluhT6BPMk5wcIg6vXqQWX1wmPXJQsRRXdpex1Utv6NMnTNb-K_jw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 10:02:30.177 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 10:02:30.179 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:02:30.179 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:02:30.180 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:02:30.180 -06:00 [DBG] No PKCE used.
2018-07-18 10:02:30.180 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:02:30.180 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:03:19.688 -06:00 [INF] AuthenticationScheme: Google was challenged.
2018-07-18 10:03:23.527 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:03:23.527 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:03:23.527 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:03:23.527 -06:00 [DBG] No PKCE used.
2018-07-18 10:03:23.527 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:03:23.527 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:03:32.179 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 10:03:33.149 -06:00 [INF] {
  "Name": "User Login Failure",
  "Category": "Authentication",
  "EventType": "Failure",
  "Id": 1001,
  "Username": "jen@email.com",
  "Endpoint": "UI",
  "Message": "invalid credentials",
  "ActivityId": "0HLFCON9TK4ES:00000007",
  "TimeStamp": "2018-07-18T16:03:33Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 10:03:33.150 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:03:33.150 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:03:33.150 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:03:33.150 -06:00 [DBG] No PKCE used.
2018-07-18 10:03:33.150 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:03:33.150 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:03:48.622 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 10:03:48.910 -06:00 [DBG] Augmenting SignInContext
2018-07-18 10:03:48.911 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 10:03:48.911 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 10:03:48.911 -06:00 [DBG] Adding auth_time claim with value: 1531929828
2018-07-18 10:03:48.936 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 10:03:48.941 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFCON9TK4ES:00000008",
  "TimeStamp": "2018-07-18T16:03:48Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 10:03:48.958 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:03:48.959 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:03:48.959 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 10:03:48.959 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 10:03:48.959 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 10:03:48.963 -06:00 [DBG] Start authorize callback request
2018-07-18 10:03:48.967 -06:00 [DBG] User in authorize request: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-18 10:03:48.968 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:03:48.968 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:03:48.968 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:03:48.968 -06:00 [DBG] No PKCE used.
2018-07-18 10:03:48.968 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:03:48.968 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPgJf2EPFEuzJTAIZk5WyXBrpH4aEq81xu-GC30LmkqfWjKl-SB1hVzCbo4JTYai9OQHQdmOtLfeiAIKAwHxvN3lf9C0QNAvIaFTCM_wUpGzjtnVgLtR-CcBH3hPgpcrH6yXKWVQ8Gh_CGjbCXP4WbQlgmK_4iGv3U623_QivozZad1aj36lTpHL9n_ZFKntr_-FESTDXgj6uRORt5SO0w6n2fwSJgcU6SU13alrkYx6PKfUY9-CX_WmajZeFnP42afLKyNCytIMZLo_G1apCZbhHkbMoucXedirQOVg_w39WQggcDfGWzmF--Cl0x-kishcTuLc3yp6tluhT6BPMk5wcIg6vXqQWX1wmPXJQsRRXdpex1Utv6NMnTNb-K_jw",
  "Nonce": "636675265501563270.YzZkNmIxOGQtODRjNS00NTYyLWFkODctMWIyYWVkN2Q3ZTM5Njk2YmJhMTYtMGY3Yy00OWNiLTg2OTItY2U4YWI1ZjFlNDQz",
  "SessionId": "14c81d0432d8fa0e033ec70acc3d6436",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675265501563270.YzZkNmIxOGQtODRjNS00NTYyLWFkODctMWIyYWVkN2Q3ZTM5Njk2YmJhMTYtMGY3Yy00OWNiLTg2OTItY2U4YWI1ZjFlNDQz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPgJf2EPFEuzJTAIZk5WyXBrpH4aEq81xu-GC30LmkqfWjKl-SB1hVzCbo4JTYai9OQHQdmOtLfeiAIKAwHxvN3lf9C0QNAvIaFTCM_wUpGzjtnVgLtR-CcBH3hPgpcrH6yXKWVQ8Gh_CGjbCXP4WbQlgmK_4iGv3U623_QivozZad1aj36lTpHL9n_ZFKntr_-FESTDXgj6uRORt5SO0w6n2fwSJgcU6SU13alrkYx6PKfUY9-CX_WmajZeFnP42afLKyNCytIMZLo_G1apCZbhHkbMoucXedirQOVg_w39WQggcDfGWzmF--Cl0x-kishcTuLc3yp6tluhT6BPMk5wcIg6vXqQWX1wmPXJQsRRXdpex1Utv6NMnTNb-K_jw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 10:03:49.004 -06:00 [DBG] user_consent grant with value: ideaBox|9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 not found in store.
2018-07-18 10:03:49.004 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 10:03:49.004 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 10:03:49.008 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:03:49.008 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:03:49.037 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:03:49.037 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:03:49.037 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:03:49.037 -06:00 [DBG] No PKCE used.
2018-07-18 10:03:49.037 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:03:49.037 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:03:58.096 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 10:03:58.097 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:03:58.097 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:03:58.119 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:03:58.119 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:03:58.119 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:03:58.119 -06:00 [DBG] No PKCE used.
2018-07-18 10:03:58.119 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:03:58.134 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:03:58.134 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:03:58.134 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 10:03:58.134 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 10:03:58.134 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 10:03:58.134 -06:00 [DBG] Start authorize callback request
2018-07-18 10:03:58.162 -06:00 [DBG] User in authorize request: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-18 10:03:58.162 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:03:58.162 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:03:58.162 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:03:58.162 -06:00 [DBG] No PKCE used.
2018-07-18 10:03:58.162 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:03:58.163 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPgJf2EPFEuzJTAIZk5WyXBrpH4aEq81xu-GC30LmkqfWjKl-SB1hVzCbo4JTYai9OQHQdmOtLfeiAIKAwHxvN3lf9C0QNAvIaFTCM_wUpGzjtnVgLtR-CcBH3hPgpcrH6yXKWVQ8Gh_CGjbCXP4WbQlgmK_4iGv3U623_QivozZad1aj36lTpHL9n_ZFKntr_-FESTDXgj6uRORt5SO0w6n2fwSJgcU6SU13alrkYx6PKfUY9-CX_WmajZeFnP42afLKyNCytIMZLo_G1apCZbhHkbMoucXedirQOVg_w39WQggcDfGWzmF--Cl0x-kishcTuLc3yp6tluhT6BPMk5wcIg6vXqQWX1wmPXJQsRRXdpex1Utv6NMnTNb-K_jw",
  "Nonce": "636675265501563270.YzZkNmIxOGQtODRjNS00NTYyLWFkODctMWIyYWVkN2Q3ZTM5Njk2YmJhMTYtMGY3Yy00OWNiLTg2OTItY2U4YWI1ZjFlNDQz",
  "SessionId": "14c81d0432d8fa0e033ec70acc3d6436",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675265501563270.YzZkNmIxOGQtODRjNS00NTYyLWFkODctMWIyYWVkN2Q3ZTM5Njk2YmJhMTYtMGY3Yy00OWNiLTg2OTItY2U4YWI1ZjFlNDQz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPgJf2EPFEuzJTAIZk5WyXBrpH4aEq81xu-GC30LmkqfWjKl-SB1hVzCbo4JTYai9OQHQdmOtLfeiAIKAwHxvN3lf9C0QNAvIaFTCM_wUpGzjtnVgLtR-CcBH3hPgpcrH6yXKWVQ8Gh_CGjbCXP4WbQlgmK_4iGv3U623_QivozZad1aj36lTpHL9n_ZFKntr_-FESTDXgj6uRORt5SO0w6n2fwSJgcU6SU13alrkYx6PKfUY9-CX_WmajZeFnP42afLKyNCytIMZLo_G1apCZbhHkbMoucXedirQOVg_w39WQggcDfGWzmF--Cl0x-kishcTuLc3yp6tluhT6BPMk5wcIg6vXqQWX1wmPXJQsRRXdpex1Utv6NMnTNb-K_jw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 10:03:58.164 -06:00 [DBG] user_consent grant with value: ideaBox|9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 not found in store.
2018-07-18 10:03:58.164 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 10:03:58.170 -06:00 [INF] User consented to scopes: ["openid","profile","business"]
2018-07-18 10:03:58.182 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-18 10:03:58.189 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 10:03:58.209 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 10:03:58.218 -06:00 [DBG] Getting claims for identity token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 and client: ideaBox
2018-07-18 10:03:58.220 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 10:03:58.291 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "Scopes": "openid profile business",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****C-7Q"
    },
    {
      "TokenType": "code",
      "TokenValue": "****be89"
    }
  ],
  "ActivityId": "0HLFCON9TK4ES:0000000D",
  "TimeStamp": "2018-07-18T16:03:58Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 10:03:58.294 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPgJf2EPFEuzJTAIZk5WyXBrpH4aEq81xu-GC30LmkqfWjKl-SB1hVzCbo4JTYai9OQHQdmOtLfeiAIKAwHxvN3lf9C0QNAvIaFTCM_wUpGzjtnVgLtR-CcBH3hPgpcrH6yXKWVQ8Gh_CGjbCXP4WbQlgmK_4iGv3U623_QivozZad1aj36lTpHL9n_ZFKntr_-FESTDXgj6uRORt5SO0w6n2fwSJgcU6SU13alrkYx6PKfUY9-CX_WmajZeFnP42afLKyNCytIMZLo_G1apCZbhHkbMoucXedirQOVg_w39WQggcDfGWzmF--Cl0x-kishcTuLc3yp6tluhT6BPMk5wcIg6vXqQWX1wmPXJQsRRXdpex1Utv6NMnTNb-K_jw",
  "Scope": "openid profile business"
}
2018-07-18 10:03:58.309 -06:00 [DBG] Augmenting SignInContext
2018-07-18 10:03:58.309 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 10:03:58.413 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 10:03:58.415 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 10:03:58.415 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 10:03:58.421 -06:00 [DBG] Start token request.
2018-07-18 10:03:58.427 -06:00 [DBG] Start client validation
2018-07-18 10:03:58.431 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 10:03:58.433 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 10:03:58.434 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 10:03:58.434 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 10:03:58.434 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:03:58.444 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 10:03:58.444 -06:00 [DBG] Client validation success
2018-07-18 10:03:58.447 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCON9TK4EU:00000003",
  "TimeStamp": "2018-07-18T16:03:58Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 10:03:58.452 -06:00 [DBG] Start token request validation
2018-07-18 10:03:58.461 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 10:03:58.480 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 10:03:58.483 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "464c6b9c534b3b76a1df8598d3b243fe8f5b453e1716f5c580a495367dd8be89",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "464c6b9c534b3b76a1df8598d3b243fe8f5b453e1716f5c580a495367dd8be89",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 10:03:58.493 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:03:58.502 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 10:03:58.502 -06:00 [DBG] Getting claims for access token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-18 10:03:58.523 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:03:58.523 -06:00 [DBG] Getting claims for identity token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 and client: ideaBox
2018-07-18 10:03:58.523 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 10:03:58.536 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****k4sw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****TK5A"
    }
  ],
  "ActivityId": "0HLFCON9TK4EU:00000003",
  "TimeStamp": "2018-07-18T16:03:58Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 10:03:58.537 -06:00 [DBG] Token request success.
2018-07-18 10:03:58.548 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 10:03:58.549 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 10:03:58.549 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 10:03:58.554 -06:00 [DBG] Start userinfo request
2018-07-18 10:03:58.557 -06:00 [DBG] Bearer token found in header
2018-07-18 10:03:58.617 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:03:58.619 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:03:58.621 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 10:03:58.624 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531929838,
    "exp": 1531933438,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
    "auth_time": 1531929828,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business"
    ],
    "amr": "pwd"
  }
}
2018-07-18 10:03:58.629 -06:00 [DBG] Creating userinfo response
2018-07-18 10:03:58.631 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 10:03:58.633 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 10:03:58.635 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number
2018-07-18 10:03:58.635 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 10:03:58.637 -06:00 [INF] Profile service returned to the following claim types: sub name given_name family_name website preferred_username
2018-07-18 10:03:58.637 -06:00 [DBG] End userinfo request
2018-07-18 10:05:52.881 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 10:05:52.881 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 10:05:52.881 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 10:05:52.881 -06:00 [DBG] Start discovery request
2018-07-18 10:05:52.996 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 10:05:52.997 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 10:05:52.997 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 10:05:52.997 -06:00 [DBG] Start key discovery request
2018-07-18 10:05:53.076 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:05:53.076 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:05:53.076 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 10:05:53.076 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 10:05:53.076 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 10:05:53.076 -06:00 [DBG] Start authorize request
2018-07-18 10:05:53.076 -06:00 [DBG] User in authorize request: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-18 10:05:53.076 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:05:53.076 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:05:53.076 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:05:53.076 -06:00 [DBG] No PKCE used.
2018-07-18 10:05:53.076 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:05:53.076 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcme8LCqvQmkcHQrNhZySjJ0sf5DEHq7saZ4lzGfpw2ICIQrWPOoj7a8b3ZaEM05hsC4SiyXfR5mLNwMYIlN8cXf4w5NOMvEAEy7uf9tZBLmwnWRdJlgsLDSnynxbIe13w0OFkny4cB3yf7jkTgjh--du2Vz9nThsllxr1YtBSGvNmXHmawelaZvdeYlnWl8dnDMx2hTgZNeafKQkKTlQI5ST4TrkQYuM_UMlOZ1kdLENa9Vx2qxJFc4EIo5GT_1XW19jT2y6x13lCyvtbC82wJPfA6M2ysb0BFGVOEXmRkxwu5epZGmfKB7wJkU-Ayfa3OUzUxMdVuuYdHZdKY-P7xL29goQhB7-WXhOgQ_AgqHHceha-em8MFwKKIWSpl7qM",
  "Nonce": "636675267530546260.NjQ0MzNlNWUtNWFjZS00ZDhiLTkwNzItMzI5MjgwN2ZiYzViNjgxYTQ4NzMtZTY1ZS00NWNjLTljZTUtMzFmOWVhYjVhMmYx",
  "SessionId": "14c81d0432d8fa0e033ec70acc3d6436",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675267530546260.NjQ0MzNlNWUtNWFjZS00ZDhiLTkwNzItMzI5MjgwN2ZiYzViNjgxYTQ4NzMtZTY1ZS00NWNjLTljZTUtMzFmOWVhYjVhMmYx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcme8LCqvQmkcHQrNhZySjJ0sf5DEHq7saZ4lzGfpw2ICIQrWPOoj7a8b3ZaEM05hsC4SiyXfR5mLNwMYIlN8cXf4w5NOMvEAEy7uf9tZBLmwnWRdJlgsLDSnynxbIe13w0OFkny4cB3yf7jkTgjh--du2Vz9nThsllxr1YtBSGvNmXHmawelaZvdeYlnWl8dnDMx2hTgZNeafKQkKTlQI5ST4TrkQYuM_UMlOZ1kdLENa9Vx2qxJFc4EIo5GT_1XW19jT2y6x13lCyvtbC82wJPfA6M2ysb0BFGVOEXmRkxwu5epZGmfKB7wJkU-Ayfa3OUzUxMdVuuYdHZdKY-P7xL29goQhB7-WXhOgQ_AgqHHceha-em8MFwKKIWSpl7qM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 10:05:53.078 -06:00 [DBG] user_consent grant with value: ideaBox|9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 not found in store.
2018-07-18 10:05:53.078 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 10:05:53.078 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 10:05:53.080 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:05:53.080 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:05:53.080 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:05:53.080 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:05:53.080 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:05:53.080 -06:00 [DBG] No PKCE used.
2018-07-18 10:05:53.080 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:05:53.080 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:14:38.076 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 10:14:38.077 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 10:14:38.077 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 10:14:38.077 -06:00 [DBG] Start discovery request
2018-07-18 10:14:38.196 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 10:14:38.196 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 10:14:38.196 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 10:14:38.196 -06:00 [DBG] Start key discovery request
2018-07-18 10:14:38.273 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:14:38.273 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:14:38.273 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 10:14:38.273 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 10:14:38.273 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 10:14:38.273 -06:00 [DBG] Start authorize request
2018-07-18 10:14:38.273 -06:00 [DBG] User in authorize request: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-18 10:14:38.273 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:14:38.273 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:14:38.273 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:14:38.273 -06:00 [DBG] No PKCE used.
2018-07-18 10:14:38.274 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:14:38.274 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe4IGEnk7uG_ubOep4hm3cS2U8WoPWuSATT3WE3y4Ciph47INohzZhJb5mGTQKosszVokBKk6ZsY9ft_WpOaTTglMVuTxyfTExcNFeHOMDFuRlKJn-Mq-xxO9QdeaAbL_YCeXrvPrUqSD8UlUZpEp4gs_OC29Q9AN1oqsmFRww7aUOgYr4y_i78lTXQNTF-WlAQGYlFdlAG6nVQfkf8xoUTehIFuqxLcC39gKLVLXTS2ez1yf5s2hPUDQvyrtAVQ7TJSGLOBCwDxxsXSoxQKSQsg7L5Vf7TiHzMNa0x8TOfKGr2fXP_3degeNVpbfXimeGAYE6bP40XO42EBlELbNpzBRwtpi6yyQRxqhDLnafsCut8g3VPyhKEP0vaaO6OqBs",
  "Nonce": "636675272782523230.ZDNlODA1MWEtYTk4Ni00MTMwLTgxZjYtNDNmYmMyYzY1NjJiMTdlZWZiZGEtN2M2NC00OTdhLTk5NTktYWI5Mjc0NTYwOWVm",
  "SessionId": "14c81d0432d8fa0e033ec70acc3d6436",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675272782523230.ZDNlODA1MWEtYTk4Ni00MTMwLTgxZjYtNDNmYmMyYzY1NjJiMTdlZWZiZGEtN2M2NC00OTdhLTk5NTktYWI5Mjc0NTYwOWVm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe4IGEnk7uG_ubOep4hm3cS2U8WoPWuSATT3WE3y4Ciph47INohzZhJb5mGTQKosszVokBKk6ZsY9ft_WpOaTTglMVuTxyfTExcNFeHOMDFuRlKJn-Mq-xxO9QdeaAbL_YCeXrvPrUqSD8UlUZpEp4gs_OC29Q9AN1oqsmFRww7aUOgYr4y_i78lTXQNTF-WlAQGYlFdlAG6nVQfkf8xoUTehIFuqxLcC39gKLVLXTS2ez1yf5s2hPUDQvyrtAVQ7TJSGLOBCwDxxsXSoxQKSQsg7L5Vf7TiHzMNa0x8TOfKGr2fXP_3degeNVpbfXimeGAYE6bP40XO42EBlELbNpzBRwtpi6yyQRxqhDLnafsCut8g3VPyhKEP0vaaO6OqBs",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 10:14:38.275 -06:00 [DBG] user_consent grant with value: ideaBox|9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 not found in store.
2018-07-18 10:14:38.275 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 10:14:38.275 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 10:14:38.278 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:14:38.278 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:14:38.278 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:14:38.278 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:14:38.278 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:14:38.278 -06:00 [DBG] No PKCE used.
2018-07-18 10:14:38.278 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:14:38.278 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:14:49.636 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 10:14:49.636 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:14:49.636 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:14:49.637 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:14:49.637 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:14:49.637 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:14:49.637 -06:00 [DBG] No PKCE used.
2018-07-18 10:14:49.637 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:14:49.641 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:14:49.641 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:14:49.641 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 10:14:49.641 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 10:14:49.641 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 10:14:49.641 -06:00 [DBG] Start authorize callback request
2018-07-18 10:14:49.641 -06:00 [DBG] User in authorize request: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-18 10:14:49.641 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:14:49.641 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:14:49.641 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:14:49.641 -06:00 [DBG] No PKCE used.
2018-07-18 10:14:49.641 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:14:49.642 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe4IGEnk7uG_ubOep4hm3cS2U8WoPWuSATT3WE3y4Ciph47INohzZhJb5mGTQKosszVokBKk6ZsY9ft_WpOaTTglMVuTxyfTExcNFeHOMDFuRlKJn-Mq-xxO9QdeaAbL_YCeXrvPrUqSD8UlUZpEp4gs_OC29Q9AN1oqsmFRww7aUOgYr4y_i78lTXQNTF-WlAQGYlFdlAG6nVQfkf8xoUTehIFuqxLcC39gKLVLXTS2ez1yf5s2hPUDQvyrtAVQ7TJSGLOBCwDxxsXSoxQKSQsg7L5Vf7TiHzMNa0x8TOfKGr2fXP_3degeNVpbfXimeGAYE6bP40XO42EBlELbNpzBRwtpi6yyQRxqhDLnafsCut8g3VPyhKEP0vaaO6OqBs",
  "Nonce": "636675272782523230.ZDNlODA1MWEtYTk4Ni00MTMwLTgxZjYtNDNmYmMyYzY1NjJiMTdlZWZiZGEtN2M2NC00OTdhLTk5NTktYWI5Mjc0NTYwOWVm",
  "SessionId": "14c81d0432d8fa0e033ec70acc3d6436",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675272782523230.ZDNlODA1MWEtYTk4Ni00MTMwLTgxZjYtNDNmYmMyYzY1NjJiMTdlZWZiZGEtN2M2NC00OTdhLTk5NTktYWI5Mjc0NTYwOWVm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe4IGEnk7uG_ubOep4hm3cS2U8WoPWuSATT3WE3y4Ciph47INohzZhJb5mGTQKosszVokBKk6ZsY9ft_WpOaTTglMVuTxyfTExcNFeHOMDFuRlKJn-Mq-xxO9QdeaAbL_YCeXrvPrUqSD8UlUZpEp4gs_OC29Q9AN1oqsmFRww7aUOgYr4y_i78lTXQNTF-WlAQGYlFdlAG6nVQfkf8xoUTehIFuqxLcC39gKLVLXTS2ez1yf5s2hPUDQvyrtAVQ7TJSGLOBCwDxxsXSoxQKSQsg7L5Vf7TiHzMNa0x8TOfKGr2fXP_3degeNVpbfXimeGAYE6bP40XO42EBlELbNpzBRwtpi6yyQRxqhDLnafsCut8g3VPyhKEP0vaaO6OqBs",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 10:14:49.643 -06:00 [DBG] user_consent grant with value: ideaBox|9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 not found in store.
2018-07-18 10:14:49.643 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 10:14:49.643 -06:00 [INF] User consented to scopes: ["openid","profile","business"]
2018-07-18 10:14:49.643 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-18 10:14:49.643 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 10:14:49.649 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 10:14:49.649 -06:00 [DBG] Getting claims for identity token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 and client: ideaBox
2018-07-18 10:14:49.649 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 10:14:49.662 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "Scopes": "openid profile business",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****aMow"
    },
    {
      "TokenType": "code",
      "TokenValue": "****c740"
    }
  ],
  "ActivityId": "0HLFCON9TK4FA:00000004",
  "TimeStamp": "2018-07-18T16:14:49Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 10:14:49.662 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe4IGEnk7uG_ubOep4hm3cS2U8WoPWuSATT3WE3y4Ciph47INohzZhJb5mGTQKosszVokBKk6ZsY9ft_WpOaTTglMVuTxyfTExcNFeHOMDFuRlKJn-Mq-xxO9QdeaAbL_YCeXrvPrUqSD8UlUZpEp4gs_OC29Q9AN1oqsmFRww7aUOgYr4y_i78lTXQNTF-WlAQGYlFdlAG6nVQfkf8xoUTehIFuqxLcC39gKLVLXTS2ez1yf5s2hPUDQvyrtAVQ7TJSGLOBCwDxxsXSoxQKSQsg7L5Vf7TiHzMNa0x8TOfKGr2fXP_3degeNVpbfXimeGAYE6bP40XO42EBlELbNpzBRwtpi6yyQRxqhDLnafsCut8g3VPyhKEP0vaaO6OqBs",
  "Scope": "openid profile business"
}
2018-07-18 10:14:49.765 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 10:14:49.766 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 10:14:49.766 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 10:14:49.767 -06:00 [DBG] Start token request.
2018-07-18 10:14:49.767 -06:00 [DBG] Start client validation
2018-07-18 10:14:49.767 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 10:14:49.767 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 10:14:49.767 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 10:14:49.767 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 10:14:49.767 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:14:49.767 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 10:14:49.767 -06:00 [DBG] Client validation success
2018-07-18 10:14:49.767 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCON9TK4F8:00000003",
  "TimeStamp": "2018-07-18T16:14:49Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 10:14:49.768 -06:00 [DBG] Start token request validation
2018-07-18 10:14:49.768 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 10:14:49.777 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 10:14:49.777 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "8d3d950cc2e186a31390de09065dd5a07c226dac93df7fff0dd96465e828c740",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "8d3d950cc2e186a31390de09065dd5a07c226dac93df7fff0dd96465e828c740",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 10:14:49.777 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:14:49.778 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 10:14:49.778 -06:00 [DBG] Getting claims for access token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-18 10:14:49.791 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:14:49.791 -06:00 [DBG] Getting claims for identity token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 and client: ideaBox
2018-07-18 10:14:49.791 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 10:14:49.803 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Gzmg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****ozBg"
    }
  ],
  "ActivityId": "0HLFCON9TK4F8:00000003",
  "TimeStamp": "2018-07-18T16:14:49Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 10:14:49.804 -06:00 [DBG] Token request success.
2018-07-18 10:14:49.812 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 10:14:49.812 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 10:14:49.812 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 10:14:49.812 -06:00 [DBG] Start userinfo request
2018-07-18 10:14:49.812 -06:00 [DBG] Bearer token found in header
2018-07-18 10:14:49.815 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:14:49.815 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:14:49.816 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 10:14:49.817 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531930489,
    "exp": 1531934089,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
    "auth_time": 1531929828,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business"
    ],
    "amr": "pwd"
  }
}
2018-07-18 10:14:49.817 -06:00 [DBG] Creating userinfo response
2018-07-18 10:14:49.817 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 10:14:49.817 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 10:14:49.817 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number
2018-07-18 10:14:49.817 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 10:14:49.818 -06:00 [INF] Profile service returned to the following claim types: sub name given_name family_name website preferred_username
2018-07-18 10:14:49.818 -06:00 [DBG] End userinfo request
2018-07-18 10:34:35.870 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 10:34:35.870 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 10:34:35.871 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 10:34:35.871 -06:00 [DBG] Start discovery request
2018-07-18 10:34:36.015 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 10:34:36.015 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 10:34:36.015 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 10:34:36.015 -06:00 [DBG] Start key discovery request
2018-07-18 10:34:36.092 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 10:34:36.092 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 10:34:36.092 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 10:34:36.092 -06:00 [DBG] Start authorize request
2018-07-18 10:34:36.093 -06:00 [DBG] No user present in authorize request
2018-07-18 10:34:36.093 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:34:36.093 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:34:36.093 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:34:36.093 -06:00 [DBG] No PKCE used.
2018-07-18 10:34:36.093 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:34:36.093 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcmZDayyE3Tu9xnLzEg_2x-S6RDUkoaP5PkfMFEyUf9euSYTjBUb6Cg7Ub2llyjpg2b2RMVemrSOA6oxeXqVh1Khz1YQHZ_e1MY29YHXdYU_Pu2GpJJtrGYX8KKV_R1NJxko0gyEX4p8xYl46cdgZHAvO1Rzay34sgrmvKvy4zKoItOrUUeg9qAtFlQhmURl67-pBbAT-VH7kq5GZNR1HEeV64sSHIc8tLtMLZ5QJW3B2tXZ-Lele1ue5QAoTikBCM9S3ImOVU-Cj2x-_y60nyP_juGqEdTL5P8Cf2QUODXKNgC5ziagaOTRiy79ECkktw",
  "Nonce": "636675284760737010.MDE1ZWRjZDQtNzZjZC00NTFjLWExOTItZGEyNjRlYTc2MGI2MDI4NGNmNmYtZTI4MC00MDk1LWFhMjktNWU2ODVlZWE0MzYz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675284760737010.MDE1ZWRjZDQtNzZjZC00NTFjLWExOTItZGEyNjRlYTc2MGI2MDI4NGNmNmYtZTI4MC00MDk1LWFhMjktNWU2ODVlZWE0MzYz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcmZDayyE3Tu9xnLzEg_2x-S6RDUkoaP5PkfMFEyUf9euSYTjBUb6Cg7Ub2llyjpg2b2RMVemrSOA6oxeXqVh1Khz1YQHZ_e1MY29YHXdYU_Pu2GpJJtrGYX8KKV_R1NJxko0gyEX4p8xYl46cdgZHAvO1Rzay34sgrmvKvy4zKoItOrUUeg9qAtFlQhmURl67-pBbAT-VH7kq5GZNR1HEeV64sSHIc8tLtMLZ5QJW3B2tXZ-Lele1ue5QAoTikBCM9S3ImOVU-Cj2x-_y60nyP_juGqEdTL5P8Cf2QUODXKNgC5ziagaOTRiy79ECkktw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 10:34:36.093 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 10:34:36.096 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:34:36.096 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:34:36.096 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:34:36.096 -06:00 [DBG] No PKCE used.
2018-07-18 10:34:36.096 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:34:36.096 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:34:46.444 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 10:34:46.460 -06:00 [DBG] Augmenting SignInContext
2018-07-18 10:34:46.460 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 10:34:46.460 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 10:34:46.460 -06:00 [DBG] Adding auth_time claim with value: 1531931686
2018-07-18 10:34:46.461 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 10:34:46.461 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFCON9TK4FD:00000003",
  "TimeStamp": "2018-07-18T16:34:46Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 10:34:46.464 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:34:46.464 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:34:46.465 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 10:34:46.465 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 10:34:46.465 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 10:34:46.465 -06:00 [DBG] Start authorize callback request
2018-07-18 10:34:46.465 -06:00 [DBG] User in authorize request: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-18 10:34:46.465 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:34:46.465 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:34:46.465 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:34:46.465 -06:00 [DBG] No PKCE used.
2018-07-18 10:34:46.465 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:34:46.465 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcmZDayyE3Tu9xnLzEg_2x-S6RDUkoaP5PkfMFEyUf9euSYTjBUb6Cg7Ub2llyjpg2b2RMVemrSOA6oxeXqVh1Khz1YQHZ_e1MY29YHXdYU_Pu2GpJJtrGYX8KKV_R1NJxko0gyEX4p8xYl46cdgZHAvO1Rzay34sgrmvKvy4zKoItOrUUeg9qAtFlQhmURl67-pBbAT-VH7kq5GZNR1HEeV64sSHIc8tLtMLZ5QJW3B2tXZ-Lele1ue5QAoTikBCM9S3ImOVU-Cj2x-_y60nyP_juGqEdTL5P8Cf2QUODXKNgC5ziagaOTRiy79ECkktw",
  "Nonce": "636675284760737010.MDE1ZWRjZDQtNzZjZC00NTFjLWExOTItZGEyNjRlYTc2MGI2MDI4NGNmNmYtZTI4MC00MDk1LWFhMjktNWU2ODVlZWE0MzYz",
  "SessionId": "e1e429014f4738cb65e88cb1b6e20728",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675284760737010.MDE1ZWRjZDQtNzZjZC00NTFjLWExOTItZGEyNjRlYTc2MGI2MDI4NGNmNmYtZTI4MC00MDk1LWFhMjktNWU2ODVlZWE0MzYz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcmZDayyE3Tu9xnLzEg_2x-S6RDUkoaP5PkfMFEyUf9euSYTjBUb6Cg7Ub2llyjpg2b2RMVemrSOA6oxeXqVh1Khz1YQHZ_e1MY29YHXdYU_Pu2GpJJtrGYX8KKV_R1NJxko0gyEX4p8xYl46cdgZHAvO1Rzay34sgrmvKvy4zKoItOrUUeg9qAtFlQhmURl67-pBbAT-VH7kq5GZNR1HEeV64sSHIc8tLtMLZ5QJW3B2tXZ-Lele1ue5QAoTikBCM9S3ImOVU-Cj2x-_y60nyP_juGqEdTL5P8Cf2QUODXKNgC5ziagaOTRiy79ECkktw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 10:34:46.467 -06:00 [DBG] user_consent grant with value: ideaBox|9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 not found in store.
2018-07-18 10:34:46.467 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 10:34:46.467 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 10:34:46.469 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:34:46.469 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:34:46.470 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:34:46.470 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:34:46.470 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:34:46.470 -06:00 [DBG] No PKCE used.
2018-07-18 10:34:46.470 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:34:46.470 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:34:54.070 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 10:34:54.071 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:34:54.071 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:34:54.071 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:34:54.071 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:34:54.071 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:34:54.071 -06:00 [DBG] No PKCE used.
2018-07-18 10:34:54.071 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:34:54.075 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:34:54.075 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 10:34:54.075 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 10:34:54.075 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 10:34:54.075 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 10:34:54.075 -06:00 [DBG] Start authorize callback request
2018-07-18 10:34:54.076 -06:00 [DBG] User in authorize request: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-18 10:34:54.076 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 10:34:54.076 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:34:54.076 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 10:34:54.076 -06:00 [DBG] No PKCE used.
2018-07-18 10:34:54.076 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 10:34:54.076 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcmZDayyE3Tu9xnLzEg_2x-S6RDUkoaP5PkfMFEyUf9euSYTjBUb6Cg7Ub2llyjpg2b2RMVemrSOA6oxeXqVh1Khz1YQHZ_e1MY29YHXdYU_Pu2GpJJtrGYX8KKV_R1NJxko0gyEX4p8xYl46cdgZHAvO1Rzay34sgrmvKvy4zKoItOrUUeg9qAtFlQhmURl67-pBbAT-VH7kq5GZNR1HEeV64sSHIc8tLtMLZ5QJW3B2tXZ-Lele1ue5QAoTikBCM9S3ImOVU-Cj2x-_y60nyP_juGqEdTL5P8Cf2QUODXKNgC5ziagaOTRiy79ECkktw",
  "Nonce": "636675284760737010.MDE1ZWRjZDQtNzZjZC00NTFjLWExOTItZGEyNjRlYTc2MGI2MDI4NGNmNmYtZTI4MC00MDk1LWFhMjktNWU2ODVlZWE0MzYz",
  "SessionId": "e1e429014f4738cb65e88cb1b6e20728",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675284760737010.MDE1ZWRjZDQtNzZjZC00NTFjLWExOTItZGEyNjRlYTc2MGI2MDI4NGNmNmYtZTI4MC00MDk1LWFhMjktNWU2ODVlZWE0MzYz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcmZDayyE3Tu9xnLzEg_2x-S6RDUkoaP5PkfMFEyUf9euSYTjBUb6Cg7Ub2llyjpg2b2RMVemrSOA6oxeXqVh1Khz1YQHZ_e1MY29YHXdYU_Pu2GpJJtrGYX8KKV_R1NJxko0gyEX4p8xYl46cdgZHAvO1Rzay34sgrmvKvy4zKoItOrUUeg9qAtFlQhmURl67-pBbAT-VH7kq5GZNR1HEeV64sSHIc8tLtMLZ5QJW3B2tXZ-Lele1ue5QAoTikBCM9S3ImOVU-Cj2x-_y60nyP_juGqEdTL5P8Cf2QUODXKNgC5ziagaOTRiy79ECkktw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 10:34:54.077 -06:00 [DBG] user_consent grant with value: ideaBox|9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 not found in store.
2018-07-18 10:34:54.077 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 10:34:54.077 -06:00 [INF] User consented to scopes: ["openid","profile","business"]
2018-07-18 10:34:54.077 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-18 10:34:54.078 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 10:34:54.084 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 10:34:54.085 -06:00 [DBG] Getting claims for identity token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 and client: ideaBox
2018-07-18 10:34:54.085 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 10:34:54.097 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "Scopes": "openid profile business",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****lK7w"
    },
    {
      "TokenType": "code",
      "TokenValue": "****c776"
    }
  ],
  "ActivityId": "0HLFCON9TK4FD:00000007",
  "TimeStamp": "2018-07-18T16:34:54Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 10:34:54.097 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcmZDayyE3Tu9xnLzEg_2x-S6RDUkoaP5PkfMFEyUf9euSYTjBUb6Cg7Ub2llyjpg2b2RMVemrSOA6oxeXqVh1Khz1YQHZ_e1MY29YHXdYU_Pu2GpJJtrGYX8KKV_R1NJxko0gyEX4p8xYl46cdgZHAvO1Rzay34sgrmvKvy4zKoItOrUUeg9qAtFlQhmURl67-pBbAT-VH7kq5GZNR1HEeV64sSHIc8tLtMLZ5QJW3B2tXZ-Lele1ue5QAoTikBCM9S3ImOVU-Cj2x-_y60nyP_juGqEdTL5P8Cf2QUODXKNgC5ziagaOTRiy79ECkktw",
  "Scope": "openid profile business"
}
2018-07-18 10:34:54.097 -06:00 [DBG] Augmenting SignInContext
2018-07-18 10:34:54.098 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 10:34:54.185 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 10:34:54.185 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 10:34:54.185 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 10:34:54.185 -06:00 [DBG] Start token request.
2018-07-18 10:34:54.185 -06:00 [DBG] Start client validation
2018-07-18 10:34:54.185 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 10:34:54.185 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 10:34:54.185 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 10:34:54.185 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 10:34:54.185 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:34:54.185 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 10:34:54.185 -06:00 [DBG] Client validation success
2018-07-18 10:34:54.185 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCON9TK4FC:00000003",
  "TimeStamp": "2018-07-18T16:34:54Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 10:34:54.185 -06:00 [DBG] Start token request validation
2018-07-18 10:34:54.186 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 10:34:54.193 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 10:34:54.193 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "52e777dfee674b1f2ff0c7c57a3adaa552111dd3ce7e718ee13f83f57133c776",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "52e777dfee674b1f2ff0c7c57a3adaa552111dd3ce7e718ee13f83f57133c776",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 10:34:54.193 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:34:54.194 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 10:34:54.194 -06:00 [DBG] Getting claims for access token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-18 10:34:54.206 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:34:54.206 -06:00 [DBG] Getting claims for identity token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 and client: ideaBox
2018-07-18 10:34:54.207 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 10:34:54.218 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****AvMg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****9miw"
    }
  ],
  "ActivityId": "0HLFCON9TK4FC:00000003",
  "TimeStamp": "2018-07-18T16:34:54Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 10:34:54.218 -06:00 [DBG] Token request success.
2018-07-18 10:34:54.226 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 10:34:54.226 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 10:34:54.226 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 10:34:54.226 -06:00 [DBG] Start userinfo request
2018-07-18 10:34:54.226 -06:00 [DBG] Bearer token found in header
2018-07-18 10:34:54.229 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:34:54.229 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 10:34:54.230 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 10:34:54.230 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531931694,
    "exp": 1531935294,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
    "auth_time": 1531931686,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business"
    ],
    "amr": "pwd"
  }
}
2018-07-18 10:34:54.230 -06:00 [DBG] Creating userinfo response
2018-07-18 10:34:54.230 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 10:34:54.230 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 10:34:54.230 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number
2018-07-18 10:34:54.230 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 10:34:54.232 -06:00 [INF] Profile service returned to the following claim types: sub name given_name family_name website preferred_username
2018-07-18 10:34:54.232 -06:00 [DBG] End userinfo request
2018-07-18 13:06:37.950 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 13:06:37.950 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 13:06:37.950 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 13:06:37.950 -06:00 [DBG] Start discovery request
2018-07-18 13:06:38.073 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 13:06:38.073 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 13:06:38.073 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 13:06:38.073 -06:00 [DBG] Start key discovery request
2018-07-18 13:06:38.149 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 13:06:38.149 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 13:06:38.149 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 13:06:38.149 -06:00 [DBG] Start authorize request
2018-07-18 13:06:38.149 -06:00 [DBG] No user present in authorize request
2018-07-18 13:06:38.149 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:06:38.149 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:06:38.149 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:06:38.149 -06:00 [DBG] No PKCE used.
2018-07-18 13:06:38.149 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:06:38.149 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcTUnU8A9F16ujFD9-2IU68HQdYgSy6RAua5lwyLjHUllsJI6G--llV_wI89K7aATP0RhofNPyooWxCfDo29G4B15SdZXWYAaICCYslIeqwAMwKFZHvvQRv_72P28nF_AO38Phz0muDc0tMYq60R6cWVaA4PfiTneFhF3kqi5z5jC7NmWCwfpaLA4XDAXOOdk9cAkVooLq9iHsqTb5-LGO25pOrrE7Bj-IFR3WKMnw5k8drWZ0kB15jSury-EHwDXrsLm8yMGzAkGI_gabijnLRRENp1Fmc_k_BF7ZsENzG-GjYMUvs78_KC92mZ47SBb8",
  "Nonce": "636675375981289710.YTZjMTFjNGUtYzFhNi00MDViLTkxN2QtNTI1MjRmMmJiM2U5N2M5NDY4ZDktM2FiYi00YmZhLTlmZDUtMGFhZTA3NGNmOGFk",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675375981289710.YTZjMTFjNGUtYzFhNi00MDViLTkxN2QtNTI1MjRmMmJiM2U5N2M5NDY4ZDktM2FiYi00YmZhLTlmZDUtMGFhZTA3NGNmOGFk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcTUnU8A9F16ujFD9-2IU68HQdYgSy6RAua5lwyLjHUllsJI6G--llV_wI89K7aATP0RhofNPyooWxCfDo29G4B15SdZXWYAaICCYslIeqwAMwKFZHvvQRv_72P28nF_AO38Phz0muDc0tMYq60R6cWVaA4PfiTneFhF3kqi5z5jC7NmWCwfpaLA4XDAXOOdk9cAkVooLq9iHsqTb5-LGO25pOrrE7Bj-IFR3WKMnw5k8drWZ0kB15jSury-EHwDXrsLm8yMGzAkGI_gabijnLRRENp1Fmc_k_BF7ZsENzG-GjYMUvs78_KC92mZ47SBb8",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 13:06:38.149 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 13:06:38.152 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:06:38.152 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:06:38.152 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:06:38.152 -06:00 [DBG] No PKCE used.
2018-07-18 13:06:38.152 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:06:38.152 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:07:00.984 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 13:07:01.000 -06:00 [DBG] Augmenting SignInContext
2018-07-18 13:07:01.000 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 13:07:01.000 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 13:07:01.000 -06:00 [DBG] Adding auth_time claim with value: 1531940821
2018-07-18 13:07:01.000 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 13:07:01.000 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCON9TK4FF:00000003",
  "TimeStamp": "2018-07-18T19:07:01Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 13:07:01.003 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:07:01.003 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:07:01.003 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 13:07:01.003 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 13:07:01.003 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 13:07:01.003 -06:00 [DBG] Start authorize callback request
2018-07-18 13:07:01.003 -06:00 [DBG] User in authorize request: 124135d0-f696-44d3-a52f-f8f329ca140d
2018-07-18 13:07:01.003 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:07:01.003 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:07:01.003 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:07:01.003 -06:00 [DBG] No PKCE used.
2018-07-18 13:07:01.003 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:07:01.003 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcTUnU8A9F16ujFD9-2IU68HQdYgSy6RAua5lwyLjHUllsJI6G--llV_wI89K7aATP0RhofNPyooWxCfDo29G4B15SdZXWYAaICCYslIeqwAMwKFZHvvQRv_72P28nF_AO38Phz0muDc0tMYq60R6cWVaA4PfiTneFhF3kqi5z5jC7NmWCwfpaLA4XDAXOOdk9cAkVooLq9iHsqTb5-LGO25pOrrE7Bj-IFR3WKMnw5k8drWZ0kB15jSury-EHwDXrsLm8yMGzAkGI_gabijnLRRENp1Fmc_k_BF7ZsENzG-GjYMUvs78_KC92mZ47SBb8",
  "Nonce": "636675375981289710.YTZjMTFjNGUtYzFhNi00MDViLTkxN2QtNTI1MjRmMmJiM2U5N2M5NDY4ZDktM2FiYi00YmZhLTlmZDUtMGFhZTA3NGNmOGFk",
  "SessionId": "6a56234ccbf06a7997cfa8d44c26acee",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675375981289710.YTZjMTFjNGUtYzFhNi00MDViLTkxN2QtNTI1MjRmMmJiM2U5N2M5NDY4ZDktM2FiYi00YmZhLTlmZDUtMGFhZTA3NGNmOGFk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcTUnU8A9F16ujFD9-2IU68HQdYgSy6RAua5lwyLjHUllsJI6G--llV_wI89K7aATP0RhofNPyooWxCfDo29G4B15SdZXWYAaICCYslIeqwAMwKFZHvvQRv_72P28nF_AO38Phz0muDc0tMYq60R6cWVaA4PfiTneFhF3kqi5z5jC7NmWCwfpaLA4XDAXOOdk9cAkVooLq9iHsqTb5-LGO25pOrrE7Bj-IFR3WKMnw5k8drWZ0kB15jSury-EHwDXrsLm8yMGzAkGI_gabijnLRRENp1Fmc_k_BF7ZsENzG-GjYMUvs78_KC92mZ47SBb8",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 13:07:01.005 -06:00 [DBG] user_consent grant with value: ideaBox|124135d0-f696-44d3-a52f-f8f329ca140d not found in store.
2018-07-18 13:07:01.005 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 13:07:01.005 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 13:07:01.007 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:07:01.007 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:07:01.007 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:07:01.007 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:07:01.007 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:07:01.007 -06:00 [DBG] No PKCE used.
2018-07-18 13:07:01.007 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:07:01.007 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:07:05.651 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 13:07:05.652 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:07:05.652 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:07:05.652 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:07:05.652 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:07:05.652 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:07:05.652 -06:00 [DBG] No PKCE used.
2018-07-18 13:07:05.652 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:07:05.656 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:07:05.656 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:07:05.656 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 13:07:05.656 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 13:07:05.656 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 13:07:05.656 -06:00 [DBG] Start authorize callback request
2018-07-18 13:07:05.656 -06:00 [DBG] User in authorize request: 124135d0-f696-44d3-a52f-f8f329ca140d
2018-07-18 13:07:05.656 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:07:05.656 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:07:05.656 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:07:05.656 -06:00 [DBG] No PKCE used.
2018-07-18 13:07:05.656 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:07:05.656 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcTUnU8A9F16ujFD9-2IU68HQdYgSy6RAua5lwyLjHUllsJI6G--llV_wI89K7aATP0RhofNPyooWxCfDo29G4B15SdZXWYAaICCYslIeqwAMwKFZHvvQRv_72P28nF_AO38Phz0muDc0tMYq60R6cWVaA4PfiTneFhF3kqi5z5jC7NmWCwfpaLA4XDAXOOdk9cAkVooLq9iHsqTb5-LGO25pOrrE7Bj-IFR3WKMnw5k8drWZ0kB15jSury-EHwDXrsLm8yMGzAkGI_gabijnLRRENp1Fmc_k_BF7ZsENzG-GjYMUvs78_KC92mZ47SBb8",
  "Nonce": "636675375981289710.YTZjMTFjNGUtYzFhNi00MDViLTkxN2QtNTI1MjRmMmJiM2U5N2M5NDY4ZDktM2FiYi00YmZhLTlmZDUtMGFhZTA3NGNmOGFk",
  "SessionId": "6a56234ccbf06a7997cfa8d44c26acee",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675375981289710.YTZjMTFjNGUtYzFhNi00MDViLTkxN2QtNTI1MjRmMmJiM2U5N2M5NDY4ZDktM2FiYi00YmZhLTlmZDUtMGFhZTA3NGNmOGFk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcTUnU8A9F16ujFD9-2IU68HQdYgSy6RAua5lwyLjHUllsJI6G--llV_wI89K7aATP0RhofNPyooWxCfDo29G4B15SdZXWYAaICCYslIeqwAMwKFZHvvQRv_72P28nF_AO38Phz0muDc0tMYq60R6cWVaA4PfiTneFhF3kqi5z5jC7NmWCwfpaLA4XDAXOOdk9cAkVooLq9iHsqTb5-LGO25pOrrE7Bj-IFR3WKMnw5k8drWZ0kB15jSury-EHwDXrsLm8yMGzAkGI_gabijnLRRENp1Fmc_k_BF7ZsENzG-GjYMUvs78_KC92mZ47SBb8",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 13:07:05.657 -06:00 [DBG] user_consent grant with value: ideaBox|124135d0-f696-44d3-a52f-f8f329ca140d not found in store.
2018-07-18 13:07:05.658 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 13:07:05.658 -06:00 [INF] User consented to scopes: ["openid","profile","business"]
2018-07-18 13:07:05.658 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 124135d0-f696-44d3-a52f-f8f329ca140d
2018-07-18 13:07:05.658 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 13:07:05.662 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 13:07:05.662 -06:00 [DBG] Getting claims for identity token for subject: 124135d0-f696-44d3-a52f-f8f329ca140d and client: ideaBox
2018-07-18 13:07:05.662 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 13:07:05.674 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "Scopes": "openid profile business",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****jW1Q"
    },
    {
      "TokenType": "code",
      "TokenValue": "****51aa"
    }
  ],
  "ActivityId": "0HLFCON9TK4FF:00000007",
  "TimeStamp": "2018-07-18T19:07:05Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 13:07:05.674 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcTUnU8A9F16ujFD9-2IU68HQdYgSy6RAua5lwyLjHUllsJI6G--llV_wI89K7aATP0RhofNPyooWxCfDo29G4B15SdZXWYAaICCYslIeqwAMwKFZHvvQRv_72P28nF_AO38Phz0muDc0tMYq60R6cWVaA4PfiTneFhF3kqi5z5jC7NmWCwfpaLA4XDAXOOdk9cAkVooLq9iHsqTb5-LGO25pOrrE7Bj-IFR3WKMnw5k8drWZ0kB15jSury-EHwDXrsLm8yMGzAkGI_gabijnLRRENp1Fmc_k_BF7ZsENzG-GjYMUvs78_KC92mZ47SBb8",
  "Scope": "openid profile business"
}
2018-07-18 13:07:05.674 -06:00 [DBG] Augmenting SignInContext
2018-07-18 13:07:05.674 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 13:07:05.783 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 13:07:05.784 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 13:07:05.784 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 13:07:05.784 -06:00 [DBG] Start token request.
2018-07-18 13:07:05.784 -06:00 [DBG] Start client validation
2018-07-18 13:07:05.784 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 13:07:05.784 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 13:07:05.784 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 13:07:05.784 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 13:07:05.784 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:07:05.784 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 13:07:05.784 -06:00 [DBG] Client validation success
2018-07-18 13:07:05.784 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCON9TK4FE:00000003",
  "TimeStamp": "2018-07-18T19:07:05Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 13:07:05.784 -06:00 [DBG] Start token request validation
2018-07-18 13:07:05.784 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 13:07:05.792 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 13:07:05.792 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "14f9e36446a0c6fdb75be5320f65c29b359a2833c30e54236958d7c298c251aa",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "14f9e36446a0c6fdb75be5320f65c29b359a2833c30e54236958d7c298c251aa",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 13:07:05.792 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:07:05.792 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 13:07:05.792 -06:00 [DBG] Getting claims for access token for subject: 124135d0-f696-44d3-a52f-f8f329ca140d
2018-07-18 13:07:05.805 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:07:05.805 -06:00 [DBG] Getting claims for identity token for subject: 124135d0-f696-44d3-a52f-f8f329ca140d and client: ideaBox
2018-07-18 13:07:05.805 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 13:07:05.816 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****gkug"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****1yHw"
    }
  ],
  "ActivityId": "0HLFCON9TK4FE:00000003",
  "TimeStamp": "2018-07-18T19:07:05Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 13:07:05.816 -06:00 [DBG] Token request success.
2018-07-18 13:07:05.825 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 13:07:05.825 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 13:07:05.825 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 13:07:05.825 -06:00 [DBG] Start userinfo request
2018-07-18 13:07:05.825 -06:00 [DBG] Bearer token found in header
2018-07-18 13:07:05.828 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:07:05.828 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:07:05.829 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 13:07:05.829 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531940825,
    "exp": 1531944425,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "124135d0-f696-44d3-a52f-f8f329ca140d",
    "auth_time": 1531940821,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business"
    ],
    "amr": "pwd"
  }
}
2018-07-18 13:07:05.829 -06:00 [DBG] Creating userinfo response
2018-07-18 13:07:05.829 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 13:07:05.829 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 13:07:05.829 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number
2018-07-18 13:07:05.829 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 13:07:05.830 -06:00 [INF] Profile service returned to the following claim types: sub name given_name family_name website preferred_username
2018-07-18 13:07:05.830 -06:00 [DBG] End userinfo request
2018-07-18 13:18:12.778 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 13:18:12.778 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 13:18:12.778 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 13:18:12.778 -06:00 [DBG] Start discovery request
2018-07-18 13:18:12.835 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 13:18:12.835 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 13:18:12.836 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 13:18:12.836 -06:00 [DBG] Start key discovery request
2018-07-18 13:18:12.858 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 13:18:12.858 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 13:18:12.858 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 13:18:12.858 -06:00 [DBG] Start authorize request
2018-07-18 13:18:12.858 -06:00 [DBG] No user present in authorize request
2018-07-18 13:18:12.858 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:18:12.858 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:18:12.858 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:18:12.859 -06:00 [DBG] No PKCE used.
2018-07-18 13:18:12.859 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:18:12.859 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHezhiFmNwm80MIVpyc_2XMey5lWSCFtHPGtY5TpO40K1yki1QjExAVmVY34A95HYMGKRG_09iD5sqN7wzOt_T3eaZFoL83zD2dA63WGYCC3IkCv5z8wVlG3pOcXCNYj5Xe0rtYybWDcMUfFhGLQ33LUtr3_Txh4S8_N6b4_OSp7IZsKi5mk9kXh3p6goOMj9TEEuvfoXABlPTcODmnyu1XGLyust4XILafB8f12fNFtqlnUMzpvJ5Hp5zPx8Oh3cUODJpDADv-gIqcMezKIjDJ_9bZjhcXl21KdIPiTV9PWGuZWXTFyK0-o1ITbGi3vDTo",
  "Nonce": "636675382928492790.NzAzZGM2Y2MtZDVkZi00Y2RmLWI4ODgtMTQ3YjE0YmMwMzc4ZTg3M2RjODAtY2JmNC00OTQ3LWI0NWItMTUxYmI0NGJhMGM0",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675382928492790.NzAzZGM2Y2MtZDVkZi00Y2RmLWI4ODgtMTQ3YjE0YmMwMzc4ZTg3M2RjODAtY2JmNC00OTQ3LWI0NWItMTUxYmI0NGJhMGM0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHezhiFmNwm80MIVpyc_2XMey5lWSCFtHPGtY5TpO40K1yki1QjExAVmVY34A95HYMGKRG_09iD5sqN7wzOt_T3eaZFoL83zD2dA63WGYCC3IkCv5z8wVlG3pOcXCNYj5Xe0rtYybWDcMUfFhGLQ33LUtr3_Txh4S8_N6b4_OSp7IZsKi5mk9kXh3p6goOMj9TEEuvfoXABlPTcODmnyu1XGLyust4XILafB8f12fNFtqlnUMzpvJ5Hp5zPx8Oh3cUODJpDADv-gIqcMezKIjDJ_9bZjhcXl21KdIPiTV9PWGuZWXTFyK0-o1ITbGi3vDTo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 13:18:12.859 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 13:18:12.861 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:18:12.861 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:18:12.861 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:18:12.861 -06:00 [DBG] No PKCE used.
2018-07-18 13:18:12.861 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:18:12.861 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:18:20.812 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 13:18:20.829 -06:00 [DBG] Augmenting SignInContext
2018-07-18 13:18:20.829 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 13:18:20.829 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 13:18:20.829 -06:00 [DBG] Adding auth_time claim with value: 1531941500
2018-07-18 13:18:20.829 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 13:18:20.830 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCON9TK4FH:00000003",
  "TimeStamp": "2018-07-18T19:18:20Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 13:18:20.832 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:18:20.832 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:18:20.832 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 13:18:20.832 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 13:18:20.832 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 13:18:20.832 -06:00 [DBG] Start authorize callback request
2018-07-18 13:18:20.832 -06:00 [DBG] User in authorize request: 124135d0-f696-44d3-a52f-f8f329ca140d
2018-07-18 13:18:20.832 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:18:20.833 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:18:20.833 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:18:20.833 -06:00 [DBG] No PKCE used.
2018-07-18 13:18:20.833 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:18:20.833 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHezhiFmNwm80MIVpyc_2XMey5lWSCFtHPGtY5TpO40K1yki1QjExAVmVY34A95HYMGKRG_09iD5sqN7wzOt_T3eaZFoL83zD2dA63WGYCC3IkCv5z8wVlG3pOcXCNYj5Xe0rtYybWDcMUfFhGLQ33LUtr3_Txh4S8_N6b4_OSp7IZsKi5mk9kXh3p6goOMj9TEEuvfoXABlPTcODmnyu1XGLyust4XILafB8f12fNFtqlnUMzpvJ5Hp5zPx8Oh3cUODJpDADv-gIqcMezKIjDJ_9bZjhcXl21KdIPiTV9PWGuZWXTFyK0-o1ITbGi3vDTo",
  "Nonce": "636675382928492790.NzAzZGM2Y2MtZDVkZi00Y2RmLWI4ODgtMTQ3YjE0YmMwMzc4ZTg3M2RjODAtY2JmNC00OTQ3LWI0NWItMTUxYmI0NGJhMGM0",
  "SessionId": "b6b9f565dda459b362c3dc8d05f6a7f3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675382928492790.NzAzZGM2Y2MtZDVkZi00Y2RmLWI4ODgtMTQ3YjE0YmMwMzc4ZTg3M2RjODAtY2JmNC00OTQ3LWI0NWItMTUxYmI0NGJhMGM0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHezhiFmNwm80MIVpyc_2XMey5lWSCFtHPGtY5TpO40K1yki1QjExAVmVY34A95HYMGKRG_09iD5sqN7wzOt_T3eaZFoL83zD2dA63WGYCC3IkCv5z8wVlG3pOcXCNYj5Xe0rtYybWDcMUfFhGLQ33LUtr3_Txh4S8_N6b4_OSp7IZsKi5mk9kXh3p6goOMj9TEEuvfoXABlPTcODmnyu1XGLyust4XILafB8f12fNFtqlnUMzpvJ5Hp5zPx8Oh3cUODJpDADv-gIqcMezKIjDJ_9bZjhcXl21KdIPiTV9PWGuZWXTFyK0-o1ITbGi3vDTo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 13:18:20.834 -06:00 [DBG] user_consent grant with value: ideaBox|124135d0-f696-44d3-a52f-f8f329ca140d not found in store.
2018-07-18 13:18:20.834 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 13:18:20.834 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 13:18:20.837 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:18:20.837 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:18:20.837 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:18:20.837 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:18:20.837 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:18:20.837 -06:00 [DBG] No PKCE used.
2018-07-18 13:18:20.837 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:18:20.837 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:18:31.689 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 13:18:31.689 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:18:31.689 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:18:31.690 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:18:31.690 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:18:31.690 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:18:31.690 -06:00 [DBG] No PKCE used.
2018-07-18 13:18:31.690 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:18:31.694 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:18:31.694 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:18:31.694 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 13:18:31.694 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 13:18:31.694 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 13:18:31.694 -06:00 [DBG] Start authorize callback request
2018-07-18 13:18:31.694 -06:00 [DBG] User in authorize request: 124135d0-f696-44d3-a52f-f8f329ca140d
2018-07-18 13:18:31.694 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:18:31.694 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:18:31.694 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:18:31.694 -06:00 [DBG] No PKCE used.
2018-07-18 13:18:31.694 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:18:31.694 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHezhiFmNwm80MIVpyc_2XMey5lWSCFtHPGtY5TpO40K1yki1QjExAVmVY34A95HYMGKRG_09iD5sqN7wzOt_T3eaZFoL83zD2dA63WGYCC3IkCv5z8wVlG3pOcXCNYj5Xe0rtYybWDcMUfFhGLQ33LUtr3_Txh4S8_N6b4_OSp7IZsKi5mk9kXh3p6goOMj9TEEuvfoXABlPTcODmnyu1XGLyust4XILafB8f12fNFtqlnUMzpvJ5Hp5zPx8Oh3cUODJpDADv-gIqcMezKIjDJ_9bZjhcXl21KdIPiTV9PWGuZWXTFyK0-o1ITbGi3vDTo",
  "Nonce": "636675382928492790.NzAzZGM2Y2MtZDVkZi00Y2RmLWI4ODgtMTQ3YjE0YmMwMzc4ZTg3M2RjODAtY2JmNC00OTQ3LWI0NWItMTUxYmI0NGJhMGM0",
  "SessionId": "b6b9f565dda459b362c3dc8d05f6a7f3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675382928492790.NzAzZGM2Y2MtZDVkZi00Y2RmLWI4ODgtMTQ3YjE0YmMwMzc4ZTg3M2RjODAtY2JmNC00OTQ3LWI0NWItMTUxYmI0NGJhMGM0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHezhiFmNwm80MIVpyc_2XMey5lWSCFtHPGtY5TpO40K1yki1QjExAVmVY34A95HYMGKRG_09iD5sqN7wzOt_T3eaZFoL83zD2dA63WGYCC3IkCv5z8wVlG3pOcXCNYj5Xe0rtYybWDcMUfFhGLQ33LUtr3_Txh4S8_N6b4_OSp7IZsKi5mk9kXh3p6goOMj9TEEuvfoXABlPTcODmnyu1XGLyust4XILafB8f12fNFtqlnUMzpvJ5Hp5zPx8Oh3cUODJpDADv-gIqcMezKIjDJ_9bZjhcXl21KdIPiTV9PWGuZWXTFyK0-o1ITbGi3vDTo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 13:18:31.696 -06:00 [DBG] user_consent grant with value: ideaBox|124135d0-f696-44d3-a52f-f8f329ca140d not found in store.
2018-07-18 13:18:31.696 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 13:18:31.696 -06:00 [INF] User consented to scopes: ["openid","profile","business"]
2018-07-18 13:18:31.696 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 124135d0-f696-44d3-a52f-f8f329ca140d
2018-07-18 13:18:31.696 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 13:18:31.700 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 13:18:31.700 -06:00 [DBG] Getting claims for identity token for subject: 124135d0-f696-44d3-a52f-f8f329ca140d and client: ideaBox
2018-07-18 13:18:31.701 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 13:18:31.714 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "Scopes": "openid profile business",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****LSCw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****17d7"
    }
  ],
  "ActivityId": "0HLFCON9TK4FH:00000007",
  "TimeStamp": "2018-07-18T19:18:31Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 13:18:31.714 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHezhiFmNwm80MIVpyc_2XMey5lWSCFtHPGtY5TpO40K1yki1QjExAVmVY34A95HYMGKRG_09iD5sqN7wzOt_T3eaZFoL83zD2dA63WGYCC3IkCv5z8wVlG3pOcXCNYj5Xe0rtYybWDcMUfFhGLQ33LUtr3_Txh4S8_N6b4_OSp7IZsKi5mk9kXh3p6goOMj9TEEuvfoXABlPTcODmnyu1XGLyust4XILafB8f12fNFtqlnUMzpvJ5Hp5zPx8Oh3cUODJpDADv-gIqcMezKIjDJ_9bZjhcXl21KdIPiTV9PWGuZWXTFyK0-o1ITbGi3vDTo",
  "Scope": "openid profile business"
}
2018-07-18 13:18:31.714 -06:00 [DBG] Augmenting SignInContext
2018-07-18 13:18:31.714 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 13:18:31.816 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 13:18:31.816 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 13:18:31.816 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 13:18:31.816 -06:00 [DBG] Start token request.
2018-07-18 13:18:31.816 -06:00 [DBG] Start client validation
2018-07-18 13:18:31.816 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 13:18:31.816 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 13:18:31.817 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 13:18:31.817 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 13:18:31.817 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:18:31.817 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 13:18:31.817 -06:00 [DBG] Client validation success
2018-07-18 13:18:31.817 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCON9TK4FG:00000003",
  "TimeStamp": "2018-07-18T19:18:31Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 13:18:31.817 -06:00 [DBG] Start token request validation
2018-07-18 13:18:31.817 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 13:18:31.826 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 13:18:31.826 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "3ad2ca15a5635cdd5d976ed0ea743f311bd3982d631fc5c39df88e1fa19817d7",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "3ad2ca15a5635cdd5d976ed0ea743f311bd3982d631fc5c39df88e1fa19817d7",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 13:18:31.826 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:18:31.826 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 13:18:31.826 -06:00 [DBG] Getting claims for access token for subject: 124135d0-f696-44d3-a52f-f8f329ca140d
2018-07-18 13:18:31.839 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:18:31.839 -06:00 [DBG] Getting claims for identity token for subject: 124135d0-f696-44d3-a52f-f8f329ca140d and client: ideaBox
2018-07-18 13:18:31.839 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 13:18:31.851 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****AAkQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****iS2A"
    }
  ],
  "ActivityId": "0HLFCON9TK4FG:00000003",
  "TimeStamp": "2018-07-18T19:18:31Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 13:18:31.851 -06:00 [DBG] Token request success.
2018-07-18 13:18:31.859 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 13:18:31.859 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 13:18:31.859 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 13:18:31.859 -06:00 [DBG] Start userinfo request
2018-07-18 13:18:31.859 -06:00 [DBG] Bearer token found in header
2018-07-18 13:18:31.861 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:18:31.861 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:18:31.862 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 13:18:31.862 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531941511,
    "exp": 1531945111,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "124135d0-f696-44d3-a52f-f8f329ca140d",
    "auth_time": 1531941500,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business"
    ],
    "amr": "pwd"
  }
}
2018-07-18 13:18:31.863 -06:00 [DBG] Creating userinfo response
2018-07-18 13:18:31.863 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 13:18:31.863 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 13:18:31.863 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number
2018-07-18 13:18:31.863 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 13:18:31.864 -06:00 [INF] Profile service returned to the following claim types: sub name given_name family_name website preferred_username
2018-07-18 13:18:31.864 -06:00 [DBG] End userinfo request
2018-07-18 13:34:17.445 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 13:34:17.445 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 13:34:17.445 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 13:34:17.445 -06:00 [DBG] Start discovery request
2018-07-18 13:34:17.505 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 13:34:17.505 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 13:34:17.505 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 13:34:17.505 -06:00 [DBG] Start key discovery request
2018-07-18 13:34:17.528 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 13:34:17.528 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 13:34:17.529 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 13:34:17.529 -06:00 [DBG] Start authorize request
2018-07-18 13:34:17.529 -06:00 [DBG] No user present in authorize request
2018-07-18 13:34:17.529 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:34:17.529 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:34:17.529 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:34:17.529 -06:00 [DBG] No PKCE used.
2018-07-18 13:34:17.529 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:34:17.529 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeHB8ixiS1fUlVPxGjb3tEecVWW0dkaMJPQ9SxKGcuXypfGzMEJzJVjQD-mGiyAiFKMPy9fXx6mX6_2nXfelNKUJCy7hz-btDeOUxRH1FyBAcKmtMDvr4NYoZm2ccKYQxIbQEfBwmdDpPmImXHaf11eKgqi9p0BZl3YfZaIzntFtHHjc2xPUVxTa1j35-2SL_hFfHI0r95gUQx9IO24nWQVDkpcNaJ-gQ0roG-cD0lGcHdezqFiIkblEkxmc6QXnmxbufKxwvLFH6FEYLH0UW5GJCys0xd6Usf8L97tADlDJls4H92sjVZTeUnnwP6C7NE",
  "Nonce": "636675392575196410.YTYxYmY3YTktZTdkMS00ODg3LThmMjYtYTJjNTU0ZThkYzlhYzUzMjg0NmItOWViMC00NTAyLWI0NDAtZWVkYjNlOTkxYmI3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675392575196410.YTYxYmY3YTktZTdkMS00ODg3LThmMjYtYTJjNTU0ZThkYzlhYzUzMjg0NmItOWViMC00NTAyLWI0NDAtZWVkYjNlOTkxYmI3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeHB8ixiS1fUlVPxGjb3tEecVWW0dkaMJPQ9SxKGcuXypfGzMEJzJVjQD-mGiyAiFKMPy9fXx6mX6_2nXfelNKUJCy7hz-btDeOUxRH1FyBAcKmtMDvr4NYoZm2ccKYQxIbQEfBwmdDpPmImXHaf11eKgqi9p0BZl3YfZaIzntFtHHjc2xPUVxTa1j35-2SL_hFfHI0r95gUQx9IO24nWQVDkpcNaJ-gQ0roG-cD0lGcHdezqFiIkblEkxmc6QXnmxbufKxwvLFH6FEYLH0UW5GJCys0xd6Usf8L97tADlDJls4H92sjVZTeUnnwP6C7NE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 13:34:17.529 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 13:34:17.531 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:34:17.531 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:34:17.531 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:34:17.531 -06:00 [DBG] No PKCE used.
2018-07-18 13:34:17.531 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:34:17.531 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:34:26.191 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 13:34:26.205 -06:00 [DBG] Augmenting SignInContext
2018-07-18 13:34:26.205 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 13:34:26.205 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 13:34:26.205 -06:00 [DBG] Adding auth_time claim with value: 1531942466
2018-07-18 13:34:26.205 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 13:34:26.206 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCON9TK4FJ:00000003",
  "TimeStamp": "2018-07-18T19:34:26Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 13:34:26.208 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:34:26.208 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:34:26.208 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 13:34:26.208 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 13:34:26.208 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 13:34:26.208 -06:00 [DBG] Start authorize callback request
2018-07-18 13:34:26.208 -06:00 [DBG] User in authorize request: 124135d0-f696-44d3-a52f-f8f329ca140d
2018-07-18 13:34:26.209 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:34:26.209 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:34:26.209 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:34:26.209 -06:00 [DBG] No PKCE used.
2018-07-18 13:34:26.209 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:34:26.209 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeHB8ixiS1fUlVPxGjb3tEecVWW0dkaMJPQ9SxKGcuXypfGzMEJzJVjQD-mGiyAiFKMPy9fXx6mX6_2nXfelNKUJCy7hz-btDeOUxRH1FyBAcKmtMDvr4NYoZm2ccKYQxIbQEfBwmdDpPmImXHaf11eKgqi9p0BZl3YfZaIzntFtHHjc2xPUVxTa1j35-2SL_hFfHI0r95gUQx9IO24nWQVDkpcNaJ-gQ0roG-cD0lGcHdezqFiIkblEkxmc6QXnmxbufKxwvLFH6FEYLH0UW5GJCys0xd6Usf8L97tADlDJls4H92sjVZTeUnnwP6C7NE",
  "Nonce": "636675392575196410.YTYxYmY3YTktZTdkMS00ODg3LThmMjYtYTJjNTU0ZThkYzlhYzUzMjg0NmItOWViMC00NTAyLWI0NDAtZWVkYjNlOTkxYmI3",
  "SessionId": "43cf612dea3f258f8df8f181eb64abcb",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675392575196410.YTYxYmY3YTktZTdkMS00ODg3LThmMjYtYTJjNTU0ZThkYzlhYzUzMjg0NmItOWViMC00NTAyLWI0NDAtZWVkYjNlOTkxYmI3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeHB8ixiS1fUlVPxGjb3tEecVWW0dkaMJPQ9SxKGcuXypfGzMEJzJVjQD-mGiyAiFKMPy9fXx6mX6_2nXfelNKUJCy7hz-btDeOUxRH1FyBAcKmtMDvr4NYoZm2ccKYQxIbQEfBwmdDpPmImXHaf11eKgqi9p0BZl3YfZaIzntFtHHjc2xPUVxTa1j35-2SL_hFfHI0r95gUQx9IO24nWQVDkpcNaJ-gQ0roG-cD0lGcHdezqFiIkblEkxmc6QXnmxbufKxwvLFH6FEYLH0UW5GJCys0xd6Usf8L97tADlDJls4H92sjVZTeUnnwP6C7NE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 13:34:26.210 -06:00 [DBG] user_consent grant with value: ideaBox|124135d0-f696-44d3-a52f-f8f329ca140d not found in store.
2018-07-18 13:34:26.210 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 13:34:26.210 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 13:34:26.213 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:34:26.213 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:34:26.213 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:34:26.213 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:34:26.213 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:34:26.213 -06:00 [DBG] No PKCE used.
2018-07-18 13:34:26.213 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:34:26.213 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:34:48.127 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 13:34:48.127 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:34:48.127 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:34:48.128 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:34:48.128 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:34:48.128 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:34:48.128 -06:00 [DBG] No PKCE used.
2018-07-18 13:34:48.128 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:34:48.132 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:34:48.132 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:34:48.132 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 13:34:48.132 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 13:34:48.132 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 13:34:48.132 -06:00 [DBG] Start authorize callback request
2018-07-18 13:34:48.132 -06:00 [DBG] User in authorize request: 124135d0-f696-44d3-a52f-f8f329ca140d
2018-07-18 13:34:48.132 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:34:48.132 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:34:48.132 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:34:48.132 -06:00 [DBG] No PKCE used.
2018-07-18 13:34:48.133 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:34:48.133 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeHB8ixiS1fUlVPxGjb3tEecVWW0dkaMJPQ9SxKGcuXypfGzMEJzJVjQD-mGiyAiFKMPy9fXx6mX6_2nXfelNKUJCy7hz-btDeOUxRH1FyBAcKmtMDvr4NYoZm2ccKYQxIbQEfBwmdDpPmImXHaf11eKgqi9p0BZl3YfZaIzntFtHHjc2xPUVxTa1j35-2SL_hFfHI0r95gUQx9IO24nWQVDkpcNaJ-gQ0roG-cD0lGcHdezqFiIkblEkxmc6QXnmxbufKxwvLFH6FEYLH0UW5GJCys0xd6Usf8L97tADlDJls4H92sjVZTeUnnwP6C7NE",
  "Nonce": "636675392575196410.YTYxYmY3YTktZTdkMS00ODg3LThmMjYtYTJjNTU0ZThkYzlhYzUzMjg0NmItOWViMC00NTAyLWI0NDAtZWVkYjNlOTkxYmI3",
  "SessionId": "43cf612dea3f258f8df8f181eb64abcb",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675392575196410.YTYxYmY3YTktZTdkMS00ODg3LThmMjYtYTJjNTU0ZThkYzlhYzUzMjg0NmItOWViMC00NTAyLWI0NDAtZWVkYjNlOTkxYmI3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeHB8ixiS1fUlVPxGjb3tEecVWW0dkaMJPQ9SxKGcuXypfGzMEJzJVjQD-mGiyAiFKMPy9fXx6mX6_2nXfelNKUJCy7hz-btDeOUxRH1FyBAcKmtMDvr4NYoZm2ccKYQxIbQEfBwmdDpPmImXHaf11eKgqi9p0BZl3YfZaIzntFtHHjc2xPUVxTa1j35-2SL_hFfHI0r95gUQx9IO24nWQVDkpcNaJ-gQ0roG-cD0lGcHdezqFiIkblEkxmc6QXnmxbufKxwvLFH6FEYLH0UW5GJCys0xd6Usf8L97tADlDJls4H92sjVZTeUnnwP6C7NE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 13:34:48.134 -06:00 [DBG] user_consent grant with value: ideaBox|124135d0-f696-44d3-a52f-f8f329ca140d not found in store.
2018-07-18 13:34:48.134 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 13:34:48.134 -06:00 [INF] User consented to scopes: ["openid","profile","business"]
2018-07-18 13:34:48.134 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 124135d0-f696-44d3-a52f-f8f329ca140d
2018-07-18 13:34:48.134 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 13:34:48.139 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 13:34:48.139 -06:00 [DBG] Getting claims for identity token for subject: 124135d0-f696-44d3-a52f-f8f329ca140d and client: ideaBox
2018-07-18 13:34:48.139 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 13:34:48.150 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "Scopes": "openid profile business",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****zPlw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****a073"
    }
  ],
  "ActivityId": "0HLFCON9TK4FJ:00000007",
  "TimeStamp": "2018-07-18T19:34:48Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 13:34:48.150 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeHB8ixiS1fUlVPxGjb3tEecVWW0dkaMJPQ9SxKGcuXypfGzMEJzJVjQD-mGiyAiFKMPy9fXx6mX6_2nXfelNKUJCy7hz-btDeOUxRH1FyBAcKmtMDvr4NYoZm2ccKYQxIbQEfBwmdDpPmImXHaf11eKgqi9p0BZl3YfZaIzntFtHHjc2xPUVxTa1j35-2SL_hFfHI0r95gUQx9IO24nWQVDkpcNaJ-gQ0roG-cD0lGcHdezqFiIkblEkxmc6QXnmxbufKxwvLFH6FEYLH0UW5GJCys0xd6Usf8L97tADlDJls4H92sjVZTeUnnwP6C7NE",
  "Scope": "openid profile business"
}
2018-07-18 13:34:48.151 -06:00 [DBG] Augmenting SignInContext
2018-07-18 13:34:48.151 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 13:34:48.252 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 13:34:48.253 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 13:34:48.253 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 13:34:48.253 -06:00 [DBG] Start token request.
2018-07-18 13:34:48.253 -06:00 [DBG] Start client validation
2018-07-18 13:34:48.253 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 13:34:48.253 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 13:34:48.253 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 13:34:48.253 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 13:34:48.253 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:34:48.253 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 13:34:48.253 -06:00 [DBG] Client validation success
2018-07-18 13:34:48.253 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCON9TK4FI:00000003",
  "TimeStamp": "2018-07-18T19:34:48Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 13:34:48.253 -06:00 [DBG] Start token request validation
2018-07-18 13:34:48.253 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 13:34:48.261 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 13:34:48.261 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "5af9e6f38413f3c6b6ad93a7995f209cc7a83e1eca443cfc99e9291b1484a073",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "5af9e6f38413f3c6b6ad93a7995f209cc7a83e1eca443cfc99e9291b1484a073",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 13:34:48.261 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:34:48.261 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 13:34:48.261 -06:00 [DBG] Getting claims for access token for subject: 124135d0-f696-44d3-a52f-f8f329ca140d
2018-07-18 13:34:48.273 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:34:48.273 -06:00 [DBG] Getting claims for identity token for subject: 124135d0-f696-44d3-a52f-f8f329ca140d and client: ideaBox
2018-07-18 13:34:48.273 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 13:34:48.285 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****b09g"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****wZwg"
    }
  ],
  "ActivityId": "0HLFCON9TK4FI:00000003",
  "TimeStamp": "2018-07-18T19:34:48Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 13:34:48.285 -06:00 [DBG] Token request success.
2018-07-18 13:34:48.293 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 13:34:48.293 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 13:34:48.293 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 13:34:48.293 -06:00 [DBG] Start userinfo request
2018-07-18 13:34:48.293 -06:00 [DBG] Bearer token found in header
2018-07-18 13:34:48.295 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:34:48.295 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:34:48.296 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 13:34:48.296 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531942488,
    "exp": 1531946088,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "124135d0-f696-44d3-a52f-f8f329ca140d",
    "auth_time": 1531942466,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business"
    ],
    "amr": "pwd"
  }
}
2018-07-18 13:34:48.296 -06:00 [DBG] Creating userinfo response
2018-07-18 13:34:48.296 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 13:34:48.296 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 13:34:48.296 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number
2018-07-18 13:34:48.296 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 13:34:48.297 -06:00 [INF] Profile service returned to the following claim types: sub name given_name family_name website preferred_username
2018-07-18 13:34:48.297 -06:00 [DBG] End userinfo request
2018-07-18 13:41:43.998 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 13:41:43.999 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 13:41:43.999 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 13:41:43.999 -06:00 [DBG] Start discovery request
2018-07-18 13:41:44.141 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 13:41:44.141 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 13:41:44.142 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 13:41:44.142 -06:00 [DBG] Start key discovery request
2018-07-18 13:41:44.218 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 13:41:44.218 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 13:41:44.218 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 13:41:44.218 -06:00 [DBG] Start authorize request
2018-07-18 13:41:44.218 -06:00 [DBG] No user present in authorize request
2018-07-18 13:41:44.218 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:41:44.218 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:41:44.218 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:41:44.218 -06:00 [DBG] No PKCE used.
2018-07-18 13:41:44.218 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:41:44.218 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf7DP4VulGPRJYYOevy5AKoW1rLJiqUtBwKi85JVu0kiZbrLL1mQU1TPHgnqTc1ReTeq-fEhpfMxlqYdoLNVUvEF554oopyc2bNE4tymZJXMzp5t_o0weCZTC0sEP_ol5IVpEKHq4S5XlZJTwjPBawONByBgZ4PSbSFaGBZfpkcQ2yYI4CuMiBplaTX18SNYHe8P1asuCUCWTKvr9LyQ_IH3KP2dPhsu3eWqlQhZ6t0AFiI5PUZai8i8XIqHehaMCv4Zje2Q_TJ4rA7z1B5byLVeq6ICLHFsRIwLrxOTaAWqDef6Hyd3yEt9aQbZ3WN9vA",
  "Nonce": "636675397041979540.OTQxZDAzMjMtNTMxZi00OTk5LWE0MWUtY2JjNDU2ZTg4NTE4NjMyZTJhNGEtMjI3Yy00MTJmLTgzYzYtMjkwOTgzYzU1NDU0",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675397041979540.OTQxZDAzMjMtNTMxZi00OTk5LWE0MWUtY2JjNDU2ZTg4NTE4NjMyZTJhNGEtMjI3Yy00MTJmLTgzYzYtMjkwOTgzYzU1NDU0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf7DP4VulGPRJYYOevy5AKoW1rLJiqUtBwKi85JVu0kiZbrLL1mQU1TPHgnqTc1ReTeq-fEhpfMxlqYdoLNVUvEF554oopyc2bNE4tymZJXMzp5t_o0weCZTC0sEP_ol5IVpEKHq4S5XlZJTwjPBawONByBgZ4PSbSFaGBZfpkcQ2yYI4CuMiBplaTX18SNYHe8P1asuCUCWTKvr9LyQ_IH3KP2dPhsu3eWqlQhZ6t0AFiI5PUZai8i8XIqHehaMCv4Zje2Q_TJ4rA7z1B5byLVeq6ICLHFsRIwLrxOTaAWqDef6Hyd3yEt9aQbZ3WN9vA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 13:41:44.219 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 13:41:44.220 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:41:44.221 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:41:44.221 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:41:44.221 -06:00 [DBG] No PKCE used.
2018-07-18 13:41:44.221 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:41:44.221 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:41:52.767 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 13:41:52.781 -06:00 [DBG] Augmenting SignInContext
2018-07-18 13:41:52.781 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 13:41:52.782 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 13:41:52.782 -06:00 [DBG] Adding auth_time claim with value: 1531942912
2018-07-18 13:41:52.782 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 13:41:52.782 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCON9TK4FL:00000003",
  "TimeStamp": "2018-07-18T19:41:52Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 13:41:52.784 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:41:52.784 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:41:52.784 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 13:41:52.784 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 13:41:52.784 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 13:41:52.784 -06:00 [DBG] Start authorize callback request
2018-07-18 13:41:52.784 -06:00 [DBG] User in authorize request: 124135d0-f696-44d3-a52f-f8f329ca140d
2018-07-18 13:41:52.784 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:41:52.784 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:41:52.784 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:41:52.784 -06:00 [DBG] No PKCE used.
2018-07-18 13:41:52.785 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:41:52.785 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf7DP4VulGPRJYYOevy5AKoW1rLJiqUtBwKi85JVu0kiZbrLL1mQU1TPHgnqTc1ReTeq-fEhpfMxlqYdoLNVUvEF554oopyc2bNE4tymZJXMzp5t_o0weCZTC0sEP_ol5IVpEKHq4S5XlZJTwjPBawONByBgZ4PSbSFaGBZfpkcQ2yYI4CuMiBplaTX18SNYHe8P1asuCUCWTKvr9LyQ_IH3KP2dPhsu3eWqlQhZ6t0AFiI5PUZai8i8XIqHehaMCv4Zje2Q_TJ4rA7z1B5byLVeq6ICLHFsRIwLrxOTaAWqDef6Hyd3yEt9aQbZ3WN9vA",
  "Nonce": "636675397041979540.OTQxZDAzMjMtNTMxZi00OTk5LWE0MWUtY2JjNDU2ZTg4NTE4NjMyZTJhNGEtMjI3Yy00MTJmLTgzYzYtMjkwOTgzYzU1NDU0",
  "SessionId": "6b08922093f9154c64da3b93f81c2bfb",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675397041979540.OTQxZDAzMjMtNTMxZi00OTk5LWE0MWUtY2JjNDU2ZTg4NTE4NjMyZTJhNGEtMjI3Yy00MTJmLTgzYzYtMjkwOTgzYzU1NDU0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf7DP4VulGPRJYYOevy5AKoW1rLJiqUtBwKi85JVu0kiZbrLL1mQU1TPHgnqTc1ReTeq-fEhpfMxlqYdoLNVUvEF554oopyc2bNE4tymZJXMzp5t_o0weCZTC0sEP_ol5IVpEKHq4S5XlZJTwjPBawONByBgZ4PSbSFaGBZfpkcQ2yYI4CuMiBplaTX18SNYHe8P1asuCUCWTKvr9LyQ_IH3KP2dPhsu3eWqlQhZ6t0AFiI5PUZai8i8XIqHehaMCv4Zje2Q_TJ4rA7z1B5byLVeq6ICLHFsRIwLrxOTaAWqDef6Hyd3yEt9aQbZ3WN9vA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 13:41:52.786 -06:00 [DBG] user_consent grant with value: ideaBox|124135d0-f696-44d3-a52f-f8f329ca140d not found in store.
2018-07-18 13:41:52.786 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 13:41:52.786 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 13:41:52.787 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:41:52.788 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:41:52.788 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:41:52.788 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:41:52.788 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:41:52.788 -06:00 [DBG] No PKCE used.
2018-07-18 13:41:52.788 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:41:52.788 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:41:55.544 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 13:41:55.545 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:41:55.545 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:41:55.545 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:41:55.545 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:41:55.545 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:41:55.545 -06:00 [DBG] No PKCE used.
2018-07-18 13:41:55.545 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:41:55.548 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:41:55.548 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:41:55.548 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 13:41:55.548 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 13:41:55.548 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 13:41:55.548 -06:00 [DBG] Start authorize callback request
2018-07-18 13:41:55.549 -06:00 [DBG] User in authorize request: 124135d0-f696-44d3-a52f-f8f329ca140d
2018-07-18 13:41:55.549 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:41:55.549 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:41:55.549 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 13:41:55.549 -06:00 [DBG] No PKCE used.
2018-07-18 13:41:55.549 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 13:41:55.549 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf7DP4VulGPRJYYOevy5AKoW1rLJiqUtBwKi85JVu0kiZbrLL1mQU1TPHgnqTc1ReTeq-fEhpfMxlqYdoLNVUvEF554oopyc2bNE4tymZJXMzp5t_o0weCZTC0sEP_ol5IVpEKHq4S5XlZJTwjPBawONByBgZ4PSbSFaGBZfpkcQ2yYI4CuMiBplaTX18SNYHe8P1asuCUCWTKvr9LyQ_IH3KP2dPhsu3eWqlQhZ6t0AFiI5PUZai8i8XIqHehaMCv4Zje2Q_TJ4rA7z1B5byLVeq6ICLHFsRIwLrxOTaAWqDef6Hyd3yEt9aQbZ3WN9vA",
  "Nonce": "636675397041979540.OTQxZDAzMjMtNTMxZi00OTk5LWE0MWUtY2JjNDU2ZTg4NTE4NjMyZTJhNGEtMjI3Yy00MTJmLTgzYzYtMjkwOTgzYzU1NDU0",
  "SessionId": "6b08922093f9154c64da3b93f81c2bfb",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675397041979540.OTQxZDAzMjMtNTMxZi00OTk5LWE0MWUtY2JjNDU2ZTg4NTE4NjMyZTJhNGEtMjI3Yy00MTJmLTgzYzYtMjkwOTgzYzU1NDU0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf7DP4VulGPRJYYOevy5AKoW1rLJiqUtBwKi85JVu0kiZbrLL1mQU1TPHgnqTc1ReTeq-fEhpfMxlqYdoLNVUvEF554oopyc2bNE4tymZJXMzp5t_o0weCZTC0sEP_ol5IVpEKHq4S5XlZJTwjPBawONByBgZ4PSbSFaGBZfpkcQ2yYI4CuMiBplaTX18SNYHe8P1asuCUCWTKvr9LyQ_IH3KP2dPhsu3eWqlQhZ6t0AFiI5PUZai8i8XIqHehaMCv4Zje2Q_TJ4rA7z1B5byLVeq6ICLHFsRIwLrxOTaAWqDef6Hyd3yEt9aQbZ3WN9vA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 13:41:55.550 -06:00 [DBG] user_consent grant with value: ideaBox|124135d0-f696-44d3-a52f-f8f329ca140d not found in store.
2018-07-18 13:41:55.550 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 13:41:55.550 -06:00 [INF] User consented to scopes: ["openid","profile","business"]
2018-07-18 13:41:55.550 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 124135d0-f696-44d3-a52f-f8f329ca140d
2018-07-18 13:41:55.550 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 13:41:55.555 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 13:41:55.555 -06:00 [DBG] Getting claims for identity token for subject: 124135d0-f696-44d3-a52f-f8f329ca140d and client: ideaBox
2018-07-18 13:41:55.555 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 13:41:55.566 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "Scopes": "openid profile business",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****V4OA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****21c7"
    }
  ],
  "ActivityId": "0HLFCON9TK4FL:00000007",
  "TimeStamp": "2018-07-18T19:41:55Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 13:41:55.566 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf7DP4VulGPRJYYOevy5AKoW1rLJiqUtBwKi85JVu0kiZbrLL1mQU1TPHgnqTc1ReTeq-fEhpfMxlqYdoLNVUvEF554oopyc2bNE4tymZJXMzp5t_o0weCZTC0sEP_ol5IVpEKHq4S5XlZJTwjPBawONByBgZ4PSbSFaGBZfpkcQ2yYI4CuMiBplaTX18SNYHe8P1asuCUCWTKvr9LyQ_IH3KP2dPhsu3eWqlQhZ6t0AFiI5PUZai8i8XIqHehaMCv4Zje2Q_TJ4rA7z1B5byLVeq6ICLHFsRIwLrxOTaAWqDef6Hyd3yEt9aQbZ3WN9vA",
  "Scope": "openid profile business"
}
2018-07-18 13:41:55.566 -06:00 [DBG] Augmenting SignInContext
2018-07-18 13:41:55.567 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 13:41:55.668 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 13:41:55.668 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 13:41:55.669 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 13:41:55.669 -06:00 [DBG] Start token request.
2018-07-18 13:41:55.669 -06:00 [DBG] Start client validation
2018-07-18 13:41:55.669 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 13:41:55.669 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 13:41:55.669 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 13:41:55.669 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 13:41:55.669 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:41:55.669 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 13:41:55.669 -06:00 [DBG] Client validation success
2018-07-18 13:41:55.669 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCON9TK4FK:00000003",
  "TimeStamp": "2018-07-18T19:41:55Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 13:41:55.669 -06:00 [DBG] Start token request validation
2018-07-18 13:41:55.669 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 13:41:55.677 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 13:41:55.677 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "0320374a3609dc4b8f276149d4dc6fdfbe20d30cace3d2bf3df4701eb11221c7",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "0320374a3609dc4b8f276149d4dc6fdfbe20d30cace3d2bf3df4701eb11221c7",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 13:41:55.677 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:41:55.677 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 13:41:55.677 -06:00 [DBG] Getting claims for access token for subject: 124135d0-f696-44d3-a52f-f8f329ca140d
2018-07-18 13:41:55.690 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:41:55.690 -06:00 [DBG] Getting claims for identity token for subject: 124135d0-f696-44d3-a52f-f8f329ca140d and client: ideaBox
2018-07-18 13:41:55.690 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 13:41:55.702 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****oFkw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****gDQA"
    }
  ],
  "ActivityId": "0HLFCON9TK4FK:00000003",
  "TimeStamp": "2018-07-18T19:41:55Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 13:41:55.702 -06:00 [DBG] Token request success.
2018-07-18 13:41:55.710 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 13:41:55.710 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 13:41:55.710 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 13:41:55.710 -06:00 [DBG] Start userinfo request
2018-07-18 13:41:55.710 -06:00 [DBG] Bearer token found in header
2018-07-18 13:41:55.713 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:41:55.713 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 13:41:55.714 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 13:41:55.714 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531942915,
    "exp": 1531946515,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "124135d0-f696-44d3-a52f-f8f329ca140d",
    "auth_time": 1531942912,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business"
    ],
    "amr": "pwd"
  }
}
2018-07-18 13:41:55.714 -06:00 [DBG] Creating userinfo response
2018-07-18 13:41:55.714 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 13:41:55.714 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 13:41:55.714 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number
2018-07-18 13:41:55.714 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 13:41:55.715 -06:00 [INF] Profile service returned to the following claim types: sub name given_name family_name website preferred_username
2018-07-18 13:41:55.715 -06:00 [DBG] End userinfo request
2018-07-18 13:49:41.369 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:49:41.369 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:49:43.801 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:49:43.801 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:49:43.801 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 13:49:43.801 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 13:49:43.801 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 13:49:43.801 -06:00 [DBG] Start discovery request
2018-07-18 13:50:08.247 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:50:08.247 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:50:08.247 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 13:50:08.247 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 13:50:08.247 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 13:50:08.247 -06:00 [DBG] Start userinfo request
2018-07-18 13:50:08.247 -06:00 [DBG] Bearer token not found
2018-07-18 13:50:08.248 -06:00 [ERR] No access token found.
2018-07-18 13:50:12.510 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:50:12.510 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:50:12.510 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 13:50:12.510 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 13:50:12.510 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 13:50:12.510 -06:00 [DBG] Start userinfo request
2018-07-18 13:50:12.510 -06:00 [DBG] Bearer token not found
2018-07-18 13:50:12.510 -06:00 [ERR] No access token found.
2018-07-18 13:50:39.971 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:50:39.971 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:50:39.971 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 13:50:39.971 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 13:50:39.971 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 13:50:39.971 -06:00 [DBG] Start authorize request
2018-07-18 13:50:39.971 -06:00 [DBG] User in authorize request: 124135d0-f696-44d3-a52f-f8f329ca140d
2018-07-18 13:50:39.971 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 13:50:39.972 -06:00 [ERR] client_id is missing or too long
{
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "RequestedScopes": "",
  "Raw": {}
}
2018-07-18 13:50:39.975 -06:00 [ERR] Request validation failed
2018-07-18 13:50:39.975 -06:00 [INF] {
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "RequestedScopes": "",
  "Raw": {}
}
2018-07-18 13:50:39.981 -06:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "Endpoint": "Authorize",
  "SubjectId": "124135d0-f696-44d3-a52f-f8f329ca140d",
  "Scopes": "",
  "Error": "invalid_request",
  "ErrorDescription": "Invalid client_id",
  "ActivityId": "0HLFCON9TK4FM:00000006",
  "TimeStamp": "2018-07-18T19:50:39Z",
  "ProcessId": 979,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 13:50:39.997 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 13:50:39.997 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:10:43.993 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-18 14:10:44.024 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-18 14:10:44.026 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-18 14:10:44.027 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-18 14:10:44.027 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-18 14:10:44.027 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-18 14:11:02.129 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-18 14:11:02.160 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-18 14:11:02.162 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-18 14:11:02.163 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-18 14:11:02.163 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-18 14:11:02.163 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-18 14:16:42.614 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-18 14:16:42.644 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-18 14:16:42.646 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-18 14:16:42.646 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-18 14:16:42.646 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-18 14:16:42.647 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-18 14:16:43.038 -06:00 [FTL] Unable to start Kestrel.
System.IO.IOException: Failed to bind to address http://127.0.0.1:5000: address already in use. ---> Microsoft.AspNetCore.Server.Kestrel.Transport.Abstractions.Internal.AddressInUseException: Error -48 EADDRINUSE address already in use ---> Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Networking.UvException: Error -48 EADDRINUSE address already in use
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Networking.LibuvFunctions.ThrowError(Int32 statusCode)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Networking.UvTcpHandle.GetSockIPEndPoint()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Listener.ListenTcp(Boolean useFileHandle)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Listener.<>c.<StartAsync>b__8_0(Listener listener)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.LibuvThread.DoPostWork()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.ListenerPrimary.StartAsync(String pipeName, Byte[] pipeMessage, IEndPointInformation endPointInformation, LibuvThread thread)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.LibuvTransport.BindAsync()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.LibuvTransport.BindAsync()
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.<>c__DisplayClass23_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindLocalhostAsync(ServerAddress address, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.DefaultAddressStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, List`1 listenOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2018-07-18 14:17:13.605 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-18 14:17:13.635 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-18 14:17:13.637 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-18 14:17:13.637 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-18 14:17:13.638 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-18 14:17:13.638 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-18 14:17:39.950 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-18 14:17:39.981 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-18 14:17:39.984 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-18 14:17:39.984 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-18 14:17:39.984 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-18 14:17:39.984 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-18 14:17:40.354 -06:00 [FTL] Unable to start Kestrel.
System.IO.IOException: Failed to bind to address http://127.0.0.1:5000: address already in use. ---> Microsoft.AspNetCore.Server.Kestrel.Transport.Abstractions.Internal.AddressInUseException: Error -48 EADDRINUSE address already in use ---> Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Networking.UvException: Error -48 EADDRINUSE address already in use
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Networking.LibuvFunctions.ThrowError(Int32 statusCode)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Networking.UvTcpHandle.GetSockIPEndPoint()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Listener.ListenTcp(Boolean useFileHandle)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Listener.<>c.<StartAsync>b__8_0(Listener listener)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.LibuvThread.DoPostWork()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.ListenerPrimary.StartAsync(String pipeName, Byte[] pipeMessage, IEndPointInformation endPointInformation, LibuvThread thread)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.LibuvTransport.BindAsync()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.LibuvTransport.BindAsync()
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.<>c__DisplayClass23_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindLocalhostAsync(ServerAddress address, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.DefaultAddressStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, List`1 listenOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2018-07-18 14:18:10.534 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-18 14:18:10.563 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-18 14:18:10.565 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-18 14:18:10.566 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-18 14:18:10.566 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-18 14:18:10.566 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-18 14:18:10.996 -06:00 [FTL] Unable to start Kestrel.
System.IO.IOException: Failed to bind to address http://127.0.0.1:5000: address already in use. ---> Microsoft.AspNetCore.Server.Kestrel.Transport.Abstractions.Internal.AddressInUseException: Error -48 EADDRINUSE address already in use ---> Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Networking.UvException: Error -48 EADDRINUSE address already in use
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Networking.LibuvFunctions.ThrowError(Int32 statusCode)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Networking.UvTcpHandle.GetSockIPEndPoint()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Listener.ListenTcp(Boolean useFileHandle)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Listener.<>c.<StartAsync>b__8_0(Listener listener)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.LibuvThread.DoPostWork()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.ListenerPrimary.StartAsync(String pipeName, Byte[] pipeMessage, IEndPointInformation endPointInformation, LibuvThread thread)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.LibuvTransport.BindAsync()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.LibuvTransport.BindAsync()
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.<>c__DisplayClass23_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindLocalhostAsync(ServerAddress address, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.DefaultAddressStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, List`1 listenOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2018-07-18 14:19:34.809 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-18 14:19:34.838 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-18 14:19:34.841 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-18 14:19:34.841 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-18 14:19:34.841 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-18 14:19:34.841 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-18 14:20:17.239 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 14:20:17.353 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 14:20:17.353 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 14:20:17.356 -06:00 [DBG] Start discovery request
2018-07-18 14:20:17.565 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 14:20:17.566 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 14:20:17.566 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 14:20:17.569 -06:00 [DBG] Start key discovery request
2018-07-18 14:20:17.668 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 14:20:17.671 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 14:20:17.671 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 14:20:17.674 -06:00 [DBG] Start authorize request
2018-07-18 14:20:17.689 -06:00 [DBG] No user present in authorize request
2018-07-18 14:20:17.692 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:20:17.702 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:20:17.706 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:20:17.707 -06:00 [DBG] No PKCE used.
2018-07-18 14:20:17.731 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:20:17.740 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHes10tIB9XLOU3WxMaLxWd2H4N105QTsiOqlskKd8arcue62UAyTAETlsnvsNnj9DlQ6hwuy3R05O3yG_dZHFFEIRY4ociwzw_QcmAIuzoPvPj-j66NK6EHg5ZjtGpIIeJ9PuOoYAXNDzk2_x3baHIXmFuNiOSOxsvgFLlVvxKhr0-XCl9pnc1ZFkhflF3u2ywkKy53vu8-byzPf2A06ipk3IYn-A3BRpKpS6x3wA2uavIlUrcR9Q9aOZ4k-hUwW1MYIbtN5ofSBVTQVdf7qxBLoflr_w4LFYNtQPEnJv6Y9hPp9CJgBH8NCeDmd3ALNwA",
  "Nonce": "636675420176414290.NTU0YzI5YzAtZTk5Ni00YWNlLTlmNzYtNmFkM2ZhZDU3ZGUwN2YyNTU4YTItNzE1MS00OTZhLWI2MGItNWE2ZTgyZTE4ZTA0",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675420176414290.NTU0YzI5YzAtZTk5Ni00YWNlLTlmNzYtNmFkM2ZhZDU3ZGUwN2YyNTU4YTItNzE1MS00OTZhLWI2MGItNWE2ZTgyZTE4ZTA0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHes10tIB9XLOU3WxMaLxWd2H4N105QTsiOqlskKd8arcue62UAyTAETlsnvsNnj9DlQ6hwuy3R05O3yG_dZHFFEIRY4ociwzw_QcmAIuzoPvPj-j66NK6EHg5ZjtGpIIeJ9PuOoYAXNDzk2_x3baHIXmFuNiOSOxsvgFLlVvxKhr0-XCl9pnc1ZFkhflF3u2ywkKy53vu8-byzPf2A06ipk3IYn-A3BRpKpS6x3wA2uavIlUrcR9Q9aOZ4k-hUwW1MYIbtN5ofSBVTQVdf7qxBLoflr_w4LFYNtQPEnJv6Y9hPp9CJgBH8NCeDmd3ALNwA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:20:17.746 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 14:20:18.034 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:20:18.035 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:20:18.035 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:20:18.035 -06:00 [DBG] No PKCE used.
2018-07-18 14:20:18.035 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:20:18.037 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:20:30.032 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 14:20:31.215 -06:00 [DBG] Augmenting SignInContext
2018-07-18 14:20:31.217 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 14:20:31.217 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 14:20:31.217 -06:00 [DBG] Adding auth_time claim with value: 1531945231
2018-07-18 14:20:31.247 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 14:20:31.277 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCTFG7M6R0:00000003",
  "TimeStamp": "2018-07-18T20:20:31Z",
  "ProcessId": 3024,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:20:31.297 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:20:31.298 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:20:31.298 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 14:20:31.298 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 14:20:31.298 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 14:20:31.303 -06:00 [DBG] Start authorize callback request
2018-07-18 14:20:31.306 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:20:31.306 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:20:31.306 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:20:31.306 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:20:31.306 -06:00 [DBG] No PKCE used.
2018-07-18 14:20:31.306 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:20:31.306 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHes10tIB9XLOU3WxMaLxWd2H4N105QTsiOqlskKd8arcue62UAyTAETlsnvsNnj9DlQ6hwuy3R05O3yG_dZHFFEIRY4ociwzw_QcmAIuzoPvPj-j66NK6EHg5ZjtGpIIeJ9PuOoYAXNDzk2_x3baHIXmFuNiOSOxsvgFLlVvxKhr0-XCl9pnc1ZFkhflF3u2ywkKy53vu8-byzPf2A06ipk3IYn-A3BRpKpS6x3wA2uavIlUrcR9Q9aOZ4k-hUwW1MYIbtN5ofSBVTQVdf7qxBLoflr_w4LFYNtQPEnJv6Y9hPp9CJgBH8NCeDmd3ALNwA",
  "Nonce": "636675420176414290.NTU0YzI5YzAtZTk5Ni00YWNlLTlmNzYtNmFkM2ZhZDU3ZGUwN2YyNTU4YTItNzE1MS00OTZhLWI2MGItNWE2ZTgyZTE4ZTA0",
  "SessionId": "0673ad1ee53dacd4b34a4376886ab038",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675420176414290.NTU0YzI5YzAtZTk5Ni00YWNlLTlmNzYtNmFkM2ZhZDU3ZGUwN2YyNTU4YTItNzE1MS00OTZhLWI2MGItNWE2ZTgyZTE4ZTA0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHes10tIB9XLOU3WxMaLxWd2H4N105QTsiOqlskKd8arcue62UAyTAETlsnvsNnj9DlQ6hwuy3R05O3yG_dZHFFEIRY4ociwzw_QcmAIuzoPvPj-j66NK6EHg5ZjtGpIIeJ9PuOoYAXNDzk2_x3baHIXmFuNiOSOxsvgFLlVvxKhr0-XCl9pnc1ZFkhflF3u2ywkKy53vu8-byzPf2A06ipk3IYn-A3BRpKpS6x3wA2uavIlUrcR9Q9aOZ4k-hUwW1MYIbtN5ofSBVTQVdf7qxBLoflr_w4LFYNtQPEnJv6Y9hPp9CJgBH8NCeDmd3ALNwA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:20:31.346 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 14:20:31.346 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 14:20:31.346 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 14:20:31.349 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:20:31.349 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:20:31.377 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:20:31.377 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:20:31.378 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:20:31.378 -06:00 [DBG] No PKCE used.
2018-07-18 14:20:31.378 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:20:31.378 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:20:33.580 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 14:20:33.580 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:20:33.580 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:20:33.604 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:20:33.604 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:20:33.604 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:20:33.604 -06:00 [DBG] No PKCE used.
2018-07-18 14:20:33.604 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:20:33.623 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:20:33.623 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:20:33.623 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 14:20:33.623 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 14:20:33.623 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 14:20:33.623 -06:00 [DBG] Start authorize callback request
2018-07-18 14:20:33.651 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:20:33.651 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:20:33.651 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:20:33.651 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:20:33.651 -06:00 [DBG] No PKCE used.
2018-07-18 14:20:33.651 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:20:33.652 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHes10tIB9XLOU3WxMaLxWd2H4N105QTsiOqlskKd8arcue62UAyTAETlsnvsNnj9DlQ6hwuy3R05O3yG_dZHFFEIRY4ociwzw_QcmAIuzoPvPj-j66NK6EHg5ZjtGpIIeJ9PuOoYAXNDzk2_x3baHIXmFuNiOSOxsvgFLlVvxKhr0-XCl9pnc1ZFkhflF3u2ywkKy53vu8-byzPf2A06ipk3IYn-A3BRpKpS6x3wA2uavIlUrcR9Q9aOZ4k-hUwW1MYIbtN5ofSBVTQVdf7qxBLoflr_w4LFYNtQPEnJv6Y9hPp9CJgBH8NCeDmd3ALNwA",
  "Nonce": "636675420176414290.NTU0YzI5YzAtZTk5Ni00YWNlLTlmNzYtNmFkM2ZhZDU3ZGUwN2YyNTU4YTItNzE1MS00OTZhLWI2MGItNWE2ZTgyZTE4ZTA0",
  "SessionId": "0673ad1ee53dacd4b34a4376886ab038",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675420176414290.NTU0YzI5YzAtZTk5Ni00YWNlLTlmNzYtNmFkM2ZhZDU3ZGUwN2YyNTU4YTItNzE1MS00OTZhLWI2MGItNWE2ZTgyZTE4ZTA0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHes10tIB9XLOU3WxMaLxWd2H4N105QTsiOqlskKd8arcue62UAyTAETlsnvsNnj9DlQ6hwuy3R05O3yG_dZHFFEIRY4ociwzw_QcmAIuzoPvPj-j66NK6EHg5ZjtGpIIeJ9PuOoYAXNDzk2_x3baHIXmFuNiOSOxsvgFLlVvxKhr0-XCl9pnc1ZFkhflF3u2ywkKy53vu8-byzPf2A06ipk3IYn-A3BRpKpS6x3wA2uavIlUrcR9Q9aOZ4k-hUwW1MYIbtN5ofSBVTQVdf7qxBLoflr_w4LFYNtQPEnJv6Y9hPp9CJgBH8NCeDmd3ALNwA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:20:33.653 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 14:20:33.653 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 14:20:33.659 -06:00 [INF] User consented to scopes: ["openid","profile","business"]
2018-07-18 14:20:33.671 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:20:33.678 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 14:20:33.700 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 14:20:33.709 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 14:20:33.710 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 14:20:33.779 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****PlFg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****971e"
    }
  ],
  "ActivityId": "0HLFCTFG7M6R0:00000007",
  "TimeStamp": "2018-07-18T20:20:33Z",
  "ProcessId": 3024,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:20:33.782 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHes10tIB9XLOU3WxMaLxWd2H4N105QTsiOqlskKd8arcue62UAyTAETlsnvsNnj9DlQ6hwuy3R05O3yG_dZHFFEIRY4ociwzw_QcmAIuzoPvPj-j66NK6EHg5ZjtGpIIeJ9PuOoYAXNDzk2_x3baHIXmFuNiOSOxsvgFLlVvxKhr0-XCl9pnc1ZFkhflF3u2ywkKy53vu8-byzPf2A06ipk3IYn-A3BRpKpS6x3wA2uavIlUrcR9Q9aOZ4k-hUwW1MYIbtN5ofSBVTQVdf7qxBLoflr_w4LFYNtQPEnJv6Y9hPp9CJgBH8NCeDmd3ALNwA",
  "Scope": "openid profile business"
}
2018-07-18 14:20:33.797 -06:00 [DBG] Augmenting SignInContext
2018-07-18 14:20:33.797 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 14:20:33.915 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 14:20:33.917 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 14:20:33.917 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 14:20:33.923 -06:00 [DBG] Start token request.
2018-07-18 14:20:33.928 -06:00 [DBG] Start client validation
2018-07-18 14:20:33.932 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 14:20:33.935 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 14:20:33.935 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 14:20:33.936 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 14:20:33.936 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:20:33.942 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 14:20:33.942 -06:00 [DBG] Client validation success
2018-07-18 14:20:33.945 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCTFG7M6QV:00000003",
  "TimeStamp": "2018-07-18T20:20:33Z",
  "ProcessId": 3024,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:20:33.950 -06:00 [DBG] Start token request validation
2018-07-18 14:20:33.959 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 14:20:33.979 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 14:20:33.982 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "b546793093878236f19b6f69aa88e03568d9ebcc454cab8d73d0a4aaf9cb971e",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "b546793093878236f19b6f69aa88e03568d9ebcc454cab8d73d0a4aaf9cb971e",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 14:20:33.992 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:20:34.001 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 14:20:34.001 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:20:34.021 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:20:34.021 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 14:20:34.021 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 14:20:34.034 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****6CoQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****lI2A"
    }
  ],
  "ActivityId": "0HLFCTFG7M6QV:00000003",
  "TimeStamp": "2018-07-18T20:20:34Z",
  "ProcessId": 3024,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:20:34.035 -06:00 [DBG] Token request success.
2018-07-18 14:20:34.046 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 14:20:34.046 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 14:20:34.046 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 14:20:34.052 -06:00 [DBG] Start userinfo request
2018-07-18 14:20:34.054 -06:00 [DBG] Bearer token found in header
2018-07-18 14:20:34.114 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:20:34.116 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:20:34.118 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 14:20:34.120 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531945234,
    "exp": 1531948834,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1531945231,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business"
    ],
    "amr": "pwd"
  }
}
2018-07-18 14:20:34.125 -06:00 [DBG] Creating userinfo response
2018-07-18 14:20:34.128 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 14:20:34.130 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 14:20:34.132 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number
2018-07-18 14:20:34.132 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 14:20:34.137 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name website preferred_username
2018-07-18 14:20:34.137 -06:00 [DBG] End userinfo request
2018-07-18 14:21:29.174 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:21:29.174 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:21:31.226 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:21:31.226 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:21:31.226 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 14:21:31.226 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 14:21:31.226 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 14:21:31.227 -06:00 [DBG] Start discovery request
2018-07-18 14:29:08.757 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-18 14:29:08.787 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-18 14:29:08.789 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-18 14:29:08.790 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-18 14:29:08.790 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-18 14:29:08.790 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-18 14:29:34.735 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 14:29:34.850 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 14:29:34.851 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 14:29:34.853 -06:00 [DBG] Start discovery request
2018-07-18 14:29:35.067 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 14:29:35.067 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 14:29:35.067 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 14:29:35.071 -06:00 [DBG] Start key discovery request
2018-07-18 14:29:35.170 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 14:29:35.173 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 14:29:35.173 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 14:29:35.176 -06:00 [DBG] Start authorize request
2018-07-18 14:29:35.191 -06:00 [DBG] No user present in authorize request
2018-07-18 14:29:35.195 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:29:35.204 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:29:35.209 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:29:35.210 -06:00 [DBG] No PKCE used.
2018-07-18 14:29:35.234 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:29:35.245 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeuI6knOb-6wVjSr8rI9vig2rPPcp8Iz5gxoQxIa0M623BOgGJIorBLsEZGWzqNI6SaMa9VscZFsljqMO4k8ra0g_RmEMhEmISVwfLrfkF0-GFgsKQx9NFzV9PPLPSEHvDbkuezndcspe0I_skUy_xhkfRODP8cT2zUyRtmO_U0_CjQ2hgCctVNLY5VjkuRaTJRXzFARclKYHdhaJCcuOhuZTzQPUBrmaeLk2yTG5488SwSYwFyN9xRfB8X1Lum_mr9QrsxuPUKM5L3VL5x15VVI9i9ZlKs3L9b8c9G7vOud5_9CnkIKqvIAhxx1BwdRgA",
  "Nonce": "636675425751434640.NGRhNDgwZGEtOWY4YS00Mjk0LTlkMjQtMWNiYzJhYzBlNjQ1OTJhNTdiNzItNjRkMC00NjhmLWIzYjMtMDVkZGZiYzU0NGU3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675425751434640.NGRhNDgwZGEtOWY4YS00Mjk0LTlkMjQtMWNiYzJhYzBlNjQ1OTJhNTdiNzItNjRkMC00NjhmLWIzYjMtMDVkZGZiYzU0NGU3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeuI6knOb-6wVjSr8rI9vig2rPPcp8Iz5gxoQxIa0M623BOgGJIorBLsEZGWzqNI6SaMa9VscZFsljqMO4k8ra0g_RmEMhEmISVwfLrfkF0-GFgsKQx9NFzV9PPLPSEHvDbkuezndcspe0I_skUy_xhkfRODP8cT2zUyRtmO_U0_CjQ2hgCctVNLY5VjkuRaTJRXzFARclKYHdhaJCcuOhuZTzQPUBrmaeLk2yTG5488SwSYwFyN9xRfB8X1Lum_mr9QrsxuPUKM5L3VL5x15VVI9i9ZlKs3L9b8c9G7vOud5_9CnkIKqvIAhxx1BwdRgA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:29:35.250 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 14:29:35.558 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:29:35.558 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:29:35.558 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:29:35.559 -06:00 [DBG] No PKCE used.
2018-07-18 14:29:35.559 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:29:35.561 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:29:39.335 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 14:29:39.336 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 14:29:39.336 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 14:29:39.336 -06:00 [DBG] Start authorize request
2018-07-18 14:29:39.336 -06:00 [DBG] No user present in authorize request
2018-07-18 14:29:39.336 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:29:39.336 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:29:39.336 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:29:39.336 -06:00 [DBG] No PKCE used.
2018-07-18 14:29:39.336 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:29:39.336 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdXExIf027tptOr5sk_yc3qe-ioiyrQwZlkT4qcOhvCJaSkbKXwLXVFmosbHcitvF4P7dsKYIYP3ZH9ugEKRHoKgvVqS9814v8cditUSpF_rHvdyffGE8zXYbsjzuUYHn5Tc_t6FcjTYRvWjUXvM6Nkz6glW6T9ikrLazjp2C84SmGMUrXabxHHXK_sDTXmiLkJMFaiamt41GWeyIVnKv0chimZjCd9JOt_Zs4CKTuAJu9c5kZIvw8Ah2mjoSr8lUosT9X3fWBmxjSFPeSkPBMmZLV6kpGfC2B15ciDOV9-iAPYcYsH16ou7y-JzAZm2f4",
  "Nonce": "636675425793253390.OGExZjkxNjQtNWE4NS00OTQyLWFjNzYtN2ExZWU4YzY5ZGUzOTlkYTkxNTktYTNlNi00YmI3LTliN2ItY2I5MDRhNGE5YjRj",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675425793253390.OGExZjkxNjQtNWE4NS00OTQyLWFjNzYtN2ExZWU4YzY5ZGUzOTlkYTkxNTktYTNlNi00YmI3LTliN2ItY2I5MDRhNGE5YjRj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdXExIf027tptOr5sk_yc3qe-ioiyrQwZlkT4qcOhvCJaSkbKXwLXVFmosbHcitvF4P7dsKYIYP3ZH9ugEKRHoKgvVqS9814v8cditUSpF_rHvdyffGE8zXYbsjzuUYHn5Tc_t6FcjTYRvWjUXvM6Nkz6glW6T9ikrLazjp2C84SmGMUrXabxHHXK_sDTXmiLkJMFaiamt41GWeyIVnKv0chimZjCd9JOt_Zs4CKTuAJu9c5kZIvw8Ah2mjoSr8lUosT9X3fWBmxjSFPeSkPBMmZLV6kpGfC2B15ciDOV9-iAPYcYsH16ou7y-JzAZm2f4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:29:39.336 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 14:29:39.343 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:29:39.344 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:29:39.344 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:29:39.344 -06:00 [DBG] No PKCE used.
2018-07-18 14:29:39.344 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:29:39.344 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:29:47.264 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 14:29:48.481 -06:00 [DBG] Augmenting SignInContext
2018-07-18 14:29:48.483 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 14:29:48.483 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 14:29:48.483 -06:00 [DBG] Adding auth_time claim with value: 1531945788
2018-07-18 14:29:48.512 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 14:29:48.541 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCTKMCB5LD:00000003",
  "TimeStamp": "2018-07-18T20:29:48Z",
  "ProcessId": 3164,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:29:48.561 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:29:48.562 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:29:48.562 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 14:29:48.562 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 14:29:48.562 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 14:29:48.567 -06:00 [DBG] Start authorize callback request
2018-07-18 14:29:48.569 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:29:48.569 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:29:48.569 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:29:48.569 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:29:48.569 -06:00 [DBG] No PKCE used.
2018-07-18 14:29:48.570 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:29:48.570 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdXExIf027tptOr5sk_yc3qe-ioiyrQwZlkT4qcOhvCJaSkbKXwLXVFmosbHcitvF4P7dsKYIYP3ZH9ugEKRHoKgvVqS9814v8cditUSpF_rHvdyffGE8zXYbsjzuUYHn5Tc_t6FcjTYRvWjUXvM6Nkz6glW6T9ikrLazjp2C84SmGMUrXabxHHXK_sDTXmiLkJMFaiamt41GWeyIVnKv0chimZjCd9JOt_Zs4CKTuAJu9c5kZIvw8Ah2mjoSr8lUosT9X3fWBmxjSFPeSkPBMmZLV6kpGfC2B15ciDOV9-iAPYcYsH16ou7y-JzAZm2f4",
  "Nonce": "636675425793253390.OGExZjkxNjQtNWE4NS00OTQyLWFjNzYtN2ExZWU4YzY5ZGUzOTlkYTkxNTktYTNlNi00YmI3LTliN2ItY2I5MDRhNGE5YjRj",
  "SessionId": "28202bb89d07be209ad3241fb138a352",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675425793253390.OGExZjkxNjQtNWE4NS00OTQyLWFjNzYtN2ExZWU4YzY5ZGUzOTlkYTkxNTktYTNlNi00YmI3LTliN2ItY2I5MDRhNGE5YjRj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdXExIf027tptOr5sk_yc3qe-ioiyrQwZlkT4qcOhvCJaSkbKXwLXVFmosbHcitvF4P7dsKYIYP3ZH9ugEKRHoKgvVqS9814v8cditUSpF_rHvdyffGE8zXYbsjzuUYHn5Tc_t6FcjTYRvWjUXvM6Nkz6glW6T9ikrLazjp2C84SmGMUrXabxHHXK_sDTXmiLkJMFaiamt41GWeyIVnKv0chimZjCd9JOt_Zs4CKTuAJu9c5kZIvw8Ah2mjoSr8lUosT9X3fWBmxjSFPeSkPBMmZLV6kpGfC2B15ciDOV9-iAPYcYsH16ou7y-JzAZm2f4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:29:48.609 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 14:29:48.609 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 14:29:48.609 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 14:29:48.612 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:29:48.612 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:29:48.640 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:29:48.640 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:29:48.640 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:29:48.640 -06:00 [DBG] No PKCE used.
2018-07-18 14:29:48.641 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:29:48.641 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:29:58.440 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 14:29:58.440 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:29:58.441 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:29:58.463 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:29:58.463 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:29:58.463 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:29:58.463 -06:00 [DBG] No PKCE used.
2018-07-18 14:29:58.463 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:29:58.478 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:29:58.478 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:29:58.478 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 14:29:58.478 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 14:29:58.479 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 14:29:58.479 -06:00 [DBG] Start authorize callback request
2018-07-18 14:29:58.506 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:29:58.506 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:29:58.506 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:29:58.506 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:29:58.506 -06:00 [DBG] No PKCE used.
2018-07-18 14:29:58.507 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:29:58.507 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdXExIf027tptOr5sk_yc3qe-ioiyrQwZlkT4qcOhvCJaSkbKXwLXVFmosbHcitvF4P7dsKYIYP3ZH9ugEKRHoKgvVqS9814v8cditUSpF_rHvdyffGE8zXYbsjzuUYHn5Tc_t6FcjTYRvWjUXvM6Nkz6glW6T9ikrLazjp2C84SmGMUrXabxHHXK_sDTXmiLkJMFaiamt41GWeyIVnKv0chimZjCd9JOt_Zs4CKTuAJu9c5kZIvw8Ah2mjoSr8lUosT9X3fWBmxjSFPeSkPBMmZLV6kpGfC2B15ciDOV9-iAPYcYsH16ou7y-JzAZm2f4",
  "Nonce": "636675425793253390.OGExZjkxNjQtNWE4NS00OTQyLWFjNzYtN2ExZWU4YzY5ZGUzOTlkYTkxNTktYTNlNi00YmI3LTliN2ItY2I5MDRhNGE5YjRj",
  "SessionId": "28202bb89d07be209ad3241fb138a352",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675425793253390.OGExZjkxNjQtNWE4NS00OTQyLWFjNzYtN2ExZWU4YzY5ZGUzOTlkYTkxNTktYTNlNi00YmI3LTliN2ItY2I5MDRhNGE5YjRj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdXExIf027tptOr5sk_yc3qe-ioiyrQwZlkT4qcOhvCJaSkbKXwLXVFmosbHcitvF4P7dsKYIYP3ZH9ugEKRHoKgvVqS9814v8cditUSpF_rHvdyffGE8zXYbsjzuUYHn5Tc_t6FcjTYRvWjUXvM6Nkz6glW6T9ikrLazjp2C84SmGMUrXabxHHXK_sDTXmiLkJMFaiamt41GWeyIVnKv0chimZjCd9JOt_Zs4CKTuAJu9c5kZIvw8Ah2mjoSr8lUosT9X3fWBmxjSFPeSkPBMmZLV6kpGfC2B15ciDOV9-iAPYcYsH16ou7y-JzAZm2f4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:29:58.508 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 14:29:58.508 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 14:29:58.514 -06:00 [INF] User consented to scopes: ["openid","profile","business"]
2018-07-18 14:29:58.527 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:29:58.534 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 14:29:58.554 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 14:29:58.564 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 14:29:58.565 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 14:29:58.634 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****I36w"
    },
    {
      "TokenType": "code",
      "TokenValue": "****4d2b"
    }
  ],
  "ActivityId": "0HLFCTKMCB5LD:00000007",
  "TimeStamp": "2018-07-18T20:29:58Z",
  "ProcessId": 3164,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:29:58.636 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdXExIf027tptOr5sk_yc3qe-ioiyrQwZlkT4qcOhvCJaSkbKXwLXVFmosbHcitvF4P7dsKYIYP3ZH9ugEKRHoKgvVqS9814v8cditUSpF_rHvdyffGE8zXYbsjzuUYHn5Tc_t6FcjTYRvWjUXvM6Nkz6glW6T9ikrLazjp2C84SmGMUrXabxHHXK_sDTXmiLkJMFaiamt41GWeyIVnKv0chimZjCd9JOt_Zs4CKTuAJu9c5kZIvw8Ah2mjoSr8lUosT9X3fWBmxjSFPeSkPBMmZLV6kpGfC2B15ciDOV9-iAPYcYsH16ou7y-JzAZm2f4",
  "Scope": "openid profile business"
}
2018-07-18 14:29:58.651 -06:00 [DBG] Augmenting SignInContext
2018-07-18 14:29:58.651 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 14:29:58.866 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 14:29:58.868 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 14:29:58.868 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 14:29:58.874 -06:00 [DBG] Start token request.
2018-07-18 14:29:58.879 -06:00 [DBG] Start client validation
2018-07-18 14:29:58.883 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 14:29:58.886 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 14:29:58.886 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 14:29:58.886 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 14:29:58.886 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:29:58.894 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 14:29:58.894 -06:00 [DBG] Client validation success
2018-07-18 14:29:58.896 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCTKMCB5LB:00000003",
  "TimeStamp": "2018-07-18T20:29:58Z",
  "ProcessId": 3164,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:29:58.901 -06:00 [DBG] Start token request validation
2018-07-18 14:29:58.910 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 14:29:58.929 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 14:29:58.932 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "3d8c97e4210559b3b1c54a5893175f6cc40c65eecfc2d51d7fdc199dd9684d2b",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "3d8c97e4210559b3b1c54a5893175f6cc40c65eecfc2d51d7fdc199dd9684d2b",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 14:29:58.943 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:29:58.951 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 14:29:58.952 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:29:58.970 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:29:58.973 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 14:29:58.973 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 14:29:58.986 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Cm6A"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****PXVw"
    }
  ],
  "ActivityId": "0HLFCTKMCB5LB:00000003",
  "TimeStamp": "2018-07-18T20:29:58Z",
  "ProcessId": 3164,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:29:58.987 -06:00 [DBG] Token request success.
2018-07-18 14:29:58.997 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 14:29:58.998 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 14:29:58.998 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 14:29:59.004 -06:00 [DBG] Start userinfo request
2018-07-18 14:29:59.006 -06:00 [DBG] Bearer token found in header
2018-07-18 14:29:59.065 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:29:59.068 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:29:59.069 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 14:29:59.072 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531945798,
    "exp": 1531949398,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1531945788,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business"
    ],
    "amr": "pwd"
  }
}
2018-07-18 14:29:59.077 -06:00 [DBG] Creating userinfo response
2018-07-18 14:29:59.080 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 14:29:59.082 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 14:29:59.084 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number
2018-07-18 14:29:59.084 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 14:29:59.085 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name website preferred_username
2018-07-18 14:29:59.086 -06:00 [DBG] End userinfo request
2018-07-18 14:37:21.303 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-18 14:37:21.333 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-18 14:37:21.336 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-18 14:37:21.336 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-18 14:37:21.336 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-18 14:37:21.336 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-18 14:37:35.650 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 14:37:35.772 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 14:37:35.773 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 14:37:35.776 -06:00 [DBG] Start authorize request
2018-07-18 14:37:35.792 -06:00 [DBG] No user present in authorize request
2018-07-18 14:37:35.796 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:37:35.806 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:37:35.812 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:37:35.813 -06:00 [DBG] No PKCE used.
2018-07-18 14:37:35.844 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:37:35.902 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHds7FnRE9_7jg7py3hFGQXVrq7WVAPn3IlbA1WFfRUxd8ycTj49npXXDceb3-wGh_ThIzqHD-QSRcWWvxi630YDN2LJ_JUvDR-7vN4HI-vGCfZ9MqDyPV7z2EVHxK82wbYs8l6Ad_CYLtuZK_oQJDwSIWxhsI4Qb-ViSUOZGfdAgFcv382B7px5FIN-QP_WNR46Gz64jZ4snz3XAH-LorzYBdSZXeEZbRAXIAsXHVa9aRdbKoDlvQk0tSBgPFV9BoVd5v5QdgSpL4Qc0xBjcvG0Q5XkAZfyCuENLOa4Hy4CfbwqhA4ps3uioBwtFCOSFdE",
  "Nonce": "636675430554133540.Y2UzOTZiNTAtMzQ4YS00MmRlLWJhMWItMjBkMzYwMjdjZDQyNTU5M2ZiM2EtMmE2My00MGQ0LTliOGYtZWVlMGNjM2UxMDA5",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675430554133540.Y2UzOTZiNTAtMzQ4YS00MmRlLWJhMWItMjBkMzYwMjdjZDQyNTU5M2ZiM2EtMmE2My00MGQ0LTliOGYtZWVlMGNjM2UxMDA5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHds7FnRE9_7jg7py3hFGQXVrq7WVAPn3IlbA1WFfRUxd8ycTj49npXXDceb3-wGh_ThIzqHD-QSRcWWvxi630YDN2LJ_JUvDR-7vN4HI-vGCfZ9MqDyPV7z2EVHxK82wbYs8l6Ad_CYLtuZK_oQJDwSIWxhsI4Qb-ViSUOZGfdAgFcv382B7px5FIN-QP_WNR46Gz64jZ4snz3XAH-LorzYBdSZXeEZbRAXIAsXHVa9aRdbKoDlvQk0tSBgPFV9BoVd5v5QdgSpL4Qc0xBjcvG0Q5XkAZfyCuENLOa4Hy4CfbwqhA4ps3uioBwtFCOSFdE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:37:35.910 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 14:37:36.256 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:37:36.257 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:37:36.257 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:37:36.257 -06:00 [DBG] No PKCE used.
2018-07-18 14:37:36.258 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:37:36.260 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:37:47.514 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 14:37:48.754 -06:00 [DBG] Augmenting SignInContext
2018-07-18 14:37:48.755 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 14:37:48.755 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 14:37:48.755 -06:00 [DBG] Adding auth_time claim with value: 1531946268
2018-07-18 14:37:48.785 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 14:37:48.813 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCTP5MI7F3:00000003",
  "TimeStamp": "2018-07-18T20:37:48Z",
  "ProcessId": 3267,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:37:48.834 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:37:48.835 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:37:48.835 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 14:37:48.835 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 14:37:48.835 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 14:37:48.840 -06:00 [DBG] Start authorize callback request
2018-07-18 14:37:48.843 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:37:48.843 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:37:48.843 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:37:48.843 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:37:48.843 -06:00 [DBG] No PKCE used.
2018-07-18 14:37:48.843 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:37:48.843 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHds7FnRE9_7jg7py3hFGQXVrq7WVAPn3IlbA1WFfRUxd8ycTj49npXXDceb3-wGh_ThIzqHD-QSRcWWvxi630YDN2LJ_JUvDR-7vN4HI-vGCfZ9MqDyPV7z2EVHxK82wbYs8l6Ad_CYLtuZK_oQJDwSIWxhsI4Qb-ViSUOZGfdAgFcv382B7px5FIN-QP_WNR46Gz64jZ4snz3XAH-LorzYBdSZXeEZbRAXIAsXHVa9aRdbKoDlvQk0tSBgPFV9BoVd5v5QdgSpL4Qc0xBjcvG0Q5XkAZfyCuENLOa4Hy4CfbwqhA4ps3uioBwtFCOSFdE",
  "Nonce": "636675430554133540.Y2UzOTZiNTAtMzQ4YS00MmRlLWJhMWItMjBkMzYwMjdjZDQyNTU5M2ZiM2EtMmE2My00MGQ0LTliOGYtZWVlMGNjM2UxMDA5",
  "SessionId": "1c60180395a8694271089072577a539f",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675430554133540.Y2UzOTZiNTAtMzQ4YS00MmRlLWJhMWItMjBkMzYwMjdjZDQyNTU5M2ZiM2EtMmE2My00MGQ0LTliOGYtZWVlMGNjM2UxMDA5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHds7FnRE9_7jg7py3hFGQXVrq7WVAPn3IlbA1WFfRUxd8ycTj49npXXDceb3-wGh_ThIzqHD-QSRcWWvxi630YDN2LJ_JUvDR-7vN4HI-vGCfZ9MqDyPV7z2EVHxK82wbYs8l6Ad_CYLtuZK_oQJDwSIWxhsI4Qb-ViSUOZGfdAgFcv382B7px5FIN-QP_WNR46Gz64jZ4snz3XAH-LorzYBdSZXeEZbRAXIAsXHVa9aRdbKoDlvQk0tSBgPFV9BoVd5v5QdgSpL4Qc0xBjcvG0Q5XkAZfyCuENLOa4Hy4CfbwqhA4ps3uioBwtFCOSFdE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:37:48.882 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 14:37:48.882 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 14:37:48.882 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 14:37:48.885 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:37:48.885 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:37:48.911 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:37:48.911 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:37:48.911 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:37:48.912 -06:00 [DBG] No PKCE used.
2018-07-18 14:37:48.912 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:37:48.912 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:37:52.085 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 14:37:52.085 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:37:52.085 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:37:52.108 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:37:52.108 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:37:52.108 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:37:52.108 -06:00 [DBG] No PKCE used.
2018-07-18 14:37:52.108 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:37:52.129 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:37:52.129 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:37:52.129 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 14:37:52.130 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 14:37:52.130 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 14:37:52.130 -06:00 [DBG] Start authorize callback request
2018-07-18 14:37:52.158 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:37:52.158 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:37:52.158 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:37:52.158 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:37:52.158 -06:00 [DBG] No PKCE used.
2018-07-18 14:37:52.158 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:37:52.158 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHds7FnRE9_7jg7py3hFGQXVrq7WVAPn3IlbA1WFfRUxd8ycTj49npXXDceb3-wGh_ThIzqHD-QSRcWWvxi630YDN2LJ_JUvDR-7vN4HI-vGCfZ9MqDyPV7z2EVHxK82wbYs8l6Ad_CYLtuZK_oQJDwSIWxhsI4Qb-ViSUOZGfdAgFcv382B7px5FIN-QP_WNR46Gz64jZ4snz3XAH-LorzYBdSZXeEZbRAXIAsXHVa9aRdbKoDlvQk0tSBgPFV9BoVd5v5QdgSpL4Qc0xBjcvG0Q5XkAZfyCuENLOa4Hy4CfbwqhA4ps3uioBwtFCOSFdE",
  "Nonce": "636675430554133540.Y2UzOTZiNTAtMzQ4YS00MmRlLWJhMWItMjBkMzYwMjdjZDQyNTU5M2ZiM2EtMmE2My00MGQ0LTliOGYtZWVlMGNjM2UxMDA5",
  "SessionId": "1c60180395a8694271089072577a539f",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business",
    "response_mode": "form_post",
    "nonce": "636675430554133540.Y2UzOTZiNTAtMzQ4YS00MmRlLWJhMWItMjBkMzYwMjdjZDQyNTU5M2ZiM2EtMmE2My00MGQ0LTliOGYtZWVlMGNjM2UxMDA5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHds7FnRE9_7jg7py3hFGQXVrq7WVAPn3IlbA1WFfRUxd8ycTj49npXXDceb3-wGh_ThIzqHD-QSRcWWvxi630YDN2LJ_JUvDR-7vN4HI-vGCfZ9MqDyPV7z2EVHxK82wbYs8l6Ad_CYLtuZK_oQJDwSIWxhsI4Qb-ViSUOZGfdAgFcv382B7px5FIN-QP_WNR46Gz64jZ4snz3XAH-LorzYBdSZXeEZbRAXIAsXHVa9aRdbKoDlvQk0tSBgPFV9BoVd5v5QdgSpL4Qc0xBjcvG0Q5XkAZfyCuENLOa4Hy4CfbwqhA4ps3uioBwtFCOSFdE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:37:52.160 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 14:37:52.160 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 14:37:52.166 -06:00 [INF] User consented to scopes: ["openid","profile","business"]
2018-07-18 14:37:52.178 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:37:52.185 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 14:37:52.206 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 14:37:52.215 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 14:37:52.217 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 14:37:52.289 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****pKmA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****98d8"
    }
  ],
  "ActivityId": "0HLFCTP5MI7F3:00000007",
  "TimeStamp": "2018-07-18T20:37:52Z",
  "ProcessId": 3267,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:37:52.291 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHds7FnRE9_7jg7py3hFGQXVrq7WVAPn3IlbA1WFfRUxd8ycTj49npXXDceb3-wGh_ThIzqHD-QSRcWWvxi630YDN2LJ_JUvDR-7vN4HI-vGCfZ9MqDyPV7z2EVHxK82wbYs8l6Ad_CYLtuZK_oQJDwSIWxhsI4Qb-ViSUOZGfdAgFcv382B7px5FIN-QP_WNR46Gz64jZ4snz3XAH-LorzYBdSZXeEZbRAXIAsXHVa9aRdbKoDlvQk0tSBgPFV9BoVd5v5QdgSpL4Qc0xBjcvG0Q5XkAZfyCuENLOa4Hy4CfbwqhA4ps3uioBwtFCOSFdE",
  "Scope": "openid profile business"
}
2018-07-18 14:37:52.306 -06:00 [DBG] Augmenting SignInContext
2018-07-18 14:37:52.306 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 14:37:52.809 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 14:37:52.812 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 14:37:52.812 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 14:37:52.819 -06:00 [DBG] Start token request.
2018-07-18 14:37:52.823 -06:00 [DBG] Start client validation
2018-07-18 14:37:52.827 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 14:37:52.830 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 14:37:52.830 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 14:37:52.830 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 14:37:52.830 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:37:52.836 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 14:37:52.837 -06:00 [DBG] Client validation success
2018-07-18 14:37:52.839 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCTP5MI7F4:00000001",
  "TimeStamp": "2018-07-18T20:37:52Z",
  "ProcessId": 3267,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:37:52.844 -06:00 [DBG] Start token request validation
2018-07-18 14:37:52.853 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 14:37:52.872 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 14:37:52.875 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "e264299e55125a39af16fb2c0882e29dba1359e44fe8d8323151934e59ad98d8",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "e264299e55125a39af16fb2c0882e29dba1359e44fe8d8323151934e59ad98d8",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 14:37:52.886 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:37:52.894 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 14:37:52.895 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:37:52.913 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:37:52.913 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 14:37:52.914 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 14:37:52.927 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****M1fQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****46HA"
    }
  ],
  "ActivityId": "0HLFCTP5MI7F4:00000001",
  "TimeStamp": "2018-07-18T20:37:52Z",
  "ProcessId": 3267,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:37:52.928 -06:00 [DBG] Token request success.
2018-07-18 14:37:52.937 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 14:37:52.938 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 14:37:52.938 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 14:37:52.943 -06:00 [DBG] Start userinfo request
2018-07-18 14:37:52.946 -06:00 [DBG] Bearer token found in header
2018-07-18 14:37:53.012 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:37:53.015 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:37:53.017 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 14:37:53.020 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531946272,
    "exp": 1531949872,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1531946268,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business"
    ],
    "amr": "pwd"
  }
}
2018-07-18 14:37:53.025 -06:00 [DBG] Creating userinfo response
2018-07-18 14:37:53.028 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 14:37:53.030 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 14:37:53.032 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number
2018-07-18 14:37:53.032 -06:00 [DBG] Scopes in access token: openid profile business
2018-07-18 14:37:53.034 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name website preferred_username
2018-07-18 14:37:53.034 -06:00 [DBG] End userinfo request
2018-07-18 14:38:30.751 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 14:38:30.751 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 14:38:30.751 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 14:38:30.754 -06:00 [DBG] Start discovery request
2018-07-18 14:38:30.896 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 14:38:30.896 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 14:38:30.896 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 14:38:30.899 -06:00 [DBG] Start key discovery request
2018-07-18 14:38:30.976 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 14:38:30.976 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 14:38:30.976 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 14:38:30.976 -06:00 [DBG] Start authorize request
2018-07-18 14:38:30.977 -06:00 [DBG] No user present in authorize request
2018-07-18 14:38:30.977 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:38:30.977 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:38:30.977 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:38:30.977 -06:00 [DBG] No PKCE used.
2018-07-18 14:38:30.977 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:38:30.977 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc0rB9GDSNYyItkzGVwD1EE3_DRveBc_TL2pajl8Q1aVVI931g922Qyk6eKfyFMOSallKttXABBGTxdBu7Q2rB_l06xybpKkAyn557jfCzc3DwtmpppxZLg1USrHj6cs8hEPnfp1YMpzjzPCVvbxPz_F3fxgr7HVn6Sxei3dV4s3dQPjfYIReSp3J6OlcFsAAU8jta4vocJ2uMjdqiDhfwKsr2-qcX6IL-KhKec3peavfKay-PMfKgsYy9VYyNGvW-sqvuVjHi-2dCKb_LNUArjuU8Niu3vgaOZvugeXz2_A8rXnPBvzPZohniiJ18CaLo",
  "Nonce": "636675431109555250.YTRlZmFhZjktZTk2OC00MWRkLWIzN2YtNzFkMzg3ZmY3NGJkZWUwY2NiZDAtYWRlYS00NTllLThmZDYtMDE3ZTJiZjIwMTIz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675431109555250.YTRlZmFhZjktZTk2OC00MWRkLWIzN2YtNzFkMzg3ZmY3NGJkZWUwY2NiZDAtYWRlYS00NTllLThmZDYtMDE3ZTJiZjIwMTIz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc0rB9GDSNYyItkzGVwD1EE3_DRveBc_TL2pajl8Q1aVVI931g922Qyk6eKfyFMOSallKttXABBGTxdBu7Q2rB_l06xybpKkAyn557jfCzc3DwtmpppxZLg1USrHj6cs8hEPnfp1YMpzjzPCVvbxPz_F3fxgr7HVn6Sxei3dV4s3dQPjfYIReSp3J6OlcFsAAU8jta4vocJ2uMjdqiDhfwKsr2-qcX6IL-KhKec3peavfKay-PMfKgsYy9VYyNGvW-sqvuVjHi-2dCKb_LNUArjuU8Niu3vgaOZvugeXz2_A8rXnPBvzPZohniiJ18CaLo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:38:30.977 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 14:38:30.981 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:38:30.981 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:38:30.981 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:38:30.981 -06:00 [DBG] No PKCE used.
2018-07-18 14:38:30.981 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:38:30.981 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:38:42.510 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 14:38:42.525 -06:00 [DBG] Augmenting SignInContext
2018-07-18 14:38:42.525 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 14:38:42.525 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 14:38:42.525 -06:00 [DBG] Adding auth_time claim with value: 1531946322
2018-07-18 14:38:42.526 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 14:38:42.526 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCTP5MI7F9:00000003",
  "TimeStamp": "2018-07-18T20:38:42Z",
  "ProcessId": 3267,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:38:42.529 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:38:42.529 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:38:42.529 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 14:38:42.529 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 14:38:42.529 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 14:38:42.529 -06:00 [DBG] Start authorize callback request
2018-07-18 14:38:42.529 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:38:42.529 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:38:42.529 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:38:42.530 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:38:42.530 -06:00 [DBG] No PKCE used.
2018-07-18 14:38:42.530 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:38:42.530 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc0rB9GDSNYyItkzGVwD1EE3_DRveBc_TL2pajl8Q1aVVI931g922Qyk6eKfyFMOSallKttXABBGTxdBu7Q2rB_l06xybpKkAyn557jfCzc3DwtmpppxZLg1USrHj6cs8hEPnfp1YMpzjzPCVvbxPz_F3fxgr7HVn6Sxei3dV4s3dQPjfYIReSp3J6OlcFsAAU8jta4vocJ2uMjdqiDhfwKsr2-qcX6IL-KhKec3peavfKay-PMfKgsYy9VYyNGvW-sqvuVjHi-2dCKb_LNUArjuU8Niu3vgaOZvugeXz2_A8rXnPBvzPZohniiJ18CaLo",
  "Nonce": "636675431109555250.YTRlZmFhZjktZTk2OC00MWRkLWIzN2YtNzFkMzg3ZmY3NGJkZWUwY2NiZDAtYWRlYS00NTllLThmZDYtMDE3ZTJiZjIwMTIz",
  "SessionId": "04020ff3442c9e8a31d4f8a8449ff815",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675431109555250.YTRlZmFhZjktZTk2OC00MWRkLWIzN2YtNzFkMzg3ZmY3NGJkZWUwY2NiZDAtYWRlYS00NTllLThmZDYtMDE3ZTJiZjIwMTIz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc0rB9GDSNYyItkzGVwD1EE3_DRveBc_TL2pajl8Q1aVVI931g922Qyk6eKfyFMOSallKttXABBGTxdBu7Q2rB_l06xybpKkAyn557jfCzc3DwtmpppxZLg1USrHj6cs8hEPnfp1YMpzjzPCVvbxPz_F3fxgr7HVn6Sxei3dV4s3dQPjfYIReSp3J6OlcFsAAU8jta4vocJ2uMjdqiDhfwKsr2-qcX6IL-KhKec3peavfKay-PMfKgsYy9VYyNGvW-sqvuVjHi-2dCKb_LNUArjuU8Niu3vgaOZvugeXz2_A8rXnPBvzPZohniiJ18CaLo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:38:42.531 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 14:38:42.531 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 14:38:42.531 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 14:38:42.533 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:38:42.533 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:38:42.534 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:38:42.534 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:38:42.534 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:38:42.534 -06:00 [DBG] No PKCE used.
2018-07-18 14:38:42.534 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:38:42.534 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:38:47.886 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 14:38:47.886 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:38:47.886 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:38:47.887 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:38:47.887 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:38:47.887 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:38:47.887 -06:00 [DBG] No PKCE used.
2018-07-18 14:38:47.887 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:38:47.890 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:38:47.890 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:38:47.890 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 14:38:47.891 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 14:38:47.891 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 14:38:47.891 -06:00 [DBG] Start authorize callback request
2018-07-18 14:38:47.891 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:38:47.891 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:38:47.891 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:38:47.891 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:38:47.891 -06:00 [DBG] No PKCE used.
2018-07-18 14:38:47.891 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:38:47.891 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc0rB9GDSNYyItkzGVwD1EE3_DRveBc_TL2pajl8Q1aVVI931g922Qyk6eKfyFMOSallKttXABBGTxdBu7Q2rB_l06xybpKkAyn557jfCzc3DwtmpppxZLg1USrHj6cs8hEPnfp1YMpzjzPCVvbxPz_F3fxgr7HVn6Sxei3dV4s3dQPjfYIReSp3J6OlcFsAAU8jta4vocJ2uMjdqiDhfwKsr2-qcX6IL-KhKec3peavfKay-PMfKgsYy9VYyNGvW-sqvuVjHi-2dCKb_LNUArjuU8Niu3vgaOZvugeXz2_A8rXnPBvzPZohniiJ18CaLo",
  "Nonce": "636675431109555250.YTRlZmFhZjktZTk2OC00MWRkLWIzN2YtNzFkMzg3ZmY3NGJkZWUwY2NiZDAtYWRlYS00NTllLThmZDYtMDE3ZTJiZjIwMTIz",
  "SessionId": "04020ff3442c9e8a31d4f8a8449ff815",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675431109555250.YTRlZmFhZjktZTk2OC00MWRkLWIzN2YtNzFkMzg3ZmY3NGJkZWUwY2NiZDAtYWRlYS00NTllLThmZDYtMDE3ZTJiZjIwMTIz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc0rB9GDSNYyItkzGVwD1EE3_DRveBc_TL2pajl8Q1aVVI931g922Qyk6eKfyFMOSallKttXABBGTxdBu7Q2rB_l06xybpKkAyn557jfCzc3DwtmpppxZLg1USrHj6cs8hEPnfp1YMpzjzPCVvbxPz_F3fxgr7HVn6Sxei3dV4s3dQPjfYIReSp3J6OlcFsAAU8jta4vocJ2uMjdqiDhfwKsr2-qcX6IL-KhKec3peavfKay-PMfKgsYy9VYyNGvW-sqvuVjHi-2dCKb_LNUArjuU8Niu3vgaOZvugeXz2_A8rXnPBvzPZohniiJ18CaLo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:38:47.893 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 14:38:47.893 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 14:38:47.893 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-18 14:38:47.893 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:38:47.893 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 14:38:47.898 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 14:38:47.898 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 14:38:47.898 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 14:38:47.909 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****pSRw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****5c79"
    }
  ],
  "ActivityId": "0HLFCTP5MI7F9:00000007",
  "TimeStamp": "2018-07-18T20:38:47Z",
  "ProcessId": 3267,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:38:47.910 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc0rB9GDSNYyItkzGVwD1EE3_DRveBc_TL2pajl8Q1aVVI931g922Qyk6eKfyFMOSallKttXABBGTxdBu7Q2rB_l06xybpKkAyn557jfCzc3DwtmpppxZLg1USrHj6cs8hEPnfp1YMpzjzPCVvbxPz_F3fxgr7HVn6Sxei3dV4s3dQPjfYIReSp3J6OlcFsAAU8jta4vocJ2uMjdqiDhfwKsr2-qcX6IL-KhKec3peavfKay-PMfKgsYy9VYyNGvW-sqvuVjHi-2dCKb_LNUArjuU8Niu3vgaOZvugeXz2_A8rXnPBvzPZohniiJ18CaLo",
  "Scope": "openid profile business email"
}
2018-07-18 14:38:47.910 -06:00 [DBG] Augmenting SignInContext
2018-07-18 14:38:47.910 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 14:38:48.023 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 14:38:48.023 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 14:38:48.023 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 14:38:48.023 -06:00 [DBG] Start token request.
2018-07-18 14:38:48.023 -06:00 [DBG] Start client validation
2018-07-18 14:38:48.023 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 14:38:48.023 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 14:38:48.024 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 14:38:48.024 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 14:38:48.024 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:38:48.024 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 14:38:48.024 -06:00 [DBG] Client validation success
2018-07-18 14:38:48.024 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCTP5MI7F5:00000003",
  "TimeStamp": "2018-07-18T20:38:48Z",
  "ProcessId": 3267,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:38:48.024 -06:00 [DBG] Start token request validation
2018-07-18 14:38:48.024 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 14:38:48.032 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 14:38:48.033 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "74a8a7d3525420609cce86a03fd81d1564d4ff25065e264677e1923e92595c79",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "74a8a7d3525420609cce86a03fd81d1564d4ff25065e264677e1923e92595c79",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 14:38:48.033 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:38:48.033 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 14:38:48.033 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:38:48.045 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:38:48.046 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 14:38:48.046 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 14:38:48.058 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****wJ5w"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****BQKA"
    }
  ],
  "ActivityId": "0HLFCTP5MI7F5:00000003",
  "TimeStamp": "2018-07-18T20:38:48Z",
  "ProcessId": 3267,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:38:48.058 -06:00 [DBG] Token request success.
2018-07-18 14:38:48.068 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 14:38:48.068 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 14:38:48.068 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 14:38:48.068 -06:00 [DBG] Start userinfo request
2018-07-18 14:38:48.068 -06:00 [DBG] Bearer token found in header
2018-07-18 14:38:48.070 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:38:48.070 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:38:48.072 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 14:38:48.072 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531946328,
    "exp": 1531949928,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1531946322,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-18 14:38:48.072 -06:00 [DBG] Creating userinfo response
2018-07-18 14:38:48.072 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 14:38:48.072 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 14:38:48.072 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-18 14:38:48.072 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 14:38:48.074 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-18 14:38:48.074 -06:00 [DBG] End userinfo request
2018-07-18 14:46:08.920 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-18 14:46:08.950 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-18 14:46:08.953 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-18 14:46:08.953 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-18 14:46:08.953 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-18 14:46:08.953 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-18 14:46:41.219 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 14:46:41.333 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 14:46:41.334 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 14:46:41.336 -06:00 [DBG] Start discovery request
2018-07-18 14:46:41.547 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 14:46:41.548 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 14:46:41.548 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 14:46:41.551 -06:00 [DBG] Start key discovery request
2018-07-18 14:46:41.651 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 14:46:41.654 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 14:46:41.654 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 14:46:41.656 -06:00 [DBG] Start authorize request
2018-07-18 14:46:41.672 -06:00 [DBG] No user present in authorize request
2018-07-18 14:46:41.675 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:46:41.684 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:46:41.689 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:46:41.690 -06:00 [DBG] No PKCE used.
2018-07-18 14:46:41.714 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:46:41.723 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfsO2H5TAhiPskQ_yZgVOyE522lFiIqsaZH7h5oXhIhPCx2RaUcdNGKSSKuX8ihgUnuaaA_j86vz9ct1fEknA3ohX4sfRGzEPqi1A9CXCQGNmF6TuOzB4PJXqjxhQ_48bwMkzU0Gm8eyInk-8oHZBqfR0aW9eo6iUjXgf_3zeIfX5EewCzSpLzOt43upwwUgWsblDmgagISwbQeeTrakEY0seCBiJYx4qXiC3uzrtGaB5Sh_R4h4ZMYL-8P0L5zYQAPksXDXMNCDbLo1TF9mxy8HODGUn8uQq3550xb0_J6fAZNwoyloIoAeIC7ao-CU-k",
  "Nonce": "636675436016231390.ZDAyNzhjZDMtNWY1Zi00MWY2LWIzZGMtMDQyZGZjZmYzZDI3ODhjMzZhYjMtMmI3ZC00ODcxLTlkMjMtZDFlZWQyMjI4Mzk1",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675436016231390.ZDAyNzhjZDMtNWY1Zi00MWY2LWIzZGMtMDQyZGZjZmYzZDI3ODhjMzZhYjMtMmI3ZC00ODcxLTlkMjMtZDFlZWQyMjI4Mzk1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfsO2H5TAhiPskQ_yZgVOyE522lFiIqsaZH7h5oXhIhPCx2RaUcdNGKSSKuX8ihgUnuaaA_j86vz9ct1fEknA3ohX4sfRGzEPqi1A9CXCQGNmF6TuOzB4PJXqjxhQ_48bwMkzU0Gm8eyInk-8oHZBqfR0aW9eo6iUjXgf_3zeIfX5EewCzSpLzOt43upwwUgWsblDmgagISwbQeeTrakEY0seCBiJYx4qXiC3uzrtGaB5Sh_R4h4ZMYL-8P0L5zYQAPksXDXMNCDbLo1TF9mxy8HODGUn8uQq3550xb0_J6fAZNwoyloIoAeIC7ao-CU-k",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:46:41.729 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 14:46:42.029 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:46:42.029 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:46:42.030 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:46:42.030 -06:00 [DBG] No PKCE used.
2018-07-18 14:46:42.030 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:46:42.032 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:46:53.552 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 14:46:54.708 -06:00 [DBG] Augmenting SignInContext
2018-07-18 14:46:54.710 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 14:46:54.710 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 14:46:54.710 -06:00 [DBG] Adding auth_time claim with value: 1531946814
2018-07-18 14:46:54.737 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 14:46:54.764 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCTU89JM08:00000003",
  "TimeStamp": "2018-07-18T20:46:54Z",
  "ProcessId": 3350,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:46:54.784 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:46:54.784 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:46:54.784 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 14:46:54.785 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 14:46:54.785 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 14:46:54.789 -06:00 [DBG] Start authorize callback request
2018-07-18 14:46:54.791 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:46:54.791 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:46:54.791 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:46:54.791 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:46:54.791 -06:00 [DBG] No PKCE used.
2018-07-18 14:46:54.792 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:46:54.792 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfsO2H5TAhiPskQ_yZgVOyE522lFiIqsaZH7h5oXhIhPCx2RaUcdNGKSSKuX8ihgUnuaaA_j86vz9ct1fEknA3ohX4sfRGzEPqi1A9CXCQGNmF6TuOzB4PJXqjxhQ_48bwMkzU0Gm8eyInk-8oHZBqfR0aW9eo6iUjXgf_3zeIfX5EewCzSpLzOt43upwwUgWsblDmgagISwbQeeTrakEY0seCBiJYx4qXiC3uzrtGaB5Sh_R4h4ZMYL-8P0L5zYQAPksXDXMNCDbLo1TF9mxy8HODGUn8uQq3550xb0_J6fAZNwoyloIoAeIC7ao-CU-k",
  "Nonce": "636675436016231390.ZDAyNzhjZDMtNWY1Zi00MWY2LWIzZGMtMDQyZGZjZmYzZDI3ODhjMzZhYjMtMmI3ZC00ODcxLTlkMjMtZDFlZWQyMjI4Mzk1",
  "SessionId": "f2d2743092b1e29867f180bbd8100429",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675436016231390.ZDAyNzhjZDMtNWY1Zi00MWY2LWIzZGMtMDQyZGZjZmYzZDI3ODhjMzZhYjMtMmI3ZC00ODcxLTlkMjMtZDFlZWQyMjI4Mzk1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfsO2H5TAhiPskQ_yZgVOyE522lFiIqsaZH7h5oXhIhPCx2RaUcdNGKSSKuX8ihgUnuaaA_j86vz9ct1fEknA3ohX4sfRGzEPqi1A9CXCQGNmF6TuOzB4PJXqjxhQ_48bwMkzU0Gm8eyInk-8oHZBqfR0aW9eo6iUjXgf_3zeIfX5EewCzSpLzOt43upwwUgWsblDmgagISwbQeeTrakEY0seCBiJYx4qXiC3uzrtGaB5Sh_R4h4ZMYL-8P0L5zYQAPksXDXMNCDbLo1TF9mxy8HODGUn8uQq3550xb0_J6fAZNwoyloIoAeIC7ao-CU-k",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:46:54.829 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 14:46:54.829 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 14:46:54.829 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 14:46:54.832 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:46:54.833 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:46:54.858 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:46:54.859 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:46:54.859 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:46:54.859 -06:00 [DBG] No PKCE used.
2018-07-18 14:46:54.859 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:46:54.859 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:46:58.878 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 14:46:58.879 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:46:58.879 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:46:58.898 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:46:58.898 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:46:58.898 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:46:58.898 -06:00 [DBG] No PKCE used.
2018-07-18 14:46:58.898 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:46:58.912 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:46:58.912 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:46:58.912 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 14:46:58.912 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 14:46:58.912 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 14:46:58.912 -06:00 [DBG] Start authorize callback request
2018-07-18 14:46:58.938 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:46:58.938 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:46:58.938 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:46:58.938 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:46:58.938 -06:00 [DBG] No PKCE used.
2018-07-18 14:46:58.939 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:46:58.939 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfsO2H5TAhiPskQ_yZgVOyE522lFiIqsaZH7h5oXhIhPCx2RaUcdNGKSSKuX8ihgUnuaaA_j86vz9ct1fEknA3ohX4sfRGzEPqi1A9CXCQGNmF6TuOzB4PJXqjxhQ_48bwMkzU0Gm8eyInk-8oHZBqfR0aW9eo6iUjXgf_3zeIfX5EewCzSpLzOt43upwwUgWsblDmgagISwbQeeTrakEY0seCBiJYx4qXiC3uzrtGaB5Sh_R4h4ZMYL-8P0L5zYQAPksXDXMNCDbLo1TF9mxy8HODGUn8uQq3550xb0_J6fAZNwoyloIoAeIC7ao-CU-k",
  "Nonce": "636675436016231390.ZDAyNzhjZDMtNWY1Zi00MWY2LWIzZGMtMDQyZGZjZmYzZDI3ODhjMzZhYjMtMmI3ZC00ODcxLTlkMjMtZDFlZWQyMjI4Mzk1",
  "SessionId": "f2d2743092b1e29867f180bbd8100429",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675436016231390.ZDAyNzhjZDMtNWY1Zi00MWY2LWIzZGMtMDQyZGZjZmYzZDI3ODhjMzZhYjMtMmI3ZC00ODcxLTlkMjMtZDFlZWQyMjI4Mzk1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfsO2H5TAhiPskQ_yZgVOyE522lFiIqsaZH7h5oXhIhPCx2RaUcdNGKSSKuX8ihgUnuaaA_j86vz9ct1fEknA3ohX4sfRGzEPqi1A9CXCQGNmF6TuOzB4PJXqjxhQ_48bwMkzU0Gm8eyInk-8oHZBqfR0aW9eo6iUjXgf_3zeIfX5EewCzSpLzOt43upwwUgWsblDmgagISwbQeeTrakEY0seCBiJYx4qXiC3uzrtGaB5Sh_R4h4ZMYL-8P0L5zYQAPksXDXMNCDbLo1TF9mxy8HODGUn8uQq3550xb0_J6fAZNwoyloIoAeIC7ao-CU-k",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:46:58.942 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 14:46:58.942 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 14:46:58.950 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-18 14:46:58.959 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:46:58.965 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 14:46:58.985 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 14:46:58.993 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 14:46:59.070 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****GgHw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****a61b"
    }
  ],
  "ActivityId": "0HLFCTU89JM08:00000007",
  "TimeStamp": "2018-07-18T20:46:59Z",
  "ProcessId": 3350,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:46:59.072 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfsO2H5TAhiPskQ_yZgVOyE522lFiIqsaZH7h5oXhIhPCx2RaUcdNGKSSKuX8ihgUnuaaA_j86vz9ct1fEknA3ohX4sfRGzEPqi1A9CXCQGNmF6TuOzB4PJXqjxhQ_48bwMkzU0Gm8eyInk-8oHZBqfR0aW9eo6iUjXgf_3zeIfX5EewCzSpLzOt43upwwUgWsblDmgagISwbQeeTrakEY0seCBiJYx4qXiC3uzrtGaB5Sh_R4h4ZMYL-8P0L5zYQAPksXDXMNCDbLo1TF9mxy8HODGUn8uQq3550xb0_J6fAZNwoyloIoAeIC7ao-CU-k",
  "Scope": "openid profile business email"
}
2018-07-18 14:46:59.086 -06:00 [DBG] Augmenting SignInContext
2018-07-18 14:46:59.086 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 14:46:59.204 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 14:46:59.207 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 14:46:59.207 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 14:46:59.212 -06:00 [DBG] Start token request.
2018-07-18 14:46:59.217 -06:00 [DBG] Start client validation
2018-07-18 14:46:59.221 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 14:46:59.223 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 14:46:59.224 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 14:46:59.224 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 14:46:59.224 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:46:59.231 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 14:46:59.231 -06:00 [DBG] Client validation success
2018-07-18 14:46:59.234 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCTU89JM07:00000003",
  "TimeStamp": "2018-07-18T20:46:59Z",
  "ProcessId": 3350,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:46:59.238 -06:00 [DBG] Start token request validation
2018-07-18 14:46:59.247 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 14:46:59.265 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 14:46:59.268 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "0d2af82ebe35782473d2353eebe078a96f6b0c8ec633b9d53d8fe444196da61b",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "0d2af82ebe35782473d2353eebe078a96f6b0c8ec633b9d53d8fe444196da61b",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 14:46:59.278 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:46:59.285 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 14:46:59.285 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:46:59.299 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:46:59.299 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 14:46:59.314 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****4pKg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****qImA"
    }
  ],
  "ActivityId": "0HLFCTU89JM07:00000003",
  "TimeStamp": "2018-07-18T20:46:59Z",
  "ProcessId": 3350,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:46:59.315 -06:00 [DBG] Token request success.
2018-07-18 14:46:59.328 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 14:46:59.328 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 14:46:59.328 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 14:46:59.334 -06:00 [DBG] Start userinfo request
2018-07-18 14:46:59.336 -06:00 [DBG] Bearer token found in header
2018-07-18 14:46:59.392 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:46:59.394 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:46:59.396 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 14:46:59.399 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531946819,
    "exp": 1531950419,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1531946814,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-18 14:46:59.403 -06:00 [DBG] Creating userinfo response
2018-07-18 14:46:59.406 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 14:46:59.408 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 14:46:59.410 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-18 14:46:59.410 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 14:46:59.411 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-18 14:46:59.411 -06:00 [DBG] End userinfo request
2018-07-18 14:50:16.170 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 14:50:16.170 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 14:50:16.170 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 14:50:16.170 -06:00 [DBG] Start discovery request
2018-07-18 14:50:16.291 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 14:50:16.291 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 14:50:16.291 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 14:50:16.291 -06:00 [DBG] Start key discovery request
2018-07-18 14:50:16.363 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 14:50:16.364 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 14:50:16.364 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 14:50:16.364 -06:00 [DBG] Start authorize request
2018-07-18 14:50:16.364 -06:00 [DBG] No user present in authorize request
2018-07-18 14:50:16.364 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:50:16.364 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:50:16.364 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:50:16.364 -06:00 [DBG] No PKCE used.
2018-07-18 14:50:16.364 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:50:16.364 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf8SLiw2Fb9pKGoOx3jYCu1NnuNhIl2xVZcKZJvrZ9WKZH98WYWCgp0CK-vcK7KqHcDR9TeVG8JufD-Vxd6slPhleKeDa04DqrpZPxeMW1Y-jmOL57YM7f3fAaErdjLeQrYS4Sr2GIyl2fgpvvq7psLSuyppRR6Ch6pi2VcM1YTBG_b5Yw_f92ZYblNHF8IvP148FSaCtJDcAUpcCQS_01tsg_p90QoqaNAlTC9H-d6rqFEoSvQM2RUmpNEm5n-IFo8dqmNSi3Pi13RjqMLdda1B9EacfCaAyOaSLoPQO93HRABSrofbGABGqtKuxmLoiI",
  "Nonce": "636675438163461200.YjVhYmE4NWYtZjM2OS00OGQ2LTg2NmYtNTI2ZTg2MDRkZGM2NTY3ZjQxMGQtZTQ2OS00N2JlLWI5MjQtMDQyNDBkMDg2OTRk",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675438163461200.YjVhYmE4NWYtZjM2OS00OGQ2LTg2NmYtNTI2ZTg2MDRkZGM2NTY3ZjQxMGQtZTQ2OS00N2JlLWI5MjQtMDQyNDBkMDg2OTRk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf8SLiw2Fb9pKGoOx3jYCu1NnuNhIl2xVZcKZJvrZ9WKZH98WYWCgp0CK-vcK7KqHcDR9TeVG8JufD-Vxd6slPhleKeDa04DqrpZPxeMW1Y-jmOL57YM7f3fAaErdjLeQrYS4Sr2GIyl2fgpvvq7psLSuyppRR6Ch6pi2VcM1YTBG_b5Yw_f92ZYblNHF8IvP148FSaCtJDcAUpcCQS_01tsg_p90QoqaNAlTC9H-d6rqFEoSvQM2RUmpNEm5n-IFo8dqmNSi3Pi13RjqMLdda1B9EacfCaAyOaSLoPQO93HRABSrofbGABGqtKuxmLoiI",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:50:16.365 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 14:50:16.368 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:50:16.368 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:50:16.368 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:50:16.368 -06:00 [DBG] No PKCE used.
2018-07-18 14:50:16.368 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:50:16.368 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:50:22.936 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 14:50:22.951 -06:00 [DBG] Augmenting SignInContext
2018-07-18 14:50:22.951 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 14:50:22.951 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 14:50:22.951 -06:00 [DBG] Adding auth_time claim with value: 1531947022
2018-07-18 14:50:22.951 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 14:50:22.951 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCTU89JM0A:00000003",
  "TimeStamp": "2018-07-18T20:50:22Z",
  "ProcessId": 3350,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:50:22.954 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:50:22.954 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:50:22.954 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 14:50:22.954 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 14:50:22.955 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 14:50:22.955 -06:00 [DBG] Start authorize callback request
2018-07-18 14:50:22.955 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:50:22.955 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:50:22.955 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:50:22.955 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:50:22.955 -06:00 [DBG] No PKCE used.
2018-07-18 14:50:22.955 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:50:22.955 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf8SLiw2Fb9pKGoOx3jYCu1NnuNhIl2xVZcKZJvrZ9WKZH98WYWCgp0CK-vcK7KqHcDR9TeVG8JufD-Vxd6slPhleKeDa04DqrpZPxeMW1Y-jmOL57YM7f3fAaErdjLeQrYS4Sr2GIyl2fgpvvq7psLSuyppRR6Ch6pi2VcM1YTBG_b5Yw_f92ZYblNHF8IvP148FSaCtJDcAUpcCQS_01tsg_p90QoqaNAlTC9H-d6rqFEoSvQM2RUmpNEm5n-IFo8dqmNSi3Pi13RjqMLdda1B9EacfCaAyOaSLoPQO93HRABSrofbGABGqtKuxmLoiI",
  "Nonce": "636675438163461200.YjVhYmE4NWYtZjM2OS00OGQ2LTg2NmYtNTI2ZTg2MDRkZGM2NTY3ZjQxMGQtZTQ2OS00N2JlLWI5MjQtMDQyNDBkMDg2OTRk",
  "SessionId": "feb5a4da9f4ed6c6d92f225da839d5e6",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675438163461200.YjVhYmE4NWYtZjM2OS00OGQ2LTg2NmYtNTI2ZTg2MDRkZGM2NTY3ZjQxMGQtZTQ2OS00N2JlLWI5MjQtMDQyNDBkMDg2OTRk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf8SLiw2Fb9pKGoOx3jYCu1NnuNhIl2xVZcKZJvrZ9WKZH98WYWCgp0CK-vcK7KqHcDR9TeVG8JufD-Vxd6slPhleKeDa04DqrpZPxeMW1Y-jmOL57YM7f3fAaErdjLeQrYS4Sr2GIyl2fgpvvq7psLSuyppRR6Ch6pi2VcM1YTBG_b5Yw_f92ZYblNHF8IvP148FSaCtJDcAUpcCQS_01tsg_p90QoqaNAlTC9H-d6rqFEoSvQM2RUmpNEm5n-IFo8dqmNSi3Pi13RjqMLdda1B9EacfCaAyOaSLoPQO93HRABSrofbGABGqtKuxmLoiI",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:50:22.956 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 14:50:22.956 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 14:50:22.957 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 14:50:22.959 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:50:22.959 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:50:22.959 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:50:22.959 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:50:22.959 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:50:22.959 -06:00 [DBG] No PKCE used.
2018-07-18 14:50:22.959 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:50:22.959 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:50:25.645 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 14:50:25.646 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:50:25.646 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:50:25.646 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:50:25.646 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:50:25.646 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:50:25.646 -06:00 [DBG] No PKCE used.
2018-07-18 14:50:25.646 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:50:25.650 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:50:25.650 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:50:25.650 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 14:50:25.650 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 14:50:25.650 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 14:50:25.650 -06:00 [DBG] Start authorize callback request
2018-07-18 14:50:25.650 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:50:25.650 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:50:25.651 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:50:25.651 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:50:25.651 -06:00 [DBG] No PKCE used.
2018-07-18 14:50:25.651 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:50:25.651 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf8SLiw2Fb9pKGoOx3jYCu1NnuNhIl2xVZcKZJvrZ9WKZH98WYWCgp0CK-vcK7KqHcDR9TeVG8JufD-Vxd6slPhleKeDa04DqrpZPxeMW1Y-jmOL57YM7f3fAaErdjLeQrYS4Sr2GIyl2fgpvvq7psLSuyppRR6Ch6pi2VcM1YTBG_b5Yw_f92ZYblNHF8IvP148FSaCtJDcAUpcCQS_01tsg_p90QoqaNAlTC9H-d6rqFEoSvQM2RUmpNEm5n-IFo8dqmNSi3Pi13RjqMLdda1B9EacfCaAyOaSLoPQO93HRABSrofbGABGqtKuxmLoiI",
  "Nonce": "636675438163461200.YjVhYmE4NWYtZjM2OS00OGQ2LTg2NmYtNTI2ZTg2MDRkZGM2NTY3ZjQxMGQtZTQ2OS00N2JlLWI5MjQtMDQyNDBkMDg2OTRk",
  "SessionId": "feb5a4da9f4ed6c6d92f225da839d5e6",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675438163461200.YjVhYmE4NWYtZjM2OS00OGQ2LTg2NmYtNTI2ZTg2MDRkZGM2NTY3ZjQxMGQtZTQ2OS00N2JlLWI5MjQtMDQyNDBkMDg2OTRk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf8SLiw2Fb9pKGoOx3jYCu1NnuNhIl2xVZcKZJvrZ9WKZH98WYWCgp0CK-vcK7KqHcDR9TeVG8JufD-Vxd6slPhleKeDa04DqrpZPxeMW1Y-jmOL57YM7f3fAaErdjLeQrYS4Sr2GIyl2fgpvvq7psLSuyppRR6Ch6pi2VcM1YTBG_b5Yw_f92ZYblNHF8IvP148FSaCtJDcAUpcCQS_01tsg_p90QoqaNAlTC9H-d6rqFEoSvQM2RUmpNEm5n-IFo8dqmNSi3Pi13RjqMLdda1B9EacfCaAyOaSLoPQO93HRABSrofbGABGqtKuxmLoiI",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:50:25.652 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 14:50:25.652 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 14:50:25.652 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-18 14:50:25.652 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:50:25.652 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 14:50:25.657 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 14:50:25.657 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 14:50:25.670 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****lrJg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****056e"
    }
  ],
  "ActivityId": "0HLFCTU89JM0A:00000007",
  "TimeStamp": "2018-07-18T20:50:25Z",
  "ProcessId": 3350,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:50:25.670 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf8SLiw2Fb9pKGoOx3jYCu1NnuNhIl2xVZcKZJvrZ9WKZH98WYWCgp0CK-vcK7KqHcDR9TeVG8JufD-Vxd6slPhleKeDa04DqrpZPxeMW1Y-jmOL57YM7f3fAaErdjLeQrYS4Sr2GIyl2fgpvvq7psLSuyppRR6Ch6pi2VcM1YTBG_b5Yw_f92ZYblNHF8IvP148FSaCtJDcAUpcCQS_01tsg_p90QoqaNAlTC9H-d6rqFEoSvQM2RUmpNEm5n-IFo8dqmNSi3Pi13RjqMLdda1B9EacfCaAyOaSLoPQO93HRABSrofbGABGqtKuxmLoiI",
  "Scope": "openid profile business email"
}
2018-07-18 14:50:25.670 -06:00 [DBG] Augmenting SignInContext
2018-07-18 14:50:25.670 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 14:50:25.800 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 14:50:25.800 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 14:50:25.800 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 14:50:25.800 -06:00 [DBG] Start token request.
2018-07-18 14:50:25.800 -06:00 [DBG] Start client validation
2018-07-18 14:50:25.800 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 14:50:25.800 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 14:50:25.801 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 14:50:25.801 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 14:50:25.801 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:50:25.801 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 14:50:25.801 -06:00 [DBG] Client validation success
2018-07-18 14:50:25.801 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCTU89JM09:00000003",
  "TimeStamp": "2018-07-18T20:50:25Z",
  "ProcessId": 3350,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:50:25.801 -06:00 [DBG] Start token request validation
2018-07-18 14:50:25.801 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 14:50:25.809 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 14:50:25.809 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "e36aa6a7c7ef8294511a3e3edccde733a3676cea4bfbdb1fcfbc4d1be600056e",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "e36aa6a7c7ef8294511a3e3edccde733a3676cea4bfbdb1fcfbc4d1be600056e",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 14:50:25.809 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:50:25.809 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 14:50:25.809 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:50:25.823 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:50:25.823 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 14:50:25.836 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****BqUw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****vrzg"
    }
  ],
  "ActivityId": "0HLFCTU89JM09:00000003",
  "TimeStamp": "2018-07-18T20:50:25Z",
  "ProcessId": 3350,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:50:25.836 -06:00 [DBG] Token request success.
2018-07-18 14:51:46.143 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-18 14:51:46.174 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-18 14:51:46.177 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-18 14:51:46.177 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-18 14:51:46.177 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-18 14:51:46.177 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-18 14:52:12.747 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 14:52:12.861 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 14:52:12.861 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 14:52:12.864 -06:00 [DBG] Start discovery request
2018-07-18 14:52:13.074 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 14:52:13.075 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 14:52:13.075 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 14:52:13.078 -06:00 [DBG] Start key discovery request
2018-07-18 14:52:13.178 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 14:52:13.181 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 14:52:13.181 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 14:52:13.184 -06:00 [DBG] Start authorize request
2018-07-18 14:52:13.199 -06:00 [DBG] No user present in authorize request
2018-07-18 14:52:13.202 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:52:13.212 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:52:13.217 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:52:13.218 -06:00 [DBG] No PKCE used.
2018-07-18 14:52:13.242 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:52:13.250 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdWWDHdrtFei9p6plQoCYY8LvNq_mUk0b2-447n4xw4pcYjSHoTwmaspudKxtlX4npWOoXRdQToI72qT5rvZ6kUEg1c1_7xqeAY8EIyipaDniS8DyMJHb2N0R5i56hK6EMLmIsDzoYgDiLwm41aRhfjECFKmLKAK04rvDfBrrpMHj6HRPakKCnO19PjTKGOvvndzlsIqqq0HzCUyKkhGPeae6NXPPK6gCQodC66PSSLYRATOoUo7bS0x8xFSvuDsMX8XEZYJ59gJXbDZXwGmqkY6-eLZjdS3dqqvybdkBIkyRvrrFuWmKt2SyRkX8ETdlk",
  "Nonce": "636675439331509830.MzliMDMzZmEtZTI1MC00ZmI1LTk2MzktMjgxMGU3ZmRhOTNjMDc3MTk4NTEtZDM0NS00ZTc2LTkwYjItYjNmZGY1NDY2MWZl",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675439331509830.MzliMDMzZmEtZTI1MC00ZmI1LTk2MzktMjgxMGU3ZmRhOTNjMDc3MTk4NTEtZDM0NS00ZTc2LTkwYjItYjNmZGY1NDY2MWZl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdWWDHdrtFei9p6plQoCYY8LvNq_mUk0b2-447n4xw4pcYjSHoTwmaspudKxtlX4npWOoXRdQToI72qT5rvZ6kUEg1c1_7xqeAY8EIyipaDniS8DyMJHb2N0R5i56hK6EMLmIsDzoYgDiLwm41aRhfjECFKmLKAK04rvDfBrrpMHj6HRPakKCnO19PjTKGOvvndzlsIqqq0HzCUyKkhGPeae6NXPPK6gCQodC66PSSLYRATOoUo7bS0x8xFSvuDsMX8XEZYJ59gJXbDZXwGmqkY6-eLZjdS3dqqvybdkBIkyRvrrFuWmKt2SyRkX8ETdlk",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:52:13.256 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 14:52:13.555 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:52:13.556 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:52:13.556 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:52:13.556 -06:00 [DBG] No PKCE used.
2018-07-18 14:52:13.557 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:52:13.559 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:52:17.133 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 14:52:17.133 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 14:52:17.133 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 14:52:17.133 -06:00 [DBG] Start authorize request
2018-07-18 14:52:17.134 -06:00 [DBG] No user present in authorize request
2018-07-18 14:52:17.134 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:52:17.134 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:52:17.134 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:52:17.134 -06:00 [DBG] No PKCE used.
2018-07-18 14:52:17.134 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:52:17.134 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcM7s2FFJ_hhIGgs2vz7PTwC6mXjUzqIW3KUNBwosA4_wp8ciRBlEgO_33v-nDv_mA-DXzC9QLg0lS_IwwSYro6uk39PBpyg9LDjN3l6hMN_UiT_ncKt54Vp_6eiZpPvMgCO9NczCvmrQv2x67gSgDPme9g9UMGk12iBLFx6l1Gab34BZ5f4O91e-nZIuJp83TiIhHtYQhSw2p7CqORnN5cahgv2L2xX7NCY6ASPk8S8-Fto5uKEbIcCSJjca3Vsnd5uo5GwfAYpyVdKlXIQSdLNj2objefbxOnXFFvRGRn_bVMkU51DSlrzz63SIH7iIM",
  "Nonce": "636675439371233320.MWY0MjUyMDAtOTMzNi00MjZmLThhNGQtYzhjMTI1M2FkMTg4ZjFkZDI2MTQtYTcyMi00MzFiLWI3OTctNjgyNTE0NzdkNmYy",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675439371233320.MWY0MjUyMDAtOTMzNi00MjZmLThhNGQtYzhjMTI1M2FkMTg4ZjFkZDI2MTQtYTcyMi00MzFiLWI3OTctNjgyNTE0NzdkNmYy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcM7s2FFJ_hhIGgs2vz7PTwC6mXjUzqIW3KUNBwosA4_wp8ciRBlEgO_33v-nDv_mA-DXzC9QLg0lS_IwwSYro6uk39PBpyg9LDjN3l6hMN_UiT_ncKt54Vp_6eiZpPvMgCO9NczCvmrQv2x67gSgDPme9g9UMGk12iBLFx6l1Gab34BZ5f4O91e-nZIuJp83TiIhHtYQhSw2p7CqORnN5cahgv2L2xX7NCY6ASPk8S8-Fto5uKEbIcCSJjca3Vsnd5uo5GwfAYpyVdKlXIQSdLNj2objefbxOnXFFvRGRn_bVMkU51DSlrzz63SIH7iIM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:52:17.134 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 14:52:17.141 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:52:17.141 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:52:17.141 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:52:17.141 -06:00 [DBG] No PKCE used.
2018-07-18 14:52:17.142 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:52:17.142 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:52:25.355 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 14:52:26.511 -06:00 [DBG] Augmenting SignInContext
2018-07-18 14:52:26.513 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 14:52:26.513 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 14:52:26.513 -06:00 [DBG] Adding auth_time claim with value: 1531947146
2018-07-18 14:52:26.540 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 14:52:26.567 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCU1B3BJ4F:00000003",
  "TimeStamp": "2018-07-18T20:52:26Z",
  "ProcessId": 3460,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:52:26.587 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:52:26.588 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:52:26.588 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 14:52:26.588 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 14:52:26.588 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 14:52:26.592 -06:00 [DBG] Start authorize callback request
2018-07-18 14:52:26.595 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:52:26.595 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:52:26.595 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:52:26.595 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:52:26.595 -06:00 [DBG] No PKCE used.
2018-07-18 14:52:26.595 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:52:26.595 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcM7s2FFJ_hhIGgs2vz7PTwC6mXjUzqIW3KUNBwosA4_wp8ciRBlEgO_33v-nDv_mA-DXzC9QLg0lS_IwwSYro6uk39PBpyg9LDjN3l6hMN_UiT_ncKt54Vp_6eiZpPvMgCO9NczCvmrQv2x67gSgDPme9g9UMGk12iBLFx6l1Gab34BZ5f4O91e-nZIuJp83TiIhHtYQhSw2p7CqORnN5cahgv2L2xX7NCY6ASPk8S8-Fto5uKEbIcCSJjca3Vsnd5uo5GwfAYpyVdKlXIQSdLNj2objefbxOnXFFvRGRn_bVMkU51DSlrzz63SIH7iIM",
  "Nonce": "636675439371233320.MWY0MjUyMDAtOTMzNi00MjZmLThhNGQtYzhjMTI1M2FkMTg4ZjFkZDI2MTQtYTcyMi00MzFiLWI3OTctNjgyNTE0NzdkNmYy",
  "SessionId": "15d51f99eeb2d22d5eab33661944c30f",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675439371233320.MWY0MjUyMDAtOTMzNi00MjZmLThhNGQtYzhjMTI1M2FkMTg4ZjFkZDI2MTQtYTcyMi00MzFiLWI3OTctNjgyNTE0NzdkNmYy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcM7s2FFJ_hhIGgs2vz7PTwC6mXjUzqIW3KUNBwosA4_wp8ciRBlEgO_33v-nDv_mA-DXzC9QLg0lS_IwwSYro6uk39PBpyg9LDjN3l6hMN_UiT_ncKt54Vp_6eiZpPvMgCO9NczCvmrQv2x67gSgDPme9g9UMGk12iBLFx6l1Gab34BZ5f4O91e-nZIuJp83TiIhHtYQhSw2p7CqORnN5cahgv2L2xX7NCY6ASPk8S8-Fto5uKEbIcCSJjca3Vsnd5uo5GwfAYpyVdKlXIQSdLNj2objefbxOnXFFvRGRn_bVMkU51DSlrzz63SIH7iIM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:52:26.632 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 14:52:26.633 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 14:52:26.633 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 14:52:26.637 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:52:26.637 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:52:26.662 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:52:26.662 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:52:26.662 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:52:26.662 -06:00 [DBG] No PKCE used.
2018-07-18 14:52:26.662 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:52:26.662 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:52:29.409 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 14:52:29.410 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:52:29.410 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:52:29.431 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:52:29.431 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:52:29.431 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:52:29.431 -06:00 [DBG] No PKCE used.
2018-07-18 14:52:29.431 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:52:29.446 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:52:29.446 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:52:29.446 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 14:52:29.446 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 14:52:29.446 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 14:52:29.447 -06:00 [DBG] Start authorize callback request
2018-07-18 14:52:29.474 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:52:29.474 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:52:29.474 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:52:29.474 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:52:29.474 -06:00 [DBG] No PKCE used.
2018-07-18 14:52:29.474 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:52:29.474 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcM7s2FFJ_hhIGgs2vz7PTwC6mXjUzqIW3KUNBwosA4_wp8ciRBlEgO_33v-nDv_mA-DXzC9QLg0lS_IwwSYro6uk39PBpyg9LDjN3l6hMN_UiT_ncKt54Vp_6eiZpPvMgCO9NczCvmrQv2x67gSgDPme9g9UMGk12iBLFx6l1Gab34BZ5f4O91e-nZIuJp83TiIhHtYQhSw2p7CqORnN5cahgv2L2xX7NCY6ASPk8S8-Fto5uKEbIcCSJjca3Vsnd5uo5GwfAYpyVdKlXIQSdLNj2objefbxOnXFFvRGRn_bVMkU51DSlrzz63SIH7iIM",
  "Nonce": "636675439371233320.MWY0MjUyMDAtOTMzNi00MjZmLThhNGQtYzhjMTI1M2FkMTg4ZjFkZDI2MTQtYTcyMi00MzFiLWI3OTctNjgyNTE0NzdkNmYy",
  "SessionId": "15d51f99eeb2d22d5eab33661944c30f",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675439371233320.MWY0MjUyMDAtOTMzNi00MjZmLThhNGQtYzhjMTI1M2FkMTg4ZjFkZDI2MTQtYTcyMi00MzFiLWI3OTctNjgyNTE0NzdkNmYy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcM7s2FFJ_hhIGgs2vz7PTwC6mXjUzqIW3KUNBwosA4_wp8ciRBlEgO_33v-nDv_mA-DXzC9QLg0lS_IwwSYro6uk39PBpyg9LDjN3l6hMN_UiT_ncKt54Vp_6eiZpPvMgCO9NczCvmrQv2x67gSgDPme9g9UMGk12iBLFx6l1Gab34BZ5f4O91e-nZIuJp83TiIhHtYQhSw2p7CqORnN5cahgv2L2xX7NCY6ASPk8S8-Fto5uKEbIcCSJjca3Vsnd5uo5GwfAYpyVdKlXIQSdLNj2objefbxOnXFFvRGRn_bVMkU51DSlrzz63SIH7iIM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:52:29.476 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 14:52:29.476 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 14:52:29.482 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-18 14:52:29.493 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:52:29.499 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 14:52:29.520 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 14:52:29.528 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 14:52:29.530 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 14:52:29.597 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****s0og"
    },
    {
      "TokenType": "code",
      "TokenValue": "****a586"
    }
  ],
  "ActivityId": "0HLFCU1B3BJ4F:00000007",
  "TimeStamp": "2018-07-18T20:52:29Z",
  "ProcessId": 3460,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:52:29.600 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcM7s2FFJ_hhIGgs2vz7PTwC6mXjUzqIW3KUNBwosA4_wp8ciRBlEgO_33v-nDv_mA-DXzC9QLg0lS_IwwSYro6uk39PBpyg9LDjN3l6hMN_UiT_ncKt54Vp_6eiZpPvMgCO9NczCvmrQv2x67gSgDPme9g9UMGk12iBLFx6l1Gab34BZ5f4O91e-nZIuJp83TiIhHtYQhSw2p7CqORnN5cahgv2L2xX7NCY6ASPk8S8-Fto5uKEbIcCSJjca3Vsnd5uo5GwfAYpyVdKlXIQSdLNj2objefbxOnXFFvRGRn_bVMkU51DSlrzz63SIH7iIM",
  "Scope": "openid profile business email"
}
2018-07-18 14:52:29.614 -06:00 [DBG] Augmenting SignInContext
2018-07-18 14:52:29.615 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 14:52:29.814 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 14:52:29.816 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 14:52:29.816 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 14:52:29.822 -06:00 [DBG] Start token request.
2018-07-18 14:52:29.826 -06:00 [DBG] Start client validation
2018-07-18 14:52:29.831 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 14:52:29.833 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 14:52:29.833 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 14:52:29.834 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 14:52:29.834 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:52:29.843 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 14:52:29.843 -06:00 [DBG] Client validation success
2018-07-18 14:52:29.846 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCU1B3BJ4D:00000003",
  "TimeStamp": "2018-07-18T20:52:29Z",
  "ProcessId": 3460,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:52:29.851 -06:00 [DBG] Start token request validation
2018-07-18 14:52:29.860 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 14:52:29.879 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 14:52:29.882 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "bbf714a3a40d9c80ccc0179dc9fe47db1a91615ea3cf240fd48761fdd07ba586",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "bbf714a3a40d9c80ccc0179dc9fe47db1a91615ea3cf240fd48761fdd07ba586",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 14:52:29.892 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:52:29.900 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 14:52:29.900 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:52:29.919 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:52:29.919 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 14:52:29.919 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 14:52:29.933 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****POgA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****NVkw"
    }
  ],
  "ActivityId": "0HLFCU1B3BJ4D:00000003",
  "TimeStamp": "2018-07-18T20:52:29Z",
  "ProcessId": 3460,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:52:29.933 -06:00 [DBG] Token request success.
2018-07-18 14:53:34.729 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 14:53:34.729 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 14:53:34.729 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 14:53:34.729 -06:00 [DBG] Start discovery request
2018-07-18 14:53:34.857 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 14:53:34.858 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 14:53:34.858 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 14:53:34.858 -06:00 [DBG] Start key discovery request
2018-07-18 14:53:34.937 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 14:53:34.937 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 14:53:34.937 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 14:53:34.937 -06:00 [DBG] Start authorize request
2018-07-18 14:53:34.938 -06:00 [DBG] No user present in authorize request
2018-07-18 14:53:34.938 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:53:34.938 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:53:34.938 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:53:34.938 -06:00 [DBG] No PKCE used.
2018-07-18 14:53:34.938 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:53:34.938 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcOrDB1MZZD9ARjjwetVj9jh9xNjVS0d0YDPUz_pH68ESkn0WyOaGUusG9qRV45eaU-qguiUUc4xFXU_iz45GMocha7pMGsAgrK37xgFDWF8Zb2ladW1PnwYGYXElghLE7Obw4CUFNDa9ebAMZF8REb0t2qLqRdUHusZe2_1_iSp3aOEkdbwhhP0H0DuO6JtSdyCMQzK3aS9wLtCgneVAum1cFbyM7fAiwuDVI4WmbaqHWuGU98vSJrosPq0o2NVNfvatRP7fmH9rRmW3lEptmPXh1p5u_I_j8ExhglA0VrX5OnflanMbx6JNNsrrwUMLM",
  "Nonce": "636675440149179080.MGZiYmQ1ZDgtZGJiZi00NTMwLTkwY2QtNTFlM2U0NTk0NGQzMWNmN2I5ZWItOTZkMy00MmE4LTlkNGQtYThhZjA0ZTdjYWJm",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675440149179080.MGZiYmQ1ZDgtZGJiZi00NTMwLTkwY2QtNTFlM2U0NTk0NGQzMWNmN2I5ZWItOTZkMy00MmE4LTlkNGQtYThhZjA0ZTdjYWJm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcOrDB1MZZD9ARjjwetVj9jh9xNjVS0d0YDPUz_pH68ESkn0WyOaGUusG9qRV45eaU-qguiUUc4xFXU_iz45GMocha7pMGsAgrK37xgFDWF8Zb2ladW1PnwYGYXElghLE7Obw4CUFNDa9ebAMZF8REb0t2qLqRdUHusZe2_1_iSp3aOEkdbwhhP0H0DuO6JtSdyCMQzK3aS9wLtCgneVAum1cFbyM7fAiwuDVI4WmbaqHWuGU98vSJrosPq0o2NVNfvatRP7fmH9rRmW3lEptmPXh1p5u_I_j8ExhglA0VrX5OnflanMbx6JNNsrrwUMLM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:53:34.938 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 14:53:34.940 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:53:34.940 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:53:34.940 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:53:34.941 -06:00 [DBG] No PKCE used.
2018-07-18 14:53:34.941 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:53:34.941 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:53:42.671 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 14:53:42.686 -06:00 [DBG] Augmenting SignInContext
2018-07-18 14:53:42.686 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 14:53:42.686 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 14:53:42.686 -06:00 [DBG] Adding auth_time claim with value: 1531947222
2018-07-18 14:53:42.687 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 14:53:42.688 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCU1B3BJ4F:0000000A",
  "TimeStamp": "2018-07-18T20:53:42Z",
  "ProcessId": 3460,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:53:42.690 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:53:42.690 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:53:42.690 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 14:53:42.690 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 14:53:42.690 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 14:53:42.690 -06:00 [DBG] Start authorize callback request
2018-07-18 14:53:42.690 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:53:42.690 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:53:42.690 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:53:42.690 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:53:42.690 -06:00 [DBG] No PKCE used.
2018-07-18 14:53:42.690 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:53:42.691 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcOrDB1MZZD9ARjjwetVj9jh9xNjVS0d0YDPUz_pH68ESkn0WyOaGUusG9qRV45eaU-qguiUUc4xFXU_iz45GMocha7pMGsAgrK37xgFDWF8Zb2ladW1PnwYGYXElghLE7Obw4CUFNDa9ebAMZF8REb0t2qLqRdUHusZe2_1_iSp3aOEkdbwhhP0H0DuO6JtSdyCMQzK3aS9wLtCgneVAum1cFbyM7fAiwuDVI4WmbaqHWuGU98vSJrosPq0o2NVNfvatRP7fmH9rRmW3lEptmPXh1p5u_I_j8ExhglA0VrX5OnflanMbx6JNNsrrwUMLM",
  "Nonce": "636675440149179080.MGZiYmQ1ZDgtZGJiZi00NTMwLTkwY2QtNTFlM2U0NTk0NGQzMWNmN2I5ZWItOTZkMy00MmE4LTlkNGQtYThhZjA0ZTdjYWJm",
  "SessionId": "8e730355bc0571f116fc1c75bbbe7932",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675440149179080.MGZiYmQ1ZDgtZGJiZi00NTMwLTkwY2QtNTFlM2U0NTk0NGQzMWNmN2I5ZWItOTZkMy00MmE4LTlkNGQtYThhZjA0ZTdjYWJm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcOrDB1MZZD9ARjjwetVj9jh9xNjVS0d0YDPUz_pH68ESkn0WyOaGUusG9qRV45eaU-qguiUUc4xFXU_iz45GMocha7pMGsAgrK37xgFDWF8Zb2ladW1PnwYGYXElghLE7Obw4CUFNDa9ebAMZF8REb0t2qLqRdUHusZe2_1_iSp3aOEkdbwhhP0H0DuO6JtSdyCMQzK3aS9wLtCgneVAum1cFbyM7fAiwuDVI4WmbaqHWuGU98vSJrosPq0o2NVNfvatRP7fmH9rRmW3lEptmPXh1p5u_I_j8ExhglA0VrX5OnflanMbx6JNNsrrwUMLM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:53:42.692 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 14:53:42.692 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 14:53:42.692 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 14:53:42.694 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:53:42.694 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:53:42.694 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:53:42.694 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:53:42.694 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:53:42.694 -06:00 [DBG] No PKCE used.
2018-07-18 14:53:42.695 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:53:42.695 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:53:44.943 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 14:53:44.943 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:53:44.943 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:53:44.943 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:53:44.944 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:53:44.944 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:53:44.944 -06:00 [DBG] No PKCE used.
2018-07-18 14:53:44.944 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:53:44.947 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:53:44.947 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:53:44.947 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 14:53:44.947 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 14:53:44.947 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 14:53:44.947 -06:00 [DBG] Start authorize callback request
2018-07-18 14:53:44.948 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:53:44.948 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:53:44.948 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:53:44.948 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:53:44.948 -06:00 [DBG] No PKCE used.
2018-07-18 14:53:44.948 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:53:44.948 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcOrDB1MZZD9ARjjwetVj9jh9xNjVS0d0YDPUz_pH68ESkn0WyOaGUusG9qRV45eaU-qguiUUc4xFXU_iz45GMocha7pMGsAgrK37xgFDWF8Zb2ladW1PnwYGYXElghLE7Obw4CUFNDa9ebAMZF8REb0t2qLqRdUHusZe2_1_iSp3aOEkdbwhhP0H0DuO6JtSdyCMQzK3aS9wLtCgneVAum1cFbyM7fAiwuDVI4WmbaqHWuGU98vSJrosPq0o2NVNfvatRP7fmH9rRmW3lEptmPXh1p5u_I_j8ExhglA0VrX5OnflanMbx6JNNsrrwUMLM",
  "Nonce": "636675440149179080.MGZiYmQ1ZDgtZGJiZi00NTMwLTkwY2QtNTFlM2U0NTk0NGQzMWNmN2I5ZWItOTZkMy00MmE4LTlkNGQtYThhZjA0ZTdjYWJm",
  "SessionId": "8e730355bc0571f116fc1c75bbbe7932",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675440149179080.MGZiYmQ1ZDgtZGJiZi00NTMwLTkwY2QtNTFlM2U0NTk0NGQzMWNmN2I5ZWItOTZkMy00MmE4LTlkNGQtYThhZjA0ZTdjYWJm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcOrDB1MZZD9ARjjwetVj9jh9xNjVS0d0YDPUz_pH68ESkn0WyOaGUusG9qRV45eaU-qguiUUc4xFXU_iz45GMocha7pMGsAgrK37xgFDWF8Zb2ladW1PnwYGYXElghLE7Obw4CUFNDa9ebAMZF8REb0t2qLqRdUHusZe2_1_iSp3aOEkdbwhhP0H0DuO6JtSdyCMQzK3aS9wLtCgneVAum1cFbyM7fAiwuDVI4WmbaqHWuGU98vSJrosPq0o2NVNfvatRP7fmH9rRmW3lEptmPXh1p5u_I_j8ExhglA0VrX5OnflanMbx6JNNsrrwUMLM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:53:44.949 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 14:53:44.949 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 14:53:44.949 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-18 14:53:44.949 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:53:44.949 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 14:53:44.954 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 14:53:44.954 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 14:53:44.954 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 14:53:44.966 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****wRCQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****c2c6"
    }
  ],
  "ActivityId": "0HLFCU1B3BJ4F:0000000E",
  "TimeStamp": "2018-07-18T20:53:44Z",
  "ProcessId": 3460,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:53:44.966 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcOrDB1MZZD9ARjjwetVj9jh9xNjVS0d0YDPUz_pH68ESkn0WyOaGUusG9qRV45eaU-qguiUUc4xFXU_iz45GMocha7pMGsAgrK37xgFDWF8Zb2ladW1PnwYGYXElghLE7Obw4CUFNDa9ebAMZF8REb0t2qLqRdUHusZe2_1_iSp3aOEkdbwhhP0H0DuO6JtSdyCMQzK3aS9wLtCgneVAum1cFbyM7fAiwuDVI4WmbaqHWuGU98vSJrosPq0o2NVNfvatRP7fmH9rRmW3lEptmPXh1p5u_I_j8ExhglA0VrX5OnflanMbx6JNNsrrwUMLM",
  "Scope": "openid profile business email"
}
2018-07-18 14:53:44.966 -06:00 [DBG] Augmenting SignInContext
2018-07-18 14:53:44.966 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 14:53:45.098 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 14:53:45.098 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 14:53:45.098 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 14:53:45.098 -06:00 [DBG] Start token request.
2018-07-18 14:53:45.098 -06:00 [DBG] Start client validation
2018-07-18 14:53:45.098 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 14:53:45.098 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 14:53:45.098 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 14:53:45.098 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 14:53:45.098 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:53:45.099 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 14:53:45.099 -06:00 [DBG] Client validation success
2018-07-18 14:53:45.099 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCU1B3BJ4G:00000003",
  "TimeStamp": "2018-07-18T20:53:45Z",
  "ProcessId": 3460,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:53:45.099 -06:00 [DBG] Start token request validation
2018-07-18 14:53:45.099 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 14:53:45.107 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 14:53:45.108 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "85430708f7b80e3048e9710f748f59e148d8c79ff3e8e5f29a62d38685b6c2c6",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "85430708f7b80e3048e9710f748f59e148d8c79ff3e8e5f29a62d38685b6c2c6",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 14:53:45.108 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:53:45.108 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 14:53:45.108 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:53:45.121 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:53:45.122 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 14:53:45.122 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 14:53:45.134 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****8F4A"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****CmoA"
    }
  ],
  "ActivityId": "0HLFCU1B3BJ4G:00000003",
  "TimeStamp": "2018-07-18T20:53:45Z",
  "ProcessId": 3460,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:53:45.134 -06:00 [DBG] Token request success.
2018-07-18 14:53:45.144 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 14:53:45.145 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 14:53:45.145 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 14:53:45.151 -06:00 [DBG] Start userinfo request
2018-07-18 14:53:45.156 -06:00 [DBG] Bearer token found in header
2018-07-18 14:53:45.257 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:53:45.259 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:53:45.261 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 14:53:45.264 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531947225,
    "exp": 1531950825,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1531947222,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-18 14:53:45.268 -06:00 [DBG] Creating userinfo response
2018-07-18 14:53:45.271 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 14:53:45.273 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 14:53:45.275 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-18 14:53:45.275 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 14:53:45.277 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-18 14:53:45.277 -06:00 [DBG] End userinfo request
2018-07-18 14:58:05.390 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-18 14:58:05.420 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-18 14:58:05.423 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-18 14:58:05.423 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-18 14:58:05.423 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-18 14:58:05.423 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-18 14:58:19.816 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 14:58:19.930 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 14:58:19.930 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 14:58:19.933 -06:00 [DBG] Start authorize request
2018-07-18 14:58:19.948 -06:00 [DBG] No user present in authorize request
2018-07-18 14:58:19.952 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:58:19.961 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:58:19.965 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:58:19.966 -06:00 [DBG] No PKCE used.
2018-07-18 14:58:19.996 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:58:20.050 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfoVtCSANOOahXKZG4-NOHckEyMn8CvP4616DqjEp9X1ab1YdsU08iAHVl2hBSVNK6ynY5aQ0CjGVD6jLBEMBJqhoqZZppLiZ5hCBo9usycwvh0xJSh75Gmn3Xra5ydaztSp2Tg4vGrXipuopXh4pCbfgUz1PlMNbPRKuHgnoZGezTGc-KBwhUtOugLbYrAMfqA3gAxYx324xaU5ud9GqfcIhanWHA4WGr9Fr8K0fNpxXMfqALdZhCOOz-Zo3ryNHVaUzpVVDjCZIShOi8zEZLoUpfESZnVyZpCj9zQpL4UKOidOfEnLZDqO3bHegZLh-0",
  "Nonce": "636675442995927500.MzEyMGNhMTUtZjVlOS00OTI3LWE3NDItMmIwY2JhMjVjNTVlYjkwNjFmNDktNWJkNi00ODk5LTkxMGYtZDc0ZTZhYmYyMDIz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675442995927500.MzEyMGNhMTUtZjVlOS00OTI3LWE3NDItMmIwY2JhMjVjNTVlYjkwNjFmNDktNWJkNi00ODk5LTkxMGYtZDc0ZTZhYmYyMDIz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfoVtCSANOOahXKZG4-NOHckEyMn8CvP4616DqjEp9X1ab1YdsU08iAHVl2hBSVNK6ynY5aQ0CjGVD6jLBEMBJqhoqZZppLiZ5hCBo9usycwvh0xJSh75Gmn3Xra5ydaztSp2Tg4vGrXipuopXh4pCbfgUz1PlMNbPRKuHgnoZGezTGc-KBwhUtOugLbYrAMfqA3gAxYx324xaU5ud9GqfcIhanWHA4WGr9Fr8K0fNpxXMfqALdZhCOOz-Zo3ryNHVaUzpVVDjCZIShOi8zEZLoUpfESZnVyZpCj9zQpL4UKOidOfEnLZDqO3bHegZLh-0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:58:20.056 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 14:58:20.395 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:58:20.396 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:58:20.396 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:58:20.396 -06:00 [DBG] No PKCE used.
2018-07-18 14:58:20.396 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:58:20.398 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:58:32.370 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 14:58:33.519 -06:00 [DBG] Augmenting SignInContext
2018-07-18 14:58:33.521 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 14:58:33.521 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 14:58:33.521 -06:00 [DBG] Adding auth_time claim with value: 1531947513
2018-07-18 14:58:33.549 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 14:58:33.576 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCU4OFVKUR:00000003",
  "TimeStamp": "2018-07-18T20:58:33Z",
  "ProcessId": 3570,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:58:33.596 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:58:33.597 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:58:33.597 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 14:58:33.597 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 14:58:33.597 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 14:58:33.601 -06:00 [DBG] Start authorize callback request
2018-07-18 14:58:33.604 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:58:33.604 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:58:33.604 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:58:33.604 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:58:33.605 -06:00 [DBG] No PKCE used.
2018-07-18 14:58:33.605 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:58:33.605 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfoVtCSANOOahXKZG4-NOHckEyMn8CvP4616DqjEp9X1ab1YdsU08iAHVl2hBSVNK6ynY5aQ0CjGVD6jLBEMBJqhoqZZppLiZ5hCBo9usycwvh0xJSh75Gmn3Xra5ydaztSp2Tg4vGrXipuopXh4pCbfgUz1PlMNbPRKuHgnoZGezTGc-KBwhUtOugLbYrAMfqA3gAxYx324xaU5ud9GqfcIhanWHA4WGr9Fr8K0fNpxXMfqALdZhCOOz-Zo3ryNHVaUzpVVDjCZIShOi8zEZLoUpfESZnVyZpCj9zQpL4UKOidOfEnLZDqO3bHegZLh-0",
  "Nonce": "636675442995927500.MzEyMGNhMTUtZjVlOS00OTI3LWE3NDItMmIwY2JhMjVjNTVlYjkwNjFmNDktNWJkNi00ODk5LTkxMGYtZDc0ZTZhYmYyMDIz",
  "SessionId": "64e5f423c6c4674cb91bb32de8a562a9",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675442995927500.MzEyMGNhMTUtZjVlOS00OTI3LWE3NDItMmIwY2JhMjVjNTVlYjkwNjFmNDktNWJkNi00ODk5LTkxMGYtZDc0ZTZhYmYyMDIz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfoVtCSANOOahXKZG4-NOHckEyMn8CvP4616DqjEp9X1ab1YdsU08iAHVl2hBSVNK6ynY5aQ0CjGVD6jLBEMBJqhoqZZppLiZ5hCBo9usycwvh0xJSh75Gmn3Xra5ydaztSp2Tg4vGrXipuopXh4pCbfgUz1PlMNbPRKuHgnoZGezTGc-KBwhUtOugLbYrAMfqA3gAxYx324xaU5ud9GqfcIhanWHA4WGr9Fr8K0fNpxXMfqALdZhCOOz-Zo3ryNHVaUzpVVDjCZIShOi8zEZLoUpfESZnVyZpCj9zQpL4UKOidOfEnLZDqO3bHegZLh-0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:58:33.641 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 14:58:33.642 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 14:58:33.642 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 14:58:33.646 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:58:33.646 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:58:33.671 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:58:33.671 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:58:33.671 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:58:33.671 -06:00 [DBG] No PKCE used.
2018-07-18 14:58:33.671 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:58:33.671 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:58:37.054 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 14:58:37.054 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:58:37.054 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:58:37.076 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:58:37.076 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:58:37.076 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:58:37.076 -06:00 [DBG] No PKCE used.
2018-07-18 14:58:37.076 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:58:37.094 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:58:37.095 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 14:58:37.095 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 14:58:37.095 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 14:58:37.095 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 14:58:37.095 -06:00 [DBG] Start authorize callback request
2018-07-18 14:58:37.121 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:58:37.121 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 14:58:37.121 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:58:37.121 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 14:58:37.121 -06:00 [DBG] No PKCE used.
2018-07-18 14:58:37.121 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 14:58:37.121 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfoVtCSANOOahXKZG4-NOHckEyMn8CvP4616DqjEp9X1ab1YdsU08iAHVl2hBSVNK6ynY5aQ0CjGVD6jLBEMBJqhoqZZppLiZ5hCBo9usycwvh0xJSh75Gmn3Xra5ydaztSp2Tg4vGrXipuopXh4pCbfgUz1PlMNbPRKuHgnoZGezTGc-KBwhUtOugLbYrAMfqA3gAxYx324xaU5ud9GqfcIhanWHA4WGr9Fr8K0fNpxXMfqALdZhCOOz-Zo3ryNHVaUzpVVDjCZIShOi8zEZLoUpfESZnVyZpCj9zQpL4UKOidOfEnLZDqO3bHegZLh-0",
  "Nonce": "636675442995927500.MzEyMGNhMTUtZjVlOS00OTI3LWE3NDItMmIwY2JhMjVjNTVlYjkwNjFmNDktNWJkNi00ODk5LTkxMGYtZDc0ZTZhYmYyMDIz",
  "SessionId": "64e5f423c6c4674cb91bb32de8a562a9",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675442995927500.MzEyMGNhMTUtZjVlOS00OTI3LWE3NDItMmIwY2JhMjVjNTVlYjkwNjFmNDktNWJkNi00ODk5LTkxMGYtZDc0ZTZhYmYyMDIz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfoVtCSANOOahXKZG4-NOHckEyMn8CvP4616DqjEp9X1ab1YdsU08iAHVl2hBSVNK6ynY5aQ0CjGVD6jLBEMBJqhoqZZppLiZ5hCBo9usycwvh0xJSh75Gmn3Xra5ydaztSp2Tg4vGrXipuopXh4pCbfgUz1PlMNbPRKuHgnoZGezTGc-KBwhUtOugLbYrAMfqA3gAxYx324xaU5ud9GqfcIhanWHA4WGr9Fr8K0fNpxXMfqALdZhCOOz-Zo3ryNHVaUzpVVDjCZIShOi8zEZLoUpfESZnVyZpCj9zQpL4UKOidOfEnLZDqO3bHegZLh-0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 14:58:37.123 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 14:58:37.123 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 14:58:37.129 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-18 14:58:37.139 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:58:37.146 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 14:58:37.165 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 14:58:37.173 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 14:58:37.252 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****6zyg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****6f30"
    }
  ],
  "ActivityId": "0HLFCU4OFVKUR:00000008",
  "TimeStamp": "2018-07-18T20:58:37Z",
  "ProcessId": 3570,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:58:37.254 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfoVtCSANOOahXKZG4-NOHckEyMn8CvP4616DqjEp9X1ab1YdsU08iAHVl2hBSVNK6ynY5aQ0CjGVD6jLBEMBJqhoqZZppLiZ5hCBo9usycwvh0xJSh75Gmn3Xra5ydaztSp2Tg4vGrXipuopXh4pCbfgUz1PlMNbPRKuHgnoZGezTGc-KBwhUtOugLbYrAMfqA3gAxYx324xaU5ud9GqfcIhanWHA4WGr9Fr8K0fNpxXMfqALdZhCOOz-Zo3ryNHVaUzpVVDjCZIShOi8zEZLoUpfESZnVyZpCj9zQpL4UKOidOfEnLZDqO3bHegZLh-0",
  "Scope": "openid profile business email"
}
2018-07-18 14:58:37.268 -06:00 [DBG] Augmenting SignInContext
2018-07-18 14:58:37.269 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 14:58:37.516 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 14:58:37.518 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 14:58:37.518 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 14:58:37.524 -06:00 [DBG] Start token request.
2018-07-18 14:58:37.529 -06:00 [DBG] Start client validation
2018-07-18 14:58:37.533 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 14:58:37.535 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 14:58:37.535 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 14:58:37.535 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 14:58:37.535 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:58:37.542 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 14:58:37.542 -06:00 [DBG] Client validation success
2018-07-18 14:58:37.544 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCU4OFVKUS:00000001",
  "TimeStamp": "2018-07-18T20:58:37Z",
  "ProcessId": 3570,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:58:37.549 -06:00 [DBG] Start token request validation
2018-07-18 14:58:37.557 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 14:58:37.575 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 14:58:37.578 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "7d39450eae550b327bbfb870611319884f13960fbbe11d4460d4ff6b464d6f30",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "7d39450eae550b327bbfb870611319884f13960fbbe11d4460d4ff6b464d6f30",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 14:58:37.588 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:58:37.596 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 14:58:37.596 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 14:58:37.610 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:58:37.610 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 14:58:37.625 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****7Xsw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****QA8w"
    }
  ],
  "ActivityId": "0HLFCU4OFVKUS:00000001",
  "TimeStamp": "2018-07-18T20:58:37Z",
  "ProcessId": 3570,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 14:58:37.626 -06:00 [DBG] Token request success.
2018-07-18 14:58:37.638 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 14:58:37.639 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 14:58:37.639 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 14:58:37.644 -06:00 [DBG] Start userinfo request
2018-07-18 14:58:37.647 -06:00 [DBG] Bearer token found in header
2018-07-18 14:58:37.708 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:58:37.710 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 14:58:37.712 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 14:58:37.715 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531947517,
    "exp": 1531951117,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1531947513,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-18 14:58:37.719 -06:00 [DBG] Creating userinfo response
2018-07-18 14:58:37.722 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 14:58:37.724 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 14:58:37.726 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-18 14:58:37.726 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 14:58:37.727 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-18 14:58:37.727 -06:00 [DBG] End userinfo request
2018-07-18 15:02:03.212 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 15:02:03.212 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 15:02:03.212 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 15:02:03.215 -06:00 [DBG] Start discovery request
2018-07-18 15:02:03.349 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 15:02:03.350 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 15:02:03.350 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 15:02:03.352 -06:00 [DBG] Start key discovery request
2018-07-18 15:02:03.425 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 15:02:03.425 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 15:02:03.426 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 15:02:03.426 -06:00 [DBG] Start authorize request
2018-07-18 15:02:03.426 -06:00 [DBG] No user present in authorize request
2018-07-18 15:02:03.426 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:02:03.426 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:02:03.426 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:02:03.426 -06:00 [DBG] No PKCE used.
2018-07-18 15:02:03.426 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:02:03.426 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd1sMrBtPQYE1yekvbz8V5LwAK3oCkotiKZ-PQdTBsh1dBExAthDpRHXCIBIkYZFOwppARjpNLL9J5H1MWzvPw_RlQ74VxRDyT_WZe1ayr6wUq5YCPVwNolWO3UUp8iUpCR2kiQr2OtUyinE4v3PAOPINhd-6qjB4IBPpqYfjxeJz99B3eoVrlpKX2krgbw80O1C3QX9IfaSGaT3mH5RgooGFwpitz6iayWGYDBSHZTZuYdm4BwMG1TrOe65cpsLkqBDByZhvukEL-IIomanYYtp8OvE6Q--8pLqM_U86auUXQAxqfka-QR_FzMMX0n9-0",
  "Nonce": "636675445234060360.YjkyOGZhMjUtNmVlZC00NjhlLTk1ZTAtNGVlZGVlMjhmZWMwOWQwMGZhODgtODMxNS00OTUyLWFjZWQtNDYzOWVmZWY0MjY3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675445234060360.YjkyOGZhMjUtNmVlZC00NjhlLTk1ZTAtNGVlZGVlMjhmZWMwOWQwMGZhODgtODMxNS00OTUyLWFjZWQtNDYzOWVmZWY0MjY3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd1sMrBtPQYE1yekvbz8V5LwAK3oCkotiKZ-PQdTBsh1dBExAthDpRHXCIBIkYZFOwppARjpNLL9J5H1MWzvPw_RlQ74VxRDyT_WZe1ayr6wUq5YCPVwNolWO3UUp8iUpCR2kiQr2OtUyinE4v3PAOPINhd-6qjB4IBPpqYfjxeJz99B3eoVrlpKX2krgbw80O1C3QX9IfaSGaT3mH5RgooGFwpitz6iayWGYDBSHZTZuYdm4BwMG1TrOe65cpsLkqBDByZhvukEL-IIomanYYtp8OvE6Q--8pLqM_U86auUXQAxqfka-QR_FzMMX0n9-0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 15:02:03.426 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 15:02:03.430 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:02:03.430 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:02:03.430 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:02:03.430 -06:00 [DBG] No PKCE used.
2018-07-18 15:02:03.430 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:02:03.431 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:02:10.494 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 15:02:10.509 -06:00 [DBG] Augmenting SignInContext
2018-07-18 15:02:10.509 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 15:02:10.509 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 15:02:10.509 -06:00 [DBG] Adding auth_time claim with value: 1531947730
2018-07-18 15:02:10.509 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 15:02:10.510 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCU4OFVKUU:00000003",
  "TimeStamp": "2018-07-18T21:02:10Z",
  "ProcessId": 3570,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:02:10.512 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:02:10.512 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:02:10.512 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 15:02:10.512 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 15:02:10.512 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 15:02:10.512 -06:00 [DBG] Start authorize callback request
2018-07-18 15:02:10.512 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:02:10.512 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:02:10.512 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:02:10.512 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:02:10.513 -06:00 [DBG] No PKCE used.
2018-07-18 15:02:10.513 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:02:10.513 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd1sMrBtPQYE1yekvbz8V5LwAK3oCkotiKZ-PQdTBsh1dBExAthDpRHXCIBIkYZFOwppARjpNLL9J5H1MWzvPw_RlQ74VxRDyT_WZe1ayr6wUq5YCPVwNolWO3UUp8iUpCR2kiQr2OtUyinE4v3PAOPINhd-6qjB4IBPpqYfjxeJz99B3eoVrlpKX2krgbw80O1C3QX9IfaSGaT3mH5RgooGFwpitz6iayWGYDBSHZTZuYdm4BwMG1TrOe65cpsLkqBDByZhvukEL-IIomanYYtp8OvE6Q--8pLqM_U86auUXQAxqfka-QR_FzMMX0n9-0",
  "Nonce": "636675445234060360.YjkyOGZhMjUtNmVlZC00NjhlLTk1ZTAtNGVlZGVlMjhmZWMwOWQwMGZhODgtODMxNS00OTUyLWFjZWQtNDYzOWVmZWY0MjY3",
  "SessionId": "b3c58e4ea000877d44e9ef5cb6c351e1",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675445234060360.YjkyOGZhMjUtNmVlZC00NjhlLTk1ZTAtNGVlZGVlMjhmZWMwOWQwMGZhODgtODMxNS00OTUyLWFjZWQtNDYzOWVmZWY0MjY3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd1sMrBtPQYE1yekvbz8V5LwAK3oCkotiKZ-PQdTBsh1dBExAthDpRHXCIBIkYZFOwppARjpNLL9J5H1MWzvPw_RlQ74VxRDyT_WZe1ayr6wUq5YCPVwNolWO3UUp8iUpCR2kiQr2OtUyinE4v3PAOPINhd-6qjB4IBPpqYfjxeJz99B3eoVrlpKX2krgbw80O1C3QX9IfaSGaT3mH5RgooGFwpitz6iayWGYDBSHZTZuYdm4BwMG1TrOe65cpsLkqBDByZhvukEL-IIomanYYtp8OvE6Q--8pLqM_U86auUXQAxqfka-QR_FzMMX0n9-0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 15:02:10.514 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 15:02:10.514 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 15:02:10.514 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 15:02:10.517 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:02:10.517 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:02:10.517 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:02:10.517 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:02:10.517 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:02:10.517 -06:00 [DBG] No PKCE used.
2018-07-18 15:02:10.517 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:02:10.517 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:02:12.799 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 15:02:12.799 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:02:12.799 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:02:12.800 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:02:12.800 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:02:12.800 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:02:12.800 -06:00 [DBG] No PKCE used.
2018-07-18 15:02:12.800 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:02:12.803 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:02:12.803 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:02:12.804 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 15:02:12.804 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 15:02:12.804 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 15:02:12.804 -06:00 [DBG] Start authorize callback request
2018-07-18 15:02:12.804 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:02:12.804 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:02:12.804 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:02:12.804 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:02:12.804 -06:00 [DBG] No PKCE used.
2018-07-18 15:02:12.804 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:02:12.804 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd1sMrBtPQYE1yekvbz8V5LwAK3oCkotiKZ-PQdTBsh1dBExAthDpRHXCIBIkYZFOwppARjpNLL9J5H1MWzvPw_RlQ74VxRDyT_WZe1ayr6wUq5YCPVwNolWO3UUp8iUpCR2kiQr2OtUyinE4v3PAOPINhd-6qjB4IBPpqYfjxeJz99B3eoVrlpKX2krgbw80O1C3QX9IfaSGaT3mH5RgooGFwpitz6iayWGYDBSHZTZuYdm4BwMG1TrOe65cpsLkqBDByZhvukEL-IIomanYYtp8OvE6Q--8pLqM_U86auUXQAxqfka-QR_FzMMX0n9-0",
  "Nonce": "636675445234060360.YjkyOGZhMjUtNmVlZC00NjhlLTk1ZTAtNGVlZGVlMjhmZWMwOWQwMGZhODgtODMxNS00OTUyLWFjZWQtNDYzOWVmZWY0MjY3",
  "SessionId": "b3c58e4ea000877d44e9ef5cb6c351e1",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675445234060360.YjkyOGZhMjUtNmVlZC00NjhlLTk1ZTAtNGVlZGVlMjhmZWMwOWQwMGZhODgtODMxNS00OTUyLWFjZWQtNDYzOWVmZWY0MjY3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd1sMrBtPQYE1yekvbz8V5LwAK3oCkotiKZ-PQdTBsh1dBExAthDpRHXCIBIkYZFOwppARjpNLL9J5H1MWzvPw_RlQ74VxRDyT_WZe1ayr6wUq5YCPVwNolWO3UUp8iUpCR2kiQr2OtUyinE4v3PAOPINhd-6qjB4IBPpqYfjxeJz99B3eoVrlpKX2krgbw80O1C3QX9IfaSGaT3mH5RgooGFwpitz6iayWGYDBSHZTZuYdm4BwMG1TrOe65cpsLkqBDByZhvukEL-IIomanYYtp8OvE6Q--8pLqM_U86auUXQAxqfka-QR_FzMMX0n9-0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 15:02:12.806 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 15:02:12.806 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 15:02:12.806 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-18 15:02:12.806 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:02:12.806 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 15:02:12.810 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 15:02:12.810 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 15:02:12.823 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****9r5w"
    },
    {
      "TokenType": "code",
      "TokenValue": "****cae8"
    }
  ],
  "ActivityId": "0HLFCU4OFVKUU:00000007",
  "TimeStamp": "2018-07-18T21:02:12Z",
  "ProcessId": 3570,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:02:12.823 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd1sMrBtPQYE1yekvbz8V5LwAK3oCkotiKZ-PQdTBsh1dBExAthDpRHXCIBIkYZFOwppARjpNLL9J5H1MWzvPw_RlQ74VxRDyT_WZe1ayr6wUq5YCPVwNolWO3UUp8iUpCR2kiQr2OtUyinE4v3PAOPINhd-6qjB4IBPpqYfjxeJz99B3eoVrlpKX2krgbw80O1C3QX9IfaSGaT3mH5RgooGFwpitz6iayWGYDBSHZTZuYdm4BwMG1TrOe65cpsLkqBDByZhvukEL-IIomanYYtp8OvE6Q--8pLqM_U86auUXQAxqfka-QR_FzMMX0n9-0",
  "Scope": "openid profile business email"
}
2018-07-18 15:02:12.823 -06:00 [DBG] Augmenting SignInContext
2018-07-18 15:02:12.824 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 15:02:13.117 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 15:02:13.117 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 15:02:13.118 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 15:02:13.118 -06:00 [DBG] Start token request.
2018-07-18 15:02:13.118 -06:00 [DBG] Start client validation
2018-07-18 15:02:13.118 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 15:02:13.118 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 15:02:13.118 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 15:02:13.118 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 15:02:13.118 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:02:13.118 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 15:02:13.118 -06:00 [DBG] Client validation success
2018-07-18 15:02:13.118 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCU4OFVKUT:00000003",
  "TimeStamp": "2018-07-18T21:02:13Z",
  "ProcessId": 3570,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:02:13.118 -06:00 [DBG] Start token request validation
2018-07-18 15:02:13.118 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 15:02:13.125 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 15:02:13.126 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "bd0357d6f488e73dc18d437a7cdb91d3b970394359d82dd2e84237d1c010cae8",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "bd0357d6f488e73dc18d437a7cdb91d3b970394359d82dd2e84237d1c010cae8",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 15:02:13.126 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:02:13.126 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 15:02:13.126 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:02:13.139 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:02:13.139 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 15:02:13.152 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****-x6Q"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****4hUA"
    }
  ],
  "ActivityId": "0HLFCU4OFVKUT:00000003",
  "TimeStamp": "2018-07-18T21:02:13Z",
  "ProcessId": 3570,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:02:13.152 -06:00 [DBG] Token request success.
2018-07-18 15:05:51.153 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-18 15:05:51.187 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-18 15:05:51.191 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-18 15:05:51.191 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-18 15:05:51.191 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-18 15:05:51.191 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-18 15:06:08.714 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 15:06:08.828 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 15:06:08.828 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 15:06:08.831 -06:00 [DBG] Start discovery request
2018-07-18 15:06:09.042 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 15:06:09.043 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 15:06:09.043 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 15:06:09.047 -06:00 [DBG] Start key discovery request
2018-07-18 15:06:09.146 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 15:06:09.149 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 15:06:09.149 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 15:06:09.152 -06:00 [DBG] Start authorize request
2018-07-18 15:06:09.167 -06:00 [DBG] No user present in authorize request
2018-07-18 15:06:09.170 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:06:09.180 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:06:09.184 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:06:09.185 -06:00 [DBG] No PKCE used.
2018-07-18 15:06:09.209 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:06:09.217 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc7lUhrnDe5N-smo2vanLfmduqjw0v0YaDvjGv0Rq2YhfH9X_h4St2TGZsOrh527AQe7AkcRfB35NW2ODFoEOT38myHBV7zfeoyBKXIeB7LOG9E1iegR0NuY0I60w5quqq6ancasabacOi5KVp-hF4Y85A-07m3PiAJSg4bgM56ZOOeC43jtqghlcND9JYiM1QJcc3A5r97GD0wQ50mLAGK91LAwlCCiMSXkW6U1sf2YLHJQTLzRKTbhJGRWsOqjTCQZwq2GD1aG6X3fUiWx3EAvTnl25lM2SPRELJoAdWQL0qjvqTYxrAP0DkDDZDVl70",
  "Nonce": "636675447691194730.NGM0ODFlZGUtNDMwMy00MzUzLWEyNzgtYTFlZGJmN2UyNmE0OGZmN2U5YTktZjI5Yy00YWJiLTk5MjItMTI5NmY4OGNiYTUw",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675447691194730.NGM0ODFlZGUtNDMwMy00MzUzLWEyNzgtYTFlZGJmN2UyNmE0OGZmN2U5YTktZjI5Yy00YWJiLTk5MjItMTI5NmY4OGNiYTUw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc7lUhrnDe5N-smo2vanLfmduqjw0v0YaDvjGv0Rq2YhfH9X_h4St2TGZsOrh527AQe7AkcRfB35NW2ODFoEOT38myHBV7zfeoyBKXIeB7LOG9E1iegR0NuY0I60w5quqq6ancasabacOi5KVp-hF4Y85A-07m3PiAJSg4bgM56ZOOeC43jtqghlcND9JYiM1QJcc3A5r97GD0wQ50mLAGK91LAwlCCiMSXkW6U1sf2YLHJQTLzRKTbhJGRWsOqjTCQZwq2GD1aG6X3fUiWx3EAvTnl25lM2SPRELJoAdWQL0qjvqTYxrAP0DkDDZDVl70",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 15:06:09.223 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 15:06:09.518 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:06:09.519 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:06:09.519 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:06:09.519 -06:00 [DBG] No PKCE used.
2018-07-18 15:06:09.519 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:06:09.521 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:06:20.254 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 15:06:21.405 -06:00 [DBG] Augmenting SignInContext
2018-07-18 15:06:21.407 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 15:06:21.407 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 15:06:21.407 -06:00 [DBG] Adding auth_time claim with value: 1531947981
2018-07-18 15:06:21.435 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 15:06:21.463 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCU947OP94:00000003",
  "TimeStamp": "2018-07-18T21:06:21Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:06:21.483 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:06:21.483 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:06:21.483 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 15:06:21.484 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 15:06:21.484 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 15:06:21.488 -06:00 [DBG] Start authorize callback request
2018-07-18 15:06:21.490 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:06:21.490 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:06:21.490 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:06:21.490 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:06:21.490 -06:00 [DBG] No PKCE used.
2018-07-18 15:06:21.491 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:06:21.491 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc7lUhrnDe5N-smo2vanLfmduqjw0v0YaDvjGv0Rq2YhfH9X_h4St2TGZsOrh527AQe7AkcRfB35NW2ODFoEOT38myHBV7zfeoyBKXIeB7LOG9E1iegR0NuY0I60w5quqq6ancasabacOi5KVp-hF4Y85A-07m3PiAJSg4bgM56ZOOeC43jtqghlcND9JYiM1QJcc3A5r97GD0wQ50mLAGK91LAwlCCiMSXkW6U1sf2YLHJQTLzRKTbhJGRWsOqjTCQZwq2GD1aG6X3fUiWx3EAvTnl25lM2SPRELJoAdWQL0qjvqTYxrAP0DkDDZDVl70",
  "Nonce": "636675447691194730.NGM0ODFlZGUtNDMwMy00MzUzLWEyNzgtYTFlZGJmN2UyNmE0OGZmN2U5YTktZjI5Yy00YWJiLTk5MjItMTI5NmY4OGNiYTUw",
  "SessionId": "f2943554d201fd7f573ad6d2c5e4b482",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675447691194730.NGM0ODFlZGUtNDMwMy00MzUzLWEyNzgtYTFlZGJmN2UyNmE0OGZmN2U5YTktZjI5Yy00YWJiLTk5MjItMTI5NmY4OGNiYTUw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc7lUhrnDe5N-smo2vanLfmduqjw0v0YaDvjGv0Rq2YhfH9X_h4St2TGZsOrh527AQe7AkcRfB35NW2ODFoEOT38myHBV7zfeoyBKXIeB7LOG9E1iegR0NuY0I60w5quqq6ancasabacOi5KVp-hF4Y85A-07m3PiAJSg4bgM56ZOOeC43jtqghlcND9JYiM1QJcc3A5r97GD0wQ50mLAGK91LAwlCCiMSXkW6U1sf2YLHJQTLzRKTbhJGRWsOqjTCQZwq2GD1aG6X3fUiWx3EAvTnl25lM2SPRELJoAdWQL0qjvqTYxrAP0DkDDZDVl70",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 15:06:21.528 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 15:06:21.529 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 15:06:21.529 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 15:06:21.532 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:06:21.532 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:06:21.557 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:06:21.557 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:06:21.557 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:06:21.557 -06:00 [DBG] No PKCE used.
2018-07-18 15:06:21.557 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:06:21.557 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:06:23.870 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 15:06:23.870 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:06:23.870 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:06:23.891 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:06:23.892 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:06:23.892 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:06:23.892 -06:00 [DBG] No PKCE used.
2018-07-18 15:06:23.892 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:06:23.907 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:06:23.907 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:06:23.907 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 15:06:23.907 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 15:06:23.907 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 15:06:23.907 -06:00 [DBG] Start authorize callback request
2018-07-18 15:06:23.934 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:06:23.934 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:06:23.934 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:06:23.934 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:06:23.934 -06:00 [DBG] No PKCE used.
2018-07-18 15:06:23.934 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:06:23.934 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc7lUhrnDe5N-smo2vanLfmduqjw0v0YaDvjGv0Rq2YhfH9X_h4St2TGZsOrh527AQe7AkcRfB35NW2ODFoEOT38myHBV7zfeoyBKXIeB7LOG9E1iegR0NuY0I60w5quqq6ancasabacOi5KVp-hF4Y85A-07m3PiAJSg4bgM56ZOOeC43jtqghlcND9JYiM1QJcc3A5r97GD0wQ50mLAGK91LAwlCCiMSXkW6U1sf2YLHJQTLzRKTbhJGRWsOqjTCQZwq2GD1aG6X3fUiWx3EAvTnl25lM2SPRELJoAdWQL0qjvqTYxrAP0DkDDZDVl70",
  "Nonce": "636675447691194730.NGM0ODFlZGUtNDMwMy00MzUzLWEyNzgtYTFlZGJmN2UyNmE0OGZmN2U5YTktZjI5Yy00YWJiLTk5MjItMTI5NmY4OGNiYTUw",
  "SessionId": "f2943554d201fd7f573ad6d2c5e4b482",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675447691194730.NGM0ODFlZGUtNDMwMy00MzUzLWEyNzgtYTFlZGJmN2UyNmE0OGZmN2U5YTktZjI5Yy00YWJiLTk5MjItMTI5NmY4OGNiYTUw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc7lUhrnDe5N-smo2vanLfmduqjw0v0YaDvjGv0Rq2YhfH9X_h4St2TGZsOrh527AQe7AkcRfB35NW2ODFoEOT38myHBV7zfeoyBKXIeB7LOG9E1iegR0NuY0I60w5quqq6ancasabacOi5KVp-hF4Y85A-07m3PiAJSg4bgM56ZOOeC43jtqghlcND9JYiM1QJcc3A5r97GD0wQ50mLAGK91LAwlCCiMSXkW6U1sf2YLHJQTLzRKTbhJGRWsOqjTCQZwq2GD1aG6X3fUiWx3EAvTnl25lM2SPRELJoAdWQL0qjvqTYxrAP0DkDDZDVl70",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 15:06:23.936 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 15:06:23.936 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 15:06:23.941 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-18 15:06:23.952 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:06:23.958 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 15:06:23.978 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 15:06:23.985 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 15:06:23.987 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 15:06:24.055 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****zacw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****349a"
    }
  ],
  "ActivityId": "0HLFCU947OP94:00000007",
  "TimeStamp": "2018-07-18T21:06:24Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:06:24.058 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc7lUhrnDe5N-smo2vanLfmduqjw0v0YaDvjGv0Rq2YhfH9X_h4St2TGZsOrh527AQe7AkcRfB35NW2ODFoEOT38myHBV7zfeoyBKXIeB7LOG9E1iegR0NuY0I60w5quqq6ancasabacOi5KVp-hF4Y85A-07m3PiAJSg4bgM56ZOOeC43jtqghlcND9JYiM1QJcc3A5r97GD0wQ50mLAGK91LAwlCCiMSXkW6U1sf2YLHJQTLzRKTbhJGRWsOqjTCQZwq2GD1aG6X3fUiWx3EAvTnl25lM2SPRELJoAdWQL0qjvqTYxrAP0DkDDZDVl70",
  "Scope": "openid profile business email"
}
2018-07-18 15:06:24.072 -06:00 [DBG] Augmenting SignInContext
2018-07-18 15:06:24.072 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 15:06:24.190 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 15:06:24.192 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 15:06:24.192 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 15:06:24.198 -06:00 [DBG] Start token request.
2018-07-18 15:06:24.202 -06:00 [DBG] Start client validation
2018-07-18 15:06:24.206 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 15:06:24.208 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 15:06:24.209 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 15:06:24.209 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 15:06:24.209 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:06:24.216 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 15:06:24.216 -06:00 [DBG] Client validation success
2018-07-18 15:06:24.218 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCU947OP93:00000003",
  "TimeStamp": "2018-07-18T21:06:24Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:06:24.222 -06:00 [DBG] Start token request validation
2018-07-18 15:06:24.231 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 15:06:24.249 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 15:06:24.252 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "26de50a75cd7d75f316ccc30dbde3699799f62c8694d5dc3a1aa96d2f001349a",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "26de50a75cd7d75f316ccc30dbde3699799f62c8694d5dc3a1aa96d2f001349a",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 15:06:24.262 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:06:24.270 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 15:06:24.270 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:06:24.291 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:06:24.292 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 15:06:24.292 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 15:06:24.305 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****mK-Q"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****TlFQ"
    }
  ],
  "ActivityId": "0HLFCU947OP93:00000003",
  "TimeStamp": "2018-07-18T21:06:24Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:06:24.306 -06:00 [DBG] Token request success.
2018-07-18 15:06:24.317 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 15:06:24.318 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 15:06:24.318 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 15:06:24.323 -06:00 [DBG] Start userinfo request
2018-07-18 15:06:24.325 -06:00 [DBG] Bearer token found in header
2018-07-18 15:06:24.382 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:06:24.384 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:06:24.386 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 15:06:24.388 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531947984,
    "exp": 1531951584,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1531947981,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-18 15:06:24.393 -06:00 [DBG] Creating userinfo response
2018-07-18 15:06:24.396 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 15:06:24.398 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 15:06:24.400 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-18 15:06:24.400 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 15:06:24.402 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-18 15:06:24.402 -06:00 [DBG] End userinfo request
2018-07-18 15:21:44.204 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 15:21:44.205 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 15:21:44.205 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 15:21:44.205 -06:00 [DBG] Start discovery request
2018-07-18 15:21:44.325 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 15:21:44.325 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 15:21:44.325 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 15:21:44.325 -06:00 [DBG] Start key discovery request
2018-07-18 15:21:44.398 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 15:21:44.398 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 15:21:44.398 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 15:21:44.398 -06:00 [DBG] Start authorize request
2018-07-18 15:21:44.398 -06:00 [DBG] No user present in authorize request
2018-07-18 15:21:44.398 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:21:44.398 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:21:44.398 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:21:44.398 -06:00 [DBG] No PKCE used.
2018-07-18 15:21:44.398 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:21:44.399 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfLbWCkCMZGAqGkLUkKjlRfiFxbeUivIQMSnwsykNSQ7G1SUL5-dGu16WOMTbIk2l3kBPvqSZFDGriwScbV1lUoYgSPZKSMZ1BRFKCLkY0Dc8XiWlZ7zMHu8V8sf9GDALQ11ilqN_QT8KZFpiFCchJDAmi84TZxqd-pudifG81_607V8DQs02p-BCimiv-OrZ8KY4lRl1UhOS8rMFu0YVOcrIUB1Y5Oc7kwJ5XCp3vKRjEKL0konrzS6KnUmn3usxsnlqrVYz6qXvkAeSZm3HDB9OYEI1Yj_cZBSH9gMRYcuZSjKLuxpWJGe62tOJYIFkQ",
  "Nonce": "636675457043799620.MTNmNmI2NTUtMmJkNC00YWFkLWFlZjAtODVkM2MwYWI5YjFhY2Y0MjFiYjUtZDNlNS00NjM3LThhOTktODZlZjQxYmUxOTk4",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675457043799620.MTNmNmI2NTUtMmJkNC00YWFkLWFlZjAtODVkM2MwYWI5YjFhY2Y0MjFiYjUtZDNlNS00NjM3LThhOTktODZlZjQxYmUxOTk4",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfLbWCkCMZGAqGkLUkKjlRfiFxbeUivIQMSnwsykNSQ7G1SUL5-dGu16WOMTbIk2l3kBPvqSZFDGriwScbV1lUoYgSPZKSMZ1BRFKCLkY0Dc8XiWlZ7zMHu8V8sf9GDALQ11ilqN_QT8KZFpiFCchJDAmi84TZxqd-pudifG81_607V8DQs02p-BCimiv-OrZ8KY4lRl1UhOS8rMFu0YVOcrIUB1Y5Oc7kwJ5XCp3vKRjEKL0konrzS6KnUmn3usxsnlqrVYz6qXvkAeSZm3HDB9OYEI1Yj_cZBSH9gMRYcuZSjKLuxpWJGe62tOJYIFkQ",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 15:21:44.399 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 15:21:44.403 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:21:44.403 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:21:44.403 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:21:44.403 -06:00 [DBG] No PKCE used.
2018-07-18 15:21:44.403 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:21:44.403 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:21:51.720 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 15:21:51.735 -06:00 [DBG] Augmenting SignInContext
2018-07-18 15:21:51.735 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 15:21:51.735 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 15:21:51.735 -06:00 [DBG] Adding auth_time claim with value: 1531948911
2018-07-18 15:21:51.735 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 15:21:51.736 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCU947OP96:00000003",
  "TimeStamp": "2018-07-18T21:21:51Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:21:51.738 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:21:51.739 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:21:51.739 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 15:21:51.739 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 15:21:51.739 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 15:21:51.739 -06:00 [DBG] Start authorize callback request
2018-07-18 15:21:51.739 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:21:51.739 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:21:51.739 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:21:51.739 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:21:51.739 -06:00 [DBG] No PKCE used.
2018-07-18 15:21:51.739 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:21:51.739 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfLbWCkCMZGAqGkLUkKjlRfiFxbeUivIQMSnwsykNSQ7G1SUL5-dGu16WOMTbIk2l3kBPvqSZFDGriwScbV1lUoYgSPZKSMZ1BRFKCLkY0Dc8XiWlZ7zMHu8V8sf9GDALQ11ilqN_QT8KZFpiFCchJDAmi84TZxqd-pudifG81_607V8DQs02p-BCimiv-OrZ8KY4lRl1UhOS8rMFu0YVOcrIUB1Y5Oc7kwJ5XCp3vKRjEKL0konrzS6KnUmn3usxsnlqrVYz6qXvkAeSZm3HDB9OYEI1Yj_cZBSH9gMRYcuZSjKLuxpWJGe62tOJYIFkQ",
  "Nonce": "636675457043799620.MTNmNmI2NTUtMmJkNC00YWFkLWFlZjAtODVkM2MwYWI5YjFhY2Y0MjFiYjUtZDNlNS00NjM3LThhOTktODZlZjQxYmUxOTk4",
  "SessionId": "e3ec4cc1997e83ac38f91b2b96d7a829",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675457043799620.MTNmNmI2NTUtMmJkNC00YWFkLWFlZjAtODVkM2MwYWI5YjFhY2Y0MjFiYjUtZDNlNS00NjM3LThhOTktODZlZjQxYmUxOTk4",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfLbWCkCMZGAqGkLUkKjlRfiFxbeUivIQMSnwsykNSQ7G1SUL5-dGu16WOMTbIk2l3kBPvqSZFDGriwScbV1lUoYgSPZKSMZ1BRFKCLkY0Dc8XiWlZ7zMHu8V8sf9GDALQ11ilqN_QT8KZFpiFCchJDAmi84TZxqd-pudifG81_607V8DQs02p-BCimiv-OrZ8KY4lRl1UhOS8rMFu0YVOcrIUB1Y5Oc7kwJ5XCp3vKRjEKL0konrzS6KnUmn3usxsnlqrVYz6qXvkAeSZm3HDB9OYEI1Yj_cZBSH9gMRYcuZSjKLuxpWJGe62tOJYIFkQ",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 15:21:51.741 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 15:21:51.741 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 15:21:51.741 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 15:21:51.743 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:21:51.744 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:21:51.744 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:21:51.744 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:21:51.744 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:21:51.744 -06:00 [DBG] No PKCE used.
2018-07-18 15:21:51.744 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:21:51.744 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:21:54.418 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 15:21:54.419 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:21:54.419 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:21:54.419 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:21:54.419 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:21:54.419 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:21:54.419 -06:00 [DBG] No PKCE used.
2018-07-18 15:21:54.419 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:21:54.423 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:21:54.423 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:21:54.423 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 15:21:54.423 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 15:21:54.423 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 15:21:54.423 -06:00 [DBG] Start authorize callback request
2018-07-18 15:21:54.424 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:21:54.424 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:21:54.424 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:21:54.424 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:21:54.424 -06:00 [DBG] No PKCE used.
2018-07-18 15:21:54.424 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:21:54.424 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfLbWCkCMZGAqGkLUkKjlRfiFxbeUivIQMSnwsykNSQ7G1SUL5-dGu16WOMTbIk2l3kBPvqSZFDGriwScbV1lUoYgSPZKSMZ1BRFKCLkY0Dc8XiWlZ7zMHu8V8sf9GDALQ11ilqN_QT8KZFpiFCchJDAmi84TZxqd-pudifG81_607V8DQs02p-BCimiv-OrZ8KY4lRl1UhOS8rMFu0YVOcrIUB1Y5Oc7kwJ5XCp3vKRjEKL0konrzS6KnUmn3usxsnlqrVYz6qXvkAeSZm3HDB9OYEI1Yj_cZBSH9gMRYcuZSjKLuxpWJGe62tOJYIFkQ",
  "Nonce": "636675457043799620.MTNmNmI2NTUtMmJkNC00YWFkLWFlZjAtODVkM2MwYWI5YjFhY2Y0MjFiYjUtZDNlNS00NjM3LThhOTktODZlZjQxYmUxOTk4",
  "SessionId": "e3ec4cc1997e83ac38f91b2b96d7a829",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675457043799620.MTNmNmI2NTUtMmJkNC00YWFkLWFlZjAtODVkM2MwYWI5YjFhY2Y0MjFiYjUtZDNlNS00NjM3LThhOTktODZlZjQxYmUxOTk4",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfLbWCkCMZGAqGkLUkKjlRfiFxbeUivIQMSnwsykNSQ7G1SUL5-dGu16WOMTbIk2l3kBPvqSZFDGriwScbV1lUoYgSPZKSMZ1BRFKCLkY0Dc8XiWlZ7zMHu8V8sf9GDALQ11ilqN_QT8KZFpiFCchJDAmi84TZxqd-pudifG81_607V8DQs02p-BCimiv-OrZ8KY4lRl1UhOS8rMFu0YVOcrIUB1Y5Oc7kwJ5XCp3vKRjEKL0konrzS6KnUmn3usxsnlqrVYz6qXvkAeSZm3HDB9OYEI1Yj_cZBSH9gMRYcuZSjKLuxpWJGe62tOJYIFkQ",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 15:21:54.425 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 15:21:54.425 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 15:21:54.425 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-18 15:21:54.425 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:21:54.425 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 15:21:54.430 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 15:21:54.430 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 15:21:54.430 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 15:21:54.442 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Hh9w"
    },
    {
      "TokenType": "code",
      "TokenValue": "****e5db"
    }
  ],
  "ActivityId": "0HLFCU947OP96:00000007",
  "TimeStamp": "2018-07-18T21:21:54Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:21:54.442 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfLbWCkCMZGAqGkLUkKjlRfiFxbeUivIQMSnwsykNSQ7G1SUL5-dGu16WOMTbIk2l3kBPvqSZFDGriwScbV1lUoYgSPZKSMZ1BRFKCLkY0Dc8XiWlZ7zMHu8V8sf9GDALQ11ilqN_QT8KZFpiFCchJDAmi84TZxqd-pudifG81_607V8DQs02p-BCimiv-OrZ8KY4lRl1UhOS8rMFu0YVOcrIUB1Y5Oc7kwJ5XCp3vKRjEKL0konrzS6KnUmn3usxsnlqrVYz6qXvkAeSZm3HDB9OYEI1Yj_cZBSH9gMRYcuZSjKLuxpWJGe62tOJYIFkQ",
  "Scope": "openid profile business email"
}
2018-07-18 15:21:54.442 -06:00 [DBG] Augmenting SignInContext
2018-07-18 15:21:54.442 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 15:21:54.554 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 15:21:54.555 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 15:21:54.555 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 15:21:54.555 -06:00 [DBG] Start token request.
2018-07-18 15:21:54.555 -06:00 [DBG] Start client validation
2018-07-18 15:21:54.555 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 15:21:54.555 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 15:21:54.555 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 15:21:54.555 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 15:21:54.555 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:21:54.555 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 15:21:54.555 -06:00 [DBG] Client validation success
2018-07-18 15:21:54.555 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCU947OP95:00000003",
  "TimeStamp": "2018-07-18T21:21:54Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:21:54.555 -06:00 [DBG] Start token request validation
2018-07-18 15:21:54.555 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 15:21:54.563 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 15:21:54.563 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "ef9cf3f597b963a8a892c69c968af3a4b9d5be1847eacbd65aefb95ea7ffe5db",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "ef9cf3f597b963a8a892c69c968af3a4b9d5be1847eacbd65aefb95ea7ffe5db",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 15:21:54.564 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:21:54.564 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 15:21:54.564 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:21:54.577 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:21:54.577 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 15:21:54.577 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 15:21:54.589 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****eymQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****0G8g"
    }
  ],
  "ActivityId": "0HLFCU947OP95:00000003",
  "TimeStamp": "2018-07-18T21:21:54Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:21:54.589 -06:00 [DBG] Token request success.
2018-07-18 15:21:54.598 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 15:21:54.598 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 15:21:54.598 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 15:21:54.598 -06:00 [DBG] Start userinfo request
2018-07-18 15:21:54.598 -06:00 [DBG] Bearer token found in header
2018-07-18 15:21:54.601 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:21:54.601 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:21:54.602 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 15:21:54.603 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531948914,
    "exp": 1531952514,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1531948911,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-18 15:21:54.603 -06:00 [DBG] Creating userinfo response
2018-07-18 15:21:54.603 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 15:21:54.603 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 15:21:54.603 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-18 15:21:54.603 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 15:21:54.604 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-18 15:21:54.604 -06:00 [DBG] End userinfo request
2018-07-18 15:22:59.635 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 15:22:59.635 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 15:22:59.635 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 15:22:59.635 -06:00 [DBG] Start discovery request
2018-07-18 15:22:59.774 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 15:22:59.774 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 15:22:59.774 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 15:22:59.774 -06:00 [DBG] Start key discovery request
2018-07-18 15:22:59.848 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 15:22:59.848 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 15:22:59.848 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 15:22:59.848 -06:00 [DBG] Start authorize request
2018-07-18 15:22:59.848 -06:00 [DBG] No user present in authorize request
2018-07-18 15:22:59.848 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:22:59.848 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:22:59.848 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:22:59.848 -06:00 [DBG] No PKCE used.
2018-07-18 15:22:59.848 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:22:59.848 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf9mawBhEsZlLSrU3vc8HyeV7cPePf-jDBompPU72J7OagYKIoi7oVr1vgVuGSF8VyQp-R6SuwBCirIUNEzFeJsry0Ekg_Jtu8DcKLn5R1eGvBNxLE1w9QrPA808LcqVzSxZiBAiyqEXgFEhOIzN_3dZK93BCLFLV1Fk_ALznK_h2ENLxS822v6SRbDkHpYxEbPnpLYXslKTVr7KCPAY-29xmaHnthD1oJZiGV-uINloUnlpaN60-suN9rnbd__pkIDRN040cqSBXrTE0IWVw7aDtZw4n_x6qBPvQxXBBP_-eEHs_fLA1wVA3pgPLS0wIE",
  "Nonce": "636675457798296320.ODI0MzgwMGYtOTZjOC00OWY5LTkzZjctNTYwOTY3Y2FhMjAzM2Q5ZTg1YmMtZmUyYS00OWUzLTk1N2MtN2ZmOWM1ZTRjMzMx",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675457798296320.ODI0MzgwMGYtOTZjOC00OWY5LTkzZjctNTYwOTY3Y2FhMjAzM2Q5ZTg1YmMtZmUyYS00OWUzLTk1N2MtN2ZmOWM1ZTRjMzMx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf9mawBhEsZlLSrU3vc8HyeV7cPePf-jDBompPU72J7OagYKIoi7oVr1vgVuGSF8VyQp-R6SuwBCirIUNEzFeJsry0Ekg_Jtu8DcKLn5R1eGvBNxLE1w9QrPA808LcqVzSxZiBAiyqEXgFEhOIzN_3dZK93BCLFLV1Fk_ALznK_h2ENLxS822v6SRbDkHpYxEbPnpLYXslKTVr7KCPAY-29xmaHnthD1oJZiGV-uINloUnlpaN60-suN9rnbd__pkIDRN040cqSBXrTE0IWVw7aDtZw4n_x6qBPvQxXBBP_-eEHs_fLA1wVA3pgPLS0wIE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 15:22:59.848 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 15:22:59.851 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:22:59.851 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:22:59.851 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:22:59.851 -06:00 [DBG] No PKCE used.
2018-07-18 15:22:59.851 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:22:59.851 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:23:06.433 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 15:23:06.449 -06:00 [DBG] Augmenting SignInContext
2018-07-18 15:23:06.449 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 15:23:06.449 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 15:23:06.449 -06:00 [DBG] Adding auth_time claim with value: 1531948986
2018-07-18 15:23:06.450 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 15:23:06.450 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCU947OP96:0000000A",
  "TimeStamp": "2018-07-18T21:23:06Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:23:06.453 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:23:06.453 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:23:06.454 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 15:23:06.454 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 15:23:06.454 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 15:23:06.454 -06:00 [DBG] Start authorize callback request
2018-07-18 15:23:06.454 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:23:06.454 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:23:06.454 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:23:06.454 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:23:06.454 -06:00 [DBG] No PKCE used.
2018-07-18 15:23:06.454 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:23:06.454 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf9mawBhEsZlLSrU3vc8HyeV7cPePf-jDBompPU72J7OagYKIoi7oVr1vgVuGSF8VyQp-R6SuwBCirIUNEzFeJsry0Ekg_Jtu8DcKLn5R1eGvBNxLE1w9QrPA808LcqVzSxZiBAiyqEXgFEhOIzN_3dZK93BCLFLV1Fk_ALznK_h2ENLxS822v6SRbDkHpYxEbPnpLYXslKTVr7KCPAY-29xmaHnthD1oJZiGV-uINloUnlpaN60-suN9rnbd__pkIDRN040cqSBXrTE0IWVw7aDtZw4n_x6qBPvQxXBBP_-eEHs_fLA1wVA3pgPLS0wIE",
  "Nonce": "636675457798296320.ODI0MzgwMGYtOTZjOC00OWY5LTkzZjctNTYwOTY3Y2FhMjAzM2Q5ZTg1YmMtZmUyYS00OWUzLTk1N2MtN2ZmOWM1ZTRjMzMx",
  "SessionId": "38529e8d460ce2eeba57d76619d2b930",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675457798296320.ODI0MzgwMGYtOTZjOC00OWY5LTkzZjctNTYwOTY3Y2FhMjAzM2Q5ZTg1YmMtZmUyYS00OWUzLTk1N2MtN2ZmOWM1ZTRjMzMx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf9mawBhEsZlLSrU3vc8HyeV7cPePf-jDBompPU72J7OagYKIoi7oVr1vgVuGSF8VyQp-R6SuwBCirIUNEzFeJsry0Ekg_Jtu8DcKLn5R1eGvBNxLE1w9QrPA808LcqVzSxZiBAiyqEXgFEhOIzN_3dZK93BCLFLV1Fk_ALznK_h2ENLxS822v6SRbDkHpYxEbPnpLYXslKTVr7KCPAY-29xmaHnthD1oJZiGV-uINloUnlpaN60-suN9rnbd__pkIDRN040cqSBXrTE0IWVw7aDtZw4n_x6qBPvQxXBBP_-eEHs_fLA1wVA3pgPLS0wIE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 15:23:06.455 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 15:23:06.455 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 15:23:06.455 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 15:23:06.458 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:23:06.458 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:23:06.458 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:23:06.458 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:23:06.458 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:23:06.458 -06:00 [DBG] No PKCE used.
2018-07-18 15:23:06.458 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:23:06.458 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:23:08.545 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 15:23:08.546 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:23:08.546 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:23:08.546 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:23:08.546 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:23:08.546 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:23:08.546 -06:00 [DBG] No PKCE used.
2018-07-18 15:23:08.546 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:23:08.550 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:23:08.550 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:23:08.550 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 15:23:08.550 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 15:23:08.550 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 15:23:08.550 -06:00 [DBG] Start authorize callback request
2018-07-18 15:23:08.551 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:23:08.551 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:23:08.551 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:23:08.551 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:23:08.551 -06:00 [DBG] No PKCE used.
2018-07-18 15:23:08.551 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:23:08.551 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf9mawBhEsZlLSrU3vc8HyeV7cPePf-jDBompPU72J7OagYKIoi7oVr1vgVuGSF8VyQp-R6SuwBCirIUNEzFeJsry0Ekg_Jtu8DcKLn5R1eGvBNxLE1w9QrPA808LcqVzSxZiBAiyqEXgFEhOIzN_3dZK93BCLFLV1Fk_ALznK_h2ENLxS822v6SRbDkHpYxEbPnpLYXslKTVr7KCPAY-29xmaHnthD1oJZiGV-uINloUnlpaN60-suN9rnbd__pkIDRN040cqSBXrTE0IWVw7aDtZw4n_x6qBPvQxXBBP_-eEHs_fLA1wVA3pgPLS0wIE",
  "Nonce": "636675457798296320.ODI0MzgwMGYtOTZjOC00OWY5LTkzZjctNTYwOTY3Y2FhMjAzM2Q5ZTg1YmMtZmUyYS00OWUzLTk1N2MtN2ZmOWM1ZTRjMzMx",
  "SessionId": "38529e8d460ce2eeba57d76619d2b930",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675457798296320.ODI0MzgwMGYtOTZjOC00OWY5LTkzZjctNTYwOTY3Y2FhMjAzM2Q5ZTg1YmMtZmUyYS00OWUzLTk1N2MtN2ZmOWM1ZTRjMzMx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf9mawBhEsZlLSrU3vc8HyeV7cPePf-jDBompPU72J7OagYKIoi7oVr1vgVuGSF8VyQp-R6SuwBCirIUNEzFeJsry0Ekg_Jtu8DcKLn5R1eGvBNxLE1w9QrPA808LcqVzSxZiBAiyqEXgFEhOIzN_3dZK93BCLFLV1Fk_ALznK_h2ENLxS822v6SRbDkHpYxEbPnpLYXslKTVr7KCPAY-29xmaHnthD1oJZiGV-uINloUnlpaN60-suN9rnbd__pkIDRN040cqSBXrTE0IWVw7aDtZw4n_x6qBPvQxXBBP_-eEHs_fLA1wVA3pgPLS0wIE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 15:23:08.552 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 15:23:08.552 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 15:23:08.552 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-18 15:23:08.552 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:23:08.552 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 15:23:08.557 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 15:23:08.557 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 15:23:08.557 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 15:23:08.568 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****trKA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****fee0"
    }
  ],
  "ActivityId": "0HLFCU947OP96:0000000E",
  "TimeStamp": "2018-07-18T21:23:08Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:23:08.568 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf9mawBhEsZlLSrU3vc8HyeV7cPePf-jDBompPU72J7OagYKIoi7oVr1vgVuGSF8VyQp-R6SuwBCirIUNEzFeJsry0Ekg_Jtu8DcKLn5R1eGvBNxLE1w9QrPA808LcqVzSxZiBAiyqEXgFEhOIzN_3dZK93BCLFLV1Fk_ALznK_h2ENLxS822v6SRbDkHpYxEbPnpLYXslKTVr7KCPAY-29xmaHnthD1oJZiGV-uINloUnlpaN60-suN9rnbd__pkIDRN040cqSBXrTE0IWVw7aDtZw4n_x6qBPvQxXBBP_-eEHs_fLA1wVA3pgPLS0wIE",
  "Scope": "openid profile business email"
}
2018-07-18 15:23:08.568 -06:00 [DBG] Augmenting SignInContext
2018-07-18 15:23:08.569 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 15:23:08.681 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 15:23:08.681 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 15:23:08.681 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 15:23:08.681 -06:00 [DBG] Start token request.
2018-07-18 15:23:08.681 -06:00 [DBG] Start client validation
2018-07-18 15:23:08.681 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 15:23:08.682 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 15:23:08.682 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 15:23:08.682 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 15:23:08.682 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:23:08.682 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 15:23:08.682 -06:00 [DBG] Client validation success
2018-07-18 15:23:08.682 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCU947OP97:00000003",
  "TimeStamp": "2018-07-18T21:23:08Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:23:08.682 -06:00 [DBG] Start token request validation
2018-07-18 15:23:08.682 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 15:23:08.689 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 15:23:08.689 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "f7fffbe465d01be507ceee4523bfb1c8b1a59615f13930de882905271d0efee0",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "f7fffbe465d01be507ceee4523bfb1c8b1a59615f13930de882905271d0efee0",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 15:23:08.689 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:23:08.689 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 15:23:08.689 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:23:08.702 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:23:08.702 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 15:23:08.702 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 15:23:08.714 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****fMvg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****6RnA"
    }
  ],
  "ActivityId": "0HLFCU947OP97:00000003",
  "TimeStamp": "2018-07-18T21:23:08Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:23:08.714 -06:00 [DBG] Token request success.
2018-07-18 15:23:08.722 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 15:23:08.722 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 15:23:08.722 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 15:23:08.722 -06:00 [DBG] Start userinfo request
2018-07-18 15:23:08.722 -06:00 [DBG] Bearer token found in header
2018-07-18 15:23:08.724 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:23:08.724 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:23:08.725 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 15:23:08.726 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531948988,
    "exp": 1531952588,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1531948986,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-18 15:23:08.726 -06:00 [DBG] Creating userinfo response
2018-07-18 15:23:08.726 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 15:23:08.726 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 15:23:08.726 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-18 15:23:08.726 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 15:23:08.727 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-18 15:23:08.727 -06:00 [DBG] End userinfo request
2018-07-18 15:36:57.664 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 15:36:57.664 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 15:36:57.664 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 15:36:57.664 -06:00 [DBG] Start discovery request
2018-07-18 15:36:57.786 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 15:36:57.786 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 15:36:57.786 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 15:36:57.786 -06:00 [DBG] Start key discovery request
2018-07-18 15:36:57.862 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 15:36:57.862 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 15:36:57.862 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 15:36:57.862 -06:00 [DBG] Start authorize request
2018-07-18 15:36:57.862 -06:00 [DBG] No user present in authorize request
2018-07-18 15:36:57.862 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:36:57.862 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:36:57.862 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:36:57.862 -06:00 [DBG] No PKCE used.
2018-07-18 15:36:57.863 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:36:57.863 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdsHyuFEhWMVA7q-38qCEpOhEHaiQU5jBcvflk_VjiCgliNCvLqFZLwOAFAGKK0CwCyeSf-Fsow4yt3zLhTyHBuPO5nuyjYni0Eic0QK6x9Pm2vIixYZZq-_vSm55jHk0A1EPuOL1M5z10IJTHEOtxl5dDYW63dgwrk9kEl3ZXS1WOgyJAJadEvussfjmNC6NJuy3m3o5cUVF15HM26GoH5VM9mdZq_5LWKX3pae9A9YPHdqIAd4OtWIKGhJfgB6IXjKFxUXr8dMNXeOp9W-fNdD4S7qkD3DvzZ3oF5WcW7yON_RRcHDFbKfKlXa4mLACc",
  "Nonce": "636675466178419940.ZTBhOTg3NGQtNGFhNy00MDQwLThkZDUtMTI1MWVlNzVhOGQ2YjY5NWUwZWItOWZhYS00ZTc0LTg3ZGUtNzkzN2YwMThlODVm",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675466178419940.ZTBhOTg3NGQtNGFhNy00MDQwLThkZDUtMTI1MWVlNzVhOGQ2YjY5NWUwZWItOWZhYS00ZTc0LTg3ZGUtNzkzN2YwMThlODVm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdsHyuFEhWMVA7q-38qCEpOhEHaiQU5jBcvflk_VjiCgliNCvLqFZLwOAFAGKK0CwCyeSf-Fsow4yt3zLhTyHBuPO5nuyjYni0Eic0QK6x9Pm2vIixYZZq-_vSm55jHk0A1EPuOL1M5z10IJTHEOtxl5dDYW63dgwrk9kEl3ZXS1WOgyJAJadEvussfjmNC6NJuy3m3o5cUVF15HM26GoH5VM9mdZq_5LWKX3pae9A9YPHdqIAd4OtWIKGhJfgB6IXjKFxUXr8dMNXeOp9W-fNdD4S7qkD3DvzZ3oF5WcW7yON_RRcHDFbKfKlXa4mLACc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 15:36:57.863 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 15:36:57.866 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:36:57.866 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:36:57.866 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:36:57.866 -06:00 [DBG] No PKCE used.
2018-07-18 15:36:57.866 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:36:57.866 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:37:04.302 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 15:37:04.317 -06:00 [DBG] Augmenting SignInContext
2018-07-18 15:37:04.317 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 15:37:04.317 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 15:37:04.317 -06:00 [DBG] Adding auth_time claim with value: 1531949824
2018-07-18 15:37:04.317 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 15:37:04.318 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCU947OP99:00000003",
  "TimeStamp": "2018-07-18T21:37:04Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:37:04.320 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:37:04.320 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:37:04.320 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 15:37:04.321 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 15:37:04.321 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 15:37:04.321 -06:00 [DBG] Start authorize callback request
2018-07-18 15:37:04.321 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:37:04.321 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:37:04.321 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:37:04.321 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:37:04.321 -06:00 [DBG] No PKCE used.
2018-07-18 15:37:04.321 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:37:04.321 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdsHyuFEhWMVA7q-38qCEpOhEHaiQU5jBcvflk_VjiCgliNCvLqFZLwOAFAGKK0CwCyeSf-Fsow4yt3zLhTyHBuPO5nuyjYni0Eic0QK6x9Pm2vIixYZZq-_vSm55jHk0A1EPuOL1M5z10IJTHEOtxl5dDYW63dgwrk9kEl3ZXS1WOgyJAJadEvussfjmNC6NJuy3m3o5cUVF15HM26GoH5VM9mdZq_5LWKX3pae9A9YPHdqIAd4OtWIKGhJfgB6IXjKFxUXr8dMNXeOp9W-fNdD4S7qkD3DvzZ3oF5WcW7yON_RRcHDFbKfKlXa4mLACc",
  "Nonce": "636675466178419940.ZTBhOTg3NGQtNGFhNy00MDQwLThkZDUtMTI1MWVlNzVhOGQ2YjY5NWUwZWItOWZhYS00ZTc0LTg3ZGUtNzkzN2YwMThlODVm",
  "SessionId": "ba4a872e71ecf42d9f273d615eb1c345",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675466178419940.ZTBhOTg3NGQtNGFhNy00MDQwLThkZDUtMTI1MWVlNzVhOGQ2YjY5NWUwZWItOWZhYS00ZTc0LTg3ZGUtNzkzN2YwMThlODVm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdsHyuFEhWMVA7q-38qCEpOhEHaiQU5jBcvflk_VjiCgliNCvLqFZLwOAFAGKK0CwCyeSf-Fsow4yt3zLhTyHBuPO5nuyjYni0Eic0QK6x9Pm2vIixYZZq-_vSm55jHk0A1EPuOL1M5z10IJTHEOtxl5dDYW63dgwrk9kEl3ZXS1WOgyJAJadEvussfjmNC6NJuy3m3o5cUVF15HM26GoH5VM9mdZq_5LWKX3pae9A9YPHdqIAd4OtWIKGhJfgB6IXjKFxUXr8dMNXeOp9W-fNdD4S7qkD3DvzZ3oF5WcW7yON_RRcHDFbKfKlXa4mLACc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 15:37:04.322 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 15:37:04.322 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 15:37:04.322 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 15:37:04.325 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:37:04.325 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:37:04.325 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:37:04.325 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:37:04.325 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:37:04.325 -06:00 [DBG] No PKCE used.
2018-07-18 15:37:04.325 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:37:04.325 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:37:07.157 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 15:37:07.157 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:37:07.157 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:37:07.158 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:37:07.158 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:37:07.158 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:37:07.158 -06:00 [DBG] No PKCE used.
2018-07-18 15:37:07.158 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:37:07.161 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:37:07.161 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:37:07.161 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 15:37:07.161 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 15:37:07.161 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 15:37:07.161 -06:00 [DBG] Start authorize callback request
2018-07-18 15:37:07.162 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:37:07.162 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:37:07.162 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:37:07.162 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:37:07.162 -06:00 [DBG] No PKCE used.
2018-07-18 15:37:07.162 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:37:07.162 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdsHyuFEhWMVA7q-38qCEpOhEHaiQU5jBcvflk_VjiCgliNCvLqFZLwOAFAGKK0CwCyeSf-Fsow4yt3zLhTyHBuPO5nuyjYni0Eic0QK6x9Pm2vIixYZZq-_vSm55jHk0A1EPuOL1M5z10IJTHEOtxl5dDYW63dgwrk9kEl3ZXS1WOgyJAJadEvussfjmNC6NJuy3m3o5cUVF15HM26GoH5VM9mdZq_5LWKX3pae9A9YPHdqIAd4OtWIKGhJfgB6IXjKFxUXr8dMNXeOp9W-fNdD4S7qkD3DvzZ3oF5WcW7yON_RRcHDFbKfKlXa4mLACc",
  "Nonce": "636675466178419940.ZTBhOTg3NGQtNGFhNy00MDQwLThkZDUtMTI1MWVlNzVhOGQ2YjY5NWUwZWItOWZhYS00ZTc0LTg3ZGUtNzkzN2YwMThlODVm",
  "SessionId": "ba4a872e71ecf42d9f273d615eb1c345",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675466178419940.ZTBhOTg3NGQtNGFhNy00MDQwLThkZDUtMTI1MWVlNzVhOGQ2YjY5NWUwZWItOWZhYS00ZTc0LTg3ZGUtNzkzN2YwMThlODVm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdsHyuFEhWMVA7q-38qCEpOhEHaiQU5jBcvflk_VjiCgliNCvLqFZLwOAFAGKK0CwCyeSf-Fsow4yt3zLhTyHBuPO5nuyjYni0Eic0QK6x9Pm2vIixYZZq-_vSm55jHk0A1EPuOL1M5z10IJTHEOtxl5dDYW63dgwrk9kEl3ZXS1WOgyJAJadEvussfjmNC6NJuy3m3o5cUVF15HM26GoH5VM9mdZq_5LWKX3pae9A9YPHdqIAd4OtWIKGhJfgB6IXjKFxUXr8dMNXeOp9W-fNdD4S7qkD3DvzZ3oF5WcW7yON_RRcHDFbKfKlXa4mLACc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 15:37:07.163 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 15:37:07.163 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 15:37:07.163 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-18 15:37:07.163 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:37:07.163 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 15:37:07.168 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 15:37:07.168 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 15:37:07.168 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 15:37:07.179 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****akXQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****6f54"
    }
  ],
  "ActivityId": "0HLFCU947OP99:00000007",
  "TimeStamp": "2018-07-18T21:37:07Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:37:07.179 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdsHyuFEhWMVA7q-38qCEpOhEHaiQU5jBcvflk_VjiCgliNCvLqFZLwOAFAGKK0CwCyeSf-Fsow4yt3zLhTyHBuPO5nuyjYni0Eic0QK6x9Pm2vIixYZZq-_vSm55jHk0A1EPuOL1M5z10IJTHEOtxl5dDYW63dgwrk9kEl3ZXS1WOgyJAJadEvussfjmNC6NJuy3m3o5cUVF15HM26GoH5VM9mdZq_5LWKX3pae9A9YPHdqIAd4OtWIKGhJfgB6IXjKFxUXr8dMNXeOp9W-fNdD4S7qkD3DvzZ3oF5WcW7yON_RRcHDFbKfKlXa4mLACc",
  "Scope": "openid profile business email"
}
2018-07-18 15:37:07.179 -06:00 [DBG] Augmenting SignInContext
2018-07-18 15:37:07.180 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 15:37:07.323 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 15:37:07.323 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 15:37:07.323 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 15:37:07.323 -06:00 [DBG] Start token request.
2018-07-18 15:37:07.323 -06:00 [DBG] Start client validation
2018-07-18 15:37:07.323 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 15:37:07.323 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 15:37:07.323 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 15:37:07.324 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 15:37:07.324 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:37:07.324 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 15:37:07.324 -06:00 [DBG] Client validation success
2018-07-18 15:37:07.324 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCU947OP98:00000003",
  "TimeStamp": "2018-07-18T21:37:07Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:37:07.324 -06:00 [DBG] Start token request validation
2018-07-18 15:37:07.324 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 15:37:07.331 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 15:37:07.331 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "0b4b65cdc4b0773c3bd7d0e3c5cd6feff1392c532079c1e5d647f01cf8e46f54",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "0b4b65cdc4b0773c3bd7d0e3c5cd6feff1392c532079c1e5d647f01cf8e46f54",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 15:37:07.331 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:37:07.331 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 15:37:07.331 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:37:07.344 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:37:07.344 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 15:37:07.344 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 15:37:07.355 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****MBvA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****lLPw"
    }
  ],
  "ActivityId": "0HLFCU947OP98:00000003",
  "TimeStamp": "2018-07-18T21:37:07Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:37:07.355 -06:00 [DBG] Token request success.
2018-07-18 15:37:07.364 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 15:37:07.364 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 15:37:07.364 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 15:37:07.364 -06:00 [DBG] Start userinfo request
2018-07-18 15:37:07.364 -06:00 [DBG] Bearer token found in header
2018-07-18 15:37:07.366 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:37:07.366 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:37:07.368 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 15:37:07.368 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531949827,
    "exp": 1531953427,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1531949824,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-18 15:37:07.368 -06:00 [DBG] Creating userinfo response
2018-07-18 15:37:07.368 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 15:37:07.368 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 15:37:07.368 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-18 15:37:07.368 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 15:37:07.369 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-18 15:37:07.370 -06:00 [DBG] End userinfo request
2018-07-18 15:42:32.827 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 15:42:32.827 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 15:42:32.828 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 15:42:32.828 -06:00 [DBG] Start discovery request
2018-07-18 15:42:32.965 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 15:42:32.965 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 15:42:32.966 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 15:42:32.966 -06:00 [DBG] Start key discovery request
2018-07-18 15:42:33.036 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 15:42:33.036 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 15:42:33.036 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 15:42:33.036 -06:00 [DBG] Start authorize request
2018-07-18 15:42:33.036 -06:00 [DBG] No user present in authorize request
2018-07-18 15:42:33.036 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:42:33.036 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:42:33.036 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:42:33.036 -06:00 [DBG] No PKCE used.
2018-07-18 15:42:33.036 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:42:33.036 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdv8hyxJyuAFQB8T7-KtV6F_DnOP3Rf3uTgcl1N2c_5rv3ag6vVz8gASV8TrCKaeNJHHmR1pI3K0VyNEZPJR3AUbxQAmMg9jWXopW0JGfZEZ6j6-Ii_CKAt64de2FICz0AreF01qH2J0qY9MAEBRaQDGoJAPRgNCUkbLhrPbr3guca-7Gtvbd84eQX4ysdcgyVk2cX_-WMz-HaT1S-7sPwYgTxa0aD9s-2oOnOfnrYuPQZbONRoRtDlOYjn5S5Z9scxZ47B7l3MBCuSfGqQYaOM4Txqa_pKfwIGBOoZKmhG0EIObRv32_QqugeiQCAgyhY",
  "Nonce": "636675469530185740.YjA5YTUxMjUtMjIzYS00OTkwLWIyZTEtYWM0MzY3NTczYTE5NmZjOWRmYjAtMzNhOC00YmE0LTg3NWYtOGE0YzI0MTdiMTIz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675469530185740.YjA5YTUxMjUtMjIzYS00OTkwLWIyZTEtYWM0MzY3NTczYTE5NmZjOWRmYjAtMzNhOC00YmE0LTg3NWYtOGE0YzI0MTdiMTIz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdv8hyxJyuAFQB8T7-KtV6F_DnOP3Rf3uTgcl1N2c_5rv3ag6vVz8gASV8TrCKaeNJHHmR1pI3K0VyNEZPJR3AUbxQAmMg9jWXopW0JGfZEZ6j6-Ii_CKAt64de2FICz0AreF01qH2J0qY9MAEBRaQDGoJAPRgNCUkbLhrPbr3guca-7Gtvbd84eQX4ysdcgyVk2cX_-WMz-HaT1S-7sPwYgTxa0aD9s-2oOnOfnrYuPQZbONRoRtDlOYjn5S5Z9scxZ47B7l3MBCuSfGqQYaOM4Txqa_pKfwIGBOoZKmhG0EIObRv32_QqugeiQCAgyhY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 15:42:33.036 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 15:42:33.039 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:42:33.039 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:42:33.039 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:42:33.039 -06:00 [DBG] No PKCE used.
2018-07-18 15:42:33.039 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:42:33.039 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:42:40.153 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 15:42:40.168 -06:00 [DBG] Augmenting SignInContext
2018-07-18 15:42:40.168 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 15:42:40.168 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 15:42:40.168 -06:00 [DBG] Adding auth_time claim with value: 1531950160
2018-07-18 15:42:40.168 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 15:42:40.169 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCU947OP9B:00000003",
  "TimeStamp": "2018-07-18T21:42:40Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:42:40.172 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:42:40.172 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:42:40.172 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 15:42:40.172 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 15:42:40.172 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 15:42:40.172 -06:00 [DBG] Start authorize callback request
2018-07-18 15:42:40.172 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:42:40.172 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:42:40.172 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:42:40.172 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:42:40.172 -06:00 [DBG] No PKCE used.
2018-07-18 15:42:40.173 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:42:40.173 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdv8hyxJyuAFQB8T7-KtV6F_DnOP3Rf3uTgcl1N2c_5rv3ag6vVz8gASV8TrCKaeNJHHmR1pI3K0VyNEZPJR3AUbxQAmMg9jWXopW0JGfZEZ6j6-Ii_CKAt64de2FICz0AreF01qH2J0qY9MAEBRaQDGoJAPRgNCUkbLhrPbr3guca-7Gtvbd84eQX4ysdcgyVk2cX_-WMz-HaT1S-7sPwYgTxa0aD9s-2oOnOfnrYuPQZbONRoRtDlOYjn5S5Z9scxZ47B7l3MBCuSfGqQYaOM4Txqa_pKfwIGBOoZKmhG0EIObRv32_QqugeiQCAgyhY",
  "Nonce": "636675469530185740.YjA5YTUxMjUtMjIzYS00OTkwLWIyZTEtYWM0MzY3NTczYTE5NmZjOWRmYjAtMzNhOC00YmE0LTg3NWYtOGE0YzI0MTdiMTIz",
  "SessionId": "6b7fdeabc22ab614f58f27063d84a53b",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675469530185740.YjA5YTUxMjUtMjIzYS00OTkwLWIyZTEtYWM0MzY3NTczYTE5NmZjOWRmYjAtMzNhOC00YmE0LTg3NWYtOGE0YzI0MTdiMTIz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdv8hyxJyuAFQB8T7-KtV6F_DnOP3Rf3uTgcl1N2c_5rv3ag6vVz8gASV8TrCKaeNJHHmR1pI3K0VyNEZPJR3AUbxQAmMg9jWXopW0JGfZEZ6j6-Ii_CKAt64de2FICz0AreF01qH2J0qY9MAEBRaQDGoJAPRgNCUkbLhrPbr3guca-7Gtvbd84eQX4ysdcgyVk2cX_-WMz-HaT1S-7sPwYgTxa0aD9s-2oOnOfnrYuPQZbONRoRtDlOYjn5S5Z9scxZ47B7l3MBCuSfGqQYaOM4Txqa_pKfwIGBOoZKmhG0EIObRv32_QqugeiQCAgyhY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 15:42:40.174 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 15:42:40.174 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 15:42:40.174 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 15:42:40.176 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:42:40.176 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:42:40.177 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:42:40.177 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:42:40.177 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:42:40.177 -06:00 [DBG] No PKCE used.
2018-07-18 15:42:40.177 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:42:40.177 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:42:42.740 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 15:42:42.740 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:42:42.740 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:42:42.740 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:42:42.740 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:42:42.740 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:42:42.740 -06:00 [DBG] No PKCE used.
2018-07-18 15:42:42.740 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:42:42.744 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:42:42.744 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 15:42:42.744 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 15:42:42.744 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 15:42:42.744 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 15:42:42.744 -06:00 [DBG] Start authorize callback request
2018-07-18 15:42:42.744 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:42:42.744 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 15:42:42.745 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:42:42.745 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 15:42:42.745 -06:00 [DBG] No PKCE used.
2018-07-18 15:42:42.745 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 15:42:42.745 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdv8hyxJyuAFQB8T7-KtV6F_DnOP3Rf3uTgcl1N2c_5rv3ag6vVz8gASV8TrCKaeNJHHmR1pI3K0VyNEZPJR3AUbxQAmMg9jWXopW0JGfZEZ6j6-Ii_CKAt64de2FICz0AreF01qH2J0qY9MAEBRaQDGoJAPRgNCUkbLhrPbr3guca-7Gtvbd84eQX4ysdcgyVk2cX_-WMz-HaT1S-7sPwYgTxa0aD9s-2oOnOfnrYuPQZbONRoRtDlOYjn5S5Z9scxZ47B7l3MBCuSfGqQYaOM4Txqa_pKfwIGBOoZKmhG0EIObRv32_QqugeiQCAgyhY",
  "Nonce": "636675469530185740.YjA5YTUxMjUtMjIzYS00OTkwLWIyZTEtYWM0MzY3NTczYTE5NmZjOWRmYjAtMzNhOC00YmE0LTg3NWYtOGE0YzI0MTdiMTIz",
  "SessionId": "6b7fdeabc22ab614f58f27063d84a53b",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675469530185740.YjA5YTUxMjUtMjIzYS00OTkwLWIyZTEtYWM0MzY3NTczYTE5NmZjOWRmYjAtMzNhOC00YmE0LTg3NWYtOGE0YzI0MTdiMTIz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdv8hyxJyuAFQB8T7-KtV6F_DnOP3Rf3uTgcl1N2c_5rv3ag6vVz8gASV8TrCKaeNJHHmR1pI3K0VyNEZPJR3AUbxQAmMg9jWXopW0JGfZEZ6j6-Ii_CKAt64de2FICz0AreF01qH2J0qY9MAEBRaQDGoJAPRgNCUkbLhrPbr3guca-7Gtvbd84eQX4ysdcgyVk2cX_-WMz-HaT1S-7sPwYgTxa0aD9s-2oOnOfnrYuPQZbONRoRtDlOYjn5S5Z9scxZ47B7l3MBCuSfGqQYaOM4Txqa_pKfwIGBOoZKmhG0EIObRv32_QqugeiQCAgyhY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 15:42:42.746 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 15:42:42.746 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 15:42:42.746 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-18 15:42:42.746 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:42:42.746 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 15:42:42.750 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 15:42:42.751 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 15:42:42.751 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 15:42:42.762 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****hh-w"
    },
    {
      "TokenType": "code",
      "TokenValue": "****b328"
    }
  ],
  "ActivityId": "0HLFCU947OP9B:00000007",
  "TimeStamp": "2018-07-18T21:42:42Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:42:42.762 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdv8hyxJyuAFQB8T7-KtV6F_DnOP3Rf3uTgcl1N2c_5rv3ag6vVz8gASV8TrCKaeNJHHmR1pI3K0VyNEZPJR3AUbxQAmMg9jWXopW0JGfZEZ6j6-Ii_CKAt64de2FICz0AreF01qH2J0qY9MAEBRaQDGoJAPRgNCUkbLhrPbr3guca-7Gtvbd84eQX4ysdcgyVk2cX_-WMz-HaT1S-7sPwYgTxa0aD9s-2oOnOfnrYuPQZbONRoRtDlOYjn5S5Z9scxZ47B7l3MBCuSfGqQYaOM4Txqa_pKfwIGBOoZKmhG0EIObRv32_QqugeiQCAgyhY",
  "Scope": "openid profile business email"
}
2018-07-18 15:42:42.762 -06:00 [DBG] Augmenting SignInContext
2018-07-18 15:42:42.763 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 15:42:42.873 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 15:42:42.873 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 15:42:42.873 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 15:42:42.873 -06:00 [DBG] Start token request.
2018-07-18 15:42:42.873 -06:00 [DBG] Start client validation
2018-07-18 15:42:42.873 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 15:42:42.873 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 15:42:42.874 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 15:42:42.874 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 15:42:42.874 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:42:42.874 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 15:42:42.874 -06:00 [DBG] Client validation success
2018-07-18 15:42:42.874 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCU947OP9A:00000003",
  "TimeStamp": "2018-07-18T21:42:42Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:42:42.874 -06:00 [DBG] Start token request validation
2018-07-18 15:42:42.874 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 15:42:42.881 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 15:42:42.881 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "cce93978403a0047bc47d5dae056e818b168e0a0b0e95dfe7b0645b62134b328",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "cce93978403a0047bc47d5dae056e818b168e0a0b0e95dfe7b0645b62134b328",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 15:42:42.881 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:42:42.881 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 15:42:42.881 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 15:42:42.894 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:42:42.894 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 15:42:42.894 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 15:42:42.905 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Sdug"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****1Eog"
    }
  ],
  "ActivityId": "0HLFCU947OP9A:00000003",
  "TimeStamp": "2018-07-18T21:42:42Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 15:42:42.905 -06:00 [DBG] Token request success.
2018-07-18 15:42:42.913 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 15:42:42.913 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 15:42:42.913 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 15:42:42.913 -06:00 [DBG] Start userinfo request
2018-07-18 15:42:42.914 -06:00 [DBG] Bearer token found in header
2018-07-18 15:42:42.915 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:42:42.915 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 15:42:42.917 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 15:42:42.917 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531950162,
    "exp": 1531953762,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1531950160,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-18 15:42:42.917 -06:00 [DBG] Creating userinfo response
2018-07-18 15:42:42.917 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 15:42:42.917 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 15:42:42.917 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-18 15:42:42.917 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 15:42:42.918 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-18 15:42:42.918 -06:00 [DBG] End userinfo request
2018-07-18 16:02:48.916 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 16:02:48.917 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 16:02:48.917 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 16:02:48.917 -06:00 [DBG] Start discovery request
2018-07-18 16:02:48.979 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 16:02:48.979 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 16:02:48.979 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 16:02:48.979 -06:00 [DBG] Start key discovery request
2018-07-18 16:02:49.004 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 16:02:49.004 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 16:02:49.004 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 16:02:49.004 -06:00 [DBG] Start authorize request
2018-07-18 16:02:49.004 -06:00 [DBG] No user present in authorize request
2018-07-18 16:02:49.004 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:02:49.004 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:02:49.004 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:02:49.004 -06:00 [DBG] No PKCE used.
2018-07-18 16:02:49.004 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:02:49.004 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdXGt3i0abxdRPLRWTno5HiwZnKRSOAR0VTJWZxjnzwlaFhbK6qCo6TpL6KfJCUTC_GNFrdrMnvkWg6tsizipTU_63PwJrIAMzhjVJ4KnBdEPlsoR6B70sIz4AE-AOMPNLMh_GiqmtvlYSnz1KbnfBbRDt5jRfnSWHGcT05asSWI3RTdRaR-f5C15y4Fag8n3PxjU3RflcFboKDouKK8hV-2pVqOqDInC226vztIP1VHQGjROEpYQysw7MZW63obyABxOxGsNa9AZRMiMeZBAkfk8qwDr87Gora14GVX9W_-qg85jJBAB2xTFkLwjlf4IY",
  "Nonce": "636675481689940020.NzZlOTVmZDQtNjUxMC00ZTI4LWE3NTAtMWIwYjNiNTMyOWM2Mzc3Njg3Y2QtMDJiMC00MWNjLWJjNWItMWU5MjYzMDZhNjBk",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675481689940020.NzZlOTVmZDQtNjUxMC00ZTI4LWE3NTAtMWIwYjNiNTMyOWM2Mzc3Njg3Y2QtMDJiMC00MWNjLWJjNWItMWU5MjYzMDZhNjBk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdXGt3i0abxdRPLRWTno5HiwZnKRSOAR0VTJWZxjnzwlaFhbK6qCo6TpL6KfJCUTC_GNFrdrMnvkWg6tsizipTU_63PwJrIAMzhjVJ4KnBdEPlsoR6B70sIz4AE-AOMPNLMh_GiqmtvlYSnz1KbnfBbRDt5jRfnSWHGcT05asSWI3RTdRaR-f5C15y4Fag8n3PxjU3RflcFboKDouKK8hV-2pVqOqDInC226vztIP1VHQGjROEpYQysw7MZW63obyABxOxGsNa9AZRMiMeZBAkfk8qwDr87Gora14GVX9W_-qg85jJBAB2xTFkLwjlf4IY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 16:02:49.004 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 16:02:49.006 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:02:49.007 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:02:49.007 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:02:49.007 -06:00 [DBG] No PKCE used.
2018-07-18 16:02:49.007 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:02:49.007 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:02:57.797 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 16:02:57.811 -06:00 [DBG] Augmenting SignInContext
2018-07-18 16:02:57.811 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 16:02:57.811 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 16:02:57.811 -06:00 [DBG] Adding auth_time claim with value: 1531951377
2018-07-18 16:02:57.811 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 16:02:57.812 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCU947OP9D:00000003",
  "TimeStamp": "2018-07-18T22:02:57Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:02:57.814 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:02:57.815 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:02:57.815 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 16:02:57.815 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 16:02:57.815 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 16:02:57.815 -06:00 [DBG] Start authorize callback request
2018-07-18 16:02:57.815 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:02:57.815 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:02:57.815 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:02:57.815 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:02:57.815 -06:00 [DBG] No PKCE used.
2018-07-18 16:02:57.815 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:02:57.815 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdXGt3i0abxdRPLRWTno5HiwZnKRSOAR0VTJWZxjnzwlaFhbK6qCo6TpL6KfJCUTC_GNFrdrMnvkWg6tsizipTU_63PwJrIAMzhjVJ4KnBdEPlsoR6B70sIz4AE-AOMPNLMh_GiqmtvlYSnz1KbnfBbRDt5jRfnSWHGcT05asSWI3RTdRaR-f5C15y4Fag8n3PxjU3RflcFboKDouKK8hV-2pVqOqDInC226vztIP1VHQGjROEpYQysw7MZW63obyABxOxGsNa9AZRMiMeZBAkfk8qwDr87Gora14GVX9W_-qg85jJBAB2xTFkLwjlf4IY",
  "Nonce": "636675481689940020.NzZlOTVmZDQtNjUxMC00ZTI4LWE3NTAtMWIwYjNiNTMyOWM2Mzc3Njg3Y2QtMDJiMC00MWNjLWJjNWItMWU5MjYzMDZhNjBk",
  "SessionId": "a7a6d395fa3a77ab1288dac03f2e8ce2",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675481689940020.NzZlOTVmZDQtNjUxMC00ZTI4LWE3NTAtMWIwYjNiNTMyOWM2Mzc3Njg3Y2QtMDJiMC00MWNjLWJjNWItMWU5MjYzMDZhNjBk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdXGt3i0abxdRPLRWTno5HiwZnKRSOAR0VTJWZxjnzwlaFhbK6qCo6TpL6KfJCUTC_GNFrdrMnvkWg6tsizipTU_63PwJrIAMzhjVJ4KnBdEPlsoR6B70sIz4AE-AOMPNLMh_GiqmtvlYSnz1KbnfBbRDt5jRfnSWHGcT05asSWI3RTdRaR-f5C15y4Fag8n3PxjU3RflcFboKDouKK8hV-2pVqOqDInC226vztIP1VHQGjROEpYQysw7MZW63obyABxOxGsNa9AZRMiMeZBAkfk8qwDr87Gora14GVX9W_-qg85jJBAB2xTFkLwjlf4IY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 16:02:57.816 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 16:02:57.816 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 16:02:57.816 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 16:02:57.818 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:02:57.818 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:02:57.819 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:02:57.819 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:02:57.819 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:02:57.819 -06:00 [DBG] No PKCE used.
2018-07-18 16:02:57.819 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:02:57.819 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:03:01.259 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 16:03:01.259 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:03:01.260 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:03:01.260 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:03:01.260 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:03:01.260 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:03:01.260 -06:00 [DBG] No PKCE used.
2018-07-18 16:03:01.260 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:03:01.264 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:03:01.264 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:03:01.264 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 16:03:01.264 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 16:03:01.264 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 16:03:01.264 -06:00 [DBG] Start authorize callback request
2018-07-18 16:03:01.264 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:03:01.264 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:03:01.264 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:03:01.264 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:03:01.264 -06:00 [DBG] No PKCE used.
2018-07-18 16:03:01.264 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:03:01.264 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdXGt3i0abxdRPLRWTno5HiwZnKRSOAR0VTJWZxjnzwlaFhbK6qCo6TpL6KfJCUTC_GNFrdrMnvkWg6tsizipTU_63PwJrIAMzhjVJ4KnBdEPlsoR6B70sIz4AE-AOMPNLMh_GiqmtvlYSnz1KbnfBbRDt5jRfnSWHGcT05asSWI3RTdRaR-f5C15y4Fag8n3PxjU3RflcFboKDouKK8hV-2pVqOqDInC226vztIP1VHQGjROEpYQysw7MZW63obyABxOxGsNa9AZRMiMeZBAkfk8qwDr87Gora14GVX9W_-qg85jJBAB2xTFkLwjlf4IY",
  "Nonce": "636675481689940020.NzZlOTVmZDQtNjUxMC00ZTI4LWE3NTAtMWIwYjNiNTMyOWM2Mzc3Njg3Y2QtMDJiMC00MWNjLWJjNWItMWU5MjYzMDZhNjBk",
  "SessionId": "a7a6d395fa3a77ab1288dac03f2e8ce2",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675481689940020.NzZlOTVmZDQtNjUxMC00ZTI4LWE3NTAtMWIwYjNiNTMyOWM2Mzc3Njg3Y2QtMDJiMC00MWNjLWJjNWItMWU5MjYzMDZhNjBk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdXGt3i0abxdRPLRWTno5HiwZnKRSOAR0VTJWZxjnzwlaFhbK6qCo6TpL6KfJCUTC_GNFrdrMnvkWg6tsizipTU_63PwJrIAMzhjVJ4KnBdEPlsoR6B70sIz4AE-AOMPNLMh_GiqmtvlYSnz1KbnfBbRDt5jRfnSWHGcT05asSWI3RTdRaR-f5C15y4Fag8n3PxjU3RflcFboKDouKK8hV-2pVqOqDInC226vztIP1VHQGjROEpYQysw7MZW63obyABxOxGsNa9AZRMiMeZBAkfk8qwDr87Gora14GVX9W_-qg85jJBAB2xTFkLwjlf4IY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 16:03:01.266 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 16:03:01.266 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 16:03:01.266 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-18 16:03:01.266 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:03:01.266 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 16:03:01.270 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 16:03:01.270 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 16:03:01.270 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 16:03:01.282 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****OC7A"
    },
    {
      "TokenType": "code",
      "TokenValue": "****d180"
    }
  ],
  "ActivityId": "0HLFCU947OP9D:00000007",
  "TimeStamp": "2018-07-18T22:03:01Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:03:01.282 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdXGt3i0abxdRPLRWTno5HiwZnKRSOAR0VTJWZxjnzwlaFhbK6qCo6TpL6KfJCUTC_GNFrdrMnvkWg6tsizipTU_63PwJrIAMzhjVJ4KnBdEPlsoR6B70sIz4AE-AOMPNLMh_GiqmtvlYSnz1KbnfBbRDt5jRfnSWHGcT05asSWI3RTdRaR-f5C15y4Fag8n3PxjU3RflcFboKDouKK8hV-2pVqOqDInC226vztIP1VHQGjROEpYQysw7MZW63obyABxOxGsNa9AZRMiMeZBAkfk8qwDr87Gora14GVX9W_-qg85jJBAB2xTFkLwjlf4IY",
  "Scope": "openid profile business email"
}
2018-07-18 16:03:01.282 -06:00 [DBG] Augmenting SignInContext
2018-07-18 16:03:01.282 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 16:03:01.369 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 16:03:01.369 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 16:03:01.370 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 16:03:01.370 -06:00 [DBG] Start token request.
2018-07-18 16:03:01.370 -06:00 [DBG] Start client validation
2018-07-18 16:03:01.370 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 16:03:01.370 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 16:03:01.370 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 16:03:01.370 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 16:03:01.370 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:03:01.370 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 16:03:01.370 -06:00 [DBG] Client validation success
2018-07-18 16:03:01.370 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCU947OP9C:00000003",
  "TimeStamp": "2018-07-18T22:03:01Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:03:01.370 -06:00 [DBG] Start token request validation
2018-07-18 16:03:01.370 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 16:03:01.377 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 16:03:01.377 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "d64b7610ad59dd49ba7a0f9e238d1a434a33750739e5a1168a9a57cb21e9d180",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "d64b7610ad59dd49ba7a0f9e238d1a434a33750739e5a1168a9a57cb21e9d180",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 16:03:01.377 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:03:01.377 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 16:03:01.377 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:03:01.390 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:03:01.390 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 16:03:01.390 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 16:03:01.401 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****4wiA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****85kQ"
    }
  ],
  "ActivityId": "0HLFCU947OP9C:00000003",
  "TimeStamp": "2018-07-18T22:03:01Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:03:01.401 -06:00 [DBG] Token request success.
2018-07-18 16:03:01.408 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 16:03:01.409 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 16:03:01.409 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 16:03:01.409 -06:00 [DBG] Start userinfo request
2018-07-18 16:03:01.409 -06:00 [DBG] Bearer token found in header
2018-07-18 16:03:01.411 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:03:01.411 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:03:01.412 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 16:03:01.412 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531951381,
    "exp": 1531954981,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1531951377,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-18 16:03:01.412 -06:00 [DBG] Creating userinfo response
2018-07-18 16:03:01.412 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 16:03:01.412 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 16:03:01.412 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-18 16:03:01.412 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 16:03:01.413 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-18 16:03:01.413 -06:00 [DBG] End userinfo request
2018-07-18 16:11:47.905 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:11:47.905 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:11:47.905 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 16:11:47.905 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 16:11:47.905 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 16:11:47.905 -06:00 [DBG] Start discovery request
2018-07-18 16:12:15.114 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 16:12:15.114 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 16:12:15.114 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 16:12:15.114 -06:00 [DBG] Start userinfo request
2018-07-18 16:12:15.115 -06:00 [DBG] Bearer token not found
2018-07-18 16:12:15.115 -06:00 [ERR] No access token found.
2018-07-18 16:12:19.414 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 16:12:19.414 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 16:12:19.414 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 16:12:19.414 -06:00 [DBG] Start userinfo request
2018-07-18 16:12:19.415 -06:00 [DBG] Bearer token not found
2018-07-18 16:12:19.415 -06:00 [ERR] No access token found.
2018-07-18 16:20:32.840 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 16:20:32.840 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 16:20:32.840 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 16:20:32.840 -06:00 [DBG] Start discovery request
2018-07-18 16:20:32.979 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 16:20:32.979 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 16:20:32.979 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 16:20:32.979 -06:00 [DBG] Start key discovery request
2018-07-18 16:20:33.055 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 16:20:33.055 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 16:20:33.055 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 16:20:33.055 -06:00 [DBG] Start authorize request
2018-07-18 16:20:33.056 -06:00 [DBG] No user present in authorize request
2018-07-18 16:20:33.056 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:20:33.056 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:20:33.056 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:20:33.056 -06:00 [DBG] No PKCE used.
2018-07-18 16:20:33.056 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:20:33.056 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf-THT609LkLcBqxntiWm_PwoTtB9rTmAXpXAYHxgZFhgmBSHNAvhG1aYNX4VlJgzhXj72COl4FzUXIsEk0XDz8bWZdNTp9x8SFadWUEIMIgSdm3Xa8dQcU3czSq7wgPoBhHZYPVRgLHEeMMHR4L4Z78s-qc3XKm2u-cRg69N7326YGCMfbvoF40dgGNhTVsAZtE_2HSutvFKXRyq06Q65bi_ylqWzJuiodC739ullWV5bLurVz-UopAVtymDErhZjNeKHL6xXqty2_2L6ylxOvX2WV4mFZmkIPBksA67-OLKiLrwwsz7-yB8kngBHMvQs",
  "Nonce": "636675492330358600.ZjcyZDFmMWMtMzZiYi00NGM1LWIxM2UtN2MyMGFmMDdiMjQ1MDM0MTBiNjQtNzhjZi00OWQ3LWIxM2YtZTdjMjJkODY4NzIz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675492330358600.ZjcyZDFmMWMtMzZiYi00NGM1LWIxM2UtN2MyMGFmMDdiMjQ1MDM0MTBiNjQtNzhjZi00OWQ3LWIxM2YtZTdjMjJkODY4NzIz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf-THT609LkLcBqxntiWm_PwoTtB9rTmAXpXAYHxgZFhgmBSHNAvhG1aYNX4VlJgzhXj72COl4FzUXIsEk0XDz8bWZdNTp9x8SFadWUEIMIgSdm3Xa8dQcU3czSq7wgPoBhHZYPVRgLHEeMMHR4L4Z78s-qc3XKm2u-cRg69N7326YGCMfbvoF40dgGNhTVsAZtE_2HSutvFKXRyq06Q65bi_ylqWzJuiodC739ullWV5bLurVz-UopAVtymDErhZjNeKHL6xXqty2_2L6ylxOvX2WV4mFZmkIPBksA67-OLKiLrwwsz7-yB8kngBHMvQs",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 16:20:33.056 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 16:20:33.058 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:20:33.058 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:20:33.058 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:20:33.058 -06:00 [DBG] No PKCE used.
2018-07-18 16:20:33.059 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:20:33.059 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:20:40.018 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 16:20:40.033 -06:00 [DBG] Augmenting SignInContext
2018-07-18 16:20:40.033 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 16:20:40.033 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 16:20:40.033 -06:00 [DBG] Adding auth_time claim with value: 1531952440
2018-07-18 16:20:40.033 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 16:20:40.034 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCU947OP9I:00000003",
  "TimeStamp": "2018-07-18T22:20:40Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:20:40.037 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:20:40.037 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:20:40.037 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 16:20:40.037 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 16:20:40.037 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 16:20:40.037 -06:00 [DBG] Start authorize callback request
2018-07-18 16:20:40.037 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:20:40.037 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:20:40.037 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:20:40.037 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:20:40.037 -06:00 [DBG] No PKCE used.
2018-07-18 16:20:40.037 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:20:40.037 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf-THT609LkLcBqxntiWm_PwoTtB9rTmAXpXAYHxgZFhgmBSHNAvhG1aYNX4VlJgzhXj72COl4FzUXIsEk0XDz8bWZdNTp9x8SFadWUEIMIgSdm3Xa8dQcU3czSq7wgPoBhHZYPVRgLHEeMMHR4L4Z78s-qc3XKm2u-cRg69N7326YGCMfbvoF40dgGNhTVsAZtE_2HSutvFKXRyq06Q65bi_ylqWzJuiodC739ullWV5bLurVz-UopAVtymDErhZjNeKHL6xXqty2_2L6ylxOvX2WV4mFZmkIPBksA67-OLKiLrwwsz7-yB8kngBHMvQs",
  "Nonce": "636675492330358600.ZjcyZDFmMWMtMzZiYi00NGM1LWIxM2UtN2MyMGFmMDdiMjQ1MDM0MTBiNjQtNzhjZi00OWQ3LWIxM2YtZTdjMjJkODY4NzIz",
  "SessionId": "49dcef2dc954bb72ede6d8d3be6df521",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675492330358600.ZjcyZDFmMWMtMzZiYi00NGM1LWIxM2UtN2MyMGFmMDdiMjQ1MDM0MTBiNjQtNzhjZi00OWQ3LWIxM2YtZTdjMjJkODY4NzIz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf-THT609LkLcBqxntiWm_PwoTtB9rTmAXpXAYHxgZFhgmBSHNAvhG1aYNX4VlJgzhXj72COl4FzUXIsEk0XDz8bWZdNTp9x8SFadWUEIMIgSdm3Xa8dQcU3czSq7wgPoBhHZYPVRgLHEeMMHR4L4Z78s-qc3XKm2u-cRg69N7326YGCMfbvoF40dgGNhTVsAZtE_2HSutvFKXRyq06Q65bi_ylqWzJuiodC739ullWV5bLurVz-UopAVtymDErhZjNeKHL6xXqty2_2L6ylxOvX2WV4mFZmkIPBksA67-OLKiLrwwsz7-yB8kngBHMvQs",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 16:20:40.039 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 16:20:40.039 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 16:20:40.039 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 16:20:40.041 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:20:40.041 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:20:40.041 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:20:40.041 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:20:40.041 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:20:40.041 -06:00 [DBG] No PKCE used.
2018-07-18 16:20:40.041 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:20:40.041 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:20:42.197 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 16:20:42.198 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:20:42.198 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:20:42.198 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:20:42.198 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:20:42.198 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:20:42.198 -06:00 [DBG] No PKCE used.
2018-07-18 16:20:42.199 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:20:42.202 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:20:42.202 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:20:42.202 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 16:20:42.202 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 16:20:42.202 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 16:20:42.202 -06:00 [DBG] Start authorize callback request
2018-07-18 16:20:42.203 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:20:42.203 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:20:42.203 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:20:42.203 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:20:42.203 -06:00 [DBG] No PKCE used.
2018-07-18 16:20:42.203 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:20:42.203 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf-THT609LkLcBqxntiWm_PwoTtB9rTmAXpXAYHxgZFhgmBSHNAvhG1aYNX4VlJgzhXj72COl4FzUXIsEk0XDz8bWZdNTp9x8SFadWUEIMIgSdm3Xa8dQcU3czSq7wgPoBhHZYPVRgLHEeMMHR4L4Z78s-qc3XKm2u-cRg69N7326YGCMfbvoF40dgGNhTVsAZtE_2HSutvFKXRyq06Q65bi_ylqWzJuiodC739ullWV5bLurVz-UopAVtymDErhZjNeKHL6xXqty2_2L6ylxOvX2WV4mFZmkIPBksA67-OLKiLrwwsz7-yB8kngBHMvQs",
  "Nonce": "636675492330358600.ZjcyZDFmMWMtMzZiYi00NGM1LWIxM2UtN2MyMGFmMDdiMjQ1MDM0MTBiNjQtNzhjZi00OWQ3LWIxM2YtZTdjMjJkODY4NzIz",
  "SessionId": "49dcef2dc954bb72ede6d8d3be6df521",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675492330358600.ZjcyZDFmMWMtMzZiYi00NGM1LWIxM2UtN2MyMGFmMDdiMjQ1MDM0MTBiNjQtNzhjZi00OWQ3LWIxM2YtZTdjMjJkODY4NzIz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf-THT609LkLcBqxntiWm_PwoTtB9rTmAXpXAYHxgZFhgmBSHNAvhG1aYNX4VlJgzhXj72COl4FzUXIsEk0XDz8bWZdNTp9x8SFadWUEIMIgSdm3Xa8dQcU3czSq7wgPoBhHZYPVRgLHEeMMHR4L4Z78s-qc3XKm2u-cRg69N7326YGCMfbvoF40dgGNhTVsAZtE_2HSutvFKXRyq06Q65bi_ylqWzJuiodC739ullWV5bLurVz-UopAVtymDErhZjNeKHL6xXqty2_2L6ylxOvX2WV4mFZmkIPBksA67-OLKiLrwwsz7-yB8kngBHMvQs",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 16:20:42.204 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 16:20:42.204 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 16:20:42.204 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-18 16:20:42.204 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:20:42.204 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 16:20:42.209 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 16:20:42.209 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 16:20:42.209 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 16:20:42.221 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****kiUw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****3a92"
    }
  ],
  "ActivityId": "0HLFCU947OP9I:00000007",
  "TimeStamp": "2018-07-18T22:20:42Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:20:42.221 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf-THT609LkLcBqxntiWm_PwoTtB9rTmAXpXAYHxgZFhgmBSHNAvhG1aYNX4VlJgzhXj72COl4FzUXIsEk0XDz8bWZdNTp9x8SFadWUEIMIgSdm3Xa8dQcU3czSq7wgPoBhHZYPVRgLHEeMMHR4L4Z78s-qc3XKm2u-cRg69N7326YGCMfbvoF40dgGNhTVsAZtE_2HSutvFKXRyq06Q65bi_ylqWzJuiodC739ullWV5bLurVz-UopAVtymDErhZjNeKHL6xXqty2_2L6ylxOvX2WV4mFZmkIPBksA67-OLKiLrwwsz7-yB8kngBHMvQs",
  "Scope": "openid profile business email"
}
2018-07-18 16:20:42.221 -06:00 [DBG] Augmenting SignInContext
2018-07-18 16:20:42.221 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 16:20:42.380 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 16:20:42.380 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 16:20:42.380 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 16:20:42.380 -06:00 [DBG] Start token request.
2018-07-18 16:20:42.380 -06:00 [DBG] Start client validation
2018-07-18 16:20:42.380 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 16:20:42.380 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 16:20:42.380 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 16:20:42.380 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 16:20:42.380 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:20:42.381 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 16:20:42.381 -06:00 [DBG] Client validation success
2018-07-18 16:20:42.381 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCU947OP9H:00000003",
  "TimeStamp": "2018-07-18T22:20:42Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:20:42.381 -06:00 [DBG] Start token request validation
2018-07-18 16:20:42.381 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 16:20:42.388 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 16:20:42.388 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "51364412545591eb2a3e5315269c06955cc441e009e51c9fea701dd54be83a92",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "51364412545591eb2a3e5315269c06955cc441e009e51c9fea701dd54be83a92",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 16:20:42.388 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:20:42.388 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 16:20:42.388 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:20:42.401 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:20:42.401 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 16:20:42.401 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 16:20:42.413 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****hZdQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****IMxQ"
    }
  ],
  "ActivityId": "0HLFCU947OP9H:00000003",
  "TimeStamp": "2018-07-18T22:20:42Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:20:42.413 -06:00 [DBG] Token request success.
2018-07-18 16:20:42.421 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 16:20:42.421 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 16:20:42.421 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 16:20:42.421 -06:00 [DBG] Start userinfo request
2018-07-18 16:20:42.421 -06:00 [DBG] Bearer token found in header
2018-07-18 16:20:42.423 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:20:42.423 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:20:42.424 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 16:20:42.424 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531952442,
    "exp": 1531956042,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1531952440,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-18 16:20:42.424 -06:00 [DBG] Creating userinfo response
2018-07-18 16:20:42.424 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 16:20:42.424 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 16:20:42.425 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-18 16:20:42.425 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 16:20:42.426 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-18 16:20:42.426 -06:00 [DBG] End userinfo request
2018-07-18 16:22:32.188 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 16:22:32.188 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 16:22:32.188 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 16:22:32.189 -06:00 [DBG] Start discovery request
2018-07-18 16:22:32.307 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 16:22:32.307 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 16:22:32.307 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 16:22:32.307 -06:00 [DBG] Start key discovery request
2018-07-18 16:22:32.377 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 16:22:32.377 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 16:22:32.377 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 16:22:32.377 -06:00 [DBG] Start authorize request
2018-07-18 16:22:32.378 -06:00 [DBG] No user present in authorize request
2018-07-18 16:22:32.378 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:22:32.378 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:22:32.378 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:22:32.378 -06:00 [DBG] No PKCE used.
2018-07-18 16:22:32.378 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:22:32.378 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfOuGzU9A565pDbyDZB3YgFN9lLqVWPSlUr75i6TUdey6YS2VgPQPKcu-E496JkyavjOEmemRcrmIfE3cuOJkPf5dHWuWqGJZLB87pSSWt-LfEhSn7Wnt-CdZSBvvpmPrJesHLJsUXHJikKp9-8vNZazb__X07upEYH-Up7WUSiDa0G72lMa1jOVhjYRtuDNX7L9OuWnG-nVu3Sl1RbmR27MoNRiAOWNwFpMo9tQ1-Z2N_c0jM1L58loLMazR_tlD_e4lEN0kJcFAYWdocrlN5KdURONO2XgSofIsiXwgMC1KO9Hx0K9aCZ9HujByYEwQw",
  "Nonce": "636675493523605740.NWEwMTU4Y2MtMmZlYi00YzBlLTkxYzctZmYzMDk0NmQxODFkMzU2NjBlZDAtOTI3Zi00YWYxLTg4NjctM2Q4MTJkMGMwNzg0",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675493523605740.NWEwMTU4Y2MtMmZlYi00YzBlLTkxYzctZmYzMDk0NmQxODFkMzU2NjBlZDAtOTI3Zi00YWYxLTg4NjctM2Q4MTJkMGMwNzg0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfOuGzU9A565pDbyDZB3YgFN9lLqVWPSlUr75i6TUdey6YS2VgPQPKcu-E496JkyavjOEmemRcrmIfE3cuOJkPf5dHWuWqGJZLB87pSSWt-LfEhSn7Wnt-CdZSBvvpmPrJesHLJsUXHJikKp9-8vNZazb__X07upEYH-Up7WUSiDa0G72lMa1jOVhjYRtuDNX7L9OuWnG-nVu3Sl1RbmR27MoNRiAOWNwFpMo9tQ1-Z2N_c0jM1L58loLMazR_tlD_e4lEN0kJcFAYWdocrlN5KdURONO2XgSofIsiXwgMC1KO9Hx0K9aCZ9HujByYEwQw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 16:22:32.378 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 16:22:32.380 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:22:32.380 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:22:32.380 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:22:32.380 -06:00 [DBG] No PKCE used.
2018-07-18 16:22:32.380 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:22:32.380 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:22:40.091 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 16:22:40.105 -06:00 [DBG] Augmenting SignInContext
2018-07-18 16:22:40.105 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 16:22:40.105 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 16:22:40.105 -06:00 [DBG] Adding auth_time claim with value: 1531952560
2018-07-18 16:22:40.105 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 16:22:40.106 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCU947OP9I:0000000A",
  "TimeStamp": "2018-07-18T22:22:40Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:22:40.109 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:22:40.109 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:22:40.109 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 16:22:40.109 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 16:22:40.109 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 16:22:40.109 -06:00 [DBG] Start authorize callback request
2018-07-18 16:22:40.109 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:22:40.109 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:22:40.109 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:22:40.109 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:22:40.109 -06:00 [DBG] No PKCE used.
2018-07-18 16:22:40.109 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:22:40.109 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfOuGzU9A565pDbyDZB3YgFN9lLqVWPSlUr75i6TUdey6YS2VgPQPKcu-E496JkyavjOEmemRcrmIfE3cuOJkPf5dHWuWqGJZLB87pSSWt-LfEhSn7Wnt-CdZSBvvpmPrJesHLJsUXHJikKp9-8vNZazb__X07upEYH-Up7WUSiDa0G72lMa1jOVhjYRtuDNX7L9OuWnG-nVu3Sl1RbmR27MoNRiAOWNwFpMo9tQ1-Z2N_c0jM1L58loLMazR_tlD_e4lEN0kJcFAYWdocrlN5KdURONO2XgSofIsiXwgMC1KO9Hx0K9aCZ9HujByYEwQw",
  "Nonce": "636675493523605740.NWEwMTU4Y2MtMmZlYi00YzBlLTkxYzctZmYzMDk0NmQxODFkMzU2NjBlZDAtOTI3Zi00YWYxLTg4NjctM2Q4MTJkMGMwNzg0",
  "SessionId": "b39f1a5070bf8a27e9619ef82ba8dbe7",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675493523605740.NWEwMTU4Y2MtMmZlYi00YzBlLTkxYzctZmYzMDk0NmQxODFkMzU2NjBlZDAtOTI3Zi00YWYxLTg4NjctM2Q4MTJkMGMwNzg0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfOuGzU9A565pDbyDZB3YgFN9lLqVWPSlUr75i6TUdey6YS2VgPQPKcu-E496JkyavjOEmemRcrmIfE3cuOJkPf5dHWuWqGJZLB87pSSWt-LfEhSn7Wnt-CdZSBvvpmPrJesHLJsUXHJikKp9-8vNZazb__X07upEYH-Up7WUSiDa0G72lMa1jOVhjYRtuDNX7L9OuWnG-nVu3Sl1RbmR27MoNRiAOWNwFpMo9tQ1-Z2N_c0jM1L58loLMazR_tlD_e4lEN0kJcFAYWdocrlN5KdURONO2XgSofIsiXwgMC1KO9Hx0K9aCZ9HujByYEwQw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 16:22:40.110 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 16:22:40.111 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 16:22:40.111 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 16:22:40.113 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:22:40.113 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:22:40.113 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:22:40.113 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:22:40.113 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:22:40.113 -06:00 [DBG] No PKCE used.
2018-07-18 16:22:40.113 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:22:40.113 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:22:43.058 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 16:22:43.059 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:22:43.059 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:22:43.059 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:22:43.059 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:22:43.059 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:22:43.059 -06:00 [DBG] No PKCE used.
2018-07-18 16:22:43.059 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:22:43.063 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:22:43.063 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:22:43.063 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 16:22:43.063 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 16:22:43.063 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 16:22:43.063 -06:00 [DBG] Start authorize callback request
2018-07-18 16:22:43.063 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:22:43.063 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:22:43.063 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:22:43.063 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:22:43.063 -06:00 [DBG] No PKCE used.
2018-07-18 16:22:43.063 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:22:43.063 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfOuGzU9A565pDbyDZB3YgFN9lLqVWPSlUr75i6TUdey6YS2VgPQPKcu-E496JkyavjOEmemRcrmIfE3cuOJkPf5dHWuWqGJZLB87pSSWt-LfEhSn7Wnt-CdZSBvvpmPrJesHLJsUXHJikKp9-8vNZazb__X07upEYH-Up7WUSiDa0G72lMa1jOVhjYRtuDNX7L9OuWnG-nVu3Sl1RbmR27MoNRiAOWNwFpMo9tQ1-Z2N_c0jM1L58loLMazR_tlD_e4lEN0kJcFAYWdocrlN5KdURONO2XgSofIsiXwgMC1KO9Hx0K9aCZ9HujByYEwQw",
  "Nonce": "636675493523605740.NWEwMTU4Y2MtMmZlYi00YzBlLTkxYzctZmYzMDk0NmQxODFkMzU2NjBlZDAtOTI3Zi00YWYxLTg4NjctM2Q4MTJkMGMwNzg0",
  "SessionId": "b39f1a5070bf8a27e9619ef82ba8dbe7",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675493523605740.NWEwMTU4Y2MtMmZlYi00YzBlLTkxYzctZmYzMDk0NmQxODFkMzU2NjBlZDAtOTI3Zi00YWYxLTg4NjctM2Q4MTJkMGMwNzg0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfOuGzU9A565pDbyDZB3YgFN9lLqVWPSlUr75i6TUdey6YS2VgPQPKcu-E496JkyavjOEmemRcrmIfE3cuOJkPf5dHWuWqGJZLB87pSSWt-LfEhSn7Wnt-CdZSBvvpmPrJesHLJsUXHJikKp9-8vNZazb__X07upEYH-Up7WUSiDa0G72lMa1jOVhjYRtuDNX7L9OuWnG-nVu3Sl1RbmR27MoNRiAOWNwFpMo9tQ1-Z2N_c0jM1L58loLMazR_tlD_e4lEN0kJcFAYWdocrlN5KdURONO2XgSofIsiXwgMC1KO9Hx0K9aCZ9HujByYEwQw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 16:22:43.064 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 16:22:43.065 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 16:22:43.065 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-18 16:22:43.065 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:22:43.065 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 16:22:43.069 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 16:22:43.069 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 16:22:43.069 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 16:22:43.081 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****yirA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****fecf"
    }
  ],
  "ActivityId": "0HLFCU947OP9I:0000000E",
  "TimeStamp": "2018-07-18T22:22:43Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:22:43.081 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfOuGzU9A565pDbyDZB3YgFN9lLqVWPSlUr75i6TUdey6YS2VgPQPKcu-E496JkyavjOEmemRcrmIfE3cuOJkPf5dHWuWqGJZLB87pSSWt-LfEhSn7Wnt-CdZSBvvpmPrJesHLJsUXHJikKp9-8vNZazb__X07upEYH-Up7WUSiDa0G72lMa1jOVhjYRtuDNX7L9OuWnG-nVu3Sl1RbmR27MoNRiAOWNwFpMo9tQ1-Z2N_c0jM1L58loLMazR_tlD_e4lEN0kJcFAYWdocrlN5KdURONO2XgSofIsiXwgMC1KO9Hx0K9aCZ9HujByYEwQw",
  "Scope": "openid profile business email"
}
2018-07-18 16:22:43.081 -06:00 [DBG] Augmenting SignInContext
2018-07-18 16:22:43.081 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 16:22:43.189 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 16:22:43.190 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 16:22:43.190 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 16:22:43.190 -06:00 [DBG] Start token request.
2018-07-18 16:22:43.190 -06:00 [DBG] Start client validation
2018-07-18 16:22:43.190 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 16:22:43.190 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 16:22:43.190 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 16:22:43.190 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 16:22:43.190 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:22:43.190 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 16:22:43.190 -06:00 [DBG] Client validation success
2018-07-18 16:22:43.190 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCU947OP9J:00000003",
  "TimeStamp": "2018-07-18T22:22:43Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:22:43.190 -06:00 [DBG] Start token request validation
2018-07-18 16:22:43.190 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 16:22:43.197 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 16:22:43.197 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "9e130e072ad51018911503a8c6b59f4d6f9319759c1ab8f2945643840105fecf",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "9e130e072ad51018911503a8c6b59f4d6f9319759c1ab8f2945643840105fecf",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 16:22:43.197 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:22:43.197 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 16:22:43.198 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:22:43.210 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:22:43.210 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 16:22:43.210 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 16:22:43.222 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****n6Tw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****aoPg"
    }
  ],
  "ActivityId": "0HLFCU947OP9J:00000003",
  "TimeStamp": "2018-07-18T22:22:43Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:22:43.222 -06:00 [DBG] Token request success.
2018-07-18 16:22:43.230 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 16:22:43.230 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 16:22:43.230 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 16:22:43.230 -06:00 [DBG] Start userinfo request
2018-07-18 16:22:43.230 -06:00 [DBG] Bearer token found in header
2018-07-18 16:22:43.232 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:22:43.232 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:22:43.233 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 16:22:43.233 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531952563,
    "exp": 1531956163,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1531952560,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-18 16:22:43.233 -06:00 [DBG] Creating userinfo response
2018-07-18 16:22:43.233 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 16:22:43.233 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 16:22:43.233 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-18 16:22:43.233 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 16:22:43.235 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-18 16:22:43.235 -06:00 [DBG] End userinfo request
2018-07-18 16:23:42.046 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 16:23:42.047 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 16:23:42.047 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 16:23:42.047 -06:00 [DBG] Start discovery request
2018-07-18 16:23:42.165 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 16:23:42.165 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 16:23:42.165 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 16:23:42.165 -06:00 [DBG] Start key discovery request
2018-07-18 16:23:42.256 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 16:23:42.257 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 16:23:42.257 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 16:23:42.257 -06:00 [DBG] Start authorize request
2018-07-18 16:23:42.257 -06:00 [DBG] No user present in authorize request
2018-07-18 16:23:42.257 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:23:42.257 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:23:42.257 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:23:42.257 -06:00 [DBG] No PKCE used.
2018-07-18 16:23:42.257 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:23:42.257 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebQ5TpKVH1XSRFH68C8tJr-HEBFMOYnq3IGBGwh7QVozr3RRgiaCvkpV14XsOFlJn5WVef7XrnnwyiX8rPObbUwUZxJRHAMUrUf-ykufqsf7Z9sEmBXBYHB-SZpeVdH-07STaTcFZYMCaKs38VuvJHNU4EZ_z2TWqbd-VMRZtFfbQ59T-GYM2c6cZ_VDrsN1hE3V4YwOzP1X8DXIomGkLWi8HqP63Q6U334J-6T9-O1L2osWyeP22QNMRR6PizXHiIS9VQM9wunFrl6GpVBSRyAMzojsedyT0IZBf6WoHjrMXi55s-9jG4n9mocxrn2EE",
  "Nonce": "636675494222392020.NzQxNzQ0MzgtYTkyMS00ODE5LWI3MjAtOGQ4MzliOGEwMzYyMDJiODc3ZDMtOWIzZi00YTBhLTk3NDAtYzc5Njg1Y2NkMTNk",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675494222392020.NzQxNzQ0MzgtYTkyMS00ODE5LWI3MjAtOGQ4MzliOGEwMzYyMDJiODc3ZDMtOWIzZi00YTBhLTk3NDAtYzc5Njg1Y2NkMTNk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebQ5TpKVH1XSRFH68C8tJr-HEBFMOYnq3IGBGwh7QVozr3RRgiaCvkpV14XsOFlJn5WVef7XrnnwyiX8rPObbUwUZxJRHAMUrUf-ykufqsf7Z9sEmBXBYHB-SZpeVdH-07STaTcFZYMCaKs38VuvJHNU4EZ_z2TWqbd-VMRZtFfbQ59T-GYM2c6cZ_VDrsN1hE3V4YwOzP1X8DXIomGkLWi8HqP63Q6U334J-6T9-O1L2osWyeP22QNMRR6PizXHiIS9VQM9wunFrl6GpVBSRyAMzojsedyT0IZBf6WoHjrMXi55s-9jG4n9mocxrn2EE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 16:23:42.257 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 16:23:42.259 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:23:42.260 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:23:42.260 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:23:42.260 -06:00 [DBG] No PKCE used.
2018-07-18 16:23:42.260 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:23:42.260 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:23:49.493 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 16:23:49.507 -06:00 [DBG] Augmenting SignInContext
2018-07-18 16:23:49.507 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 16:23:49.507 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 16:23:49.507 -06:00 [DBG] Adding auth_time claim with value: 1531952629
2018-07-18 16:23:49.508 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 16:23:49.508 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCU947OP9I:00000011",
  "TimeStamp": "2018-07-18T22:23:49Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:23:49.511 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:23:49.511 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:23:49.511 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 16:23:49.511 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 16:23:49.511 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 16:23:49.511 -06:00 [DBG] Start authorize callback request
2018-07-18 16:23:49.511 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:23:49.511 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:23:49.512 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:23:49.512 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:23:49.512 -06:00 [DBG] No PKCE used.
2018-07-18 16:23:49.512 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:23:49.512 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebQ5TpKVH1XSRFH68C8tJr-HEBFMOYnq3IGBGwh7QVozr3RRgiaCvkpV14XsOFlJn5WVef7XrnnwyiX8rPObbUwUZxJRHAMUrUf-ykufqsf7Z9sEmBXBYHB-SZpeVdH-07STaTcFZYMCaKs38VuvJHNU4EZ_z2TWqbd-VMRZtFfbQ59T-GYM2c6cZ_VDrsN1hE3V4YwOzP1X8DXIomGkLWi8HqP63Q6U334J-6T9-O1L2osWyeP22QNMRR6PizXHiIS9VQM9wunFrl6GpVBSRyAMzojsedyT0IZBf6WoHjrMXi55s-9jG4n9mocxrn2EE",
  "Nonce": "636675494222392020.NzQxNzQ0MzgtYTkyMS00ODE5LWI3MjAtOGQ4MzliOGEwMzYyMDJiODc3ZDMtOWIzZi00YTBhLTk3NDAtYzc5Njg1Y2NkMTNk",
  "SessionId": "ddaa8aa6e80910f50cae80770f17ad2e",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675494222392020.NzQxNzQ0MzgtYTkyMS00ODE5LWI3MjAtOGQ4MzliOGEwMzYyMDJiODc3ZDMtOWIzZi00YTBhLTk3NDAtYzc5Njg1Y2NkMTNk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebQ5TpKVH1XSRFH68C8tJr-HEBFMOYnq3IGBGwh7QVozr3RRgiaCvkpV14XsOFlJn5WVef7XrnnwyiX8rPObbUwUZxJRHAMUrUf-ykufqsf7Z9sEmBXBYHB-SZpeVdH-07STaTcFZYMCaKs38VuvJHNU4EZ_z2TWqbd-VMRZtFfbQ59T-GYM2c6cZ_VDrsN1hE3V4YwOzP1X8DXIomGkLWi8HqP63Q6U334J-6T9-O1L2osWyeP22QNMRR6PizXHiIS9VQM9wunFrl6GpVBSRyAMzojsedyT0IZBf6WoHjrMXi55s-9jG4n9mocxrn2EE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 16:23:49.513 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 16:23:49.513 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 16:23:49.513 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 16:23:49.515 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:23:49.516 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:23:49.516 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:23:49.516 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:23:49.516 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:23:49.516 -06:00 [DBG] No PKCE used.
2018-07-18 16:23:49.516 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:23:49.516 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:23:51.842 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 16:23:51.842 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:23:51.842 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:23:51.842 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:23:51.843 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:23:51.843 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:23:51.843 -06:00 [DBG] No PKCE used.
2018-07-18 16:23:51.843 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:23:51.846 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:23:51.846 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:23:51.846 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 16:23:51.847 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 16:23:51.847 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 16:23:51.847 -06:00 [DBG] Start authorize callback request
2018-07-18 16:23:51.847 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:23:51.847 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:23:51.847 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:23:51.847 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:23:51.847 -06:00 [DBG] No PKCE used.
2018-07-18 16:23:51.847 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:23:51.847 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebQ5TpKVH1XSRFH68C8tJr-HEBFMOYnq3IGBGwh7QVozr3RRgiaCvkpV14XsOFlJn5WVef7XrnnwyiX8rPObbUwUZxJRHAMUrUf-ykufqsf7Z9sEmBXBYHB-SZpeVdH-07STaTcFZYMCaKs38VuvJHNU4EZ_z2TWqbd-VMRZtFfbQ59T-GYM2c6cZ_VDrsN1hE3V4YwOzP1X8DXIomGkLWi8HqP63Q6U334J-6T9-O1L2osWyeP22QNMRR6PizXHiIS9VQM9wunFrl6GpVBSRyAMzojsedyT0IZBf6WoHjrMXi55s-9jG4n9mocxrn2EE",
  "Nonce": "636675494222392020.NzQxNzQ0MzgtYTkyMS00ODE5LWI3MjAtOGQ4MzliOGEwMzYyMDJiODc3ZDMtOWIzZi00YTBhLTk3NDAtYzc5Njg1Y2NkMTNk",
  "SessionId": "ddaa8aa6e80910f50cae80770f17ad2e",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675494222392020.NzQxNzQ0MzgtYTkyMS00ODE5LWI3MjAtOGQ4MzliOGEwMzYyMDJiODc3ZDMtOWIzZi00YTBhLTk3NDAtYzc5Njg1Y2NkMTNk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebQ5TpKVH1XSRFH68C8tJr-HEBFMOYnq3IGBGwh7QVozr3RRgiaCvkpV14XsOFlJn5WVef7XrnnwyiX8rPObbUwUZxJRHAMUrUf-ykufqsf7Z9sEmBXBYHB-SZpeVdH-07STaTcFZYMCaKs38VuvJHNU4EZ_z2TWqbd-VMRZtFfbQ59T-GYM2c6cZ_VDrsN1hE3V4YwOzP1X8DXIomGkLWi8HqP63Q6U334J-6T9-O1L2osWyeP22QNMRR6PizXHiIS9VQM9wunFrl6GpVBSRyAMzojsedyT0IZBf6WoHjrMXi55s-9jG4n9mocxrn2EE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 16:23:51.848 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 16:23:51.849 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 16:23:51.849 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-18 16:23:51.849 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:23:51.849 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 16:23:51.853 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 16:23:51.853 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 16:23:51.853 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 16:23:51.865 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****q5_w"
    },
    {
      "TokenType": "code",
      "TokenValue": "****5599"
    }
  ],
  "ActivityId": "0HLFCU947OP9I:00000015",
  "TimeStamp": "2018-07-18T22:23:51Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:23:51.865 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebQ5TpKVH1XSRFH68C8tJr-HEBFMOYnq3IGBGwh7QVozr3RRgiaCvkpV14XsOFlJn5WVef7XrnnwyiX8rPObbUwUZxJRHAMUrUf-ykufqsf7Z9sEmBXBYHB-SZpeVdH-07STaTcFZYMCaKs38VuvJHNU4EZ_z2TWqbd-VMRZtFfbQ59T-GYM2c6cZ_VDrsN1hE3V4YwOzP1X8DXIomGkLWi8HqP63Q6U334J-6T9-O1L2osWyeP22QNMRR6PizXHiIS9VQM9wunFrl6GpVBSRyAMzojsedyT0IZBf6WoHjrMXi55s-9jG4n9mocxrn2EE",
  "Scope": "openid profile business email"
}
2018-07-18 16:23:51.865 -06:00 [DBG] Augmenting SignInContext
2018-07-18 16:23:51.865 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 16:23:52.013 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 16:23:52.013 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 16:23:52.013 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 16:23:52.013 -06:00 [DBG] Start token request.
2018-07-18 16:23:52.013 -06:00 [DBG] Start client validation
2018-07-18 16:23:52.013 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 16:23:52.013 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 16:23:52.013 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 16:23:52.013 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 16:23:52.013 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:23:52.013 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 16:23:52.013 -06:00 [DBG] Client validation success
2018-07-18 16:23:52.013 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCU947OP9K:00000003",
  "TimeStamp": "2018-07-18T22:23:52Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:23:52.013 -06:00 [DBG] Start token request validation
2018-07-18 16:23:52.013 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 16:23:52.021 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 16:23:52.021 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "5a77342d00579944a418d0021dad4090a87a02156ce619062d97a095957f5599",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "5a77342d00579944a418d0021dad4090a87a02156ce619062d97a095957f5599",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 16:23:52.021 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:23:52.021 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 16:23:52.021 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:23:52.033 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:23:52.033 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 16:23:52.034 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 16:23:52.045 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****meQQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****0YSw"
    }
  ],
  "ActivityId": "0HLFCU947OP9K:00000003",
  "TimeStamp": "2018-07-18T22:23:52Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:23:52.045 -06:00 [DBG] Token request success.
2018-07-18 16:23:52.053 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 16:23:52.053 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 16:23:52.053 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 16:23:52.053 -06:00 [DBG] Start userinfo request
2018-07-18 16:23:52.054 -06:00 [DBG] Bearer token found in header
2018-07-18 16:23:52.056 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:23:52.056 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:23:52.057 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 16:23:52.057 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531952632,
    "exp": 1531956232,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1531952629,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-18 16:23:52.057 -06:00 [DBG] Creating userinfo response
2018-07-18 16:23:52.057 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 16:23:52.057 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 16:23:52.057 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-18 16:23:52.057 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 16:23:52.058 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-18 16:23:52.058 -06:00 [DBG] End userinfo request
2018-07-18 16:25:24.557 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-18 16:25:24.557 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-18 16:25:24.557 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-18 16:25:24.557 -06:00 [DBG] Start discovery request
2018-07-18 16:25:24.674 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-18 16:25:24.674 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-18 16:25:24.674 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-18 16:25:24.674 -06:00 [DBG] Start key discovery request
2018-07-18 16:25:24.745 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-18 16:25:24.745 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-18 16:25:24.745 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-18 16:25:24.745 -06:00 [DBG] Start authorize request
2018-07-18 16:25:24.745 -06:00 [DBG] No user present in authorize request
2018-07-18 16:25:24.745 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:25:24.745 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:25:24.745 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:25:24.745 -06:00 [DBG] No PKCE used.
2018-07-18 16:25:24.745 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:25:24.745 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfonilu0hlobqMRwmGe-lz7EO-wyjh2Yp1hTrF-K3XDRRSkqETqIv7S20lBSz5FQYFV88tsSnkEyS1HUfeNIWJCs_sZFqlP42WV89dOtge-iyGBlsKMxmdAsWiul95CDEHMtE5_b46XxdE5NcPYSfqMFCftp7zF0WMrmsRNWdmctX7h-ZuusLrBtvqM06niPNXQXptb8DNeY7MASm8rZ3emmWcwSvNg6x8qwog7XzyqdQC9IdGihpatLReCKmi0OXMfycSOZJekxKy9hMBa0PNIMHAoN259IKWHUsbocoFsENk1PPUHeYjvaPDb9ydQW-Y",
  "Nonce": "636675495247277580.NDFkNjhlYTQtY2E3Zi00YTQ5LTg4NTgtNzUzNzE3YmNiOTViNTY2MjhjZTYtZmFkNi00MTdmLWFhZTctMzI4ODJjNzM2MjQ4",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675495247277580.NDFkNjhlYTQtY2E3Zi00YTQ5LTg4NTgtNzUzNzE3YmNiOTViNTY2MjhjZTYtZmFkNi00MTdmLWFhZTctMzI4ODJjNzM2MjQ4",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfonilu0hlobqMRwmGe-lz7EO-wyjh2Yp1hTrF-K3XDRRSkqETqIv7S20lBSz5FQYFV88tsSnkEyS1HUfeNIWJCs_sZFqlP42WV89dOtge-iyGBlsKMxmdAsWiul95CDEHMtE5_b46XxdE5NcPYSfqMFCftp7zF0WMrmsRNWdmctX7h-ZuusLrBtvqM06niPNXQXptb8DNeY7MASm8rZ3emmWcwSvNg6x8qwog7XzyqdQC9IdGihpatLReCKmi0OXMfycSOZJekxKy9hMBa0PNIMHAoN259IKWHUsbocoFsENk1PPUHeYjvaPDb9ydQW-Y",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 16:25:24.745 -06:00 [INF] Showing login: User is not authenticated
2018-07-18 16:25:24.748 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:25:24.748 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:25:24.748 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:25:24.748 -06:00 [DBG] No PKCE used.
2018-07-18 16:25:24.748 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:25:24.748 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:25:30.709 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 16:25:30.724 -06:00 [DBG] Augmenting SignInContext
2018-07-18 16:25:30.724 -06:00 [DBG] Adding idp claim with value: local
2018-07-18 16:25:30.724 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-18 16:25:30.724 -06:00 [DBG] Adding auth_time claim with value: 1531952730
2018-07-18 16:25:30.724 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 16:25:30.725 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFCU947OP9I:00000018",
  "TimeStamp": "2018-07-18T22:25:30Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:25:30.727 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:25:30.727 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:25:30.727 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 16:25:30.727 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 16:25:30.727 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 16:25:30.727 -06:00 [DBG] Start authorize callback request
2018-07-18 16:25:30.727 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:25:30.728 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:25:30.728 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:25:30.728 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:25:30.728 -06:00 [DBG] No PKCE used.
2018-07-18 16:25:30.728 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:25:30.728 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfonilu0hlobqMRwmGe-lz7EO-wyjh2Yp1hTrF-K3XDRRSkqETqIv7S20lBSz5FQYFV88tsSnkEyS1HUfeNIWJCs_sZFqlP42WV89dOtge-iyGBlsKMxmdAsWiul95CDEHMtE5_b46XxdE5NcPYSfqMFCftp7zF0WMrmsRNWdmctX7h-ZuusLrBtvqM06niPNXQXptb8DNeY7MASm8rZ3emmWcwSvNg6x8qwog7XzyqdQC9IdGihpatLReCKmi0OXMfycSOZJekxKy9hMBa0PNIMHAoN259IKWHUsbocoFsENk1PPUHeYjvaPDb9ydQW-Y",
  "Nonce": "636675495247277580.NDFkNjhlYTQtY2E3Zi00YTQ5LTg4NTgtNzUzNzE3YmNiOTViNTY2MjhjZTYtZmFkNi00MTdmLWFhZTctMzI4ODJjNzM2MjQ4",
  "SessionId": "295f0085c5aaf9258e746444ab3196a7",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675495247277580.NDFkNjhlYTQtY2E3Zi00YTQ5LTg4NTgtNzUzNzE3YmNiOTViNTY2MjhjZTYtZmFkNi00MTdmLWFhZTctMzI4ODJjNzM2MjQ4",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfonilu0hlobqMRwmGe-lz7EO-wyjh2Yp1hTrF-K3XDRRSkqETqIv7S20lBSz5FQYFV88tsSnkEyS1HUfeNIWJCs_sZFqlP42WV89dOtge-iyGBlsKMxmdAsWiul95CDEHMtE5_b46XxdE5NcPYSfqMFCftp7zF0WMrmsRNWdmctX7h-ZuusLrBtvqM06niPNXQXptb8DNeY7MASm8rZ3emmWcwSvNg6x8qwog7XzyqdQC9IdGihpatLReCKmi0OXMfycSOZJekxKy9hMBa0PNIMHAoN259IKWHUsbocoFsENk1PPUHeYjvaPDb9ydQW-Y",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 16:25:30.729 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 16:25:30.729 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 16:25:30.729 -06:00 [INF] Showing consent: User has not yet consented
2018-07-18 16:25:30.731 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:25:30.731 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:25:30.732 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:25:30.732 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:25:30.732 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:25:30.732 -06:00 [DBG] No PKCE used.
2018-07-18 16:25:30.732 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:25:30.732 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:25:34.219 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-18 16:25:34.220 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:25:34.220 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:25:34.220 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:25:34.220 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:25:34.220 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:25:34.220 -06:00 [DBG] No PKCE used.
2018-07-18 16:25:34.220 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:25:34.223 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:25:34.224 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-18 16:25:34.224 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-18 16:25:34.224 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-18 16:25:34.224 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-18 16:25:34.224 -06:00 [DBG] Start authorize callback request
2018-07-18 16:25:34.224 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:25:34.224 -06:00 [DBG] Start authorize request protocol validation
2018-07-18 16:25:34.224 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:25:34.224 -06:00 [DBG] Checking for PKCE parameters
2018-07-18 16:25:34.224 -06:00 [DBG] No PKCE used.
2018-07-18 16:25:34.224 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-18 16:25:34.224 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfonilu0hlobqMRwmGe-lz7EO-wyjh2Yp1hTrF-K3XDRRSkqETqIv7S20lBSz5FQYFV88tsSnkEyS1HUfeNIWJCs_sZFqlP42WV89dOtge-iyGBlsKMxmdAsWiul95CDEHMtE5_b46XxdE5NcPYSfqMFCftp7zF0WMrmsRNWdmctX7h-ZuusLrBtvqM06niPNXQXptb8DNeY7MASm8rZ3emmWcwSvNg6x8qwog7XzyqdQC9IdGihpatLReCKmi0OXMfycSOZJekxKy9hMBa0PNIMHAoN259IKWHUsbocoFsENk1PPUHeYjvaPDb9ydQW-Y",
  "Nonce": "636675495247277580.NDFkNjhlYTQtY2E3Zi00YTQ5LTg4NTgtNzUzNzE3YmNiOTViNTY2MjhjZTYtZmFkNi00MTdmLWFhZTctMzI4ODJjNzM2MjQ4",
  "SessionId": "295f0085c5aaf9258e746444ab3196a7",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636675495247277580.NDFkNjhlYTQtY2E3Zi00YTQ5LTg4NTgtNzUzNzE3YmNiOTViNTY2MjhjZTYtZmFkNi00MTdmLWFhZTctMzI4ODJjNzM2MjQ4",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfonilu0hlobqMRwmGe-lz7EO-wyjh2Yp1hTrF-K3XDRRSkqETqIv7S20lBSz5FQYFV88tsSnkEyS1HUfeNIWJCs_sZFqlP42WV89dOtge-iyGBlsKMxmdAsWiul95CDEHMtE5_b46XxdE5NcPYSfqMFCftp7zF0WMrmsRNWdmctX7h-ZuusLrBtvqM06niPNXQXptb8DNeY7MASm8rZ3emmWcwSvNg6x8qwog7XzyqdQC9IdGihpatLReCKmi0OXMfycSOZJekxKy9hMBa0PNIMHAoN259IKWHUsbocoFsENk1PPUHeYjvaPDb9ydQW-Y",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-18 16:25:34.225 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-18 16:25:34.225 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-18 16:25:34.226 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-18 16:25:34.226 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:25:34.226 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-18 16:25:34.230 -06:00 [DBG] Creating Implicit Flow response.
2018-07-18 16:25:34.230 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 16:25:34.230 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 16:25:34.242 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****u2YQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****a7a9"
    }
  ],
  "ActivityId": "0HLFCU947OP9I:0000001C",
  "TimeStamp": "2018-07-18T22:25:34Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:25:34.242 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfonilu0hlobqMRwmGe-lz7EO-wyjh2Yp1hTrF-K3XDRRSkqETqIv7S20lBSz5FQYFV88tsSnkEyS1HUfeNIWJCs_sZFqlP42WV89dOtge-iyGBlsKMxmdAsWiul95CDEHMtE5_b46XxdE5NcPYSfqMFCftp7zF0WMrmsRNWdmctX7h-ZuusLrBtvqM06niPNXQXptb8DNeY7MASm8rZ3emmWcwSvNg6x8qwog7XzyqdQC9IdGihpatLReCKmi0OXMfycSOZJekxKy9hMBa0PNIMHAoN259IKWHUsbocoFsENk1PPUHeYjvaPDb9ydQW-Y",
  "Scope": "openid profile business email"
}
2018-07-18 16:25:34.242 -06:00 [DBG] Augmenting SignInContext
2018-07-18 16:25:34.242 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-18 16:25:34.391 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-18 16:25:34.391 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-18 16:25:34.391 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-18 16:25:34.391 -06:00 [DBG] Start token request.
2018-07-18 16:25:34.391 -06:00 [DBG] Start client validation
2018-07-18 16:25:34.391 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-18 16:25:34.391 -06:00 [DBG] Start parsing for secret in post body
2018-07-18 16:25:34.391 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-18 16:25:34.391 -06:00 [DBG] Secret id found: ideaBox
2018-07-18 16:25:34.391 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:25:34.392 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-18 16:25:34.392 -06:00 [DBG] Client validation success
2018-07-18 16:25:34.392 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFCU947OP9L:00000003",
  "TimeStamp": "2018-07-18T22:25:34Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:25:34.392 -06:00 [DBG] Start token request validation
2018-07-18 16:25:34.392 -06:00 [DBG] Start validation of authorization code token request
2018-07-18 16:25:34.399 -06:00 [DBG] Validation of authorization code token request success
2018-07-18 16:25:34.399 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "def5d84414946ec38b0f9624b09f339ef99b5d2404b9cdb6afc913449322a7a9",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "def5d84414946ec38b0f9624b09f339ef99b5d2404b9cdb6afc913449322a7a9",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-18 16:25:34.399 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:25:34.399 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-18 16:25:34.399 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-18 16:25:34.411 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:25:34.412 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-18 16:25:34.412 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-18 16:25:34.423 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****U5IQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****1b5w"
    }
  ],
  "ActivityId": "0HLFCU947OP9L:00000003",
  "TimeStamp": "2018-07-18T22:25:34Z",
  "ProcessId": 3673,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-18 16:25:34.423 -06:00 [DBG] Token request success.
2018-07-18 16:25:34.431 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-18 16:25:34.431 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-18 16:25:34.431 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-18 16:25:34.431 -06:00 [DBG] Start userinfo request
2018-07-18 16:25:34.432 -06:00 [DBG] Bearer token found in header
2018-07-18 16:25:34.433 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:25:34.434 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-18 16:25:34.435 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-18 16:25:34.435 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1531952734,
    "exp": 1531956334,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1531952730,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-18 16:25:34.435 -06:00 [DBG] Creating userinfo response
2018-07-18 16:25:34.435 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 16:25:34.435 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 16:25:34.435 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-18 16:25:34.435 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-18 16:25:34.436 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-18 16:25:34.436 -06:00 [DBG] End userinfo request
2018-07-19 09:15:57.783 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 09:15:57.813 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 09:15:57.816 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 09:15:57.816 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 09:15:57.816 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 09:15:57.817 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 09:16:59.986 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-19 09:17:00.104 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-19 09:17:00.104 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-19 09:17:00.107 -06:00 [DBG] Start discovery request
2018-07-19 09:17:00.298 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-19 09:17:00.299 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-19 09:17:00.299 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-19 09:17:00.302 -06:00 [DBG] Start key discovery request
2018-07-19 09:17:00.361 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-19 09:17:00.365 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-19 09:17:00.365 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-19 09:17:00.367 -06:00 [DBG] Start authorize request
2018-07-19 09:17:00.384 -06:00 [DBG] No user present in authorize request
2018-07-19 09:17:00.388 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:17:00.398 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:17:00.403 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:17:00.404 -06:00 [DBG] No PKCE used.
2018-07-19 09:17:00.428 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:17:00.438 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfYYQOMotYWQOpLIASCU_e0pZb--aHKqckJEW98JefPxAKQoLJamaHGpMPZHZY87J2cfIq0xixWrAbHTd22PfSOdQ9CiY-4ywkE1Yb-h9Nl0-Rf2rEwtL3tZ6atSzQ1MUvkz74sZzQgzGtBkr3L9-UDbLyjTyIKCle_TImxU6T4VZcOF6YvetxLdK3NNet9mDrcB_f95u_SKGI7IJkGtZ2h2ZEuybeaEeGK_LP2mAyMcrEBUUdua-gjL2uU0P6XBAK_YaLGnjDnn9PinqII_bjBsIbroQbUUZUhvgi3jXgviKAHBTIQtfE4mbwGxRru46g",
  "Nonce": "636676102203378310.ZjFiZGM5OTgtZjdhMy00NDFkLWFhMjctNjNlMzQyNmZjYTYwYzE2MGEwNGEtM2YxMi00YTJkLWIxNDgtMGJmYTZkYjBlNGMy",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676102203378310.ZjFiZGM5OTgtZjdhMy00NDFkLWFhMjctNjNlMzQyNmZjYTYwYzE2MGEwNGEtM2YxMi00YTJkLWIxNDgtMGJmYTZkYjBlNGMy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfYYQOMotYWQOpLIASCU_e0pZb--aHKqckJEW98JefPxAKQoLJamaHGpMPZHZY87J2cfIq0xixWrAbHTd22PfSOdQ9CiY-4ywkE1Yb-h9Nl0-Rf2rEwtL3tZ6atSzQ1MUvkz74sZzQgzGtBkr3L9-UDbLyjTyIKCle_TImxU6T4VZcOF6YvetxLdK3NNet9mDrcB_f95u_SKGI7IJkGtZ2h2ZEuybeaEeGK_LP2mAyMcrEBUUdua-gjL2uU0P6XBAK_YaLGnjDnn9PinqII_bjBsIbroQbUUZUhvgi3jXgviKAHBTIQtfE4mbwGxRru46g",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:17:00.444 -06:00 [INF] Showing login: User is not authenticated
2018-07-19 09:17:00.741 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:17:00.741 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:17:00.741 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:17:00.741 -06:00 [DBG] No PKCE used.
2018-07-19 09:17:00.742 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:17:00.744 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:17:13.827 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 09:17:15.020 -06:00 [DBG] Augmenting SignInContext
2018-07-19 09:17:15.022 -06:00 [DBG] Adding idp claim with value: local
2018-07-19 09:17:15.022 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-19 09:17:15.022 -06:00 [DBG] Adding auth_time claim with value: 1532013435
2018-07-19 09:17:15.050 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 09:17:15.079 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFDHAM7MAE1:00000003",
  "TimeStamp": "2018-07-19T15:17:15Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:17:15.100 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:17:15.100 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:17:15.100 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 09:17:15.100 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 09:17:15.101 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 09:17:15.104 -06:00 [DBG] Start authorize callback request
2018-07-19 09:17:15.107 -06:00 [DBG] User in authorize request: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-19 09:17:15.107 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:17:15.107 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:17:15.107 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:17:15.107 -06:00 [DBG] No PKCE used.
2018-07-19 09:17:15.107 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:17:15.107 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfYYQOMotYWQOpLIASCU_e0pZb--aHKqckJEW98JefPxAKQoLJamaHGpMPZHZY87J2cfIq0xixWrAbHTd22PfSOdQ9CiY-4ywkE1Yb-h9Nl0-Rf2rEwtL3tZ6atSzQ1MUvkz74sZzQgzGtBkr3L9-UDbLyjTyIKCle_TImxU6T4VZcOF6YvetxLdK3NNet9mDrcB_f95u_SKGI7IJkGtZ2h2ZEuybeaEeGK_LP2mAyMcrEBUUdua-gjL2uU0P6XBAK_YaLGnjDnn9PinqII_bjBsIbroQbUUZUhvgi3jXgviKAHBTIQtfE4mbwGxRru46g",
  "Nonce": "636676102203378310.ZjFiZGM5OTgtZjdhMy00NDFkLWFhMjctNjNlMzQyNmZjYTYwYzE2MGEwNGEtM2YxMi00YTJkLWIxNDgtMGJmYTZkYjBlNGMy",
  "SessionId": "ce1eb74a32ae989b8cec14e25ec3781e",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676102203378310.ZjFiZGM5OTgtZjdhMy00NDFkLWFhMjctNjNlMzQyNmZjYTYwYzE2MGEwNGEtM2YxMi00YTJkLWIxNDgtMGJmYTZkYjBlNGMy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfYYQOMotYWQOpLIASCU_e0pZb--aHKqckJEW98JefPxAKQoLJamaHGpMPZHZY87J2cfIq0xixWrAbHTd22PfSOdQ9CiY-4ywkE1Yb-h9Nl0-Rf2rEwtL3tZ6atSzQ1MUvkz74sZzQgzGtBkr3L9-UDbLyjTyIKCle_TImxU6T4VZcOF6YvetxLdK3NNet9mDrcB_f95u_SKGI7IJkGtZ2h2ZEuybeaEeGK_LP2mAyMcrEBUUdua-gjL2uU0P6XBAK_YaLGnjDnn9PinqII_bjBsIbroQbUUZUhvgi3jXgviKAHBTIQtfE4mbwGxRru46g",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:17:15.145 -06:00 [DBG] user_consent grant with value: ideaBox|9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 not found in store.
2018-07-19 09:17:15.145 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 09:17:15.145 -06:00 [INF] Showing consent: User has not yet consented
2018-07-19 09:17:15.147 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:17:15.147 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:17:15.174 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:17:15.174 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:17:15.174 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:17:15.174 -06:00 [DBG] No PKCE used.
2018-07-19 09:17:15.174 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:17:15.174 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:17:19.838 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 09:17:19.839 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:17:19.839 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:17:19.858 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:17:19.858 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:17:19.858 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:17:19.858 -06:00 [DBG] No PKCE used.
2018-07-19 09:17:19.858 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:17:19.872 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:17:19.872 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:17:19.872 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 09:17:19.873 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 09:17:19.873 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 09:17:19.873 -06:00 [DBG] Start authorize callback request
2018-07-19 09:17:19.901 -06:00 [DBG] User in authorize request: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-19 09:17:19.901 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:17:19.901 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:17:19.901 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:17:19.901 -06:00 [DBG] No PKCE used.
2018-07-19 09:17:19.901 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:17:19.901 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfYYQOMotYWQOpLIASCU_e0pZb--aHKqckJEW98JefPxAKQoLJamaHGpMPZHZY87J2cfIq0xixWrAbHTd22PfSOdQ9CiY-4ywkE1Yb-h9Nl0-Rf2rEwtL3tZ6atSzQ1MUvkz74sZzQgzGtBkr3L9-UDbLyjTyIKCle_TImxU6T4VZcOF6YvetxLdK3NNet9mDrcB_f95u_SKGI7IJkGtZ2h2ZEuybeaEeGK_LP2mAyMcrEBUUdua-gjL2uU0P6XBAK_YaLGnjDnn9PinqII_bjBsIbroQbUUZUhvgi3jXgviKAHBTIQtfE4mbwGxRru46g",
  "Nonce": "636676102203378310.ZjFiZGM5OTgtZjdhMy00NDFkLWFhMjctNjNlMzQyNmZjYTYwYzE2MGEwNGEtM2YxMi00YTJkLWIxNDgtMGJmYTZkYjBlNGMy",
  "SessionId": "ce1eb74a32ae989b8cec14e25ec3781e",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676102203378310.ZjFiZGM5OTgtZjdhMy00NDFkLWFhMjctNjNlMzQyNmZjYTYwYzE2MGEwNGEtM2YxMi00YTJkLWIxNDgtMGJmYTZkYjBlNGMy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfYYQOMotYWQOpLIASCU_e0pZb--aHKqckJEW98JefPxAKQoLJamaHGpMPZHZY87J2cfIq0xixWrAbHTd22PfSOdQ9CiY-4ywkE1Yb-h9Nl0-Rf2rEwtL3tZ6atSzQ1MUvkz74sZzQgzGtBkr3L9-UDbLyjTyIKCle_TImxU6T4VZcOF6YvetxLdK3NNet9mDrcB_f95u_SKGI7IJkGtZ2h2ZEuybeaEeGK_LP2mAyMcrEBUUdua-gjL2uU0P6XBAK_YaLGnjDnn9PinqII_bjBsIbroQbUUZUhvgi3jXgviKAHBTIQtfE4mbwGxRru46g",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:17:19.903 -06:00 [DBG] user_consent grant with value: ideaBox|9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 not found in store.
2018-07-19 09:17:19.903 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 09:17:19.910 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-19 09:17:19.920 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-19 09:17:19.926 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-19 09:17:19.946 -06:00 [DBG] Creating Implicit Flow response.
2018-07-19 09:17:19.953 -06:00 [DBG] Getting claims for identity token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 and client: ideaBox
2018-07-19 09:17:19.955 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 09:17:20.026 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****-_kA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****4878"
    }
  ],
  "ActivityId": "0HLFDHAM7MAE1:00000008",
  "TimeStamp": "2018-07-19T15:17:20Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:17:20.029 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfYYQOMotYWQOpLIASCU_e0pZb--aHKqckJEW98JefPxAKQoLJamaHGpMPZHZY87J2cfIq0xixWrAbHTd22PfSOdQ9CiY-4ywkE1Yb-h9Nl0-Rf2rEwtL3tZ6atSzQ1MUvkz74sZzQgzGtBkr3L9-UDbLyjTyIKCle_TImxU6T4VZcOF6YvetxLdK3NNet9mDrcB_f95u_SKGI7IJkGtZ2h2ZEuybeaEeGK_LP2mAyMcrEBUUdua-gjL2uU0P6XBAK_YaLGnjDnn9PinqII_bjBsIbroQbUUZUhvgi3jXgviKAHBTIQtfE4mbwGxRru46g",
  "Scope": "openid profile business email"
}
2018-07-19 09:17:20.042 -06:00 [DBG] Augmenting SignInContext
2018-07-19 09:17:20.043 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 09:17:20.140 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-19 09:17:20.142 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-19 09:17:20.142 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-19 09:17:20.148 -06:00 [DBG] Start token request.
2018-07-19 09:17:20.153 -06:00 [DBG] Start client validation
2018-07-19 09:17:20.157 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-19 09:17:20.160 -06:00 [DBG] Start parsing for secret in post body
2018-07-19 09:17:20.160 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-19 09:17:20.160 -06:00 [DBG] Secret id found: ideaBox
2018-07-19 09:17:20.160 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:17:20.167 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-19 09:17:20.167 -06:00 [DBG] Client validation success
2018-07-19 09:17:20.170 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFDHAM7MADT:00000003",
  "TimeStamp": "2018-07-19T15:17:20Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:17:20.174 -06:00 [DBG] Start token request validation
2018-07-19 09:17:20.182 -06:00 [DBG] Start validation of authorization code token request
2018-07-19 09:17:20.200 -06:00 [DBG] Validation of authorization code token request success
2018-07-19 09:17:20.203 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "970b64a24c3890e2c5f11e8bdc8d60889b1f1e424f40590985121ba245734878",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "970b64a24c3890e2c5f11e8bdc8d60889b1f1e424f40590985121ba245734878",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-19 09:17:20.215 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:17:20.223 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-19 09:17:20.223 -06:00 [DBG] Getting claims for access token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-19 09:17:20.241 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:17:20.241 -06:00 [DBG] Getting claims for identity token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 and client: ideaBox
2018-07-19 09:17:20.241 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 09:17:20.254 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****xJkg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****_o8w"
    }
  ],
  "ActivityId": "0HLFDHAM7MADT:00000003",
  "TimeStamp": "2018-07-19T15:17:20Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:17:20.256 -06:00 [DBG] Token request success.
2018-07-19 09:17:20.266 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-19 09:17:20.267 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-19 09:17:20.267 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-19 09:17:20.273 -06:00 [DBG] Start userinfo request
2018-07-19 09:17:20.275 -06:00 [DBG] Bearer token found in header
2018-07-19 09:17:20.331 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:17:20.333 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:17:20.334 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-19 09:17:20.337 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532013440,
    "exp": 1532017040,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
    "auth_time": 1532013435,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-19 09:17:20.342 -06:00 [DBG] Creating userinfo response
2018-07-19 09:17:20.344 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:17:20.346 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:17:20.348 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-19 09:17:20.348 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:17:20.353 -06:00 [INF] Profile service returned to the following claim types: sub name given_name family_name email email_verified website preferred_username
2018-07-19 09:17:20.353 -06:00 [DBG] End userinfo request
2018-07-19 09:19:34.991 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-19 09:19:34.991 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-19 09:19:34.991 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-19 09:19:34.991 -06:00 [DBG] Start authorize request
2018-07-19 09:19:34.991 -06:00 [DBG] No user present in authorize request
2018-07-19 09:19:34.991 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:19:34.991 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:19:34.992 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:19:34.992 -06:00 [DBG] No PKCE used.
2018-07-19 09:19:34.992 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:19:34.992 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcWJGuqfNdKePqLhWUaAmQfb5yJXdvlALMMsvYq4Y4t2_fP0e0UfklVXQJd3rcEkLPNUyA2BJ47W7bmSrRSSJSkJVa00iZERsmaT2-0S1UJsieTWP06Ro3qGjDdO2IZUFd9xclqHfd-napX7Kz93vP6LOQCU8yy8LFT2KaXRlbfyvahIo3v1NqydxlAqyX_JO_p9VtpPtgGInadF0y6wz0hL3_-x28fmTvj3RY4RoTxxlshyFmLzjXDqqTchbvL0dtlE_8JIElf8OyX6bz4zobK2kH-rJLPUQZk00RFJr1HheZ5-ElR53grbWuieUB7YtM",
  "Nonce": "636676103749878700.MzA5OWVjYmUtYzRkMi00YmMzLWFkODMtMTg1YzhlZDZmODE2Mjk2Njk4MGUtMmI2MC00OWFkLTliMzMtZTQzMGRhYWE0NmM2",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676103749878700.MzA5OWVjYmUtYzRkMi00YmMzLWFkODMtMTg1YzhlZDZmODE2Mjk2Njk4MGUtMmI2MC00OWFkLTliMzMtZTQzMGRhYWE0NmM2",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcWJGuqfNdKePqLhWUaAmQfb5yJXdvlALMMsvYq4Y4t2_fP0e0UfklVXQJd3rcEkLPNUyA2BJ47W7bmSrRSSJSkJVa00iZERsmaT2-0S1UJsieTWP06Ro3qGjDdO2IZUFd9xclqHfd-napX7Kz93vP6LOQCU8yy8LFT2KaXRlbfyvahIo3v1NqydxlAqyX_JO_p9VtpPtgGInadF0y6wz0hL3_-x28fmTvj3RY4RoTxxlshyFmLzjXDqqTchbvL0dtlE_8JIElf8OyX6bz4zobK2kH-rJLPUQZk00RFJr1HheZ5-ElR53grbWuieUB7YtM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:19:34.992 -06:00 [INF] Showing login: User is not authenticated
2018-07-19 09:19:34.995 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:19:34.995 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:19:34.995 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:19:34.995 -06:00 [DBG] No PKCE used.
2018-07-19 09:19:34.995 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:19:34.996 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:19:42.662 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 09:19:42.677 -06:00 [DBG] Augmenting SignInContext
2018-07-19 09:19:42.677 -06:00 [DBG] Adding idp claim with value: local
2018-07-19 09:19:42.678 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-19 09:19:42.678 -06:00 [DBG] Adding auth_time claim with value: 1532013582
2018-07-19 09:19:42.678 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 09:19:42.678 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFDHAM7MAE4:00000004",
  "TimeStamp": "2018-07-19T15:19:42Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:19:42.681 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:19:42.681 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:19:42.681 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 09:19:42.681 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 09:19:42.681 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 09:19:42.681 -06:00 [DBG] Start authorize callback request
2018-07-19 09:19:42.681 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-19 09:19:42.681 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:19:42.681 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:19:42.681 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:19:42.681 -06:00 [DBG] No PKCE used.
2018-07-19 09:19:42.681 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:19:42.681 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcWJGuqfNdKePqLhWUaAmQfb5yJXdvlALMMsvYq4Y4t2_fP0e0UfklVXQJd3rcEkLPNUyA2BJ47W7bmSrRSSJSkJVa00iZERsmaT2-0S1UJsieTWP06Ro3qGjDdO2IZUFd9xclqHfd-napX7Kz93vP6LOQCU8yy8LFT2KaXRlbfyvahIo3v1NqydxlAqyX_JO_p9VtpPtgGInadF0y6wz0hL3_-x28fmTvj3RY4RoTxxlshyFmLzjXDqqTchbvL0dtlE_8JIElf8OyX6bz4zobK2kH-rJLPUQZk00RFJr1HheZ5-ElR53grbWuieUB7YtM",
  "Nonce": "636676103749878700.MzA5OWVjYmUtYzRkMi00YmMzLWFkODMtMTg1YzhlZDZmODE2Mjk2Njk4MGUtMmI2MC00OWFkLTliMzMtZTQzMGRhYWE0NmM2",
  "SessionId": "a4185b7d6d458088a19b62d1e21ada31",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676103749878700.MzA5OWVjYmUtYzRkMi00YmMzLWFkODMtMTg1YzhlZDZmODE2Mjk2Njk4MGUtMmI2MC00OWFkLTliMzMtZTQzMGRhYWE0NmM2",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcWJGuqfNdKePqLhWUaAmQfb5yJXdvlALMMsvYq4Y4t2_fP0e0UfklVXQJd3rcEkLPNUyA2BJ47W7bmSrRSSJSkJVa00iZERsmaT2-0S1UJsieTWP06Ro3qGjDdO2IZUFd9xclqHfd-napX7Kz93vP6LOQCU8yy8LFT2KaXRlbfyvahIo3v1NqydxlAqyX_JO_p9VtpPtgGInadF0y6wz0hL3_-x28fmTvj3RY4RoTxxlshyFmLzjXDqqTchbvL0dtlE_8JIElf8OyX6bz4zobK2kH-rJLPUQZk00RFJr1HheZ5-ElR53grbWuieUB7YtM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:19:42.683 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-19 09:19:42.683 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 09:19:42.683 -06:00 [INF] Showing consent: User has not yet consented
2018-07-19 09:19:42.685 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:19:42.685 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:19:42.685 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:19:42.685 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:19:42.685 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:19:42.685 -06:00 [DBG] No PKCE used.
2018-07-19 09:19:42.685 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:19:42.685 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:19:45.495 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 09:19:45.495 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:19:45.495 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:19:45.496 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:19:45.496 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:19:45.496 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:19:45.496 -06:00 [DBG] No PKCE used.
2018-07-19 09:19:45.496 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:19:45.499 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:19:45.499 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:19:45.499 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 09:19:45.500 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 09:19:45.500 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 09:19:45.500 -06:00 [DBG] Start authorize callback request
2018-07-19 09:19:45.500 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-19 09:19:45.500 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:19:45.500 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:19:45.500 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:19:45.500 -06:00 [DBG] No PKCE used.
2018-07-19 09:19:45.500 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:19:45.500 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcWJGuqfNdKePqLhWUaAmQfb5yJXdvlALMMsvYq4Y4t2_fP0e0UfklVXQJd3rcEkLPNUyA2BJ47W7bmSrRSSJSkJVa00iZERsmaT2-0S1UJsieTWP06Ro3qGjDdO2IZUFd9xclqHfd-napX7Kz93vP6LOQCU8yy8LFT2KaXRlbfyvahIo3v1NqydxlAqyX_JO_p9VtpPtgGInadF0y6wz0hL3_-x28fmTvj3RY4RoTxxlshyFmLzjXDqqTchbvL0dtlE_8JIElf8OyX6bz4zobK2kH-rJLPUQZk00RFJr1HheZ5-ElR53grbWuieUB7YtM",
  "Nonce": "636676103749878700.MzA5OWVjYmUtYzRkMi00YmMzLWFkODMtMTg1YzhlZDZmODE2Mjk2Njk4MGUtMmI2MC00OWFkLTliMzMtZTQzMGRhYWE0NmM2",
  "SessionId": "a4185b7d6d458088a19b62d1e21ada31",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676103749878700.MzA5OWVjYmUtYzRkMi00YmMzLWFkODMtMTg1YzhlZDZmODE2Mjk2Njk4MGUtMmI2MC00OWFkLTliMzMtZTQzMGRhYWE0NmM2",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcWJGuqfNdKePqLhWUaAmQfb5yJXdvlALMMsvYq4Y4t2_fP0e0UfklVXQJd3rcEkLPNUyA2BJ47W7bmSrRSSJSkJVa00iZERsmaT2-0S1UJsieTWP06Ro3qGjDdO2IZUFd9xclqHfd-napX7Kz93vP6LOQCU8yy8LFT2KaXRlbfyvahIo3v1NqydxlAqyX_JO_p9VtpPtgGInadF0y6wz0hL3_-x28fmTvj3RY4RoTxxlshyFmLzjXDqqTchbvL0dtlE_8JIElf8OyX6bz4zobK2kH-rJLPUQZk00RFJr1HheZ5-ElR53grbWuieUB7YtM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:19:45.501 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-19 09:19:45.501 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 09:19:45.502 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-19 09:19:45.502 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-19 09:19:45.502 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-19 09:19:45.506 -06:00 [DBG] Creating Implicit Flow response.
2018-07-19 09:19:45.506 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-19 09:19:45.507 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 09:19:45.518 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****A8tQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****b8ce"
    }
  ],
  "ActivityId": "0HLFDHAM7MAE4:00000008",
  "TimeStamp": "2018-07-19T15:19:45Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:19:45.518 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcWJGuqfNdKePqLhWUaAmQfb5yJXdvlALMMsvYq4Y4t2_fP0e0UfklVXQJd3rcEkLPNUyA2BJ47W7bmSrRSSJSkJVa00iZERsmaT2-0S1UJsieTWP06Ro3qGjDdO2IZUFd9xclqHfd-napX7Kz93vP6LOQCU8yy8LFT2KaXRlbfyvahIo3v1NqydxlAqyX_JO_p9VtpPtgGInadF0y6wz0hL3_-x28fmTvj3RY4RoTxxlshyFmLzjXDqqTchbvL0dtlE_8JIElf8OyX6bz4zobK2kH-rJLPUQZk00RFJr1HheZ5-ElR53grbWuieUB7YtM",
  "Scope": "openid profile business email"
}
2018-07-19 09:19:45.519 -06:00 [DBG] Augmenting SignInContext
2018-07-19 09:19:45.519 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 09:19:45.607 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-19 09:19:45.607 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-19 09:19:45.607 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-19 09:19:45.607 -06:00 [DBG] Start token request.
2018-07-19 09:19:45.607 -06:00 [DBG] Start client validation
2018-07-19 09:19:45.607 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-19 09:19:45.607 -06:00 [DBG] Start parsing for secret in post body
2018-07-19 09:19:45.607 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-19 09:19:45.607 -06:00 [DBG] Secret id found: ideaBox
2018-07-19 09:19:45.607 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:19:45.607 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-19 09:19:45.607 -06:00 [DBG] Client validation success
2018-07-19 09:19:45.607 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFDHAM7MAE6:00000001",
  "TimeStamp": "2018-07-19T15:19:45Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:19:45.607 -06:00 [DBG] Start token request validation
2018-07-19 09:19:45.608 -06:00 [DBG] Start validation of authorization code token request
2018-07-19 09:19:45.615 -06:00 [DBG] Validation of authorization code token request success
2018-07-19 09:19:45.615 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "d085c68947ee65d6e14e8ccc80be8cf97e84d59df2494b394e92f99a76b2b8ce",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "d085c68947ee65d6e14e8ccc80be8cf97e84d59df2494b394e92f99a76b2b8ce",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-19 09:19:45.615 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:19:45.615 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-19 09:19:45.615 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-19 09:19:45.628 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:19:45.628 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-19 09:19:45.628 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 09:19:45.640 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****7wSg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Hl0A"
    }
  ],
  "ActivityId": "0HLFDHAM7MAE6:00000001",
  "TimeStamp": "2018-07-19T15:19:45Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:19:45.640 -06:00 [DBG] Token request success.
2018-07-19 09:19:45.642 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-19 09:19:45.643 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-19 09:19:45.643 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-19 09:19:45.643 -06:00 [DBG] Start userinfo request
2018-07-19 09:19:45.643 -06:00 [DBG] Bearer token found in header
2018-07-19 09:19:45.645 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:19:45.645 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:19:45.646 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-19 09:19:45.646 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532013585,
    "exp": 1532017185,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1532013582,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-19 09:19:45.646 -06:00 [DBG] Creating userinfo response
2018-07-19 09:19:45.646 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:19:45.646 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:19:45.646 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-19 09:19:45.646 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:19:45.647 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-19 09:19:45.648 -06:00 [DBG] End userinfo request
2018-07-19 09:20:19.779 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-19 09:20:19.780 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-19 09:20:19.780 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-19 09:20:19.780 -06:00 [DBG] Start authorize request
2018-07-19 09:20:19.780 -06:00 [DBG] No user present in authorize request
2018-07-19 09:20:19.780 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:20:19.780 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:20:19.780 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:20:19.780 -06:00 [DBG] No PKCE used.
2018-07-19 09:20:19.780 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:20:19.780 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeDUx9ft5IMlB4WJzCFiihkkR6KDk5OxyYXlw8VPVuMHT8V13deCQ_ki7FIXF3tjrF5mwoiv8Oi2MycSj273C9UdwgRMEZkt4ImpZhYjzJ6y8MD7ktHUYx3xyVtXP642bFhNbHN9bTq0WnDQbmRa41gxb04KuOyBnSMhLeYg6hmp5ueLR4RM_V9gmGbloqyPDS2pBSbLH0Kmrd-zjiMhtZXXTXOmR5oobRSgnKkWP_yRNS0DYmaQD9mfwWUIy7-YR9gWqumRKXL0xtqC97LY3Xnt9J8QhUSeAbxmdX5pY70tt_omqDNqB_0cNP7-uSSdLY",
  "Nonce": "636676104197750890.OGNlMjNmOTYtYzJkNC00ZmU1LWE0ZGQtMjRhZDVkMzkzOTM3MzkwODcyZjEtMGY3YS00MjBlLTg5ZjUtZTdiMTk0YzI0ODRi",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676104197750890.OGNlMjNmOTYtYzJkNC00ZmU1LWE0ZGQtMjRhZDVkMzkzOTM3MzkwODcyZjEtMGY3YS00MjBlLTg5ZjUtZTdiMTk0YzI0ODRi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeDUx9ft5IMlB4WJzCFiihkkR6KDk5OxyYXlw8VPVuMHT8V13deCQ_ki7FIXF3tjrF5mwoiv8Oi2MycSj273C9UdwgRMEZkt4ImpZhYjzJ6y8MD7ktHUYx3xyVtXP642bFhNbHN9bTq0WnDQbmRa41gxb04KuOyBnSMhLeYg6hmp5ueLR4RM_V9gmGbloqyPDS2pBSbLH0Kmrd-zjiMhtZXXTXOmR5oobRSgnKkWP_yRNS0DYmaQD9mfwWUIy7-YR9gWqumRKXL0xtqC97LY3Xnt9J8QhUSeAbxmdX5pY70tt_omqDNqB_0cNP7-uSSdLY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:20:19.780 -06:00 [INF] Showing login: User is not authenticated
2018-07-19 09:20:19.783 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:20:19.783 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:20:19.783 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:20:19.783 -06:00 [DBG] No PKCE used.
2018-07-19 09:20:19.784 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:20:19.784 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:20:27.009 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 09:20:27.025 -06:00 [DBG] Augmenting SignInContext
2018-07-19 09:20:27.025 -06:00 [DBG] Adding idp claim with value: local
2018-07-19 09:20:27.025 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-19 09:20:27.025 -06:00 [DBG] Adding auth_time claim with value: 1532013627
2018-07-19 09:20:27.025 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 09:20:27.026 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFDHAM7MAE4:0000000B",
  "TimeStamp": "2018-07-19T15:20:27Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:20:27.028 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:20:27.028 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:20:27.028 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 09:20:27.028 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 09:20:27.028 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 09:20:27.028 -06:00 [DBG] Start authorize callback request
2018-07-19 09:20:27.029 -06:00 [DBG] User in authorize request: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-19 09:20:27.029 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:20:27.029 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:20:27.029 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:20:27.029 -06:00 [DBG] No PKCE used.
2018-07-19 09:20:27.029 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:20:27.029 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeDUx9ft5IMlB4WJzCFiihkkR6KDk5OxyYXlw8VPVuMHT8V13deCQ_ki7FIXF3tjrF5mwoiv8Oi2MycSj273C9UdwgRMEZkt4ImpZhYjzJ6y8MD7ktHUYx3xyVtXP642bFhNbHN9bTq0WnDQbmRa41gxb04KuOyBnSMhLeYg6hmp5ueLR4RM_V9gmGbloqyPDS2pBSbLH0Kmrd-zjiMhtZXXTXOmR5oobRSgnKkWP_yRNS0DYmaQD9mfwWUIy7-YR9gWqumRKXL0xtqC97LY3Xnt9J8QhUSeAbxmdX5pY70tt_omqDNqB_0cNP7-uSSdLY",
  "Nonce": "636676104197750890.OGNlMjNmOTYtYzJkNC00ZmU1LWE0ZGQtMjRhZDVkMzkzOTM3MzkwODcyZjEtMGY3YS00MjBlLTg5ZjUtZTdiMTk0YzI0ODRi",
  "SessionId": "30abb2dffa4e4af2819b2169b94d12ba",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676104197750890.OGNlMjNmOTYtYzJkNC00ZmU1LWE0ZGQtMjRhZDVkMzkzOTM3MzkwODcyZjEtMGY3YS00MjBlLTg5ZjUtZTdiMTk0YzI0ODRi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeDUx9ft5IMlB4WJzCFiihkkR6KDk5OxyYXlw8VPVuMHT8V13deCQ_ki7FIXF3tjrF5mwoiv8Oi2MycSj273C9UdwgRMEZkt4ImpZhYjzJ6y8MD7ktHUYx3xyVtXP642bFhNbHN9bTq0WnDQbmRa41gxb04KuOyBnSMhLeYg6hmp5ueLR4RM_V9gmGbloqyPDS2pBSbLH0Kmrd-zjiMhtZXXTXOmR5oobRSgnKkWP_yRNS0DYmaQD9mfwWUIy7-YR9gWqumRKXL0xtqC97LY3Xnt9J8QhUSeAbxmdX5pY70tt_omqDNqB_0cNP7-uSSdLY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:20:27.030 -06:00 [DBG] user_consent grant with value: ideaBox|9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 not found in store.
2018-07-19 09:20:27.030 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 09:20:27.030 -06:00 [INF] Showing consent: User has not yet consented
2018-07-19 09:20:27.032 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:20:27.033 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:20:27.033 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:20:27.033 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:20:27.033 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:20:27.033 -06:00 [DBG] No PKCE used.
2018-07-19 09:20:27.033 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:20:27.033 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:20:30.282 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 09:20:30.283 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:20:30.283 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:20:30.283 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:20:30.284 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:20:30.284 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:20:30.284 -06:00 [DBG] No PKCE used.
2018-07-19 09:20:30.284 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:20:30.287 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:20:30.287 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:20:30.287 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 09:20:30.287 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 09:20:30.287 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 09:20:30.287 -06:00 [DBG] Start authorize callback request
2018-07-19 09:20:30.287 -06:00 [DBG] User in authorize request: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-19 09:20:30.287 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:20:30.287 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:20:30.287 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:20:30.287 -06:00 [DBG] No PKCE used.
2018-07-19 09:20:30.287 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:20:30.287 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeDUx9ft5IMlB4WJzCFiihkkR6KDk5OxyYXlw8VPVuMHT8V13deCQ_ki7FIXF3tjrF5mwoiv8Oi2MycSj273C9UdwgRMEZkt4ImpZhYjzJ6y8MD7ktHUYx3xyVtXP642bFhNbHN9bTq0WnDQbmRa41gxb04KuOyBnSMhLeYg6hmp5ueLR4RM_V9gmGbloqyPDS2pBSbLH0Kmrd-zjiMhtZXXTXOmR5oobRSgnKkWP_yRNS0DYmaQD9mfwWUIy7-YR9gWqumRKXL0xtqC97LY3Xnt9J8QhUSeAbxmdX5pY70tt_omqDNqB_0cNP7-uSSdLY",
  "Nonce": "636676104197750890.OGNlMjNmOTYtYzJkNC00ZmU1LWE0ZGQtMjRhZDVkMzkzOTM3MzkwODcyZjEtMGY3YS00MjBlLTg5ZjUtZTdiMTk0YzI0ODRi",
  "SessionId": "30abb2dffa4e4af2819b2169b94d12ba",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676104197750890.OGNlMjNmOTYtYzJkNC00ZmU1LWE0ZGQtMjRhZDVkMzkzOTM3MzkwODcyZjEtMGY3YS00MjBlLTg5ZjUtZTdiMTk0YzI0ODRi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeDUx9ft5IMlB4WJzCFiihkkR6KDk5OxyYXlw8VPVuMHT8V13deCQ_ki7FIXF3tjrF5mwoiv8Oi2MycSj273C9UdwgRMEZkt4ImpZhYjzJ6y8MD7ktHUYx3xyVtXP642bFhNbHN9bTq0WnDQbmRa41gxb04KuOyBnSMhLeYg6hmp5ueLR4RM_V9gmGbloqyPDS2pBSbLH0Kmrd-zjiMhtZXXTXOmR5oobRSgnKkWP_yRNS0DYmaQD9mfwWUIy7-YR9gWqumRKXL0xtqC97LY3Xnt9J8QhUSeAbxmdX5pY70tt_omqDNqB_0cNP7-uSSdLY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:20:30.289 -06:00 [DBG] user_consent grant with value: ideaBox|9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 not found in store.
2018-07-19 09:20:30.289 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 09:20:30.289 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-19 09:20:30.289 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-19 09:20:30.289 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-19 09:20:30.294 -06:00 [DBG] Creating Implicit Flow response.
2018-07-19 09:20:30.294 -06:00 [DBG] Getting claims for identity token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 and client: ideaBox
2018-07-19 09:20:30.294 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 09:20:30.305 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****nXPg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****1b88"
    }
  ],
  "ActivityId": "0HLFDHAM7MAE4:0000000F",
  "TimeStamp": "2018-07-19T15:20:30Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:20:30.306 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeDUx9ft5IMlB4WJzCFiihkkR6KDk5OxyYXlw8VPVuMHT8V13deCQ_ki7FIXF3tjrF5mwoiv8Oi2MycSj273C9UdwgRMEZkt4ImpZhYjzJ6y8MD7ktHUYx3xyVtXP642bFhNbHN9bTq0WnDQbmRa41gxb04KuOyBnSMhLeYg6hmp5ueLR4RM_V9gmGbloqyPDS2pBSbLH0Kmrd-zjiMhtZXXTXOmR5oobRSgnKkWP_yRNS0DYmaQD9mfwWUIy7-YR9gWqumRKXL0xtqC97LY3Xnt9J8QhUSeAbxmdX5pY70tt_omqDNqB_0cNP7-uSSdLY",
  "Scope": "openid profile business email"
}
2018-07-19 09:20:30.306 -06:00 [DBG] Augmenting SignInContext
2018-07-19 09:20:30.306 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 09:20:30.361 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-19 09:20:30.362 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-19 09:20:30.362 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-19 09:20:30.362 -06:00 [DBG] Start token request.
2018-07-19 09:20:30.362 -06:00 [DBG] Start client validation
2018-07-19 09:20:30.362 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-19 09:20:30.362 -06:00 [DBG] Start parsing for secret in post body
2018-07-19 09:20:30.362 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-19 09:20:30.362 -06:00 [DBG] Secret id found: ideaBox
2018-07-19 09:20:30.362 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:20:30.362 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-19 09:20:30.362 -06:00 [DBG] Client validation success
2018-07-19 09:20:30.362 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFDHAM7MAE6:00000003",
  "TimeStamp": "2018-07-19T15:20:30Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:20:30.362 -06:00 [DBG] Start token request validation
2018-07-19 09:20:30.362 -06:00 [DBG] Start validation of authorization code token request
2018-07-19 09:20:30.371 -06:00 [DBG] Validation of authorization code token request success
2018-07-19 09:20:30.371 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "897061e2654506056ab9a32ad6e3ddedb893ab186cfcb04ab2b8527746221b88",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "897061e2654506056ab9a32ad6e3ddedb893ab186cfcb04ab2b8527746221b88",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-19 09:20:30.371 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:20:30.371 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-19 09:20:30.371 -06:00 [DBG] Getting claims for access token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-19 09:20:30.403 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:20:30.403 -06:00 [DBG] Getting claims for identity token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 and client: ideaBox
2018-07-19 09:20:30.403 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 09:20:30.414 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****3FYg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****nO5w"
    }
  ],
  "ActivityId": "0HLFDHAM7MAE6:00000003",
  "TimeStamp": "2018-07-19T15:20:30Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:20:30.414 -06:00 [DBG] Token request success.
2018-07-19 09:20:30.416 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-19 09:20:30.416 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-19 09:20:30.416 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-19 09:20:30.416 -06:00 [DBG] Start userinfo request
2018-07-19 09:20:30.416 -06:00 [DBG] Bearer token found in header
2018-07-19 09:20:30.418 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:20:30.418 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:20:30.419 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-19 09:20:30.420 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532013630,
    "exp": 1532017230,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
    "auth_time": 1532013627,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-19 09:20:30.420 -06:00 [DBG] Creating userinfo response
2018-07-19 09:20:30.420 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:20:30.420 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:20:30.420 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-19 09:20:30.420 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:20:30.421 -06:00 [INF] Profile service returned to the following claim types: sub name given_name family_name email email_verified website preferred_username
2018-07-19 09:20:30.421 -06:00 [DBG] End userinfo request
2018-07-19 09:23:17.411 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-19 09:23:17.411 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-19 09:23:17.411 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-19 09:23:17.411 -06:00 [DBG] Start authorize request
2018-07-19 09:23:17.411 -06:00 [DBG] No user present in authorize request
2018-07-19 09:23:17.411 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:23:17.411 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:23:17.411 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:23:17.411 -06:00 [DBG] No PKCE used.
2018-07-19 09:23:17.411 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:23:17.412 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcfGsAt7nHYn4ten-Hf27DbUOIUyuizXRrtlizw44qFZY84Fw43L_ouSlHOT29kJk64Dh5VAzbYa1QInqCkC4obAIGrMLRN8oWjrGMC0nci0VKKmq_nM4qOUAQohQr8cdHlmrhzVp6nM4NXQ0K8uXL2xzq2WrjubaZXvqXPy0ZD-JVRD50dNcA9AfnZvU10jXJP5oZ99pm66MA8Vfz_l8yDPGKp8WEeFMIbGWgg_DDZ_nwENRn43kciyO2jQCZ09WaYYdEzfIeQAef5mVG15Bwdj-5BORhlhj3_aeNSF9bwct8W_wINU4OvlXJg4bcH6q4",
  "Nonce": "636676105974090570.YTIxNWYwYTYtM2JjYy00M2Q4LWI0MzQtNjMxMDlhNjcwZGYzMmVkNDUzZTUtYjJmNi00M2EyLTk0MGItYzk0N2M0YWZjYWJl",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676105974090570.YTIxNWYwYTYtM2JjYy00M2Q4LWI0MzQtNjMxMDlhNjcwZGYzMmVkNDUzZTUtYjJmNi00M2EyLTk0MGItYzk0N2M0YWZjYWJl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcfGsAt7nHYn4ten-Hf27DbUOIUyuizXRrtlizw44qFZY84Fw43L_ouSlHOT29kJk64Dh5VAzbYa1QInqCkC4obAIGrMLRN8oWjrGMC0nci0VKKmq_nM4qOUAQohQr8cdHlmrhzVp6nM4NXQ0K8uXL2xzq2WrjubaZXvqXPy0ZD-JVRD50dNcA9AfnZvU10jXJP5oZ99pm66MA8Vfz_l8yDPGKp8WEeFMIbGWgg_DDZ_nwENRn43kciyO2jQCZ09WaYYdEzfIeQAef5mVG15Bwdj-5BORhlhj3_aeNSF9bwct8W_wINU4OvlXJg4bcH6q4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:23:17.412 -06:00 [INF] Showing login: User is not authenticated
2018-07-19 09:23:17.414 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:23:17.414 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:23:17.414 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:23:17.414 -06:00 [DBG] No PKCE used.
2018-07-19 09:23:17.414 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:23:17.414 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:23:26.519 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 09:23:26.534 -06:00 [DBG] Augmenting SignInContext
2018-07-19 09:23:26.534 -06:00 [DBG] Adding idp claim with value: local
2018-07-19 09:23:26.534 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-19 09:23:26.534 -06:00 [DBG] Adding auth_time claim with value: 1532013806
2018-07-19 09:23:26.535 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 09:23:26.535 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFDHAM7MAE7:00000003",
  "TimeStamp": "2018-07-19T15:23:26Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:23:26.537 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:23:26.538 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:23:26.538 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 09:23:26.538 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 09:23:26.538 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 09:23:26.538 -06:00 [DBG] Start authorize callback request
2018-07-19 09:23:26.538 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-19 09:23:26.538 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:23:26.538 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:23:26.538 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:23:26.538 -06:00 [DBG] No PKCE used.
2018-07-19 09:23:26.538 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:23:26.538 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcfGsAt7nHYn4ten-Hf27DbUOIUyuizXRrtlizw44qFZY84Fw43L_ouSlHOT29kJk64Dh5VAzbYa1QInqCkC4obAIGrMLRN8oWjrGMC0nci0VKKmq_nM4qOUAQohQr8cdHlmrhzVp6nM4NXQ0K8uXL2xzq2WrjubaZXvqXPy0ZD-JVRD50dNcA9AfnZvU10jXJP5oZ99pm66MA8Vfz_l8yDPGKp8WEeFMIbGWgg_DDZ_nwENRn43kciyO2jQCZ09WaYYdEzfIeQAef5mVG15Bwdj-5BORhlhj3_aeNSF9bwct8W_wINU4OvlXJg4bcH6q4",
  "Nonce": "636676105974090570.YTIxNWYwYTYtM2JjYy00M2Q4LWI0MzQtNjMxMDlhNjcwZGYzMmVkNDUzZTUtYjJmNi00M2EyLTk0MGItYzk0N2M0YWZjYWJl",
  "SessionId": "006f4984670dc13199fb172cdc63a479",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676105974090570.YTIxNWYwYTYtM2JjYy00M2Q4LWI0MzQtNjMxMDlhNjcwZGYzMmVkNDUzZTUtYjJmNi00M2EyLTk0MGItYzk0N2M0YWZjYWJl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcfGsAt7nHYn4ten-Hf27DbUOIUyuizXRrtlizw44qFZY84Fw43L_ouSlHOT29kJk64Dh5VAzbYa1QInqCkC4obAIGrMLRN8oWjrGMC0nci0VKKmq_nM4qOUAQohQr8cdHlmrhzVp6nM4NXQ0K8uXL2xzq2WrjubaZXvqXPy0ZD-JVRD50dNcA9AfnZvU10jXJP5oZ99pm66MA8Vfz_l8yDPGKp8WEeFMIbGWgg_DDZ_nwENRn43kciyO2jQCZ09WaYYdEzfIeQAef5mVG15Bwdj-5BORhlhj3_aeNSF9bwct8W_wINU4OvlXJg4bcH6q4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:23:26.539 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-19 09:23:26.539 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 09:23:26.539 -06:00 [INF] Showing consent: User has not yet consented
2018-07-19 09:23:26.542 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:23:26.542 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:23:26.542 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:23:26.542 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:23:26.542 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:23:26.542 -06:00 [DBG] No PKCE used.
2018-07-19 09:23:26.542 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:23:26.542 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:23:28.418 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 09:23:28.418 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:23:28.418 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:23:28.419 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:23:28.419 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:23:28.419 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:23:28.419 -06:00 [DBG] No PKCE used.
2018-07-19 09:23:28.419 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:23:28.423 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:23:28.423 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:23:28.423 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 09:23:28.423 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 09:23:28.423 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 09:23:28.423 -06:00 [DBG] Start authorize callback request
2018-07-19 09:23:28.423 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-19 09:23:28.423 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:23:28.423 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:23:28.423 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:23:28.423 -06:00 [DBG] No PKCE used.
2018-07-19 09:23:28.423 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:23:28.423 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcfGsAt7nHYn4ten-Hf27DbUOIUyuizXRrtlizw44qFZY84Fw43L_ouSlHOT29kJk64Dh5VAzbYa1QInqCkC4obAIGrMLRN8oWjrGMC0nci0VKKmq_nM4qOUAQohQr8cdHlmrhzVp6nM4NXQ0K8uXL2xzq2WrjubaZXvqXPy0ZD-JVRD50dNcA9AfnZvU10jXJP5oZ99pm66MA8Vfz_l8yDPGKp8WEeFMIbGWgg_DDZ_nwENRn43kciyO2jQCZ09WaYYdEzfIeQAef5mVG15Bwdj-5BORhlhj3_aeNSF9bwct8W_wINU4OvlXJg4bcH6q4",
  "Nonce": "636676105974090570.YTIxNWYwYTYtM2JjYy00M2Q4LWI0MzQtNjMxMDlhNjcwZGYzMmVkNDUzZTUtYjJmNi00M2EyLTk0MGItYzk0N2M0YWZjYWJl",
  "SessionId": "006f4984670dc13199fb172cdc63a479",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676105974090570.YTIxNWYwYTYtM2JjYy00M2Q4LWI0MzQtNjMxMDlhNjcwZGYzMmVkNDUzZTUtYjJmNi00M2EyLTk0MGItYzk0N2M0YWZjYWJl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcfGsAt7nHYn4ten-Hf27DbUOIUyuizXRrtlizw44qFZY84Fw43L_ouSlHOT29kJk64Dh5VAzbYa1QInqCkC4obAIGrMLRN8oWjrGMC0nci0VKKmq_nM4qOUAQohQr8cdHlmrhzVp6nM4NXQ0K8uXL2xzq2WrjubaZXvqXPy0ZD-JVRD50dNcA9AfnZvU10jXJP5oZ99pm66MA8Vfz_l8yDPGKp8WEeFMIbGWgg_DDZ_nwENRn43kciyO2jQCZ09WaYYdEzfIeQAef5mVG15Bwdj-5BORhlhj3_aeNSF9bwct8W_wINU4OvlXJg4bcH6q4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:23:28.425 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-19 09:23:28.425 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 09:23:28.425 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-19 09:23:28.425 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-19 09:23:28.425 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-19 09:23:28.430 -06:00 [DBG] Creating Implicit Flow response.
2018-07-19 09:23:28.430 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-19 09:23:28.430 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 09:23:28.441 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ZmfQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****4325"
    }
  ],
  "ActivityId": "0HLFDHAM7MAE7:00000007",
  "TimeStamp": "2018-07-19T15:23:28Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:23:28.441 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcfGsAt7nHYn4ten-Hf27DbUOIUyuizXRrtlizw44qFZY84Fw43L_ouSlHOT29kJk64Dh5VAzbYa1QInqCkC4obAIGrMLRN8oWjrGMC0nci0VKKmq_nM4qOUAQohQr8cdHlmrhzVp6nM4NXQ0K8uXL2xzq2WrjubaZXvqXPy0ZD-JVRD50dNcA9AfnZvU10jXJP5oZ99pm66MA8Vfz_l8yDPGKp8WEeFMIbGWgg_DDZ_nwENRn43kciyO2jQCZ09WaYYdEzfIeQAef5mVG15Bwdj-5BORhlhj3_aeNSF9bwct8W_wINU4OvlXJg4bcH6q4",
  "Scope": "openid profile business email"
}
2018-07-19 09:23:28.442 -06:00 [DBG] Augmenting SignInContext
2018-07-19 09:23:28.442 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 09:23:28.531 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-19 09:23:28.531 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-19 09:23:28.531 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-19 09:23:28.531 -06:00 [DBG] Start token request.
2018-07-19 09:23:28.531 -06:00 [DBG] Start client validation
2018-07-19 09:23:28.531 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-19 09:23:28.531 -06:00 [DBG] Start parsing for secret in post body
2018-07-19 09:23:28.531 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-19 09:23:28.531 -06:00 [DBG] Secret id found: ideaBox
2018-07-19 09:23:28.531 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:23:28.531 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-19 09:23:28.531 -06:00 [DBG] Client validation success
2018-07-19 09:23:28.532 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFDHAM7MAE8:00000001",
  "TimeStamp": "2018-07-19T15:23:28Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:23:28.532 -06:00 [DBG] Start token request validation
2018-07-19 09:23:28.532 -06:00 [DBG] Start validation of authorization code token request
2018-07-19 09:23:28.539 -06:00 [DBG] Validation of authorization code token request success
2018-07-19 09:23:28.539 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "17c532faaa579ae2ca8585b2e940aec6af49b077ae467a72851b271e1aa94325",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "17c532faaa579ae2ca8585b2e940aec6af49b077ae467a72851b271e1aa94325",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-19 09:23:28.539 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:23:28.539 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-19 09:23:28.539 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-19 09:23:28.552 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:23:28.552 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-19 09:23:28.552 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 09:23:28.563 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****zPVg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****qrPA"
    }
  ],
  "ActivityId": "0HLFDHAM7MAE8:00000001",
  "TimeStamp": "2018-07-19T15:23:28Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:23:28.563 -06:00 [DBG] Token request success.
2018-07-19 09:23:28.565 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-19 09:23:28.565 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-19 09:23:28.565 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-19 09:23:28.565 -06:00 [DBG] Start userinfo request
2018-07-19 09:23:28.566 -06:00 [DBG] Bearer token found in header
2018-07-19 09:23:28.567 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:23:28.567 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:23:28.568 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-19 09:23:28.569 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532013808,
    "exp": 1532017408,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1532013806,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-19 09:23:28.569 -06:00 [DBG] Creating userinfo response
2018-07-19 09:23:28.569 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:23:28.569 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:23:28.569 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-19 09:23:28.569 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:23:28.570 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-19 09:23:28.570 -06:00 [DBG] End userinfo request
2018-07-19 09:24:14.076 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-19 09:24:14.076 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-19 09:24:14.076 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-19 09:24:14.076 -06:00 [DBG] Start authorize request
2018-07-19 09:24:14.076 -06:00 [DBG] No user present in authorize request
2018-07-19 09:24:14.076 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:24:14.076 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:24:14.076 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:24:14.076 -06:00 [DBG] No PKCE used.
2018-07-19 09:24:14.076 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:24:14.076 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe6iNom822tYkIoua94-dKn_KBe_OTub5u4pFKS-HENMbyJwTcK_6Wzf9MOYOAPXjzUfhYl8V9vy-3nmvb0MmaKNZDlDC09GCcjhSrNoLvy9AlVYQCWSpEXx0c6ywKb3QgAfjxNNkUqDMdMpT-6uVIJcCHN_-X8xaVd9u-MJMmQhAFi--wsaPFT8nikI_TBItk3r6Ax38DOqXuhuWsNuuDwVQKrSUVEl4KURIv3u4lxWFR9jccxXSweiV9hARufOG0msdKzo5OqDi6eP6LdNf46tp3qTCtv6aYQeXtHx4NdK62kXmZKoFJ-1VCEmRnMloU",
  "Nonce": "636676106540721770.NjliZGFlYWUtNmE4My00MDQzLTkxMTYtYzRlYWViYTI3ZDZhYWYxMGJhOWUtZWM1ZC00Y2JhLTkyOWYtMWZkNTNmM2UxNDk1",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676106540721770.NjliZGFlYWUtNmE4My00MDQzLTkxMTYtYzRlYWViYTI3ZDZhYWYxMGJhOWUtZWM1ZC00Y2JhLTkyOWYtMWZkNTNmM2UxNDk1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe6iNom822tYkIoua94-dKn_KBe_OTub5u4pFKS-HENMbyJwTcK_6Wzf9MOYOAPXjzUfhYl8V9vy-3nmvb0MmaKNZDlDC09GCcjhSrNoLvy9AlVYQCWSpEXx0c6ywKb3QgAfjxNNkUqDMdMpT-6uVIJcCHN_-X8xaVd9u-MJMmQhAFi--wsaPFT8nikI_TBItk3r6Ax38DOqXuhuWsNuuDwVQKrSUVEl4KURIv3u4lxWFR9jccxXSweiV9hARufOG0msdKzo5OqDi6eP6LdNf46tp3qTCtv6aYQeXtHx4NdK62kXmZKoFJ-1VCEmRnMloU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:24:14.076 -06:00 [INF] Showing login: User is not authenticated
2018-07-19 09:24:14.079 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:24:14.079 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:24:14.079 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:24:14.079 -06:00 [DBG] No PKCE used.
2018-07-19 09:24:14.079 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:24:14.079 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:24:20.722 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 09:24:20.737 -06:00 [DBG] Augmenting SignInContext
2018-07-19 09:24:20.737 -06:00 [DBG] Adding idp claim with value: local
2018-07-19 09:24:20.737 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-19 09:24:20.737 -06:00 [DBG] Adding auth_time claim with value: 1532013860
2018-07-19 09:24:20.738 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 09:24:20.738 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFDHAM7MAE7:0000000A",
  "TimeStamp": "2018-07-19T15:24:20Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:24:20.740 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:24:20.741 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:24:20.741 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 09:24:20.741 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 09:24:20.741 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 09:24:20.741 -06:00 [DBG] Start authorize callback request
2018-07-19 09:24:20.741 -06:00 [DBG] User in authorize request: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-19 09:24:20.741 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:24:20.741 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:24:20.741 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:24:20.741 -06:00 [DBG] No PKCE used.
2018-07-19 09:24:20.741 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:24:20.741 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe6iNom822tYkIoua94-dKn_KBe_OTub5u4pFKS-HENMbyJwTcK_6Wzf9MOYOAPXjzUfhYl8V9vy-3nmvb0MmaKNZDlDC09GCcjhSrNoLvy9AlVYQCWSpEXx0c6ywKb3QgAfjxNNkUqDMdMpT-6uVIJcCHN_-X8xaVd9u-MJMmQhAFi--wsaPFT8nikI_TBItk3r6Ax38DOqXuhuWsNuuDwVQKrSUVEl4KURIv3u4lxWFR9jccxXSweiV9hARufOG0msdKzo5OqDi6eP6LdNf46tp3qTCtv6aYQeXtHx4NdK62kXmZKoFJ-1VCEmRnMloU",
  "Nonce": "636676106540721770.NjliZGFlYWUtNmE4My00MDQzLTkxMTYtYzRlYWViYTI3ZDZhYWYxMGJhOWUtZWM1ZC00Y2JhLTkyOWYtMWZkNTNmM2UxNDk1",
  "SessionId": "3f09271e8bad6fc47031159b4ba040e9",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676106540721770.NjliZGFlYWUtNmE4My00MDQzLTkxMTYtYzRlYWViYTI3ZDZhYWYxMGJhOWUtZWM1ZC00Y2JhLTkyOWYtMWZkNTNmM2UxNDk1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe6iNom822tYkIoua94-dKn_KBe_OTub5u4pFKS-HENMbyJwTcK_6Wzf9MOYOAPXjzUfhYl8V9vy-3nmvb0MmaKNZDlDC09GCcjhSrNoLvy9AlVYQCWSpEXx0c6ywKb3QgAfjxNNkUqDMdMpT-6uVIJcCHN_-X8xaVd9u-MJMmQhAFi--wsaPFT8nikI_TBItk3r6Ax38DOqXuhuWsNuuDwVQKrSUVEl4KURIv3u4lxWFR9jccxXSweiV9hARufOG0msdKzo5OqDi6eP6LdNf46tp3qTCtv6aYQeXtHx4NdK62kXmZKoFJ-1VCEmRnMloU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:24:20.743 -06:00 [DBG] user_consent grant with value: ideaBox|9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 not found in store.
2018-07-19 09:24:20.743 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 09:24:20.743 -06:00 [INF] Showing consent: User has not yet consented
2018-07-19 09:24:20.745 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:24:20.745 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:24:20.746 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:24:20.746 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:24:20.746 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:24:20.746 -06:00 [DBG] No PKCE used.
2018-07-19 09:24:20.746 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:24:20.746 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:24:22.487 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 09:24:22.487 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:24:22.487 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:24:22.487 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:24:22.487 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:24:22.487 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:24:22.487 -06:00 [DBG] No PKCE used.
2018-07-19 09:24:22.488 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:24:22.491 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:24:22.491 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:24:22.491 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 09:24:22.491 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 09:24:22.491 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 09:24:22.491 -06:00 [DBG] Start authorize callback request
2018-07-19 09:24:22.492 -06:00 [DBG] User in authorize request: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-19 09:24:22.492 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:24:22.492 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:24:22.492 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:24:22.492 -06:00 [DBG] No PKCE used.
2018-07-19 09:24:22.492 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:24:22.492 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe6iNom822tYkIoua94-dKn_KBe_OTub5u4pFKS-HENMbyJwTcK_6Wzf9MOYOAPXjzUfhYl8V9vy-3nmvb0MmaKNZDlDC09GCcjhSrNoLvy9AlVYQCWSpEXx0c6ywKb3QgAfjxNNkUqDMdMpT-6uVIJcCHN_-X8xaVd9u-MJMmQhAFi--wsaPFT8nikI_TBItk3r6Ax38DOqXuhuWsNuuDwVQKrSUVEl4KURIv3u4lxWFR9jccxXSweiV9hARufOG0msdKzo5OqDi6eP6LdNf46tp3qTCtv6aYQeXtHx4NdK62kXmZKoFJ-1VCEmRnMloU",
  "Nonce": "636676106540721770.NjliZGFlYWUtNmE4My00MDQzLTkxMTYtYzRlYWViYTI3ZDZhYWYxMGJhOWUtZWM1ZC00Y2JhLTkyOWYtMWZkNTNmM2UxNDk1",
  "SessionId": "3f09271e8bad6fc47031159b4ba040e9",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676106540721770.NjliZGFlYWUtNmE4My00MDQzLTkxMTYtYzRlYWViYTI3ZDZhYWYxMGJhOWUtZWM1ZC00Y2JhLTkyOWYtMWZkNTNmM2UxNDk1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe6iNom822tYkIoua94-dKn_KBe_OTub5u4pFKS-HENMbyJwTcK_6Wzf9MOYOAPXjzUfhYl8V9vy-3nmvb0MmaKNZDlDC09GCcjhSrNoLvy9AlVYQCWSpEXx0c6ywKb3QgAfjxNNkUqDMdMpT-6uVIJcCHN_-X8xaVd9u-MJMmQhAFi--wsaPFT8nikI_TBItk3r6Ax38DOqXuhuWsNuuDwVQKrSUVEl4KURIv3u4lxWFR9jccxXSweiV9hARufOG0msdKzo5OqDi6eP6LdNf46tp3qTCtv6aYQeXtHx4NdK62kXmZKoFJ-1VCEmRnMloU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:24:22.493 -06:00 [DBG] user_consent grant with value: ideaBox|9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 not found in store.
2018-07-19 09:24:22.493 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 09:24:22.493 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-19 09:24:22.493 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-19 09:24:22.493 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-19 09:24:22.498 -06:00 [DBG] Creating Implicit Flow response.
2018-07-19 09:24:22.498 -06:00 [DBG] Getting claims for identity token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 and client: ideaBox
2018-07-19 09:24:22.498 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 09:24:22.510 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****2gaA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****b1cb"
    }
  ],
  "ActivityId": "0HLFDHAM7MAE7:0000000E",
  "TimeStamp": "2018-07-19T15:24:22Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:24:22.510 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe6iNom822tYkIoua94-dKn_KBe_OTub5u4pFKS-HENMbyJwTcK_6Wzf9MOYOAPXjzUfhYl8V9vy-3nmvb0MmaKNZDlDC09GCcjhSrNoLvy9AlVYQCWSpEXx0c6ywKb3QgAfjxNNkUqDMdMpT-6uVIJcCHN_-X8xaVd9u-MJMmQhAFi--wsaPFT8nikI_TBItk3r6Ax38DOqXuhuWsNuuDwVQKrSUVEl4KURIv3u4lxWFR9jccxXSweiV9hARufOG0msdKzo5OqDi6eP6LdNf46tp3qTCtv6aYQeXtHx4NdK62kXmZKoFJ-1VCEmRnMloU",
  "Scope": "openid profile business email"
}
2018-07-19 09:24:22.510 -06:00 [DBG] Augmenting SignInContext
2018-07-19 09:24:22.510 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 09:24:22.596 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-19 09:24:22.596 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-19 09:24:22.596 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-19 09:24:22.596 -06:00 [DBG] Start token request.
2018-07-19 09:24:22.596 -06:00 [DBG] Start client validation
2018-07-19 09:24:22.596 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-19 09:24:22.596 -06:00 [DBG] Start parsing for secret in post body
2018-07-19 09:24:22.597 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-19 09:24:22.597 -06:00 [DBG] Secret id found: ideaBox
2018-07-19 09:24:22.597 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:24:22.597 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-19 09:24:22.597 -06:00 [DBG] Client validation success
2018-07-19 09:24:22.597 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFDHAM7MAE8:00000003",
  "TimeStamp": "2018-07-19T15:24:22Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:24:22.597 -06:00 [DBG] Start token request validation
2018-07-19 09:24:22.597 -06:00 [DBG] Start validation of authorization code token request
2018-07-19 09:24:22.604 -06:00 [DBG] Validation of authorization code token request success
2018-07-19 09:24:22.604 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "3304df2ae97511b5ccb9d9d3b73353185cee8215a1680185d084d8cec7bdb1cb",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "3304df2ae97511b5ccb9d9d3b73353185cee8215a1680185d084d8cec7bdb1cb",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-19 09:24:22.604 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:24:22.604 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-19 09:24:22.605 -06:00 [DBG] Getting claims for access token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-19 09:24:22.617 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:24:22.617 -06:00 [DBG] Getting claims for identity token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 and client: ideaBox
2018-07-19 09:24:22.617 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 09:24:22.628 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****UHxQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Zyrw"
    }
  ],
  "ActivityId": "0HLFDHAM7MAE8:00000003",
  "TimeStamp": "2018-07-19T15:24:22Z",
  "ProcessId": 737,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:24:22.629 -06:00 [DBG] Token request success.
2018-07-19 09:24:22.631 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-19 09:24:22.631 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-19 09:24:22.631 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-19 09:24:22.631 -06:00 [DBG] Start userinfo request
2018-07-19 09:24:22.631 -06:00 [DBG] Bearer token found in header
2018-07-19 09:24:22.632 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:24:22.633 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:24:22.634 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-19 09:24:22.634 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532013862,
    "exp": 1532017462,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
    "auth_time": 1532013860,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-19 09:24:22.634 -06:00 [DBG] Creating userinfo response
2018-07-19 09:24:22.634 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:24:22.634 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:24:22.634 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-19 09:24:22.634 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:24:22.635 -06:00 [INF] Profile service returned to the following claim types: sub name given_name family_name email email_verified website preferred_username
2018-07-19 09:24:22.635 -06:00 [DBG] End userinfo request
2018-07-19 09:27:49.185 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 09:27:49.215 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 09:27:49.217 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 09:27:49.217 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 09:27:49.217 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 09:27:49.217 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 09:28:50.851 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-19 09:28:50.968 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-19 09:28:50.968 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-19 09:28:50.971 -06:00 [DBG] Start discovery request
2018-07-19 09:28:51.192 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-19 09:28:51.193 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-19 09:28:51.193 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-19 09:28:51.196 -06:00 [DBG] Start key discovery request
2018-07-19 09:28:51.296 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-19 09:28:51.299 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-19 09:28:51.300 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-19 09:28:51.302 -06:00 [DBG] Start authorize request
2018-07-19 09:28:51.318 -06:00 [DBG] No user present in authorize request
2018-07-19 09:28:51.321 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:28:51.332 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:28:51.336 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:28:51.337 -06:00 [DBG] No PKCE used.
2018-07-19 09:28:51.363 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:28:51.373 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHce5g7mG6-YdbbMqMziquamZp30MDE6TFeIIxFKyIvsFAjCsf2zIPA2sXbnSh1ywNsoc17WPpO4dFJoNM4sjMucVJ6bRYolCVSkV_EawP7NwBtVNLd035A2xOi5p2CKTyVm9n_yjcFP_ZrTw8tYQOMhKU9mHhju8hVW2y5XqCZf5wgo5ew0mInLnpIj-4_JRTt0nizpjqSlo_yIxwTGkfhY0tKBjvi-83ilyvKSN_KWlY9F8PzWXzH9SPt5fdzea5aKhYuzBSvqVfumBsbIqbhZ5K-VMR1OTAvVFCY1r2xDhDS0NFtwpsTS8WDDViML0hE",
  "Nonce": "636676109312683300.NjJlMTQ1MjktOWFjMi00NmM2LTg3ZTAtMTRjYmE2MjA5MmQzMTJhNTBmYzctMmVkNC00YzFiLWIwNGQtMWI2MTUzYmFkMzMw",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676109312683300.NjJlMTQ1MjktOWFjMi00NmM2LTg3ZTAtMTRjYmE2MjA5MmQzMTJhNTBmYzctMmVkNC00YzFiLWIwNGQtMWI2MTUzYmFkMzMw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHce5g7mG6-YdbbMqMziquamZp30MDE6TFeIIxFKyIvsFAjCsf2zIPA2sXbnSh1ywNsoc17WPpO4dFJoNM4sjMucVJ6bRYolCVSkV_EawP7NwBtVNLd035A2xOi5p2CKTyVm9n_yjcFP_ZrTw8tYQOMhKU9mHhju8hVW2y5XqCZf5wgo5ew0mInLnpIj-4_JRTt0nizpjqSlo_yIxwTGkfhY0tKBjvi-83ilyvKSN_KWlY9F8PzWXzH9SPt5fdzea5aKhYuzBSvqVfumBsbIqbhZ5K-VMR1OTAvVFCY1r2xDhDS0NFtwpsTS8WDDViML0hE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:28:51.378 -06:00 [INF] Showing login: User is not authenticated
2018-07-19 09:28:51.678 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:28:51.679 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:28:51.679 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:28:51.679 -06:00 [DBG] No PKCE used.
2018-07-19 09:28:51.679 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:28:51.682 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:29:06.031 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 09:29:07.241 -06:00 [DBG] Augmenting SignInContext
2018-07-19 09:29:07.242 -06:00 [DBG] Adding idp claim with value: local
2018-07-19 09:29:07.242 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-19 09:29:07.242 -06:00 [DBG] Adding auth_time claim with value: 1532014147
2018-07-19 09:29:07.271 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 09:29:07.298 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFDHHA308TC:00000003",
  "TimeStamp": "2018-07-19T15:29:07Z",
  "ProcessId": 921,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:29:07.319 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:29:07.319 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:29:07.319 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 09:29:07.320 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 09:29:07.320 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 09:29:07.324 -06:00 [DBG] Start authorize callback request
2018-07-19 09:29:07.327 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-19 09:29:07.327 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:29:07.327 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:29:07.327 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:29:07.327 -06:00 [DBG] No PKCE used.
2018-07-19 09:29:07.327 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:29:07.327 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHce5g7mG6-YdbbMqMziquamZp30MDE6TFeIIxFKyIvsFAjCsf2zIPA2sXbnSh1ywNsoc17WPpO4dFJoNM4sjMucVJ6bRYolCVSkV_EawP7NwBtVNLd035A2xOi5p2CKTyVm9n_yjcFP_ZrTw8tYQOMhKU9mHhju8hVW2y5XqCZf5wgo5ew0mInLnpIj-4_JRTt0nizpjqSlo_yIxwTGkfhY0tKBjvi-83ilyvKSN_KWlY9F8PzWXzH9SPt5fdzea5aKhYuzBSvqVfumBsbIqbhZ5K-VMR1OTAvVFCY1r2xDhDS0NFtwpsTS8WDDViML0hE",
  "Nonce": "636676109312683300.NjJlMTQ1MjktOWFjMi00NmM2LTg3ZTAtMTRjYmE2MjA5MmQzMTJhNTBmYzctMmVkNC00YzFiLWIwNGQtMWI2MTUzYmFkMzMw",
  "SessionId": "741edbdcd07cb0fb76e90012cc0759ff",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676109312683300.NjJlMTQ1MjktOWFjMi00NmM2LTg3ZTAtMTRjYmE2MjA5MmQzMTJhNTBmYzctMmVkNC00YzFiLWIwNGQtMWI2MTUzYmFkMzMw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHce5g7mG6-YdbbMqMziquamZp30MDE6TFeIIxFKyIvsFAjCsf2zIPA2sXbnSh1ywNsoc17WPpO4dFJoNM4sjMucVJ6bRYolCVSkV_EawP7NwBtVNLd035A2xOi5p2CKTyVm9n_yjcFP_ZrTw8tYQOMhKU9mHhju8hVW2y5XqCZf5wgo5ew0mInLnpIj-4_JRTt0nizpjqSlo_yIxwTGkfhY0tKBjvi-83ilyvKSN_KWlY9F8PzWXzH9SPt5fdzea5aKhYuzBSvqVfumBsbIqbhZ5K-VMR1OTAvVFCY1r2xDhDS0NFtwpsTS8WDDViML0hE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:29:07.365 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-19 09:29:07.365 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 09:29:07.365 -06:00 [INF] Showing consent: User has not yet consented
2018-07-19 09:29:07.369 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:29:07.369 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:29:07.397 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:29:07.397 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:29:07.397 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:29:07.397 -06:00 [DBG] No PKCE used.
2018-07-19 09:29:07.397 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:29:07.398 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:29:47.818 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 09:29:47.818 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:29:47.818 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:29:47.843 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:29:47.843 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:29:47.843 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:29:47.843 -06:00 [DBG] No PKCE used.
2018-07-19 09:29:47.843 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:29:47.860 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:29:47.860 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:29:47.860 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 09:29:47.860 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 09:29:47.860 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 09:29:47.860 -06:00 [DBG] Start authorize callback request
2018-07-19 09:29:47.888 -06:00 [DBG] User in authorize request: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-19 09:29:47.888 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:29:47.888 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:29:47.888 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:29:47.888 -06:00 [DBG] No PKCE used.
2018-07-19 09:29:47.889 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:29:47.889 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHce5g7mG6-YdbbMqMziquamZp30MDE6TFeIIxFKyIvsFAjCsf2zIPA2sXbnSh1ywNsoc17WPpO4dFJoNM4sjMucVJ6bRYolCVSkV_EawP7NwBtVNLd035A2xOi5p2CKTyVm9n_yjcFP_ZrTw8tYQOMhKU9mHhju8hVW2y5XqCZf5wgo5ew0mInLnpIj-4_JRTt0nizpjqSlo_yIxwTGkfhY0tKBjvi-83ilyvKSN_KWlY9F8PzWXzH9SPt5fdzea5aKhYuzBSvqVfumBsbIqbhZ5K-VMR1OTAvVFCY1r2xDhDS0NFtwpsTS8WDDViML0hE",
  "Nonce": "636676109312683300.NjJlMTQ1MjktOWFjMi00NmM2LTg3ZTAtMTRjYmE2MjA5MmQzMTJhNTBmYzctMmVkNC00YzFiLWIwNGQtMWI2MTUzYmFkMzMw",
  "SessionId": "741edbdcd07cb0fb76e90012cc0759ff",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676109312683300.NjJlMTQ1MjktOWFjMi00NmM2LTg3ZTAtMTRjYmE2MjA5MmQzMTJhNTBmYzctMmVkNC00YzFiLWIwNGQtMWI2MTUzYmFkMzMw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHce5g7mG6-YdbbMqMziquamZp30MDE6TFeIIxFKyIvsFAjCsf2zIPA2sXbnSh1ywNsoc17WPpO4dFJoNM4sjMucVJ6bRYolCVSkV_EawP7NwBtVNLd035A2xOi5p2CKTyVm9n_yjcFP_ZrTw8tYQOMhKU9mHhju8hVW2y5XqCZf5wgo5ew0mInLnpIj-4_JRTt0nizpjqSlo_yIxwTGkfhY0tKBjvi-83ilyvKSN_KWlY9F8PzWXzH9SPt5fdzea5aKhYuzBSvqVfumBsbIqbhZ5K-VMR1OTAvVFCY1r2xDhDS0NFtwpsTS8WDDViML0hE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:29:47.890 -06:00 [DBG] user_consent grant with value: ideaBox|59290b52-2397-4d33-9d60-1df1483dc8d4 not found in store.
2018-07-19 09:29:47.890 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 09:29:47.900 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-19 09:29:47.910 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-19 09:29:47.917 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-19 09:29:47.938 -06:00 [DBG] Creating Implicit Flow response.
2018-07-19 09:29:47.946 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-19 09:29:47.948 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 09:29:48.015 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****3Tng"
    },
    {
      "TokenType": "code",
      "TokenValue": "****98f4"
    }
  ],
  "ActivityId": "0HLFDHHA308TC:00000007",
  "TimeStamp": "2018-07-19T15:29:48Z",
  "ProcessId": 921,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:29:48.018 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "59290b52-2397-4d33-9d60-1df1483dc8d4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHce5g7mG6-YdbbMqMziquamZp30MDE6TFeIIxFKyIvsFAjCsf2zIPA2sXbnSh1ywNsoc17WPpO4dFJoNM4sjMucVJ6bRYolCVSkV_EawP7NwBtVNLd035A2xOi5p2CKTyVm9n_yjcFP_ZrTw8tYQOMhKU9mHhju8hVW2y5XqCZf5wgo5ew0mInLnpIj-4_JRTt0nizpjqSlo_yIxwTGkfhY0tKBjvi-83ilyvKSN_KWlY9F8PzWXzH9SPt5fdzea5aKhYuzBSvqVfumBsbIqbhZ5K-VMR1OTAvVFCY1r2xDhDS0NFtwpsTS8WDDViML0hE",
  "Scope": "openid profile business email"
}
2018-07-19 09:29:48.033 -06:00 [DBG] Augmenting SignInContext
2018-07-19 09:29:48.033 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 09:29:48.327 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-19 09:29:48.329 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-19 09:29:48.329 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-19 09:29:48.335 -06:00 [DBG] Start token request.
2018-07-19 09:29:48.340 -06:00 [DBG] Start client validation
2018-07-19 09:29:48.344 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-19 09:29:48.346 -06:00 [DBG] Start parsing for secret in post body
2018-07-19 09:29:48.347 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-19 09:29:48.347 -06:00 [DBG] Secret id found: ideaBox
2018-07-19 09:29:48.347 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:29:48.354 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-19 09:29:48.354 -06:00 [DBG] Client validation success
2018-07-19 09:29:48.357 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFDHHA308TB:00000003",
  "TimeStamp": "2018-07-19T15:29:48Z",
  "ProcessId": 921,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:29:48.362 -06:00 [DBG] Start token request validation
2018-07-19 09:29:48.372 -06:00 [DBG] Start validation of authorization code token request
2018-07-19 09:29:48.392 -06:00 [DBG] Validation of authorization code token request success
2018-07-19 09:29:48.395 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "6e900f1889173b4a07618a09b7f4cee61099e88814fdf193ef4273ee012498f4",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "6e900f1889173b4a07618a09b7f4cee61099e88814fdf193ef4273ee012498f4",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-19 09:29:48.406 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:29:48.414 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-19 09:29:48.415 -06:00 [DBG] Getting claims for access token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4
2018-07-19 09:29:48.435 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:29:48.435 -06:00 [DBG] Getting claims for identity token for subject: 59290b52-2397-4d33-9d60-1df1483dc8d4 and client: ideaBox
2018-07-19 09:29:48.435 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 09:29:48.448 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****JLsg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****7D2g"
    }
  ],
  "ActivityId": "0HLFDHHA308TB:00000003",
  "TimeStamp": "2018-07-19T15:29:48Z",
  "ProcessId": 921,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:29:48.449 -06:00 [DBG] Token request success.
2018-07-19 09:29:48.460 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-19 09:29:48.461 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-19 09:29:48.461 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-19 09:29:48.466 -06:00 [DBG] Start userinfo request
2018-07-19 09:29:48.468 -06:00 [DBG] Bearer token found in header
2018-07-19 09:29:48.527 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:29:48.529 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:29:48.531 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-19 09:29:48.534 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532014188,
    "exp": 1532017788,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "59290b52-2397-4d33-9d60-1df1483dc8d4",
    "auth_time": 1532014147,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-19 09:29:48.538 -06:00 [DBG] Creating userinfo response
2018-07-19 09:29:48.541 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:29:48.543 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:29:48.545 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-19 09:29:48.545 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:29:48.547 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-19 09:29:48.547 -06:00 [DBG] End userinfo request
2018-07-19 09:30:35.032 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-19 09:30:35.032 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-19 09:30:35.032 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-19 09:30:35.032 -06:00 [DBG] Start authorize request
2018-07-19 09:30:35.032 -06:00 [DBG] No user present in authorize request
2018-07-19 09:30:35.032 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:30:35.032 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:30:35.033 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:30:35.033 -06:00 [DBG] No PKCE used.
2018-07-19 09:30:35.033 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:30:35.033 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcVIv9X1IT51eNlSn8sr89ZtRHksXJuLjzx9xcjuMAFJzPA1xwOTvaTtTCygx_pNlvhfNckstcUXM-xtz7lPxXq_Y1LCMqJGqBx3aSpUmupNIYeURKiJEZD1fZE2dbijWzmvuk4oa4YZ6RfSJuQFKP51kVMQgwjxw82dywJVlk9Upqv-fOzsnbEMb2YwWLLbcY4hPlVJiZ_pYLEgg18HTMQ7SLr8pSed8EuUnL0r99ADEpYYZx1VZ8J_HmdX0Ww1AoaSkMUlOI0iy8V1I6tXJkSMELHqqqq0w9cjbER5ZOJJJolAN9jvZ9PkwFXbYIszOc",
  "Nonce": "636676110350227690.Y2ZhYzhkNmEtZGI4MC00MzAyLTgyYzEtOGMwMzQ4ZmVlMjY0NTk2M2I0YzItNTdjNS00OWY1LWExZDItMjM1MTkyNzU2ZTkw",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676110350227690.Y2ZhYzhkNmEtZGI4MC00MzAyLTgyYzEtOGMwMzQ4ZmVlMjY0NTk2M2I0YzItNTdjNS00OWY1LWExZDItMjM1MTkyNzU2ZTkw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcVIv9X1IT51eNlSn8sr89ZtRHksXJuLjzx9xcjuMAFJzPA1xwOTvaTtTCygx_pNlvhfNckstcUXM-xtz7lPxXq_Y1LCMqJGqBx3aSpUmupNIYeURKiJEZD1fZE2dbijWzmvuk4oa4YZ6RfSJuQFKP51kVMQgwjxw82dywJVlk9Upqv-fOzsnbEMb2YwWLLbcY4hPlVJiZ_pYLEgg18HTMQ7SLr8pSed8EuUnL0r99ADEpYYZx1VZ8J_HmdX0Ww1AoaSkMUlOI0iy8V1I6tXJkSMELHqqqq0w9cjbER5ZOJJJolAN9jvZ9PkwFXbYIszOc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:30:35.033 -06:00 [INF] Showing login: User is not authenticated
2018-07-19 09:30:35.039 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:30:35.039 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:30:35.039 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:30:35.039 -06:00 [DBG] No PKCE used.
2018-07-19 09:30:35.040 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:30:35.040 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:30:46.231 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 09:30:46.246 -06:00 [DBG] Augmenting SignInContext
2018-07-19 09:30:46.246 -06:00 [DBG] Adding idp claim with value: local
2018-07-19 09:30:46.246 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-19 09:30:46.246 -06:00 [DBG] Adding auth_time claim with value: 1532014246
2018-07-19 09:30:46.246 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 09:30:46.247 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFDHHA308TC:0000000A",
  "TimeStamp": "2018-07-19T15:30:46Z",
  "ProcessId": 921,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:30:46.250 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:30:46.250 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:30:46.250 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 09:30:46.250 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 09:30:46.250 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 09:30:46.250 -06:00 [DBG] Start authorize callback request
2018-07-19 09:30:46.251 -06:00 [DBG] User in authorize request: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-19 09:30:46.251 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:30:46.251 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:30:46.251 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:30:46.251 -06:00 [DBG] No PKCE used.
2018-07-19 09:30:46.251 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:30:46.251 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcVIv9X1IT51eNlSn8sr89ZtRHksXJuLjzx9xcjuMAFJzPA1xwOTvaTtTCygx_pNlvhfNckstcUXM-xtz7lPxXq_Y1LCMqJGqBx3aSpUmupNIYeURKiJEZD1fZE2dbijWzmvuk4oa4YZ6RfSJuQFKP51kVMQgwjxw82dywJVlk9Upqv-fOzsnbEMb2YwWLLbcY4hPlVJiZ_pYLEgg18HTMQ7SLr8pSed8EuUnL0r99ADEpYYZx1VZ8J_HmdX0Ww1AoaSkMUlOI0iy8V1I6tXJkSMELHqqqq0w9cjbER5ZOJJJolAN9jvZ9PkwFXbYIszOc",
  "Nonce": "636676110350227690.Y2ZhYzhkNmEtZGI4MC00MzAyLTgyYzEtOGMwMzQ4ZmVlMjY0NTk2M2I0YzItNTdjNS00OWY1LWExZDItMjM1MTkyNzU2ZTkw",
  "SessionId": "87fc878f312eac8ac80ffc5985441d80",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676110350227690.Y2ZhYzhkNmEtZGI4MC00MzAyLTgyYzEtOGMwMzQ4ZmVlMjY0NTk2M2I0YzItNTdjNS00OWY1LWExZDItMjM1MTkyNzU2ZTkw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcVIv9X1IT51eNlSn8sr89ZtRHksXJuLjzx9xcjuMAFJzPA1xwOTvaTtTCygx_pNlvhfNckstcUXM-xtz7lPxXq_Y1LCMqJGqBx3aSpUmupNIYeURKiJEZD1fZE2dbijWzmvuk4oa4YZ6RfSJuQFKP51kVMQgwjxw82dywJVlk9Upqv-fOzsnbEMb2YwWLLbcY4hPlVJiZ_pYLEgg18HTMQ7SLr8pSed8EuUnL0r99ADEpYYZx1VZ8J_HmdX0Ww1AoaSkMUlOI0iy8V1I6tXJkSMELHqqqq0w9cjbER5ZOJJJolAN9jvZ9PkwFXbYIszOc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:30:46.252 -06:00 [DBG] user_consent grant with value: ideaBox|9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 not found in store.
2018-07-19 09:30:46.253 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 09:30:46.253 -06:00 [INF] Showing consent: User has not yet consented
2018-07-19 09:30:46.255 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:30:46.255 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:30:46.255 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:30:46.255 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:30:46.255 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:30:46.255 -06:00 [DBG] No PKCE used.
2018-07-19 09:30:46.255 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:30:46.255 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:30:49.312 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 09:30:49.312 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:30:49.312 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:30:49.313 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:30:49.313 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:30:49.313 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:30:49.313 -06:00 [DBG] No PKCE used.
2018-07-19 09:30:49.313 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:30:49.316 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:30:49.316 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:30:49.316 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 09:30:49.317 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 09:30:49.317 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 09:30:49.317 -06:00 [DBG] Start authorize callback request
2018-07-19 09:30:49.317 -06:00 [DBG] User in authorize request: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-19 09:30:49.317 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:30:49.317 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:30:49.317 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:30:49.317 -06:00 [DBG] No PKCE used.
2018-07-19 09:30:49.317 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:30:49.317 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcVIv9X1IT51eNlSn8sr89ZtRHksXJuLjzx9xcjuMAFJzPA1xwOTvaTtTCygx_pNlvhfNckstcUXM-xtz7lPxXq_Y1LCMqJGqBx3aSpUmupNIYeURKiJEZD1fZE2dbijWzmvuk4oa4YZ6RfSJuQFKP51kVMQgwjxw82dywJVlk9Upqv-fOzsnbEMb2YwWLLbcY4hPlVJiZ_pYLEgg18HTMQ7SLr8pSed8EuUnL0r99ADEpYYZx1VZ8J_HmdX0Ww1AoaSkMUlOI0iy8V1I6tXJkSMELHqqqq0w9cjbER5ZOJJJolAN9jvZ9PkwFXbYIszOc",
  "Nonce": "636676110350227690.Y2ZhYzhkNmEtZGI4MC00MzAyLTgyYzEtOGMwMzQ4ZmVlMjY0NTk2M2I0YzItNTdjNS00OWY1LWExZDItMjM1MTkyNzU2ZTkw",
  "SessionId": "87fc878f312eac8ac80ffc5985441d80",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676110350227690.Y2ZhYzhkNmEtZGI4MC00MzAyLTgyYzEtOGMwMzQ4ZmVlMjY0NTk2M2I0YzItNTdjNS00OWY1LWExZDItMjM1MTkyNzU2ZTkw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcVIv9X1IT51eNlSn8sr89ZtRHksXJuLjzx9xcjuMAFJzPA1xwOTvaTtTCygx_pNlvhfNckstcUXM-xtz7lPxXq_Y1LCMqJGqBx3aSpUmupNIYeURKiJEZD1fZE2dbijWzmvuk4oa4YZ6RfSJuQFKP51kVMQgwjxw82dywJVlk9Upqv-fOzsnbEMb2YwWLLbcY4hPlVJiZ_pYLEgg18HTMQ7SLr8pSed8EuUnL0r99ADEpYYZx1VZ8J_HmdX0Ww1AoaSkMUlOI0iy8V1I6tXJkSMELHqqqq0w9cjbER5ZOJJJolAN9jvZ9PkwFXbYIszOc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:30:49.319 -06:00 [DBG] user_consent grant with value: ideaBox|9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 not found in store.
2018-07-19 09:30:49.319 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 09:30:49.319 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-19 09:30:49.319 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-19 09:30:49.319 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-19 09:30:49.324 -06:00 [DBG] Creating Implicit Flow response.
2018-07-19 09:30:49.324 -06:00 [DBG] Getting claims for identity token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 and client: ideaBox
2018-07-19 09:30:49.324 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 09:30:49.336 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****VcHg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****1eca"
    }
  ],
  "ActivityId": "0HLFDHHA308TC:0000000E",
  "TimeStamp": "2018-07-19T15:30:49Z",
  "ProcessId": 921,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:30:49.336 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcVIv9X1IT51eNlSn8sr89ZtRHksXJuLjzx9xcjuMAFJzPA1xwOTvaTtTCygx_pNlvhfNckstcUXM-xtz7lPxXq_Y1LCMqJGqBx3aSpUmupNIYeURKiJEZD1fZE2dbijWzmvuk4oa4YZ6RfSJuQFKP51kVMQgwjxw82dywJVlk9Upqv-fOzsnbEMb2YwWLLbcY4hPlVJiZ_pYLEgg18HTMQ7SLr8pSed8EuUnL0r99ADEpYYZx1VZ8J_HmdX0Ww1AoaSkMUlOI0iy8V1I6tXJkSMELHqqqq0w9cjbER5ZOJJJolAN9jvZ9PkwFXbYIszOc",
  "Scope": "openid profile business email"
}
2018-07-19 09:30:49.336 -06:00 [DBG] Augmenting SignInContext
2018-07-19 09:30:49.336 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 09:30:49.478 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-19 09:30:49.478 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-19 09:30:49.478 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-19 09:30:49.478 -06:00 [DBG] Start token request.
2018-07-19 09:30:49.478 -06:00 [DBG] Start client validation
2018-07-19 09:30:49.478 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-19 09:30:49.478 -06:00 [DBG] Start parsing for secret in post body
2018-07-19 09:30:49.478 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-19 09:30:49.478 -06:00 [DBG] Secret id found: ideaBox
2018-07-19 09:30:49.479 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:30:49.479 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-19 09:30:49.479 -06:00 [DBG] Client validation success
2018-07-19 09:30:49.479 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFDHHA308TB:00000005",
  "TimeStamp": "2018-07-19T15:30:49Z",
  "ProcessId": 921,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:30:49.479 -06:00 [DBG] Start token request validation
2018-07-19 09:30:49.479 -06:00 [DBG] Start validation of authorization code token request
2018-07-19 09:30:49.488 -06:00 [DBG] Validation of authorization code token request success
2018-07-19 09:30:49.488 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "0591888f001d4ebcdc0667a3c0798e5ec5efe0d7e2e4649e7d5210fde1931eca",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "0591888f001d4ebcdc0667a3c0798e5ec5efe0d7e2e4649e7d5210fde1931eca",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-19 09:30:49.488 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:30:49.489 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-19 09:30:49.489 -06:00 [DBG] Getting claims for access token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5
2018-07-19 09:30:49.502 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:30:49.502 -06:00 [DBG] Getting claims for identity token for subject: 9d29bf33-e0e5-4b21-8611-d11ee6f82ab5 and client: ideaBox
2018-07-19 09:30:49.502 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 09:30:49.514 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****cTVw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****dFLQ"
    }
  ],
  "ActivityId": "0HLFDHHA308TB:00000005",
  "TimeStamp": "2018-07-19T15:30:49Z",
  "ProcessId": 921,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:30:49.514 -06:00 [DBG] Token request success.
2018-07-19 09:30:49.604 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-19 09:30:49.604 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-19 09:30:49.604 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-19 09:30:49.604 -06:00 [DBG] Start userinfo request
2018-07-19 09:30:49.604 -06:00 [DBG] Bearer token found in header
2018-07-19 09:30:49.606 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:30:49.606 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:30:49.608 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-19 09:30:49.608 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532014249,
    "exp": 1532017849,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "9d29bf33-e0e5-4b21-8611-d11ee6f82ab5",
    "auth_time": 1532014246,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-19 09:30:49.608 -06:00 [DBG] Creating userinfo response
2018-07-19 09:30:49.608 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:30:49.608 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:30:49.608 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-19 09:30:49.608 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:30:49.610 -06:00 [INF] Profile service returned to the following claim types: sub name given_name family_name email email_verified website preferred_username
2018-07-19 09:30:49.610 -06:00 [DBG] End userinfo request
2018-07-19 09:34:13.314 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 09:34:13.345 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 09:34:13.348 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 09:34:13.348 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 09:34:13.348 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 09:34:13.348 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 09:34:51.350 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 09:34:51.381 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 09:34:51.383 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 09:34:51.383 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 09:34:51.383 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 09:34:51.384 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 09:34:52.767 -06:00 [WRN] User e2eb4ed7-51c5-462c-8c4e-cad8f8d0f3cd validation failed: DuplicateUserName.
2018-07-19 09:36:52.055 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 09:36:52.085 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 09:36:52.087 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 09:36:52.087 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 09:36:52.088 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 09:36:52.088 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 09:36:53.451 -06:00 [WRN] User 4f087930-9fda-4a78-8862-e2ddef44a2a4 validation failed: DuplicateUserName.
2018-07-19 09:38:38.579 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 09:38:38.608 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 09:38:38.611 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 09:38:38.611 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 09:38:38.611 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 09:38:38.611 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 09:38:48.654 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 09:38:48.683 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 09:38:48.686 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 09:38:48.686 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 09:38:48.686 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 09:38:48.686 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 09:38:56.366 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-19 09:38:56.481 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-19 09:38:56.481 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-19 09:38:56.484 -06:00 [DBG] Start authorize request
2018-07-19 09:38:56.500 -06:00 [DBG] No user present in authorize request
2018-07-19 09:38:56.503 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:38:56.513 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:38:56.517 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:38:56.518 -06:00 [DBG] No PKCE used.
2018-07-19 09:38:56.547 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:38:56.601 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHerTsInr-Abr8NZNRKIWaLti8iLNV6ykm_TLgfxvE1K5uZ6LbLsSAvSzGPeeUoMNNUDn1ZEBsgyuS6GDzpgue1Wsg6tSxALI665srhXbfFtu2auEguTKP8q-VeKXP_-tl86Qg7wVO4tyQUyRN8oO4mSfBOKs-JqQ7FkHXvVclhGIujbZznTgftc4kcoSaq2lmLCGRCI2iqn5WLdmcl94k3QUhBWX3HHTZV8zFxqVg044GoHWetcG5TSIm7mgxRHZGlaSJpa0OsDRmdq-rRilmNFF8j5j0EjJLsqU_W0utb4ug4VIDLVBlKaAjLe6zI3iUY",
  "Nonce": "636676115361435390.YmRlMjkzOGEtZWY0Ni00NDdlLWJiMGMtMGVjYjc4YTI3MmQzNjI2ZWQ5MjEtYzQ0My00MzQ3LTllZDctNDVhOTJjOGU0OTdh",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676115361435390.YmRlMjkzOGEtZWY0Ni00NDdlLWJiMGMtMGVjYjc4YTI3MmQzNjI2ZWQ5MjEtYzQ0My00MzQ3LTllZDctNDVhOTJjOGU0OTdh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHerTsInr-Abr8NZNRKIWaLti8iLNV6ykm_TLgfxvE1K5uZ6LbLsSAvSzGPeeUoMNNUDn1ZEBsgyuS6GDzpgue1Wsg6tSxALI665srhXbfFtu2auEguTKP8q-VeKXP_-tl86Qg7wVO4tyQUyRN8oO4mSfBOKs-JqQ7FkHXvVclhGIujbZznTgftc4kcoSaq2lmLCGRCI2iqn5WLdmcl94k3QUhBWX3HHTZV8zFxqVg044GoHWetcG5TSIm7mgxRHZGlaSJpa0OsDRmdq-rRilmNFF8j5j0EjJLsqU_W0utb4ug4VIDLVBlKaAjLe6zI3iUY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:38:56.608 -06:00 [INF] Showing login: User is not authenticated
2018-07-19 09:38:56.946 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:38:56.947 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:38:56.947 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:38:56.947 -06:00 [DBG] No PKCE used.
2018-07-19 09:38:56.947 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:38:56.949 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:39:08.930 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 09:39:10.100 -06:00 [DBG] Augmenting SignInContext
2018-07-19 09:39:10.102 -06:00 [DBG] Adding idp claim with value: local
2018-07-19 09:39:10.102 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-19 09:39:10.102 -06:00 [DBG] Adding auth_time claim with value: 1532014750
2018-07-19 09:39:10.130 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 09:39:10.157 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFDHMUHMELD:00000003",
  "TimeStamp": "2018-07-19T15:39:10Z",
  "ProcessId": 1118,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:39:10.177 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:39:10.178 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:39:10.178 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 09:39:10.178 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 09:39:10.178 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 09:39:10.182 -06:00 [DBG] Start authorize callback request
2018-07-19 09:39:10.185 -06:00 [DBG] User in authorize request: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 09:39:10.185 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:39:10.185 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:39:10.185 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:39:10.185 -06:00 [DBG] No PKCE used.
2018-07-19 09:39:10.186 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:39:10.186 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHerTsInr-Abr8NZNRKIWaLti8iLNV6ykm_TLgfxvE1K5uZ6LbLsSAvSzGPeeUoMNNUDn1ZEBsgyuS6GDzpgue1Wsg6tSxALI665srhXbfFtu2auEguTKP8q-VeKXP_-tl86Qg7wVO4tyQUyRN8oO4mSfBOKs-JqQ7FkHXvVclhGIujbZznTgftc4kcoSaq2lmLCGRCI2iqn5WLdmcl94k3QUhBWX3HHTZV8zFxqVg044GoHWetcG5TSIm7mgxRHZGlaSJpa0OsDRmdq-rRilmNFF8j5j0EjJLsqU_W0utb4ug4VIDLVBlKaAjLe6zI3iUY",
  "Nonce": "636676115361435390.YmRlMjkzOGEtZWY0Ni00NDdlLWJiMGMtMGVjYjc4YTI3MmQzNjI2ZWQ5MjEtYzQ0My00MzQ3LTllZDctNDVhOTJjOGU0OTdh",
  "SessionId": "d29edc90dbff3a9a6e47335ca757da24",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676115361435390.YmRlMjkzOGEtZWY0Ni00NDdlLWJiMGMtMGVjYjc4YTI3MmQzNjI2ZWQ5MjEtYzQ0My00MzQ3LTllZDctNDVhOTJjOGU0OTdh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHerTsInr-Abr8NZNRKIWaLti8iLNV6ykm_TLgfxvE1K5uZ6LbLsSAvSzGPeeUoMNNUDn1ZEBsgyuS6GDzpgue1Wsg6tSxALI665srhXbfFtu2auEguTKP8q-VeKXP_-tl86Qg7wVO4tyQUyRN8oO4mSfBOKs-JqQ7FkHXvVclhGIujbZznTgftc4kcoSaq2lmLCGRCI2iqn5WLdmcl94k3QUhBWX3HHTZV8zFxqVg044GoHWetcG5TSIm7mgxRHZGlaSJpa0OsDRmdq-rRilmNFF8j5j0EjJLsqU_W0utb4ug4VIDLVBlKaAjLe6zI3iUY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:39:10.222 -06:00 [DBG] user_consent grant with value: ideaBox|bb596370-55ff-4429-8d36-390ddca7cf63 not found in store.
2018-07-19 09:39:10.223 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 09:39:10.223 -06:00 [INF] Showing consent: User has not yet consented
2018-07-19 09:39:10.226 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:39:10.226 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:39:10.252 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:39:10.252 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:39:10.252 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:39:10.252 -06:00 [DBG] No PKCE used.
2018-07-19 09:39:10.252 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:39:10.252 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:39:12.443 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 09:39:12.443 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:39:12.444 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:39:12.463 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:39:12.463 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:39:12.463 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:39:12.463 -06:00 [DBG] No PKCE used.
2018-07-19 09:39:12.463 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:39:12.481 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:39:12.481 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 09:39:12.481 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 09:39:12.481 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 09:39:12.481 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 09:39:12.481 -06:00 [DBG] Start authorize callback request
2018-07-19 09:39:12.508 -06:00 [DBG] User in authorize request: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 09:39:12.508 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 09:39:12.508 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:39:12.508 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 09:39:12.508 -06:00 [DBG] No PKCE used.
2018-07-19 09:39:12.508 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 09:39:12.508 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHerTsInr-Abr8NZNRKIWaLti8iLNV6ykm_TLgfxvE1K5uZ6LbLsSAvSzGPeeUoMNNUDn1ZEBsgyuS6GDzpgue1Wsg6tSxALI665srhXbfFtu2auEguTKP8q-VeKXP_-tl86Qg7wVO4tyQUyRN8oO4mSfBOKs-JqQ7FkHXvVclhGIujbZznTgftc4kcoSaq2lmLCGRCI2iqn5WLdmcl94k3QUhBWX3HHTZV8zFxqVg044GoHWetcG5TSIm7mgxRHZGlaSJpa0OsDRmdq-rRilmNFF8j5j0EjJLsqU_W0utb4ug4VIDLVBlKaAjLe6zI3iUY",
  "Nonce": "636676115361435390.YmRlMjkzOGEtZWY0Ni00NDdlLWJiMGMtMGVjYjc4YTI3MmQzNjI2ZWQ5MjEtYzQ0My00MzQ3LTllZDctNDVhOTJjOGU0OTdh",
  "SessionId": "d29edc90dbff3a9a6e47335ca757da24",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676115361435390.YmRlMjkzOGEtZWY0Ni00NDdlLWJiMGMtMGVjYjc4YTI3MmQzNjI2ZWQ5MjEtYzQ0My00MzQ3LTllZDctNDVhOTJjOGU0OTdh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHerTsInr-Abr8NZNRKIWaLti8iLNV6ykm_TLgfxvE1K5uZ6LbLsSAvSzGPeeUoMNNUDn1ZEBsgyuS6GDzpgue1Wsg6tSxALI665srhXbfFtu2auEguTKP8q-VeKXP_-tl86Qg7wVO4tyQUyRN8oO4mSfBOKs-JqQ7FkHXvVclhGIujbZznTgftc4kcoSaq2lmLCGRCI2iqn5WLdmcl94k3QUhBWX3HHTZV8zFxqVg044GoHWetcG5TSIm7mgxRHZGlaSJpa0OsDRmdq-rRilmNFF8j5j0EjJLsqU_W0utb4ug4VIDLVBlKaAjLe6zI3iUY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 09:39:12.509 -06:00 [DBG] user_consent grant with value: ideaBox|bb596370-55ff-4429-8d36-390ddca7cf63 not found in store.
2018-07-19 09:39:12.509 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 09:39:12.516 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-19 09:39:12.526 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 09:39:12.532 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-19 09:39:12.552 -06:00 [DBG] Creating Implicit Flow response.
2018-07-19 09:39:12.560 -06:00 [DBG] Getting claims for identity token for subject: bb596370-55ff-4429-8d36-390ddca7cf63 and client: ideaBox
2018-07-19 09:39:12.563 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 09:39:12.632 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****QEOQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****4d56"
    }
  ],
  "ActivityId": "0HLFDHMUHMELD:00000007",
  "TimeStamp": "2018-07-19T15:39:12Z",
  "ProcessId": 1118,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:39:12.634 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHerTsInr-Abr8NZNRKIWaLti8iLNV6ykm_TLgfxvE1K5uZ6LbLsSAvSzGPeeUoMNNUDn1ZEBsgyuS6GDzpgue1Wsg6tSxALI665srhXbfFtu2auEguTKP8q-VeKXP_-tl86Qg7wVO4tyQUyRN8oO4mSfBOKs-JqQ7FkHXvVclhGIujbZznTgftc4kcoSaq2lmLCGRCI2iqn5WLdmcl94k3QUhBWX3HHTZV8zFxqVg044GoHWetcG5TSIm7mgxRHZGlaSJpa0OsDRmdq-rRilmNFF8j5j0EjJLsqU_W0utb4ug4VIDLVBlKaAjLe6zI3iUY",
  "Scope": "openid profile business email"
}
2018-07-19 09:39:12.649 -06:00 [DBG] Augmenting SignInContext
2018-07-19 09:39:12.649 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 09:39:13.040 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-19 09:39:13.043 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-19 09:39:13.043 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-19 09:39:13.049 -06:00 [DBG] Start token request.
2018-07-19 09:39:13.054 -06:00 [DBG] Start client validation
2018-07-19 09:39:13.058 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-19 09:39:13.060 -06:00 [DBG] Start parsing for secret in post body
2018-07-19 09:39:13.060 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-19 09:39:13.061 -06:00 [DBG] Secret id found: ideaBox
2018-07-19 09:39:13.061 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:39:13.067 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-19 09:39:13.067 -06:00 [DBG] Client validation success
2018-07-19 09:39:13.070 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFDHMUHMELE:00000001",
  "TimeStamp": "2018-07-19T15:39:13Z",
  "ProcessId": 1118,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:39:13.074 -06:00 [DBG] Start token request validation
2018-07-19 09:39:13.084 -06:00 [DBG] Start validation of authorization code token request
2018-07-19 09:39:13.103 -06:00 [DBG] Validation of authorization code token request success
2018-07-19 09:39:13.106 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "c1d235b21525ffce6c16afb01e926e0b1dfbdbde30fdd68262dfb880317f4d56",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "c1d235b21525ffce6c16afb01e926e0b1dfbdbde30fdd68262dfb880317f4d56",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-19 09:39:13.116 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:39:13.124 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-19 09:39:13.124 -06:00 [DBG] Getting claims for access token for subject: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 09:39:13.143 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:39:13.143 -06:00 [DBG] Getting claims for identity token for subject: bb596370-55ff-4429-8d36-390ddca7cf63 and client: ideaBox
2018-07-19 09:39:13.143 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 09:39:13.156 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Vs6Q"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****RNmA"
    }
  ],
  "ActivityId": "0HLFDHMUHMELE:00000001",
  "TimeStamp": "2018-07-19T15:39:13Z",
  "ProcessId": 1118,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 09:39:13.157 -06:00 [DBG] Token request success.
2018-07-19 09:39:13.166 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-19 09:39:13.167 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-19 09:39:13.167 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-19 09:39:13.171 -06:00 [DBG] Start userinfo request
2018-07-19 09:39:13.174 -06:00 [DBG] Bearer token found in header
2018-07-19 09:39:13.238 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:39:13.240 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 09:39:13.242 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-19 09:39:13.245 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532014753,
    "exp": 1532018353,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "bb596370-55ff-4429-8d36-390ddca7cf63",
    "auth_time": 1532014750,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-19 09:39:13.250 -06:00 [DBG] Creating userinfo response
2018-07-19 09:39:13.253 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:39:13.255 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:39:13.256 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-19 09:39:13.256 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 09:39:13.258 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-19 09:39:13.258 -06:00 [DBG] End userinfo request
2018-07-19 09:40:02.166 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 09:40:02.197 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 09:40:02.200 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 09:40:02.200 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 09:40:02.200 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 09:40:02.200 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 16:30:52.176 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 16:30:52.207 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 16:30:52.209 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 16:30:52.209 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 16:30:52.210 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 16:30:52.210 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 16:32:48.107 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-19 16:32:48.223 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-19 16:32:48.224 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-19 16:32:48.226 -06:00 [DBG] Start discovery request
2018-07-19 16:32:48.402 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-19 16:32:48.403 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-19 16:32:48.403 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-19 16:32:48.406 -06:00 [DBG] Start key discovery request
2018-07-19 16:32:48.462 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-19 16:32:48.465 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-19 16:32:48.465 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-19 16:32:48.469 -06:00 [DBG] Start authorize request
2018-07-19 16:32:48.485 -06:00 [DBG] No user present in authorize request
2018-07-19 16:32:48.489 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:32:48.498 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:32:48.501 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:32:48.503 -06:00 [DBG] No PKCE used.
2018-07-19 16:32:48.527 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:32:48.538 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeEDyyPSnlzwAxse5F2JllSkMAdWSWJQlrzzV0J6vZxPHChCkcp1bLfOq1mkvu2I-ACiW0RyzPK88sywYVaOuf3u9TTSPiKEbql22MgzA1lUH53iHFWnh30CBZNTMsv4D6Y-2N-G8F87iHi69CN5de7oT-S_iASX713MSJi4HYMZFtRzDtET1QBybJ9A891Xio2OlRmomrTqmy0j3_3BKeTR7ePDMjD3lBl81ayI2KV8Y1Dz1tp4Pd0AuLlLrifgDCxHrrlUaHDhbKZIZhVvGSpQ8IOTmoxZycDBly1XEb-wCcFbFOHL3Q6fS5y01Mx2rU",
  "Nonce": "636676363684416390.Zjg2ZDQ2NTYtMzc1OC00MDYwLWI1OTktZjhjMmY0MjBjOTQ2OGY3OTQwMTctZmE5MC00OWZjLTkzZmYtOGRjYTk1ZGQ5N2Yw",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676363684416390.Zjg2ZDQ2NTYtMzc1OC00MDYwLWI1OTktZjhjMmY0MjBjOTQ2OGY3OTQwMTctZmE5MC00OWZjLTkzZmYtOGRjYTk1ZGQ5N2Yw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeEDyyPSnlzwAxse5F2JllSkMAdWSWJQlrzzV0J6vZxPHChCkcp1bLfOq1mkvu2I-ACiW0RyzPK88sywYVaOuf3u9TTSPiKEbql22MgzA1lUH53iHFWnh30CBZNTMsv4D6Y-2N-G8F87iHi69CN5de7oT-S_iASX713MSJi4HYMZFtRzDtET1QBybJ9A891Xio2OlRmomrTqmy0j3_3BKeTR7ePDMjD3lBl81ayI2KV8Y1Dz1tp4Pd0AuLlLrifgDCxHrrlUaHDhbKZIZhVvGSpQ8IOTmoxZycDBly1XEb-wCcFbFOHL3Q6fS5y01Mx2rU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:32:48.544 -06:00 [INF] Showing login: User is not authenticated
2018-07-19 16:32:48.841 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:32:48.842 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:32:48.842 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:32:48.842 -06:00 [DBG] No PKCE used.
2018-07-19 16:32:48.842 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:32:48.844 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:32:58.122 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-19 16:32:58.122 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-19 16:32:58.122 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-19 16:32:58.122 -06:00 [DBG] Start discovery request
2018-07-19 16:32:58.185 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-19 16:32:58.186 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-19 16:32:58.186 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-19 16:32:58.186 -06:00 [DBG] Start key discovery request
2018-07-19 16:32:58.215 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-19 16:32:58.215 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-19 16:32:58.215 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-19 16:32:58.215 -06:00 [DBG] Start authorize request
2018-07-19 16:32:58.216 -06:00 [DBG] No user present in authorize request
2018-07-19 16:32:58.216 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:32:58.216 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:32:58.216 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:32:58.216 -06:00 [DBG] No PKCE used.
2018-07-19 16:32:58.216 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:32:58.216 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe_bOtIQJqFpJeJ7Xo2NCufwUKp0LDR4sMF4g6Bi0NnNDHMlcL9mppscW9mYDrCQCDlfoTbT0ZaCin0KaQpimXbpUAUmtcFALLrqavORDo5DMuMV55nkGm81_EqwUeGk0xf-LENxHFSy4UEcITRv9pmqNvgV3OtO8AyMaUkZ3NvRYAg8rMPgcfAHgv7OWNXxnLNeI9wWC5cQ6LFPuzVBiPnol2aT0YMcni01WI5tK1O-qS4R8Q_HKPwzbaBgCAQjCW0AjqaHyTFviLGJsPuGlR1CdvepoXqrVznqCamG-Qyn8PKJk_pB6iYR7kYb1pjY7w",
  "Nonce": "636676363782017010.ZWI5NjBhNDMtMDRjNC00ZjNiLTliMjEtZDM1MjVkZjFlNTMxMDYzYTU0YzEtZGI3My00MzAxLTk2MWUtZjY5MmZiY2ExMjYz",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location",
    "response_mode": "form_post",
    "nonce": "636676363782017010.ZWI5NjBhNDMtMDRjNC00ZjNiLTliMjEtZDM1MjVkZjFlNTMxMDYzYTU0YzEtZGI3My00MzAxLTk2MWUtZjY5MmZiY2ExMjYz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe_bOtIQJqFpJeJ7Xo2NCufwUKp0LDR4sMF4g6Bi0NnNDHMlcL9mppscW9mYDrCQCDlfoTbT0ZaCin0KaQpimXbpUAUmtcFALLrqavORDo5DMuMV55nkGm81_EqwUeGk0xf-LENxHFSy4UEcITRv9pmqNvgV3OtO8AyMaUkZ3NvRYAg8rMPgcfAHgv7OWNXxnLNeI9wWC5cQ6LFPuzVBiPnol2aT0YMcni01WI5tK1O-qS4R8Q_HKPwzbaBgCAQjCW0AjqaHyTFviLGJsPuGlR1CdvepoXqrVznqCamG-Qyn8PKJk_pB6iYR7kYb1pjY7w",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:32:58.216 -06:00 [INF] Showing login: User is not authenticated
2018-07-19 16:32:58.221 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:32:58.221 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:32:58.221 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:32:58.221 -06:00 [DBG] No PKCE used.
2018-07-19 16:32:58.221 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:32:58.221 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:33:07.680 -06:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-07-19 16:33:27.405 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 16:33:28.592 -06:00 [DBG] Augmenting SignInContext
2018-07-19 16:33:28.593 -06:00 [DBG] Adding idp claim with value: local
2018-07-19 16:33:28.593 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-19 16:33:28.593 -06:00 [DBG] Adding auth_time claim with value: 1532039608
2018-07-19 16:33:28.620 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 16:33:28.647 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFDOU6VLCBT:00000009",
  "TimeStamp": "2018-07-19T22:33:28Z",
  "ProcessId": 3386,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:33:28.668 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:33:28.668 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:33:28.668 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 16:33:28.669 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 16:33:28.669 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 16:33:28.673 -06:00 [DBG] Start authorize callback request
2018-07-19 16:33:28.675 -06:00 [DBG] User in authorize request: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:33:28.676 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:33:28.676 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:33:28.676 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:33:28.676 -06:00 [DBG] No PKCE used.
2018-07-19 16:33:28.676 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:33:28.676 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeEDyyPSnlzwAxse5F2JllSkMAdWSWJQlrzzV0J6vZxPHChCkcp1bLfOq1mkvu2I-ACiW0RyzPK88sywYVaOuf3u9TTSPiKEbql22MgzA1lUH53iHFWnh30CBZNTMsv4D6Y-2N-G8F87iHi69CN5de7oT-S_iASX713MSJi4HYMZFtRzDtET1QBybJ9A891Xio2OlRmomrTqmy0j3_3BKeTR7ePDMjD3lBl81ayI2KV8Y1Dz1tp4Pd0AuLlLrifgDCxHrrlUaHDhbKZIZhVvGSpQ8IOTmoxZycDBly1XEb-wCcFbFOHL3Q6fS5y01Mx2rU",
  "Nonce": "636676363684416390.Zjg2ZDQ2NTYtMzc1OC00MDYwLWI1OTktZjhjMmY0MjBjOTQ2OGY3OTQwMTctZmE5MC00OWZjLTkzZmYtOGRjYTk1ZGQ5N2Yw",
  "SessionId": "8490eee2bf9e82861deb41977516a6ab",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676363684416390.Zjg2ZDQ2NTYtMzc1OC00MDYwLWI1OTktZjhjMmY0MjBjOTQ2OGY3OTQwMTctZmE5MC00OWZjLTkzZmYtOGRjYTk1ZGQ5N2Yw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeEDyyPSnlzwAxse5F2JllSkMAdWSWJQlrzzV0J6vZxPHChCkcp1bLfOq1mkvu2I-ACiW0RyzPK88sywYVaOuf3u9TTSPiKEbql22MgzA1lUH53iHFWnh30CBZNTMsv4D6Y-2N-G8F87iHi69CN5de7oT-S_iASX713MSJi4HYMZFtRzDtET1QBybJ9A891Xio2OlRmomrTqmy0j3_3BKeTR7ePDMjD3lBl81ayI2KV8Y1Dz1tp4Pd0AuLlLrifgDCxHrrlUaHDhbKZIZhVvGSpQ8IOTmoxZycDBly1XEb-wCcFbFOHL3Q6fS5y01Mx2rU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:33:28.714 -06:00 [DBG] user_consent grant with value: ideaBox|bb596370-55ff-4429-8d36-390ddca7cf63 not found in store.
2018-07-19 16:33:28.714 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 16:33:28.714 -06:00 [INF] Showing consent: User has not yet consented
2018-07-19 16:33:28.718 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:33:28.718 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:33:28.721 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:33:28.721 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:33:28.721 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:33:28.721 -06:00 [DBG] No PKCE used.
2018-07-19 16:33:28.721 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:33:28.721 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:33:40.448 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 16:33:40.449 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:33:40.449 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:33:49.110 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 16:33:49.110 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:33:49.110 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:33:49.134 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:33:49.134 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:33:49.134 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:33:49.134 -06:00 [DBG] No PKCE used.
2018-07-19 16:33:49.134 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:33:49.151 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:33:49.151 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:33:49.151 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 16:33:49.151 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 16:33:49.151 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 16:33:49.151 -06:00 [DBG] Start authorize callback request
2018-07-19 16:33:49.179 -06:00 [DBG] User in authorize request: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:33:49.179 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:33:49.179 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:33:49.179 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:33:49.179 -06:00 [DBG] No PKCE used.
2018-07-19 16:33:49.180 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:33:49.180 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeEDyyPSnlzwAxse5F2JllSkMAdWSWJQlrzzV0J6vZxPHChCkcp1bLfOq1mkvu2I-ACiW0RyzPK88sywYVaOuf3u9TTSPiKEbql22MgzA1lUH53iHFWnh30CBZNTMsv4D6Y-2N-G8F87iHi69CN5de7oT-S_iASX713MSJi4HYMZFtRzDtET1QBybJ9A891Xio2OlRmomrTqmy0j3_3BKeTR7ePDMjD3lBl81ayI2KV8Y1Dz1tp4Pd0AuLlLrifgDCxHrrlUaHDhbKZIZhVvGSpQ8IOTmoxZycDBly1XEb-wCcFbFOHL3Q6fS5y01Mx2rU",
  "Nonce": "636676363684416390.Zjg2ZDQ2NTYtMzc1OC00MDYwLWI1OTktZjhjMmY0MjBjOTQ2OGY3OTQwMTctZmE5MC00OWZjLTkzZmYtOGRjYTk1ZGQ5N2Yw",
  "SessionId": "8490eee2bf9e82861deb41977516a6ab",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676363684416390.Zjg2ZDQ2NTYtMzc1OC00MDYwLWI1OTktZjhjMmY0MjBjOTQ2OGY3OTQwMTctZmE5MC00OWZjLTkzZmYtOGRjYTk1ZGQ5N2Yw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeEDyyPSnlzwAxse5F2JllSkMAdWSWJQlrzzV0J6vZxPHChCkcp1bLfOq1mkvu2I-ACiW0RyzPK88sywYVaOuf3u9TTSPiKEbql22MgzA1lUH53iHFWnh30CBZNTMsv4D6Y-2N-G8F87iHi69CN5de7oT-S_iASX713MSJi4HYMZFtRzDtET1QBybJ9A891Xio2OlRmomrTqmy0j3_3BKeTR7ePDMjD3lBl81ayI2KV8Y1Dz1tp4Pd0AuLlLrifgDCxHrrlUaHDhbKZIZhVvGSpQ8IOTmoxZycDBly1XEb-wCcFbFOHL3Q6fS5y01Mx2rU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:33:49.181 -06:00 [DBG] user_consent grant with value: ideaBox|bb596370-55ff-4429-8d36-390ddca7cf63 not found in store.
2018-07-19 16:33:49.181 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 16:33:49.190 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-19 16:33:49.200 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:33:49.207 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-19 16:33:49.229 -06:00 [DBG] Creating Implicit Flow response.
2018-07-19 16:33:49.237 -06:00 [DBG] Getting claims for identity token for subject: bb596370-55ff-4429-8d36-390ddca7cf63 and client: ideaBox
2018-07-19 16:33:49.239 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 16:33:49.307 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****En6A"
    },
    {
      "TokenType": "code",
      "TokenValue": "****64cf"
    }
  ],
  "ActivityId": "0HLFDOU6VLCBT:0000000F",
  "TimeStamp": "2018-07-19T22:33:49Z",
  "ProcessId": 3386,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:33:49.310 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeEDyyPSnlzwAxse5F2JllSkMAdWSWJQlrzzV0J6vZxPHChCkcp1bLfOq1mkvu2I-ACiW0RyzPK88sywYVaOuf3u9TTSPiKEbql22MgzA1lUH53iHFWnh30CBZNTMsv4D6Y-2N-G8F87iHi69CN5de7oT-S_iASX713MSJi4HYMZFtRzDtET1QBybJ9A891Xio2OlRmomrTqmy0j3_3BKeTR7ePDMjD3lBl81ayI2KV8Y1Dz1tp4Pd0AuLlLrifgDCxHrrlUaHDhbKZIZhVvGSpQ8IOTmoxZycDBly1XEb-wCcFbFOHL3Q6fS5y01Mx2rU",
  "Scope": "openid profile business email"
}
2018-07-19 16:33:49.325 -06:00 [DBG] Augmenting SignInContext
2018-07-19 16:33:49.325 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 16:33:49.422 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-19 16:33:49.425 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-19 16:33:49.425 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-19 16:33:49.431 -06:00 [DBG] Start token request.
2018-07-19 16:33:49.437 -06:00 [DBG] Start client validation
2018-07-19 16:33:49.441 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-19 16:33:49.443 -06:00 [DBG] Start parsing for secret in post body
2018-07-19 16:33:49.444 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-19 16:33:49.444 -06:00 [DBG] Secret id found: ideaBox
2018-07-19 16:33:49.444 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:33:49.450 -06:00 [DBG] No matching hashed secret found.
2018-07-19 16:33:49.450 -06:00 [DBG] Secret validators could not validate secret
2018-07-19 16:33:49.453 -06:00 [INF] {
  "Name": "Client Authentication Failure",
  "Category": "Authentication",
  "EventType": "Failure",
  "Id": 1011,
  "ClientId": "ideaBox",
  "Message": "Invalid client secret",
  "ActivityId": "0HLFDOU6VLCBP:00000003",
  "TimeStamp": "2018-07-19T22:33:49Z",
  "ProcessId": 3386,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:33:49.453 -06:00 [ERR] Client secret validation failed for client: ideaBox.
2018-07-19 16:34:01.209 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:34:01.209 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:34:01.209 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:34:01.209 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:34:01.209 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:34:01.209 -06:00 [DBG] No PKCE used.
2018-07-19 16:34:01.210 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:34:01.210 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:34:14.652 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:34:14.652 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:34:14.652 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-19 16:34:14.652 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-19 16:34:14.652 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-19 16:34:14.652 -06:00 [DBG] Start authorize request
2018-07-19 16:34:14.652 -06:00 [DBG] User in authorize request: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:34:14.652 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:34:14.652 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:34:14.652 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:34:14.652 -06:00 [DBG] No PKCE used.
2018-07-19 16:34:14.653 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:34:14.653 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd4dkVatqHcxYxoTMZChnO8AiyqOHbN9lu5-85IFdebz0NcMM1ONMxEOprM9_rz8sM6kfc8Nn3XuMzKrhtTzNzG4LM-M_xdQgcx5jpw9GqOtBxiNZNqrAoPQPAgtTJZK0JPj865hSQFTK6MTpV3mFojxulF6qns7NojqnO47eZ-CxuxxyKJH3TIGXIZjBgUi4sDCklu0Y0laF7Y6CyziYYgpELpjafpFw1SuyATzGOkDNVnuaoqxYIuJ9V5YXWK2DNlw2Mz8Z08LANdds_9Bp3OZyXqNsHbjkqmEy2jgcdGu_-SrQmOG7_8vuxUK8z1ogs",
  "Nonce": "636676364546485280.MjhiZjZmODItOTU3Ni00ZjYwLWE1ZGEtZjVjOTA0M2Y0MjJiZDU2ZDJlY2YtODI3ZS00NzM4LWFiYjgtNTc0MmY2YWE3NzZh",
  "SessionId": "8490eee2bf9e82861deb41977516a6ab",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676364546485280.MjhiZjZmODItOTU3Ni00ZjYwLWE1ZGEtZjVjOTA0M2Y0MjJiZDU2ZDJlY2YtODI3ZS00NzM4LWFiYjgtNTc0MmY2YWE3NzZh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd4dkVatqHcxYxoTMZChnO8AiyqOHbN9lu5-85IFdebz0NcMM1ONMxEOprM9_rz8sM6kfc8Nn3XuMzKrhtTzNzG4LM-M_xdQgcx5jpw9GqOtBxiNZNqrAoPQPAgtTJZK0JPj865hSQFTK6MTpV3mFojxulF6qns7NojqnO47eZ-CxuxxyKJH3TIGXIZjBgUi4sDCklu0Y0laF7Y6CyziYYgpELpjafpFw1SuyATzGOkDNVnuaoqxYIuJ9V5YXWK2DNlw2Mz8Z08LANdds_9Bp3OZyXqNsHbjkqmEy2jgcdGu_-SrQmOG7_8vuxUK8z1ogs",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:34:14.654 -06:00 [DBG] user_consent grant with value: ideaBox|bb596370-55ff-4429-8d36-390ddca7cf63 not found in store.
2018-07-19 16:34:14.654 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 16:34:14.654 -06:00 [INF] Showing consent: User has not yet consented
2018-07-19 16:34:14.656 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:34:14.656 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:34:14.656 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:34:14.656 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:34:14.656 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:34:14.656 -06:00 [DBG] No PKCE used.
2018-07-19 16:34:14.656 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:34:14.656 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:34:19.001 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 16:34:19.001 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:34:19.001 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:34:19.002 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:34:19.002 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:34:19.002 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:34:19.002 -06:00 [DBG] No PKCE used.
2018-07-19 16:34:19.002 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:34:19.007 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:34:19.007 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:34:19.007 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 16:34:19.007 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 16:34:19.007 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 16:34:19.007 -06:00 [DBG] Start authorize callback request
2018-07-19 16:34:19.007 -06:00 [DBG] User in authorize request: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:34:19.007 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:34:19.007 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:34:19.007 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:34:19.007 -06:00 [DBG] No PKCE used.
2018-07-19 16:34:19.007 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:34:19.008 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd4dkVatqHcxYxoTMZChnO8AiyqOHbN9lu5-85IFdebz0NcMM1ONMxEOprM9_rz8sM6kfc8Nn3XuMzKrhtTzNzG4LM-M_xdQgcx5jpw9GqOtBxiNZNqrAoPQPAgtTJZK0JPj865hSQFTK6MTpV3mFojxulF6qns7NojqnO47eZ-CxuxxyKJH3TIGXIZjBgUi4sDCklu0Y0laF7Y6CyziYYgpELpjafpFw1SuyATzGOkDNVnuaoqxYIuJ9V5YXWK2DNlw2Mz8Z08LANdds_9Bp3OZyXqNsHbjkqmEy2jgcdGu_-SrQmOG7_8vuxUK8z1ogs",
  "Nonce": "636676364546485280.MjhiZjZmODItOTU3Ni00ZjYwLWE1ZGEtZjVjOTA0M2Y0MjJiZDU2ZDJlY2YtODI3ZS00NzM4LWFiYjgtNTc0MmY2YWE3NzZh",
  "SessionId": "8490eee2bf9e82861deb41977516a6ab",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676364546485280.MjhiZjZmODItOTU3Ni00ZjYwLWE1ZGEtZjVjOTA0M2Y0MjJiZDU2ZDJlY2YtODI3ZS00NzM4LWFiYjgtNTc0MmY2YWE3NzZh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd4dkVatqHcxYxoTMZChnO8AiyqOHbN9lu5-85IFdebz0NcMM1ONMxEOprM9_rz8sM6kfc8Nn3XuMzKrhtTzNzG4LM-M_xdQgcx5jpw9GqOtBxiNZNqrAoPQPAgtTJZK0JPj865hSQFTK6MTpV3mFojxulF6qns7NojqnO47eZ-CxuxxyKJH3TIGXIZjBgUi4sDCklu0Y0laF7Y6CyziYYgpELpjafpFw1SuyATzGOkDNVnuaoqxYIuJ9V5YXWK2DNlw2Mz8Z08LANdds_9Bp3OZyXqNsHbjkqmEy2jgcdGu_-SrQmOG7_8vuxUK8z1ogs",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:34:19.009 -06:00 [DBG] user_consent grant with value: ideaBox|bb596370-55ff-4429-8d36-390ddca7cf63 not found in store.
2018-07-19 16:34:19.009 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 16:34:19.009 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-19 16:34:19.009 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:34:19.009 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-19 16:34:19.014 -06:00 [DBG] Creating Implicit Flow response.
2018-07-19 16:34:19.014 -06:00 [DBG] Getting claims for identity token for subject: bb596370-55ff-4429-8d36-390ddca7cf63 and client: ideaBox
2018-07-19 16:34:19.014 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 16:34:19.026 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****D6iQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****179a"
    }
  ],
  "ActivityId": "0HLFDOU6VLCBT:00000014",
  "TimeStamp": "2018-07-19T22:34:19Z",
  "ProcessId": 3386,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:34:19.026 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd4dkVatqHcxYxoTMZChnO8AiyqOHbN9lu5-85IFdebz0NcMM1ONMxEOprM9_rz8sM6kfc8Nn3XuMzKrhtTzNzG4LM-M_xdQgcx5jpw9GqOtBxiNZNqrAoPQPAgtTJZK0JPj865hSQFTK6MTpV3mFojxulF6qns7NojqnO47eZ-CxuxxyKJH3TIGXIZjBgUi4sDCklu0Y0laF7Y6CyziYYgpELpjafpFw1SuyATzGOkDNVnuaoqxYIuJ9V5YXWK2DNlw2Mz8Z08LANdds_9Bp3OZyXqNsHbjkqmEy2jgcdGu_-SrQmOG7_8vuxUK8z1ogs",
  "Scope": "openid profile business email"
}
2018-07-19 16:34:19.093 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-19 16:34:19.094 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-19 16:34:19.094 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-19 16:34:19.094 -06:00 [DBG] Start token request.
2018-07-19 16:34:19.094 -06:00 [DBG] Start client validation
2018-07-19 16:34:19.094 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-19 16:34:19.095 -06:00 [DBG] Start parsing for secret in post body
2018-07-19 16:34:19.095 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-19 16:34:19.095 -06:00 [DBG] Secret id found: ideaBox
2018-07-19 16:34:19.095 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:34:19.095 -06:00 [DBG] No matching hashed secret found.
2018-07-19 16:34:19.095 -06:00 [DBG] Secret validators could not validate secret
2018-07-19 16:34:19.095 -06:00 [INF] {
  "Name": "Client Authentication Failure",
  "Category": "Authentication",
  "EventType": "Failure",
  "Id": 1011,
  "ClientId": "ideaBox",
  "Message": "Invalid client secret",
  "ActivityId": "0HLFDOU6VLCBP:00000004",
  "TimeStamp": "2018-07-19T22:34:19Z",
  "ProcessId": 3386,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:34:19.095 -06:00 [ERR] Client secret validation failed for client: ideaBox.
2018-07-19 16:34:38.043 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-19 16:34:38.043 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-19 16:34:38.043 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-19 16:34:38.043 -06:00 [DBG] Start token request.
2018-07-19 16:34:38.043 -06:00 [DBG] Start client validation
2018-07-19 16:34:38.043 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-19 16:34:38.043 -06:00 [DBG] Start parsing for secret in post body
2018-07-19 16:34:38.044 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-19 16:34:38.044 -06:00 [DBG] Secret id found: ideaBox
2018-07-19 16:34:38.044 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:34:38.044 -06:00 [DBG] No matching hashed secret found.
2018-07-19 16:34:38.044 -06:00 [DBG] Secret validators could not validate secret
2018-07-19 16:34:38.044 -06:00 [INF] {
  "Name": "Client Authentication Failure",
  "Category": "Authentication",
  "EventType": "Failure",
  "Id": 1011,
  "ClientId": "ideaBox",
  "Message": "Invalid client secret",
  "ActivityId": "0HLFDOU6VLCBP:00000005",
  "TimeStamp": "2018-07-19T22:34:38Z",
  "ProcessId": 3386,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:34:38.044 -06:00 [ERR] Client secret validation failed for client: ideaBox.
2018-07-19 16:34:56.277 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:34:56.277 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:34:56.277 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-19 16:34:56.278 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-19 16:34:56.278 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-19 16:34:56.278 -06:00 [DBG] Start authorize request
2018-07-19 16:34:56.278 -06:00 [DBG] User in authorize request: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:34:56.278 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:34:56.278 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:34:56.278 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:34:56.278 -06:00 [DBG] No PKCE used.
2018-07-19 16:34:56.278 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:34:56.278 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeExrRoLOCckCK4aWQr5C1yaPrFQgD3gx03RCrONFxbiXPKBRV4Jy5a5jC-D-9uxtB8oRgTs-rLGEEhRCSG4aqqkD88Jb2416QjaZAO_i8J61yVqhxG2cTOtUfVuTmsBy-Xxv_vT9X7hJkVDCGRzdA3TzkmzbEY6bF6Z9jNDE2QhAk0NpwzuA8k13Z-nX_IPIBAXHEM8_fZZCEE09jJMjaS8n55IGJEV1o9dMtUBFvRiEtAGAhSnjY4tFG5otF3U5Es9-eusxFWsaERmjIz1IkR_8Z36mYo2sv17ULksvOQ8LedndBhFY9Upay4SFfxK0g",
  "Nonce": "636676364962738700.MzI5NjZlNzMtYTU4ZC00ZmYxLWE4M2QtNzRjMGY4ZmRlOGUyNGRjZGIzYjgtMjk4Yi00ODk2LWIzYjEtNDg4YzgyODRmOWU1",
  "SessionId": "8490eee2bf9e82861deb41977516a6ab",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676364962738700.MzI5NjZlNzMtYTU4ZC00ZmYxLWE4M2QtNzRjMGY4ZmRlOGUyNGRjZGIzYjgtMjk4Yi00ODk2LWIzYjEtNDg4YzgyODRmOWU1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeExrRoLOCckCK4aWQr5C1yaPrFQgD3gx03RCrONFxbiXPKBRV4Jy5a5jC-D-9uxtB8oRgTs-rLGEEhRCSG4aqqkD88Jb2416QjaZAO_i8J61yVqhxG2cTOtUfVuTmsBy-Xxv_vT9X7hJkVDCGRzdA3TzkmzbEY6bF6Z9jNDE2QhAk0NpwzuA8k13Z-nX_IPIBAXHEM8_fZZCEE09jJMjaS8n55IGJEV1o9dMtUBFvRiEtAGAhSnjY4tFG5otF3U5Es9-eusxFWsaERmjIz1IkR_8Z36mYo2sv17ULksvOQ8LedndBhFY9Upay4SFfxK0g",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:34:56.279 -06:00 [DBG] user_consent grant with value: ideaBox|bb596370-55ff-4429-8d36-390ddca7cf63 not found in store.
2018-07-19 16:34:56.280 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 16:34:56.280 -06:00 [INF] Showing consent: User has not yet consented
2018-07-19 16:34:56.282 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:34:56.282 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:34:56.282 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:34:56.282 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:34:56.282 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:34:56.282 -06:00 [DBG] No PKCE used.
2018-07-19 16:34:56.282 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:34:56.282 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:35:13.205 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 16:35:13.205 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:35:13.205 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:35:13.205 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:35:13.206 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:35:13.206 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:35:13.206 -06:00 [DBG] No PKCE used.
2018-07-19 16:35:13.206 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:35:13.209 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:35:13.209 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:35:13.209 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 16:35:13.210 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 16:35:13.210 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 16:35:13.210 -06:00 [DBG] Start authorize callback request
2018-07-19 16:35:13.210 -06:00 [DBG] User in authorize request: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:35:13.210 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:35:13.210 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:35:13.210 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:35:13.210 -06:00 [DBG] No PKCE used.
2018-07-19 16:35:13.210 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:35:13.210 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeExrRoLOCckCK4aWQr5C1yaPrFQgD3gx03RCrONFxbiXPKBRV4Jy5a5jC-D-9uxtB8oRgTs-rLGEEhRCSG4aqqkD88Jb2416QjaZAO_i8J61yVqhxG2cTOtUfVuTmsBy-Xxv_vT9X7hJkVDCGRzdA3TzkmzbEY6bF6Z9jNDE2QhAk0NpwzuA8k13Z-nX_IPIBAXHEM8_fZZCEE09jJMjaS8n55IGJEV1o9dMtUBFvRiEtAGAhSnjY4tFG5otF3U5Es9-eusxFWsaERmjIz1IkR_8Z36mYo2sv17ULksvOQ8LedndBhFY9Upay4SFfxK0g",
  "Nonce": "636676364962738700.MzI5NjZlNzMtYTU4ZC00ZmYxLWE4M2QtNzRjMGY4ZmRlOGUyNGRjZGIzYjgtMjk4Yi00ODk2LWIzYjEtNDg4YzgyODRmOWU1",
  "SessionId": "8490eee2bf9e82861deb41977516a6ab",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676364962738700.MzI5NjZlNzMtYTU4ZC00ZmYxLWE4M2QtNzRjMGY4ZmRlOGUyNGRjZGIzYjgtMjk4Yi00ODk2LWIzYjEtNDg4YzgyODRmOWU1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeExrRoLOCckCK4aWQr5C1yaPrFQgD3gx03RCrONFxbiXPKBRV4Jy5a5jC-D-9uxtB8oRgTs-rLGEEhRCSG4aqqkD88Jb2416QjaZAO_i8J61yVqhxG2cTOtUfVuTmsBy-Xxv_vT9X7hJkVDCGRzdA3TzkmzbEY6bF6Z9jNDE2QhAk0NpwzuA8k13Z-nX_IPIBAXHEM8_fZZCEE09jJMjaS8n55IGJEV1o9dMtUBFvRiEtAGAhSnjY4tFG5otF3U5Es9-eusxFWsaERmjIz1IkR_8Z36mYo2sv17ULksvOQ8LedndBhFY9Upay4SFfxK0g",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:35:13.211 -06:00 [DBG] user_consent grant with value: ideaBox|bb596370-55ff-4429-8d36-390ddca7cf63 not found in store.
2018-07-19 16:35:13.212 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 16:35:13.212 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-19 16:35:13.212 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:35:13.212 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-19 16:35:13.216 -06:00 [DBG] Creating Implicit Flow response.
2018-07-19 16:35:13.216 -06:00 [DBG] Getting claims for identity token for subject: bb596370-55ff-4429-8d36-390ddca7cf63 and client: ideaBox
2018-07-19 16:35:13.216 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 16:35:13.228 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****m0og"
    },
    {
      "TokenType": "code",
      "TokenValue": "****2afc"
    }
  ],
  "ActivityId": "0HLFDOU6VLCBT:00000018",
  "TimeStamp": "2018-07-19T22:35:13Z",
  "ProcessId": 3386,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:35:13.228 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeExrRoLOCckCK4aWQr5C1yaPrFQgD3gx03RCrONFxbiXPKBRV4Jy5a5jC-D-9uxtB8oRgTs-rLGEEhRCSG4aqqkD88Jb2416QjaZAO_i8J61yVqhxG2cTOtUfVuTmsBy-Xxv_vT9X7hJkVDCGRzdA3TzkmzbEY6bF6Z9jNDE2QhAk0NpwzuA8k13Z-nX_IPIBAXHEM8_fZZCEE09jJMjaS8n55IGJEV1o9dMtUBFvRiEtAGAhSnjY4tFG5otF3U5Es9-eusxFWsaERmjIz1IkR_8Z36mYo2sv17ULksvOQ8LedndBhFY9Upay4SFfxK0g",
  "Scope": "openid profile business email"
}
2018-07-19 16:35:13.284 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-19 16:35:13.284 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-19 16:35:13.284 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-19 16:35:13.284 -06:00 [DBG] Start token request.
2018-07-19 16:35:13.284 -06:00 [DBG] Start client validation
2018-07-19 16:35:13.284 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-19 16:35:13.284 -06:00 [DBG] Start parsing for secret in post body
2018-07-19 16:35:13.284 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-19 16:35:13.284 -06:00 [DBG] Secret id found: ideaBox
2018-07-19 16:35:13.284 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:35:13.284 -06:00 [DBG] No matching hashed secret found.
2018-07-19 16:35:13.284 -06:00 [DBG] Secret validators could not validate secret
2018-07-19 16:35:13.285 -06:00 [INF] {
  "Name": "Client Authentication Failure",
  "Category": "Authentication",
  "EventType": "Failure",
  "Id": 1011,
  "ClientId": "ideaBox",
  "Message": "Invalid client secret",
  "ActivityId": "0HLFDOU6VLCBP:00000006",
  "TimeStamp": "2018-07-19T22:35:13Z",
  "ProcessId": 3386,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:35:13.285 -06:00 [ERR] Client secret validation failed for client: ideaBox.
2018-07-19 16:36:54.810 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 16:36:54.841 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 16:36:54.843 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 16:36:54.844 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 16:36:54.844 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 16:36:54.844 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 16:36:58.915 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:36:58.930 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:07.669 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:07.669 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:07.673 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-19 16:37:07.676 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-19 16:37:07.676 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-19 16:37:07.679 -06:00 [DBG] Start authorize request
2018-07-19 16:37:07.696 -06:00 [DBG] User in authorize request: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:37:07.700 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:37:07.711 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:37:07.715 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:37:07.715 -06:00 [DBG] No PKCE used.
2018-07-19 16:37:07.745 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:37:07.800 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcJi0JjcqgVDtkGIpMDgwsTGKuWAPzvDbjc-g2n7GUJlUmrmwKtaDMJGKrWhnmbRrOJri-4g8zDp5q71KNFG8bsxlO7h-LSXDPH0sFnL00KTVPMAgGm-7gaesv12-VNMcPKs9PtOazM9cNDYbpNB8uEiGim4HJbmNahmZOD0g8gW9gRmnYHQgxKvENIaW3JxXbgGJwI5i8aiWw6PvIobqSbkPIejjbrKMCU8iwJi5ZWawiqlJuUlP7WVaG5y1TSPdWDExPVQPDOefDup9ggSOTyWEn5ryPodVkguBIC7zdB_hVxmdzbNoV5TSD9xbkP4E0",
  "Nonce": "636676366276648740.ZTc5NzNjNDUtMGM5Mi00NjgxLWEwMjctMDI5MmFkZTBmNjRjODE3MDJjNWItMDBmMi00OGYyLTlkNDMtZjkyNGVmZDY4OGUy",
  "SessionId": "8490eee2bf9e82861deb41977516a6ab",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676366276648740.ZTc5NzNjNDUtMGM5Mi00NjgxLWEwMjctMDI5MmFkZTBmNjRjODE3MDJjNWItMDBmMi00OGYyLTlkNDMtZjkyNGVmZDY4OGUy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcJi0JjcqgVDtkGIpMDgwsTGKuWAPzvDbjc-g2n7GUJlUmrmwKtaDMJGKrWhnmbRrOJri-4g8zDp5q71KNFG8bsxlO7h-LSXDPH0sFnL00KTVPMAgGm-7gaesv12-VNMcPKs9PtOazM9cNDYbpNB8uEiGim4HJbmNahmZOD0g8gW9gRmnYHQgxKvENIaW3JxXbgGJwI5i8aiWw6PvIobqSbkPIejjbrKMCU8iwJi5ZWawiqlJuUlP7WVaG5y1TSPdWDExPVQPDOefDup9ggSOTyWEn5ryPodVkguBIC7zdB_hVxmdzbNoV5TSD9xbkP4E0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:37:08.682 -06:00 [DBG] user_consent grant with value: ideaBox|bb596370-55ff-4429-8d36-390ddca7cf63 not found in store.
2018-07-19 16:37:08.682 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 16:37:08.682 -06:00 [INF] Showing consent: User has not yet consented
2018-07-19 16:37:08.694 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:08.694 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:08.806 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:37:08.807 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:37:08.807 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:37:08.807 -06:00 [DBG] No PKCE used.
2018-07-19 16:37:08.807 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:37:08.808 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:37:23.532 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-19 16:37:23.533 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-19 16:37:23.533 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-19 16:37:23.533 -06:00 [DBG] Start authorize request
2018-07-19 16:37:23.533 -06:00 [DBG] No user present in authorize request
2018-07-19 16:37:23.533 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:37:23.534 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:37:23.534 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:37:23.534 -06:00 [DBG] No PKCE used.
2018-07-19 16:37:23.534 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:37:23.534 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfoTUWzpQTBVO2c053dxo__Ql3zx6YgcejnXMlBYvzwTuGEWQdIkLJb_A8C3mv-jBH6BHdZUYS-GlZC19vb5bJToV0hGpjTrLNwtrqfnTYkPBbo3cq_ry6ZEJ_-q2AJldoPU6GF0K_poUig9aQURVUhkmUmaAtoFGCiwPCJS_qSRfhVF_993kifdXYDpq1EAUXM7fEBspRQojpJeivo_g4pvUP5JWJHL8KC4Y7SOi3wAzXQYkcgp2Bjn73K-HdzgEwfo9nz38nNesPeWvJY4lEtPrlgCM8C7i6sD4G4-3bkQedZNBI9JbFq-8bL8_d2jOc",
  "Nonce": "636676366435278980.YTkxMDJkYTYtNmFjNi00Njc1LThkMDEtOTdiMTljNDU1MWMwOGM1MjI1MGYtNDZhMC00YWUyLTkzMzctYmExMTNiYzlmODAz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676366435278980.YTkxMDJkYTYtNmFjNi00Njc1LThkMDEtOTdiMTljNDU1MWMwOGM1MjI1MGYtNDZhMC00YWUyLTkzMzctYmExMTNiYzlmODAz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfoTUWzpQTBVO2c053dxo__Ql3zx6YgcejnXMlBYvzwTuGEWQdIkLJb_A8C3mv-jBH6BHdZUYS-GlZC19vb5bJToV0hGpjTrLNwtrqfnTYkPBbo3cq_ry6ZEJ_-q2AJldoPU6GF0K_poUig9aQURVUhkmUmaAtoFGCiwPCJS_qSRfhVF_993kifdXYDpq1EAUXM7fEBspRQojpJeivo_g4pvUP5JWJHL8KC4Y7SOi3wAzXQYkcgp2Bjn73K-HdzgEwfo9nz38nNesPeWvJY4lEtPrlgCM8C7i6sD4G4-3bkQedZNBI9JbFq-8bL8_d2jOc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:37:23.534 -06:00 [INF] Showing login: User is not authenticated
2018-07-19 16:37:23.547 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:37:23.547 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:37:23.547 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:37:23.547 -06:00 [DBG] No PKCE used.
2018-07-19 16:37:23.547 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:37:23.549 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:37:32.501 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 16:37:32.822 -06:00 [DBG] Augmenting SignInContext
2018-07-19 16:37:32.823 -06:00 [DBG] Adding idp claim with value: local
2018-07-19 16:37:32.823 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-19 16:37:32.823 -06:00 [DBG] Adding auth_time claim with value: 1532039852
2018-07-19 16:37:32.848 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 16:37:32.876 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFDP0HMDAVB:00000007",
  "TimeStamp": "2018-07-19T22:37:32Z",
  "ProcessId": 3486,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:37:32.885 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:32.885 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:32.885 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 16:37:32.885 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 16:37:32.885 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 16:37:32.890 -06:00 [DBG] Start authorize callback request
2018-07-19 16:37:32.893 -06:00 [DBG] User in authorize request: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:37:32.894 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:37:32.894 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:37:32.894 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:37:32.894 -06:00 [DBG] No PKCE used.
2018-07-19 16:37:32.894 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:37:32.894 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfoTUWzpQTBVO2c053dxo__Ql3zx6YgcejnXMlBYvzwTuGEWQdIkLJb_A8C3mv-jBH6BHdZUYS-GlZC19vb5bJToV0hGpjTrLNwtrqfnTYkPBbo3cq_ry6ZEJ_-q2AJldoPU6GF0K_poUig9aQURVUhkmUmaAtoFGCiwPCJS_qSRfhVF_993kifdXYDpq1EAUXM7fEBspRQojpJeivo_g4pvUP5JWJHL8KC4Y7SOi3wAzXQYkcgp2Bjn73K-HdzgEwfo9nz38nNesPeWvJY4lEtPrlgCM8C7i6sD4G4-3bkQedZNBI9JbFq-8bL8_d2jOc",
  "Nonce": "636676366435278980.YTkxMDJkYTYtNmFjNi00Njc1LThkMDEtOTdiMTljNDU1MWMwOGM1MjI1MGYtNDZhMC00YWUyLTkzMzctYmExMTNiYzlmODAz",
  "SessionId": "44bee8bc59761a80ecf20af93eaf66a5",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676366435278980.YTkxMDJkYTYtNmFjNi00Njc1LThkMDEtOTdiMTljNDU1MWMwOGM1MjI1MGYtNDZhMC00YWUyLTkzMzctYmExMTNiYzlmODAz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfoTUWzpQTBVO2c053dxo__Ql3zx6YgcejnXMlBYvzwTuGEWQdIkLJb_A8C3mv-jBH6BHdZUYS-GlZC19vb5bJToV0hGpjTrLNwtrqfnTYkPBbo3cq_ry6ZEJ_-q2AJldoPU6GF0K_poUig9aQURVUhkmUmaAtoFGCiwPCJS_qSRfhVF_993kifdXYDpq1EAUXM7fEBspRQojpJeivo_g4pvUP5JWJHL8KC4Y7SOi3wAzXQYkcgp2Bjn73K-HdzgEwfo9nz38nNesPeWvJY4lEtPrlgCM8C7i6sD4G4-3bkQedZNBI9JbFq-8bL8_d2jOc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:37:32.896 -06:00 [DBG] user_consent grant with value: ideaBox|bb596370-55ff-4429-8d36-390ddca7cf63 not found in store.
2018-07-19 16:37:32.896 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 16:37:32.896 -06:00 [INF] Showing consent: User has not yet consented
2018-07-19 16:37:32.898 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:32.898 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:32.899 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:37:32.900 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:37:32.900 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:37:32.900 -06:00 [DBG] No PKCE used.
2018-07-19 16:37:32.900 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:37:32.900 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:37:36.330 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 16:37:36.330 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:36.330 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:36.349 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:37:36.349 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:37:36.350 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:37:36.350 -06:00 [DBG] No PKCE used.
2018-07-19 16:37:36.350 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:37:36.367 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:36.367 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:36.367 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 16:37:36.367 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 16:37:36.367 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 16:37:36.368 -06:00 [DBG] Start authorize callback request
2018-07-19 16:37:36.399 -06:00 [DBG] User in authorize request: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:37:36.399 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:37:36.399 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:37:36.399 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:37:36.399 -06:00 [DBG] No PKCE used.
2018-07-19 16:37:36.399 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:37:36.399 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfoTUWzpQTBVO2c053dxo__Ql3zx6YgcejnXMlBYvzwTuGEWQdIkLJb_A8C3mv-jBH6BHdZUYS-GlZC19vb5bJToV0hGpjTrLNwtrqfnTYkPBbo3cq_ry6ZEJ_-q2AJldoPU6GF0K_poUig9aQURVUhkmUmaAtoFGCiwPCJS_qSRfhVF_993kifdXYDpq1EAUXM7fEBspRQojpJeivo_g4pvUP5JWJHL8KC4Y7SOi3wAzXQYkcgp2Bjn73K-HdzgEwfo9nz38nNesPeWvJY4lEtPrlgCM8C7i6sD4G4-3bkQedZNBI9JbFq-8bL8_d2jOc",
  "Nonce": "636676366435278980.YTkxMDJkYTYtNmFjNi00Njc1LThkMDEtOTdiMTljNDU1MWMwOGM1MjI1MGYtNDZhMC00YWUyLTkzMzctYmExMTNiYzlmODAz",
  "SessionId": "44bee8bc59761a80ecf20af93eaf66a5",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676366435278980.YTkxMDJkYTYtNmFjNi00Njc1LThkMDEtOTdiMTljNDU1MWMwOGM1MjI1MGYtNDZhMC00YWUyLTkzMzctYmExMTNiYzlmODAz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfoTUWzpQTBVO2c053dxo__Ql3zx6YgcejnXMlBYvzwTuGEWQdIkLJb_A8C3mv-jBH6BHdZUYS-GlZC19vb5bJToV0hGpjTrLNwtrqfnTYkPBbo3cq_ry6ZEJ_-q2AJldoPU6GF0K_poUig9aQURVUhkmUmaAtoFGCiwPCJS_qSRfhVF_993kifdXYDpq1EAUXM7fEBspRQojpJeivo_g4pvUP5JWJHL8KC4Y7SOi3wAzXQYkcgp2Bjn73K-HdzgEwfo9nz38nNesPeWvJY4lEtPrlgCM8C7i6sD4G4-3bkQedZNBI9JbFq-8bL8_d2jOc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:37:36.401 -06:00 [DBG] user_consent grant with value: ideaBox|bb596370-55ff-4429-8d36-390ddca7cf63 not found in store.
2018-07-19 16:37:36.401 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 16:37:36.409 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-19 16:37:36.421 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:37:36.428 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-19 16:37:36.448 -06:00 [DBG] Creating Implicit Flow response.
2018-07-19 16:37:36.457 -06:00 [DBG] Getting claims for identity token for subject: bb596370-55ff-4429-8d36-390ddca7cf63 and client: ideaBox
2018-07-19 16:37:36.459 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 16:37:36.528 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****7m8A"
    },
    {
      "TokenType": "code",
      "TokenValue": "****80f9"
    }
  ],
  "ActivityId": "0HLFDP0HMDAVB:0000000B",
  "TimeStamp": "2018-07-19T22:37:36Z",
  "ProcessId": 3486,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:37:36.530 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfoTUWzpQTBVO2c053dxo__Ql3zx6YgcejnXMlBYvzwTuGEWQdIkLJb_A8C3mv-jBH6BHdZUYS-GlZC19vb5bJToV0hGpjTrLNwtrqfnTYkPBbo3cq_ry6ZEJ_-q2AJldoPU6GF0K_poUig9aQURVUhkmUmaAtoFGCiwPCJS_qSRfhVF_993kifdXYDpq1EAUXM7fEBspRQojpJeivo_g4pvUP5JWJHL8KC4Y7SOi3wAzXQYkcgp2Bjn73K-HdzgEwfo9nz38nNesPeWvJY4lEtPrlgCM8C7i6sD4G4-3bkQedZNBI9JbFq-8bL8_d2jOc",
  "Scope": "openid profile business email"
}
2018-07-19 16:37:36.544 -06:00 [DBG] Augmenting SignInContext
2018-07-19 16:37:36.545 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 16:37:36.636 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-19 16:37:36.639 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-19 16:37:36.639 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-19 16:37:36.645 -06:00 [DBG] Start token request.
2018-07-19 16:37:36.650 -06:00 [DBG] Start client validation
2018-07-19 16:37:36.654 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-19 16:37:36.657 -06:00 [DBG] Start parsing for secret in post body
2018-07-19 16:37:36.658 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-19 16:37:36.658 -06:00 [DBG] Secret id found: ideaBox
2018-07-19 16:37:36.658 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:37:36.665 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-19 16:37:36.665 -06:00 [DBG] Client validation success
2018-07-19 16:37:36.668 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFDP0HMDAVC:00000001",
  "TimeStamp": "2018-07-19T22:37:36Z",
  "ProcessId": 3486,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:37:36.672 -06:00 [DBG] Start token request validation
2018-07-19 16:37:36.680 -06:00 [DBG] Start validation of authorization code token request
2018-07-19 16:37:36.697 -06:00 [DBG] Validation of authorization code token request success
2018-07-19 16:37:36.700 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "a43ddc0871eed1754006e398ae74a8c90104c6d32899a10a662b65c88fec80f9",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "a43ddc0871eed1754006e398ae74a8c90104c6d32899a10a662b65c88fec80f9",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-19 16:37:36.710 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:37:36.720 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-19 16:37:36.720 -06:00 [DBG] Getting claims for access token for subject: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:37:36.738 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:37:36.738 -06:00 [DBG] Getting claims for identity token for subject: bb596370-55ff-4429-8d36-390ddca7cf63 and client: ideaBox
2018-07-19 16:37:36.738 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 16:37:36.751 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****eG-w"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Yl6Q"
    }
  ],
  "ActivityId": "0HLFDP0HMDAVC:00000001",
  "TimeStamp": "2018-07-19T22:37:36Z",
  "ProcessId": 3486,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:37:36.752 -06:00 [DBG] Token request success.
2018-07-19 16:37:36.764 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-19 16:37:36.765 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-19 16:37:36.765 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-19 16:37:36.769 -06:00 [DBG] Start userinfo request
2018-07-19 16:37:36.772 -06:00 [DBG] Bearer token found in header
2018-07-19 16:37:36.836 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:37:36.839 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-19 16:37:36.840 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-19 16:37:36.843 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532039856,
    "exp": 1532043456,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "bb596370-55ff-4429-8d36-390ddca7cf63",
    "auth_time": 1532039852,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-19 16:37:36.848 -06:00 [DBG] Creating userinfo response
2018-07-19 16:37:36.851 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 16:37:36.853 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 16:37:36.855 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-19 16:37:36.855 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-19 16:37:36.860 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-19 16:37:36.860 -06:00 [DBG] End userinfo request
2018-07-19 16:37:45.446 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:45.446 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:45.446 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-19 16:37:45.446 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-19 16:37:45.446 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-19 16:37:45.446 -06:00 [DBG] Start authorize request
2018-07-19 16:37:45.446 -06:00 [DBG] User in authorize request: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:37:45.446 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:37:45.446 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:37:45.446 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:37:45.446 -06:00 [DBG] No PKCE used.
2018-07-19 16:37:45.446 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:37:45.446 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfujRSVHaFCHc7i7V4eSBIX_Y3DvOJ8oTcz3wBrjAL1S-0654lDTx-O8kcr58xoAmfzTf1F_VCuAwMB_SSTmT_AUgxKCE6tOQh3zYv_m5DsCoFbZ8U2x5Em3EuR5UckIxifuT0oiCHU3U8B-gyXW5pF81LtGahr6_oo5CD4FhrOibFMn6VwWVhgHzRlK_ox4vVKemWxiQrHH6pTZdn2gcgc0nul_sYcCHlGlQNOIY2w_xrOvni7rTo-q7B2SnIFIfC9IRxqhBmFKLRM3w1mM0fvnFqy0zPsqYYtamNj9q1M8v4gr1Fw45l4SNznNqZnaxE",
  "Nonce": "636676366654434870.MTZhMzBkNDYtNjIzYi00YjMwLTg5YTgtMmI5NDY0M2FlOGIxYjE4OTM2Y2YtMzA0Yy00OTI3LThmYTAtZmNkYjdmYWQ1Yjhk",
  "SessionId": "44bee8bc59761a80ecf20af93eaf66a5",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location",
    "response_mode": "form_post",
    "nonce": "636676366654434870.MTZhMzBkNDYtNjIzYi00YjMwLTg5YTgtMmI5NDY0M2FlOGIxYjE4OTM2Y2YtMzA0Yy00OTI3LThmYTAtZmNkYjdmYWQ1Yjhk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfujRSVHaFCHc7i7V4eSBIX_Y3DvOJ8oTcz3wBrjAL1S-0654lDTx-O8kcr58xoAmfzTf1F_VCuAwMB_SSTmT_AUgxKCE6tOQh3zYv_m5DsCoFbZ8U2x5Em3EuR5UckIxifuT0oiCHU3U8B-gyXW5pF81LtGahr6_oo5CD4FhrOibFMn6VwWVhgHzRlK_ox4vVKemWxiQrHH6pTZdn2gcgc0nul_sYcCHlGlQNOIY2w_xrOvni7rTo-q7B2SnIFIfC9IRxqhBmFKLRM3w1mM0fvnFqy0zPsqYYtamNj9q1M8v4gr1Fw45l4SNznNqZnaxE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:37:45.448 -06:00 [DBG] user_consent grant with value: toDoBox|bb596370-55ff-4429-8d36-390ddca7cf63 not found in store.
2018-07-19 16:37:45.448 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 16:37:45.448 -06:00 [INF] Showing consent: User has not yet consented
2018-07-19 16:37:45.450 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:45.450 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:45.450 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:37:45.450 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:37:45.450 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:37:45.450 -06:00 [DBG] No PKCE used.
2018-07-19 16:37:45.450 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:37:45.450 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:37:53.002 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 16:37:53.003 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:53.003 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:53.003 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:37:53.003 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:37:53.003 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:37:53.003 -06:00 [DBG] No PKCE used.
2018-07-19 16:37:53.003 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:37:53.006 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:53.006 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:37:53.006 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 16:37:53.006 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 16:37:53.006 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 16:37:53.006 -06:00 [DBG] Start authorize callback request
2018-07-19 16:37:53.006 -06:00 [DBG] User in authorize request: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:37:53.006 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:37:53.006 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:37:53.006 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:37:53.006 -06:00 [DBG] No PKCE used.
2018-07-19 16:37:53.007 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:37:53.007 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfujRSVHaFCHc7i7V4eSBIX_Y3DvOJ8oTcz3wBrjAL1S-0654lDTx-O8kcr58xoAmfzTf1F_VCuAwMB_SSTmT_AUgxKCE6tOQh3zYv_m5DsCoFbZ8U2x5Em3EuR5UckIxifuT0oiCHU3U8B-gyXW5pF81LtGahr6_oo5CD4FhrOibFMn6VwWVhgHzRlK_ox4vVKemWxiQrHH6pTZdn2gcgc0nul_sYcCHlGlQNOIY2w_xrOvni7rTo-q7B2SnIFIfC9IRxqhBmFKLRM3w1mM0fvnFqy0zPsqYYtamNj9q1M8v4gr1Fw45l4SNznNqZnaxE",
  "Nonce": "636676366654434870.MTZhMzBkNDYtNjIzYi00YjMwLTg5YTgtMmI5NDY0M2FlOGIxYjE4OTM2Y2YtMzA0Yy00OTI3LThmYTAtZmNkYjdmYWQ1Yjhk",
  "SessionId": "44bee8bc59761a80ecf20af93eaf66a5",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location",
    "response_mode": "form_post",
    "nonce": "636676366654434870.MTZhMzBkNDYtNjIzYi00YjMwLTg5YTgtMmI5NDY0M2FlOGIxYjE4OTM2Y2YtMzA0Yy00OTI3LThmYTAtZmNkYjdmYWQ1Yjhk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfujRSVHaFCHc7i7V4eSBIX_Y3DvOJ8oTcz3wBrjAL1S-0654lDTx-O8kcr58xoAmfzTf1F_VCuAwMB_SSTmT_AUgxKCE6tOQh3zYv_m5DsCoFbZ8U2x5Em3EuR5UckIxifuT0oiCHU3U8B-gyXW5pF81LtGahr6_oo5CD4FhrOibFMn6VwWVhgHzRlK_ox4vVKemWxiQrHH6pTZdn2gcgc0nul_sYcCHlGlQNOIY2w_xrOvni7rTo-q7B2SnIFIfC9IRxqhBmFKLRM3w1mM0fvnFqy0zPsqYYtamNj9q1M8v4gr1Fw45l4SNznNqZnaxE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:37:53.008 -06:00 [DBG] user_consent grant with value: toDoBox|bb596370-55ff-4429-8d36-390ddca7cf63 not found in store.
2018-07-19 16:37:53.008 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 16:37:53.008 -06:00 [INF] User consented to scopes: ["openid","profile","location","email"]
2018-07-19 16:37:53.008 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:37:53.008 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-19 16:37:53.012 -06:00 [DBG] Creating Implicit Flow response.
2018-07-19 16:37:53.012 -06:00 [DBG] Getting claims for identity token for subject: bb596370-55ff-4429-8d36-390ddca7cf63 and client: toDoBox
2018-07-19 16:37:53.012 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 16:37:53.024 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "Scopes": "openid profile email location",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****mOgg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****3ab4"
    }
  ],
  "ActivityId": "0HLFDP0HMDAVB:0000000F",
  "TimeStamp": "2018-07-19T22:37:53Z",
  "ProcessId": 3486,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:37:53.024 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ClientId": "toDoBox",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfujRSVHaFCHc7i7V4eSBIX_Y3DvOJ8oTcz3wBrjAL1S-0654lDTx-O8kcr58xoAmfzTf1F_VCuAwMB_SSTmT_AUgxKCE6tOQh3zYv_m5DsCoFbZ8U2x5Em3EuR5UckIxifuT0oiCHU3U8B-gyXW5pF81LtGahr6_oo5CD4FhrOibFMn6VwWVhgHzRlK_ox4vVKemWxiQrHH6pTZdn2gcgc0nul_sYcCHlGlQNOIY2w_xrOvni7rTo-q7B2SnIFIfC9IRxqhBmFKLRM3w1mM0fvnFqy0zPsqYYtamNj9q1M8v4gr1Fw45l4SNznNqZnaxE",
  "Scope": "openid profile email location"
}
2018-07-19 16:37:53.025 -06:00 [DBG] Augmenting SignInContext
2018-07-19 16:37:53.025 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 16:37:53.117 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-19 16:37:53.118 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-19 16:37:53.118 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-19 16:37:53.118 -06:00 [DBG] Start token request.
2018-07-19 16:37:53.118 -06:00 [DBG] Start client validation
2018-07-19 16:37:53.118 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-19 16:37:53.118 -06:00 [DBG] Start parsing for secret in post body
2018-07-19 16:37:53.118 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-19 16:37:53.118 -06:00 [DBG] Secret id found: toDoBox
2018-07-19 16:37:53.118 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:37:53.118 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-19 16:37:53.118 -06:00 [DBG] Client validation success
2018-07-19 16:37:53.118 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "toDoBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFDP0HMDAVD:00000001",
  "TimeStamp": "2018-07-19T22:37:53Z",
  "ProcessId": 3486,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:37:53.118 -06:00 [DBG] Start token request validation
2018-07-19 16:37:53.118 -06:00 [DBG] Start validation of authorization code token request
2018-07-19 16:37:53.127 -06:00 [DBG] Validation of authorization code token request success
2018-07-19 16:37:53.128 -06:00 [INF] Token request validation success
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "1bf4225998dc0b25aa2393bc1355a809467a66ab4193e1602dfef025b7943ab4",
  "Raw": {
    "client_id": "toDoBox",
    "client_secret": "***REDACTED***",
    "code": "1bf4225998dc0b25aa2393bc1355a809467a66ab4193e1602dfef025b7943ab4",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5003/signin-oidc"
  }
}
2018-07-19 16:37:53.128 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:37:53.128 -06:00 [DBG] Getting claims for access token for client: toDoBox
2018-07-19 16:37:53.128 -06:00 [DBG] Getting claims for access token for subject: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:37:53.141 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:37:53.141 -06:00 [DBG] Getting claims for identity token for subject: bb596370-55ff-4429-8d36-390ddca7cf63 and client: toDoBox
2018-07-19 16:37:53.141 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 16:37:53.153 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile email location",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****zejg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****zH2g"
    }
  ],
  "ActivityId": "0HLFDP0HMDAVD:00000001",
  "TimeStamp": "2018-07-19T22:37:53Z",
  "ProcessId": 3486,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:37:53.153 -06:00 [DBG] Token request success.
2018-07-19 16:37:53.161 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-19 16:37:53.162 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-19 16:37:53.162 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-19 16:37:53.162 -06:00 [DBG] Start userinfo request
2018-07-19 16:37:53.162 -06:00 [DBG] Bearer token found in header
2018-07-19 16:37:53.164 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:37:53.165 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:37:53.167 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-19 16:37:53.167 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532039873,
    "exp": 1532043473,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "toDoBox",
    "sub": "bb596370-55ff-4429-8d36-390ddca7cf63",
    "auth_time": 1532039852,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "location",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-19 16:37:53.167 -06:00 [DBG] Creating userinfo response
2018-07-19 16:37:53.167 -06:00 [DBG] Scopes in access token: openid profile location email
2018-07-19 16:37:53.167 -06:00 [DBG] Scopes in access token: openid profile location email
2018-07-19 16:37:53.168 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at curr_location email email_verified
2018-07-19 16:37:53.168 -06:00 [DBG] Scopes in access token: openid profile location email
2018-07-19 16:37:53.169 -06:00 [INF] Profile service returned to the following claim types: sub name given_name family_name email email_verified website preferred_username
2018-07-19 16:37:53.169 -06:00 [DBG] End userinfo request
2018-07-19 16:40:26.625 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-19 16:40:26.626 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-19 16:40:26.626 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-19 16:40:26.629 -06:00 [DBG] Start discovery request
2018-07-19 16:40:26.709 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-19 16:40:26.710 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-19 16:40:26.710 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-19 16:40:26.713 -06:00 [DBG] Start key discovery request
2018-07-19 16:40:26.743 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-19 16:40:26.743 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-19 16:40:26.743 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-19 16:40:26.743 -06:00 [DBG] Start authorize request
2018-07-19 16:40:26.743 -06:00 [DBG] No user present in authorize request
2018-07-19 16:40:26.743 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:40:26.743 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:40:26.743 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:40:26.743 -06:00 [DBG] No PKCE used.
2018-07-19 16:40:26.743 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:40:26.743 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdYhsqDdbbOOP8m2g8skDsciaRhW2JPL8uVmcKELqsR2rtixzkJktDm2XymOPCbjVvTI684mHTFNv6V-uTR7-eo0VImeLCOYfe0MFaJcNtA6ooRGUtNGBxiLcfrwLqNgFan7OPu6GXku9WRZdKjnOB19cd_rNSrZFC8iBHs8LC3rM9L814-oVedRuETGb_NAIMzbJkxjCfZeIkJDTO4gp_xhX9vmeVtaH6SPZUxxEalCzzRQy3-91_zrRZ3l_HdxVTdHyaTfd398S06RF9WGC4IUsvdEhqWR2g4Rn1mmjnTGKtNp-t7N7P6qmX1-IOrb7c",
  "Nonce": "636676368267332270.ZDFiZTI3YTEtMzZmOS00MDQ2LWJkODgtMmMyZDNmMDkwZGMyOGM0NGQ2MjAtNjg2My00YzA3LWEzNmYtNTU1YjVjZWM0YWQ0",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location",
    "response_mode": "form_post",
    "nonce": "636676368267332270.ZDFiZTI3YTEtMzZmOS00MDQ2LWJkODgtMmMyZDNmMDkwZGMyOGM0NGQ2MjAtNjg2My00YzA3LWEzNmYtNTU1YjVjZWM0YWQ0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdYhsqDdbbOOP8m2g8skDsciaRhW2JPL8uVmcKELqsR2rtixzkJktDm2XymOPCbjVvTI684mHTFNv6V-uTR7-eo0VImeLCOYfe0MFaJcNtA6ooRGUtNGBxiLcfrwLqNgFan7OPu6GXku9WRZdKjnOB19cd_rNSrZFC8iBHs8LC3rM9L814-oVedRuETGb_NAIMzbJkxjCfZeIkJDTO4gp_xhX9vmeVtaH6SPZUxxEalCzzRQy3-91_zrRZ3l_HdxVTdHyaTfd398S06RF9WGC4IUsvdEhqWR2g4Rn1mmjnTGKtNp-t7N7P6qmX1-IOrb7c",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:40:26.743 -06:00 [INF] Showing login: User is not authenticated
2018-07-19 16:40:26.745 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:40:26.745 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:40:26.745 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:40:26.745 -06:00 [DBG] No PKCE used.
2018-07-19 16:40:26.746 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:40:26.746 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:40:33.882 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 16:40:33.896 -06:00 [DBG] Augmenting SignInContext
2018-07-19 16:40:33.896 -06:00 [DBG] Adding idp claim with value: local
2018-07-19 16:40:33.896 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-19 16:40:33.896 -06:00 [DBG] Adding auth_time claim with value: 1532040033
2018-07-19 16:40:33.896 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 16:40:33.897 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFDP0HMDAVF:00000003",
  "TimeStamp": "2018-07-19T22:40:33Z",
  "ProcessId": 3486,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:40:33.899 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:40:33.899 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:40:33.899 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 16:40:33.899 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 16:40:33.899 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 16:40:33.899 -06:00 [DBG] Start authorize callback request
2018-07-19 16:40:33.900 -06:00 [DBG] User in authorize request: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:40:33.900 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:40:33.900 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:40:33.900 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:40:33.900 -06:00 [DBG] No PKCE used.
2018-07-19 16:40:33.900 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:40:33.900 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdYhsqDdbbOOP8m2g8skDsciaRhW2JPL8uVmcKELqsR2rtixzkJktDm2XymOPCbjVvTI684mHTFNv6V-uTR7-eo0VImeLCOYfe0MFaJcNtA6ooRGUtNGBxiLcfrwLqNgFan7OPu6GXku9WRZdKjnOB19cd_rNSrZFC8iBHs8LC3rM9L814-oVedRuETGb_NAIMzbJkxjCfZeIkJDTO4gp_xhX9vmeVtaH6SPZUxxEalCzzRQy3-91_zrRZ3l_HdxVTdHyaTfd398S06RF9WGC4IUsvdEhqWR2g4Rn1mmjnTGKtNp-t7N7P6qmX1-IOrb7c",
  "Nonce": "636676368267332270.ZDFiZTI3YTEtMzZmOS00MDQ2LWJkODgtMmMyZDNmMDkwZGMyOGM0NGQ2MjAtNjg2My00YzA3LWEzNmYtNTU1YjVjZWM0YWQ0",
  "SessionId": "43a2c343d7c262834c4c4ca224704bf8",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location",
    "response_mode": "form_post",
    "nonce": "636676368267332270.ZDFiZTI3YTEtMzZmOS00MDQ2LWJkODgtMmMyZDNmMDkwZGMyOGM0NGQ2MjAtNjg2My00YzA3LWEzNmYtNTU1YjVjZWM0YWQ0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdYhsqDdbbOOP8m2g8skDsciaRhW2JPL8uVmcKELqsR2rtixzkJktDm2XymOPCbjVvTI684mHTFNv6V-uTR7-eo0VImeLCOYfe0MFaJcNtA6ooRGUtNGBxiLcfrwLqNgFan7OPu6GXku9WRZdKjnOB19cd_rNSrZFC8iBHs8LC3rM9L814-oVedRuETGb_NAIMzbJkxjCfZeIkJDTO4gp_xhX9vmeVtaH6SPZUxxEalCzzRQy3-91_zrRZ3l_HdxVTdHyaTfd398S06RF9WGC4IUsvdEhqWR2g4Rn1mmjnTGKtNp-t7N7P6qmX1-IOrb7c",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:40:33.901 -06:00 [DBG] user_consent grant with value: toDoBox|bb596370-55ff-4429-8d36-390ddca7cf63 not found in store.
2018-07-19 16:40:33.901 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 16:40:33.901 -06:00 [INF] Showing consent: User has not yet consented
2018-07-19 16:40:33.903 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:40:33.904 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:40:33.904 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:40:33.904 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:40:33.904 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:40:33.904 -06:00 [DBG] No PKCE used.
2018-07-19 16:40:33.904 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:40:33.904 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:40:36.546 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 16:40:36.547 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:40:36.547 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:40:36.547 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:40:36.547 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:40:36.547 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:40:36.547 -06:00 [DBG] No PKCE used.
2018-07-19 16:40:36.547 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:40:36.551 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:40:36.551 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:40:36.551 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 16:40:36.551 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 16:40:36.551 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 16:40:36.551 -06:00 [DBG] Start authorize callback request
2018-07-19 16:40:36.551 -06:00 [DBG] User in authorize request: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:40:36.551 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:40:36.551 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:40:36.552 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:40:36.552 -06:00 [DBG] No PKCE used.
2018-07-19 16:40:36.552 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:40:36.552 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdYhsqDdbbOOP8m2g8skDsciaRhW2JPL8uVmcKELqsR2rtixzkJktDm2XymOPCbjVvTI684mHTFNv6V-uTR7-eo0VImeLCOYfe0MFaJcNtA6ooRGUtNGBxiLcfrwLqNgFan7OPu6GXku9WRZdKjnOB19cd_rNSrZFC8iBHs8LC3rM9L814-oVedRuETGb_NAIMzbJkxjCfZeIkJDTO4gp_xhX9vmeVtaH6SPZUxxEalCzzRQy3-91_zrRZ3l_HdxVTdHyaTfd398S06RF9WGC4IUsvdEhqWR2g4Rn1mmjnTGKtNp-t7N7P6qmX1-IOrb7c",
  "Nonce": "636676368267332270.ZDFiZTI3YTEtMzZmOS00MDQ2LWJkODgtMmMyZDNmMDkwZGMyOGM0NGQ2MjAtNjg2My00YzA3LWEzNmYtNTU1YjVjZWM0YWQ0",
  "SessionId": "43a2c343d7c262834c4c4ca224704bf8",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location",
    "response_mode": "form_post",
    "nonce": "636676368267332270.ZDFiZTI3YTEtMzZmOS00MDQ2LWJkODgtMmMyZDNmMDkwZGMyOGM0NGQ2MjAtNjg2My00YzA3LWEzNmYtNTU1YjVjZWM0YWQ0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdYhsqDdbbOOP8m2g8skDsciaRhW2JPL8uVmcKELqsR2rtixzkJktDm2XymOPCbjVvTI684mHTFNv6V-uTR7-eo0VImeLCOYfe0MFaJcNtA6ooRGUtNGBxiLcfrwLqNgFan7OPu6GXku9WRZdKjnOB19cd_rNSrZFC8iBHs8LC3rM9L814-oVedRuETGb_NAIMzbJkxjCfZeIkJDTO4gp_xhX9vmeVtaH6SPZUxxEalCzzRQy3-91_zrRZ3l_HdxVTdHyaTfd398S06RF9WGC4IUsvdEhqWR2g4Rn1mmjnTGKtNp-t7N7P6qmX1-IOrb7c",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:40:36.553 -06:00 [DBG] user_consent grant with value: toDoBox|bb596370-55ff-4429-8d36-390ddca7cf63 not found in store.
2018-07-19 16:40:36.553 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 16:40:36.553 -06:00 [INF] User consented to scopes: ["openid","profile","location","email"]
2018-07-19 16:40:36.553 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:40:36.553 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-19 16:40:36.558 -06:00 [DBG] Creating Implicit Flow response.
2018-07-19 16:40:36.558 -06:00 [DBG] Getting claims for identity token for subject: bb596370-55ff-4429-8d36-390ddca7cf63 and client: toDoBox
2018-07-19 16:40:36.558 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 16:40:36.569 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "Scopes": "openid profile email location",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****PSSw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****dfb0"
    }
  ],
  "ActivityId": "0HLFDP0HMDAVF:00000007",
  "TimeStamp": "2018-07-19T22:40:36Z",
  "ProcessId": 3486,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:40:36.569 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ClientId": "toDoBox",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdYhsqDdbbOOP8m2g8skDsciaRhW2JPL8uVmcKELqsR2rtixzkJktDm2XymOPCbjVvTI684mHTFNv6V-uTR7-eo0VImeLCOYfe0MFaJcNtA6ooRGUtNGBxiLcfrwLqNgFan7OPu6GXku9WRZdKjnOB19cd_rNSrZFC8iBHs8LC3rM9L814-oVedRuETGb_NAIMzbJkxjCfZeIkJDTO4gp_xhX9vmeVtaH6SPZUxxEalCzzRQy3-91_zrRZ3l_HdxVTdHyaTfd398S06RF9WGC4IUsvdEhqWR2g4Rn1mmjnTGKtNp-t7N7P6qmX1-IOrb7c",
  "Scope": "openid profile email location"
}
2018-07-19 16:40:36.570 -06:00 [DBG] Augmenting SignInContext
2018-07-19 16:40:36.570 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 16:40:36.671 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-19 16:40:36.672 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-19 16:40:36.672 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-19 16:40:36.672 -06:00 [DBG] Start token request.
2018-07-19 16:40:36.672 -06:00 [DBG] Start client validation
2018-07-19 16:40:36.672 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-19 16:40:36.672 -06:00 [DBG] Start parsing for secret in post body
2018-07-19 16:40:36.672 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-19 16:40:36.672 -06:00 [DBG] Secret id found: toDoBox
2018-07-19 16:40:36.672 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:40:36.672 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-19 16:40:36.672 -06:00 [DBG] Client validation success
2018-07-19 16:40:36.672 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "toDoBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFDP0HMDAVE:00000003",
  "TimeStamp": "2018-07-19T22:40:36Z",
  "ProcessId": 3486,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:40:36.672 -06:00 [DBG] Start token request validation
2018-07-19 16:40:36.672 -06:00 [DBG] Start validation of authorization code token request
2018-07-19 16:40:36.679 -06:00 [DBG] Validation of authorization code token request success
2018-07-19 16:40:36.679 -06:00 [INF] Token request validation success
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "2c7cb3a4bcb7293b6f048e05bb2a9b99be7cece7b39ddec8c3ba35c65928dfb0",
  "Raw": {
    "client_id": "toDoBox",
    "client_secret": "***REDACTED***",
    "code": "2c7cb3a4bcb7293b6f048e05bb2a9b99be7cece7b39ddec8c3ba35c65928dfb0",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5003/signin-oidc"
  }
}
2018-07-19 16:40:36.679 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:40:36.680 -06:00 [DBG] Getting claims for access token for client: toDoBox
2018-07-19 16:40:36.680 -06:00 [DBG] Getting claims for access token for subject: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:40:36.692 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:40:36.692 -06:00 [DBG] Getting claims for identity token for subject: bb596370-55ff-4429-8d36-390ddca7cf63 and client: toDoBox
2018-07-19 16:40:36.692 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 16:40:36.704 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile email location",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****wE2g"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****OV5A"
    }
  ],
  "ActivityId": "0HLFDP0HMDAVE:00000003",
  "TimeStamp": "2018-07-19T22:40:36Z",
  "ProcessId": 3486,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:40:36.704 -06:00 [DBG] Token request success.
2018-07-19 16:40:36.711 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-19 16:40:36.711 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-19 16:40:36.711 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-19 16:40:36.711 -06:00 [DBG] Start userinfo request
2018-07-19 16:40:36.711 -06:00 [DBG] Bearer token found in header
2018-07-19 16:40:36.713 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:40:36.713 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:40:36.715 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-19 16:40:36.715 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532040036,
    "exp": 1532043636,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "toDoBox",
    "sub": "bb596370-55ff-4429-8d36-390ddca7cf63",
    "auth_time": 1532040033,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "location",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-19 16:40:36.715 -06:00 [DBG] Creating userinfo response
2018-07-19 16:40:36.715 -06:00 [DBG] Scopes in access token: openid profile location email
2018-07-19 16:40:36.715 -06:00 [DBG] Scopes in access token: openid profile location email
2018-07-19 16:40:36.715 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at curr_location email email_verified
2018-07-19 16:40:36.715 -06:00 [DBG] Scopes in access token: openid profile location email
2018-07-19 16:40:36.716 -06:00 [INF] Profile service returned to the following claim types: sub name given_name family_name email email_verified website preferred_username
2018-07-19 16:40:36.716 -06:00 [DBG] End userinfo request
2018-07-19 16:42:54.102 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 16:42:54.132 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 16:42:54.134 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 16:42:54.135 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 16:42:54.135 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 16:42:54.135 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 16:43:13.533 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-19 16:43:13.646 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-19 16:43:13.646 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-19 16:43:13.649 -06:00 [DBG] Start discovery request
2018-07-19 16:43:13.822 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-19 16:43:13.823 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-19 16:43:13.823 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-19 16:43:13.826 -06:00 [DBG] Start key discovery request
2018-07-19 16:43:13.896 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-19 16:43:13.899 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-19 16:43:13.899 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-19 16:43:13.902 -06:00 [DBG] Start authorize request
2018-07-19 16:43:13.917 -06:00 [DBG] No user present in authorize request
2018-07-19 16:43:13.921 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:43:13.932 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:43:13.935 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:43:13.936 -06:00 [DBG] No PKCE used.
2018-07-19 16:43:13.962 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:43:13.971 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHezk1yEsRidCbee6Hv7pEFstC3CmN_55iCkUyh_1BNUXm410-QpyUj2IzCChEP0KxLhVlRefhRiWZlBcScjRElSRvWZTXmTQH78Y76Soxlim1JDIBacAtcyepF-ITXDAn_RaFgXJ7G2jmuK_6x_m6SN4j57VZplulJ2pCYXk-f_OTtVxO6QsiBd9G79_gCxhWW9jTIyJenOCfiRxLXQ2QxNia3V0f4VLVF4fjRi48QZUZgZWe263UXca6AVbb1RJHpq0t4ai7IkYyi7CfQT2a5AMTAdHFLwcsZbKpffbVJ2ZEfYlYf7ZCL6c5dwaeDe7Vo",
  "Nonce": "636676369938599270.NTgzMDhjYjYtYjQ3Zi00YmM5LWJmZDQtODc4ODAwZTEwN2VmYjQ2Njc2MmYtMzY4Ni00OGVlLWE5MTMtMTg2YWVhYjBhNzkz",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location",
    "response_mode": "form_post",
    "nonce": "636676369938599270.NTgzMDhjYjYtYjQ3Zi00YmM5LWJmZDQtODc4ODAwZTEwN2VmYjQ2Njc2MmYtMzY4Ni00OGVlLWE5MTMtMTg2YWVhYjBhNzkz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHezk1yEsRidCbee6Hv7pEFstC3CmN_55iCkUyh_1BNUXm410-QpyUj2IzCChEP0KxLhVlRefhRiWZlBcScjRElSRvWZTXmTQH78Y76Soxlim1JDIBacAtcyepF-ITXDAn_RaFgXJ7G2jmuK_6x_m6SN4j57VZplulJ2pCYXk-f_OTtVxO6QsiBd9G79_gCxhWW9jTIyJenOCfiRxLXQ2QxNia3V0f4VLVF4fjRi48QZUZgZWe263UXca6AVbb1RJHpq0t4ai7IkYyi7CfQT2a5AMTAdHFLwcsZbKpffbVJ2ZEfYlYf7ZCL6c5dwaeDe7Vo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:43:13.977 -06:00 [INF] Showing login: User is not authenticated
2018-07-19 16:43:14.268 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:43:14.269 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:43:14.269 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:43:14.269 -06:00 [DBG] No PKCE used.
2018-07-19 16:43:14.269 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:43:14.272 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:43:27.231 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 16:43:28.427 -06:00 [DBG] Augmenting SignInContext
2018-07-19 16:43:28.429 -06:00 [DBG] Adding idp claim with value: local
2018-07-19 16:43:28.429 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-19 16:43:28.429 -06:00 [DBG] Adding auth_time claim with value: 1532040208
2018-07-19 16:43:28.458 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 16:43:28.487 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFDP41C81F6:00000003",
  "TimeStamp": "2018-07-19T22:43:28Z",
  "ProcessId": 3561,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:43:28.507 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:43:28.507 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:43:28.507 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 16:43:28.508 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 16:43:28.508 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 16:43:28.512 -06:00 [DBG] Start authorize callback request
2018-07-19 16:43:28.515 -06:00 [DBG] User in authorize request: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:43:28.515 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:43:28.515 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:43:28.515 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:43:28.515 -06:00 [DBG] No PKCE used.
2018-07-19 16:43:28.515 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:43:28.515 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHezk1yEsRidCbee6Hv7pEFstC3CmN_55iCkUyh_1BNUXm410-QpyUj2IzCChEP0KxLhVlRefhRiWZlBcScjRElSRvWZTXmTQH78Y76Soxlim1JDIBacAtcyepF-ITXDAn_RaFgXJ7G2jmuK_6x_m6SN4j57VZplulJ2pCYXk-f_OTtVxO6QsiBd9G79_gCxhWW9jTIyJenOCfiRxLXQ2QxNia3V0f4VLVF4fjRi48QZUZgZWe263UXca6AVbb1RJHpq0t4ai7IkYyi7CfQT2a5AMTAdHFLwcsZbKpffbVJ2ZEfYlYf7ZCL6c5dwaeDe7Vo",
  "Nonce": "636676369938599270.NTgzMDhjYjYtYjQ3Zi00YmM5LWJmZDQtODc4ODAwZTEwN2VmYjQ2Njc2MmYtMzY4Ni00OGVlLWE5MTMtMTg2YWVhYjBhNzkz",
  "SessionId": "3dac09750e6a53c16fd3fac1a85f4a34",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location",
    "response_mode": "form_post",
    "nonce": "636676369938599270.NTgzMDhjYjYtYjQ3Zi00YmM5LWJmZDQtODc4ODAwZTEwN2VmYjQ2Njc2MmYtMzY4Ni00OGVlLWE5MTMtMTg2YWVhYjBhNzkz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHezk1yEsRidCbee6Hv7pEFstC3CmN_55iCkUyh_1BNUXm410-QpyUj2IzCChEP0KxLhVlRefhRiWZlBcScjRElSRvWZTXmTQH78Y76Soxlim1JDIBacAtcyepF-ITXDAn_RaFgXJ7G2jmuK_6x_m6SN4j57VZplulJ2pCYXk-f_OTtVxO6QsiBd9G79_gCxhWW9jTIyJenOCfiRxLXQ2QxNia3V0f4VLVF4fjRi48QZUZgZWe263UXca6AVbb1RJHpq0t4ai7IkYyi7CfQT2a5AMTAdHFLwcsZbKpffbVJ2ZEfYlYf7ZCL6c5dwaeDe7Vo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:43:28.554 -06:00 [DBG] user_consent grant with value: toDoBox|bb596370-55ff-4429-8d36-390ddca7cf63 not found in store.
2018-07-19 16:43:28.554 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 16:43:28.554 -06:00 [INF] Showing consent: User has not yet consented
2018-07-19 16:43:28.557 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:43:28.558 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:43:28.584 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:43:28.585 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:43:28.585 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:43:28.585 -06:00 [DBG] No PKCE used.
2018-07-19 16:43:28.585 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:43:28.585 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:43:32.049 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-19 16:43:32.050 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:43:32.050 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:43:32.072 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:43:32.072 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:43:32.072 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:43:32.072 -06:00 [DBG] No PKCE used.
2018-07-19 16:43:32.072 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:43:32.088 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:43:32.088 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-19 16:43:32.088 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-19 16:43:32.088 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-19 16:43:32.088 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-19 16:43:32.088 -06:00 [DBG] Start authorize callback request
2018-07-19 16:43:32.116 -06:00 [DBG] User in authorize request: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:43:32.116 -06:00 [DBG] Start authorize request protocol validation
2018-07-19 16:43:32.116 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:43:32.116 -06:00 [DBG] Checking for PKCE parameters
2018-07-19 16:43:32.116 -06:00 [DBG] No PKCE used.
2018-07-19 16:43:32.116 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-19 16:43:32.116 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHezk1yEsRidCbee6Hv7pEFstC3CmN_55iCkUyh_1BNUXm410-QpyUj2IzCChEP0KxLhVlRefhRiWZlBcScjRElSRvWZTXmTQH78Y76Soxlim1JDIBacAtcyepF-ITXDAn_RaFgXJ7G2jmuK_6x_m6SN4j57VZplulJ2pCYXk-f_OTtVxO6QsiBd9G79_gCxhWW9jTIyJenOCfiRxLXQ2QxNia3V0f4VLVF4fjRi48QZUZgZWe263UXca6AVbb1RJHpq0t4ai7IkYyi7CfQT2a5AMTAdHFLwcsZbKpffbVJ2ZEfYlYf7ZCL6c5dwaeDe7Vo",
  "Nonce": "636676369938599270.NTgzMDhjYjYtYjQ3Zi00YmM5LWJmZDQtODc4ODAwZTEwN2VmYjQ2Njc2MmYtMzY4Ni00OGVlLWE5MTMtMTg2YWVhYjBhNzkz",
  "SessionId": "3dac09750e6a53c16fd3fac1a85f4a34",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location",
    "response_mode": "form_post",
    "nonce": "636676369938599270.NTgzMDhjYjYtYjQ3Zi00YmM5LWJmZDQtODc4ODAwZTEwN2VmYjQ2Njc2MmYtMzY4Ni00OGVlLWE5MTMtMTg2YWVhYjBhNzkz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHezk1yEsRidCbee6Hv7pEFstC3CmN_55iCkUyh_1BNUXm410-QpyUj2IzCChEP0KxLhVlRefhRiWZlBcScjRElSRvWZTXmTQH78Y76Soxlim1JDIBacAtcyepF-ITXDAn_RaFgXJ7G2jmuK_6x_m6SN4j57VZplulJ2pCYXk-f_OTtVxO6QsiBd9G79_gCxhWW9jTIyJenOCfiRxLXQ2QxNia3V0f4VLVF4fjRi48QZUZgZWe263UXca6AVbb1RJHpq0t4ai7IkYyi7CfQT2a5AMTAdHFLwcsZbKpffbVJ2ZEfYlYf7ZCL6c5dwaeDe7Vo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-19 16:43:32.118 -06:00 [DBG] user_consent grant with value: toDoBox|bb596370-55ff-4429-8d36-390ddca7cf63 not found in store.
2018-07-19 16:43:32.118 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-19 16:43:32.124 -06:00 [INF] User consented to scopes: ["openid","profile","location","email"]
2018-07-19 16:43:32.136 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:43:32.142 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-19 16:43:32.162 -06:00 [DBG] Creating Implicit Flow response.
2018-07-19 16:43:32.172 -06:00 [DBG] Getting claims for identity token for subject: bb596370-55ff-4429-8d36-390ddca7cf63 and client: toDoBox
2018-07-19 16:43:32.173 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 16:43:32.241 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "Scopes": "openid profile email location",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****5IMQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****d5af"
    }
  ],
  "ActivityId": "0HLFDP41C81F6:00000007",
  "TimeStamp": "2018-07-19T22:43:32Z",
  "ProcessId": 3561,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:43:32.244 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "bb596370-55ff-4429-8d36-390ddca7cf63",
  "ClientId": "toDoBox",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHezk1yEsRidCbee6Hv7pEFstC3CmN_55iCkUyh_1BNUXm410-QpyUj2IzCChEP0KxLhVlRefhRiWZlBcScjRElSRvWZTXmTQH78Y76Soxlim1JDIBacAtcyepF-ITXDAn_RaFgXJ7G2jmuK_6x_m6SN4j57VZplulJ2pCYXk-f_OTtVxO6QsiBd9G79_gCxhWW9jTIyJenOCfiRxLXQ2QxNia3V0f4VLVF4fjRi48QZUZgZWe263UXca6AVbb1RJHpq0t4ai7IkYyi7CfQT2a5AMTAdHFLwcsZbKpffbVJ2ZEfYlYf7ZCL6c5dwaeDe7Vo",
  "Scope": "openid profile email location"
}
2018-07-19 16:43:32.259 -06:00 [DBG] Augmenting SignInContext
2018-07-19 16:43:32.259 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-19 16:43:32.367 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-19 16:43:32.369 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-19 16:43:32.369 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-19 16:43:32.375 -06:00 [DBG] Start token request.
2018-07-19 16:43:32.381 -06:00 [DBG] Start client validation
2018-07-19 16:43:32.385 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-19 16:43:32.388 -06:00 [DBG] Start parsing for secret in post body
2018-07-19 16:43:32.388 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-19 16:43:32.388 -06:00 [DBG] Secret id found: toDoBox
2018-07-19 16:43:32.388 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:43:32.395 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-19 16:43:32.395 -06:00 [DBG] Client validation success
2018-07-19 16:43:32.397 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "toDoBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFDP41C81F5:00000003",
  "TimeStamp": "2018-07-19T22:43:32Z",
  "ProcessId": 3561,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:43:32.402 -06:00 [DBG] Start token request validation
2018-07-19 16:43:32.411 -06:00 [DBG] Start validation of authorization code token request
2018-07-19 16:43:32.429 -06:00 [DBG] Validation of authorization code token request success
2018-07-19 16:43:32.431 -06:00 [INF] Token request validation success
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "29b931db103d7d2eb24e47de4d2dd914b78e4d9c1a908caf0a251bd47dc4d5af",
  "Raw": {
    "client_id": "toDoBox",
    "client_secret": "***REDACTED***",
    "code": "29b931db103d7d2eb24e47de4d2dd914b78e4d9c1a908caf0a251bd47dc4d5af",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5003/signin-oidc"
  }
}
2018-07-19 16:43:32.443 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:43:32.452 -06:00 [DBG] Getting claims for access token for client: toDoBox
2018-07-19 16:43:32.452 -06:00 [DBG] Getting claims for access token for subject: bb596370-55ff-4429-8d36-390ddca7cf63
2018-07-19 16:43:32.470 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:43:32.470 -06:00 [DBG] Getting claims for identity token for subject: bb596370-55ff-4429-8d36-390ddca7cf63 and client: toDoBox
2018-07-19 16:43:32.470 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-19 16:43:32.483 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile email location",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****8ZTw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****9hkQ"
    }
  ],
  "ActivityId": "0HLFDP41C81F5:00000003",
  "TimeStamp": "2018-07-19T22:43:32Z",
  "ProcessId": 3561,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-19 16:43:32.484 -06:00 [DBG] Token request success.
2018-07-19 16:43:32.496 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-19 16:43:32.497 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-19 16:43:32.497 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-19 16:43:32.502 -06:00 [DBG] Start userinfo request
2018-07-19 16:43:32.504 -06:00 [DBG] Bearer token found in header
2018-07-19 16:43:32.563 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:43:32.566 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-19 16:43:32.567 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-19 16:43:32.570 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532040212,
    "exp": 1532043812,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "toDoBox",
    "sub": "bb596370-55ff-4429-8d36-390ddca7cf63",
    "auth_time": 1532040208,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "location",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-19 16:43:32.577 -06:00 [DBG] Creating userinfo response
2018-07-19 16:43:32.580 -06:00 [DBG] Scopes in access token: openid profile location email
2018-07-19 16:43:32.582 -06:00 [DBG] Scopes in access token: openid profile location email
2018-07-19 16:43:32.584 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at curr_location email email_verified
2018-07-19 16:43:32.584 -06:00 [DBG] Scopes in access token: openid profile location email
2018-07-19 16:43:32.586 -06:00 [INF] Profile service returned to the following claim types: sub name given_name family_name email email_verified website preferred_username
2018-07-19 16:43:32.586 -06:00 [DBG] End userinfo request
2018-07-19 16:45:50.267 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 16:45:50.297 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 16:45:50.299 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 16:45:50.300 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 16:45:50.300 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 16:45:50.300 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 16:46:25.508 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 16:46:25.538 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 16:46:25.541 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 16:46:25.541 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 16:46:25.541 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 16:46:25.542 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 16:49:27.161 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 16:49:27.191 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 16:49:27.193 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 16:49:27.193 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 16:49:27.193 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 16:49:27.194 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 16:50:07.745 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 16:50:07.774 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 16:50:07.777 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 16:50:07.777 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 16:50:07.777 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 16:50:07.777 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 16:51:28.024 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 16:51:28.055 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 16:51:28.057 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 16:51:28.058 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 16:51:28.058 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 16:51:28.058 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 16:53:53.273 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 16:53:53.303 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 16:53:53.305 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 16:53:53.305 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 16:53:53.305 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 16:53:53.306 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 16:54:23.013 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 16:54:23.044 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 16:54:23.046 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 16:54:23.046 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 16:54:23.046 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 16:54:23.047 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 16:55:04.525 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 16:55:04.556 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 16:55:04.558 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 16:55:04.558 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 16:55:04.558 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 16:55:04.559 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 16:55:27.272 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 16:55:27.302 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 16:55:27.304 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 16:55:27.305 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 16:55:27.305 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 16:55:27.305 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 16:55:49.246 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 16:55:49.276 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 16:55:49.279 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 16:55:49.279 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 16:55:49.279 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 16:55:49.279 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-19 16:57:02.100 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-19 16:57:02.130 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-19 16:57:02.133 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-19 16:57:02.133 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-19 16:57:02.133 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-19 16:57:02.133 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-20 08:45:15.367 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-20 08:45:15.397 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-20 08:45:15.400 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-20 08:45:15.400 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-20 08:45:15.400 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-20 08:45:15.400 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-20 08:45:16.788 -06:00 [WRN] User 1d45fff7-1ac4-4cee-9349-b446c6fe1799 validation failed: DuplicateUserName.
2018-07-20 08:46:10.418 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-20 08:46:10.448 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-20 08:46:10.450 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-20 08:46:10.451 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-20 08:46:10.451 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-20 08:46:10.451 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-20 08:46:39.363 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-20 08:46:39.393 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-20 08:46:39.396 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-20 08:46:39.396 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-20 08:46:39.396 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-20 08:46:39.396 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-20 08:48:15.706 -06:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-07-20 08:48:15.712 -06:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-07-20 08:48:15.713 -06:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-07-20 08:48:15.715 -06:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-07-20 08:48:15.725 -06:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-07-20 08:48:34.731 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-20 08:48:34.734 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-20 08:48:34.734 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-20 08:48:34.737 -06:00 [DBG] Start discovery request
2018-07-20 08:48:34.872 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-20 08:48:34.872 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-20 08:48:34.872 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-20 08:48:34.874 -06:00 [DBG] Start key discovery request
2018-07-20 08:48:34.917 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-20 08:48:34.920 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-20 08:48:34.920 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-20 08:48:34.923 -06:00 [DBG] Start authorize request
2018-07-20 08:48:34.940 -06:00 [DBG] No user present in authorize request
2018-07-20 08:48:34.944 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:48:34.954 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:48:34.958 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:48:34.959 -06:00 [DBG] No PKCE used.
2018-07-20 08:48:34.983 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:48:34.992 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcV0kuAFljf7Eus_PMjcxf6bCBgZ_z4fCOl71xgFFRUdlA7QpPpLxzVNA0NQHezWBlaVIosUC6VgJgGg4_GEYL9WasIgaNI3AxybYvThO6CjnU_-HL5Z_av0crxbuJQ6l-4M8D-0MooOBB-S4TkigFgDStUE5NbqC6RwI2wbos6sbthPv9p1-rJsNBtIQAM71s5fyEbZBm1lp1OceiovgyMzUN-EwxZ58E2XfVaQ85BjkET2ru4ucS6umkATi8gY7AQOyZP3uiJqy63nCnV6zUaxJ5mewdk0eJ-IffUq--k67grCrXz28IUjRIYPDsUXEY",
  "Nonce": "636676949149077580.OGNjMTIzNWYtNzFiYy00ZTFlLWExYjgtYmJjNWFmZGEwNmZjMjczOTMwODMtMTU0MS00NjhlLWJiNjItYmUyMzQ5Y2JkNzhj",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location",
    "response_mode": "form_post",
    "nonce": "636676949149077580.OGNjMTIzNWYtNzFiYy00ZTFlLWExYjgtYmJjNWFmZGEwNmZjMjczOTMwODMtMTU0MS00NjhlLWJiNjItYmUyMzQ5Y2JkNzhj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcV0kuAFljf7Eus_PMjcxf6bCBgZ_z4fCOl71xgFFRUdlA7QpPpLxzVNA0NQHezWBlaVIosUC6VgJgGg4_GEYL9WasIgaNI3AxybYvThO6CjnU_-HL5Z_av0crxbuJQ6l-4M8D-0MooOBB-S4TkigFgDStUE5NbqC6RwI2wbos6sbthPv9p1-rJsNBtIQAM71s5fyEbZBm1lp1OceiovgyMzUN-EwxZ58E2XfVaQ85BjkET2ru4ucS6umkATi8gY7AQOyZP3uiJqy63nCnV6zUaxJ5mewdk0eJ-IffUq--k67grCrXz28IUjRIYPDsUXEY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 08:48:34.999 -06:00 [INF] Showing login: User is not authenticated
2018-07-20 08:48:35.110 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:48:35.111 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:48:35.111 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:48:35.111 -06:00 [DBG] No PKCE used.
2018-07-20 08:48:35.111 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:48:35.113 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:49:02.435 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-20 08:49:02.435 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-20 08:49:02.435 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-20 08:49:02.435 -06:00 [DBG] Start discovery request
2018-07-20 08:49:02.497 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-20 08:49:02.497 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-20 08:49:02.498 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-20 08:49:02.498 -06:00 [DBG] Start key discovery request
2018-07-20 08:49:02.524 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-20 08:49:02.524 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-20 08:49:02.524 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-20 08:49:02.524 -06:00 [DBG] Start authorize request
2018-07-20 08:49:02.525 -06:00 [DBG] No user present in authorize request
2018-07-20 08:49:02.525 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:49:02.525 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:49:02.525 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:49:02.525 -06:00 [DBG] No PKCE used.
2018-07-20 08:49:02.525 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:49:02.525 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd8F51XJ6gOwOhTTCHjBpBKr2vk9Rp2G94neqib1tB_NhZgeBHXIFBL0p3V3-P121jAoLPHRPQtO39w09f3UVEBj331V8-_mzuwLmqA8hEXLJ5A8QdAIYvMyYGqHJsGhmLRBaHqg16qDRNrrtqc-STHCGuULbaARgVFQixlZoVaY1bWR1Y02GFRzmI5ZLgbnJtqBipnRNuGvTBDXCqTUgQdalKHJwGFknKsQLjZkQ75WXVI_LnKLMrwqHnOdicn74XM3s3XY-6OhJciqu-DPqoLHkyvYOh59d1waWKr2QuLDd33-S3CXyB8Gf45efz_Fkw",
  "Nonce": "636676949425130080.NTczNDEzOWYtODVhNS00ZjFmLTg1NjItMDZkYjBkNDIzYTJmZTdlMTJjMmUtNGYxMC00YjM4LWE1ZjItMDQxOWNjMzMxMmRi",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676949425130080.NTczNDEzOWYtODVhNS00ZjFmLTg1NjItMDZkYjBkNDIzYTJmZTdlMTJjMmUtNGYxMC00YjM4LWE1ZjItMDQxOWNjMzMxMmRi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd8F51XJ6gOwOhTTCHjBpBKr2vk9Rp2G94neqib1tB_NhZgeBHXIFBL0p3V3-P121jAoLPHRPQtO39w09f3UVEBj331V8-_mzuwLmqA8hEXLJ5A8QdAIYvMyYGqHJsGhmLRBaHqg16qDRNrrtqc-STHCGuULbaARgVFQixlZoVaY1bWR1Y02GFRzmI5ZLgbnJtqBipnRNuGvTBDXCqTUgQdalKHJwGFknKsQLjZkQ75WXVI_LnKLMrwqHnOdicn74XM3s3XY-6OhJciqu-DPqoLHkyvYOh59d1waWKr2QuLDd33-S3CXyB8Gf45efz_Fkw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 08:49:02.525 -06:00 [INF] Showing login: User is not authenticated
2018-07-20 08:49:02.530 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:49:02.530 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:49:02.531 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:49:02.531 -06:00 [DBG] No PKCE used.
2018-07-20 08:49:02.531 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:49:02.531 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:49:15.820 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 08:49:16.187 -06:00 [DBG] Augmenting SignInContext
2018-07-20 08:49:16.189 -06:00 [DBG] Adding idp claim with value: local
2018-07-20 08:49:16.189 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-20 08:49:16.189 -06:00 [DBG] Adding auth_time claim with value: 1532098156
2018-07-20 08:49:16.208 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 08:49:16.237 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "50baaad3-7a20-49a2-9556-67bb0c2218c4",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFE9V991R3C:00000009",
  "TimeStamp": "2018-07-20T14:49:16Z",
  "ProcessId": 7782,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 08:49:16.245 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:49:16.246 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:49:16.247 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 08:49:16.247 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 08:49:16.247 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 08:49:16.253 -06:00 [DBG] Start authorize callback request
2018-07-20 08:49:16.256 -06:00 [DBG] User in authorize request: 50baaad3-7a20-49a2-9556-67bb0c2218c4
2018-07-20 08:49:16.256 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:49:16.256 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:49:16.256 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:49:16.256 -06:00 [DBG] No PKCE used.
2018-07-20 08:49:16.256 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:49:16.256 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "50baaad3-7a20-49a2-9556-67bb0c2218c4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcV0kuAFljf7Eus_PMjcxf6bCBgZ_z4fCOl71xgFFRUdlA7QpPpLxzVNA0NQHezWBlaVIosUC6VgJgGg4_GEYL9WasIgaNI3AxybYvThO6CjnU_-HL5Z_av0crxbuJQ6l-4M8D-0MooOBB-S4TkigFgDStUE5NbqC6RwI2wbos6sbthPv9p1-rJsNBtIQAM71s5fyEbZBm1lp1OceiovgyMzUN-EwxZ58E2XfVaQ85BjkET2ru4ucS6umkATi8gY7AQOyZP3uiJqy63nCnV6zUaxJ5mewdk0eJ-IffUq--k67grCrXz28IUjRIYPDsUXEY",
  "Nonce": "636676949149077580.OGNjMTIzNWYtNzFiYy00ZTFlLWExYjgtYmJjNWFmZGEwNmZjMjczOTMwODMtMTU0MS00NjhlLWJiNjItYmUyMzQ5Y2JkNzhj",
  "SessionId": "190440dd56953ae1cf1bc03bdec74b4e",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location",
    "response_mode": "form_post",
    "nonce": "636676949149077580.OGNjMTIzNWYtNzFiYy00ZTFlLWExYjgtYmJjNWFmZGEwNmZjMjczOTMwODMtMTU0MS00NjhlLWJiNjItYmUyMzQ5Y2JkNzhj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcV0kuAFljf7Eus_PMjcxf6bCBgZ_z4fCOl71xgFFRUdlA7QpPpLxzVNA0NQHezWBlaVIosUC6VgJgGg4_GEYL9WasIgaNI3AxybYvThO6CjnU_-HL5Z_av0crxbuJQ6l-4M8D-0MooOBB-S4TkigFgDStUE5NbqC6RwI2wbos6sbthPv9p1-rJsNBtIQAM71s5fyEbZBm1lp1OceiovgyMzUN-EwxZ58E2XfVaQ85BjkET2ru4ucS6umkATi8gY7AQOyZP3uiJqy63nCnV6zUaxJ5mewdk0eJ-IffUq--k67grCrXz28IUjRIYPDsUXEY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 08:49:16.279 -06:00 [DBG] user_consent grant with value: toDoBox|50baaad3-7a20-49a2-9556-67bb0c2218c4 not found in store.
2018-07-20 08:49:16.279 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 08:49:16.279 -06:00 [INF] Showing consent: User has not yet consented
2018-07-20 08:49:16.282 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:49:16.282 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:49:16.310 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:49:16.310 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:49:16.310 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:49:16.310 -06:00 [DBG] No PKCE used.
2018-07-20 08:49:16.310 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:49:16.310 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:49:19.547 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 08:49:19.547 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:49:19.547 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:49:19.569 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:49:19.569 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:49:19.569 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:49:19.569 -06:00 [DBG] No PKCE used.
2018-07-20 08:49:19.569 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:49:19.585 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:49:19.585 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:49:19.585 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 08:49:19.585 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 08:49:19.585 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 08:49:19.586 -06:00 [DBG] Start authorize callback request
2018-07-20 08:49:19.613 -06:00 [DBG] User in authorize request: 50baaad3-7a20-49a2-9556-67bb0c2218c4
2018-07-20 08:49:19.613 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:49:19.613 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:49:19.614 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:49:19.614 -06:00 [DBG] No PKCE used.
2018-07-20 08:49:19.614 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:49:19.614 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "50baaad3-7a20-49a2-9556-67bb0c2218c4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcV0kuAFljf7Eus_PMjcxf6bCBgZ_z4fCOl71xgFFRUdlA7QpPpLxzVNA0NQHezWBlaVIosUC6VgJgGg4_GEYL9WasIgaNI3AxybYvThO6CjnU_-HL5Z_av0crxbuJQ6l-4M8D-0MooOBB-S4TkigFgDStUE5NbqC6RwI2wbos6sbthPv9p1-rJsNBtIQAM71s5fyEbZBm1lp1OceiovgyMzUN-EwxZ58E2XfVaQ85BjkET2ru4ucS6umkATi8gY7AQOyZP3uiJqy63nCnV6zUaxJ5mewdk0eJ-IffUq--k67grCrXz28IUjRIYPDsUXEY",
  "Nonce": "636676949149077580.OGNjMTIzNWYtNzFiYy00ZTFlLWExYjgtYmJjNWFmZGEwNmZjMjczOTMwODMtMTU0MS00NjhlLWJiNjItYmUyMzQ5Y2JkNzhj",
  "SessionId": "190440dd56953ae1cf1bc03bdec74b4e",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location",
    "response_mode": "form_post",
    "nonce": "636676949149077580.OGNjMTIzNWYtNzFiYy00ZTFlLWExYjgtYmJjNWFmZGEwNmZjMjczOTMwODMtMTU0MS00NjhlLWJiNjItYmUyMzQ5Y2JkNzhj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcV0kuAFljf7Eus_PMjcxf6bCBgZ_z4fCOl71xgFFRUdlA7QpPpLxzVNA0NQHezWBlaVIosUC6VgJgGg4_GEYL9WasIgaNI3AxybYvThO6CjnU_-HL5Z_av0crxbuJQ6l-4M8D-0MooOBB-S4TkigFgDStUE5NbqC6RwI2wbos6sbthPv9p1-rJsNBtIQAM71s5fyEbZBm1lp1OceiovgyMzUN-EwxZ58E2XfVaQ85BjkET2ru4ucS6umkATi8gY7AQOyZP3uiJqy63nCnV6zUaxJ5mewdk0eJ-IffUq--k67grCrXz28IUjRIYPDsUXEY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 08:49:19.615 -06:00 [DBG] user_consent grant with value: toDoBox|50baaad3-7a20-49a2-9556-67bb0c2218c4 not found in store.
2018-07-20 08:49:19.615 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 08:49:19.621 -06:00 [INF] User consented to scopes: ["openid","profile","location","email"]
2018-07-20 08:49:19.633 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 50baaad3-7a20-49a2-9556-67bb0c2218c4
2018-07-20 08:49:19.640 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-20 08:49:19.660 -06:00 [DBG] Creating Implicit Flow response.
2018-07-20 08:49:19.669 -06:00 [DBG] Getting claims for identity token for subject: 50baaad3-7a20-49a2-9556-67bb0c2218c4 and client: toDoBox
2018-07-20 08:49:19.671 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 08:49:19.739 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "50baaad3-7a20-49a2-9556-67bb0c2218c4",
  "Scopes": "openid profile email location",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****XNdA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****df38"
    }
  ],
  "ActivityId": "0HLFE9V991R3C:0000000E",
  "TimeStamp": "2018-07-20T14:49:19Z",
  "ProcessId": 7782,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 08:49:19.742 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "50baaad3-7a20-49a2-9556-67bb0c2218c4",
  "ClientId": "toDoBox",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcV0kuAFljf7Eus_PMjcxf6bCBgZ_z4fCOl71xgFFRUdlA7QpPpLxzVNA0NQHezWBlaVIosUC6VgJgGg4_GEYL9WasIgaNI3AxybYvThO6CjnU_-HL5Z_av0crxbuJQ6l-4M8D-0MooOBB-S4TkigFgDStUE5NbqC6RwI2wbos6sbthPv9p1-rJsNBtIQAM71s5fyEbZBm1lp1OceiovgyMzUN-EwxZ58E2XfVaQ85BjkET2ru4ucS6umkATi8gY7AQOyZP3uiJqy63nCnV6zUaxJ5mewdk0eJ-IffUq--k67grCrXz28IUjRIYPDsUXEY",
  "Scope": "openid profile email location"
}
2018-07-20 08:49:19.756 -06:00 [DBG] Augmenting SignInContext
2018-07-20 08:49:19.757 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 08:49:19.856 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-20 08:49:19.857 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-20 08:49:19.857 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-20 08:49:19.863 -06:00 [DBG] Start token request.
2018-07-20 08:49:19.870 -06:00 [DBG] Start client validation
2018-07-20 08:49:19.874 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-20 08:49:19.876 -06:00 [DBG] Start parsing for secret in post body
2018-07-20 08:49:19.876 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-20 08:49:19.876 -06:00 [DBG] Secret id found: toDoBox
2018-07-20 08:49:19.877 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:49:19.886 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-20 08:49:19.886 -06:00 [DBG] Client validation success
2018-07-20 08:49:19.889 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "toDoBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFE9V991R3D:00000003",
  "TimeStamp": "2018-07-20T14:49:19Z",
  "ProcessId": 7782,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 08:49:19.893 -06:00 [DBG] Start token request validation
2018-07-20 08:49:19.902 -06:00 [DBG] Start validation of authorization code token request
2018-07-20 08:49:19.919 -06:00 [DBG] Validation of authorization code token request success
2018-07-20 08:49:19.923 -06:00 [INF] Token request validation success
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "ede8ebbcc1d7a57c0d51b48ccbe58194aa0cf85a498dd9cf64b6141fbc08df38",
  "Raw": {
    "client_id": "toDoBox",
    "client_secret": "***REDACTED***",
    "code": "ede8ebbcc1d7a57c0d51b48ccbe58194aa0cf85a498dd9cf64b6141fbc08df38",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5003/signin-oidc"
  }
}
2018-07-20 08:49:19.934 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:49:19.943 -06:00 [DBG] Getting claims for access token for client: toDoBox
2018-07-20 08:49:19.943 -06:00 [DBG] Getting claims for access token for subject: 50baaad3-7a20-49a2-9556-67bb0c2218c4
2018-07-20 08:49:19.962 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:49:19.962 -06:00 [DBG] Getting claims for identity token for subject: 50baaad3-7a20-49a2-9556-67bb0c2218c4 and client: toDoBox
2018-07-20 08:49:19.962 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 08:49:19.976 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile email location",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Xa6g"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****i-NQ"
    }
  ],
  "ActivityId": "0HLFE9V991R3D:00000003",
  "TimeStamp": "2018-07-20T14:49:19Z",
  "ProcessId": 7782,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 08:49:19.977 -06:00 [DBG] Token request success.
2018-07-20 08:49:19.989 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-20 08:49:19.989 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-20 08:49:19.989 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-20 08:49:19.994 -06:00 [DBG] Start userinfo request
2018-07-20 08:49:19.997 -06:00 [DBG] Bearer token found in header
2018-07-20 08:49:20.057 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:49:20.060 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:49:20.061 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-20 08:49:20.064 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532098159,
    "exp": 1532101759,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "toDoBox",
    "sub": "50baaad3-7a20-49a2-9556-67bb0c2218c4",
    "auth_time": 1532098156,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "location",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-20 08:49:20.069 -06:00 [DBG] Creating userinfo response
2018-07-20 08:49:20.072 -06:00 [DBG] Scopes in access token: openid profile location email
2018-07-20 08:49:20.074 -06:00 [DBG] Scopes in access token: openid profile location email
2018-07-20 08:49:20.076 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at curr_location email email_verified
2018-07-20 08:49:20.076 -06:00 [DBG] Scopes in access token: openid profile location email
2018-07-20 08:49:20.078 -06:00 [INF] Profile service returned to the following claim types: sub name given_name family_name email email_verified website preferred_username
2018-07-20 08:49:20.078 -06:00 [DBG] End userinfo request
2018-07-20 08:49:35.468 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 08:49:35.468 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:49:35.468 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:50:03.998 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:50:03.998 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:50:03.999 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:50:03.999 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:50:03.999 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:50:03.999 -06:00 [DBG] No PKCE used.
2018-07-20 08:50:03.999 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:50:03.999 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:50:11.356 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 08:50:11.356 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:50:11.356 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:50:11.371 -06:00 [DBG] Augmenting SignInContext
2018-07-20 08:50:11.371 -06:00 [DBG] Adding idp claim with value: local
2018-07-20 08:50:11.371 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-20 08:50:11.371 -06:00 [DBG] Adding auth_time claim with value: 1532098211
2018-07-20 08:50:11.372 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 08:50:11.372 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "50baaad3-7a20-49a2-9556-67bb0c2218c4",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFE9V991R3C:00000011",
  "TimeStamp": "2018-07-20T14:50:11Z",
  "ProcessId": 7782,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 08:50:11.375 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:50:11.375 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:50:11.375 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 08:50:11.375 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 08:50:11.375 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 08:50:11.375 -06:00 [DBG] Start authorize callback request
2018-07-20 08:50:11.375 -06:00 [DBG] User in authorize request: 50baaad3-7a20-49a2-9556-67bb0c2218c4
2018-07-20 08:50:11.375 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:50:11.375 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:50:11.375 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:50:11.375 -06:00 [DBG] No PKCE used.
2018-07-20 08:50:11.375 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:50:11.375 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "50baaad3-7a20-49a2-9556-67bb0c2218c4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd8F51XJ6gOwOhTTCHjBpBKr2vk9Rp2G94neqib1tB_NhZgeBHXIFBL0p3V3-P121jAoLPHRPQtO39w09f3UVEBj331V8-_mzuwLmqA8hEXLJ5A8QdAIYvMyYGqHJsGhmLRBaHqg16qDRNrrtqc-STHCGuULbaARgVFQixlZoVaY1bWR1Y02GFRzmI5ZLgbnJtqBipnRNuGvTBDXCqTUgQdalKHJwGFknKsQLjZkQ75WXVI_LnKLMrwqHnOdicn74XM3s3XY-6OhJciqu-DPqoLHkyvYOh59d1waWKr2QuLDd33-S3CXyB8Gf45efz_Fkw",
  "Nonce": "636676949425130080.NTczNDEzOWYtODVhNS00ZjFmLTg1NjItMDZkYjBkNDIzYTJmZTdlMTJjMmUtNGYxMC00YjM4LWE1ZjItMDQxOWNjMzMxMmRi",
  "SessionId": "44cc129c957586082f06094de44ed2f3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676949425130080.NTczNDEzOWYtODVhNS00ZjFmLTg1NjItMDZkYjBkNDIzYTJmZTdlMTJjMmUtNGYxMC00YjM4LWE1ZjItMDQxOWNjMzMxMmRi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd8F51XJ6gOwOhTTCHjBpBKr2vk9Rp2G94neqib1tB_NhZgeBHXIFBL0p3V3-P121jAoLPHRPQtO39w09f3UVEBj331V8-_mzuwLmqA8hEXLJ5A8QdAIYvMyYGqHJsGhmLRBaHqg16qDRNrrtqc-STHCGuULbaARgVFQixlZoVaY1bWR1Y02GFRzmI5ZLgbnJtqBipnRNuGvTBDXCqTUgQdalKHJwGFknKsQLjZkQ75WXVI_LnKLMrwqHnOdicn74XM3s3XY-6OhJciqu-DPqoLHkyvYOh59d1waWKr2QuLDd33-S3CXyB8Gf45efz_Fkw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 08:50:11.376 -06:00 [DBG] user_consent grant with value: ideaBox|50baaad3-7a20-49a2-9556-67bb0c2218c4 not found in store.
2018-07-20 08:50:11.376 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 08:50:11.376 -06:00 [INF] Showing consent: User has not yet consented
2018-07-20 08:50:11.379 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:50:11.379 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:50:11.379 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:50:11.379 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:50:11.379 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:50:11.379 -06:00 [DBG] No PKCE used.
2018-07-20 08:50:11.379 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:50:11.379 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:50:13.807 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 08:50:13.807 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:50:13.807 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:50:13.808 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:50:13.808 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:50:13.808 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:50:13.808 -06:00 [DBG] No PKCE used.
2018-07-20 08:50:13.808 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:50:13.811 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:50:13.811 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:50:13.811 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 08:50:13.811 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 08:50:13.811 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 08:50:13.811 -06:00 [DBG] Start authorize callback request
2018-07-20 08:50:13.812 -06:00 [DBG] User in authorize request: 50baaad3-7a20-49a2-9556-67bb0c2218c4
2018-07-20 08:50:13.812 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:50:13.812 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:50:13.812 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:50:13.812 -06:00 [DBG] No PKCE used.
2018-07-20 08:50:13.812 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:50:13.812 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "50baaad3-7a20-49a2-9556-67bb0c2218c4",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd8F51XJ6gOwOhTTCHjBpBKr2vk9Rp2G94neqib1tB_NhZgeBHXIFBL0p3V3-P121jAoLPHRPQtO39w09f3UVEBj331V8-_mzuwLmqA8hEXLJ5A8QdAIYvMyYGqHJsGhmLRBaHqg16qDRNrrtqc-STHCGuULbaARgVFQixlZoVaY1bWR1Y02GFRzmI5ZLgbnJtqBipnRNuGvTBDXCqTUgQdalKHJwGFknKsQLjZkQ75WXVI_LnKLMrwqHnOdicn74XM3s3XY-6OhJciqu-DPqoLHkyvYOh59d1waWKr2QuLDd33-S3CXyB8Gf45efz_Fkw",
  "Nonce": "636676949425130080.NTczNDEzOWYtODVhNS00ZjFmLTg1NjItMDZkYjBkNDIzYTJmZTdlMTJjMmUtNGYxMC00YjM4LWE1ZjItMDQxOWNjMzMxMmRi",
  "SessionId": "44cc129c957586082f06094de44ed2f3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676949425130080.NTczNDEzOWYtODVhNS00ZjFmLTg1NjItMDZkYjBkNDIzYTJmZTdlMTJjMmUtNGYxMC00YjM4LWE1ZjItMDQxOWNjMzMxMmRi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd8F51XJ6gOwOhTTCHjBpBKr2vk9Rp2G94neqib1tB_NhZgeBHXIFBL0p3V3-P121jAoLPHRPQtO39w09f3UVEBj331V8-_mzuwLmqA8hEXLJ5A8QdAIYvMyYGqHJsGhmLRBaHqg16qDRNrrtqc-STHCGuULbaARgVFQixlZoVaY1bWR1Y02GFRzmI5ZLgbnJtqBipnRNuGvTBDXCqTUgQdalKHJwGFknKsQLjZkQ75WXVI_LnKLMrwqHnOdicn74XM3s3XY-6OhJciqu-DPqoLHkyvYOh59d1waWKr2QuLDd33-S3CXyB8Gf45efz_Fkw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 08:50:13.813 -06:00 [DBG] user_consent grant with value: ideaBox|50baaad3-7a20-49a2-9556-67bb0c2218c4 not found in store.
2018-07-20 08:50:13.813 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 08:50:13.813 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-20 08:50:13.813 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 50baaad3-7a20-49a2-9556-67bb0c2218c4
2018-07-20 08:50:13.813 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-20 08:50:13.818 -06:00 [DBG] Creating Implicit Flow response.
2018-07-20 08:50:13.818 -06:00 [DBG] Getting claims for identity token for subject: 50baaad3-7a20-49a2-9556-67bb0c2218c4 and client: ideaBox
2018-07-20 08:50:13.818 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 08:50:13.830 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "50baaad3-7a20-49a2-9556-67bb0c2218c4",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****1uiw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****c6c6"
    }
  ],
  "ActivityId": "0HLFE9V991R3C:00000015",
  "TimeStamp": "2018-07-20T14:50:13Z",
  "ProcessId": 7782,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 08:50:13.830 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "50baaad3-7a20-49a2-9556-67bb0c2218c4",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd8F51XJ6gOwOhTTCHjBpBKr2vk9Rp2G94neqib1tB_NhZgeBHXIFBL0p3V3-P121jAoLPHRPQtO39w09f3UVEBj331V8-_mzuwLmqA8hEXLJ5A8QdAIYvMyYGqHJsGhmLRBaHqg16qDRNrrtqc-STHCGuULbaARgVFQixlZoVaY1bWR1Y02GFRzmI5ZLgbnJtqBipnRNuGvTBDXCqTUgQdalKHJwGFknKsQLjZkQ75WXVI_LnKLMrwqHnOdicn74XM3s3XY-6OhJciqu-DPqoLHkyvYOh59d1waWKr2QuLDd33-S3CXyB8Gf45efz_Fkw",
  "Scope": "openid profile business email"
}
2018-07-20 08:50:13.830 -06:00 [DBG] Augmenting SignInContext
2018-07-20 08:50:13.830 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 08:50:13.922 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-20 08:50:13.923 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-20 08:50:13.923 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-20 08:50:13.923 -06:00 [DBG] Start token request.
2018-07-20 08:50:13.923 -06:00 [DBG] Start client validation
2018-07-20 08:50:13.923 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-20 08:50:13.923 -06:00 [DBG] Start parsing for secret in post body
2018-07-20 08:50:13.923 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-20 08:50:13.923 -06:00 [DBG] Secret id found: ideaBox
2018-07-20 08:50:13.923 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:50:13.923 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-20 08:50:13.923 -06:00 [DBG] Client validation success
2018-07-20 08:50:13.923 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFE9V991R3E:00000003",
  "TimeStamp": "2018-07-20T14:50:13Z",
  "ProcessId": 7782,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 08:50:13.923 -06:00 [DBG] Start token request validation
2018-07-20 08:50:13.923 -06:00 [DBG] Start validation of authorization code token request
2018-07-20 08:50:13.932 -06:00 [DBG] Validation of authorization code token request success
2018-07-20 08:50:13.932 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "ecddb07ac1e042c144b75b84a6620bf66fd7e198a2bb8b1d0a6374679b54c6c6",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "ecddb07ac1e042c144b75b84a6620bf66fd7e198a2bb8b1d0a6374679b54c6c6",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-20 08:50:13.932 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:50:13.932 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-20 08:50:13.932 -06:00 [DBG] Getting claims for access token for subject: 50baaad3-7a20-49a2-9556-67bb0c2218c4
2018-07-20 08:50:13.945 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:50:13.945 -06:00 [DBG] Getting claims for identity token for subject: 50baaad3-7a20-49a2-9556-67bb0c2218c4 and client: ideaBox
2018-07-20 08:50:13.945 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 08:50:13.957 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****tuNw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****9Npw"
    }
  ],
  "ActivityId": "0HLFE9V991R3E:00000003",
  "TimeStamp": "2018-07-20T14:50:13Z",
  "ProcessId": 7782,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 08:50:13.957 -06:00 [DBG] Token request success.
2018-07-20 08:50:13.964 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-20 08:50:13.964 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-20 08:50:13.964 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-20 08:50:13.965 -06:00 [DBG] Start userinfo request
2018-07-20 08:50:13.965 -06:00 [DBG] Bearer token found in header
2018-07-20 08:50:13.967 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:50:13.967 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:50:13.968 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-20 08:50:13.969 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532098213,
    "exp": 1532101813,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "50baaad3-7a20-49a2-9556-67bb0c2218c4",
    "auth_time": 1532098211,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-20 08:50:13.969 -06:00 [DBG] Creating userinfo response
2018-07-20 08:50:13.969 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-20 08:50:13.969 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-20 08:50:13.969 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-20 08:50:13.969 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-20 08:50:13.970 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-20 08:50:13.971 -06:00 [DBG] End userinfo request
2018-07-20 08:53:18.992 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-20 08:53:19.022 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-20 08:53:19.025 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-20 08:53:19.025 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-20 08:53:19.025 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-20 08:53:19.025 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-20 08:53:26.623 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-20 08:53:26.653 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-20 08:53:26.656 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-20 08:53:26.656 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-20 08:53:26.656 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-20 08:53:26.656 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-20 08:53:31.548 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-20 08:53:31.662 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-20 08:53:31.662 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-20 08:53:31.666 -06:00 [DBG] Start authorize request
2018-07-20 08:53:31.681 -06:00 [DBG] No user present in authorize request
2018-07-20 08:53:31.685 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:53:31.694 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:53:31.698 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:53:31.699 -06:00 [DBG] No PKCE used.
2018-07-20 08:53:31.729 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:53:31.785 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdyk-75OyTLqHAMCVH5OJFmDLHMKsEyC52Q2Qn1zruAnjP2D7YvG2Saz8XqaoTon-cWZP_L6rib1tt8wUaOS0ric526IyZ2E3EjKDhB000CZn38EMPLh5FHDx-kcF9t_HOJT9qy6CeBP6IgLBGQ_nBy0DF24Q8KRFjAFSXh7369kTJiGJjm5xObhjzZnWikW_IX0cUFv_rzf2vPmEChEovr_28RphbORlWDxE_aEKaQpW5ruecMhxUa02dK6PCZ3k62P0dxktFmZaY-pGsNgPoMMYMWNDP9LG0lPNkmNvnkCCjy4OvM2S6yLZG6cjVjNCU",
  "Nonce": "636676952113268200.MDhhOTNhMmItMDYxYy00MDA2LTg2MjYtZDViZWM4OWVhYzVmYzQ1ZThjMzQtZTY2MC00ZjE0LTljZjktZDYwY2ExZWRkZDdl",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location",
    "response_mode": "form_post",
    "nonce": "636676952113268200.MDhhOTNhMmItMDYxYy00MDA2LTg2MjYtZDViZWM4OWVhYzVmYzQ1ZThjMzQtZTY2MC00ZjE0LTljZjktZDYwY2ExZWRkZDdl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdyk-75OyTLqHAMCVH5OJFmDLHMKsEyC52Q2Qn1zruAnjP2D7YvG2Saz8XqaoTon-cWZP_L6rib1tt8wUaOS0ric526IyZ2E3EjKDhB000CZn38EMPLh5FHDx-kcF9t_HOJT9qy6CeBP6IgLBGQ_nBy0DF24Q8KRFjAFSXh7369kTJiGJjm5xObhjzZnWikW_IX0cUFv_rzf2vPmEChEovr_28RphbORlWDxE_aEKaQpW5ruecMhxUa02dK6PCZ3k62P0dxktFmZaY-pGsNgPoMMYMWNDP9LG0lPNkmNvnkCCjy4OvM2S6yLZG6cjVjNCU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 08:53:31.792 -06:00 [INF] Showing login: User is not authenticated
2018-07-20 08:53:32.131 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:53:32.131 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:53:32.132 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:53:32.132 -06:00 [DBG] No PKCE used.
2018-07-20 08:53:32.132 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:53:32.134 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:53:44.282 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 08:53:45.449 -06:00 [DBG] Augmenting SignInContext
2018-07-20 08:53:45.450 -06:00 [DBG] Adding idp claim with value: local
2018-07-20 08:53:45.450 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-20 08:53:45.450 -06:00 [DBG] Adding auth_time claim with value: 1532098425
2018-07-20 08:53:45.478 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 08:53:45.505 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "f8a748ff-6191-4a18-9d87-422f7d938d57",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFEA27MC5TT:00000003",
  "TimeStamp": "2018-07-20T14:53:45Z",
  "ProcessId": 7885,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 08:53:45.525 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:53:45.526 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:53:45.526 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 08:53:45.526 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 08:53:45.526 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 08:53:45.530 -06:00 [DBG] Start authorize callback request
2018-07-20 08:53:45.533 -06:00 [DBG] User in authorize request: f8a748ff-6191-4a18-9d87-422f7d938d57
2018-07-20 08:53:45.533 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:53:45.533 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:53:45.533 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:53:45.533 -06:00 [DBG] No PKCE used.
2018-07-20 08:53:45.534 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:53:45.534 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "f8a748ff-6191-4a18-9d87-422f7d938d57",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdyk-75OyTLqHAMCVH5OJFmDLHMKsEyC52Q2Qn1zruAnjP2D7YvG2Saz8XqaoTon-cWZP_L6rib1tt8wUaOS0ric526IyZ2E3EjKDhB000CZn38EMPLh5FHDx-kcF9t_HOJT9qy6CeBP6IgLBGQ_nBy0DF24Q8KRFjAFSXh7369kTJiGJjm5xObhjzZnWikW_IX0cUFv_rzf2vPmEChEovr_28RphbORlWDxE_aEKaQpW5ruecMhxUa02dK6PCZ3k62P0dxktFmZaY-pGsNgPoMMYMWNDP9LG0lPNkmNvnkCCjy4OvM2S6yLZG6cjVjNCU",
  "Nonce": "636676952113268200.MDhhOTNhMmItMDYxYy00MDA2LTg2MjYtZDViZWM4OWVhYzVmYzQ1ZThjMzQtZTY2MC00ZjE0LTljZjktZDYwY2ExZWRkZDdl",
  "SessionId": "25aedb25ca6f31ff86779a071eef24b8",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location",
    "response_mode": "form_post",
    "nonce": "636676952113268200.MDhhOTNhMmItMDYxYy00MDA2LTg2MjYtZDViZWM4OWVhYzVmYzQ1ZThjMzQtZTY2MC00ZjE0LTljZjktZDYwY2ExZWRkZDdl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdyk-75OyTLqHAMCVH5OJFmDLHMKsEyC52Q2Qn1zruAnjP2D7YvG2Saz8XqaoTon-cWZP_L6rib1tt8wUaOS0ric526IyZ2E3EjKDhB000CZn38EMPLh5FHDx-kcF9t_HOJT9qy6CeBP6IgLBGQ_nBy0DF24Q8KRFjAFSXh7369kTJiGJjm5xObhjzZnWikW_IX0cUFv_rzf2vPmEChEovr_28RphbORlWDxE_aEKaQpW5ruecMhxUa02dK6PCZ3k62P0dxktFmZaY-pGsNgPoMMYMWNDP9LG0lPNkmNvnkCCjy4OvM2S6yLZG6cjVjNCU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 08:53:45.571 -06:00 [DBG] user_consent grant with value: toDoBox|f8a748ff-6191-4a18-9d87-422f7d938d57 not found in store.
2018-07-20 08:53:45.571 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 08:53:45.571 -06:00 [INF] Showing consent: User has not yet consented
2018-07-20 08:53:45.574 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:53:45.575 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:53:45.600 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:53:45.600 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:53:45.600 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:53:45.600 -06:00 [DBG] No PKCE used.
2018-07-20 08:53:45.601 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:53:45.601 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:53:48.775 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 08:53:48.776 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:53:48.776 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:53:48.798 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:53:48.798 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:53:48.798 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:53:48.798 -06:00 [DBG] No PKCE used.
2018-07-20 08:53:48.799 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:53:48.819 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:53:48.819 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:53:48.819 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 08:53:48.819 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 08:53:48.819 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 08:53:48.819 -06:00 [DBG] Start authorize callback request
2018-07-20 08:53:48.849 -06:00 [DBG] User in authorize request: f8a748ff-6191-4a18-9d87-422f7d938d57
2018-07-20 08:53:48.849 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:53:48.849 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:53:48.849 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:53:48.849 -06:00 [DBG] No PKCE used.
2018-07-20 08:53:48.849 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:53:48.849 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "f8a748ff-6191-4a18-9d87-422f7d938d57",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdyk-75OyTLqHAMCVH5OJFmDLHMKsEyC52Q2Qn1zruAnjP2D7YvG2Saz8XqaoTon-cWZP_L6rib1tt8wUaOS0ric526IyZ2E3EjKDhB000CZn38EMPLh5FHDx-kcF9t_HOJT9qy6CeBP6IgLBGQ_nBy0DF24Q8KRFjAFSXh7369kTJiGJjm5xObhjzZnWikW_IX0cUFv_rzf2vPmEChEovr_28RphbORlWDxE_aEKaQpW5ruecMhxUa02dK6PCZ3k62P0dxktFmZaY-pGsNgPoMMYMWNDP9LG0lPNkmNvnkCCjy4OvM2S6yLZG6cjVjNCU",
  "Nonce": "636676952113268200.MDhhOTNhMmItMDYxYy00MDA2LTg2MjYtZDViZWM4OWVhYzVmYzQ1ZThjMzQtZTY2MC00ZjE0LTljZjktZDYwY2ExZWRkZDdl",
  "SessionId": "25aedb25ca6f31ff86779a071eef24b8",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location",
    "response_mode": "form_post",
    "nonce": "636676952113268200.MDhhOTNhMmItMDYxYy00MDA2LTg2MjYtZDViZWM4OWVhYzVmYzQ1ZThjMzQtZTY2MC00ZjE0LTljZjktZDYwY2ExZWRkZDdl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdyk-75OyTLqHAMCVH5OJFmDLHMKsEyC52Q2Qn1zruAnjP2D7YvG2Saz8XqaoTon-cWZP_L6rib1tt8wUaOS0ric526IyZ2E3EjKDhB000CZn38EMPLh5FHDx-kcF9t_HOJT9qy6CeBP6IgLBGQ_nBy0DF24Q8KRFjAFSXh7369kTJiGJjm5xObhjzZnWikW_IX0cUFv_rzf2vPmEChEovr_28RphbORlWDxE_aEKaQpW5ruecMhxUa02dK6PCZ3k62P0dxktFmZaY-pGsNgPoMMYMWNDP9LG0lPNkmNvnkCCjy4OvM2S6yLZG6cjVjNCU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 08:53:48.851 -06:00 [DBG] user_consent grant with value: toDoBox|f8a748ff-6191-4a18-9d87-422f7d938d57 not found in store.
2018-07-20 08:53:48.851 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 08:53:48.858 -06:00 [INF] User consented to scopes: ["openid","profile","location","email"]
2018-07-20 08:53:48.868 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: f8a748ff-6191-4a18-9d87-422f7d938d57
2018-07-20 08:53:48.875 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-20 08:53:48.895 -06:00 [DBG] Creating Implicit Flow response.
2018-07-20 08:53:48.904 -06:00 [DBG] Getting claims for identity token for subject: f8a748ff-6191-4a18-9d87-422f7d938d57 and client: toDoBox
2018-07-20 08:53:48.906 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 08:53:48.974 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "f8a748ff-6191-4a18-9d87-422f7d938d57",
  "Scopes": "openid profile email location",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****pjXg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****ac23"
    }
  ],
  "ActivityId": "0HLFEA27MC5TT:00000007",
  "TimeStamp": "2018-07-20T14:53:48Z",
  "ProcessId": 7885,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 08:53:48.977 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "f8a748ff-6191-4a18-9d87-422f7d938d57",
  "ClientId": "toDoBox",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdyk-75OyTLqHAMCVH5OJFmDLHMKsEyC52Q2Qn1zruAnjP2D7YvG2Saz8XqaoTon-cWZP_L6rib1tt8wUaOS0ric526IyZ2E3EjKDhB000CZn38EMPLh5FHDx-kcF9t_HOJT9qy6CeBP6IgLBGQ_nBy0DF24Q8KRFjAFSXh7369kTJiGJjm5xObhjzZnWikW_IX0cUFv_rzf2vPmEChEovr_28RphbORlWDxE_aEKaQpW5ruecMhxUa02dK6PCZ3k62P0dxktFmZaY-pGsNgPoMMYMWNDP9LG0lPNkmNvnkCCjy4OvM2S6yLZG6cjVjNCU",
  "Scope": "openid profile email location"
}
2018-07-20 08:53:48.991 -06:00 [DBG] Augmenting SignInContext
2018-07-20 08:53:48.991 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 08:53:49.089 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-20 08:53:49.091 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-20 08:53:49.091 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-20 08:53:49.097 -06:00 [DBG] Start token request.
2018-07-20 08:53:49.103 -06:00 [DBG] Start client validation
2018-07-20 08:53:49.106 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-20 08:53:49.109 -06:00 [DBG] Start parsing for secret in post body
2018-07-20 08:53:49.109 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-20 08:53:49.109 -06:00 [DBG] Secret id found: toDoBox
2018-07-20 08:53:49.109 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:53:49.115 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-20 08:53:49.116 -06:00 [DBG] Client validation success
2018-07-20 08:53:49.118 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "toDoBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFEA27MC5TU:00000001",
  "TimeStamp": "2018-07-20T14:53:49Z",
  "ProcessId": 7885,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 08:53:49.123 -06:00 [DBG] Start token request validation
2018-07-20 08:53:49.130 -06:00 [DBG] Start validation of authorization code token request
2018-07-20 08:53:49.147 -06:00 [DBG] Validation of authorization code token request success
2018-07-20 08:53:49.150 -06:00 [INF] Token request validation success
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "876e829b7b416d2d0c6bb1843acd44f3dd5d0b97ac2389f6f01c825ce36fac23",
  "Raw": {
    "client_id": "toDoBox",
    "client_secret": "***REDACTED***",
    "code": "876e829b7b416d2d0c6bb1843acd44f3dd5d0b97ac2389f6f01c825ce36fac23",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5003/signin-oidc"
  }
}
2018-07-20 08:53:49.161 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:53:49.169 -06:00 [DBG] Getting claims for access token for client: toDoBox
2018-07-20 08:53:49.169 -06:00 [DBG] Getting claims for access token for subject: f8a748ff-6191-4a18-9d87-422f7d938d57
2018-07-20 08:53:49.188 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:53:49.188 -06:00 [DBG] Getting claims for identity token for subject: f8a748ff-6191-4a18-9d87-422f7d938d57 and client: toDoBox
2018-07-20 08:53:49.188 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 08:53:49.201 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile email location",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****iQuQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****eulQ"
    }
  ],
  "ActivityId": "0HLFEA27MC5TU:00000001",
  "TimeStamp": "2018-07-20T14:53:49Z",
  "ProcessId": 7885,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 08:53:49.202 -06:00 [DBG] Token request success.
2018-07-20 08:53:49.211 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-20 08:53:49.211 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-20 08:53:49.212 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-20 08:53:49.218 -06:00 [DBG] Start userinfo request
2018-07-20 08:53:49.220 -06:00 [DBG] Bearer token found in header
2018-07-20 08:53:49.280 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:53:49.283 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 08:53:49.284 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-20 08:53:49.287 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532098429,
    "exp": 1532102029,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "toDoBox",
    "sub": "f8a748ff-6191-4a18-9d87-422f7d938d57",
    "auth_time": 1532098425,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "location",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-20 08:53:49.292 -06:00 [DBG] Creating userinfo response
2018-07-20 08:53:49.295 -06:00 [DBG] Scopes in access token: openid profile location email
2018-07-20 08:53:49.296 -06:00 [DBG] Scopes in access token: openid profile location email
2018-07-20 08:53:49.298 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at curr_location email email_verified
2018-07-20 08:53:49.298 -06:00 [DBG] Scopes in access token: openid profile location email
2018-07-20 08:53:49.300 -06:00 [INF] Profile service returned to the following claim types: sub name given_name family_name email email_verified website curr_location preferred_username
2018-07-20 08:53:49.300 -06:00 [DBG] End userinfo request
2018-07-20 08:53:53.910 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:53:53.910 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:53:53.910 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-20 08:53:53.910 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-20 08:53:53.910 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-20 08:53:53.910 -06:00 [DBG] Start authorize request
2018-07-20 08:53:53.910 -06:00 [DBG] User in authorize request: f8a748ff-6191-4a18-9d87-422f7d938d57
2018-07-20 08:53:53.910 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:53:53.910 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:53:53.910 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:53:53.910 -06:00 [DBG] No PKCE used.
2018-07-20 08:53:53.910 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:53:53.910 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "f8a748ff-6191-4a18-9d87-422f7d938d57",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfKkVgiczs0AWoh43eBiX8q4ZaYa7xEy5zVTYqbso54UvEeHxtaSDNFgCDj8ljgFS-Nxem5P2GELNY8h8_lp2c2v_swTcLe06Apcb-xVmwl9Cq5_cLp7CdN7ZvjABgZ49bB18iIXgrodzCD33xWvPoDZQ3wDTldgij3vfiFPy5Np-I-yg02vrsLspP-jt0tk_pqb16TPCab-Z_p0m9s9UuDHlJHOMLJ4wawXUyfBCqcs3SZ54SHvBaWP_f72MqIebw13BW11OcLl4VAYy1UwksNU4VZms0M7YFwCD95HdLk_X1mfLC-6kaZtV8pCZTS0yw",
  "Nonce": "636676952339064830.NzVlYjdjM2YtYzIwYi00YTViLTg2MzktYmE3Y2EyYmVlYTdkYTYwYmE1NjMtMmFlZC00ZWIzLWFhMWUtMTIyYmZlOGU0MmM3",
  "SessionId": "25aedb25ca6f31ff86779a071eef24b8",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676952339064830.NzVlYjdjM2YtYzIwYi00YTViLTg2MzktYmE3Y2EyYmVlYTdkYTYwYmE1NjMtMmFlZC00ZWIzLWFhMWUtMTIyYmZlOGU0MmM3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfKkVgiczs0AWoh43eBiX8q4ZaYa7xEy5zVTYqbso54UvEeHxtaSDNFgCDj8ljgFS-Nxem5P2GELNY8h8_lp2c2v_swTcLe06Apcb-xVmwl9Cq5_cLp7CdN7ZvjABgZ49bB18iIXgrodzCD33xWvPoDZQ3wDTldgij3vfiFPy5Np-I-yg02vrsLspP-jt0tk_pqb16TPCab-Z_p0m9s9UuDHlJHOMLJ4wawXUyfBCqcs3SZ54SHvBaWP_f72MqIebw13BW11OcLl4VAYy1UwksNU4VZms0M7YFwCD95HdLk_X1mfLC-6kaZtV8pCZTS0yw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 08:53:53.912 -06:00 [DBG] user_consent grant with value: ideaBox|f8a748ff-6191-4a18-9d87-422f7d938d57 not found in store.
2018-07-20 08:53:53.912 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 08:53:53.912 -06:00 [INF] Showing consent: User has not yet consented
2018-07-20 08:53:53.914 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:53:53.914 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:53:53.915 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:53:53.915 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:53:53.915 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:53:53.915 -06:00 [DBG] No PKCE used.
2018-07-20 08:53:53.916 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:53:53.916 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:53:56.425 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 08:53:56.425 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:53:56.426 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:53:56.426 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:53:56.426 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:53:56.426 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:53:56.426 -06:00 [DBG] No PKCE used.
2018-07-20 08:53:56.426 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:53:56.429 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:53:56.429 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 08:53:56.430 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 08:53:56.430 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 08:53:56.430 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 08:53:56.430 -06:00 [DBG] Start authorize callback request
2018-07-20 08:53:56.430 -06:00 [DBG] User in authorize request: f8a748ff-6191-4a18-9d87-422f7d938d57
2018-07-20 08:53:56.430 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 08:53:56.430 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:53:56.430 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 08:53:56.430 -06:00 [DBG] No PKCE used.
2018-07-20 08:53:56.430 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 08:53:56.430 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "f8a748ff-6191-4a18-9d87-422f7d938d57",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfKkVgiczs0AWoh43eBiX8q4ZaYa7xEy5zVTYqbso54UvEeHxtaSDNFgCDj8ljgFS-Nxem5P2GELNY8h8_lp2c2v_swTcLe06Apcb-xVmwl9Cq5_cLp7CdN7ZvjABgZ49bB18iIXgrodzCD33xWvPoDZQ3wDTldgij3vfiFPy5Np-I-yg02vrsLspP-jt0tk_pqb16TPCab-Z_p0m9s9UuDHlJHOMLJ4wawXUyfBCqcs3SZ54SHvBaWP_f72MqIebw13BW11OcLl4VAYy1UwksNU4VZms0M7YFwCD95HdLk_X1mfLC-6kaZtV8pCZTS0yw",
  "Nonce": "636676952339064830.NzVlYjdjM2YtYzIwYi00YTViLTg2MzktYmE3Y2EyYmVlYTdkYTYwYmE1NjMtMmFlZC00ZWIzLWFhMWUtMTIyYmZlOGU0MmM3",
  "SessionId": "25aedb25ca6f31ff86779a071eef24b8",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636676952339064830.NzVlYjdjM2YtYzIwYi00YTViLTg2MzktYmE3Y2EyYmVlYTdkYTYwYmE1NjMtMmFlZC00ZWIzLWFhMWUtMTIyYmZlOGU0MmM3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfKkVgiczs0AWoh43eBiX8q4ZaYa7xEy5zVTYqbso54UvEeHxtaSDNFgCDj8ljgFS-Nxem5P2GELNY8h8_lp2c2v_swTcLe06Apcb-xVmwl9Cq5_cLp7CdN7ZvjABgZ49bB18iIXgrodzCD33xWvPoDZQ3wDTldgij3vfiFPy5Np-I-yg02vrsLspP-jt0tk_pqb16TPCab-Z_p0m9s9UuDHlJHOMLJ4wawXUyfBCqcs3SZ54SHvBaWP_f72MqIebw13BW11OcLl4VAYy1UwksNU4VZms0M7YFwCD95HdLk_X1mfLC-6kaZtV8pCZTS0yw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 08:53:56.431 -06:00 [DBG] user_consent grant with value: ideaBox|f8a748ff-6191-4a18-9d87-422f7d938d57 not found in store.
2018-07-20 08:53:56.431 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 08:53:56.432 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-20 08:53:56.432 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: f8a748ff-6191-4a18-9d87-422f7d938d57
2018-07-20 08:53:56.434 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-20 08:53:56.439 -06:00 [DBG] Creating Implicit Flow response.
2018-07-20 08:53:56.439 -06:00 [DBG] Getting claims for identity token for subject: f8a748ff-6191-4a18-9d87-422f7d938d57 and client: ideaBox
2018-07-20 08:53:56.439 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 08:53:56.450 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "f8a748ff-6191-4a18-9d87-422f7d938d57",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****DnlQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****1c4c"
    }
  ],
  "ActivityId": "0HLFEA27MC5TT:0000000B",
  "TimeStamp": "2018-07-20T14:53:56Z",
  "ProcessId": 7885,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 08:53:56.450 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "f8a748ff-6191-4a18-9d87-422f7d938d57",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfKkVgiczs0AWoh43eBiX8q4ZaYa7xEy5zVTYqbso54UvEeHxtaSDNFgCDj8ljgFS-Nxem5P2GELNY8h8_lp2c2v_swTcLe06Apcb-xVmwl9Cq5_cLp7CdN7ZvjABgZ49bB18iIXgrodzCD33xWvPoDZQ3wDTldgij3vfiFPy5Np-I-yg02vrsLspP-jt0tk_pqb16TPCab-Z_p0m9s9UuDHlJHOMLJ4wawXUyfBCqcs3SZ54SHvBaWP_f72MqIebw13BW11OcLl4VAYy1UwksNU4VZms0M7YFwCD95HdLk_X1mfLC-6kaZtV8pCZTS0yw",
  "Scope": "openid profile business email"
}
2018-07-20 08:53:56.451 -06:00 [DBG] Augmenting SignInContext
2018-07-20 08:53:56.451 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 08:53:56.543 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-20 08:53:56.544 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-20 08:53:56.544 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-20 08:53:56.544 -06:00 [DBG] Start token request.
2018-07-20 08:53:56.544 -06:00 [DBG] Start client validation
2018-07-20 08:53:56.544 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-20 08:53:56.544 -06:00 [DBG] Start parsing for secret in post body
2018-07-20 08:53:56.544 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-20 08:53:56.544 -06:00 [DBG] Secret id found: ideaBox
2018-07-20 08:53:56.544 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:53:56.544 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-20 08:53:56.544 -06:00 [DBG] Client validation success
2018-07-20 08:53:56.544 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFEA27MC5TV:00000001",
  "TimeStamp": "2018-07-20T14:53:56Z",
  "ProcessId": 7885,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 08:53:56.544 -06:00 [DBG] Start token request validation
2018-07-20 08:53:56.544 -06:00 [DBG] Start validation of authorization code token request
2018-07-20 08:53:56.553 -06:00 [DBG] Validation of authorization code token request success
2018-07-20 08:53:56.553 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "46ecd6b71108b8ca435502106301f8e747082e178c91afceb498ad403be41c4c",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "46ecd6b71108b8ca435502106301f8e747082e178c91afceb498ad403be41c4c",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-20 08:53:56.553 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:53:56.553 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-20 08:53:56.553 -06:00 [DBG] Getting claims for access token for subject: f8a748ff-6191-4a18-9d87-422f7d938d57
2018-07-20 08:53:56.566 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:53:56.566 -06:00 [DBG] Getting claims for identity token for subject: f8a748ff-6191-4a18-9d87-422f7d938d57 and client: ideaBox
2018-07-20 08:53:56.566 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 08:53:56.578 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****po6Q"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****ZsVQ"
    }
  ],
  "ActivityId": "0HLFEA27MC5TV:00000001",
  "TimeStamp": "2018-07-20T14:53:56Z",
  "ProcessId": 7885,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 08:53:56.578 -06:00 [DBG] Token request success.
2018-07-20 08:53:56.582 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-20 08:53:56.583 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-20 08:53:56.583 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-20 08:53:56.583 -06:00 [DBG] Start userinfo request
2018-07-20 08:53:56.583 -06:00 [DBG] Bearer token found in header
2018-07-20 08:53:56.585 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:53:56.585 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 08:53:56.586 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-20 08:53:56.586 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532098436,
    "exp": 1532102036,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "f8a748ff-6191-4a18-9d87-422f7d938d57",
    "auth_time": 1532098425,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-20 08:53:56.586 -06:00 [DBG] Creating userinfo response
2018-07-20 08:53:56.586 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-20 08:53:56.586 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-20 08:53:56.587 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_number email email_verified
2018-07-20 08:53:56.587 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-20 08:53:56.588 -06:00 [INF] Profile service returned to the following claim types: sub business_number name given_name family_name email email_verified website preferred_username
2018-07-20 08:53:56.588 -06:00 [DBG] End userinfo request
2018-07-20 09:04:07.907 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-20 09:04:07.937 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-20 09:04:07.939 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-20 09:04:07.939 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-20 09:04:07.940 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-20 09:04:07.940 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-20 09:04:14.590 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-20 09:04:14.621 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-20 09:04:14.623 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-20 09:04:14.623 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-20 09:04:14.623 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-20 09:04:14.624 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-20 09:05:22.336 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-20 09:05:22.451 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-20 09:05:22.451 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-20 09:05:22.454 -06:00 [DBG] Start discovery request
2018-07-20 09:05:22.630 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-20 09:05:22.630 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-20 09:05:22.630 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-20 09:05:22.634 -06:00 [DBG] Start key discovery request
2018-07-20 09:05:22.690 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-20 09:05:22.693 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-20 09:05:22.693 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-20 09:05:22.697 -06:00 [DBG] Start authorize request
2018-07-20 09:05:22.713 -06:00 [DBG] No user present in authorize request
2018-07-20 09:05:22.716 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 09:05:22.725 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 09:05:22.729 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 09:05:22.730 -06:00 [DBG] No PKCE used.
2018-07-20 09:05:22.754 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 09:05:22.765 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email color",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHehmKiM4ww5lolnao98BJjSDPU-VEqBoNbETqUVdi06m47yOC0EKFwQPaRXKKmqt48IBbNsrEVnyqOQha_WjQGb3_Wbzy4srX7vuTvzZkPT9KcAmlrHnOpAAaNvrXODyvYrDNWXLPArrAJAYIvnNn_KFj6BLtiVoLfWNqptr8wx25i7o2dgxdF975lR5iQLWyeiFV5MM1IpncANxs6RuMZXgUXAtUe5d8qVT7zLwf4o-06l5hUG6lqBlC_Bt_Q46Hx9rKM-irzz9dLUyRqEbZpn8DwYgn5aypzZBXdEirosZ6Nhu7BmKX2gU5uGWnGVjko",
  "Nonce": "636676959226676890.ZDczZjA4YjQtZTljZi00NDllLWExNGEtYWVjODg3MTJkZDQ5YmQ3NzA2OTAtZjIxZC00NDY2LWI5MzctNWM3MGI1ODEyNWI0",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email color",
    "response_mode": "form_post",
    "nonce": "636676959226676890.ZDczZjA4YjQtZTljZi00NDllLWExNGEtYWVjODg3MTJkZDQ5YmQ3NzA2OTAtZjIxZC00NDY2LWI5MzctNWM3MGI1ODEyNWI0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHehmKiM4ww5lolnao98BJjSDPU-VEqBoNbETqUVdi06m47yOC0EKFwQPaRXKKmqt48IBbNsrEVnyqOQha_WjQGb3_Wbzy4srX7vuTvzZkPT9KcAmlrHnOpAAaNvrXODyvYrDNWXLPArrAJAYIvnNn_KFj6BLtiVoLfWNqptr8wx25i7o2dgxdF975lR5iQLWyeiFV5MM1IpncANxs6RuMZXgUXAtUe5d8qVT7zLwf4o-06l5hUG6lqBlC_Bt_Q46Hx9rKM-irzz9dLUyRqEbZpn8DwYgn5aypzZBXdEirosZ6Nhu7BmKX2gU5uGWnGVjko",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 09:05:22.771 -06:00 [INF] Showing login: User is not authenticated
2018-07-20 09:05:23.070 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 09:05:23.071 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 09:05:23.071 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 09:05:23.071 -06:00 [DBG] No PKCE used.
2018-07-20 09:05:23.071 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 09:05:23.074 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 09:05:36.125 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 09:05:37.320 -06:00 [DBG] Augmenting SignInContext
2018-07-20 09:05:37.322 -06:00 [DBG] Adding idp claim with value: local
2018-07-20 09:05:37.322 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-20 09:05:37.322 -06:00 [DBG] Adding auth_time claim with value: 1532099137
2018-07-20 09:05:37.351 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 09:05:37.380 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "14158e79-95c4-4150-a513-3d0329463f4d",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFEA8RH1HII:00000003",
  "TimeStamp": "2018-07-20T15:05:37Z",
  "ProcessId": 8021,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 09:05:37.399 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 09:05:37.400 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 09:05:37.400 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 09:05:37.400 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 09:05:37.400 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 09:05:37.404 -06:00 [DBG] Start authorize callback request
2018-07-20 09:05:37.407 -06:00 [DBG] User in authorize request: 14158e79-95c4-4150-a513-3d0329463f4d
2018-07-20 09:05:37.407 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 09:05:37.407 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 09:05:37.407 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 09:05:37.407 -06:00 [DBG] No PKCE used.
2018-07-20 09:05:37.407 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 09:05:37.407 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "14158e79-95c4-4150-a513-3d0329463f4d",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email color",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHehmKiM4ww5lolnao98BJjSDPU-VEqBoNbETqUVdi06m47yOC0EKFwQPaRXKKmqt48IBbNsrEVnyqOQha_WjQGb3_Wbzy4srX7vuTvzZkPT9KcAmlrHnOpAAaNvrXODyvYrDNWXLPArrAJAYIvnNn_KFj6BLtiVoLfWNqptr8wx25i7o2dgxdF975lR5iQLWyeiFV5MM1IpncANxs6RuMZXgUXAtUe5d8qVT7zLwf4o-06l5hUG6lqBlC_Bt_Q46Hx9rKM-irzz9dLUyRqEbZpn8DwYgn5aypzZBXdEirosZ6Nhu7BmKX2gU5uGWnGVjko",
  "Nonce": "636676959226676890.ZDczZjA4YjQtZTljZi00NDllLWExNGEtYWVjODg3MTJkZDQ5YmQ3NzA2OTAtZjIxZC00NDY2LWI5MzctNWM3MGI1ODEyNWI0",
  "SessionId": "3f222ef2c6d4ce95fb57cdf92e2884f3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email color",
    "response_mode": "form_post",
    "nonce": "636676959226676890.ZDczZjA4YjQtZTljZi00NDllLWExNGEtYWVjODg3MTJkZDQ5YmQ3NzA2OTAtZjIxZC00NDY2LWI5MzctNWM3MGI1ODEyNWI0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHehmKiM4ww5lolnao98BJjSDPU-VEqBoNbETqUVdi06m47yOC0EKFwQPaRXKKmqt48IBbNsrEVnyqOQha_WjQGb3_Wbzy4srX7vuTvzZkPT9KcAmlrHnOpAAaNvrXODyvYrDNWXLPArrAJAYIvnNn_KFj6BLtiVoLfWNqptr8wx25i7o2dgxdF975lR5iQLWyeiFV5MM1IpncANxs6RuMZXgUXAtUe5d8qVT7zLwf4o-06l5hUG6lqBlC_Bt_Q46Hx9rKM-irzz9dLUyRqEbZpn8DwYgn5aypzZBXdEirosZ6Nhu7BmKX2gU5uGWnGVjko",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 09:05:37.445 -06:00 [DBG] user_consent grant with value: ideaBox|14158e79-95c4-4150-a513-3d0329463f4d not found in store.
2018-07-20 09:05:37.445 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 09:05:37.445 -06:00 [INF] Showing consent: User has not yet consented
2018-07-20 09:05:37.448 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 09:05:37.449 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 09:05:37.475 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 09:05:37.475 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 09:05:37.475 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 09:05:37.475 -06:00 [DBG] No PKCE used.
2018-07-20 09:05:37.475 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 09:05:37.475 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 09:05:42.375 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 09:05:42.375 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 09:05:42.376 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 09:05:42.398 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 09:05:42.398 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 09:05:42.398 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 09:05:42.398 -06:00 [DBG] No PKCE used.
2018-07-20 09:05:42.398 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 09:05:42.413 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 09:05:42.413 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 09:05:42.414 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 09:05:42.414 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 09:05:42.414 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 09:05:42.414 -06:00 [DBG] Start authorize callback request
2018-07-20 09:05:42.440 -06:00 [DBG] User in authorize request: 14158e79-95c4-4150-a513-3d0329463f4d
2018-07-20 09:05:42.440 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 09:05:42.440 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 09:05:42.440 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 09:05:42.440 -06:00 [DBG] No PKCE used.
2018-07-20 09:05:42.440 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 09:05:42.440 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "14158e79-95c4-4150-a513-3d0329463f4d",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email color",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHehmKiM4ww5lolnao98BJjSDPU-VEqBoNbETqUVdi06m47yOC0EKFwQPaRXKKmqt48IBbNsrEVnyqOQha_WjQGb3_Wbzy4srX7vuTvzZkPT9KcAmlrHnOpAAaNvrXODyvYrDNWXLPArrAJAYIvnNn_KFj6BLtiVoLfWNqptr8wx25i7o2dgxdF975lR5iQLWyeiFV5MM1IpncANxs6RuMZXgUXAtUe5d8qVT7zLwf4o-06l5hUG6lqBlC_Bt_Q46Hx9rKM-irzz9dLUyRqEbZpn8DwYgn5aypzZBXdEirosZ6Nhu7BmKX2gU5uGWnGVjko",
  "Nonce": "636676959226676890.ZDczZjA4YjQtZTljZi00NDllLWExNGEtYWVjODg3MTJkZDQ5YmQ3NzA2OTAtZjIxZC00NDY2LWI5MzctNWM3MGI1ODEyNWI0",
  "SessionId": "3f222ef2c6d4ce95fb57cdf92e2884f3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email color",
    "response_mode": "form_post",
    "nonce": "636676959226676890.ZDczZjA4YjQtZTljZi00NDllLWExNGEtYWVjODg3MTJkZDQ5YmQ3NzA2OTAtZjIxZC00NDY2LWI5MzctNWM3MGI1ODEyNWI0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHehmKiM4ww5lolnao98BJjSDPU-VEqBoNbETqUVdi06m47yOC0EKFwQPaRXKKmqt48IBbNsrEVnyqOQha_WjQGb3_Wbzy4srX7vuTvzZkPT9KcAmlrHnOpAAaNvrXODyvYrDNWXLPArrAJAYIvnNn_KFj6BLtiVoLfWNqptr8wx25i7o2dgxdF975lR5iQLWyeiFV5MM1IpncANxs6RuMZXgUXAtUe5d8qVT7zLwf4o-06l5hUG6lqBlC_Bt_Q46Hx9rKM-irzz9dLUyRqEbZpn8DwYgn5aypzZBXdEirosZ6Nhu7BmKX2gU5uGWnGVjko",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 09:05:42.442 -06:00 [DBG] user_consent grant with value: ideaBox|14158e79-95c4-4150-a513-3d0329463f4d not found in store.
2018-07-20 09:05:42.442 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 09:05:42.448 -06:00 [INF] User consented to scopes: ["openid","profile","business","email","color"]
2018-07-20 09:05:42.458 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 14158e79-95c4-4150-a513-3d0329463f4d
2018-07-20 09:05:42.464 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-20 09:05:42.484 -06:00 [DBG] Creating Implicit Flow response.
2018-07-20 09:05:42.493 -06:00 [DBG] Getting claims for identity token for subject: 14158e79-95c4-4150-a513-3d0329463f4d and client: ideaBox
2018-07-20 09:05:42.495 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 09:05:42.564 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "14158e79-95c4-4150-a513-3d0329463f4d",
  "Scopes": "openid profile business email color",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****jkWA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****0f70"
    }
  ],
  "ActivityId": "0HLFEA8RH1HII:00000007",
  "TimeStamp": "2018-07-20T15:05:42Z",
  "ProcessId": 8021,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 09:05:42.566 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "14158e79-95c4-4150-a513-3d0329463f4d",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHehmKiM4ww5lolnao98BJjSDPU-VEqBoNbETqUVdi06m47yOC0EKFwQPaRXKKmqt48IBbNsrEVnyqOQha_WjQGb3_Wbzy4srX7vuTvzZkPT9KcAmlrHnOpAAaNvrXODyvYrDNWXLPArrAJAYIvnNn_KFj6BLtiVoLfWNqptr8wx25i7o2dgxdF975lR5iQLWyeiFV5MM1IpncANxs6RuMZXgUXAtUe5d8qVT7zLwf4o-06l5hUG6lqBlC_Bt_Q46Hx9rKM-irzz9dLUyRqEbZpn8DwYgn5aypzZBXdEirosZ6Nhu7BmKX2gU5uGWnGVjko",
  "Scope": "openid profile business email color"
}
2018-07-20 09:05:42.581 -06:00 [DBG] Augmenting SignInContext
2018-07-20 09:05:42.581 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 09:05:42.692 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-20 09:05:42.694 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-20 09:05:42.694 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-20 09:05:42.701 -06:00 [DBG] Start token request.
2018-07-20 09:05:42.706 -06:00 [DBG] Start client validation
2018-07-20 09:05:42.710 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-20 09:05:42.712 -06:00 [DBG] Start parsing for secret in post body
2018-07-20 09:05:42.713 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-20 09:05:42.713 -06:00 [DBG] Secret id found: ideaBox
2018-07-20 09:05:42.713 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 09:05:42.719 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-20 09:05:42.719 -06:00 [DBG] Client validation success
2018-07-20 09:05:42.722 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFEA8RH1HIH:00000003",
  "TimeStamp": "2018-07-20T15:05:42Z",
  "ProcessId": 8021,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 09:05:42.726 -06:00 [DBG] Start token request validation
2018-07-20 09:05:42.735 -06:00 [DBG] Start validation of authorization code token request
2018-07-20 09:05:42.753 -06:00 [DBG] Validation of authorization code token request success
2018-07-20 09:05:42.756 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "0c20da81ae5f7bd8208f787f3c59115929928fee5ed51a99bea2992b7e830f70",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "0c20da81ae5f7bd8208f787f3c59115929928fee5ed51a99bea2992b7e830f70",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-20 09:05:42.768 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 09:05:42.776 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-20 09:05:42.776 -06:00 [DBG] Getting claims for access token for subject: 14158e79-95c4-4150-a513-3d0329463f4d
2018-07-20 09:05:42.794 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 09:05:42.797 -06:00 [DBG] Getting claims for identity token for subject: 14158e79-95c4-4150-a513-3d0329463f4d and client: ideaBox
2018-07-20 09:05:42.798 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 09:05:42.811 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email color",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****jHDA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****qMwA"
    }
  ],
  "ActivityId": "0HLFEA8RH1HIH:00000003",
  "TimeStamp": "2018-07-20T15:05:42Z",
  "ProcessId": 8021,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 09:05:42.812 -06:00 [DBG] Token request success.
2018-07-20 09:05:42.824 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-20 09:05:42.825 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-20 09:05:42.825 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-20 09:05:42.830 -06:00 [DBG] Start userinfo request
2018-07-20 09:05:42.832 -06:00 [DBG] Bearer token found in header
2018-07-20 09:05:42.889 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 09:05:42.891 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 09:05:42.893 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-20 09:05:42.895 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532099142,
    "exp": 1532102742,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "14158e79-95c4-4150-a513-3d0329463f4d",
    "auth_time": 1532099137,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email",
      "color"
    ],
    "amr": "pwd"
  }
}
2018-07-20 09:05:42.900 -06:00 [DBG] Creating userinfo response
2018-07-20 09:05:42.903 -06:00 [DBG] Scopes in access token: openid profile business email color
2018-07-20 09:05:42.905 -06:00 [DBG] Scopes in access token: openid profile business email color
2018-07-20 09:05:42.907 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name email email_verified fav_color
2018-07-20 09:05:42.907 -06:00 [DBG] Scopes in access token: openid profile business email color
2018-07-20 09:05:42.909 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-20 09:05:42.909 -06:00 [DBG] End userinfo request
2018-07-20 09:05:54.526 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-20 09:05:54.526 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-20 09:05:54.526 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-20 09:05:54.526 -06:00 [DBG] Start discovery request
2018-07-20 09:05:54.591 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-20 09:05:54.591 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-20 09:05:54.591 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-20 09:05:54.591 -06:00 [DBG] Start key discovery request
2018-07-20 09:05:54.617 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 09:05:54.617 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 09:05:54.617 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-20 09:05:54.617 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-20 09:05:54.617 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-20 09:05:54.617 -06:00 [DBG] Start authorize request
2018-07-20 09:05:54.618 -06:00 [DBG] User in authorize request: 14158e79-95c4-4150-a513-3d0329463f4d
2018-07-20 09:05:54.618 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 09:05:54.618 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 09:05:54.618 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 09:05:54.618 -06:00 [DBG] No PKCE used.
2018-07-20 09:05:54.618 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 09:05:54.618 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "14158e79-95c4-4150-a513-3d0329463f4d",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location color",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHec5_4Mf30Sa3Y-Qm2e1qsgQNzl4nZw3HBTDuPVVZQnZHhb9K9LYiEqlLb7EXSF8twrvIYy-pAFmE5yqOvM1O1pcUxsHEMpfeiPidtwNKqTAooun-mpXf5RWw7wPkqiSZTL7YhUObgpq9lI8tlqXDIXL_KktQiAIZtROHdL4JlRiDO1zTcxC7KZXf3N47ln4uZIjWROnzHzFzbtgewDztU3xeuAlF49qv2oeeA9Yy3cCYP5MWYHuQnzO8kJs6qyLtKemzX32njhyvKkP1zYLpxQpA1AFdnCs5yG9BLwDQkU3rjErj7DduitEO0Ah6-_-E8",
  "Nonce": "636676959546057590.MWU2YzJkZTYtNjU5Zi00ZWY3LTg5M2ItOWQ0M2JmZDFhNDNkNTZhNDI1ODEtYTQxNy00ZWQxLWI0NzUtMTc1ZDI0MjliMmZj",
  "SessionId": "3f222ef2c6d4ce95fb57cdf92e2884f3",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location color",
    "response_mode": "form_post",
    "nonce": "636676959546057590.MWU2YzJkZTYtNjU5Zi00ZWY3LTg5M2ItOWQ0M2JmZDFhNDNkNTZhNDI1ODEtYTQxNy00ZWQxLWI0NzUtMTc1ZDI0MjliMmZj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHec5_4Mf30Sa3Y-Qm2e1qsgQNzl4nZw3HBTDuPVVZQnZHhb9K9LYiEqlLb7EXSF8twrvIYy-pAFmE5yqOvM1O1pcUxsHEMpfeiPidtwNKqTAooun-mpXf5RWw7wPkqiSZTL7YhUObgpq9lI8tlqXDIXL_KktQiAIZtROHdL4JlRiDO1zTcxC7KZXf3N47ln4uZIjWROnzHzFzbtgewDztU3xeuAlF49qv2oeeA9Yy3cCYP5MWYHuQnzO8kJs6qyLtKemzX32njhyvKkP1zYLpxQpA1AFdnCs5yG9BLwDQkU3rjErj7DduitEO0Ah6-_-E8",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 09:05:54.619 -06:00 [DBG] user_consent grant with value: toDoBox|14158e79-95c4-4150-a513-3d0329463f4d not found in store.
2018-07-20 09:05:54.619 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 09:05:54.619 -06:00 [INF] Showing consent: User has not yet consented
2018-07-20 09:05:54.622 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 09:05:54.622 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 09:05:54.623 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 09:05:54.623 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 09:05:54.623 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 09:05:54.623 -06:00 [DBG] No PKCE used.
2018-07-20 09:05:54.623 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 09:05:54.624 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 09:06:01.567 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 09:06:01.567 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 09:06:01.567 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 09:06:01.568 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 09:06:01.568 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 09:06:01.568 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 09:06:01.568 -06:00 [DBG] No PKCE used.
2018-07-20 09:06:01.568 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 09:06:01.571 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 09:06:01.571 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 09:06:01.572 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 09:06:01.572 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 09:06:01.572 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 09:06:01.572 -06:00 [DBG] Start authorize callback request
2018-07-20 09:06:01.572 -06:00 [DBG] User in authorize request: 14158e79-95c4-4150-a513-3d0329463f4d
2018-07-20 09:06:01.572 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 09:06:01.572 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 09:06:01.572 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 09:06:01.572 -06:00 [DBG] No PKCE used.
2018-07-20 09:06:01.573 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 09:06:01.573 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "14158e79-95c4-4150-a513-3d0329463f4d",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location color",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHec5_4Mf30Sa3Y-Qm2e1qsgQNzl4nZw3HBTDuPVVZQnZHhb9K9LYiEqlLb7EXSF8twrvIYy-pAFmE5yqOvM1O1pcUxsHEMpfeiPidtwNKqTAooun-mpXf5RWw7wPkqiSZTL7YhUObgpq9lI8tlqXDIXL_KktQiAIZtROHdL4JlRiDO1zTcxC7KZXf3N47ln4uZIjWROnzHzFzbtgewDztU3xeuAlF49qv2oeeA9Yy3cCYP5MWYHuQnzO8kJs6qyLtKemzX32njhyvKkP1zYLpxQpA1AFdnCs5yG9BLwDQkU3rjErj7DduitEO0Ah6-_-E8",
  "Nonce": "636676959546057590.MWU2YzJkZTYtNjU5Zi00ZWY3LTg5M2ItOWQ0M2JmZDFhNDNkNTZhNDI1ODEtYTQxNy00ZWQxLWI0NzUtMTc1ZDI0MjliMmZj",
  "SessionId": "3f222ef2c6d4ce95fb57cdf92e2884f3",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location color",
    "response_mode": "form_post",
    "nonce": "636676959546057590.MWU2YzJkZTYtNjU5Zi00ZWY3LTg5M2ItOWQ0M2JmZDFhNDNkNTZhNDI1ODEtYTQxNy00ZWQxLWI0NzUtMTc1ZDI0MjliMmZj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHec5_4Mf30Sa3Y-Qm2e1qsgQNzl4nZw3HBTDuPVVZQnZHhb9K9LYiEqlLb7EXSF8twrvIYy-pAFmE5yqOvM1O1pcUxsHEMpfeiPidtwNKqTAooun-mpXf5RWw7wPkqiSZTL7YhUObgpq9lI8tlqXDIXL_KktQiAIZtROHdL4JlRiDO1zTcxC7KZXf3N47ln4uZIjWROnzHzFzbtgewDztU3xeuAlF49qv2oeeA9Yy3cCYP5MWYHuQnzO8kJs6qyLtKemzX32njhyvKkP1zYLpxQpA1AFdnCs5yG9BLwDQkU3rjErj7DduitEO0Ah6-_-E8",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 09:06:01.574 -06:00 [DBG] user_consent grant with value: toDoBox|14158e79-95c4-4150-a513-3d0329463f4d not found in store.
2018-07-20 09:06:01.574 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 09:06:01.574 -06:00 [INF] User consented to scopes: ["openid","profile","location","email","color"]
2018-07-20 09:06:01.574 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 14158e79-95c4-4150-a513-3d0329463f4d
2018-07-20 09:06:01.574 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-20 09:06:01.579 -06:00 [DBG] Creating Implicit Flow response.
2018-07-20 09:06:01.579 -06:00 [DBG] Getting claims for identity token for subject: 14158e79-95c4-4150-a513-3d0329463f4d and client: toDoBox
2018-07-20 09:06:01.579 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 09:06:01.591 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "14158e79-95c4-4150-a513-3d0329463f4d",
  "Scopes": "openid profile email location color",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****cmwg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****e192"
    }
  ],
  "ActivityId": "0HLFEA8RH1HII:0000000B",
  "TimeStamp": "2018-07-20T15:06:01Z",
  "ProcessId": 8021,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 09:06:01.591 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "14158e79-95c4-4150-a513-3d0329463f4d",
  "ClientId": "toDoBox",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHec5_4Mf30Sa3Y-Qm2e1qsgQNzl4nZw3HBTDuPVVZQnZHhb9K9LYiEqlLb7EXSF8twrvIYy-pAFmE5yqOvM1O1pcUxsHEMpfeiPidtwNKqTAooun-mpXf5RWw7wPkqiSZTL7YhUObgpq9lI8tlqXDIXL_KktQiAIZtROHdL4JlRiDO1zTcxC7KZXf3N47ln4uZIjWROnzHzFzbtgewDztU3xeuAlF49qv2oeeA9Yy3cCYP5MWYHuQnzO8kJs6qyLtKemzX32njhyvKkP1zYLpxQpA1AFdnCs5yG9BLwDQkU3rjErj7DduitEO0Ah6-_-E8",
  "Scope": "openid profile email location color"
}
2018-07-20 09:06:01.592 -06:00 [DBG] Augmenting SignInContext
2018-07-20 09:06:01.592 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 09:06:01.693 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-20 09:06:01.693 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-20 09:06:01.693 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-20 09:06:01.694 -06:00 [DBG] Start token request.
2018-07-20 09:06:01.694 -06:00 [DBG] Start client validation
2018-07-20 09:06:01.694 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-20 09:06:01.694 -06:00 [DBG] Start parsing for secret in post body
2018-07-20 09:06:01.694 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-20 09:06:01.694 -06:00 [DBG] Secret id found: toDoBox
2018-07-20 09:06:01.694 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 09:06:01.694 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-20 09:06:01.694 -06:00 [DBG] Client validation success
2018-07-20 09:06:01.694 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "toDoBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFEA8RH1HIJ:00000003",
  "TimeStamp": "2018-07-20T15:06:01Z",
  "ProcessId": 8021,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 09:06:01.694 -06:00 [DBG] Start token request validation
2018-07-20 09:06:01.694 -06:00 [DBG] Start validation of authorization code token request
2018-07-20 09:06:01.702 -06:00 [DBG] Validation of authorization code token request success
2018-07-20 09:06:01.703 -06:00 [INF] Token request validation success
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "c273d9e2b69b517c1b08708d2e620cc1472f9933b4e87e9166b1d6a0fe44e192",
  "Raw": {
    "client_id": "toDoBox",
    "client_secret": "***REDACTED***",
    "code": "c273d9e2b69b517c1b08708d2e620cc1472f9933b4e87e9166b1d6a0fe44e192",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5003/signin-oidc"
  }
}
2018-07-20 09:06:01.703 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 09:06:01.703 -06:00 [DBG] Getting claims for access token for client: toDoBox
2018-07-20 09:06:01.703 -06:00 [DBG] Getting claims for access token for subject: 14158e79-95c4-4150-a513-3d0329463f4d
2018-07-20 09:06:01.716 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 09:06:01.716 -06:00 [DBG] Getting claims for identity token for subject: 14158e79-95c4-4150-a513-3d0329463f4d and client: toDoBox
2018-07-20 09:06:01.716 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 09:06:01.728 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile email location color",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****8GyQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****jSuw"
    }
  ],
  "ActivityId": "0HLFEA8RH1HIJ:00000003",
  "TimeStamp": "2018-07-20T15:06:01Z",
  "ProcessId": 8021,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 09:06:01.728 -06:00 [DBG] Token request success.
2018-07-20 09:06:01.737 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-20 09:06:01.738 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-20 09:06:01.738 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-20 09:06:01.738 -06:00 [DBG] Start userinfo request
2018-07-20 09:06:01.738 -06:00 [DBG] Bearer token found in header
2018-07-20 09:06:01.740 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 09:06:01.740 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-07-20 09:06:01.742 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-20 09:06:01.742 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532099161,
    "exp": 1532102761,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "toDoBox",
    "sub": "14158e79-95c4-4150-a513-3d0329463f4d",
    "auth_time": 1532099137,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "location",
      "email",
      "color"
    ],
    "amr": "pwd"
  }
}
2018-07-20 09:06:01.743 -06:00 [DBG] Creating userinfo response
2018-07-20 09:06:01.743 -06:00 [DBG] Scopes in access token: openid profile location email color
2018-07-20 09:06:01.743 -06:00 [DBG] Scopes in access token: openid profile location email color
2018-07-20 09:06:01.743 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at curr_location email email_verified fav_color
2018-07-20 09:06:01.743 -06:00 [DBG] Scopes in access token: openid profile location email color
2018-07-20 09:06:01.744 -06:00 [INF] Profile service returned to the following claim types: sub fav_color curr_location name given_name family_name email email_verified website preferred_username
2018-07-20 09:06:01.744 -06:00 [DBG] End userinfo request
2018-07-20 14:31:19.458 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-20 14:31:19.489 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-20 14:31:19.491 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-20 14:31:19.492 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-20 14:31:19.492 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-20 14:31:19.492 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-20 14:31:40.131 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-20 14:31:40.246 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-20 14:31:40.246 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-20 14:31:40.249 -06:00 [DBG] Start discovery request
2018-07-20 14:31:40.422 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-20 14:31:40.422 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-20 14:31:40.423 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-20 14:31:40.426 -06:00 [DBG] Start key discovery request
2018-07-20 14:31:40.498 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-20 14:31:40.501 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-20 14:31:40.501 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-20 14:31:40.504 -06:00 [DBG] Start authorize request
2018-07-20 14:31:40.520 -06:00 [DBG] No user present in authorize request
2018-07-20 14:31:40.524 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:31:40.536 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:31:40.540 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:31:40.541 -06:00 [DBG] No PKCE used.
2018-07-20 14:31:40.567 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:31:40.576 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe9XkekAl1B6hNgJS0_F2JYZ2PWzyyeswowBKq6DdOwOeqpIuWlhWtsE0f5nF488YPvYedJSBMSno3oJE8Pz4pgR4cuvV8BR9ZalTJtvNlDTA9tVtWPyT4Haerq_blZtiETRbAVfWeA8B001n0qGlGz3PERRFi82y2DpU4a4WOnTDqReuLsReEsy3NzTEqMJw2eRSvgYzd1FONzNnfLSWUp1YdigvgSlRz1tm5L4xh1NjQMN7UvhujnXTcWnzl7nW9XY5tsk5C_9nN3OX0YFW3HY8pVJtNyQ-iH-zh6nToaJ_lU8XQr372duuIgLqH3iwE",
  "Nonce": "636677155004590190.Yzc5MGE5ZDgtYTI1My00NDgzLTg1YmUtNzZiZTk1YzM2YWZlZjJlMDc0OWItYWE1ZC00MzExLWJjZjItZGU5NGRkMjdlNGY5",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636677155004590190.Yzc5MGE5ZDgtYTI1My00NDgzLTg1YmUtNzZiZTk1YzM2YWZlZjJlMDc0OWItYWE1ZC00MzExLWJjZjItZGU5NGRkMjdlNGY5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe9XkekAl1B6hNgJS0_F2JYZ2PWzyyeswowBKq6DdOwOeqpIuWlhWtsE0f5nF488YPvYedJSBMSno3oJE8Pz4pgR4cuvV8BR9ZalTJtvNlDTA9tVtWPyT4Haerq_blZtiETRbAVfWeA8B001n0qGlGz3PERRFi82y2DpU4a4WOnTDqReuLsReEsy3NzTEqMJw2eRSvgYzd1FONzNnfLSWUp1YdigvgSlRz1tm5L4xh1NjQMN7UvhujnXTcWnzl7nW9XY5tsk5C_9nN3OX0YFW3HY8pVJtNyQ-iH-zh6nToaJ_lU8XQr372duuIgLqH3iwE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 14:31:40.582 -06:00 [INF] Showing login: User is not authenticated
2018-07-20 14:31:40.873 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:31:40.873 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:31:40.874 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:31:40.874 -06:00 [DBG] No PKCE used.
2018-07-20 14:31:40.874 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:31:40.876 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:31:43.743 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-20 14:31:43.743 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-20 14:31:43.743 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-20 14:31:43.743 -06:00 [DBG] Start authorize request
2018-07-20 14:31:43.743 -06:00 [DBG] No user present in authorize request
2018-07-20 14:31:43.743 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:31:43.743 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:31:43.743 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:31:43.744 -06:00 [DBG] No PKCE used.
2018-07-20 14:31:43.744 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:31:43.744 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHej_9cxDm1g8-KBDi0IE8dhIT4s-u0E--wAED-RKAhvI95Pu0ze4jGYEeW5FhVw_O45-8I1SCyVzn7uooNVJuVfMl0fKwaibTbB3aGvdJNPJsMCNOt2ib8wqM_XRSL9bWaNIqEM1iDthm3kSsGBqwujCsvze1trvJYCERkNY7DDSt4Jtm7vAa9-9ufKK5cNgUbaX6uhUaeznpxilSE_vkOZEJw50hMzNBvo7r0ziinyiWq95rBrlgUiLSCMoMBeiGbMNDD4g3LWtAlYHAc7kd8maawpzpsZlrXsoszPMOprXdGBRtRpP3zSFqNP1hIuork",
  "Nonce": "636677155037405920.NjY0M2VhZTktMzljNS00MDcyLWEwNTctZTM0MDM3Yjc2MmM5MTU3Mzk0MmYtY2RiNS00NGQwLTk0ZTEtNmU1OWIyYzVmMTY5",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636677155037405920.NjY0M2VhZTktMzljNS00MDcyLWEwNTctZTM0MDM3Yjc2MmM5MTU3Mzk0MmYtY2RiNS00NGQwLTk0ZTEtNmU1OWIyYzVmMTY5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHej_9cxDm1g8-KBDi0IE8dhIT4s-u0E--wAED-RKAhvI95Pu0ze4jGYEeW5FhVw_O45-8I1SCyVzn7uooNVJuVfMl0fKwaibTbB3aGvdJNPJsMCNOt2ib8wqM_XRSL9bWaNIqEM1iDthm3kSsGBqwujCsvze1trvJYCERkNY7DDSt4Jtm7vAa9-9ufKK5cNgUbaX6uhUaeznpxilSE_vkOZEJw50hMzNBvo7r0ziinyiWq95rBrlgUiLSCMoMBeiGbMNDD4g3LWtAlYHAc7kd8maawpzpsZlrXsoszPMOprXdGBRtRpP3zSFqNP1hIuork",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 14:31:43.744 -06:00 [INF] Showing login: User is not authenticated
2018-07-20 14:31:43.751 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:31:43.751 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:31:43.751 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:31:43.751 -06:00 [DBG] No PKCE used.
2018-07-20 14:31:43.752 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:31:43.752 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:32:02.137 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-20 14:32:02.166 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-20 14:32:02.168 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-20 14:32:02.169 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-20 14:32:02.169 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-20 14:32:02.169 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-20 14:32:06.003 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:32:06.016 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:32:06.020 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:32:06.021 -06:00 [DBG] No PKCE used.
2018-07-20 14:32:06.048 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:32:06.050 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:32:13.247 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-20 14:32:13.251 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-20 14:32:13.251 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-20 14:32:13.254 -06:00 [DBG] Start authorize request
2018-07-20 14:32:13.259 -06:00 [DBG] No user present in authorize request
2018-07-20 14:32:13.259 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:32:13.259 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:32:13.259 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:32:13.259 -06:00 [DBG] No PKCE used.
2018-07-20 14:32:13.259 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:32:13.317 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf3Rakg3kFu9ULHS6LY_U9AuQI7pRjZ7xqRgFMTcpRQL4wCfU6TT_7Hw2H2GvyFa6Hq6AIm9H-9asSIZAIDB1wZu4F55AMczsq8cC6bzX0uPqgHvhBiktWuLBurhRn1VmNx8nGT6E1bJhIjFkUg5C2x1_pqEPjTGbSF8Sp0Q4kkGekOnItbzsAr8XIPpUs7mxDaJzHs_LWBvxECWxFBBHeF8-j1ZTBaSvCs8Rt6INhT3_K0Z4truGeNNpuY7n8NwA77Krt8MaWTt_25U5_1eDetRClJeOfh-Cbr9HTlpRJuBRYhiupv9XCIZBI4HPv9pCM",
  "Nonce": "636677155332393900.YmNhZGVjNjktYjRmOS00MTAzLTliZWEtNzg5YTA1NTkwNDJjOGY3ZjNlM2UtZjI4NS00M2NkLTk2NzAtNGIxZTEyZjZjYWUz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636677155332393900.YmNhZGVjNjktYjRmOS00MTAzLTliZWEtNzg5YTA1NTkwNDJjOGY3ZjNlM2UtZjI4NS00M2NkLTk2NzAtNGIxZTEyZjZjYWUz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf3Rakg3kFu9ULHS6LY_U9AuQI7pRjZ7xqRgFMTcpRQL4wCfU6TT_7Hw2H2GvyFa6Hq6AIm9H-9asSIZAIDB1wZu4F55AMczsq8cC6bzX0uPqgHvhBiktWuLBurhRn1VmNx8nGT6E1bJhIjFkUg5C2x1_pqEPjTGbSF8Sp0Q4kkGekOnItbzsAr8XIPpUs7mxDaJzHs_LWBvxECWxFBBHeF8-j1ZTBaSvCs8Rt6INhT3_K0Z4truGeNNpuY7n8NwA77Krt8MaWTt_25U5_1eDetRClJeOfh-Cbr9HTlpRJuBRYhiupv9XCIZBI4HPv9pCM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 14:32:13.323 -06:00 [INF] Showing login: User is not authenticated
2018-07-20 14:32:13.338 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:32:13.338 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:32:13.338 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:32:13.338 -06:00 [DBG] No PKCE used.
2018-07-20 14:32:13.338 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:32:13.338 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:32:19.952 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 14:32:21.098 -06:00 [DBG] Augmenting SignInContext
2018-07-20 14:32:21.099 -06:00 [DBG] Adding idp claim with value: local
2018-07-20 14:32:21.099 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-20 14:32:21.100 -06:00 [DBG] Adding auth_time claim with value: 1532118741
2018-07-20 14:32:21.137 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 14:32:21.164 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "69b5a305-c19b-48ca-b932-b9f562466943",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFEFVDO6QU1:00000004",
  "TimeStamp": "2018-07-20T20:32:21Z",
  "ProcessId": 9376,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:32:21.182 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:32:21.183 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:32:21.183 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 14:32:21.183 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 14:32:21.183 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 14:32:21.187 -06:00 [DBG] Start authorize callback request
2018-07-20 14:32:21.190 -06:00 [DBG] User in authorize request: 69b5a305-c19b-48ca-b932-b9f562466943
2018-07-20 14:32:21.190 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:32:21.190 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:32:21.190 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:32:21.190 -06:00 [DBG] No PKCE used.
2018-07-20 14:32:21.190 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:32:21.190 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "69b5a305-c19b-48ca-b932-b9f562466943",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf3Rakg3kFu9ULHS6LY_U9AuQI7pRjZ7xqRgFMTcpRQL4wCfU6TT_7Hw2H2GvyFa6Hq6AIm9H-9asSIZAIDB1wZu4F55AMczsq8cC6bzX0uPqgHvhBiktWuLBurhRn1VmNx8nGT6E1bJhIjFkUg5C2x1_pqEPjTGbSF8Sp0Q4kkGekOnItbzsAr8XIPpUs7mxDaJzHs_LWBvxECWxFBBHeF8-j1ZTBaSvCs8Rt6INhT3_K0Z4truGeNNpuY7n8NwA77Krt8MaWTt_25U5_1eDetRClJeOfh-Cbr9HTlpRJuBRYhiupv9XCIZBI4HPv9pCM",
  "Nonce": "636677155332393900.YmNhZGVjNjktYjRmOS00MTAzLTliZWEtNzg5YTA1NTkwNDJjOGY3ZjNlM2UtZjI4NS00M2NkLTk2NzAtNGIxZTEyZjZjYWUz",
  "SessionId": "2ab7b876efd407a60ed0d36f28db5473",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636677155332393900.YmNhZGVjNjktYjRmOS00MTAzLTliZWEtNzg5YTA1NTkwNDJjOGY3ZjNlM2UtZjI4NS00M2NkLTk2NzAtNGIxZTEyZjZjYWUz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf3Rakg3kFu9ULHS6LY_U9AuQI7pRjZ7xqRgFMTcpRQL4wCfU6TT_7Hw2H2GvyFa6Hq6AIm9H-9asSIZAIDB1wZu4F55AMczsq8cC6bzX0uPqgHvhBiktWuLBurhRn1VmNx8nGT6E1bJhIjFkUg5C2x1_pqEPjTGbSF8Sp0Q4kkGekOnItbzsAr8XIPpUs7mxDaJzHs_LWBvxECWxFBBHeF8-j1ZTBaSvCs8Rt6INhT3_K0Z4truGeNNpuY7n8NwA77Krt8MaWTt_25U5_1eDetRClJeOfh-Cbr9HTlpRJuBRYhiupv9XCIZBI4HPv9pCM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 14:32:21.227 -06:00 [DBG] user_consent grant with value: ideaBox|69b5a305-c19b-48ca-b932-b9f562466943 not found in store.
2018-07-20 14:32:21.227 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 14:32:21.227 -06:00 [INF] Showing consent: User has not yet consented
2018-07-20 14:32:21.230 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:32:21.230 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:32:21.256 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:32:21.256 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:32:21.256 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:32:21.257 -06:00 [DBG] No PKCE used.
2018-07-20 14:32:21.257 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:32:21.257 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:32:32.859 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 14:32:32.860 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:32:32.860 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:32:32.880 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:32:32.880 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:32:32.880 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:32:32.880 -06:00 [DBG] No PKCE used.
2018-07-20 14:32:32.881 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:32:32.902 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:32:32.902 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:32:32.902 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 14:32:32.902 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 14:32:32.902 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 14:32:32.903 -06:00 [DBG] Start authorize callback request
2018-07-20 14:32:32.928 -06:00 [DBG] User in authorize request: 69b5a305-c19b-48ca-b932-b9f562466943
2018-07-20 14:32:32.928 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:32:32.928 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:32:32.928 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:32:32.928 -06:00 [DBG] No PKCE used.
2018-07-20 14:32:32.928 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:32:32.928 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "69b5a305-c19b-48ca-b932-b9f562466943",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf3Rakg3kFu9ULHS6LY_U9AuQI7pRjZ7xqRgFMTcpRQL4wCfU6TT_7Hw2H2GvyFa6Hq6AIm9H-9asSIZAIDB1wZu4F55AMczsq8cC6bzX0uPqgHvhBiktWuLBurhRn1VmNx8nGT6E1bJhIjFkUg5C2x1_pqEPjTGbSF8Sp0Q4kkGekOnItbzsAr8XIPpUs7mxDaJzHs_LWBvxECWxFBBHeF8-j1ZTBaSvCs8Rt6INhT3_K0Z4truGeNNpuY7n8NwA77Krt8MaWTt_25U5_1eDetRClJeOfh-Cbr9HTlpRJuBRYhiupv9XCIZBI4HPv9pCM",
  "Nonce": "636677155332393900.YmNhZGVjNjktYjRmOS00MTAzLTliZWEtNzg5YTA1NTkwNDJjOGY3ZjNlM2UtZjI4NS00M2NkLTk2NzAtNGIxZTEyZjZjYWUz",
  "SessionId": "2ab7b876efd407a60ed0d36f28db5473",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636677155332393900.YmNhZGVjNjktYjRmOS00MTAzLTliZWEtNzg5YTA1NTkwNDJjOGY3ZjNlM2UtZjI4NS00M2NkLTk2NzAtNGIxZTEyZjZjYWUz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf3Rakg3kFu9ULHS6LY_U9AuQI7pRjZ7xqRgFMTcpRQL4wCfU6TT_7Hw2H2GvyFa6Hq6AIm9H-9asSIZAIDB1wZu4F55AMczsq8cC6bzX0uPqgHvhBiktWuLBurhRn1VmNx8nGT6E1bJhIjFkUg5C2x1_pqEPjTGbSF8Sp0Q4kkGekOnItbzsAr8XIPpUs7mxDaJzHs_LWBvxECWxFBBHeF8-j1ZTBaSvCs8Rt6INhT3_K0Z4truGeNNpuY7n8NwA77Krt8MaWTt_25U5_1eDetRClJeOfh-Cbr9HTlpRJuBRYhiupv9XCIZBI4HPv9pCM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 14:32:32.930 -06:00 [DBG] user_consent grant with value: ideaBox|69b5a305-c19b-48ca-b932-b9f562466943 not found in store.
2018-07-20 14:32:32.930 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 14:32:32.938 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-20 14:32:32.947 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 69b5a305-c19b-48ca-b932-b9f562466943
2018-07-20 14:32:32.954 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-20 14:32:32.973 -06:00 [DBG] Creating Implicit Flow response.
2018-07-20 14:32:32.982 -06:00 [DBG] Getting claims for identity token for subject: 69b5a305-c19b-48ca-b932-b9f562466943 and client: ideaBox
2018-07-20 14:32:32.984 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 14:32:33.052 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "69b5a305-c19b-48ca-b932-b9f562466943",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****X1cQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****bac1"
    }
  ],
  "ActivityId": "0HLFEFVDO6QU1:00000008",
  "TimeStamp": "2018-07-20T20:32:33Z",
  "ProcessId": 9376,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:32:33.055 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "69b5a305-c19b-48ca-b932-b9f562466943",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf3Rakg3kFu9ULHS6LY_U9AuQI7pRjZ7xqRgFMTcpRQL4wCfU6TT_7Hw2H2GvyFa6Hq6AIm9H-9asSIZAIDB1wZu4F55AMczsq8cC6bzX0uPqgHvhBiktWuLBurhRn1VmNx8nGT6E1bJhIjFkUg5C2x1_pqEPjTGbSF8Sp0Q4kkGekOnItbzsAr8XIPpUs7mxDaJzHs_LWBvxECWxFBBHeF8-j1ZTBaSvCs8Rt6INhT3_K0Z4truGeNNpuY7n8NwA77Krt8MaWTt_25U5_1eDetRClJeOfh-Cbr9HTlpRJuBRYhiupv9XCIZBI4HPv9pCM",
  "Scope": "openid profile business email"
}
2018-07-20 14:32:33.071 -06:00 [DBG] Augmenting SignInContext
2018-07-20 14:32:33.072 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 14:32:33.170 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-20 14:32:33.172 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-20 14:32:33.172 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-20 14:32:33.178 -06:00 [DBG] Start token request.
2018-07-20 14:32:33.183 -06:00 [DBG] Start client validation
2018-07-20 14:32:33.187 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-20 14:32:33.190 -06:00 [DBG] Start parsing for secret in post body
2018-07-20 14:32:33.190 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-20 14:32:33.190 -06:00 [DBG] Secret id found: ideaBox
2018-07-20 14:32:33.190 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:32:33.196 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-20 14:32:33.196 -06:00 [DBG] Client validation success
2018-07-20 14:32:33.199 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFEFVDO6QU6:00000001",
  "TimeStamp": "2018-07-20T20:32:33Z",
  "ProcessId": 9376,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:32:33.203 -06:00 [DBG] Start token request validation
2018-07-20 14:32:33.211 -06:00 [DBG] Start validation of authorization code token request
2018-07-20 14:32:33.228 -06:00 [DBG] Validation of authorization code token request success
2018-07-20 14:32:33.231 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "c15741bd4238b489ab0e590180159bc782031ffe2c216d61a32f20b6d496bac1",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "c15741bd4238b489ab0e590180159bc782031ffe2c216d61a32f20b6d496bac1",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-20 14:32:33.242 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:32:33.251 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-20 14:32:33.251 -06:00 [DBG] Getting claims for access token for subject: 69b5a305-c19b-48ca-b932-b9f562466943
2018-07-20 14:32:33.272 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:32:33.272 -06:00 [DBG] Getting claims for identity token for subject: 69b5a305-c19b-48ca-b932-b9f562466943 and client: ideaBox
2018-07-20 14:32:33.272 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 14:32:33.285 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Tx_w"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****KDnA"
    }
  ],
  "ActivityId": "0HLFEFVDO6QU6:00000001",
  "TimeStamp": "2018-07-20T20:32:33Z",
  "ProcessId": 9376,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:32:33.286 -06:00 [DBG] Token request success.
2018-07-20 14:32:33.301 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-20 14:32:33.301 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-20 14:32:33.301 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-20 14:32:33.306 -06:00 [DBG] Start userinfo request
2018-07-20 14:32:33.308 -06:00 [DBG] Bearer token found in header
2018-07-20 14:32:33.368 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:32:33.371 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:32:33.372 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-20 14:32:33.375 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532118753,
    "exp": 1532122353,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "69b5a305-c19b-48ca-b932-b9f562466943",
    "auth_time": 1532118741,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-20 14:32:33.380 -06:00 [DBG] Creating userinfo response
2018-07-20 14:32:33.383 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-20 14:32:33.385 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-20 14:32:33.387 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-20 14:32:33.387 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-20 14:32:33.388 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-20 14:32:33.389 -06:00 [DBG] End userinfo request
2018-07-20 14:37:40.167 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-20 14:37:40.196 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-20 14:37:40.199 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-20 14:37:40.199 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-20 14:37:40.199 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-20 14:37:40.199 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-20 14:38:48.365 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-20 14:38:48.397 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-20 14:38:48.401 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-20 14:38:48.401 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-20 14:38:48.401 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-20 14:38:48.401 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-20 14:38:58.812 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-20 14:38:58.927 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-20 14:38:58.927 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-20 14:38:58.930 -06:00 [DBG] Start discovery request
2018-07-20 14:38:59.099 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-20 14:38:59.100 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-20 14:38:59.100 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-20 14:38:59.103 -06:00 [DBG] Start key discovery request
2018-07-20 14:38:59.172 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-20 14:38:59.175 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-20 14:38:59.175 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-20 14:38:59.178 -06:00 [DBG] Start authorize request
2018-07-20 14:38:59.193 -06:00 [DBG] No user present in authorize request
2018-07-20 14:38:59.196 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:38:59.207 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:38:59.211 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:38:59.212 -06:00 [DBG] No PKCE used.
2018-07-20 14:38:59.239 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:38:59.248 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdcbc5hoIEG1X8IyLIN44LRtbsg2NIpWWNHHHm1XLfDKdJRymdhixH5SFlF4EF0YSGeZNZXfKx4YDkyOk9N2L03vVzgHMe_fsgZ7YMJzCWpBfxhdThpom-4JvnC9HL5IFu8oDn-x26We5ovKHF5LrCCJ_m19SP9oODgfHmx9XBgZ0ON2lE_FQlZhI5dUMTyg6zfJSZWxWZ5bMrrVGh6q0DJtDdDoKTmLvxDOdXRh9jN79IKhyVA-P5X21RCbEj8xA6yYNbM30--ydmvT6OEFqURGBwQya-5sqgIJ9r-p-rQA8tB9tspbwgJ4ZMe0WO8iME",
  "Nonce": "636677159391368680.MWYzMzE0YzQtMDZhZi00Y2I4LWE1MTUtNmUxMzVkM2ViZTExMjllZWIyZDktZjY2Yy00ODNiLWFjN2YtOGNiNzgyYWEzZTZl",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636677159391368680.MWYzMzE0YzQtMDZhZi00Y2I4LWE1MTUtNmUxMzVkM2ViZTExMjllZWIyZDktZjY2Yy00ODNiLWFjN2YtOGNiNzgyYWEzZTZl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdcbc5hoIEG1X8IyLIN44LRtbsg2NIpWWNHHHm1XLfDKdJRymdhixH5SFlF4EF0YSGeZNZXfKx4YDkyOk9N2L03vVzgHMe_fsgZ7YMJzCWpBfxhdThpom-4JvnC9HL5IFu8oDn-x26We5ovKHF5LrCCJ_m19SP9oODgfHmx9XBgZ0ON2lE_FQlZhI5dUMTyg6zfJSZWxWZ5bMrrVGh6q0DJtDdDoKTmLvxDOdXRh9jN79IKhyVA-P5X21RCbEj8xA6yYNbM30--ydmvT6OEFqURGBwQya-5sqgIJ9r-p-rQA8tB9tspbwgJ4ZMe0WO8iME",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 14:38:59.254 -06:00 [INF] Showing login: User is not authenticated
2018-07-20 14:38:59.543 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:38:59.544 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:38:59.544 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:38:59.544 -06:00 [DBG] No PKCE used.
2018-07-20 14:38:59.544 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:38:59.546 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:39:01.530 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-20 14:39:01.530 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-20 14:39:01.530 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-20 14:39:01.531 -06:00 [DBG] Start authorize request
2018-07-20 14:39:01.531 -06:00 [DBG] No user present in authorize request
2018-07-20 14:39:01.531 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:39:01.531 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:39:01.531 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:39:01.531 -06:00 [DBG] No PKCE used.
2018-07-20 14:39:01.531 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:39:01.531 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeHv3cA2L7jqh8SHTupzpysUg9FbGhahLuIdWVSyYEcbcnQNw3s2kLJi3xPA_sCU5nNtJDivhdQkXhg0HgzsXs6rSwEInXwzcEwbmQ-0L2z35i9nHEZdphl09AtuWFN7FOqnGGrTEgYIV259E5Dbe4KeFTQf0wfOyqk5Dh-vWPKvGRRfSQgP38EvcX1raolJnY7WW8cJTQ_w_HWRNX0Qj3ie4IVIxSA8lPMSmrObRYeS7DcfXTprQFab729_iPvwvQuwFUf67BplH7Hrw1OszGGtNDRRFSw7zHk5EFrSnTRaPakctbM_piBGHnnMfSwufc",
  "Nonce": "636677159415209960.ODE0OWJlMjEtNzZmYi00ZTE3LWFjNTgtZDJlYTM1ZDcwYmY0Y2ZiMTdiODMtNmMzNy00ODI0LWFmODYtYjljM2Q5OWM5MzVk",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636677159415209960.ODE0OWJlMjEtNzZmYi00ZTE3LWFjNTgtZDJlYTM1ZDcwYmY0Y2ZiMTdiODMtNmMzNy00ODI0LWFmODYtYjljM2Q5OWM5MzVk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeHv3cA2L7jqh8SHTupzpysUg9FbGhahLuIdWVSyYEcbcnQNw3s2kLJi3xPA_sCU5nNtJDivhdQkXhg0HgzsXs6rSwEInXwzcEwbmQ-0L2z35i9nHEZdphl09AtuWFN7FOqnGGrTEgYIV259E5Dbe4KeFTQf0wfOyqk5Dh-vWPKvGRRfSQgP38EvcX1raolJnY7WW8cJTQ_w_HWRNX0Qj3ie4IVIxSA8lPMSmrObRYeS7DcfXTprQFab729_iPvwvQuwFUf67BplH7Hrw1OszGGtNDRRFSw7zHk5EFrSnTRaPakctbM_piBGHnnMfSwufc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 14:39:01.532 -06:00 [INF] Showing login: User is not authenticated
2018-07-20 14:39:01.543 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:39:01.544 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:39:01.544 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:39:01.544 -06:00 [DBG] No PKCE used.
2018-07-20 14:39:01.544 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:39:01.544 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:39:11.629 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 14:39:12.778 -06:00 [DBG] Augmenting SignInContext
2018-07-20 14:39:12.779 -06:00 [DBG] Adding idp claim with value: local
2018-07-20 14:39:12.779 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-20 14:39:12.780 -06:00 [DBG] Adding auth_time claim with value: 1532119152
2018-07-20 14:39:12.807 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 14:39:12.833 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFEG38T1K27:00000003",
  "TimeStamp": "2018-07-20T20:39:12Z",
  "ProcessId": 9468,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:39:12.853 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:39:12.853 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:39:12.853 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 14:39:12.854 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 14:39:12.854 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 14:39:12.857 -06:00 [DBG] Start authorize callback request
2018-07-20 14:39:12.860 -06:00 [DBG] User in authorize request: b053f2bb-7429-42f2-8258-2effa152d617
2018-07-20 14:39:12.860 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:39:12.860 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:39:12.860 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:39:12.860 -06:00 [DBG] No PKCE used.
2018-07-20 14:39:12.860 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:39:12.860 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeHv3cA2L7jqh8SHTupzpysUg9FbGhahLuIdWVSyYEcbcnQNw3s2kLJi3xPA_sCU5nNtJDivhdQkXhg0HgzsXs6rSwEInXwzcEwbmQ-0L2z35i9nHEZdphl09AtuWFN7FOqnGGrTEgYIV259E5Dbe4KeFTQf0wfOyqk5Dh-vWPKvGRRfSQgP38EvcX1raolJnY7WW8cJTQ_w_HWRNX0Qj3ie4IVIxSA8lPMSmrObRYeS7DcfXTprQFab729_iPvwvQuwFUf67BplH7Hrw1OszGGtNDRRFSw7zHk5EFrSnTRaPakctbM_piBGHnnMfSwufc",
  "Nonce": "636677159415209960.ODE0OWJlMjEtNzZmYi00ZTE3LWFjNTgtZDJlYTM1ZDcwYmY0Y2ZiMTdiODMtNmMzNy00ODI0LWFmODYtYjljM2Q5OWM5MzVk",
  "SessionId": "8c4fa7dfac19af29aec709e0eb39a499",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636677159415209960.ODE0OWJlMjEtNzZmYi00ZTE3LWFjNTgtZDJlYTM1ZDcwYmY0Y2ZiMTdiODMtNmMzNy00ODI0LWFmODYtYjljM2Q5OWM5MzVk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeHv3cA2L7jqh8SHTupzpysUg9FbGhahLuIdWVSyYEcbcnQNw3s2kLJi3xPA_sCU5nNtJDivhdQkXhg0HgzsXs6rSwEInXwzcEwbmQ-0L2z35i9nHEZdphl09AtuWFN7FOqnGGrTEgYIV259E5Dbe4KeFTQf0wfOyqk5Dh-vWPKvGRRfSQgP38EvcX1raolJnY7WW8cJTQ_w_HWRNX0Qj3ie4IVIxSA8lPMSmrObRYeS7DcfXTprQFab729_iPvwvQuwFUf67BplH7Hrw1OszGGtNDRRFSw7zHk5EFrSnTRaPakctbM_piBGHnnMfSwufc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 14:39:12.896 -06:00 [DBG] user_consent grant with value: ideaBox|b053f2bb-7429-42f2-8258-2effa152d617 not found in store.
2018-07-20 14:39:12.896 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 14:39:12.896 -06:00 [INF] Showing consent: User has not yet consented
2018-07-20 14:39:12.900 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:39:12.900 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:39:12.925 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:39:12.925 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:39:12.926 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:39:12.926 -06:00 [DBG] No PKCE used.
2018-07-20 14:39:12.926 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:39:12.926 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:39:19.159 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 14:39:19.160 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:39:19.160 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:39:19.181 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:39:19.181 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:39:19.181 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:39:19.181 -06:00 [DBG] No PKCE used.
2018-07-20 14:39:19.181 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:39:19.195 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:39:19.195 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:39:19.195 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 14:39:19.196 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 14:39:19.196 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 14:39:19.196 -06:00 [DBG] Start authorize callback request
2018-07-20 14:39:19.223 -06:00 [DBG] User in authorize request: b053f2bb-7429-42f2-8258-2effa152d617
2018-07-20 14:39:19.223 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:39:19.223 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:39:19.223 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:39:19.223 -06:00 [DBG] No PKCE used.
2018-07-20 14:39:19.223 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:39:19.223 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeHv3cA2L7jqh8SHTupzpysUg9FbGhahLuIdWVSyYEcbcnQNw3s2kLJi3xPA_sCU5nNtJDivhdQkXhg0HgzsXs6rSwEInXwzcEwbmQ-0L2z35i9nHEZdphl09AtuWFN7FOqnGGrTEgYIV259E5Dbe4KeFTQf0wfOyqk5Dh-vWPKvGRRfSQgP38EvcX1raolJnY7WW8cJTQ_w_HWRNX0Qj3ie4IVIxSA8lPMSmrObRYeS7DcfXTprQFab729_iPvwvQuwFUf67BplH7Hrw1OszGGtNDRRFSw7zHk5EFrSnTRaPakctbM_piBGHnnMfSwufc",
  "Nonce": "636677159415209960.ODE0OWJlMjEtNzZmYi00ZTE3LWFjNTgtZDJlYTM1ZDcwYmY0Y2ZiMTdiODMtNmMzNy00ODI0LWFmODYtYjljM2Q5OWM5MzVk",
  "SessionId": "8c4fa7dfac19af29aec709e0eb39a499",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636677159415209960.ODE0OWJlMjEtNzZmYi00ZTE3LWFjNTgtZDJlYTM1ZDcwYmY0Y2ZiMTdiODMtNmMzNy00ODI0LWFmODYtYjljM2Q5OWM5MzVk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeHv3cA2L7jqh8SHTupzpysUg9FbGhahLuIdWVSyYEcbcnQNw3s2kLJi3xPA_sCU5nNtJDivhdQkXhg0HgzsXs6rSwEInXwzcEwbmQ-0L2z35i9nHEZdphl09AtuWFN7FOqnGGrTEgYIV259E5Dbe4KeFTQf0wfOyqk5Dh-vWPKvGRRfSQgP38EvcX1raolJnY7WW8cJTQ_w_HWRNX0Qj3ie4IVIxSA8lPMSmrObRYeS7DcfXTprQFab729_iPvwvQuwFUf67BplH7Hrw1OszGGtNDRRFSw7zHk5EFrSnTRaPakctbM_piBGHnnMfSwufc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 14:39:19.225 -06:00 [DBG] user_consent grant with value: ideaBox|b053f2bb-7429-42f2-8258-2effa152d617 not found in store.
2018-07-20 14:39:19.225 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 14:39:19.232 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-20 14:39:19.241 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: b053f2bb-7429-42f2-8258-2effa152d617
2018-07-20 14:39:19.248 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-20 14:39:19.268 -06:00 [DBG] Creating Implicit Flow response.
2018-07-20 14:39:19.276 -06:00 [DBG] Getting claims for identity token for subject: b053f2bb-7429-42f2-8258-2effa152d617 and client: ideaBox
2018-07-20 14:39:19.278 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 14:39:19.348 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****QWXQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****cf07"
    }
  ],
  "ActivityId": "0HLFEG38T1K27:00000007",
  "TimeStamp": "2018-07-20T20:39:19Z",
  "ProcessId": 9468,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:39:19.350 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeHv3cA2L7jqh8SHTupzpysUg9FbGhahLuIdWVSyYEcbcnQNw3s2kLJi3xPA_sCU5nNtJDivhdQkXhg0HgzsXs6rSwEInXwzcEwbmQ-0L2z35i9nHEZdphl09AtuWFN7FOqnGGrTEgYIV259E5Dbe4KeFTQf0wfOyqk5Dh-vWPKvGRRfSQgP38EvcX1raolJnY7WW8cJTQ_w_HWRNX0Qj3ie4IVIxSA8lPMSmrObRYeS7DcfXTprQFab729_iPvwvQuwFUf67BplH7Hrw1OszGGtNDRRFSw7zHk5EFrSnTRaPakctbM_piBGHnnMfSwufc",
  "Scope": "openid profile business email"
}
2018-07-20 14:39:19.364 -06:00 [DBG] Augmenting SignInContext
2018-07-20 14:39:19.364 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 14:39:19.474 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-20 14:39:19.475 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-20 14:39:19.475 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-20 14:39:19.481 -06:00 [DBG] Start token request.
2018-07-20 14:39:19.486 -06:00 [DBG] Start client validation
2018-07-20 14:39:19.491 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-20 14:39:19.493 -06:00 [DBG] Start parsing for secret in post body
2018-07-20 14:39:19.494 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-20 14:39:19.494 -06:00 [DBG] Secret id found: ideaBox
2018-07-20 14:39:19.494 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:39:19.500 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-20 14:39:19.500 -06:00 [DBG] Client validation success
2018-07-20 14:39:19.503 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFEG38T1K25:00000003",
  "TimeStamp": "2018-07-20T20:39:19Z",
  "ProcessId": 9468,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:39:19.507 -06:00 [DBG] Start token request validation
2018-07-20 14:39:19.515 -06:00 [DBG] Start validation of authorization code token request
2018-07-20 14:39:19.532 -06:00 [DBG] Validation of authorization code token request success
2018-07-20 14:39:19.535 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "30737390432cac658ccee0bd581c8d00eb204109bc18c382b49d993af6b0cf07",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "30737390432cac658ccee0bd581c8d00eb204109bc18c382b49d993af6b0cf07",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-20 14:39:19.547 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:39:19.555 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-20 14:39:19.555 -06:00 [DBG] Getting claims for access token for subject: b053f2bb-7429-42f2-8258-2effa152d617
2018-07-20 14:39:19.573 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:39:19.573 -06:00 [DBG] Getting claims for identity token for subject: b053f2bb-7429-42f2-8258-2effa152d617 and client: ideaBox
2018-07-20 14:39:19.573 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 14:39:19.586 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****HsDA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****SmvQ"
    }
  ],
  "ActivityId": "0HLFEG38T1K25:00000003",
  "TimeStamp": "2018-07-20T20:39:19Z",
  "ProcessId": 9468,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:39:19.587 -06:00 [DBG] Token request success.
2018-07-20 14:39:19.597 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-20 14:39:19.598 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-20 14:39:19.598 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-20 14:39:19.604 -06:00 [DBG] Start userinfo request
2018-07-20 14:39:19.606 -06:00 [DBG] Bearer token found in header
2018-07-20 14:39:19.663 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:39:19.665 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:39:19.667 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-20 14:39:19.669 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532119159,
    "exp": 1532122759,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "b053f2bb-7429-42f2-8258-2effa152d617",
    "auth_time": 1532119152,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-20 14:39:19.674 -06:00 [DBG] Creating userinfo response
2018-07-20 14:39:19.676 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-20 14:39:19.679 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-20 14:39:19.681 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-20 14:39:19.681 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-20 14:39:19.682 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-20 14:39:19.683 -06:00 [DBG] End userinfo request
2018-07-20 14:41:47.697 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-20 14:41:47.726 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-20 14:41:47.729 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-20 14:41:47.729 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-20 14:41:47.729 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-20 14:41:47.730 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-20 14:41:57.557 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-20 14:41:57.674 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-20 14:41:57.674 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-20 14:41:57.677 -06:00 [DBG] Start discovery request
2018-07-20 14:41:57.855 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-20 14:41:57.855 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-20 14:41:57.856 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-20 14:41:57.859 -06:00 [DBG] Start key discovery request
2018-07-20 14:41:57.916 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-20 14:41:57.919 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-20 14:41:57.920 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-20 14:41:57.923 -06:00 [DBG] Start authorize request
2018-07-20 14:41:57.938 -06:00 [DBG] No user present in authorize request
2018-07-20 14:41:57.942 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:41:57.952 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:41:57.956 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:41:57.957 -06:00 [DBG] No PKCE used.
2018-07-20 14:41:57.983 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:41:57.993 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPuZjXv2u5dfsqauAH1BIFbYwCWKW3maZvRUlJcKwFwzm-UVAvL0MnZ_lLFp3tq-0_ZNEG10XpOE850tn20utMOQhAi8R2I1EUi9UBj9vCVuM9PADEtBZI1uZCyPPF6UbrbmlwbmptHPZUrbKwalS0EVf3GtRIkPQ6ukxlmDYYcMU-hDGmfwGda9Pr39VmgpgIdIMCj0exWwPR2e9JOYQhwXe8V21FfDVNcJuaYg-6Ai-gOTW0uWNSVgf8ha9ciKvxxWzmdi2T3aCSdcEM_c7ZA61Y9BbtyRCICRfC_HRKH7RTWZJ-y0GP3-Bs0-NwtHg",
  "Nonce": "636677161178940150.ZTQ5NzA5MjktNTA0MC00ZmU2LWIwZmItZGUwNDY4ZTdmY2VlOWZhNTQyZTEtZjBjNy00N2Y0LTgzNDAtM2JkNzU1YzFlNTM3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636677161178940150.ZTQ5NzA5MjktNTA0MC00ZmU2LWIwZmItZGUwNDY4ZTdmY2VlOWZhNTQyZTEtZjBjNy00N2Y0LTgzNDAtM2JkNzU1YzFlNTM3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPuZjXv2u5dfsqauAH1BIFbYwCWKW3maZvRUlJcKwFwzm-UVAvL0MnZ_lLFp3tq-0_ZNEG10XpOE850tn20utMOQhAi8R2I1EUi9UBj9vCVuM9PADEtBZI1uZCyPPF6UbrbmlwbmptHPZUrbKwalS0EVf3GtRIkPQ6ukxlmDYYcMU-hDGmfwGda9Pr39VmgpgIdIMCj0exWwPR2e9JOYQhwXe8V21FfDVNcJuaYg-6Ai-gOTW0uWNSVgf8ha9ciKvxxWzmdi2T3aCSdcEM_c7ZA61Y9BbtyRCICRfC_HRKH7RTWZJ-y0GP3-Bs0-NwtHg",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 14:41:58.000 -06:00 [INF] Showing login: User is not authenticated
2018-07-20 14:41:58.299 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:41:58.300 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:41:58.300 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:41:58.300 -06:00 [DBG] No PKCE used.
2018-07-20 14:41:58.301 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:41:58.303 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:42:13.377 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 14:42:14.570 -06:00 [DBG] Augmenting SignInContext
2018-07-20 14:42:14.572 -06:00 [DBG] Adding idp claim with value: local
2018-07-20 14:42:14.572 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-20 14:42:14.572 -06:00 [DBG] Adding auth_time claim with value: 1532119334
2018-07-20 14:42:14.601 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 14:42:14.630 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFEG4U5MHF0:00000003",
  "TimeStamp": "2018-07-20T20:42:14Z",
  "ProcessId": 9538,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:42:14.650 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:42:14.651 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:42:14.651 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 14:42:14.651 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 14:42:14.651 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 14:42:14.655 -06:00 [DBG] Start authorize callback request
2018-07-20 14:42:14.658 -06:00 [DBG] User in authorize request: b053f2bb-7429-42f2-8258-2effa152d617
2018-07-20 14:42:14.658 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:42:14.658 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:42:14.658 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:42:14.658 -06:00 [DBG] No PKCE used.
2018-07-20 14:42:14.658 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:42:14.659 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPuZjXv2u5dfsqauAH1BIFbYwCWKW3maZvRUlJcKwFwzm-UVAvL0MnZ_lLFp3tq-0_ZNEG10XpOE850tn20utMOQhAi8R2I1EUi9UBj9vCVuM9PADEtBZI1uZCyPPF6UbrbmlwbmptHPZUrbKwalS0EVf3GtRIkPQ6ukxlmDYYcMU-hDGmfwGda9Pr39VmgpgIdIMCj0exWwPR2e9JOYQhwXe8V21FfDVNcJuaYg-6Ai-gOTW0uWNSVgf8ha9ciKvxxWzmdi2T3aCSdcEM_c7ZA61Y9BbtyRCICRfC_HRKH7RTWZJ-y0GP3-Bs0-NwtHg",
  "Nonce": "636677161178940150.ZTQ5NzA5MjktNTA0MC00ZmU2LWIwZmItZGUwNDY4ZTdmY2VlOWZhNTQyZTEtZjBjNy00N2Y0LTgzNDAtM2JkNzU1YzFlNTM3",
  "SessionId": "fd074c94e1d7ab042bbc66a81904e003",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636677161178940150.ZTQ5NzA5MjktNTA0MC00ZmU2LWIwZmItZGUwNDY4ZTdmY2VlOWZhNTQyZTEtZjBjNy00N2Y0LTgzNDAtM2JkNzU1YzFlNTM3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPuZjXv2u5dfsqauAH1BIFbYwCWKW3maZvRUlJcKwFwzm-UVAvL0MnZ_lLFp3tq-0_ZNEG10XpOE850tn20utMOQhAi8R2I1EUi9UBj9vCVuM9PADEtBZI1uZCyPPF6UbrbmlwbmptHPZUrbKwalS0EVf3GtRIkPQ6ukxlmDYYcMU-hDGmfwGda9Pr39VmgpgIdIMCj0exWwPR2e9JOYQhwXe8V21FfDVNcJuaYg-6Ai-gOTW0uWNSVgf8ha9ciKvxxWzmdi2T3aCSdcEM_c7ZA61Y9BbtyRCICRfC_HRKH7RTWZJ-y0GP3-Bs0-NwtHg",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 14:42:14.697 -06:00 [DBG] user_consent grant with value: ideaBox|b053f2bb-7429-42f2-8258-2effa152d617 not found in store.
2018-07-20 14:42:14.698 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 14:42:14.698 -06:00 [INF] Showing consent: User has not yet consented
2018-07-20 14:42:14.701 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:42:14.701 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:42:14.728 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:42:14.728 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:42:14.728 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:42:14.728 -06:00 [DBG] No PKCE used.
2018-07-20 14:42:14.728 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:42:14.728 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:42:17.351 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 14:42:17.352 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:42:17.352 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:42:17.372 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:42:17.372 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:42:17.372 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:42:17.372 -06:00 [DBG] No PKCE used.
2018-07-20 14:42:17.372 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:42:17.387 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:42:17.387 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:42:17.388 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 14:42:17.388 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 14:42:17.388 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 14:42:17.388 -06:00 [DBG] Start authorize callback request
2018-07-20 14:42:17.416 -06:00 [DBG] User in authorize request: b053f2bb-7429-42f2-8258-2effa152d617
2018-07-20 14:42:17.416 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:42:17.416 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:42:17.416 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:42:17.416 -06:00 [DBG] No PKCE used.
2018-07-20 14:42:17.416 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:42:17.416 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPuZjXv2u5dfsqauAH1BIFbYwCWKW3maZvRUlJcKwFwzm-UVAvL0MnZ_lLFp3tq-0_ZNEG10XpOE850tn20utMOQhAi8R2I1EUi9UBj9vCVuM9PADEtBZI1uZCyPPF6UbrbmlwbmptHPZUrbKwalS0EVf3GtRIkPQ6ukxlmDYYcMU-hDGmfwGda9Pr39VmgpgIdIMCj0exWwPR2e9JOYQhwXe8V21FfDVNcJuaYg-6Ai-gOTW0uWNSVgf8ha9ciKvxxWzmdi2T3aCSdcEM_c7ZA61Y9BbtyRCICRfC_HRKH7RTWZJ-y0GP3-Bs0-NwtHg",
  "Nonce": "636677161178940150.ZTQ5NzA5MjktNTA0MC00ZmU2LWIwZmItZGUwNDY4ZTdmY2VlOWZhNTQyZTEtZjBjNy00N2Y0LTgzNDAtM2JkNzU1YzFlNTM3",
  "SessionId": "fd074c94e1d7ab042bbc66a81904e003",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636677161178940150.ZTQ5NzA5MjktNTA0MC00ZmU2LWIwZmItZGUwNDY4ZTdmY2VlOWZhNTQyZTEtZjBjNy00N2Y0LTgzNDAtM2JkNzU1YzFlNTM3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPuZjXv2u5dfsqauAH1BIFbYwCWKW3maZvRUlJcKwFwzm-UVAvL0MnZ_lLFp3tq-0_ZNEG10XpOE850tn20utMOQhAi8R2I1EUi9UBj9vCVuM9PADEtBZI1uZCyPPF6UbrbmlwbmptHPZUrbKwalS0EVf3GtRIkPQ6ukxlmDYYcMU-hDGmfwGda9Pr39VmgpgIdIMCj0exWwPR2e9JOYQhwXe8V21FfDVNcJuaYg-6Ai-gOTW0uWNSVgf8ha9ciKvxxWzmdi2T3aCSdcEM_c7ZA61Y9BbtyRCICRfC_HRKH7RTWZJ-y0GP3-Bs0-NwtHg",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 14:42:17.418 -06:00 [DBG] user_consent grant with value: ideaBox|b053f2bb-7429-42f2-8258-2effa152d617 not found in store.
2018-07-20 14:42:17.418 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 14:42:17.425 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-20 14:42:17.437 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: b053f2bb-7429-42f2-8258-2effa152d617
2018-07-20 14:42:17.443 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-20 14:42:17.464 -06:00 [DBG] Creating Implicit Flow response.
2018-07-20 14:42:17.473 -06:00 [DBG] Getting claims for identity token for subject: b053f2bb-7429-42f2-8258-2effa152d617 and client: ideaBox
2018-07-20 14:42:17.551 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****g90w"
    },
    {
      "TokenType": "code",
      "TokenValue": "****caae"
    }
  ],
  "ActivityId": "0HLFEG4U5MHF0:00000007",
  "TimeStamp": "2018-07-20T20:42:17Z",
  "ProcessId": 9538,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:42:17.554 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPuZjXv2u5dfsqauAH1BIFbYwCWKW3maZvRUlJcKwFwzm-UVAvL0MnZ_lLFp3tq-0_ZNEG10XpOE850tn20utMOQhAi8R2I1EUi9UBj9vCVuM9PADEtBZI1uZCyPPF6UbrbmlwbmptHPZUrbKwalS0EVf3GtRIkPQ6ukxlmDYYcMU-hDGmfwGda9Pr39VmgpgIdIMCj0exWwPR2e9JOYQhwXe8V21FfDVNcJuaYg-6Ai-gOTW0uWNSVgf8ha9ciKvxxWzmdi2T3aCSdcEM_c7ZA61Y9BbtyRCICRfC_HRKH7RTWZJ-y0GP3-Bs0-NwtHg",
  "Scope": "openid profile business email"
}
2018-07-20 14:42:17.569 -06:00 [DBG] Augmenting SignInContext
2018-07-20 14:42:17.569 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 14:42:17.678 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-20 14:42:17.680 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-20 14:42:17.680 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-20 14:42:17.686 -06:00 [DBG] Start token request.
2018-07-20 14:42:17.691 -06:00 [DBG] Start client validation
2018-07-20 14:42:17.695 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-20 14:42:17.698 -06:00 [DBG] Start parsing for secret in post body
2018-07-20 14:42:17.698 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-20 14:42:17.698 -06:00 [DBG] Secret id found: ideaBox
2018-07-20 14:42:17.698 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:42:17.705 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-20 14:42:17.705 -06:00 [DBG] Client validation success
2018-07-20 14:42:17.708 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFEG4U5MHEV:00000003",
  "TimeStamp": "2018-07-20T20:42:17Z",
  "ProcessId": 9538,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:42:17.712 -06:00 [DBG] Start token request validation
2018-07-20 14:42:17.722 -06:00 [DBG] Start validation of authorization code token request
2018-07-20 14:42:17.741 -06:00 [DBG] Validation of authorization code token request success
2018-07-20 14:42:17.744 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "02a3d564185577754663a29d46f609b001fe8c9f9fa8bef166ccb21ab428caae",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "02a3d564185577754663a29d46f609b001fe8c9f9fa8bef166ccb21ab428caae",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-20 14:42:17.755 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:42:17.764 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-20 14:42:17.764 -06:00 [DBG] Getting claims for access token for subject: b053f2bb-7429-42f2-8258-2effa152d617
2018-07-20 14:42:17.777 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:42:17.780 -06:00 [DBG] Getting claims for identity token for subject: b053f2bb-7429-42f2-8258-2effa152d617 and client: ideaBox
2018-07-20 14:42:17.795 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****RFLA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****qt8Q"
    }
  ],
  "ActivityId": "0HLFEG4U5MHEV:00000003",
  "TimeStamp": "2018-07-20T20:42:17Z",
  "ProcessId": 9538,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:42:17.796 -06:00 [DBG] Token request success.
2018-07-20 14:55:55.774 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-20 14:55:55.807 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-20 14:55:55.810 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-20 14:55:55.810 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-20 14:55:55.810 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-20 14:55:55.810 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-20 14:56:16.584 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-20 14:56:16.698 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-20 14:56:16.698 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-20 14:56:16.701 -06:00 [DBG] Start discovery request
2018-07-20 14:56:16.872 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-20 14:56:16.873 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-20 14:56:16.873 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-20 14:56:16.876 -06:00 [DBG] Start key discovery request
2018-07-20 14:56:16.945 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-20 14:56:16.947 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-20 14:56:16.947 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-20 14:56:16.950 -06:00 [DBG] Start authorize request
2018-07-20 14:56:16.965 -06:00 [DBG] No user present in authorize request
2018-07-20 14:56:16.969 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:56:16.979 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:56:16.983 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:56:16.984 -06:00 [DBG] No PKCE used.
2018-07-20 14:56:17.010 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:56:17.019 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebet_VouKzS1weUww2CggAWLoJJ5ptHF2uryGn8IeacNIXyONMYWYZsbdMl2zZeFxU_E0otKZx6KNi-Xtf1cWjaHKhA8QmDJP1_VrlONbIBBu_PnCviitq8laY0nJQtBwUTK3LbyImLzv-aHdBEW31Z_1lz-qrvsvsQCDHzZW2YvtauQGJsllRh8utXaoeS--P8FN-maa9He8ys2Uez-oALr64boTsDn2MWOXGn1A01k7DVzZ29Dlz61Nma-6rq0TwD-CC3gm5c31PlqKilNzCezpVX_YkvnJkd4P2f0tGZxThfQdbWrxvkvWVkrQXOHo",
  "Nonce": "636677169769091540.ZmMzZjk3NDAtYmZlZi00YWY4LWE1NWItZWViOGI4ZGFmY2I1YjBiYzEzZTktNTBiZS00Y2QwLTg4YzktNWQ3NTFlY2NiOWJh",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636677169769091540.ZmMzZjk3NDAtYmZlZi00YWY4LWE1NWItZWViOGI4ZGFmY2I1YjBiYzEzZTktNTBiZS00Y2QwLTg4YzktNWQ3NTFlY2NiOWJh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebet_VouKzS1weUww2CggAWLoJJ5ptHF2uryGn8IeacNIXyONMYWYZsbdMl2zZeFxU_E0otKZx6KNi-Xtf1cWjaHKhA8QmDJP1_VrlONbIBBu_PnCviitq8laY0nJQtBwUTK3LbyImLzv-aHdBEW31Z_1lz-qrvsvsQCDHzZW2YvtauQGJsllRh8utXaoeS--P8FN-maa9He8ys2Uez-oALr64boTsDn2MWOXGn1A01k7DVzZ29Dlz61Nma-6rq0TwD-CC3gm5c31PlqKilNzCezpVX_YkvnJkd4P2f0tGZxThfQdbWrxvkvWVkrQXOHo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 14:56:17.025 -06:00 [INF] Showing login: User is not authenticated
2018-07-20 14:56:17.309 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:56:17.310 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:56:17.310 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:56:17.310 -06:00 [DBG] No PKCE used.
2018-07-20 14:56:17.310 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:56:17.312 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:56:20.119 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-20 14:56:20.119 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-20 14:56:20.119 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-20 14:56:20.119 -06:00 [DBG] Start authorize request
2018-07-20 14:56:20.119 -06:00 [DBG] No user present in authorize request
2018-07-20 14:56:20.119 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:56:20.119 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:56:20.119 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:56:20.119 -06:00 [DBG] No PKCE used.
2018-07-20 14:56:20.120 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:56:20.120 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd5FN4Cq8qHn96L-OOy_5vebXsxqvni8LK4kHPKY2J8rp_br2vJhSEXWNPgA8VXuiSTQl409uZkM4BFFjJoSXTRB9J0JAYYx9erQWD6tD6OBif6bcLKEpY7mnTwXFaX9h7HxoK70ipW5tGqnuYKhtqnnr8veIIS8389n5MiJ1TqrQrAlBquh3ssHiVdH6nFZBZjWaBa2jSj61sMghwhGzpy6-uU0eWVJ3XYt5SUwexw6KUn-cboL7RjQiQl39aGXMALnUmN86Ypk7yMH802lUQf3TPO3YEFn7cv81ijTNSON_dVajrpXhEmSztrH4MJ0Io",
  "Nonce": "636677169801161800.MTU3NDRkNmQtM2EyOC00ZWM2LWI2OTctYWNhMmU2ZTAwYzJlNzM0NTkxMWMtOTRlZC00OGE4LTgzZTktMjg4MzkwMmNkNzQ3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636677169801161800.MTU3NDRkNmQtM2EyOC00ZWM2LWI2OTctYWNhMmU2ZTAwYzJlNzM0NTkxMWMtOTRlZC00OGE4LTgzZTktMjg4MzkwMmNkNzQ3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd5FN4Cq8qHn96L-OOy_5vebXsxqvni8LK4kHPKY2J8rp_br2vJhSEXWNPgA8VXuiSTQl409uZkM4BFFjJoSXTRB9J0JAYYx9erQWD6tD6OBif6bcLKEpY7mnTwXFaX9h7HxoK70ipW5tGqnuYKhtqnnr8veIIS8389n5MiJ1TqrQrAlBquh3ssHiVdH6nFZBZjWaBa2jSj61sMghwhGzpy6-uU0eWVJ3XYt5SUwexw6KUn-cboL7RjQiQl39aGXMALnUmN86Ypk7yMH802lUQf3TPO3YEFn7cv81ijTNSON_dVajrpXhEmSztrH4MJ0Io",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 14:56:20.120 -06:00 [INF] Showing login: User is not authenticated
2018-07-20 14:56:20.127 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:56:20.127 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:56:20.127 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:56:20.127 -06:00 [DBG] No PKCE used.
2018-07-20 14:56:20.127 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:56:20.127 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:56:30.155 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 14:56:31.355 -06:00 [DBG] Augmenting SignInContext
2018-07-20 14:56:31.357 -06:00 [DBG] Adding idp claim with value: local
2018-07-20 14:56:31.357 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-20 14:56:31.357 -06:00 [DBG] Adding auth_time claim with value: 1532120191
2018-07-20 14:56:31.386 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 14:56:31.414 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFEGCU6268V:00000003",
  "TimeStamp": "2018-07-20T20:56:31Z",
  "ProcessId": 9646,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:56:31.434 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:56:31.435 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:56:31.435 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 14:56:31.435 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 14:56:31.435 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 14:56:31.439 -06:00 [DBG] Start authorize callback request
2018-07-20 14:56:31.442 -06:00 [DBG] User in authorize request: b053f2bb-7429-42f2-8258-2effa152d617
2018-07-20 14:56:31.442 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:56:31.442 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:56:31.442 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:56:31.442 -06:00 [DBG] No PKCE used.
2018-07-20 14:56:31.443 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:56:31.443 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd5FN4Cq8qHn96L-OOy_5vebXsxqvni8LK4kHPKY2J8rp_br2vJhSEXWNPgA8VXuiSTQl409uZkM4BFFjJoSXTRB9J0JAYYx9erQWD6tD6OBif6bcLKEpY7mnTwXFaX9h7HxoK70ipW5tGqnuYKhtqnnr8veIIS8389n5MiJ1TqrQrAlBquh3ssHiVdH6nFZBZjWaBa2jSj61sMghwhGzpy6-uU0eWVJ3XYt5SUwexw6KUn-cboL7RjQiQl39aGXMALnUmN86Ypk7yMH802lUQf3TPO3YEFn7cv81ijTNSON_dVajrpXhEmSztrH4MJ0Io",
  "Nonce": "636677169801161800.MTU3NDRkNmQtM2EyOC00ZWM2LWI2OTctYWNhMmU2ZTAwYzJlNzM0NTkxMWMtOTRlZC00OGE4LTgzZTktMjg4MzkwMmNkNzQ3",
  "SessionId": "8e410cdfa8a37c166c5f2176a4e86672",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636677169801161800.MTU3NDRkNmQtM2EyOC00ZWM2LWI2OTctYWNhMmU2ZTAwYzJlNzM0NTkxMWMtOTRlZC00OGE4LTgzZTktMjg4MzkwMmNkNzQ3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd5FN4Cq8qHn96L-OOy_5vebXsxqvni8LK4kHPKY2J8rp_br2vJhSEXWNPgA8VXuiSTQl409uZkM4BFFjJoSXTRB9J0JAYYx9erQWD6tD6OBif6bcLKEpY7mnTwXFaX9h7HxoK70ipW5tGqnuYKhtqnnr8veIIS8389n5MiJ1TqrQrAlBquh3ssHiVdH6nFZBZjWaBa2jSj61sMghwhGzpy6-uU0eWVJ3XYt5SUwexw6KUn-cboL7RjQiQl39aGXMALnUmN86Ypk7yMH802lUQf3TPO3YEFn7cv81ijTNSON_dVajrpXhEmSztrH4MJ0Io",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 14:56:31.481 -06:00 [DBG] user_consent grant with value: ideaBox|b053f2bb-7429-42f2-8258-2effa152d617 not found in store.
2018-07-20 14:56:31.481 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 14:56:31.481 -06:00 [INF] Showing consent: User has not yet consented
2018-07-20 14:56:31.485 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:56:31.485 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:56:31.513 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:56:31.513 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:56:31.513 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:56:31.513 -06:00 [DBG] No PKCE used.
2018-07-20 14:56:31.513 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:56:31.513 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:56:34.616 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 14:56:34.616 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:56:34.616 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:56:34.636 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:56:34.636 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:56:34.637 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:56:34.637 -06:00 [DBG] No PKCE used.
2018-07-20 14:56:34.637 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:56:34.651 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:56:34.652 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:56:34.652 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 14:56:34.652 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 14:56:34.652 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 14:56:34.652 -06:00 [DBG] Start authorize callback request
2018-07-20 14:56:34.681 -06:00 [DBG] User in authorize request: b053f2bb-7429-42f2-8258-2effa152d617
2018-07-20 14:56:34.681 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:56:34.681 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:56:34.681 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:56:34.681 -06:00 [DBG] No PKCE used.
2018-07-20 14:56:34.681 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:56:34.681 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd5FN4Cq8qHn96L-OOy_5vebXsxqvni8LK4kHPKY2J8rp_br2vJhSEXWNPgA8VXuiSTQl409uZkM4BFFjJoSXTRB9J0JAYYx9erQWD6tD6OBif6bcLKEpY7mnTwXFaX9h7HxoK70ipW5tGqnuYKhtqnnr8veIIS8389n5MiJ1TqrQrAlBquh3ssHiVdH6nFZBZjWaBa2jSj61sMghwhGzpy6-uU0eWVJ3XYt5SUwexw6KUn-cboL7RjQiQl39aGXMALnUmN86Ypk7yMH802lUQf3TPO3YEFn7cv81ijTNSON_dVajrpXhEmSztrH4MJ0Io",
  "Nonce": "636677169801161800.MTU3NDRkNmQtM2EyOC00ZWM2LWI2OTctYWNhMmU2ZTAwYzJlNzM0NTkxMWMtOTRlZC00OGE4LTgzZTktMjg4MzkwMmNkNzQ3",
  "SessionId": "8e410cdfa8a37c166c5f2176a4e86672",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636677169801161800.MTU3NDRkNmQtM2EyOC00ZWM2LWI2OTctYWNhMmU2ZTAwYzJlNzM0NTkxMWMtOTRlZC00OGE4LTgzZTktMjg4MzkwMmNkNzQ3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd5FN4Cq8qHn96L-OOy_5vebXsxqvni8LK4kHPKY2J8rp_br2vJhSEXWNPgA8VXuiSTQl409uZkM4BFFjJoSXTRB9J0JAYYx9erQWD6tD6OBif6bcLKEpY7mnTwXFaX9h7HxoK70ipW5tGqnuYKhtqnnr8veIIS8389n5MiJ1TqrQrAlBquh3ssHiVdH6nFZBZjWaBa2jSj61sMghwhGzpy6-uU0eWVJ3XYt5SUwexw6KUn-cboL7RjQiQl39aGXMALnUmN86Ypk7yMH802lUQf3TPO3YEFn7cv81ijTNSON_dVajrpXhEmSztrH4MJ0Io",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 14:56:34.683 -06:00 [DBG] user_consent grant with value: ideaBox|b053f2bb-7429-42f2-8258-2effa152d617 not found in store.
2018-07-20 14:56:34.683 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 14:56:34.689 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-20 14:56:34.700 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: b053f2bb-7429-42f2-8258-2effa152d617
2018-07-20 14:56:34.707 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-20 14:56:34.727 -06:00 [DBG] Creating Implicit Flow response.
2018-07-20 14:56:34.737 -06:00 [DBG] Getting claims for identity token for subject: b053f2bb-7429-42f2-8258-2effa152d617 and client: ideaBox
2018-07-20 14:56:34.738 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 14:56:34.807 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****TBCQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****8c92"
    }
  ],
  "ActivityId": "0HLFEGCU6268V:00000007",
  "TimeStamp": "2018-07-20T20:56:34Z",
  "ProcessId": 9646,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:56:34.809 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd5FN4Cq8qHn96L-OOy_5vebXsxqvni8LK4kHPKY2J8rp_br2vJhSEXWNPgA8VXuiSTQl409uZkM4BFFjJoSXTRB9J0JAYYx9erQWD6tD6OBif6bcLKEpY7mnTwXFaX9h7HxoK70ipW5tGqnuYKhtqnnr8veIIS8389n5MiJ1TqrQrAlBquh3ssHiVdH6nFZBZjWaBa2jSj61sMghwhGzpy6-uU0eWVJ3XYt5SUwexw6KUn-cboL7RjQiQl39aGXMALnUmN86Ypk7yMH802lUQf3TPO3YEFn7cv81ijTNSON_dVajrpXhEmSztrH4MJ0Io",
  "Scope": "openid profile business email"
}
2018-07-20 14:56:34.824 -06:00 [DBG] Augmenting SignInContext
2018-07-20 14:56:34.824 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 14:56:34.929 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-20 14:56:34.931 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-20 14:56:34.931 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-20 14:56:34.938 -06:00 [DBG] Start token request.
2018-07-20 14:56:34.943 -06:00 [DBG] Start client validation
2018-07-20 14:56:34.947 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-20 14:56:34.949 -06:00 [DBG] Start parsing for secret in post body
2018-07-20 14:56:34.949 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-20 14:56:34.949 -06:00 [DBG] Secret id found: ideaBox
2018-07-20 14:56:34.950 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:56:34.956 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-20 14:56:34.956 -06:00 [DBG] Client validation success
2018-07-20 14:56:34.959 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFEGCU6268T:00000003",
  "TimeStamp": "2018-07-20T20:56:34Z",
  "ProcessId": 9646,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:56:34.964 -06:00 [DBG] Start token request validation
2018-07-20 14:56:34.972 -06:00 [DBG] Start validation of authorization code token request
2018-07-20 14:56:34.991 -06:00 [DBG] Validation of authorization code token request success
2018-07-20 14:56:34.995 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "43ebfa7380e4b792c9937d449c5636c9d3f86205838419e5ee557c8e04f08c92",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "43ebfa7380e4b792c9937d449c5636c9d3f86205838419e5ee557c8e04f08c92",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-20 14:56:35.005 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:56:35.014 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-20 14:56:35.014 -06:00 [DBG] Getting claims for access token for subject: b053f2bb-7429-42f2-8258-2effa152d617
2018-07-20 14:56:35.033 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:56:35.033 -06:00 [DBG] Getting claims for identity token for subject: b053f2bb-7429-42f2-8258-2effa152d617 and client: ideaBox
2018-07-20 14:56:35.033 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 14:56:35.047 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****7PHQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Zwrg"
    }
  ],
  "ActivityId": "0HLFEGCU6268T:00000003",
  "TimeStamp": "2018-07-20T20:56:35Z",
  "ProcessId": 9646,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:56:35.048 -06:00 [DBG] Token request success.
2018-07-20 14:56:35.059 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-20 14:56:35.060 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-20 14:56:35.060 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-20 14:56:35.065 -06:00 [DBG] Start userinfo request
2018-07-20 14:56:35.067 -06:00 [DBG] Bearer token found in header
2018-07-20 14:56:35.126 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:56:35.129 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:56:35.130 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-20 14:56:35.133 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532120195,
    "exp": 1532123795,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "b053f2bb-7429-42f2-8258-2effa152d617",
    "auth_time": 1532120191,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-20 14:56:35.140 -06:00 [DBG] Creating userinfo response
2018-07-20 14:56:35.143 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-20 14:56:35.145 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-20 14:56:35.147 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color business email email_verified
2018-07-20 14:56:35.147 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-20 14:56:35.149 -06:00 [INF] Profile service returned to the following claim types: sub business_name business fav_color name given_name family_name email email_verified website preferred_username
2018-07-20 14:56:35.149 -06:00 [DBG] End userinfo request
2018-07-20 14:58:00.352 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-20 14:58:00.381 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-20 14:58:00.384 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-20 14:58:00.384 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-20 14:58:00.384 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-20 14:58:00.384 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-20 14:58:17.278 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-20 14:58:17.393 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-20 14:58:17.393 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-20 14:58:17.396 -06:00 [DBG] Start authorize request
2018-07-20 14:58:17.411 -06:00 [DBG] No user present in authorize request
2018-07-20 14:58:17.414 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:58:17.424 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:58:17.429 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:58:17.430 -06:00 [DBG] No PKCE used.
2018-07-20 14:58:17.459 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:58:17.513 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcLS_q7zM_hRUOwsznaMJiMD4SE8mlYTxqWGzGsUOcPY3metBSYhEdFmVUzu3uXcUbwSrtfeddyXuXkqvvpQNsmIoHyVXWMKJlqIjGIPpe8iqi1e-3RtoLvJ39ak_Dg-iKVm1s9qDsKhS7YPwxvx4QRPY2rI7u_Ra3iazkrdwx_vNY13whSRUVQcQk8hFhqpQ-maXTrDHV9Sn9iTkWS0gpVBNnw4a32ESgGMteFY9t1DAp50MCuY7OidFVZ8nBnS4DzD6EWnDP282Ner0ZlKXAUkuVUeUhAdynfMzrxBvCWxl8nqiyvcY7RLtJTinaveVM",
  "Nonce": "636677170970601950.ZTE1NDU3ZjYtMjdmOC00ZTg1LTk5NjItY2EzYmZjMjJmY2VmNmY1YzdiZjgtYzM1YS00NmU5LTkwZjMtODFmMzhiNGM0NDk0",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636677170970601950.ZTE1NDU3ZjYtMjdmOC00ZTg1LTk5NjItY2EzYmZjMjJmY2VmNmY1YzdiZjgtYzM1YS00NmU5LTkwZjMtODFmMzhiNGM0NDk0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcLS_q7zM_hRUOwsznaMJiMD4SE8mlYTxqWGzGsUOcPY3metBSYhEdFmVUzu3uXcUbwSrtfeddyXuXkqvvpQNsmIoHyVXWMKJlqIjGIPpe8iqi1e-3RtoLvJ39ak_Dg-iKVm1s9qDsKhS7YPwxvx4QRPY2rI7u_Ra3iazkrdwx_vNY13whSRUVQcQk8hFhqpQ-maXTrDHV9Sn9iTkWS0gpVBNnw4a32ESgGMteFY9t1DAp50MCuY7OidFVZ8nBnS4DzD6EWnDP282Ner0ZlKXAUkuVUeUhAdynfMzrxBvCWxl8nqiyvcY7RLtJTinaveVM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 14:58:17.520 -06:00 [INF] Showing login: User is not authenticated
2018-07-20 14:58:17.852 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:58:17.853 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:58:17.853 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:58:17.853 -06:00 [DBG] No PKCE used.
2018-07-20 14:58:17.853 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:58:17.856 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:58:31.221 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 14:58:32.410 -06:00 [DBG] Augmenting SignInContext
2018-07-20 14:58:32.412 -06:00 [DBG] Adding idp claim with value: local
2018-07-20 14:58:32.412 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-20 14:58:32.412 -06:00 [DBG] Adding auth_time claim with value: 1532120312
2018-07-20 14:58:32.443 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 14:58:32.472 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFEGE24VSER:00000003",
  "TimeStamp": "2018-07-20T20:58:32Z",
  "ProcessId": 9694,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:58:32.493 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:58:32.494 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:58:32.494 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 14:58:32.494 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 14:58:32.494 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 14:58:32.499 -06:00 [DBG] Start authorize callback request
2018-07-20 14:58:32.502 -06:00 [DBG] User in authorize request: b053f2bb-7429-42f2-8258-2effa152d617
2018-07-20 14:58:32.502 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:58:32.502 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:58:32.502 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:58:32.502 -06:00 [DBG] No PKCE used.
2018-07-20 14:58:32.502 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:58:32.502 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcLS_q7zM_hRUOwsznaMJiMD4SE8mlYTxqWGzGsUOcPY3metBSYhEdFmVUzu3uXcUbwSrtfeddyXuXkqvvpQNsmIoHyVXWMKJlqIjGIPpe8iqi1e-3RtoLvJ39ak_Dg-iKVm1s9qDsKhS7YPwxvx4QRPY2rI7u_Ra3iazkrdwx_vNY13whSRUVQcQk8hFhqpQ-maXTrDHV9Sn9iTkWS0gpVBNnw4a32ESgGMteFY9t1DAp50MCuY7OidFVZ8nBnS4DzD6EWnDP282Ner0ZlKXAUkuVUeUhAdynfMzrxBvCWxl8nqiyvcY7RLtJTinaveVM",
  "Nonce": "636677170970601950.ZTE1NDU3ZjYtMjdmOC00ZTg1LTk5NjItY2EzYmZjMjJmY2VmNmY1YzdiZjgtYzM1YS00NmU5LTkwZjMtODFmMzhiNGM0NDk0",
  "SessionId": "1b1335a8249d17abd5a42df6a92162d3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636677170970601950.ZTE1NDU3ZjYtMjdmOC00ZTg1LTk5NjItY2EzYmZjMjJmY2VmNmY1YzdiZjgtYzM1YS00NmU5LTkwZjMtODFmMzhiNGM0NDk0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcLS_q7zM_hRUOwsznaMJiMD4SE8mlYTxqWGzGsUOcPY3metBSYhEdFmVUzu3uXcUbwSrtfeddyXuXkqvvpQNsmIoHyVXWMKJlqIjGIPpe8iqi1e-3RtoLvJ39ak_Dg-iKVm1s9qDsKhS7YPwxvx4QRPY2rI7u_Ra3iazkrdwx_vNY13whSRUVQcQk8hFhqpQ-maXTrDHV9Sn9iTkWS0gpVBNnw4a32ESgGMteFY9t1DAp50MCuY7OidFVZ8nBnS4DzD6EWnDP282Ner0ZlKXAUkuVUeUhAdynfMzrxBvCWxl8nqiyvcY7RLtJTinaveVM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 14:58:32.541 -06:00 [DBG] user_consent grant with value: ideaBox|b053f2bb-7429-42f2-8258-2effa152d617 not found in store.
2018-07-20 14:58:32.541 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 14:58:32.542 -06:00 [INF] Showing consent: User has not yet consented
2018-07-20 14:58:32.545 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:58:32.545 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:58:32.573 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:58:32.573 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:58:32.573 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:58:32.573 -06:00 [DBG] No PKCE used.
2018-07-20 14:58:32.574 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:58:32.574 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:58:35.960 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-20 14:58:35.961 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:58:35.961 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:58:35.985 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:58:35.985 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:58:35.985 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:58:35.985 -06:00 [DBG] No PKCE used.
2018-07-20 14:58:35.985 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:58:36.005 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:58:36.005 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-20 14:58:36.005 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-20 14:58:36.005 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-20 14:58:36.005 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-20 14:58:36.005 -06:00 [DBG] Start authorize callback request
2018-07-20 14:58:36.031 -06:00 [DBG] User in authorize request: b053f2bb-7429-42f2-8258-2effa152d617
2018-07-20 14:58:36.031 -06:00 [DBG] Start authorize request protocol validation
2018-07-20 14:58:36.031 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:58:36.031 -06:00 [DBG] Checking for PKCE parameters
2018-07-20 14:58:36.031 -06:00 [DBG] No PKCE used.
2018-07-20 14:58:36.031 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-20 14:58:36.032 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcLS_q7zM_hRUOwsznaMJiMD4SE8mlYTxqWGzGsUOcPY3metBSYhEdFmVUzu3uXcUbwSrtfeddyXuXkqvvpQNsmIoHyVXWMKJlqIjGIPpe8iqi1e-3RtoLvJ39ak_Dg-iKVm1s9qDsKhS7YPwxvx4QRPY2rI7u_Ra3iazkrdwx_vNY13whSRUVQcQk8hFhqpQ-maXTrDHV9Sn9iTkWS0gpVBNnw4a32ESgGMteFY9t1DAp50MCuY7OidFVZ8nBnS4DzD6EWnDP282Ner0ZlKXAUkuVUeUhAdynfMzrxBvCWxl8nqiyvcY7RLtJTinaveVM",
  "Nonce": "636677170970601950.ZTE1NDU3ZjYtMjdmOC00ZTg1LTk5NjItY2EzYmZjMjJmY2VmNmY1YzdiZjgtYzM1YS00NmU5LTkwZjMtODFmMzhiNGM0NDk0",
  "SessionId": "1b1335a8249d17abd5a42df6a92162d3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636677170970601950.ZTE1NDU3ZjYtMjdmOC00ZTg1LTk5NjItY2EzYmZjMjJmY2VmNmY1YzdiZjgtYzM1YS00NmU5LTkwZjMtODFmMzhiNGM0NDk0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcLS_q7zM_hRUOwsznaMJiMD4SE8mlYTxqWGzGsUOcPY3metBSYhEdFmVUzu3uXcUbwSrtfeddyXuXkqvvpQNsmIoHyVXWMKJlqIjGIPpe8iqi1e-3RtoLvJ39ak_Dg-iKVm1s9qDsKhS7YPwxvx4QRPY2rI7u_Ra3iazkrdwx_vNY13whSRUVQcQk8hFhqpQ-maXTrDHV9Sn9iTkWS0gpVBNnw4a32ESgGMteFY9t1DAp50MCuY7OidFVZ8nBnS4DzD6EWnDP282Ner0ZlKXAUkuVUeUhAdynfMzrxBvCWxl8nqiyvcY7RLtJTinaveVM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-20 14:58:36.033 -06:00 [DBG] user_consent grant with value: ideaBox|b053f2bb-7429-42f2-8258-2effa152d617 not found in store.
2018-07-20 14:58:36.033 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-20 14:58:36.039 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-20 14:58:36.051 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: b053f2bb-7429-42f2-8258-2effa152d617
2018-07-20 14:58:36.058 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-20 14:58:36.079 -06:00 [DBG] Creating Implicit Flow response.
2018-07-20 14:58:36.087 -06:00 [DBG] Getting claims for identity token for subject: b053f2bb-7429-42f2-8258-2effa152d617 and client: ideaBox
2018-07-20 14:58:36.089 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 14:58:36.161 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****lufw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****b16a"
    }
  ],
  "ActivityId": "0HLFEGE24VSER:00000007",
  "TimeStamp": "2018-07-20T20:58:36Z",
  "ProcessId": 9694,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:58:36.163 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "b053f2bb-7429-42f2-8258-2effa152d617",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcLS_q7zM_hRUOwsznaMJiMD4SE8mlYTxqWGzGsUOcPY3metBSYhEdFmVUzu3uXcUbwSrtfeddyXuXkqvvpQNsmIoHyVXWMKJlqIjGIPpe8iqi1e-3RtoLvJ39ak_Dg-iKVm1s9qDsKhS7YPwxvx4QRPY2rI7u_Ra3iazkrdwx_vNY13whSRUVQcQk8hFhqpQ-maXTrDHV9Sn9iTkWS0gpVBNnw4a32ESgGMteFY9t1DAp50MCuY7OidFVZ8nBnS4DzD6EWnDP282Ner0ZlKXAUkuVUeUhAdynfMzrxBvCWxl8nqiyvcY7RLtJTinaveVM",
  "Scope": "openid profile business email"
}
2018-07-20 14:58:36.178 -06:00 [DBG] Augmenting SignInContext
2018-07-20 14:58:36.178 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-20 14:58:36.238 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-20 14:58:36.242 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-20 14:58:36.242 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-20 14:58:36.248 -06:00 [DBG] Start token request.
2018-07-20 14:58:36.253 -06:00 [DBG] Start client validation
2018-07-20 14:58:36.259 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-20 14:58:36.263 -06:00 [DBG] Start parsing for secret in post body
2018-07-20 14:58:36.263 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-20 14:58:36.263 -06:00 [DBG] Secret id found: ideaBox
2018-07-20 14:58:36.263 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:58:36.273 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-20 14:58:36.273 -06:00 [DBG] Client validation success
2018-07-20 14:58:36.277 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFEGE24VSES:00000001",
  "TimeStamp": "2018-07-20T20:58:36Z",
  "ProcessId": 9694,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:58:36.283 -06:00 [DBG] Start token request validation
2018-07-20 14:58:36.293 -06:00 [DBG] Start validation of authorization code token request
2018-07-20 14:58:36.311 -06:00 [DBG] Validation of authorization code token request success
2018-07-20 14:58:36.314 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "c069b22769788f5c13a4511ecc58675e1fc3bc9185f395ba42b9bc95ecc0b16a",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "c069b22769788f5c13a4511ecc58675e1fc3bc9185f395ba42b9bc95ecc0b16a",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-20 14:58:36.325 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:58:36.335 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-20 14:58:36.336 -06:00 [DBG] Getting claims for access token for subject: b053f2bb-7429-42f2-8258-2effa152d617
2018-07-20 14:58:36.355 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:58:36.355 -06:00 [DBG] Getting claims for identity token for subject: b053f2bb-7429-42f2-8258-2effa152d617 and client: ideaBox
2018-07-20 14:58:36.355 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-20 14:58:36.368 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****u0nA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****yAhw"
    }
  ],
  "ActivityId": "0HLFEGE24VSES:00000001",
  "TimeStamp": "2018-07-20T20:58:36Z",
  "ProcessId": 9694,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-20 14:58:36.369 -06:00 [DBG] Token request success.
2018-07-20 14:58:36.378 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-20 14:58:36.378 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-20 14:58:36.378 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-20 14:58:36.383 -06:00 [DBG] Start userinfo request
2018-07-20 14:58:36.386 -06:00 [DBG] Bearer token found in header
2018-07-20 14:58:36.450 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:58:36.452 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-20 14:58:36.454 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-20 14:58:36.457 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532120316,
    "exp": 1532123916,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "b053f2bb-7429-42f2-8258-2effa152d617",
    "auth_time": 1532120312,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-20 14:58:36.461 -06:00 [DBG] Creating userinfo response
2018-07-20 14:58:36.464 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-20 14:58:36.466 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-20 14:58:36.468 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-20 14:58:36.468 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-20 14:58:36.470 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-20 14:58:36.470 -06:00 [DBG] End userinfo request
2018-07-23 14:04:27.480 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-23 14:04:27.511 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-23 14:04:27.514 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-23 14:04:27.514 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-23 14:04:27.514 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-23 14:04:27.514 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-23 14:05:09.573 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-23 14:05:09.686 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-23 14:05:09.686 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-23 14:05:09.689 -06:00 [DBG] Start discovery request
2018-07-23 14:05:09.864 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-23 14:05:09.865 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-23 14:05:09.865 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-23 14:05:09.868 -06:00 [DBG] Start key discovery request
2018-07-23 14:05:09.921 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-23 14:05:09.924 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-23 14:05:09.924 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-23 14:05:09.927 -06:00 [DBG] Start authorize request
2018-07-23 14:05:09.942 -06:00 [DBG] No user present in authorize request
2018-07-23 14:05:09.947 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:05:09.957 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:05:09.961 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:05:09.962 -06:00 [DBG] No PKCE used.
2018-07-23 14:05:09.987 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:05:09.996 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfLmJEl21K3MZlLLX0MGWDRRWpNfLHiPfGjrFDIA2aKJQZnoLVITh_goQCgEjCIkBDy7JBT2Uap38HJIaSIoaShYfHU8Sy46IQDIOtwliy8CrjXSi3afgikBHg--570OCLF7-ds3av86eiltwGfZnrKKrXHR7CXbe7xa_TUoO__ZqxZ4yfLzvDpl4OVn3NZ3Iz-kZNX8xfECkONKH015iMIj4olhr7Tf6ORFLmKr9sa6BDP11kApn5GFTSw_kj3wkmdkE0QjrYh7kgKwEmkY6F3b1XQAZLudVUuIXppW3E3H1cKQj8zKpjfeF-74cLlIQ8",
  "Nonce": "636679731099022930.MWMzNjQ5NzItMzc0Zi00NTRmLTgzMDAtNTQ2MzQ0ZGQwYzRkYThmMzU0ODItMzA0My00MGJiLWFhNzQtMTM4ZDMxNDljOGQ5",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679731099022930.MWMzNjQ5NzItMzc0Zi00NTRmLTgzMDAtNTQ2MzQ0ZGQwYzRkYThmMzU0ODItMzA0My00MGJiLWFhNzQtMTM4ZDMxNDljOGQ5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfLmJEl21K3MZlLLX0MGWDRRWpNfLHiPfGjrFDIA2aKJQZnoLVITh_goQCgEjCIkBDy7JBT2Uap38HJIaSIoaShYfHU8Sy46IQDIOtwliy8CrjXSi3afgikBHg--570OCLF7-ds3av86eiltwGfZnrKKrXHR7CXbe7xa_TUoO__ZqxZ4yfLzvDpl4OVn3NZ3Iz-kZNX8xfECkONKH015iMIj4olhr7Tf6ORFLmKr9sa6BDP11kApn5GFTSw_kj3wkmdkE0QjrYh7kgKwEmkY6F3b1XQAZLudVUuIXppW3E3H1cKQj8zKpjfeF-74cLlIQ8",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 14:05:10.003 -06:00 [INF] Showing login: User is not authenticated
2018-07-23 14:05:10.292 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:05:10.293 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:05:10.293 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:05:10.293 -06:00 [DBG] No PKCE used.
2018-07-23 14:05:10.293 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:05:10.295 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:05:20.985 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 14:05:22.153 -06:00 [DBG] Augmenting SignInContext
2018-07-23 14:05:22.155 -06:00 [DBG] Adding idp claim with value: local
2018-07-23 14:05:22.155 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-23 14:05:22.155 -06:00 [DBG] Adding auth_time claim with value: 1532376322
2018-07-23 14:05:22.182 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 14:05:22.209 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFGQUBOGHNO:00000002",
  "TimeStamp": "2018-07-23T20:05:22Z",
  "ProcessId": 1610,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:05:22.228 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:05:22.229 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:05:22.229 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 14:05:22.229 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 14:05:22.229 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 14:05:22.233 -06:00 [DBG] Start authorize callback request
2018-07-23 14:05:22.236 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:05:22.236 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:05:22.236 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:05:22.236 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:05:22.236 -06:00 [DBG] No PKCE used.
2018-07-23 14:05:22.236 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:05:22.236 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfLmJEl21K3MZlLLX0MGWDRRWpNfLHiPfGjrFDIA2aKJQZnoLVITh_goQCgEjCIkBDy7JBT2Uap38HJIaSIoaShYfHU8Sy46IQDIOtwliy8CrjXSi3afgikBHg--570OCLF7-ds3av86eiltwGfZnrKKrXHR7CXbe7xa_TUoO__ZqxZ4yfLzvDpl4OVn3NZ3Iz-kZNX8xfECkONKH015iMIj4olhr7Tf6ORFLmKr9sa6BDP11kApn5GFTSw_kj3wkmdkE0QjrYh7kgKwEmkY6F3b1XQAZLudVUuIXppW3E3H1cKQj8zKpjfeF-74cLlIQ8",
  "Nonce": "636679731099022930.MWMzNjQ5NzItMzc0Zi00NTRmLTgzMDAtNTQ2MzQ0ZGQwYzRkYThmMzU0ODItMzA0My00MGJiLWFhNzQtMTM4ZDMxNDljOGQ5",
  "SessionId": "e86698f7312be2b11239349deadcea18",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679731099022930.MWMzNjQ5NzItMzc0Zi00NTRmLTgzMDAtNTQ2MzQ0ZGQwYzRkYThmMzU0ODItMzA0My00MGJiLWFhNzQtMTM4ZDMxNDljOGQ5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfLmJEl21K3MZlLLX0MGWDRRWpNfLHiPfGjrFDIA2aKJQZnoLVITh_goQCgEjCIkBDy7JBT2Uap38HJIaSIoaShYfHU8Sy46IQDIOtwliy8CrjXSi3afgikBHg--570OCLF7-ds3av86eiltwGfZnrKKrXHR7CXbe7xa_TUoO__ZqxZ4yfLzvDpl4OVn3NZ3Iz-kZNX8xfECkONKH015iMIj4olhr7Tf6ORFLmKr9sa6BDP11kApn5GFTSw_kj3wkmdkE0QjrYh7kgKwEmkY6F3b1XQAZLudVUuIXppW3E3H1cKQj8zKpjfeF-74cLlIQ8",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 14:05:22.272 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 14:05:22.272 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 14:05:22.272 -06:00 [INF] Showing consent: User has not yet consented
2018-07-23 14:05:22.276 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:05:22.276 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:05:22.301 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:05:22.301 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:05:22.302 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:05:22.302 -06:00 [DBG] No PKCE used.
2018-07-23 14:05:22.302 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:05:22.302 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:05:25.930 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 14:05:25.930 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:05:25.930 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:05:25.953 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:05:25.954 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:05:25.954 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:05:25.954 -06:00 [DBG] No PKCE used.
2018-07-23 14:05:25.954 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:05:25.969 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:05:25.969 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:05:25.969 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 14:05:25.969 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 14:05:25.969 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 14:05:25.970 -06:00 [DBG] Start authorize callback request
2018-07-23 14:05:25.995 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:05:25.995 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:05:25.995 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:05:25.995 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:05:25.996 -06:00 [DBG] No PKCE used.
2018-07-23 14:05:25.996 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:05:25.996 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfLmJEl21K3MZlLLX0MGWDRRWpNfLHiPfGjrFDIA2aKJQZnoLVITh_goQCgEjCIkBDy7JBT2Uap38HJIaSIoaShYfHU8Sy46IQDIOtwliy8CrjXSi3afgikBHg--570OCLF7-ds3av86eiltwGfZnrKKrXHR7CXbe7xa_TUoO__ZqxZ4yfLzvDpl4OVn3NZ3Iz-kZNX8xfECkONKH015iMIj4olhr7Tf6ORFLmKr9sa6BDP11kApn5GFTSw_kj3wkmdkE0QjrYh7kgKwEmkY6F3b1XQAZLudVUuIXppW3E3H1cKQj8zKpjfeF-74cLlIQ8",
  "Nonce": "636679731099022930.MWMzNjQ5NzItMzc0Zi00NTRmLTgzMDAtNTQ2MzQ0ZGQwYzRkYThmMzU0ODItMzA0My00MGJiLWFhNzQtMTM4ZDMxNDljOGQ5",
  "SessionId": "e86698f7312be2b11239349deadcea18",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679731099022930.MWMzNjQ5NzItMzc0Zi00NTRmLTgzMDAtNTQ2MzQ0ZGQwYzRkYThmMzU0ODItMzA0My00MGJiLWFhNzQtMTM4ZDMxNDljOGQ5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfLmJEl21K3MZlLLX0MGWDRRWpNfLHiPfGjrFDIA2aKJQZnoLVITh_goQCgEjCIkBDy7JBT2Uap38HJIaSIoaShYfHU8Sy46IQDIOtwliy8CrjXSi3afgikBHg--570OCLF7-ds3av86eiltwGfZnrKKrXHR7CXbe7xa_TUoO__ZqxZ4yfLzvDpl4OVn3NZ3Iz-kZNX8xfECkONKH015iMIj4olhr7Tf6ORFLmKr9sa6BDP11kApn5GFTSw_kj3wkmdkE0QjrYh7kgKwEmkY6F3b1XQAZLudVUuIXppW3E3H1cKQj8zKpjfeF-74cLlIQ8",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 14:05:25.997 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 14:05:25.997 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 14:05:26.003 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-23 14:05:26.013 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:05:26.020 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-23 14:05:26.041 -06:00 [DBG] Creating Implicit Flow response.
2018-07-23 14:05:26.048 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 14:05:26.051 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 14:05:26.121 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****8aPQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****2841"
    }
  ],
  "ActivityId": "0HLFGQUBOGHNO:00000007",
  "TimeStamp": "2018-07-23T20:05:26Z",
  "ProcessId": 1610,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:05:26.123 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfLmJEl21K3MZlLLX0MGWDRRWpNfLHiPfGjrFDIA2aKJQZnoLVITh_goQCgEjCIkBDy7JBT2Uap38HJIaSIoaShYfHU8Sy46IQDIOtwliy8CrjXSi3afgikBHg--570OCLF7-ds3av86eiltwGfZnrKKrXHR7CXbe7xa_TUoO__ZqxZ4yfLzvDpl4OVn3NZ3Iz-kZNX8xfECkONKH015iMIj4olhr7Tf6ORFLmKr9sa6BDP11kApn5GFTSw_kj3wkmdkE0QjrYh7kgKwEmkY6F3b1XQAZLudVUuIXppW3E3H1cKQj8zKpjfeF-74cLlIQ8",
  "Scope": "openid profile business email"
}
2018-07-23 14:05:26.137 -06:00 [DBG] Augmenting SignInContext
2018-07-23 14:05:26.138 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 14:05:26.236 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-23 14:05:26.238 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-23 14:05:26.238 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-23 14:05:26.244 -06:00 [DBG] Start token request.
2018-07-23 14:05:26.249 -06:00 [DBG] Start client validation
2018-07-23 14:05:26.253 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-23 14:05:26.256 -06:00 [DBG] Start parsing for secret in post body
2018-07-23 14:05:26.257 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-23 14:05:26.257 -06:00 [DBG] Secret id found: ideaBox
2018-07-23 14:05:26.257 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:05:26.263 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-23 14:05:26.263 -06:00 [DBG] Client validation success
2018-07-23 14:05:26.266 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFGQUBOGHNJ:00000003",
  "TimeStamp": "2018-07-23T20:05:26Z",
  "ProcessId": 1610,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:05:26.271 -06:00 [DBG] Start token request validation
2018-07-23 14:05:26.279 -06:00 [DBG] Start validation of authorization code token request
2018-07-23 14:05:26.296 -06:00 [DBG] Validation of authorization code token request success
2018-07-23 14:05:26.300 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "f486c4470e6fe47e028def87386908f474337b00a92931970a4930edd7872841",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "f486c4470e6fe47e028def87386908f474337b00a92931970a4930edd7872841",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-23 14:05:26.310 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:05:26.320 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-23 14:05:26.320 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:05:26.341 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:05:26.341 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 14:05:26.341 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 14:05:26.355 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****RmqA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****JxRw"
    }
  ],
  "ActivityId": "0HLFGQUBOGHNJ:00000003",
  "TimeStamp": "2018-07-23T20:05:26Z",
  "ProcessId": 1610,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:05:26.355 -06:00 [DBG] Token request success.
2018-07-23 14:05:26.366 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-23 14:05:26.367 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-23 14:05:26.367 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-23 14:05:26.372 -06:00 [DBG] Start userinfo request
2018-07-23 14:05:26.376 -06:00 [DBG] Bearer token found in header
2018-07-23 14:05:26.431 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:05:26.434 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:05:26.436 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-23 14:05:26.438 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532376326,
    "exp": 1532379926,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532376322,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-23 14:05:26.443 -06:00 [DBG] Creating userinfo response
2018-07-23 14:05:26.446 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 14:05:26.448 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 14:05:26.449 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-23 14:05:26.450 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 14:05:26.451 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-23 14:05:26.451 -06:00 [DBG] End userinfo request
2018-07-23 14:07:35.731 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-23 14:07:35.731 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-23 14:07:35.731 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-23 14:07:35.731 -06:00 [DBG] Start discovery request
2018-07-23 14:07:35.794 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-23 14:07:35.794 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-23 14:07:35.795 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-23 14:07:35.795 -06:00 [DBG] Start key discovery request
2018-07-23 14:07:35.830 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-23 14:07:35.830 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-23 14:07:35.830 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-23 14:07:35.830 -06:00 [DBG] Start authorize request
2018-07-23 14:07:35.830 -06:00 [DBG] No user present in authorize request
2018-07-23 14:07:35.830 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:07:35.830 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:07:35.830 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:07:35.830 -06:00 [DBG] No PKCE used.
2018-07-23 14:07:35.830 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:07:35.831 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfSO3Lqw8gXkADBIZncCdoxcyvwLWCM_MStp-qb-tWDllFfQ26R71Y0HR5P1lw9pkI-h7lYFdojMvpFa55WsHG1CiCEzHKI2fhPHFH38lLzHEq3giIE9ePO-EnMDDuAJX5pMtP0tCHqKXk1iRDeJPqK02yB-25UAOZQik2xpktq2v9wLgxBKTtQCO3jJUDuyyWOdxi42MK0JcqKFH_5KrJRJe_iAdBe3IbfJLdUixdBDJ-zZpPS5P7tAX8Cw0_wfaveNK3i5IDs77463QegMdG9HzQdilSqcaUZ9vtXNchX4I5YtY-p6exTd3mFDGrjvhQ",
  "Nonce": "636679732558109950.YmE4YzkwMzctMmYzYi00M2I2LWI3OGQtOTJkYWNhZDIwNjExMGFiNzljMDQtMzc1Yy00ZWE1LWJiZjktMDE1YTVhOWQ3NzNh",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679732558109950.YmE4YzkwMzctMmYzYi00M2I2LWI3OGQtOTJkYWNhZDIwNjExMGFiNzljMDQtMzc1Yy00ZWE1LWJiZjktMDE1YTVhOWQ3NzNh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfSO3Lqw8gXkADBIZncCdoxcyvwLWCM_MStp-qb-tWDllFfQ26R71Y0HR5P1lw9pkI-h7lYFdojMvpFa55WsHG1CiCEzHKI2fhPHFH38lLzHEq3giIE9ePO-EnMDDuAJX5pMtP0tCHqKXk1iRDeJPqK02yB-25UAOZQik2xpktq2v9wLgxBKTtQCO3jJUDuyyWOdxi42MK0JcqKFH_5KrJRJe_iAdBe3IbfJLdUixdBDJ-zZpPS5P7tAX8Cw0_wfaveNK3i5IDs77463QegMdG9HzQdilSqcaUZ9vtXNchX4I5YtY-p6exTd3mFDGrjvhQ",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 14:07:35.831 -06:00 [INF] Showing login: User is not authenticated
2018-07-23 14:07:35.834 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:07:35.834 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:07:35.834 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:07:35.834 -06:00 [DBG] No PKCE used.
2018-07-23 14:07:35.834 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:07:35.834 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:07:43.261 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 14:07:43.276 -06:00 [DBG] Augmenting SignInContext
2018-07-23 14:07:43.276 -06:00 [DBG] Adding idp claim with value: local
2018-07-23 14:07:43.276 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-23 14:07:43.276 -06:00 [DBG] Adding auth_time claim with value: 1532376463
2018-07-23 14:07:43.276 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 14:07:43.277 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFGQUBOGHNQ:00000004",
  "TimeStamp": "2018-07-23T20:07:43Z",
  "ProcessId": 1610,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:07:43.279 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:07:43.279 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:07:43.279 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 14:07:43.279 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 14:07:43.279 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 14:07:43.279 -06:00 [DBG] Start authorize callback request
2018-07-23 14:07:43.280 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:07:43.280 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:07:43.280 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:07:43.280 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:07:43.280 -06:00 [DBG] No PKCE used.
2018-07-23 14:07:43.280 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:07:43.280 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfSO3Lqw8gXkADBIZncCdoxcyvwLWCM_MStp-qb-tWDllFfQ26R71Y0HR5P1lw9pkI-h7lYFdojMvpFa55WsHG1CiCEzHKI2fhPHFH38lLzHEq3giIE9ePO-EnMDDuAJX5pMtP0tCHqKXk1iRDeJPqK02yB-25UAOZQik2xpktq2v9wLgxBKTtQCO3jJUDuyyWOdxi42MK0JcqKFH_5KrJRJe_iAdBe3IbfJLdUixdBDJ-zZpPS5P7tAX8Cw0_wfaveNK3i5IDs77463QegMdG9HzQdilSqcaUZ9vtXNchX4I5YtY-p6exTd3mFDGrjvhQ",
  "Nonce": "636679732558109950.YmE4YzkwMzctMmYzYi00M2I2LWI3OGQtOTJkYWNhZDIwNjExMGFiNzljMDQtMzc1Yy00ZWE1LWJiZjktMDE1YTVhOWQ3NzNh",
  "SessionId": "dbfcd1623725dcc926dc0207afeee892",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679732558109950.YmE4YzkwMzctMmYzYi00M2I2LWI3OGQtOTJkYWNhZDIwNjExMGFiNzljMDQtMzc1Yy00ZWE1LWJiZjktMDE1YTVhOWQ3NzNh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfSO3Lqw8gXkADBIZncCdoxcyvwLWCM_MStp-qb-tWDllFfQ26R71Y0HR5P1lw9pkI-h7lYFdojMvpFa55WsHG1CiCEzHKI2fhPHFH38lLzHEq3giIE9ePO-EnMDDuAJX5pMtP0tCHqKXk1iRDeJPqK02yB-25UAOZQik2xpktq2v9wLgxBKTtQCO3jJUDuyyWOdxi42MK0JcqKFH_5KrJRJe_iAdBe3IbfJLdUixdBDJ-zZpPS5P7tAX8Cw0_wfaveNK3i5IDs77463QegMdG9HzQdilSqcaUZ9vtXNchX4I5YtY-p6exTd3mFDGrjvhQ",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 14:07:43.281 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 14:07:43.281 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 14:07:43.281 -06:00 [INF] Showing consent: User has not yet consented
2018-07-23 14:07:43.283 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:07:43.283 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:07:43.283 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:07:43.283 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:07:43.283 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:07:43.284 -06:00 [DBG] No PKCE used.
2018-07-23 14:07:43.284 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:07:43.284 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:07:46.208 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 14:07:46.209 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:07:46.209 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:07:46.209 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:07:46.209 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:07:46.209 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:07:46.209 -06:00 [DBG] No PKCE used.
2018-07-23 14:07:46.210 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:07:46.213 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:07:46.213 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:07:46.213 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 14:07:46.213 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 14:07:46.213 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 14:07:46.213 -06:00 [DBG] Start authorize callback request
2018-07-23 14:07:46.213 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:07:46.213 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:07:46.213 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:07:46.213 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:07:46.213 -06:00 [DBG] No PKCE used.
2018-07-23 14:07:46.213 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:07:46.214 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfSO3Lqw8gXkADBIZncCdoxcyvwLWCM_MStp-qb-tWDllFfQ26R71Y0HR5P1lw9pkI-h7lYFdojMvpFa55WsHG1CiCEzHKI2fhPHFH38lLzHEq3giIE9ePO-EnMDDuAJX5pMtP0tCHqKXk1iRDeJPqK02yB-25UAOZQik2xpktq2v9wLgxBKTtQCO3jJUDuyyWOdxi42MK0JcqKFH_5KrJRJe_iAdBe3IbfJLdUixdBDJ-zZpPS5P7tAX8Cw0_wfaveNK3i5IDs77463QegMdG9HzQdilSqcaUZ9vtXNchX4I5YtY-p6exTd3mFDGrjvhQ",
  "Nonce": "636679732558109950.YmE4YzkwMzctMmYzYi00M2I2LWI3OGQtOTJkYWNhZDIwNjExMGFiNzljMDQtMzc1Yy00ZWE1LWJiZjktMDE1YTVhOWQ3NzNh",
  "SessionId": "dbfcd1623725dcc926dc0207afeee892",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679732558109950.YmE4YzkwMzctMmYzYi00M2I2LWI3OGQtOTJkYWNhZDIwNjExMGFiNzljMDQtMzc1Yy00ZWE1LWJiZjktMDE1YTVhOWQ3NzNh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfSO3Lqw8gXkADBIZncCdoxcyvwLWCM_MStp-qb-tWDllFfQ26R71Y0HR5P1lw9pkI-h7lYFdojMvpFa55WsHG1CiCEzHKI2fhPHFH38lLzHEq3giIE9ePO-EnMDDuAJX5pMtP0tCHqKXk1iRDeJPqK02yB-25UAOZQik2xpktq2v9wLgxBKTtQCO3jJUDuyyWOdxi42MK0JcqKFH_5KrJRJe_iAdBe3IbfJLdUixdBDJ-zZpPS5P7tAX8Cw0_wfaveNK3i5IDs77463QegMdG9HzQdilSqcaUZ9vtXNchX4I5YtY-p6exTd3mFDGrjvhQ",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 14:07:46.215 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 14:07:46.215 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 14:07:46.215 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-23 14:07:46.215 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:07:46.215 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-23 14:07:46.220 -06:00 [DBG] Creating Implicit Flow response.
2018-07-23 14:07:46.220 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 14:07:46.220 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 14:07:46.232 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****6kxw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****fe00"
    }
  ],
  "ActivityId": "0HLFGQUBOGHNQ:00000008",
  "TimeStamp": "2018-07-23T20:07:46Z",
  "ProcessId": 1610,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:07:46.232 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfSO3Lqw8gXkADBIZncCdoxcyvwLWCM_MStp-qb-tWDllFfQ26R71Y0HR5P1lw9pkI-h7lYFdojMvpFa55WsHG1CiCEzHKI2fhPHFH38lLzHEq3giIE9ePO-EnMDDuAJX5pMtP0tCHqKXk1iRDeJPqK02yB-25UAOZQik2xpktq2v9wLgxBKTtQCO3jJUDuyyWOdxi42MK0JcqKFH_5KrJRJe_iAdBe3IbfJLdUixdBDJ-zZpPS5P7tAX8Cw0_wfaveNK3i5IDs77463QegMdG9HzQdilSqcaUZ9vtXNchX4I5YtY-p6exTd3mFDGrjvhQ",
  "Scope": "openid profile business email"
}
2018-07-23 14:07:46.232 -06:00 [DBG] Augmenting SignInContext
2018-07-23 14:07:46.232 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 14:07:46.319 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-23 14:07:46.320 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-23 14:07:46.320 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-23 14:07:46.320 -06:00 [DBG] Start token request.
2018-07-23 14:07:46.320 -06:00 [DBG] Start client validation
2018-07-23 14:07:46.320 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-23 14:07:46.320 -06:00 [DBG] Start parsing for secret in post body
2018-07-23 14:07:46.320 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-23 14:07:46.320 -06:00 [DBG] Secret id found: ideaBox
2018-07-23 14:07:46.320 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:07:46.320 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-23 14:07:46.320 -06:00 [DBG] Client validation success
2018-07-23 14:07:46.320 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFGQUBOGHNP:00000003",
  "TimeStamp": "2018-07-23T20:07:46Z",
  "ProcessId": 1610,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:07:46.320 -06:00 [DBG] Start token request validation
2018-07-23 14:07:46.320 -06:00 [DBG] Start validation of authorization code token request
2018-07-23 14:07:46.328 -06:00 [DBG] Validation of authorization code token request success
2018-07-23 14:07:46.329 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "cfd74004b544217e3ff58f3ddc609e339bc0f9d5b8d65f6f8947f3b85549fe00",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "cfd74004b544217e3ff58f3ddc609e339bc0f9d5b8d65f6f8947f3b85549fe00",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-23 14:07:46.329 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:07:46.329 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-23 14:07:46.329 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:07:46.343 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:07:46.343 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 14:07:46.343 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 14:07:46.355 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****mOww"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****mKSg"
    }
  ],
  "ActivityId": "0HLFGQUBOGHNP:00000003",
  "TimeStamp": "2018-07-23T20:07:46Z",
  "ProcessId": 1610,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:07:46.355 -06:00 [DBG] Token request success.
2018-07-23 14:07:46.362 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-23 14:07:46.362 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-23 14:07:46.362 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-23 14:07:46.362 -06:00 [DBG] Start userinfo request
2018-07-23 14:07:46.362 -06:00 [DBG] Bearer token found in header
2018-07-23 14:07:46.365 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:07:46.365 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:07:46.367 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-23 14:07:46.367 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532376466,
    "exp": 1532380066,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532376463,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-23 14:07:46.367 -06:00 [DBG] Creating userinfo response
2018-07-23 14:07:46.367 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 14:07:46.367 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 14:07:46.367 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-23 14:07:46.367 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 14:07:46.368 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-23 14:07:46.368 -06:00 [DBG] End userinfo request
2018-07-23 14:08:14.660 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-23 14:08:14.660 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-23 14:08:14.660 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-23 14:08:14.660 -06:00 [DBG] Start discovery request
2018-07-23 14:08:14.721 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-23 14:08:14.722 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-23 14:08:14.722 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-23 14:08:14.722 -06:00 [DBG] Start key discovery request
2018-07-23 14:08:14.761 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-23 14:08:14.761 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-23 14:08:14.761 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-23 14:08:14.761 -06:00 [DBG] Start authorize request
2018-07-23 14:08:14.761 -06:00 [DBG] No user present in authorize request
2018-07-23 14:08:14.761 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:08:14.761 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:08:14.761 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:08:14.761 -06:00 [DBG] No PKCE used.
2018-07-23 14:08:14.761 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:08:14.761 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHekFprTtsjFqidunYIUmF3SfDFud-JG49gMIBr1NZeTiCMg-uqqkxXiCenNhvuNoQjHzb5Kl_CwnW5VaiM04r-l-HS76y4nTc9i5a-MmqSfypN7JjCknRsPlb0T-ngZ_g07kYUtJNASyq5NseORZOUD-H_0trFPKf0W864whuytVab4194pE63Nol_pdnqMDHDClV7w0kxIWnC3zkLs4BVLKyOrAWbUEqt_AD2cRDmIsQAdycQDyQK5PZfZ9ZJ6Be9vvszcnlCvAJiAd6_WizZo7oYuQEaQ_FAEQCyb3eBOekUj_kGO7_45AogIU0wHNFs",
  "Nonce": "636679732947370510.Y2E5M2QwZmYtZTg0My00NzE5LWJmZTQtYWNhYjhlZjdhNTM5OGY1OGE0NGUtODE4Zi00Mjg1LTkxMjMtNWFkZjZiMjVmYTYz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679732947370510.Y2E5M2QwZmYtZTg0My00NzE5LWJmZTQtYWNhYjhlZjdhNTM5OGY1OGE0NGUtODE4Zi00Mjg1LTkxMjMtNWFkZjZiMjVmYTYz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHekFprTtsjFqidunYIUmF3SfDFud-JG49gMIBr1NZeTiCMg-uqqkxXiCenNhvuNoQjHzb5Kl_CwnW5VaiM04r-l-HS76y4nTc9i5a-MmqSfypN7JjCknRsPlb0T-ngZ_g07kYUtJNASyq5NseORZOUD-H_0trFPKf0W864whuytVab4194pE63Nol_pdnqMDHDClV7w0kxIWnC3zkLs4BVLKyOrAWbUEqt_AD2cRDmIsQAdycQDyQK5PZfZ9ZJ6Be9vvszcnlCvAJiAd6_WizZo7oYuQEaQ_FAEQCyb3eBOekUj_kGO7_45AogIU0wHNFs",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 14:08:14.762 -06:00 [INF] Showing login: User is not authenticated
2018-07-23 14:08:14.764 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:08:14.764 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:08:14.764 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:08:14.764 -06:00 [DBG] No PKCE used.
2018-07-23 14:08:14.764 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:08:14.764 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:08:22.514 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 14:08:22.530 -06:00 [DBG] Augmenting SignInContext
2018-07-23 14:08:22.530 -06:00 [DBG] Adding idp claim with value: local
2018-07-23 14:08:22.530 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-23 14:08:22.530 -06:00 [DBG] Adding auth_time claim with value: 1532376502
2018-07-23 14:08:22.530 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 14:08:22.531 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFGQUBOGHNQ:0000000B",
  "TimeStamp": "2018-07-23T20:08:22Z",
  "ProcessId": 1610,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:08:22.533 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:08:22.533 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:08:22.533 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 14:08:22.533 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 14:08:22.533 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 14:08:22.533 -06:00 [DBG] Start authorize callback request
2018-07-23 14:08:22.533 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:08:22.534 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:08:22.534 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:08:22.534 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:08:22.534 -06:00 [DBG] No PKCE used.
2018-07-23 14:08:22.534 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:08:22.534 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHekFprTtsjFqidunYIUmF3SfDFud-JG49gMIBr1NZeTiCMg-uqqkxXiCenNhvuNoQjHzb5Kl_CwnW5VaiM04r-l-HS76y4nTc9i5a-MmqSfypN7JjCknRsPlb0T-ngZ_g07kYUtJNASyq5NseORZOUD-H_0trFPKf0W864whuytVab4194pE63Nol_pdnqMDHDClV7w0kxIWnC3zkLs4BVLKyOrAWbUEqt_AD2cRDmIsQAdycQDyQK5PZfZ9ZJ6Be9vvszcnlCvAJiAd6_WizZo7oYuQEaQ_FAEQCyb3eBOekUj_kGO7_45AogIU0wHNFs",
  "Nonce": "636679732947370510.Y2E5M2QwZmYtZTg0My00NzE5LWJmZTQtYWNhYjhlZjdhNTM5OGY1OGE0NGUtODE4Zi00Mjg1LTkxMjMtNWFkZjZiMjVmYTYz",
  "SessionId": "2813ba811c261a850010e560259d3998",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679732947370510.Y2E5M2QwZmYtZTg0My00NzE5LWJmZTQtYWNhYjhlZjdhNTM5OGY1OGE0NGUtODE4Zi00Mjg1LTkxMjMtNWFkZjZiMjVmYTYz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHekFprTtsjFqidunYIUmF3SfDFud-JG49gMIBr1NZeTiCMg-uqqkxXiCenNhvuNoQjHzb5Kl_CwnW5VaiM04r-l-HS76y4nTc9i5a-MmqSfypN7JjCknRsPlb0T-ngZ_g07kYUtJNASyq5NseORZOUD-H_0trFPKf0W864whuytVab4194pE63Nol_pdnqMDHDClV7w0kxIWnC3zkLs4BVLKyOrAWbUEqt_AD2cRDmIsQAdycQDyQK5PZfZ9ZJ6Be9vvszcnlCvAJiAd6_WizZo7oYuQEaQ_FAEQCyb3eBOekUj_kGO7_45AogIU0wHNFs",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 14:08:22.535 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 14:08:22.536 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 14:08:22.536 -06:00 [INF] Showing consent: User has not yet consented
2018-07-23 14:08:22.538 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:08:22.538 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:08:22.538 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:08:22.539 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:08:22.539 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:08:22.539 -06:00 [DBG] No PKCE used.
2018-07-23 14:08:22.539 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:08:22.539 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:08:25.460 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 14:08:25.461 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:08:25.461 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:08:25.461 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:08:25.461 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:08:25.461 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:08:25.461 -06:00 [DBG] No PKCE used.
2018-07-23 14:08:25.462 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:08:25.465 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:08:25.465 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:08:25.465 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 14:08:25.465 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 14:08:25.465 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 14:08:25.465 -06:00 [DBG] Start authorize callback request
2018-07-23 14:08:25.465 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:08:25.465 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:08:25.465 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:08:25.466 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:08:25.466 -06:00 [DBG] No PKCE used.
2018-07-23 14:08:25.466 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:08:25.466 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHekFprTtsjFqidunYIUmF3SfDFud-JG49gMIBr1NZeTiCMg-uqqkxXiCenNhvuNoQjHzb5Kl_CwnW5VaiM04r-l-HS76y4nTc9i5a-MmqSfypN7JjCknRsPlb0T-ngZ_g07kYUtJNASyq5NseORZOUD-H_0trFPKf0W864whuytVab4194pE63Nol_pdnqMDHDClV7w0kxIWnC3zkLs4BVLKyOrAWbUEqt_AD2cRDmIsQAdycQDyQK5PZfZ9ZJ6Be9vvszcnlCvAJiAd6_WizZo7oYuQEaQ_FAEQCyb3eBOekUj_kGO7_45AogIU0wHNFs",
  "Nonce": "636679732947370510.Y2E5M2QwZmYtZTg0My00NzE5LWJmZTQtYWNhYjhlZjdhNTM5OGY1OGE0NGUtODE4Zi00Mjg1LTkxMjMtNWFkZjZiMjVmYTYz",
  "SessionId": "2813ba811c261a850010e560259d3998",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679732947370510.Y2E5M2QwZmYtZTg0My00NzE5LWJmZTQtYWNhYjhlZjdhNTM5OGY1OGE0NGUtODE4Zi00Mjg1LTkxMjMtNWFkZjZiMjVmYTYz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHekFprTtsjFqidunYIUmF3SfDFud-JG49gMIBr1NZeTiCMg-uqqkxXiCenNhvuNoQjHzb5Kl_CwnW5VaiM04r-l-HS76y4nTc9i5a-MmqSfypN7JjCknRsPlb0T-ngZ_g07kYUtJNASyq5NseORZOUD-H_0trFPKf0W864whuytVab4194pE63Nol_pdnqMDHDClV7w0kxIWnC3zkLs4BVLKyOrAWbUEqt_AD2cRDmIsQAdycQDyQK5PZfZ9ZJ6Be9vvszcnlCvAJiAd6_WizZo7oYuQEaQ_FAEQCyb3eBOekUj_kGO7_45AogIU0wHNFs",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 14:08:25.467 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 14:08:25.467 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 14:08:25.467 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-23 14:08:25.467 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:08:25.467 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-23 14:08:25.472 -06:00 [DBG] Creating Implicit Flow response.
2018-07-23 14:08:25.472 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 14:08:25.472 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 14:08:25.484 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****TOIg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****8d4b"
    }
  ],
  "ActivityId": "0HLFGQUBOGHNQ:0000000F",
  "TimeStamp": "2018-07-23T20:08:25Z",
  "ProcessId": 1610,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:08:25.484 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHekFprTtsjFqidunYIUmF3SfDFud-JG49gMIBr1NZeTiCMg-uqqkxXiCenNhvuNoQjHzb5Kl_CwnW5VaiM04r-l-HS76y4nTc9i5a-MmqSfypN7JjCknRsPlb0T-ngZ_g07kYUtJNASyq5NseORZOUD-H_0trFPKf0W864whuytVab4194pE63Nol_pdnqMDHDClV7w0kxIWnC3zkLs4BVLKyOrAWbUEqt_AD2cRDmIsQAdycQDyQK5PZfZ9ZJ6Be9vvszcnlCvAJiAd6_WizZo7oYuQEaQ_FAEQCyb3eBOekUj_kGO7_45AogIU0wHNFs",
  "Scope": "openid profile business email"
}
2018-07-23 14:08:25.484 -06:00 [DBG] Augmenting SignInContext
2018-07-23 14:08:25.484 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 14:08:25.582 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-23 14:08:25.582 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-23 14:08:25.582 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-23 14:08:25.582 -06:00 [DBG] Start token request.
2018-07-23 14:08:25.582 -06:00 [DBG] Start client validation
2018-07-23 14:08:25.582 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-23 14:08:25.582 -06:00 [DBG] Start parsing for secret in post body
2018-07-23 14:08:25.582 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-23 14:08:25.582 -06:00 [DBG] Secret id found: ideaBox
2018-07-23 14:08:25.582 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:08:25.582 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-23 14:08:25.582 -06:00 [DBG] Client validation success
2018-07-23 14:08:25.582 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFGQUBOGHNR:00000003",
  "TimeStamp": "2018-07-23T20:08:25Z",
  "ProcessId": 1610,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:08:25.583 -06:00 [DBG] Start token request validation
2018-07-23 14:08:25.583 -06:00 [DBG] Start validation of authorization code token request
2018-07-23 14:08:25.591 -06:00 [DBG] Validation of authorization code token request success
2018-07-23 14:08:25.591 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "860a541ee009757878b1a78abf8d7223a4ddd2ba3c8bcdd5d57f081a9dbf8d4b",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "860a541ee009757878b1a78abf8d7223a4ddd2ba3c8bcdd5d57f081a9dbf8d4b",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-23 14:08:25.591 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:08:25.591 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-23 14:08:25.591 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:08:25.605 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:08:25.605 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 14:08:25.605 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 14:08:25.616 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****NnxA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****K_FA"
    }
  ],
  "ActivityId": "0HLFGQUBOGHNR:00000003",
  "TimeStamp": "2018-07-23T20:08:25Z",
  "ProcessId": 1610,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:08:25.616 -06:00 [DBG] Token request success.
2018-07-23 14:08:25.623 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-23 14:08:25.623 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-23 14:08:25.623 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-23 14:08:25.623 -06:00 [DBG] Start userinfo request
2018-07-23 14:08:25.623 -06:00 [DBG] Bearer token found in header
2018-07-23 14:08:25.625 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:08:25.625 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:08:25.626 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-23 14:08:25.626 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532376505,
    "exp": 1532380105,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532376502,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-23 14:08:25.627 -06:00 [DBG] Creating userinfo response
2018-07-23 14:08:25.627 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 14:08:25.627 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 14:08:25.627 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-23 14:08:25.627 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 14:08:25.628 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-23 14:08:25.628 -06:00 [DBG] End userinfo request
2018-07-23 14:10:07.807 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-23 14:10:07.808 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-23 14:10:07.808 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-23 14:10:07.808 -06:00 [DBG] Start authorize request
2018-07-23 14:10:07.808 -06:00 [DBG] No user present in authorize request
2018-07-23 14:10:07.808 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:10:07.808 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:10:07.808 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:10:07.808 -06:00 [DBG] No PKCE used.
2018-07-23 14:10:07.808 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:10:07.808 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHewLo6vtY9Lpew6D70HG_fCem_aVIkuOlgAJFfiDrH2BVOfqEClS1hc49cpIStKsGxj8kpavewm6XlQ3ISvKNc-X3yLCeAIf9IBMX3mG9mVmOx0KjdnXqFFfFNw5lzdwilfy7zbYjESzdIS7y75HUB8HnnNOC333XCBXCjsi6YZnBiJHg0C48X3LEUlLM30kfmhVsJipdBUBT6GZqz7tIjwE7XGn5vFc43FjZJD0qD9dSCCMnoAFDqQGLSjH7_VQ0f3VJCZCST4WrHfOsk-FlgNhhkD0LOpoa1U1ErCGhKJKAxGbCiK5TfmeCb_zbdRDN8",
  "Nonce": "636679734078043940.NmQ5ZDIwMTMtNzMxZi00ZDgyLWE4NGQtZDdhYjExOWM2NjY0YjRlODQ3ODUtNmE4Mi00MjkwLWI1M2UtOTllOGY5YmMwMzcz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679734078043940.NmQ5ZDIwMTMtNzMxZi00ZDgyLWE4NGQtZDdhYjExOWM2NjY0YjRlODQ3ODUtNmE4Mi00MjkwLWI1M2UtOTllOGY5YmMwMzcz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHewLo6vtY9Lpew6D70HG_fCem_aVIkuOlgAJFfiDrH2BVOfqEClS1hc49cpIStKsGxj8kpavewm6XlQ3ISvKNc-X3yLCeAIf9IBMX3mG9mVmOx0KjdnXqFFfFNw5lzdwilfy7zbYjESzdIS7y75HUB8HnnNOC333XCBXCjsi6YZnBiJHg0C48X3LEUlLM30kfmhVsJipdBUBT6GZqz7tIjwE7XGn5vFc43FjZJD0qD9dSCCMnoAFDqQGLSjH7_VQ0f3VJCZCST4WrHfOsk-FlgNhhkD0LOpoa1U1ErCGhKJKAxGbCiK5TfmeCb_zbdRDN8",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 14:10:07.808 -06:00 [INF] Showing login: User is not authenticated
2018-07-23 14:10:07.811 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:10:07.811 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:10:07.811 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:10:07.811 -06:00 [DBG] No PKCE used.
2018-07-23 14:10:07.811 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:10:07.811 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:10:16.007 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 14:10:16.021 -06:00 [DBG] Augmenting SignInContext
2018-07-23 14:10:16.021 -06:00 [DBG] Adding idp claim with value: local
2018-07-23 14:10:16.021 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-23 14:10:16.021 -06:00 [DBG] Adding auth_time claim with value: 1532376616
2018-07-23 14:10:16.022 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 14:10:16.022 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFGQUBOGHNQ:00000012",
  "TimeStamp": "2018-07-23T20:10:16Z",
  "ProcessId": 1610,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:10:16.025 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:10:16.025 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:10:16.025 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 14:10:16.025 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 14:10:16.025 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 14:10:16.025 -06:00 [DBG] Start authorize callback request
2018-07-23 14:10:16.025 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:10:16.025 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:10:16.025 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:10:16.025 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:10:16.025 -06:00 [DBG] No PKCE used.
2018-07-23 14:10:16.026 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:10:16.026 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHewLo6vtY9Lpew6D70HG_fCem_aVIkuOlgAJFfiDrH2BVOfqEClS1hc49cpIStKsGxj8kpavewm6XlQ3ISvKNc-X3yLCeAIf9IBMX3mG9mVmOx0KjdnXqFFfFNw5lzdwilfy7zbYjESzdIS7y75HUB8HnnNOC333XCBXCjsi6YZnBiJHg0C48X3LEUlLM30kfmhVsJipdBUBT6GZqz7tIjwE7XGn5vFc43FjZJD0qD9dSCCMnoAFDqQGLSjH7_VQ0f3VJCZCST4WrHfOsk-FlgNhhkD0LOpoa1U1ErCGhKJKAxGbCiK5TfmeCb_zbdRDN8",
  "Nonce": "636679734078043940.NmQ5ZDIwMTMtNzMxZi00ZDgyLWE4NGQtZDdhYjExOWM2NjY0YjRlODQ3ODUtNmE4Mi00MjkwLWI1M2UtOTllOGY5YmMwMzcz",
  "SessionId": "0ec7dea1d867421e3ec4237365fcffd9",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679734078043940.NmQ5ZDIwMTMtNzMxZi00ZDgyLWE4NGQtZDdhYjExOWM2NjY0YjRlODQ3ODUtNmE4Mi00MjkwLWI1M2UtOTllOGY5YmMwMzcz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHewLo6vtY9Lpew6D70HG_fCem_aVIkuOlgAJFfiDrH2BVOfqEClS1hc49cpIStKsGxj8kpavewm6XlQ3ISvKNc-X3yLCeAIf9IBMX3mG9mVmOx0KjdnXqFFfFNw5lzdwilfy7zbYjESzdIS7y75HUB8HnnNOC333XCBXCjsi6YZnBiJHg0C48X3LEUlLM30kfmhVsJipdBUBT6GZqz7tIjwE7XGn5vFc43FjZJD0qD9dSCCMnoAFDqQGLSjH7_VQ0f3VJCZCST4WrHfOsk-FlgNhhkD0LOpoa1U1ErCGhKJKAxGbCiK5TfmeCb_zbdRDN8",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 14:10:16.027 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 14:10:16.027 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 14:10:16.027 -06:00 [INF] Showing consent: User has not yet consented
2018-07-23 14:10:16.030 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:10:16.030 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:10:16.030 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:10:16.030 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:10:16.030 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:10:16.030 -06:00 [DBG] No PKCE used.
2018-07-23 14:10:16.030 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:10:16.030 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:10:21.888 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 14:10:21.888 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:10:21.888 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:10:21.889 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:10:21.889 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:10:21.889 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:10:21.889 -06:00 [DBG] No PKCE used.
2018-07-23 14:10:21.889 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:10:21.892 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:10:21.892 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:10:21.892 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 14:10:21.892 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 14:10:21.892 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 14:10:21.892 -06:00 [DBG] Start authorize callback request
2018-07-23 14:10:21.892 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:10:21.893 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:10:21.893 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:10:21.893 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:10:21.893 -06:00 [DBG] No PKCE used.
2018-07-23 14:10:21.893 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:10:21.893 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHewLo6vtY9Lpew6D70HG_fCem_aVIkuOlgAJFfiDrH2BVOfqEClS1hc49cpIStKsGxj8kpavewm6XlQ3ISvKNc-X3yLCeAIf9IBMX3mG9mVmOx0KjdnXqFFfFNw5lzdwilfy7zbYjESzdIS7y75HUB8HnnNOC333XCBXCjsi6YZnBiJHg0C48X3LEUlLM30kfmhVsJipdBUBT6GZqz7tIjwE7XGn5vFc43FjZJD0qD9dSCCMnoAFDqQGLSjH7_VQ0f3VJCZCST4WrHfOsk-FlgNhhkD0LOpoa1U1ErCGhKJKAxGbCiK5TfmeCb_zbdRDN8",
  "Nonce": "636679734078043940.NmQ5ZDIwMTMtNzMxZi00ZDgyLWE4NGQtZDdhYjExOWM2NjY0YjRlODQ3ODUtNmE4Mi00MjkwLWI1M2UtOTllOGY5YmMwMzcz",
  "SessionId": "0ec7dea1d867421e3ec4237365fcffd9",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679734078043940.NmQ5ZDIwMTMtNzMxZi00ZDgyLWE4NGQtZDdhYjExOWM2NjY0YjRlODQ3ODUtNmE4Mi00MjkwLWI1M2UtOTllOGY5YmMwMzcz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHewLo6vtY9Lpew6D70HG_fCem_aVIkuOlgAJFfiDrH2BVOfqEClS1hc49cpIStKsGxj8kpavewm6XlQ3ISvKNc-X3yLCeAIf9IBMX3mG9mVmOx0KjdnXqFFfFNw5lzdwilfy7zbYjESzdIS7y75HUB8HnnNOC333XCBXCjsi6YZnBiJHg0C48X3LEUlLM30kfmhVsJipdBUBT6GZqz7tIjwE7XGn5vFc43FjZJD0qD9dSCCMnoAFDqQGLSjH7_VQ0f3VJCZCST4WrHfOsk-FlgNhhkD0LOpoa1U1ErCGhKJKAxGbCiK5TfmeCb_zbdRDN8",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 14:10:21.894 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 14:10:21.894 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 14:10:21.894 -06:00 [INF] User consented to scopes: ["openid","profile","email"]
2018-07-23 14:10:21.894 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:10:21.894 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-23 14:10:21.899 -06:00 [DBG] Creating Implicit Flow response.
2018-07-23 14:10:21.899 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 14:10:21.899 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 14:10:21.910 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****4CrA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****4a47"
    }
  ],
  "ActivityId": "0HLFGQUBOGHNQ:00000016",
  "TimeStamp": "2018-07-23T20:10:21Z",
  "ProcessId": 1610,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:10:21.910 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHewLo6vtY9Lpew6D70HG_fCem_aVIkuOlgAJFfiDrH2BVOfqEClS1hc49cpIStKsGxj8kpavewm6XlQ3ISvKNc-X3yLCeAIf9IBMX3mG9mVmOx0KjdnXqFFfFNw5lzdwilfy7zbYjESzdIS7y75HUB8HnnNOC333XCBXCjsi6YZnBiJHg0C48X3LEUlLM30kfmhVsJipdBUBT6GZqz7tIjwE7XGn5vFc43FjZJD0qD9dSCCMnoAFDqQGLSjH7_VQ0f3VJCZCST4WrHfOsk-FlgNhhkD0LOpoa1U1ErCGhKJKAxGbCiK5TfmeCb_zbdRDN8",
  "Scope": "openid profile email"
}
2018-07-23 14:10:21.911 -06:00 [DBG] Augmenting SignInContext
2018-07-23 14:10:21.911 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 14:10:21.947 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-23 14:10:21.947 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-23 14:10:21.947 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-23 14:10:21.947 -06:00 [DBG] Start token request.
2018-07-23 14:10:21.947 -06:00 [DBG] Start client validation
2018-07-23 14:10:21.947 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-23 14:10:21.947 -06:00 [DBG] Start parsing for secret in post body
2018-07-23 14:10:21.948 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-23 14:10:21.948 -06:00 [DBG] Secret id found: ideaBox
2018-07-23 14:10:21.948 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:10:21.948 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-23 14:10:21.948 -06:00 [DBG] Client validation success
2018-07-23 14:10:21.948 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFGQUBOGHNR:00000005",
  "TimeStamp": "2018-07-23T20:10:21Z",
  "ProcessId": 1610,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:10:21.948 -06:00 [DBG] Start token request validation
2018-07-23 14:10:21.948 -06:00 [DBG] Start validation of authorization code token request
2018-07-23 14:10:21.957 -06:00 [DBG] Validation of authorization code token request success
2018-07-23 14:10:21.957 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "05769ec2e0fd4e259a5f1d8ad60478013f74d0ad1bf6adc9c4d060e7ed564a47",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "05769ec2e0fd4e259a5f1d8ad60478013f74d0ad1bf6adc9c4d060e7ed564a47",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-23 14:10:21.958 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:10:21.958 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-23 14:10:21.958 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:10:22.009 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:10:22.009 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 14:10:22.009 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 14:10:22.021 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****RM6Q"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****6e-g"
    }
  ],
  "ActivityId": "0HLFGQUBOGHNR:00000005",
  "TimeStamp": "2018-07-23T20:10:22Z",
  "ProcessId": 1610,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:10:22.021 -06:00 [DBG] Token request success.
2018-07-23 14:10:22.024 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-23 14:10:22.024 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-23 14:10:22.025 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-23 14:10:22.025 -06:00 [DBG] Start userinfo request
2018-07-23 14:10:22.025 -06:00 [DBG] Bearer token found in header
2018-07-23 14:10:22.027 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:10:22.027 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:10:22.028 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-23 14:10:22.028 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532376621,
    "exp": 1532380221,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532376616,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-23 14:10:22.028 -06:00 [DBG] Creating userinfo response
2018-07-23 14:10:22.028 -06:00 [DBG] Scopes in access token: openid profile email
2018-07-23 14:10:22.028 -06:00 [DBG] Scopes in access token: openid profile email
2018-07-23 14:10:22.028 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
2018-07-23 14:10:22.028 -06:00 [DBG] Scopes in access token: openid profile email
2018-07-23 14:10:22.029 -06:00 [INF] Profile service returned to the following claim types: sub name given_name family_name email email_verified website preferred_username
2018-07-23 14:10:22.029 -06:00 [DBG] End userinfo request
2018-07-23 14:36:08.377 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-23 14:36:08.406 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-23 14:36:08.409 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-23 14:36:08.409 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-23 14:36:08.409 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-23 14:36:08.409 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-23 14:36:26.536 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-23 14:36:26.650 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-23 14:36:26.650 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-23 14:36:26.652 -06:00 [DBG] Start discovery request
2018-07-23 14:36:26.826 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-23 14:36:26.827 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-23 14:36:26.827 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-23 14:36:26.830 -06:00 [DBG] Start key discovery request
2018-07-23 14:36:26.901 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-23 14:36:26.904 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-23 14:36:26.904 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-23 14:36:26.907 -06:00 [DBG] Start authorize request
2018-07-23 14:36:26.922 -06:00 [DBG] No user present in authorize request
2018-07-23 14:36:26.926 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:36:26.937 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:36:26.942 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:36:26.943 -06:00 [DBG] No PKCE used.
2018-07-23 14:36:26.966 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:36:26.977 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdSjkEIda1BacDzTDiZRhmmSHa8lVHqUyjbne3fp1K9jnFCjKEOb6XFC9htDcDd0449IVBnbwgNjD6ld2XDk5FOH2dLDm_Sl2fK04FL5reLH1jGFftKDbXtkzl8noEE9PN5ciO_ujZgmE5giBPmLgY5tJ8pBKIQRO2JPS7EVuFJ9H1ul-qAaTabk5b-NEgkOQhaYhiDb1CclBsf5_0BzEdq_4w6Qb5A0Ez7xJz55Y6RfiWTgjmyz1pzOI0T3xAmDNkAVTEwt3KDTWQnqsR0NSO8vDw_bP7o6sl5yobfhrmIDv5lZqpt2vX5jAXzMaGxazA",
  "Nonce": "636679749868657270.YjZjYWY3YTMtNWYzMi00NjNmLTk2ZjgtOTQyN2QxYWJmMzc1NzFmNWNlYzUtMDUzYi00Mjg5LWExODItN2EwYTA2YTc4Y2Ew",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679749868657270.YjZjYWY3YTMtNWYzMi00NjNmLTk2ZjgtOTQyN2QxYWJmMzc1NzFmNWNlYzUtMDUzYi00Mjg5LWExODItN2EwYTA2YTc4Y2Ew",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdSjkEIda1BacDzTDiZRhmmSHa8lVHqUyjbne3fp1K9jnFCjKEOb6XFC9htDcDd0449IVBnbwgNjD6ld2XDk5FOH2dLDm_Sl2fK04FL5reLH1jGFftKDbXtkzl8noEE9PN5ciO_ujZgmE5giBPmLgY5tJ8pBKIQRO2JPS7EVuFJ9H1ul-qAaTabk5b-NEgkOQhaYhiDb1CclBsf5_0BzEdq_4w6Qb5A0Ez7xJz55Y6RfiWTgjmyz1pzOI0T3xAmDNkAVTEwt3KDTWQnqsR0NSO8vDw_bP7o6sl5yobfhrmIDv5lZqpt2vX5jAXzMaGxazA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 14:36:26.983 -06:00 [INF] Showing login: User is not authenticated
2018-07-23 14:36:27.275 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:36:27.276 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:36:27.276 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:36:27.276 -06:00 [DBG] No PKCE used.
2018-07-23 14:36:27.276 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:36:27.278 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:36:39.475 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 14:36:40.666 -06:00 [DBG] Augmenting SignInContext
2018-07-23 14:36:40.667 -06:00 [DBG] Adding idp claim with value: local
2018-07-23 14:36:40.667 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-23 14:36:40.667 -06:00 [DBG] Adding auth_time claim with value: 1532378200
2018-07-23 14:36:40.697 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 14:36:40.725 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFGRFR4MACC:00000003",
  "TimeStamp": "2018-07-23T20:36:40Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:36:40.746 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:36:40.746 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:36:40.746 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 14:36:40.747 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 14:36:40.747 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 14:36:40.751 -06:00 [DBG] Start authorize callback request
2018-07-23 14:36:40.754 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:36:40.754 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:36:40.754 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:36:40.754 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:36:40.754 -06:00 [DBG] No PKCE used.
2018-07-23 14:36:40.754 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:36:40.754 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdSjkEIda1BacDzTDiZRhmmSHa8lVHqUyjbne3fp1K9jnFCjKEOb6XFC9htDcDd0449IVBnbwgNjD6ld2XDk5FOH2dLDm_Sl2fK04FL5reLH1jGFftKDbXtkzl8noEE9PN5ciO_ujZgmE5giBPmLgY5tJ8pBKIQRO2JPS7EVuFJ9H1ul-qAaTabk5b-NEgkOQhaYhiDb1CclBsf5_0BzEdq_4w6Qb5A0Ez7xJz55Y6RfiWTgjmyz1pzOI0T3xAmDNkAVTEwt3KDTWQnqsR0NSO8vDw_bP7o6sl5yobfhrmIDv5lZqpt2vX5jAXzMaGxazA",
  "Nonce": "636679749868657270.YjZjYWY3YTMtNWYzMi00NjNmLTk2ZjgtOTQyN2QxYWJmMzc1NzFmNWNlYzUtMDUzYi00Mjg5LWExODItN2EwYTA2YTc4Y2Ew",
  "SessionId": "d80a878e539efc35c753d160852811c6",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679749868657270.YjZjYWY3YTMtNWYzMi00NjNmLTk2ZjgtOTQyN2QxYWJmMzc1NzFmNWNlYzUtMDUzYi00Mjg5LWExODItN2EwYTA2YTc4Y2Ew",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdSjkEIda1BacDzTDiZRhmmSHa8lVHqUyjbne3fp1K9jnFCjKEOb6XFC9htDcDd0449IVBnbwgNjD6ld2XDk5FOH2dLDm_Sl2fK04FL5reLH1jGFftKDbXtkzl8noEE9PN5ciO_ujZgmE5giBPmLgY5tJ8pBKIQRO2JPS7EVuFJ9H1ul-qAaTabk5b-NEgkOQhaYhiDb1CclBsf5_0BzEdq_4w6Qb5A0Ez7xJz55Y6RfiWTgjmyz1pzOI0T3xAmDNkAVTEwt3KDTWQnqsR0NSO8vDw_bP7o6sl5yobfhrmIDv5lZqpt2vX5jAXzMaGxazA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 14:36:40.792 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 14:36:40.793 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 14:36:40.793 -06:00 [INF] Showing consent: User has not yet consented
2018-07-23 14:36:40.796 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:36:40.797 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:36:40.823 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:36:40.823 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:36:40.823 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:36:40.823 -06:00 [DBG] No PKCE used.
2018-07-23 14:36:40.823 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:36:40.823 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:36:46.084 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 14:36:46.084 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:36:46.084 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:36:46.104 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:36:46.104 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:36:46.104 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:36:46.104 -06:00 [DBG] No PKCE used.
2018-07-23 14:36:46.104 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:36:46.120 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:36:46.120 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 14:36:46.120 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 14:36:46.120 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 14:36:46.120 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 14:36:46.120 -06:00 [DBG] Start authorize callback request
2018-07-23 14:36:46.150 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:36:46.150 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 14:36:46.150 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:36:46.150 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 14:36:46.150 -06:00 [DBG] No PKCE used.
2018-07-23 14:36:46.150 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 14:36:46.150 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdSjkEIda1BacDzTDiZRhmmSHa8lVHqUyjbne3fp1K9jnFCjKEOb6XFC9htDcDd0449IVBnbwgNjD6ld2XDk5FOH2dLDm_Sl2fK04FL5reLH1jGFftKDbXtkzl8noEE9PN5ciO_ujZgmE5giBPmLgY5tJ8pBKIQRO2JPS7EVuFJ9H1ul-qAaTabk5b-NEgkOQhaYhiDb1CclBsf5_0BzEdq_4w6Qb5A0Ez7xJz55Y6RfiWTgjmyz1pzOI0T3xAmDNkAVTEwt3KDTWQnqsR0NSO8vDw_bP7o6sl5yobfhrmIDv5lZqpt2vX5jAXzMaGxazA",
  "Nonce": "636679749868657270.YjZjYWY3YTMtNWYzMi00NjNmLTk2ZjgtOTQyN2QxYWJmMzc1NzFmNWNlYzUtMDUzYi00Mjg5LWExODItN2EwYTA2YTc4Y2Ew",
  "SessionId": "d80a878e539efc35c753d160852811c6",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679749868657270.YjZjYWY3YTMtNWYzMi00NjNmLTk2ZjgtOTQyN2QxYWJmMzc1NzFmNWNlYzUtMDUzYi00Mjg5LWExODItN2EwYTA2YTc4Y2Ew",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdSjkEIda1BacDzTDiZRhmmSHa8lVHqUyjbne3fp1K9jnFCjKEOb6XFC9htDcDd0449IVBnbwgNjD6ld2XDk5FOH2dLDm_Sl2fK04FL5reLH1jGFftKDbXtkzl8noEE9PN5ciO_ujZgmE5giBPmLgY5tJ8pBKIQRO2JPS7EVuFJ9H1ul-qAaTabk5b-NEgkOQhaYhiDb1CclBsf5_0BzEdq_4w6Qb5A0Ez7xJz55Y6RfiWTgjmyz1pzOI0T3xAmDNkAVTEwt3KDTWQnqsR0NSO8vDw_bP7o6sl5yobfhrmIDv5lZqpt2vX5jAXzMaGxazA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 14:36:46.152 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 14:36:46.152 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 14:36:46.158 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-23 14:36:46.170 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:36:46.177 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-23 14:36:46.198 -06:00 [DBG] Creating Implicit Flow response.
2018-07-23 14:36:46.207 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 14:36:46.209 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 14:36:46.280 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****-B3A"
    },
    {
      "TokenType": "code",
      "TokenValue": "****0dde"
    }
  ],
  "ActivityId": "0HLFGRFR4MACC:00000007",
  "TimeStamp": "2018-07-23T20:36:46Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:36:46.282 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdSjkEIda1BacDzTDiZRhmmSHa8lVHqUyjbne3fp1K9jnFCjKEOb6XFC9htDcDd0449IVBnbwgNjD6ld2XDk5FOH2dLDm_Sl2fK04FL5reLH1jGFftKDbXtkzl8noEE9PN5ciO_ujZgmE5giBPmLgY5tJ8pBKIQRO2JPS7EVuFJ9H1ul-qAaTabk5b-NEgkOQhaYhiDb1CclBsf5_0BzEdq_4w6Qb5A0Ez7xJz55Y6RfiWTgjmyz1pzOI0T3xAmDNkAVTEwt3KDTWQnqsR0NSO8vDw_bP7o6sl5yobfhrmIDv5lZqpt2vX5jAXzMaGxazA",
  "Scope": "openid profile business email"
}
2018-07-23 14:36:46.297 -06:00 [DBG] Augmenting SignInContext
2018-07-23 14:36:46.298 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 14:36:46.404 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-23 14:36:46.406 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-23 14:36:46.406 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-23 14:36:46.413 -06:00 [DBG] Start token request.
2018-07-23 14:36:46.418 -06:00 [DBG] Start client validation
2018-07-23 14:36:46.422 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-23 14:36:46.425 -06:00 [DBG] Start parsing for secret in post body
2018-07-23 14:36:46.425 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-23 14:36:46.425 -06:00 [DBG] Secret id found: ideaBox
2018-07-23 14:36:46.425 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:36:46.432 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-23 14:36:46.432 -06:00 [DBG] Client validation success
2018-07-23 14:36:46.435 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFGRFR4MACB:00000003",
  "TimeStamp": "2018-07-23T20:36:46Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:36:46.439 -06:00 [DBG] Start token request validation
2018-07-23 14:36:46.448 -06:00 [DBG] Start validation of authorization code token request
2018-07-23 14:36:46.466 -06:00 [DBG] Validation of authorization code token request success
2018-07-23 14:36:46.469 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "3ba36cdb4e226be9236e48300df9e822455c2c163cf6b640f1c972c7f4710dde",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "3ba36cdb4e226be9236e48300df9e822455c2c163cf6b640f1c972c7f4710dde",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-23 14:36:46.481 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:36:46.489 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-23 14:36:46.490 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 14:36:46.511 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:36:46.511 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 14:36:46.511 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 14:36:46.525 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****XlTg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****u4tA"
    }
  ],
  "ActivityId": "0HLFGRFR4MACB:00000003",
  "TimeStamp": "2018-07-23T20:36:46Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 14:36:46.526 -06:00 [DBG] Token request success.
2018-07-23 14:36:46.537 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-23 14:36:46.538 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-23 14:36:46.538 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-23 14:36:46.543 -06:00 [DBG] Start userinfo request
2018-07-23 14:36:46.546 -06:00 [DBG] Bearer token found in header
2018-07-23 14:36:46.604 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:36:46.607 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 14:36:46.609 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-23 14:36:46.611 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532378206,
    "exp": 1532381806,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532378200,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-23 14:36:46.617 -06:00 [DBG] Creating userinfo response
2018-07-23 14:36:46.620 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 14:36:46.621 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 14:36:46.623 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-23 14:36:46.623 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 14:36:46.625 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-23 14:36:46.625 -06:00 [DBG] End userinfo request
2018-07-23 15:01:37.158 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-23 15:01:37.159 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-23 15:01:37.159 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-23 15:01:37.159 -06:00 [DBG] Start discovery request
2018-07-23 15:01:37.220 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-23 15:01:37.221 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-23 15:01:37.221 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-23 15:01:37.221 -06:00 [DBG] Start key discovery request
2018-07-23 15:01:37.249 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-23 15:01:37.249 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-23 15:01:37.249 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-23 15:01:37.249 -06:00 [DBG] Start authorize request
2018-07-23 15:01:37.250 -06:00 [DBG] No user present in authorize request
2018-07-23 15:01:37.250 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:01:37.250 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:01:37.250 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:01:37.250 -06:00 [DBG] No PKCE used.
2018-07-23 15:01:37.250 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:01:37.250 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdyUHJdz7ikKWbYDuC2HOrwYLFg73gsnPQ1bXlFHn-U5v-lfMdUkQMYY9fTdWd3nCGHAJ9pknyBBsuFgBgUYvAp0fr4w19KVnJ69yWSc5ZyCHhWjuO80VK993U3TZaY4qS6oTnb3NQG7SRrk3Q-OMHmglsHCW0Fp-hsyYWqx0_litqouPD2bE71EuKjQQQ_sqCWT3D9MKL4eFvJw_Njnvl84g9gnSOphwASbnMeYr8nrds8VkmmuHaEbibSc6lhbyuhSgoUBmCQNZw9ucvhQviFscO4NDIorsX7KV2Zh7daF1K0nUv60dhX5YD68gJVsJisJASM0pV7ZiPyxiLofLhBxEU0yyOB_9-2t61E2Awz2iBJaApvhrMgLUAaV8juj-o",
  "Nonce": "636679764972379990.YmExZTU1NjctYzBlOS00MTcwLWEwNDEtZWRkYjQ1N2Q1YzU5OGNiNjJmOTYtMDAxNC00ZmJlLWFmNTktN2VmZDJmZWUyMzcx",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679764972379990.YmExZTU1NjctYzBlOS00MTcwLWEwNDEtZWRkYjQ1N2Q1YzU5OGNiNjJmOTYtMDAxNC00ZmJlLWFmNTktN2VmZDJmZWUyMzcx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdyUHJdz7ikKWbYDuC2HOrwYLFg73gsnPQ1bXlFHn-U5v-lfMdUkQMYY9fTdWd3nCGHAJ9pknyBBsuFgBgUYvAp0fr4w19KVnJ69yWSc5ZyCHhWjuO80VK993U3TZaY4qS6oTnb3NQG7SRrk3Q-OMHmglsHCW0Fp-hsyYWqx0_litqouPD2bE71EuKjQQQ_sqCWT3D9MKL4eFvJw_Njnvl84g9gnSOphwASbnMeYr8nrds8VkmmuHaEbibSc6lhbyuhSgoUBmCQNZw9ucvhQviFscO4NDIorsX7KV2Zh7daF1K0nUv60dhX5YD68gJVsJisJASM0pV7ZiPyxiLofLhBxEU0yyOB_9-2t61E2Awz2iBJaApvhrMgLUAaV8juj-o",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 15:01:37.250 -06:00 [INF] Showing login: User is not authenticated
2018-07-23 15:01:37.253 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:01:37.253 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:01:37.253 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:01:37.253 -06:00 [DBG] No PKCE used.
2018-07-23 15:01:37.253 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:01:37.253 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:01:45.036 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 15:01:45.051 -06:00 [DBG] Augmenting SignInContext
2018-07-23 15:01:45.051 -06:00 [DBG] Adding idp claim with value: local
2018-07-23 15:01:45.051 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-23 15:01:45.051 -06:00 [DBG] Adding auth_time claim with value: 1532379705
2018-07-23 15:01:45.051 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 15:01:45.051 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFGRFR4MACE:00000003",
  "TimeStamp": "2018-07-23T21:01:45Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:01:45.054 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:01:45.054 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:01:45.054 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 15:01:45.054 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 15:01:45.054 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 15:01:45.054 -06:00 [DBG] Start authorize callback request
2018-07-23 15:01:45.054 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:01:45.054 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:01:45.054 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:01:45.054 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:01:45.054 -06:00 [DBG] No PKCE used.
2018-07-23 15:01:45.054 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:01:45.055 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdyUHJdz7ikKWbYDuC2HOrwYLFg73gsnPQ1bXlFHn-U5v-lfMdUkQMYY9fTdWd3nCGHAJ9pknyBBsuFgBgUYvAp0fr4w19KVnJ69yWSc5ZyCHhWjuO80VK993U3TZaY4qS6oTnb3NQG7SRrk3Q-OMHmglsHCW0Fp-hsyYWqx0_litqouPD2bE71EuKjQQQ_sqCWT3D9MKL4eFvJw_Njnvl84g9gnSOphwASbnMeYr8nrds8VkmmuHaEbibSc6lhbyuhSgoUBmCQNZw9ucvhQviFscO4NDIorsX7KV2Zh7daF1K0nUv60dhX5YD68gJVsJisJASM0pV7ZiPyxiLofLhBxEU0yyOB_9-2t61E2Awz2iBJaApvhrMgLUAaV8juj-o",
  "Nonce": "636679764972379990.YmExZTU1NjctYzBlOS00MTcwLWEwNDEtZWRkYjQ1N2Q1YzU5OGNiNjJmOTYtMDAxNC00ZmJlLWFmNTktN2VmZDJmZWUyMzcx",
  "SessionId": "8052ce2cd06bdf6d00773925d0d97b86",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679764972379990.YmExZTU1NjctYzBlOS00MTcwLWEwNDEtZWRkYjQ1N2Q1YzU5OGNiNjJmOTYtMDAxNC00ZmJlLWFmNTktN2VmZDJmZWUyMzcx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdyUHJdz7ikKWbYDuC2HOrwYLFg73gsnPQ1bXlFHn-U5v-lfMdUkQMYY9fTdWd3nCGHAJ9pknyBBsuFgBgUYvAp0fr4w19KVnJ69yWSc5ZyCHhWjuO80VK993U3TZaY4qS6oTnb3NQG7SRrk3Q-OMHmglsHCW0Fp-hsyYWqx0_litqouPD2bE71EuKjQQQ_sqCWT3D9MKL4eFvJw_Njnvl84g9gnSOphwASbnMeYr8nrds8VkmmuHaEbibSc6lhbyuhSgoUBmCQNZw9ucvhQviFscO4NDIorsX7KV2Zh7daF1K0nUv60dhX5YD68gJVsJisJASM0pV7ZiPyxiLofLhBxEU0yyOB_9-2t61E2Awz2iBJaApvhrMgLUAaV8juj-o",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 15:01:45.056 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 15:01:45.056 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 15:01:45.056 -06:00 [INF] Showing consent: User has not yet consented
2018-07-23 15:01:45.059 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:01:45.059 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:01:45.059 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:01:45.059 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:01:45.059 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:01:45.059 -06:00 [DBG] No PKCE used.
2018-07-23 15:01:45.059 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:01:45.059 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:01:47.454 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 15:01:47.455 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:01:47.455 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:01:47.455 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:01:47.455 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:01:47.455 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:01:47.455 -06:00 [DBG] No PKCE used.
2018-07-23 15:01:47.455 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:01:47.459 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:01:47.459 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:01:47.459 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 15:01:47.459 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 15:01:47.459 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 15:01:47.459 -06:00 [DBG] Start authorize callback request
2018-07-23 15:01:47.459 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:01:47.459 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:01:47.459 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:01:47.459 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:01:47.459 -06:00 [DBG] No PKCE used.
2018-07-23 15:01:47.459 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:01:47.459 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdyUHJdz7ikKWbYDuC2HOrwYLFg73gsnPQ1bXlFHn-U5v-lfMdUkQMYY9fTdWd3nCGHAJ9pknyBBsuFgBgUYvAp0fr4w19KVnJ69yWSc5ZyCHhWjuO80VK993U3TZaY4qS6oTnb3NQG7SRrk3Q-OMHmglsHCW0Fp-hsyYWqx0_litqouPD2bE71EuKjQQQ_sqCWT3D9MKL4eFvJw_Njnvl84g9gnSOphwASbnMeYr8nrds8VkmmuHaEbibSc6lhbyuhSgoUBmCQNZw9ucvhQviFscO4NDIorsX7KV2Zh7daF1K0nUv60dhX5YD68gJVsJisJASM0pV7ZiPyxiLofLhBxEU0yyOB_9-2t61E2Awz2iBJaApvhrMgLUAaV8juj-o",
  "Nonce": "636679764972379990.YmExZTU1NjctYzBlOS00MTcwLWEwNDEtZWRkYjQ1N2Q1YzU5OGNiNjJmOTYtMDAxNC00ZmJlLWFmNTktN2VmZDJmZWUyMzcx",
  "SessionId": "8052ce2cd06bdf6d00773925d0d97b86",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679764972379990.YmExZTU1NjctYzBlOS00MTcwLWEwNDEtZWRkYjQ1N2Q1YzU5OGNiNjJmOTYtMDAxNC00ZmJlLWFmNTktN2VmZDJmZWUyMzcx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdyUHJdz7ikKWbYDuC2HOrwYLFg73gsnPQ1bXlFHn-U5v-lfMdUkQMYY9fTdWd3nCGHAJ9pknyBBsuFgBgUYvAp0fr4w19KVnJ69yWSc5ZyCHhWjuO80VK993U3TZaY4qS6oTnb3NQG7SRrk3Q-OMHmglsHCW0Fp-hsyYWqx0_litqouPD2bE71EuKjQQQ_sqCWT3D9MKL4eFvJw_Njnvl84g9gnSOphwASbnMeYr8nrds8VkmmuHaEbibSc6lhbyuhSgoUBmCQNZw9ucvhQviFscO4NDIorsX7KV2Zh7daF1K0nUv60dhX5YD68gJVsJisJASM0pV7ZiPyxiLofLhBxEU0yyOB_9-2t61E2Awz2iBJaApvhrMgLUAaV8juj-o",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 15:01:47.461 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 15:01:47.461 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 15:01:47.461 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-23 15:01:47.461 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:01:47.461 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-23 15:01:47.465 -06:00 [DBG] Creating Implicit Flow response.
2018-07-23 15:01:47.466 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 15:01:47.466 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 15:01:47.477 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****XCzQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****9414"
    }
  ],
  "ActivityId": "0HLFGRFR4MACE:00000007",
  "TimeStamp": "2018-07-23T21:01:47Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:01:47.477 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdyUHJdz7ikKWbYDuC2HOrwYLFg73gsnPQ1bXlFHn-U5v-lfMdUkQMYY9fTdWd3nCGHAJ9pknyBBsuFgBgUYvAp0fr4w19KVnJ69yWSc5ZyCHhWjuO80VK993U3TZaY4qS6oTnb3NQG7SRrk3Q-OMHmglsHCW0Fp-hsyYWqx0_litqouPD2bE71EuKjQQQ_sqCWT3D9MKL4eFvJw_Njnvl84g9gnSOphwASbnMeYr8nrds8VkmmuHaEbibSc6lhbyuhSgoUBmCQNZw9ucvhQviFscO4NDIorsX7KV2Zh7daF1K0nUv60dhX5YD68gJVsJisJASM0pV7ZiPyxiLofLhBxEU0yyOB_9-2t61E2Awz2iBJaApvhrMgLUAaV8juj-o",
  "Scope": "openid profile business email"
}
2018-07-23 15:01:47.477 -06:00 [DBG] Augmenting SignInContext
2018-07-23 15:01:47.478 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 15:01:47.574 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-23 15:01:47.575 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-23 15:01:47.575 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-23 15:01:47.575 -06:00 [DBG] Start token request.
2018-07-23 15:01:47.575 -06:00 [DBG] Start client validation
2018-07-23 15:01:47.575 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-23 15:01:47.575 -06:00 [DBG] Start parsing for secret in post body
2018-07-23 15:01:47.575 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-23 15:01:47.575 -06:00 [DBG] Secret id found: ideaBox
2018-07-23 15:01:47.575 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:01:47.575 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-23 15:01:47.575 -06:00 [DBG] Client validation success
2018-07-23 15:01:47.575 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFGRFR4MACD:00000003",
  "TimeStamp": "2018-07-23T21:01:47Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:01:47.575 -06:00 [DBG] Start token request validation
2018-07-23 15:01:47.576 -06:00 [DBG] Start validation of authorization code token request
2018-07-23 15:01:47.585 -06:00 [DBG] Validation of authorization code token request success
2018-07-23 15:01:47.585 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "a69262ecdb58ae3e85a6cdd919615903281510b031cc97b9e657fcc6d5809414",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "a69262ecdb58ae3e85a6cdd919615903281510b031cc97b9e657fcc6d5809414",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-23 15:01:47.585 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:01:47.585 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-23 15:01:47.585 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:01:47.599 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:01:47.599 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 15:01:47.599 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 15:01:47.611 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ecMg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****HhCA"
    }
  ],
  "ActivityId": "0HLFGRFR4MACD:00000003",
  "TimeStamp": "2018-07-23T21:01:47Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:01:47.611 -06:00 [DBG] Token request success.
2018-07-23 15:01:47.617 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-23 15:01:47.618 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-23 15:01:47.618 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-23 15:01:47.618 -06:00 [DBG] Start userinfo request
2018-07-23 15:01:47.618 -06:00 [DBG] Bearer token found in header
2018-07-23 15:01:47.620 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:01:47.620 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:01:47.621 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-23 15:01:47.622 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532379707,
    "exp": 1532383307,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532379705,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-23 15:01:47.622 -06:00 [DBG] Creating userinfo response
2018-07-23 15:01:47.622 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 15:01:47.622 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 15:01:47.622 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-23 15:01:47.622 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 15:01:47.624 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-23 15:01:47.624 -06:00 [DBG] End userinfo request
2018-07-23 15:07:13.850 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:07:13.850 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:07:13.851 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-23 15:07:13.851 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-23 15:07:13.851 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-23 15:07:13.851 -06:00 [DBG] Start authorize request
2018-07-23 15:07:13.851 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:07:13.851 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:07:13.851 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:07:13.851 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:07:13.852 -06:00 [DBG] No PKCE used.
2018-07-23 15:07:13.852 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:07:13.852 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfeYOjnnicYV3w4p0veMJxzqwvB0roMB9gwiuvnZz5HqxtT3V6TLKFaXg_S6xJEJCxq-3kRcfUk78qAVHQq415_CGl6XBWnvfAKI_ZIBH8u-wa-0aYPxlOwqSPMfPUuu5PMIhOZhDu_XKBlVJQYcxzaYKV63QWWgdJCqP1fVzBWYMZY_nY3K6yL6dXaab3wQL57EVr6QSci-_OYsxF81lMqux0InmpEnm47FsAeumS2I7bnjdKFhPir6as45MQY-GICZQCwfHX4VWebT-NJjcU_18ELZd174Sl6QW1O4z_8D9xsgQx2NO5GwtA4-sb2QrSmJzh99usWj_IbnFnSteM00vtx-_Mdw5U-ozwjO9YQfM39J4v7YF6jz5wm9ImyU58",
  "Nonce": "636679768338469400.ZTIyOTU1ZGEtMTk0Yy00ZTE2LWExOWEtNmI0YmI0MDYwZDJkM2M2YzliYjctZmExMS00NzFmLTkwMjQtOTg2ZTEyOWJhM2Ex",
  "SessionId": "8052ce2cd06bdf6d00773925d0d97b86",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679768338469400.ZTIyOTU1ZGEtMTk0Yy00ZTE2LWExOWEtNmI0YmI0MDYwZDJkM2M2YzliYjctZmExMS00NzFmLTkwMjQtOTg2ZTEyOWJhM2Ex",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfeYOjnnicYV3w4p0veMJxzqwvB0roMB9gwiuvnZz5HqxtT3V6TLKFaXg_S6xJEJCxq-3kRcfUk78qAVHQq415_CGl6XBWnvfAKI_ZIBH8u-wa-0aYPxlOwqSPMfPUuu5PMIhOZhDu_XKBlVJQYcxzaYKV63QWWgdJCqP1fVzBWYMZY_nY3K6yL6dXaab3wQL57EVr6QSci-_OYsxF81lMqux0InmpEnm47FsAeumS2I7bnjdKFhPir6as45MQY-GICZQCwfHX4VWebT-NJjcU_18ELZd174Sl6QW1O4z_8D9xsgQx2NO5GwtA4-sb2QrSmJzh99usWj_IbnFnSteM00vtx-_Mdw5U-ozwjO9YQfM39J4v7YF6jz5wm9ImyU58",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 15:07:13.853 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 15:07:13.853 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 15:07:13.853 -06:00 [INF] Showing consent: User has not yet consented
2018-07-23 15:07:13.855 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:07:13.855 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:07:13.856 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:07:13.856 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:07:13.856 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:07:13.856 -06:00 [DBG] No PKCE used.
2018-07-23 15:07:13.856 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:07:13.856 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:07:21.911 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 15:07:21.912 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:07:21.912 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:07:21.912 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:07:21.912 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:07:21.912 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:07:21.912 -06:00 [DBG] No PKCE used.
2018-07-23 15:07:21.912 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:07:21.916 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:07:21.916 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:07:21.916 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 15:07:21.916 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 15:07:21.916 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 15:07:21.916 -06:00 [DBG] Start authorize callback request
2018-07-23 15:07:21.916 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:07:21.916 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:07:21.916 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:07:21.916 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:07:21.916 -06:00 [DBG] No PKCE used.
2018-07-23 15:07:21.916 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:07:21.916 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfeYOjnnicYV3w4p0veMJxzqwvB0roMB9gwiuvnZz5HqxtT3V6TLKFaXg_S6xJEJCxq-3kRcfUk78qAVHQq415_CGl6XBWnvfAKI_ZIBH8u-wa-0aYPxlOwqSPMfPUuu5PMIhOZhDu_XKBlVJQYcxzaYKV63QWWgdJCqP1fVzBWYMZY_nY3K6yL6dXaab3wQL57EVr6QSci-_OYsxF81lMqux0InmpEnm47FsAeumS2I7bnjdKFhPir6as45MQY-GICZQCwfHX4VWebT-NJjcU_18ELZd174Sl6QW1O4z_8D9xsgQx2NO5GwtA4-sb2QrSmJzh99usWj_IbnFnSteM00vtx-_Mdw5U-ozwjO9YQfM39J4v7YF6jz5wm9ImyU58",
  "Nonce": "636679768338469400.ZTIyOTU1ZGEtMTk0Yy00ZTE2LWExOWEtNmI0YmI0MDYwZDJkM2M2YzliYjctZmExMS00NzFmLTkwMjQtOTg2ZTEyOWJhM2Ex",
  "SessionId": "8052ce2cd06bdf6d00773925d0d97b86",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679768338469400.ZTIyOTU1ZGEtMTk0Yy00ZTE2LWExOWEtNmI0YmI0MDYwZDJkM2M2YzliYjctZmExMS00NzFmLTkwMjQtOTg2ZTEyOWJhM2Ex",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfeYOjnnicYV3w4p0veMJxzqwvB0roMB9gwiuvnZz5HqxtT3V6TLKFaXg_S6xJEJCxq-3kRcfUk78qAVHQq415_CGl6XBWnvfAKI_ZIBH8u-wa-0aYPxlOwqSPMfPUuu5PMIhOZhDu_XKBlVJQYcxzaYKV63QWWgdJCqP1fVzBWYMZY_nY3K6yL6dXaab3wQL57EVr6QSci-_OYsxF81lMqux0InmpEnm47FsAeumS2I7bnjdKFhPir6as45MQY-GICZQCwfHX4VWebT-NJjcU_18ELZd174Sl6QW1O4z_8D9xsgQx2NO5GwtA4-sb2QrSmJzh99usWj_IbnFnSteM00vtx-_Mdw5U-ozwjO9YQfM39J4v7YF6jz5wm9ImyU58",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 15:07:21.918 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 15:07:21.918 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 15:07:21.918 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-23 15:07:21.918 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:07:21.918 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-23 15:07:21.923 -06:00 [DBG] Creating Implicit Flow response.
2018-07-23 15:07:21.923 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 15:07:21.923 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 15:07:21.934 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****18BA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****a027"
    }
  ],
  "ActivityId": "0HLFGRFR4MACF:00000004",
  "TimeStamp": "2018-07-23T21:07:21Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:07:21.934 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfeYOjnnicYV3w4p0veMJxzqwvB0roMB9gwiuvnZz5HqxtT3V6TLKFaXg_S6xJEJCxq-3kRcfUk78qAVHQq415_CGl6XBWnvfAKI_ZIBH8u-wa-0aYPxlOwqSPMfPUuu5PMIhOZhDu_XKBlVJQYcxzaYKV63QWWgdJCqP1fVzBWYMZY_nY3K6yL6dXaab3wQL57EVr6QSci-_OYsxF81lMqux0InmpEnm47FsAeumS2I7bnjdKFhPir6as45MQY-GICZQCwfHX4VWebT-NJjcU_18ELZd174Sl6QW1O4z_8D9xsgQx2NO5GwtA4-sb2QrSmJzh99usWj_IbnFnSteM00vtx-_Mdw5U-ozwjO9YQfM39J4v7YF6jz5wm9ImyU58",
  "Scope": "openid profile business email"
}
2018-07-23 15:07:22.013 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-23 15:07:22.013 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-23 15:07:22.013 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-23 15:07:22.013 -06:00 [DBG] Start token request.
2018-07-23 15:07:22.013 -06:00 [DBG] Start client validation
2018-07-23 15:07:22.013 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-23 15:07:22.013 -06:00 [DBG] Start parsing for secret in post body
2018-07-23 15:07:22.013 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-23 15:07:22.013 -06:00 [DBG] Secret id found: ideaBox
2018-07-23 15:07:22.013 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:07:22.013 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-23 15:07:22.013 -06:00 [DBG] Client validation success
2018-07-23 15:07:22.013 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFGRFR4MACG:00000001",
  "TimeStamp": "2018-07-23T21:07:22Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:07:22.013 -06:00 [DBG] Start token request validation
2018-07-23 15:07:22.014 -06:00 [DBG] Start validation of authorization code token request
2018-07-23 15:07:22.022 -06:00 [DBG] Validation of authorization code token request success
2018-07-23 15:07:22.023 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "32d0623adcd64ba72ed24d106e0636d12aed317ef2d94ea6325a151a6795a027",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "32d0623adcd64ba72ed24d106e0636d12aed317ef2d94ea6325a151a6795a027",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-23 15:07:22.023 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:07:22.023 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-23 15:07:22.023 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:07:22.035 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:07:22.035 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 15:07:22.035 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 15:07:22.047 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****G9vg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****5RPQ"
    }
  ],
  "ActivityId": "0HLFGRFR4MACG:00000001",
  "TimeStamp": "2018-07-23T21:07:22Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:07:22.047 -06:00 [DBG] Token request success.
2018-07-23 15:07:22.051 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-23 15:07:22.051 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-23 15:07:22.051 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-23 15:07:22.051 -06:00 [DBG] Start userinfo request
2018-07-23 15:07:22.052 -06:00 [DBG] Bearer token found in header
2018-07-23 15:07:22.053 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:07:22.053 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:07:22.055 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-23 15:07:22.055 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532380042,
    "exp": 1532383642,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532379705,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-23 15:07:22.055 -06:00 [DBG] Creating userinfo response
2018-07-23 15:07:22.055 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 15:07:22.055 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 15:07:22.055 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-23 15:07:22.055 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 15:07:22.056 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-23 15:07:22.056 -06:00 [DBG] End userinfo request
2018-07-23 15:08:52.517 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-23 15:08:52.517 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-23 15:08:52.517 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-23 15:08:52.517 -06:00 [DBG] Start discovery request
2018-07-23 15:08:52.632 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-23 15:08:52.633 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-23 15:08:52.633 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-23 15:08:52.633 -06:00 [DBG] Start key discovery request
2018-07-23 15:08:52.708 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-23 15:08:52.708 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-23 15:08:52.708 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-23 15:08:52.708 -06:00 [DBG] Start authorize request
2018-07-23 15:08:52.708 -06:00 [DBG] No user present in authorize request
2018-07-23 15:08:52.708 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:08:52.709 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:08:52.709 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:08:52.709 -06:00 [DBG] No PKCE used.
2018-07-23 15:08:52.709 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:08:52.709 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfozBvsFof2XqWxN-LSrHjWpaNowDtmQbtV-CnvZzb3VEuLFcmVvTRBgI9ip2siNtqGqheMva5oH3Sst6WymjAgvGGeXJjXU2M7OeN-1drWlmK2r6XJQvuWycqY04qmd7n8gOs7rJTm_yc4EDmHgWSd6FCSWDH0AOPidQYEHpr11PymPqTLNtUZPleTMGUT8vUTrNYOMxCCD0WYAsONU6RmErdlHp-vUHt5SHXmNuqYcczO_XZyIvg_8dgD5i-yzj9u9wUNzoyYRrlx1-d9WwvYd3BCVr5l8Tslf2h_RMso2oCz401RON4BrOVXRq__H1LA9-bObED93qlYLwSj8OiDIK7nVqNmLPtwTblHDiH8l2a9uNxy4YKUB30yH_kHIOo",
  "Nonce": "636679769326885210.MDQwZDI4NWQtNjA3MS00YjRkLTg4MDItODY4MjAxYTlmMmY0YTk0MGJjNzAtZWQ5OS00YTljLWE0MjItNTUzMjM1MGNkYThk",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679769326885210.MDQwZDI4NWQtNjA3MS00YjRkLTg4MDItODY4MjAxYTlmMmY0YTk0MGJjNzAtZWQ5OS00YTljLWE0MjItNTUzMjM1MGNkYThk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfozBvsFof2XqWxN-LSrHjWpaNowDtmQbtV-CnvZzb3VEuLFcmVvTRBgI9ip2siNtqGqheMva5oH3Sst6WymjAgvGGeXJjXU2M7OeN-1drWlmK2r6XJQvuWycqY04qmd7n8gOs7rJTm_yc4EDmHgWSd6FCSWDH0AOPidQYEHpr11PymPqTLNtUZPleTMGUT8vUTrNYOMxCCD0WYAsONU6RmErdlHp-vUHt5SHXmNuqYcczO_XZyIvg_8dgD5i-yzj9u9wUNzoyYRrlx1-d9WwvYd3BCVr5l8Tslf2h_RMso2oCz401RON4BrOVXRq__H1LA9-bObED93qlYLwSj8OiDIK7nVqNmLPtwTblHDiH8l2a9uNxy4YKUB30yH_kHIOo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 15:08:52.709 -06:00 [INF] Showing login: User is not authenticated
2018-07-23 15:08:52.711 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:08:52.711 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:08:52.711 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:08:52.711 -06:00 [DBG] No PKCE used.
2018-07-23 15:08:52.711 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:08:52.711 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:09:03.581 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 15:09:03.596 -06:00 [DBG] Augmenting SignInContext
2018-07-23 15:09:03.596 -06:00 [DBG] Adding idp claim with value: local
2018-07-23 15:09:03.596 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-23 15:09:03.596 -06:00 [DBG] Adding auth_time claim with value: 1532380143
2018-07-23 15:09:03.596 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 15:09:03.597 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFGRFR4MACF:00000007",
  "TimeStamp": "2018-07-23T21:09:03Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:09:03.601 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:09:03.601 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:09:03.601 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 15:09:03.601 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 15:09:03.601 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 15:09:03.601 -06:00 [DBG] Start authorize callback request
2018-07-23 15:09:03.601 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:09:03.601 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:09:03.602 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:09:03.602 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:09:03.602 -06:00 [DBG] No PKCE used.
2018-07-23 15:09:03.602 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:09:03.602 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfozBvsFof2XqWxN-LSrHjWpaNowDtmQbtV-CnvZzb3VEuLFcmVvTRBgI9ip2siNtqGqheMva5oH3Sst6WymjAgvGGeXJjXU2M7OeN-1drWlmK2r6XJQvuWycqY04qmd7n8gOs7rJTm_yc4EDmHgWSd6FCSWDH0AOPidQYEHpr11PymPqTLNtUZPleTMGUT8vUTrNYOMxCCD0WYAsONU6RmErdlHp-vUHt5SHXmNuqYcczO_XZyIvg_8dgD5i-yzj9u9wUNzoyYRrlx1-d9WwvYd3BCVr5l8Tslf2h_RMso2oCz401RON4BrOVXRq__H1LA9-bObED93qlYLwSj8OiDIK7nVqNmLPtwTblHDiH8l2a9uNxy4YKUB30yH_kHIOo",
  "Nonce": "636679769326885210.MDQwZDI4NWQtNjA3MS00YjRkLTg4MDItODY4MjAxYTlmMmY0YTk0MGJjNzAtZWQ5OS00YTljLWE0MjItNTUzMjM1MGNkYThk",
  "SessionId": "0dad96563cb796b20ec6e751040bfcef",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679769326885210.MDQwZDI4NWQtNjA3MS00YjRkLTg4MDItODY4MjAxYTlmMmY0YTk0MGJjNzAtZWQ5OS00YTljLWE0MjItNTUzMjM1MGNkYThk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfozBvsFof2XqWxN-LSrHjWpaNowDtmQbtV-CnvZzb3VEuLFcmVvTRBgI9ip2siNtqGqheMva5oH3Sst6WymjAgvGGeXJjXU2M7OeN-1drWlmK2r6XJQvuWycqY04qmd7n8gOs7rJTm_yc4EDmHgWSd6FCSWDH0AOPidQYEHpr11PymPqTLNtUZPleTMGUT8vUTrNYOMxCCD0WYAsONU6RmErdlHp-vUHt5SHXmNuqYcczO_XZyIvg_8dgD5i-yzj9u9wUNzoyYRrlx1-d9WwvYd3BCVr5l8Tslf2h_RMso2oCz401RON4BrOVXRq__H1LA9-bObED93qlYLwSj8OiDIK7nVqNmLPtwTblHDiH8l2a9uNxy4YKUB30yH_kHIOo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 15:09:03.603 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 15:09:03.603 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 15:09:03.603 -06:00 [INF] Showing consent: User has not yet consented
2018-07-23 15:09:03.605 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:09:03.605 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:09:03.605 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:09:03.605 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:09:03.605 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:09:03.605 -06:00 [DBG] No PKCE used.
2018-07-23 15:09:03.606 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:09:03.606 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:09:14.076 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 15:09:14.076 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:09:14.077 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:09:14.077 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:09:14.077 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:09:14.077 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:09:14.077 -06:00 [DBG] No PKCE used.
2018-07-23 15:09:14.077 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:09:14.080 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:09:14.081 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:09:14.081 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 15:09:14.081 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 15:09:14.081 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 15:09:14.081 -06:00 [DBG] Start authorize callback request
2018-07-23 15:09:14.081 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:09:14.081 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:09:14.081 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:09:14.081 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:09:14.081 -06:00 [DBG] No PKCE used.
2018-07-23 15:09:14.081 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:09:14.081 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfozBvsFof2XqWxN-LSrHjWpaNowDtmQbtV-CnvZzb3VEuLFcmVvTRBgI9ip2siNtqGqheMva5oH3Sst6WymjAgvGGeXJjXU2M7OeN-1drWlmK2r6XJQvuWycqY04qmd7n8gOs7rJTm_yc4EDmHgWSd6FCSWDH0AOPidQYEHpr11PymPqTLNtUZPleTMGUT8vUTrNYOMxCCD0WYAsONU6RmErdlHp-vUHt5SHXmNuqYcczO_XZyIvg_8dgD5i-yzj9u9wUNzoyYRrlx1-d9WwvYd3BCVr5l8Tslf2h_RMso2oCz401RON4BrOVXRq__H1LA9-bObED93qlYLwSj8OiDIK7nVqNmLPtwTblHDiH8l2a9uNxy4YKUB30yH_kHIOo",
  "Nonce": "636679769326885210.MDQwZDI4NWQtNjA3MS00YjRkLTg4MDItODY4MjAxYTlmMmY0YTk0MGJjNzAtZWQ5OS00YTljLWE0MjItNTUzMjM1MGNkYThk",
  "SessionId": "0dad96563cb796b20ec6e751040bfcef",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679769326885210.MDQwZDI4NWQtNjA3MS00YjRkLTg4MDItODY4MjAxYTlmMmY0YTk0MGJjNzAtZWQ5OS00YTljLWE0MjItNTUzMjM1MGNkYThk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfozBvsFof2XqWxN-LSrHjWpaNowDtmQbtV-CnvZzb3VEuLFcmVvTRBgI9ip2siNtqGqheMva5oH3Sst6WymjAgvGGeXJjXU2M7OeN-1drWlmK2r6XJQvuWycqY04qmd7n8gOs7rJTm_yc4EDmHgWSd6FCSWDH0AOPidQYEHpr11PymPqTLNtUZPleTMGUT8vUTrNYOMxCCD0WYAsONU6RmErdlHp-vUHt5SHXmNuqYcczO_XZyIvg_8dgD5i-yzj9u9wUNzoyYRrlx1-d9WwvYd3BCVr5l8Tslf2h_RMso2oCz401RON4BrOVXRq__H1LA9-bObED93qlYLwSj8OiDIK7nVqNmLPtwTblHDiH8l2a9uNxy4YKUB30yH_kHIOo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 15:09:14.083 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 15:09:14.083 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 15:09:14.083 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-23 15:09:14.083 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:09:14.083 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-23 15:09:14.088 -06:00 [DBG] Creating Implicit Flow response.
2018-07-23 15:09:14.088 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 15:09:14.088 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 15:09:14.100 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****IdIA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****c699"
    }
  ],
  "ActivityId": "0HLFGRFR4MACF:0000000B",
  "TimeStamp": "2018-07-23T21:09:14Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:09:14.100 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfozBvsFof2XqWxN-LSrHjWpaNowDtmQbtV-CnvZzb3VEuLFcmVvTRBgI9ip2siNtqGqheMva5oH3Sst6WymjAgvGGeXJjXU2M7OeN-1drWlmK2r6XJQvuWycqY04qmd7n8gOs7rJTm_yc4EDmHgWSd6FCSWDH0AOPidQYEHpr11PymPqTLNtUZPleTMGUT8vUTrNYOMxCCD0WYAsONU6RmErdlHp-vUHt5SHXmNuqYcczO_XZyIvg_8dgD5i-yzj9u9wUNzoyYRrlx1-d9WwvYd3BCVr5l8Tslf2h_RMso2oCz401RON4BrOVXRq__H1LA9-bObED93qlYLwSj8OiDIK7nVqNmLPtwTblHDiH8l2a9uNxy4YKUB30yH_kHIOo",
  "Scope": "openid profile business email"
}
2018-07-23 15:09:14.100 -06:00 [DBG] Augmenting SignInContext
2018-07-23 15:09:14.100 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 15:09:14.330 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-23 15:09:14.330 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-23 15:09:14.331 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-23 15:09:14.331 -06:00 [DBG] Start token request.
2018-07-23 15:09:14.331 -06:00 [DBG] Start client validation
2018-07-23 15:09:14.331 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-23 15:09:14.331 -06:00 [DBG] Start parsing for secret in post body
2018-07-23 15:09:14.331 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-23 15:09:14.331 -06:00 [DBG] Secret id found: ideaBox
2018-07-23 15:09:14.331 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:09:14.331 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-23 15:09:14.331 -06:00 [DBG] Client validation success
2018-07-23 15:09:14.331 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFGRFR4MACH:00000003",
  "TimeStamp": "2018-07-23T21:09:14Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:09:14.331 -06:00 [DBG] Start token request validation
2018-07-23 15:09:14.331 -06:00 [DBG] Start validation of authorization code token request
2018-07-23 15:09:14.339 -06:00 [DBG] Validation of authorization code token request success
2018-07-23 15:09:14.339 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "9dbfaa77dd80574e4b5fc93d7d62fbc4e6477f6ecedcfc14a4f61e06114cc699",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "9dbfaa77dd80574e4b5fc93d7d62fbc4e6477f6ecedcfc14a4f61e06114cc699",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-23 15:09:14.339 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:09:14.339 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-23 15:09:14.339 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:09:14.352 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:09:14.353 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 15:09:14.353 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 15:09:14.364 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****UdxA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****KPTw"
    }
  ],
  "ActivityId": "0HLFGRFR4MACH:00000003",
  "TimeStamp": "2018-07-23T21:09:14Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:09:14.364 -06:00 [DBG] Token request success.
2018-07-23 15:09:14.373 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-23 15:09:14.373 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-23 15:09:14.374 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-23 15:09:14.374 -06:00 [DBG] Start userinfo request
2018-07-23 15:09:14.374 -06:00 [DBG] Bearer token found in header
2018-07-23 15:09:14.376 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:09:14.376 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:09:14.377 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-23 15:09:14.377 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532380154,
    "exp": 1532383754,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532380143,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-23 15:09:14.377 -06:00 [DBG] Creating userinfo response
2018-07-23 15:09:14.377 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 15:09:14.377 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 15:09:14.377 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-23 15:09:14.377 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 15:09:14.378 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-23 15:09:14.379 -06:00 [DBG] End userinfo request
2018-07-23 15:12:31.130 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-23 15:12:31.130 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-23 15:12:31.130 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-23 15:12:31.130 -06:00 [DBG] Start discovery request
2018-07-23 15:12:31.186 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-23 15:12:31.187 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-23 15:12:31.187 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-23 15:12:31.187 -06:00 [DBG] Start key discovery request
2018-07-23 15:12:31.211 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-23 15:12:31.211 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-23 15:12:31.211 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-23 15:12:31.211 -06:00 [DBG] Start authorize request
2018-07-23 15:12:31.211 -06:00 [DBG] No user present in authorize request
2018-07-23 15:12:31.211 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:12:31.212 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:12:31.212 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:12:31.212 -06:00 [DBG] No PKCE used.
2018-07-23 15:12:31.212 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:12:31.212 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc6ItiNTTkSKhWxARx4eGgX9jZKui07DuTe0cW_z8OivjMpRXA3NVvzLJue0wWvZ9q-beUV4q2TZ2Tzw-qlPs0gvwVG0N6b6OH3woiqB9tSqKSVIadaTCl_lnShMOSBwNTNFOgDlU-prtfzIm4AMfScAnb_7EzAVpBsxBHM6nl7FypG8QvWaC3qX_y64NBP__1vgTQcAGFaZRjlyZ6r6StTsefo3cxpJo25EGeCMs0rxcnw3XYrLeMchjXdm3xtKQQQujqCQTs__zC-sDvEwLTU3lUUaWluDQicYzCcVPKbz2tKP02YA00pDYmtCl5_9vjQSdqhyKpPdkmy4RW12dgqn1uQnS2U9bx1F-5teMHmwphgMPIcFozzObddctilwJs",
  "Nonce": "636679771512007680.MGMyNTYwMDUtYTJlYS00MDAyLWJjMjYtMzlmNTZhNzc5NTRhNzFmNGE4ODktMDZkYy00MGJhLThkNzgtZjk4MGUxMGUyMGU0",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679771512007680.MGMyNTYwMDUtYTJlYS00MDAyLWJjMjYtMzlmNTZhNzc5NTRhNzFmNGE4ODktMDZkYy00MGJhLThkNzgtZjk4MGUxMGUyMGU0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc6ItiNTTkSKhWxARx4eGgX9jZKui07DuTe0cW_z8OivjMpRXA3NVvzLJue0wWvZ9q-beUV4q2TZ2Tzw-qlPs0gvwVG0N6b6OH3woiqB9tSqKSVIadaTCl_lnShMOSBwNTNFOgDlU-prtfzIm4AMfScAnb_7EzAVpBsxBHM6nl7FypG8QvWaC3qX_y64NBP__1vgTQcAGFaZRjlyZ6r6StTsefo3cxpJo25EGeCMs0rxcnw3XYrLeMchjXdm3xtKQQQujqCQTs__zC-sDvEwLTU3lUUaWluDQicYzCcVPKbz2tKP02YA00pDYmtCl5_9vjQSdqhyKpPdkmy4RW12dgqn1uQnS2U9bx1F-5teMHmwphgMPIcFozzObddctilwJs",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 15:12:31.212 -06:00 [INF] Showing login: User is not authenticated
2018-07-23 15:12:31.214 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:12:31.214 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:12:31.214 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:12:31.214 -06:00 [DBG] No PKCE used.
2018-07-23 15:12:31.215 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:12:31.215 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:12:40.339 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 15:12:40.353 -06:00 [DBG] Augmenting SignInContext
2018-07-23 15:12:40.353 -06:00 [DBG] Adding idp claim with value: local
2018-07-23 15:12:40.353 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-23 15:12:40.353 -06:00 [DBG] Adding auth_time claim with value: 1532380360
2018-07-23 15:12:40.354 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 15:12:40.354 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFGRFR4MACJ:00000003",
  "TimeStamp": "2018-07-23T21:12:40Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:12:40.357 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:12:40.357 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:12:40.357 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 15:12:40.357 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 15:12:40.357 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 15:12:40.357 -06:00 [DBG] Start authorize callback request
2018-07-23 15:12:40.357 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:12:40.357 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:12:40.357 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:12:40.358 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:12:40.358 -06:00 [DBG] No PKCE used.
2018-07-23 15:12:40.358 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:12:40.358 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc6ItiNTTkSKhWxARx4eGgX9jZKui07DuTe0cW_z8OivjMpRXA3NVvzLJue0wWvZ9q-beUV4q2TZ2Tzw-qlPs0gvwVG0N6b6OH3woiqB9tSqKSVIadaTCl_lnShMOSBwNTNFOgDlU-prtfzIm4AMfScAnb_7EzAVpBsxBHM6nl7FypG8QvWaC3qX_y64NBP__1vgTQcAGFaZRjlyZ6r6StTsefo3cxpJo25EGeCMs0rxcnw3XYrLeMchjXdm3xtKQQQujqCQTs__zC-sDvEwLTU3lUUaWluDQicYzCcVPKbz2tKP02YA00pDYmtCl5_9vjQSdqhyKpPdkmy4RW12dgqn1uQnS2U9bx1F-5teMHmwphgMPIcFozzObddctilwJs",
  "Nonce": "636679771512007680.MGMyNTYwMDUtYTJlYS00MDAyLWJjMjYtMzlmNTZhNzc5NTRhNzFmNGE4ODktMDZkYy00MGJhLThkNzgtZjk4MGUxMGUyMGU0",
  "SessionId": "bf47cc20370270e3700c23e5500e6974",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679771512007680.MGMyNTYwMDUtYTJlYS00MDAyLWJjMjYtMzlmNTZhNzc5NTRhNzFmNGE4ODktMDZkYy00MGJhLThkNzgtZjk4MGUxMGUyMGU0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc6ItiNTTkSKhWxARx4eGgX9jZKui07DuTe0cW_z8OivjMpRXA3NVvzLJue0wWvZ9q-beUV4q2TZ2Tzw-qlPs0gvwVG0N6b6OH3woiqB9tSqKSVIadaTCl_lnShMOSBwNTNFOgDlU-prtfzIm4AMfScAnb_7EzAVpBsxBHM6nl7FypG8QvWaC3qX_y64NBP__1vgTQcAGFaZRjlyZ6r6StTsefo3cxpJo25EGeCMs0rxcnw3XYrLeMchjXdm3xtKQQQujqCQTs__zC-sDvEwLTU3lUUaWluDQicYzCcVPKbz2tKP02YA00pDYmtCl5_9vjQSdqhyKpPdkmy4RW12dgqn1uQnS2U9bx1F-5teMHmwphgMPIcFozzObddctilwJs",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 15:12:40.359 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 15:12:40.359 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 15:12:40.359 -06:00 [INF] Showing consent: User has not yet consented
2018-07-23 15:12:40.361 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:12:40.361 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:12:40.361 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:12:40.361 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:12:40.361 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:12:40.361 -06:00 [DBG] No PKCE used.
2018-07-23 15:12:40.362 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:12:40.362 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:12:42.317 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 15:12:42.317 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:12:42.317 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:12:42.317 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:12:42.317 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:12:42.317 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:12:42.317 -06:00 [DBG] No PKCE used.
2018-07-23 15:12:42.317 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:12:42.321 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:12:42.321 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:12:42.321 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 15:12:42.321 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 15:12:42.321 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 15:12:42.321 -06:00 [DBG] Start authorize callback request
2018-07-23 15:12:42.322 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:12:42.322 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:12:42.322 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:12:42.322 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:12:42.322 -06:00 [DBG] No PKCE used.
2018-07-23 15:12:42.322 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:12:42.322 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc6ItiNTTkSKhWxARx4eGgX9jZKui07DuTe0cW_z8OivjMpRXA3NVvzLJue0wWvZ9q-beUV4q2TZ2Tzw-qlPs0gvwVG0N6b6OH3woiqB9tSqKSVIadaTCl_lnShMOSBwNTNFOgDlU-prtfzIm4AMfScAnb_7EzAVpBsxBHM6nl7FypG8QvWaC3qX_y64NBP__1vgTQcAGFaZRjlyZ6r6StTsefo3cxpJo25EGeCMs0rxcnw3XYrLeMchjXdm3xtKQQQujqCQTs__zC-sDvEwLTU3lUUaWluDQicYzCcVPKbz2tKP02YA00pDYmtCl5_9vjQSdqhyKpPdkmy4RW12dgqn1uQnS2U9bx1F-5teMHmwphgMPIcFozzObddctilwJs",
  "Nonce": "636679771512007680.MGMyNTYwMDUtYTJlYS00MDAyLWJjMjYtMzlmNTZhNzc5NTRhNzFmNGE4ODktMDZkYy00MGJhLThkNzgtZjk4MGUxMGUyMGU0",
  "SessionId": "bf47cc20370270e3700c23e5500e6974",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679771512007680.MGMyNTYwMDUtYTJlYS00MDAyLWJjMjYtMzlmNTZhNzc5NTRhNzFmNGE4ODktMDZkYy00MGJhLThkNzgtZjk4MGUxMGUyMGU0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc6ItiNTTkSKhWxARx4eGgX9jZKui07DuTe0cW_z8OivjMpRXA3NVvzLJue0wWvZ9q-beUV4q2TZ2Tzw-qlPs0gvwVG0N6b6OH3woiqB9tSqKSVIadaTCl_lnShMOSBwNTNFOgDlU-prtfzIm4AMfScAnb_7EzAVpBsxBHM6nl7FypG8QvWaC3qX_y64NBP__1vgTQcAGFaZRjlyZ6r6StTsefo3cxpJo25EGeCMs0rxcnw3XYrLeMchjXdm3xtKQQQujqCQTs__zC-sDvEwLTU3lUUaWluDQicYzCcVPKbz2tKP02YA00pDYmtCl5_9vjQSdqhyKpPdkmy4RW12dgqn1uQnS2U9bx1F-5teMHmwphgMPIcFozzObddctilwJs",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 15:12:42.323 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 15:12:42.323 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 15:12:42.323 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-23 15:12:42.323 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:12:42.323 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-23 15:12:42.328 -06:00 [DBG] Creating Implicit Flow response.
2018-07-23 15:12:42.328 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 15:12:42.328 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 15:12:42.339 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****iMNw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****e7a6"
    }
  ],
  "ActivityId": "0HLFGRFR4MACJ:00000007",
  "TimeStamp": "2018-07-23T21:12:42Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:12:42.339 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc6ItiNTTkSKhWxARx4eGgX9jZKui07DuTe0cW_z8OivjMpRXA3NVvzLJue0wWvZ9q-beUV4q2TZ2Tzw-qlPs0gvwVG0N6b6OH3woiqB9tSqKSVIadaTCl_lnShMOSBwNTNFOgDlU-prtfzIm4AMfScAnb_7EzAVpBsxBHM6nl7FypG8QvWaC3qX_y64NBP__1vgTQcAGFaZRjlyZ6r6StTsefo3cxpJo25EGeCMs0rxcnw3XYrLeMchjXdm3xtKQQQujqCQTs__zC-sDvEwLTU3lUUaWluDQicYzCcVPKbz2tKP02YA00pDYmtCl5_9vjQSdqhyKpPdkmy4RW12dgqn1uQnS2U9bx1F-5teMHmwphgMPIcFozzObddctilwJs",
  "Scope": "openid profile business email"
}
2018-07-23 15:12:42.340 -06:00 [DBG] Augmenting SignInContext
2018-07-23 15:12:42.340 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 15:12:42.422 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-23 15:12:42.422 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-23 15:12:42.422 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-23 15:12:42.422 -06:00 [DBG] Start token request.
2018-07-23 15:12:42.422 -06:00 [DBG] Start client validation
2018-07-23 15:12:42.422 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-23 15:12:42.422 -06:00 [DBG] Start parsing for secret in post body
2018-07-23 15:12:42.422 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-23 15:12:42.422 -06:00 [DBG] Secret id found: ideaBox
2018-07-23 15:12:42.422 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:12:42.423 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-23 15:12:42.423 -06:00 [DBG] Client validation success
2018-07-23 15:12:42.423 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFGRFR4MACI:00000003",
  "TimeStamp": "2018-07-23T21:12:42Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:12:42.423 -06:00 [DBG] Start token request validation
2018-07-23 15:12:42.423 -06:00 [DBG] Start validation of authorization code token request
2018-07-23 15:12:42.430 -06:00 [DBG] Validation of authorization code token request success
2018-07-23 15:12:42.430 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "dbc8b3fd27c64860b6c89eb3ee4311b9af41cb39b1b150ae3f16a9183039e7a6",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "dbc8b3fd27c64860b6c89eb3ee4311b9af41cb39b1b150ae3f16a9183039e7a6",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-23 15:12:42.430 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:12:42.430 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-23 15:12:42.430 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:12:42.442 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:12:42.443 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 15:12:42.443 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 15:12:42.454 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****XQWQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****9h4A"
    }
  ],
  "ActivityId": "0HLFGRFR4MACI:00000003",
  "TimeStamp": "2018-07-23T21:12:42Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:12:42.454 -06:00 [DBG] Token request success.
2018-07-23 15:12:42.460 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-23 15:12:42.461 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-23 15:12:42.461 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-23 15:12:42.461 -06:00 [DBG] Start userinfo request
2018-07-23 15:12:42.461 -06:00 [DBG] Bearer token found in header
2018-07-23 15:12:42.462 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:12:42.463 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:12:42.464 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-23 15:12:42.464 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532380362,
    "exp": 1532383962,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532380360,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-23 15:12:42.464 -06:00 [DBG] Creating userinfo response
2018-07-23 15:12:42.464 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 15:12:42.464 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 15:12:42.464 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-23 15:12:42.464 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 15:12:42.465 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-23 15:12:42.465 -06:00 [DBG] End userinfo request
2018-07-23 15:13:30.678 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-23 15:13:30.678 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-23 15:13:30.678 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-23 15:13:30.678 -06:00 [DBG] Start discovery request
2018-07-23 15:13:30.735 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-23 15:13:30.735 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-23 15:13:30.735 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-23 15:13:30.735 -06:00 [DBG] Start key discovery request
2018-07-23 15:13:30.760 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-23 15:13:30.760 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-23 15:13:30.760 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-23 15:13:30.760 -06:00 [DBG] Start authorize request
2018-07-23 15:13:30.760 -06:00 [DBG] No user present in authorize request
2018-07-23 15:13:30.760 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:13:30.760 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:13:30.760 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:13:30.760 -06:00 [DBG] No PKCE used.
2018-07-23 15:13:30.760 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:13:30.760 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdTscDV6L332MhJVdTVyBp5RH8_Oe7NhwAfLJQlrswNSQW_bU-UfNmFvDzcxxi5SIT2F4GSPQFuOsHDZym-Hgz9ssxNwtwWAteFva8Lh8ecR9mZM1NwVTwEpMIqsCI0zZCcR9lt-BAjKxjDqOAefiecZaFFT76acJBW6Grc2EOiBPFj3hahS4n8FPL7IATeNMwxCwAHKMifOZjETgyePyoawQWyDMDRPNJdcZvD7ROhnWq5_RR_jNTfFhv5HG4oRNnhK2hBjstqV0Xnc6WiNwYBW48LbiOp77oYIace2wvwqeDn0atWYmIKLt-W3iuj-wgTtzSiXQLWLliWb5jpb0EugiDYw9ouIWRld8qGKhVNgu2TOHwm2J-l7jpEGX0W6nc",
  "Nonce": "636679772107492280.MjY2OWZiNzktMjNiOC00NWE3LTg2MTAtYjI4MDBjMGNjZTFkMDk4OWJlMzMtY2Q0MC00MjcwLWI2NzMtMzE5Mjk4YWE0MTgy",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679772107492280.MjY2OWZiNzktMjNiOC00NWE3LTg2MTAtYjI4MDBjMGNjZTFkMDk4OWJlMzMtY2Q0MC00MjcwLWI2NzMtMzE5Mjk4YWE0MTgy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdTscDV6L332MhJVdTVyBp5RH8_Oe7NhwAfLJQlrswNSQW_bU-UfNmFvDzcxxi5SIT2F4GSPQFuOsHDZym-Hgz9ssxNwtwWAteFva8Lh8ecR9mZM1NwVTwEpMIqsCI0zZCcR9lt-BAjKxjDqOAefiecZaFFT76acJBW6Grc2EOiBPFj3hahS4n8FPL7IATeNMwxCwAHKMifOZjETgyePyoawQWyDMDRPNJdcZvD7ROhnWq5_RR_jNTfFhv5HG4oRNnhK2hBjstqV0Xnc6WiNwYBW48LbiOp77oYIace2wvwqeDn0atWYmIKLt-W3iuj-wgTtzSiXQLWLliWb5jpb0EugiDYw9ouIWRld8qGKhVNgu2TOHwm2J-l7jpEGX0W6nc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 15:13:30.760 -06:00 [INF] Showing login: User is not authenticated
2018-07-23 15:13:30.762 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:13:30.763 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:13:30.763 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:13:30.763 -06:00 [DBG] No PKCE used.
2018-07-23 15:13:30.763 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:13:30.763 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:13:39.324 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 15:13:39.339 -06:00 [DBG] Augmenting SignInContext
2018-07-23 15:13:39.339 -06:00 [DBG] Adding idp claim with value: local
2018-07-23 15:13:39.339 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-23 15:13:39.339 -06:00 [DBG] Adding auth_time claim with value: 1532380419
2018-07-23 15:13:39.339 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 15:13:39.340 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFGRFR4MACJ:0000000A",
  "TimeStamp": "2018-07-23T21:13:39Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:13:39.342 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:13:39.342 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:13:39.342 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 15:13:39.342 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 15:13:39.342 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 15:13:39.342 -06:00 [DBG] Start authorize callback request
2018-07-23 15:13:39.343 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:13:39.343 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:13:39.343 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:13:39.343 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:13:39.343 -06:00 [DBG] No PKCE used.
2018-07-23 15:13:39.343 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:13:39.343 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdTscDV6L332MhJVdTVyBp5RH8_Oe7NhwAfLJQlrswNSQW_bU-UfNmFvDzcxxi5SIT2F4GSPQFuOsHDZym-Hgz9ssxNwtwWAteFva8Lh8ecR9mZM1NwVTwEpMIqsCI0zZCcR9lt-BAjKxjDqOAefiecZaFFT76acJBW6Grc2EOiBPFj3hahS4n8FPL7IATeNMwxCwAHKMifOZjETgyePyoawQWyDMDRPNJdcZvD7ROhnWq5_RR_jNTfFhv5HG4oRNnhK2hBjstqV0Xnc6WiNwYBW48LbiOp77oYIace2wvwqeDn0atWYmIKLt-W3iuj-wgTtzSiXQLWLliWb5jpb0EugiDYw9ouIWRld8qGKhVNgu2TOHwm2J-l7jpEGX0W6nc",
  "Nonce": "636679772107492280.MjY2OWZiNzktMjNiOC00NWE3LTg2MTAtYjI4MDBjMGNjZTFkMDk4OWJlMzMtY2Q0MC00MjcwLWI2NzMtMzE5Mjk4YWE0MTgy",
  "SessionId": "1a2ce5fa58dd59306493472397a43ef3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679772107492280.MjY2OWZiNzktMjNiOC00NWE3LTg2MTAtYjI4MDBjMGNjZTFkMDk4OWJlMzMtY2Q0MC00MjcwLWI2NzMtMzE5Mjk4YWE0MTgy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdTscDV6L332MhJVdTVyBp5RH8_Oe7NhwAfLJQlrswNSQW_bU-UfNmFvDzcxxi5SIT2F4GSPQFuOsHDZym-Hgz9ssxNwtwWAteFva8Lh8ecR9mZM1NwVTwEpMIqsCI0zZCcR9lt-BAjKxjDqOAefiecZaFFT76acJBW6Grc2EOiBPFj3hahS4n8FPL7IATeNMwxCwAHKMifOZjETgyePyoawQWyDMDRPNJdcZvD7ROhnWq5_RR_jNTfFhv5HG4oRNnhK2hBjstqV0Xnc6WiNwYBW48LbiOp77oYIace2wvwqeDn0atWYmIKLt-W3iuj-wgTtzSiXQLWLliWb5jpb0EugiDYw9ouIWRld8qGKhVNgu2TOHwm2J-l7jpEGX0W6nc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 15:13:39.344 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 15:13:39.344 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 15:13:39.344 -06:00 [INF] Showing consent: User has not yet consented
2018-07-23 15:13:39.346 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:13:39.346 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:13:39.346 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:13:39.347 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:13:39.347 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:13:39.347 -06:00 [DBG] No PKCE used.
2018-07-23 15:13:39.347 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:13:39.347 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:13:42.190 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 15:13:42.190 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:13:42.190 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:13:42.191 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:13:42.191 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:13:42.191 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:13:42.191 -06:00 [DBG] No PKCE used.
2018-07-23 15:13:42.191 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:13:42.195 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:13:42.195 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:13:42.195 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 15:13:42.195 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 15:13:42.195 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 15:13:42.195 -06:00 [DBG] Start authorize callback request
2018-07-23 15:13:42.195 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:13:42.195 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:13:42.195 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:13:42.195 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:13:42.195 -06:00 [DBG] No PKCE used.
2018-07-23 15:13:42.195 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:13:42.196 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdTscDV6L332MhJVdTVyBp5RH8_Oe7NhwAfLJQlrswNSQW_bU-UfNmFvDzcxxi5SIT2F4GSPQFuOsHDZym-Hgz9ssxNwtwWAteFva8Lh8ecR9mZM1NwVTwEpMIqsCI0zZCcR9lt-BAjKxjDqOAefiecZaFFT76acJBW6Grc2EOiBPFj3hahS4n8FPL7IATeNMwxCwAHKMifOZjETgyePyoawQWyDMDRPNJdcZvD7ROhnWq5_RR_jNTfFhv5HG4oRNnhK2hBjstqV0Xnc6WiNwYBW48LbiOp77oYIace2wvwqeDn0atWYmIKLt-W3iuj-wgTtzSiXQLWLliWb5jpb0EugiDYw9ouIWRld8qGKhVNgu2TOHwm2J-l7jpEGX0W6nc",
  "Nonce": "636679772107492280.MjY2OWZiNzktMjNiOC00NWE3LTg2MTAtYjI4MDBjMGNjZTFkMDk4OWJlMzMtY2Q0MC00MjcwLWI2NzMtMzE5Mjk4YWE0MTgy",
  "SessionId": "1a2ce5fa58dd59306493472397a43ef3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679772107492280.MjY2OWZiNzktMjNiOC00NWE3LTg2MTAtYjI4MDBjMGNjZTFkMDk4OWJlMzMtY2Q0MC00MjcwLWI2NzMtMzE5Mjk4YWE0MTgy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdTscDV6L332MhJVdTVyBp5RH8_Oe7NhwAfLJQlrswNSQW_bU-UfNmFvDzcxxi5SIT2F4GSPQFuOsHDZym-Hgz9ssxNwtwWAteFva8Lh8ecR9mZM1NwVTwEpMIqsCI0zZCcR9lt-BAjKxjDqOAefiecZaFFT76acJBW6Grc2EOiBPFj3hahS4n8FPL7IATeNMwxCwAHKMifOZjETgyePyoawQWyDMDRPNJdcZvD7ROhnWq5_RR_jNTfFhv5HG4oRNnhK2hBjstqV0Xnc6WiNwYBW48LbiOp77oYIace2wvwqeDn0atWYmIKLt-W3iuj-wgTtzSiXQLWLliWb5jpb0EugiDYw9ouIWRld8qGKhVNgu2TOHwm2J-l7jpEGX0W6nc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 15:13:42.197 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 15:13:42.197 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 15:13:42.197 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-23 15:13:42.197 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:13:42.197 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-23 15:13:42.202 -06:00 [DBG] Creating Implicit Flow response.
2018-07-23 15:13:42.202 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 15:13:42.202 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 15:13:42.214 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****YL9w"
    },
    {
      "TokenType": "code",
      "TokenValue": "****ae8e"
    }
  ],
  "ActivityId": "0HLFGRFR4MACJ:0000000E",
  "TimeStamp": "2018-07-23T21:13:42Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:13:42.214 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdTscDV6L332MhJVdTVyBp5RH8_Oe7NhwAfLJQlrswNSQW_bU-UfNmFvDzcxxi5SIT2F4GSPQFuOsHDZym-Hgz9ssxNwtwWAteFva8Lh8ecR9mZM1NwVTwEpMIqsCI0zZCcR9lt-BAjKxjDqOAefiecZaFFT76acJBW6Grc2EOiBPFj3hahS4n8FPL7IATeNMwxCwAHKMifOZjETgyePyoawQWyDMDRPNJdcZvD7ROhnWq5_RR_jNTfFhv5HG4oRNnhK2hBjstqV0Xnc6WiNwYBW48LbiOp77oYIace2wvwqeDn0atWYmIKLt-W3iuj-wgTtzSiXQLWLliWb5jpb0EugiDYw9ouIWRld8qGKhVNgu2TOHwm2J-l7jpEGX0W6nc",
  "Scope": "openid profile business email"
}
2018-07-23 15:13:42.214 -06:00 [DBG] Augmenting SignInContext
2018-07-23 15:13:42.214 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 15:13:42.309 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-23 15:13:42.310 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-23 15:13:42.310 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-23 15:13:42.310 -06:00 [DBG] Start token request.
2018-07-23 15:13:42.310 -06:00 [DBG] Start client validation
2018-07-23 15:13:42.310 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-23 15:13:42.310 -06:00 [DBG] Start parsing for secret in post body
2018-07-23 15:13:42.310 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-23 15:13:42.310 -06:00 [DBG] Secret id found: ideaBox
2018-07-23 15:13:42.310 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:13:42.310 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-23 15:13:42.310 -06:00 [DBG] Client validation success
2018-07-23 15:13:42.310 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFGRFR4MACK:00000003",
  "TimeStamp": "2018-07-23T21:13:42Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:13:42.310 -06:00 [DBG] Start token request validation
2018-07-23 15:13:42.310 -06:00 [DBG] Start validation of authorization code token request
2018-07-23 15:13:42.318 -06:00 [DBG] Validation of authorization code token request success
2018-07-23 15:13:42.318 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "2d931e4c0aa002b940440207807709bc6199df4146fbe051f0be73ce82c0ae8e",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "2d931e4c0aa002b940440207807709bc6199df4146fbe051f0be73ce82c0ae8e",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-23 15:13:42.318 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:13:42.318 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-23 15:13:42.318 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:13:42.330 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:13:42.330 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 15:13:42.331 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 15:13:42.342 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ay9Q"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****hpjw"
    }
  ],
  "ActivityId": "0HLFGRFR4MACK:00000003",
  "TimeStamp": "2018-07-23T21:13:42Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:13:42.342 -06:00 [DBG] Token request success.
2018-07-23 15:15:05.901 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-23 15:15:05.901 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-23 15:15:05.901 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-23 15:15:05.901 -06:00 [DBG] Start discovery request
2018-07-23 15:15:05.958 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-23 15:15:05.958 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-23 15:15:05.958 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-23 15:15:05.958 -06:00 [DBG] Start key discovery request
2018-07-23 15:15:05.982 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-23 15:15:05.982 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-23 15:15:05.982 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-23 15:15:05.982 -06:00 [DBG] Start authorize request
2018-07-23 15:15:05.982 -06:00 [DBG] No user present in authorize request
2018-07-23 15:15:05.982 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:15:05.982 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:15:05.982 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:15:05.982 -06:00 [DBG] No PKCE used.
2018-07-23 15:15:05.982 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:15:05.982 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcK7U0zXhtibitl83zxrSJVD1OhKIj-3vxoVemhyhrz3rOTEOxn05cmipGysD8J8mPrZZsr0UgKCKrUud3U-FUTrIUr3RsO5J3eSNdPy8KaQgubpTTsFKO4N4gEfm-RIQiqgCeECRxMGJUWDc1qmnNKrYWwKNQjKMxbgnhm1PEN3f9rFxQgCSyi2w6k-djO5EPMbVLlG5I3HMxkNizFGC_OsHbjvhCz5FIU8CFFfHdd9KY9ShsDuzSV_lq8wSBSLnqVd7PabUJ9cTuemty8hR9DwboNk4vZ0lFTfRh1Zb1YPy2jm9cnpAkFY82koVHT9XM",
  "Nonce": "636679773059728940.OTBkYzlkYWMtYWQwMi00Y2U1LWIyNTYtMjA5ZmZiNTM1NmZiMjAxMDczNTEtZTU2OC00ZGYxLThjNjEtZTVkZWE4MmI5NmQx",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679773059728940.OTBkYzlkYWMtYWQwMi00Y2U1LWIyNTYtMjA5ZmZiNTM1NmZiMjAxMDczNTEtZTU2OC00ZGYxLThjNjEtZTVkZWE4MmI5NmQx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcK7U0zXhtibitl83zxrSJVD1OhKIj-3vxoVemhyhrz3rOTEOxn05cmipGysD8J8mPrZZsr0UgKCKrUud3U-FUTrIUr3RsO5J3eSNdPy8KaQgubpTTsFKO4N4gEfm-RIQiqgCeECRxMGJUWDc1qmnNKrYWwKNQjKMxbgnhm1PEN3f9rFxQgCSyi2w6k-djO5EPMbVLlG5I3HMxkNizFGC_OsHbjvhCz5FIU8CFFfHdd9KY9ShsDuzSV_lq8wSBSLnqVd7PabUJ9cTuemty8hR9DwboNk4vZ0lFTfRh1Zb1YPy2jm9cnpAkFY82koVHT9XM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 15:15:05.983 -06:00 [INF] Showing login: User is not authenticated
2018-07-23 15:15:05.985 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:15:05.985 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:15:05.985 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:15:05.985 -06:00 [DBG] No PKCE used.
2018-07-23 15:15:05.985 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:15:05.985 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:15:15.029 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 15:15:15.044 -06:00 [DBG] Augmenting SignInContext
2018-07-23 15:15:15.044 -06:00 [DBG] Adding idp claim with value: local
2018-07-23 15:15:15.044 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-23 15:15:15.044 -06:00 [DBG] Adding auth_time claim with value: 1532380515
2018-07-23 15:15:15.044 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 15:15:15.045 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFGRFR4MACJ:00000011",
  "TimeStamp": "2018-07-23T21:15:15Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:15:15.047 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:15:15.048 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:15:15.048 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 15:15:15.048 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 15:15:15.048 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 15:15:15.048 -06:00 [DBG] Start authorize callback request
2018-07-23 15:15:15.048 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:15:15.048 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:15:15.048 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:15:15.048 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:15:15.048 -06:00 [DBG] No PKCE used.
2018-07-23 15:15:15.048 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:15:15.048 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcK7U0zXhtibitl83zxrSJVD1OhKIj-3vxoVemhyhrz3rOTEOxn05cmipGysD8J8mPrZZsr0UgKCKrUud3U-FUTrIUr3RsO5J3eSNdPy8KaQgubpTTsFKO4N4gEfm-RIQiqgCeECRxMGJUWDc1qmnNKrYWwKNQjKMxbgnhm1PEN3f9rFxQgCSyi2w6k-djO5EPMbVLlG5I3HMxkNizFGC_OsHbjvhCz5FIU8CFFfHdd9KY9ShsDuzSV_lq8wSBSLnqVd7PabUJ9cTuemty8hR9DwboNk4vZ0lFTfRh1Zb1YPy2jm9cnpAkFY82koVHT9XM",
  "Nonce": "636679773059728940.OTBkYzlkYWMtYWQwMi00Y2U1LWIyNTYtMjA5ZmZiNTM1NmZiMjAxMDczNTEtZTU2OC00ZGYxLThjNjEtZTVkZWE4MmI5NmQx",
  "SessionId": "76facb348360c0c3b278f5bb0a3e1b96",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679773059728940.OTBkYzlkYWMtYWQwMi00Y2U1LWIyNTYtMjA5ZmZiNTM1NmZiMjAxMDczNTEtZTU2OC00ZGYxLThjNjEtZTVkZWE4MmI5NmQx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcK7U0zXhtibitl83zxrSJVD1OhKIj-3vxoVemhyhrz3rOTEOxn05cmipGysD8J8mPrZZsr0UgKCKrUud3U-FUTrIUr3RsO5J3eSNdPy8KaQgubpTTsFKO4N4gEfm-RIQiqgCeECRxMGJUWDc1qmnNKrYWwKNQjKMxbgnhm1PEN3f9rFxQgCSyi2w6k-djO5EPMbVLlG5I3HMxkNizFGC_OsHbjvhCz5FIU8CFFfHdd9KY9ShsDuzSV_lq8wSBSLnqVd7PabUJ9cTuemty8hR9DwboNk4vZ0lFTfRh1Zb1YPy2jm9cnpAkFY82koVHT9XM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 15:15:15.050 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 15:15:15.050 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 15:15:15.050 -06:00 [INF] Showing consent: User has not yet consented
2018-07-23 15:15:15.052 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:15:15.052 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:15:15.052 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:15:15.052 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:15:15.052 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:15:15.052 -06:00 [DBG] No PKCE used.
2018-07-23 15:15:15.053 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:15:15.053 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:15:18.683 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-23 15:15:18.684 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:15:18.684 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:15:18.684 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:15:18.684 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:15:18.684 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:15:18.684 -06:00 [DBG] No PKCE used.
2018-07-23 15:15:18.684 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:15:18.688 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:15:18.688 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-23 15:15:18.688 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-23 15:15:18.688 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-23 15:15:18.688 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-23 15:15:18.688 -06:00 [DBG] Start authorize callback request
2018-07-23 15:15:18.688 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:15:18.688 -06:00 [DBG] Start authorize request protocol validation
2018-07-23 15:15:18.688 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:15:18.688 -06:00 [DBG] Checking for PKCE parameters
2018-07-23 15:15:18.688 -06:00 [DBG] No PKCE used.
2018-07-23 15:15:18.688 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-23 15:15:18.688 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcK7U0zXhtibitl83zxrSJVD1OhKIj-3vxoVemhyhrz3rOTEOxn05cmipGysD8J8mPrZZsr0UgKCKrUud3U-FUTrIUr3RsO5J3eSNdPy8KaQgubpTTsFKO4N4gEfm-RIQiqgCeECRxMGJUWDc1qmnNKrYWwKNQjKMxbgnhm1PEN3f9rFxQgCSyi2w6k-djO5EPMbVLlG5I3HMxkNizFGC_OsHbjvhCz5FIU8CFFfHdd9KY9ShsDuzSV_lq8wSBSLnqVd7PabUJ9cTuemty8hR9DwboNk4vZ0lFTfRh1Zb1YPy2jm9cnpAkFY82koVHT9XM",
  "Nonce": "636679773059728940.OTBkYzlkYWMtYWQwMi00Y2U1LWIyNTYtMjA5ZmZiNTM1NmZiMjAxMDczNTEtZTU2OC00ZGYxLThjNjEtZTVkZWE4MmI5NmQx",
  "SessionId": "76facb348360c0c3b278f5bb0a3e1b96",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636679773059728940.OTBkYzlkYWMtYWQwMi00Y2U1LWIyNTYtMjA5ZmZiNTM1NmZiMjAxMDczNTEtZTU2OC00ZGYxLThjNjEtZTVkZWE4MmI5NmQx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcK7U0zXhtibitl83zxrSJVD1OhKIj-3vxoVemhyhrz3rOTEOxn05cmipGysD8J8mPrZZsr0UgKCKrUud3U-FUTrIUr3RsO5J3eSNdPy8KaQgubpTTsFKO4N4gEfm-RIQiqgCeECRxMGJUWDc1qmnNKrYWwKNQjKMxbgnhm1PEN3f9rFxQgCSyi2w6k-djO5EPMbVLlG5I3HMxkNizFGC_OsHbjvhCz5FIU8CFFfHdd9KY9ShsDuzSV_lq8wSBSLnqVd7PabUJ9cTuemty8hR9DwboNk4vZ0lFTfRh1Zb1YPy2jm9cnpAkFY82koVHT9XM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-23 15:15:18.690 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-23 15:15:18.690 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-23 15:15:18.690 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-23 15:15:18.690 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:15:18.690 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-23 15:15:18.694 -06:00 [DBG] Creating Implicit Flow response.
2018-07-23 15:15:18.694 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 15:15:18.694 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 15:15:18.706 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****_wAA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****0e18"
    }
  ],
  "ActivityId": "0HLFGRFR4MACJ:00000015",
  "TimeStamp": "2018-07-23T21:15:18Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:15:18.706 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcK7U0zXhtibitl83zxrSJVD1OhKIj-3vxoVemhyhrz3rOTEOxn05cmipGysD8J8mPrZZsr0UgKCKrUud3U-FUTrIUr3RsO5J3eSNdPy8KaQgubpTTsFKO4N4gEfm-RIQiqgCeECRxMGJUWDc1qmnNKrYWwKNQjKMxbgnhm1PEN3f9rFxQgCSyi2w6k-djO5EPMbVLlG5I3HMxkNizFGC_OsHbjvhCz5FIU8CFFfHdd9KY9ShsDuzSV_lq8wSBSLnqVd7PabUJ9cTuemty8hR9DwboNk4vZ0lFTfRh1Zb1YPy2jm9cnpAkFY82koVHT9XM",
  "Scope": "openid profile business email"
}
2018-07-23 15:15:18.706 -06:00 [DBG] Augmenting SignInContext
2018-07-23 15:15:18.707 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-23 15:15:18.797 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-23 15:15:18.797 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-23 15:15:18.797 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-23 15:15:18.797 -06:00 [DBG] Start token request.
2018-07-23 15:15:18.798 -06:00 [DBG] Start client validation
2018-07-23 15:15:18.798 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-23 15:15:18.798 -06:00 [DBG] Start parsing for secret in post body
2018-07-23 15:15:18.798 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-23 15:15:18.798 -06:00 [DBG] Secret id found: ideaBox
2018-07-23 15:15:18.798 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:15:18.798 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-23 15:15:18.798 -06:00 [DBG] Client validation success
2018-07-23 15:15:18.798 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFGRFR4MACL:00000003",
  "TimeStamp": "2018-07-23T21:15:18Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:15:18.798 -06:00 [DBG] Start token request validation
2018-07-23 15:15:18.798 -06:00 [DBG] Start validation of authorization code token request
2018-07-23 15:15:18.806 -06:00 [DBG] Validation of authorization code token request success
2018-07-23 15:15:18.806 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "e25caaf29d0de5901af08f3567c3d070b0d10ab093a935a789b0fd19bd820e18",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "e25caaf29d0de5901af08f3567c3d070b0d10ab093a935a789b0fd19bd820e18",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-23 15:15:18.806 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:15:18.806 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-23 15:15:18.806 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-23 15:15:18.818 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:15:18.818 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-23 15:15:18.818 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-23 15:15:18.830 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Iqlg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****66OQ"
    }
  ],
  "ActivityId": "0HLFGRFR4MACL:00000003",
  "TimeStamp": "2018-07-23T21:15:18Z",
  "ProcessId": 2065,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-23 15:15:18.830 -06:00 [DBG] Token request success.
2018-07-23 15:15:18.837 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-23 15:15:18.837 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-23 15:15:18.837 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-23 15:15:18.837 -06:00 [DBG] Start userinfo request
2018-07-23 15:15:18.837 -06:00 [DBG] Bearer token found in header
2018-07-23 15:15:18.839 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:15:18.839 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-23 15:15:18.840 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-23 15:15:18.840 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532380518,
    "exp": 1532384118,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532380515,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-23 15:15:18.840 -06:00 [DBG] Creating userinfo response
2018-07-23 15:15:18.840 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 15:15:18.840 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 15:15:18.840 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-23 15:15:18.840 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-23 15:15:18.841 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-23 15:15:18.841 -06:00 [DBG] End userinfo request
2018-07-24 14:32:00.463 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-24 14:32:00.494 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-24 14:32:00.496 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-24 14:32:00.496 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-24 14:32:00.497 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-24 14:32:00.497 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-25 10:44:19.122 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-25 10:44:19.240 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-25 10:44:19.240 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-25 10:44:19.243 -06:00 [DBG] Start discovery request
2018-07-25 10:44:19.372 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-25 10:44:19.373 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-25 10:44:19.373 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-25 10:44:19.375 -06:00 [DBG] Start key discovery request
2018-07-25 10:44:19.415 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-25 10:44:19.417 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-25 10:44:19.417 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-25 10:44:19.420 -06:00 [DBG] Start authorize request
2018-07-25 10:44:19.434 -06:00 [DBG] No user present in authorize request
2018-07-25 10:44:19.438 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 10:44:19.449 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 10:44:19.454 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 10:44:19.455 -06:00 [DBG] No PKCE used.
2018-07-25 10:44:19.481 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 10:44:19.491 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcRTLoQ9bSuqOwQCSSHURvIze5D3sF2Q9ZYalqvGYLcvsNHeX6cgOyUvO16pMmrAChWkIsa5qnjWpBM5qEa9x9iZK755ImOQXyJ_WUw1IJYVd3dC0W3Rz6SnoTLdAzphQu8YADNiX2H-miVo3MYGjTnd-e86_kWpHny4xdHF76UXrKVJk0j46F_O472MMs0wS3UQcrzlJpwE-3PgiiZU7_iKKJLaixzuaPllIDkVvG0pWe57SOAnBZ4w7slL88YP0Oku0nEhm00vIRVqb4S5iRrsZfuKJZEbJ3p5A3lswNIB8QCEm9xyUCuIAqn_eUKW_Y",
  "Nonce": "636681338594063390.NWZiZWM3ODUtNGNlMS00ZDg0LWJhOWItMDFhYTYwZWY3ZTY2MmMyMjE2YjAtN2MzYS00ZDY3LThlMzktYTU5Nzk3OWM5MDY3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681338594063390.NWZiZWM3ODUtNGNlMS00ZDg0LWJhOWItMDFhYTYwZWY3ZTY2MmMyMjE2YjAtN2MzYS00ZDY3LThlMzktYTU5Nzk3OWM5MDY3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcRTLoQ9bSuqOwQCSSHURvIze5D3sF2Q9ZYalqvGYLcvsNHeX6cgOyUvO16pMmrAChWkIsa5qnjWpBM5qEa9x9iZK755ImOQXyJ_WUw1IJYVd3dC0W3Rz6SnoTLdAzphQu8YADNiX2H-miVo3MYGjTnd-e86_kWpHny4xdHF76UXrKVJk0j46F_O472MMs0wS3UQcrzlJpwE-3PgiiZU7_iKKJLaixzuaPllIDkVvG0pWe57SOAnBZ4w7slL88YP0Oku0nEhm00vIRVqb4S5iRrsZfuKJZEbJ3p5A3lswNIB8QCEm9xyUCuIAqn_eUKW_Y",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 10:44:19.497 -06:00 [INF] Showing login: User is not authenticated
2018-07-25 10:44:19.606 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 10:44:19.607 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 10:44:19.607 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 10:44:19.607 -06:00 [DBG] No PKCE used.
2018-07-25 10:44:19.607 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 10:44:19.609 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 10:44:27.643 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-25 10:44:28.874 -06:00 [DBG] Augmenting SignInContext
2018-07-25 10:44:28.875 -06:00 [DBG] Adding idp claim with value: local
2018-07-25 10:44:28.875 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-25 10:44:28.876 -06:00 [DBG] Adding auth_time claim with value: 1532537068
2018-07-25 10:44:28.905 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-25 10:44:28.934 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFHKJ48TII7:00000003",
  "TimeStamp": "2018-07-25T16:44:28Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 10:44:28.954 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 10:44:28.954 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 10:44:28.954 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-25 10:44:28.955 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-25 10:44:28.955 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-25 10:44:28.959 -06:00 [DBG] Start authorize callback request
2018-07-25 10:44:28.962 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 10:44:28.962 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 10:44:28.962 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 10:44:28.962 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 10:44:28.962 -06:00 [DBG] No PKCE used.
2018-07-25 10:44:28.963 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 10:44:28.963 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcRTLoQ9bSuqOwQCSSHURvIze5D3sF2Q9ZYalqvGYLcvsNHeX6cgOyUvO16pMmrAChWkIsa5qnjWpBM5qEa9x9iZK755ImOQXyJ_WUw1IJYVd3dC0W3Rz6SnoTLdAzphQu8YADNiX2H-miVo3MYGjTnd-e86_kWpHny4xdHF76UXrKVJk0j46F_O472MMs0wS3UQcrzlJpwE-3PgiiZU7_iKKJLaixzuaPllIDkVvG0pWe57SOAnBZ4w7slL88YP0Oku0nEhm00vIRVqb4S5iRrsZfuKJZEbJ3p5A3lswNIB8QCEm9xyUCuIAqn_eUKW_Y",
  "Nonce": "636681338594063390.NWZiZWM3ODUtNGNlMS00ZDg0LWJhOWItMDFhYTYwZWY3ZTY2MmMyMjE2YjAtN2MzYS00ZDY3LThlMzktYTU5Nzk3OWM5MDY3",
  "SessionId": "d4eb08b298f4ba71993a986bfe2f7a24",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681338594063390.NWZiZWM3ODUtNGNlMS00ZDg0LWJhOWItMDFhYTYwZWY3ZTY2MmMyMjE2YjAtN2MzYS00ZDY3LThlMzktYTU5Nzk3OWM5MDY3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcRTLoQ9bSuqOwQCSSHURvIze5D3sF2Q9ZYalqvGYLcvsNHeX6cgOyUvO16pMmrAChWkIsa5qnjWpBM5qEa9x9iZK755ImOQXyJ_WUw1IJYVd3dC0W3Rz6SnoTLdAzphQu8YADNiX2H-miVo3MYGjTnd-e86_kWpHny4xdHF76UXrKVJk0j46F_O472MMs0wS3UQcrzlJpwE-3PgiiZU7_iKKJLaixzuaPllIDkVvG0pWe57SOAnBZ4w7slL88YP0Oku0nEhm00vIRVqb4S5iRrsZfuKJZEbJ3p5A3lswNIB8QCEm9xyUCuIAqn_eUKW_Y",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 10:44:29.002 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-25 10:44:29.003 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-25 10:44:29.003 -06:00 [INF] Showing consent: User has not yet consented
2018-07-25 10:44:29.006 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 10:44:29.006 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 10:44:29.033 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 10:44:29.033 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 10:44:29.033 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 10:44:29.034 -06:00 [DBG] No PKCE used.
2018-07-25 10:44:29.034 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 10:44:29.034 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 10:44:31.527 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-25 10:44:31.527 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 10:44:31.527 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 10:44:31.550 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 10:44:31.550 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 10:44:31.550 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 10:44:31.550 -06:00 [DBG] No PKCE used.
2018-07-25 10:44:31.550 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 10:44:31.566 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 10:44:31.566 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 10:44:31.566 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-25 10:44:31.566 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-25 10:44:31.566 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-25 10:44:31.566 -06:00 [DBG] Start authorize callback request
2018-07-25 10:44:31.595 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 10:44:31.595 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 10:44:31.595 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 10:44:31.595 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 10:44:31.595 -06:00 [DBG] No PKCE used.
2018-07-25 10:44:31.595 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 10:44:31.595 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcRTLoQ9bSuqOwQCSSHURvIze5D3sF2Q9ZYalqvGYLcvsNHeX6cgOyUvO16pMmrAChWkIsa5qnjWpBM5qEa9x9iZK755ImOQXyJ_WUw1IJYVd3dC0W3Rz6SnoTLdAzphQu8YADNiX2H-miVo3MYGjTnd-e86_kWpHny4xdHF76UXrKVJk0j46F_O472MMs0wS3UQcrzlJpwE-3PgiiZU7_iKKJLaixzuaPllIDkVvG0pWe57SOAnBZ4w7slL88YP0Oku0nEhm00vIRVqb4S5iRrsZfuKJZEbJ3p5A3lswNIB8QCEm9xyUCuIAqn_eUKW_Y",
  "Nonce": "636681338594063390.NWZiZWM3ODUtNGNlMS00ZDg0LWJhOWItMDFhYTYwZWY3ZTY2MmMyMjE2YjAtN2MzYS00ZDY3LThlMzktYTU5Nzk3OWM5MDY3",
  "SessionId": "d4eb08b298f4ba71993a986bfe2f7a24",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681338594063390.NWZiZWM3ODUtNGNlMS00ZDg0LWJhOWItMDFhYTYwZWY3ZTY2MmMyMjE2YjAtN2MzYS00ZDY3LThlMzktYTU5Nzk3OWM5MDY3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcRTLoQ9bSuqOwQCSSHURvIze5D3sF2Q9ZYalqvGYLcvsNHeX6cgOyUvO16pMmrAChWkIsa5qnjWpBM5qEa9x9iZK755ImOQXyJ_WUw1IJYVd3dC0W3Rz6SnoTLdAzphQu8YADNiX2H-miVo3MYGjTnd-e86_kWpHny4xdHF76UXrKVJk0j46F_O472MMs0wS3UQcrzlJpwE-3PgiiZU7_iKKJLaixzuaPllIDkVvG0pWe57SOAnBZ4w7slL88YP0Oku0nEhm00vIRVqb4S5iRrsZfuKJZEbJ3p5A3lswNIB8QCEm9xyUCuIAqn_eUKW_Y",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 10:44:31.597 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-25 10:44:31.597 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-25 10:44:31.603 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-25 10:44:31.615 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 10:44:31.622 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-25 10:44:31.643 -06:00 [DBG] Creating Implicit Flow response.
2018-07-25 10:44:31.652 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-25 10:44:31.655 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-25 10:44:31.727 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****1B9A"
    },
    {
      "TokenType": "code",
      "TokenValue": "****dd5b"
    }
  ],
  "ActivityId": "0HLFHKJ48TII7:00000008",
  "TimeStamp": "2018-07-25T16:44:31Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 10:44:31.730 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcRTLoQ9bSuqOwQCSSHURvIze5D3sF2Q9ZYalqvGYLcvsNHeX6cgOyUvO16pMmrAChWkIsa5qnjWpBM5qEa9x9iZK755ImOQXyJ_WUw1IJYVd3dC0W3Rz6SnoTLdAzphQu8YADNiX2H-miVo3MYGjTnd-e86_kWpHny4xdHF76UXrKVJk0j46F_O472MMs0wS3UQcrzlJpwE-3PgiiZU7_iKKJLaixzuaPllIDkVvG0pWe57SOAnBZ4w7slL88YP0Oku0nEhm00vIRVqb4S5iRrsZfuKJZEbJ3p5A3lswNIB8QCEm9xyUCuIAqn_eUKW_Y",
  "Scope": "openid profile business email"
}
2018-07-25 10:44:31.745 -06:00 [DBG] Augmenting SignInContext
2018-07-25 10:44:31.746 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-25 10:44:31.832 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-25 10:44:31.835 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-25 10:44:31.835 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-25 10:44:31.842 -06:00 [DBG] Start token request.
2018-07-25 10:44:31.847 -06:00 [DBG] Start client validation
2018-07-25 10:44:31.851 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-25 10:44:31.854 -06:00 [DBG] Start parsing for secret in post body
2018-07-25 10:44:31.854 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-25 10:44:31.854 -06:00 [DBG] Secret id found: ideaBox
2018-07-25 10:44:31.854 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 10:44:31.862 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-25 10:44:31.862 -06:00 [DBG] Client validation success
2018-07-25 10:44:31.866 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFHKJ48TII3:00000003",
  "TimeStamp": "2018-07-25T16:44:31Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 10:44:31.871 -06:00 [DBG] Start token request validation
2018-07-25 10:44:31.880 -06:00 [DBG] Start validation of authorization code token request
2018-07-25 10:44:31.898 -06:00 [DBG] Validation of authorization code token request success
2018-07-25 10:44:31.901 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "87d3544840b94382ae650f4c0bf8435399ada127314c166bc7f5ea7e7dfcdd5b",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "87d3544840b94382ae650f4c0bf8435399ada127314c166bc7f5ea7e7dfcdd5b",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-25 10:44:31.912 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 10:44:31.922 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-25 10:44:31.922 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 10:44:31.941 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 10:44:31.944 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-25 10:44:31.944 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-25 10:44:31.957 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ji7Q"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****xYvA"
    }
  ],
  "ActivityId": "0HLFHKJ48TII3:00000003",
  "TimeStamp": "2018-07-25T16:44:31Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 10:44:31.958 -06:00 [DBG] Token request success.
2018-07-25 10:44:31.969 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-25 10:44:31.970 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-25 10:44:31.970 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-25 10:44:31.976 -06:00 [DBG] Start userinfo request
2018-07-25 10:44:31.980 -06:00 [DBG] Bearer token found in header
2018-07-25 10:44:32.042 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 10:44:32.045 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 10:44:32.047 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-25 10:44:32.050 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532537071,
    "exp": 1532540671,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532537068,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-25 10:44:32.055 -06:00 [DBG] Creating userinfo response
2018-07-25 10:44:32.058 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 10:44:32.060 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 10:44:32.062 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-25 10:44:32.062 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 10:44:32.064 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-25 10:44:32.064 -06:00 [DBG] End userinfo request
2018-07-25 12:44:28.169 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-25 12:44:28.169 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-25 12:44:28.169 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-25 12:44:28.169 -06:00 [DBG] Start discovery request
2018-07-25 12:44:28.233 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-25 12:44:28.233 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-25 12:44:28.233 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-25 12:44:28.233 -06:00 [DBG] Start key discovery request
2018-07-25 12:44:28.265 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-25 12:44:28.265 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-25 12:44:28.265 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-25 12:44:28.265 -06:00 [DBG] Start authorize request
2018-07-25 12:44:28.266 -06:00 [DBG] No user present in authorize request
2018-07-25 12:44:28.266 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:44:28.266 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:44:28.266 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:44:28.266 -06:00 [DBG] No PKCE used.
2018-07-25 12:44:28.266 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:44:28.266 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfQ4R8Q9h5WlpEGkTP_INQJlEKuHtH1blhQm-2lYEe-Q_iA4-83REVTgIXCLcX62-Ct0ucDnMvxiPXGQp3AUczJ8rBQuZFYUfjwWzCDI7C9XX-c3aykZYo1OdUSvfnGzu3K0qCofYp5ybSCCc8t1sIa99RzmqIo-ws3_gyfyndBKw1bh8ky40S4EtFSxHnXgxe_7sc9zpXJZ8ccE6CwuxXdI8NVhFvUZ_xSIQ3sPtkA4iFF2m2INc_wO7fmZ41Kr_Jx4WCefIZbjMGqcKEtX000qfbSkjaNCmDst3YqOpybDL9PVKsLlB8XB_E0i8w93_E",
  "Nonce": "636681410682512590.NmJlZTk1OWUtY2IxMC00NDFhLTk3OTQtZWVjNzRmNWU1NjI1YjVkZmQ1YWEtYTMwOC00N2M1LTliOGEtNTMyZDcxMDVmYzNl",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681410682512590.NmJlZTk1OWUtY2IxMC00NDFhLTk3OTQtZWVjNzRmNWU1NjI1YjVkZmQ1YWEtYTMwOC00N2M1LTliOGEtNTMyZDcxMDVmYzNl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfQ4R8Q9h5WlpEGkTP_INQJlEKuHtH1blhQm-2lYEe-Q_iA4-83REVTgIXCLcX62-Ct0ucDnMvxiPXGQp3AUczJ8rBQuZFYUfjwWzCDI7C9XX-c3aykZYo1OdUSvfnGzu3K0qCofYp5ybSCCc8t1sIa99RzmqIo-ws3_gyfyndBKw1bh8ky40S4EtFSxHnXgxe_7sc9zpXJZ8ccE6CwuxXdI8NVhFvUZ_xSIQ3sPtkA4iFF2m2INc_wO7fmZ41Kr_Jx4WCefIZbjMGqcKEtX000qfbSkjaNCmDst3YqOpybDL9PVKsLlB8XB_E0i8w93_E",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 12:44:28.266 -06:00 [INF] Showing login: User is not authenticated
2018-07-25 12:44:28.269 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:44:28.269 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:44:28.269 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:44:28.269 -06:00 [DBG] No PKCE used.
2018-07-25 12:44:28.269 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:44:28.269 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:44:40.487 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-25 12:44:40.487 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-25 12:44:40.487 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-25 12:44:40.487 -06:00 [DBG] Start authorize request
2018-07-25 12:44:40.487 -06:00 [DBG] No user present in authorize request
2018-07-25 12:44:40.487 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:44:40.487 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:44:40.487 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:44:40.487 -06:00 [DBG] No PKCE used.
2018-07-25 12:44:40.487 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:44:40.487 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdArUt1FsrpcVv6E0vMAbNboNg4IN6sbjFL_c5B9JORpK9WVDRwQQ3qQw0TrHIkIOUDcahA51wNjGkP_cG99CFLSWncu5b78Ul-wtafDPxicZHfJvn_Wb6zFAkq2ST9I5dyvBqAXVMTp1h3gQx3tr1D2x4Yb4EAadbMsTCpzkfcn7TVtsmFuprbelcz1MtdqYbcSdW9S3zUEzE7Xo5ZjapigxrkQKKt2PhWzLANMa-kaqGNkWAnZpGEwHeb3to16jRgAt03SyIltosHtvG6r6njI_KQzONsDm8hlEdTtMWbmqv_vEWNOnUXSVyE7oFlhZJjp7XbHmlMz9DrawdJh9BjmoSqMV2Wt1pPnT7h2SV77So3LhGzMwIY1nYgkN0-WHU",
  "Nonce": "636681410804849050.M2I2ZjljMTAtZmY4MS00MWIwLTkyYWEtZTRiOTQyZDU4YzAzMjMxYzQwYjItY2U0OC00NDI2LTg4M2EtMTcxMzYzZDc0Y2Q1",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681410804849050.M2I2ZjljMTAtZmY4MS00MWIwLTkyYWEtZTRiOTQyZDU4YzAzMjMxYzQwYjItY2U0OC00NDI2LTg4M2EtMTcxMzYzZDc0Y2Q1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdArUt1FsrpcVv6E0vMAbNboNg4IN6sbjFL_c5B9JORpK9WVDRwQQ3qQw0TrHIkIOUDcahA51wNjGkP_cG99CFLSWncu5b78Ul-wtafDPxicZHfJvn_Wb6zFAkq2ST9I5dyvBqAXVMTp1h3gQx3tr1D2x4Yb4EAadbMsTCpzkfcn7TVtsmFuprbelcz1MtdqYbcSdW9S3zUEzE7Xo5ZjapigxrkQKKt2PhWzLANMa-kaqGNkWAnZpGEwHeb3to16jRgAt03SyIltosHtvG6r6njI_KQzONsDm8hlEdTtMWbmqv_vEWNOnUXSVyE7oFlhZJjp7XbHmlMz9DrawdJh9BjmoSqMV2Wt1pPnT7h2SV77So3LhGzMwIY1nYgkN0-WHU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 12:44:40.487 -06:00 [INF] Showing login: User is not authenticated
2018-07-25 12:44:40.489 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:44:40.490 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:44:40.490 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:44:40.490 -06:00 [DBG] No PKCE used.
2018-07-25 12:44:40.490 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:44:40.490 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:44:52.775 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-25 12:44:52.790 -06:00 [DBG] Augmenting SignInContext
2018-07-25 12:44:52.790 -06:00 [DBG] Adding idp claim with value: local
2018-07-25 12:44:52.790 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-25 12:44:52.790 -06:00 [DBG] Adding auth_time claim with value: 1532544292
2018-07-25 12:44:52.790 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-25 12:44:52.791 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFHKJ48TII9:00000005",
  "TimeStamp": "2018-07-25T18:44:52Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 12:44:52.794 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:44:52.794 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:44:52.794 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-25 12:44:52.794 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-25 12:44:52.794 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-25 12:44:52.794 -06:00 [DBG] Start authorize callback request
2018-07-25 12:44:52.794 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 12:44:52.794 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:44:52.794 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:44:52.794 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:44:52.794 -06:00 [DBG] No PKCE used.
2018-07-25 12:44:52.794 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:44:52.794 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdArUt1FsrpcVv6E0vMAbNboNg4IN6sbjFL_c5B9JORpK9WVDRwQQ3qQw0TrHIkIOUDcahA51wNjGkP_cG99CFLSWncu5b78Ul-wtafDPxicZHfJvn_Wb6zFAkq2ST9I5dyvBqAXVMTp1h3gQx3tr1D2x4Yb4EAadbMsTCpzkfcn7TVtsmFuprbelcz1MtdqYbcSdW9S3zUEzE7Xo5ZjapigxrkQKKt2PhWzLANMa-kaqGNkWAnZpGEwHeb3to16jRgAt03SyIltosHtvG6r6njI_KQzONsDm8hlEdTtMWbmqv_vEWNOnUXSVyE7oFlhZJjp7XbHmlMz9DrawdJh9BjmoSqMV2Wt1pPnT7h2SV77So3LhGzMwIY1nYgkN0-WHU",
  "Nonce": "636681410804849050.M2I2ZjljMTAtZmY4MS00MWIwLTkyYWEtZTRiOTQyZDU4YzAzMjMxYzQwYjItY2U0OC00NDI2LTg4M2EtMTcxMzYzZDc0Y2Q1",
  "SessionId": "da1379dbdb352f379378460bf04f1361",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681410804849050.M2I2ZjljMTAtZmY4MS00MWIwLTkyYWEtZTRiOTQyZDU4YzAzMjMxYzQwYjItY2U0OC00NDI2LTg4M2EtMTcxMzYzZDc0Y2Q1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdArUt1FsrpcVv6E0vMAbNboNg4IN6sbjFL_c5B9JORpK9WVDRwQQ3qQw0TrHIkIOUDcahA51wNjGkP_cG99CFLSWncu5b78Ul-wtafDPxicZHfJvn_Wb6zFAkq2ST9I5dyvBqAXVMTp1h3gQx3tr1D2x4Yb4EAadbMsTCpzkfcn7TVtsmFuprbelcz1MtdqYbcSdW9S3zUEzE7Xo5ZjapigxrkQKKt2PhWzLANMa-kaqGNkWAnZpGEwHeb3to16jRgAt03SyIltosHtvG6r6njI_KQzONsDm8hlEdTtMWbmqv_vEWNOnUXSVyE7oFlhZJjp7XbHmlMz9DrawdJh9BjmoSqMV2Wt1pPnT7h2SV77So3LhGzMwIY1nYgkN0-WHU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 12:44:52.796 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-25 12:44:52.796 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-25 12:44:52.796 -06:00 [INF] Showing consent: User has not yet consented
2018-07-25 12:44:52.797 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:44:52.797 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:44:52.798 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:44:52.798 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:44:52.798 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:44:52.798 -06:00 [DBG] No PKCE used.
2018-07-25 12:44:52.798 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:44:52.798 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:44:56.429 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-25 12:44:56.429 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:44:56.429 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:44:56.430 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:44:56.430 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:44:56.430 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:44:56.430 -06:00 [DBG] No PKCE used.
2018-07-25 12:44:56.430 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:44:56.433 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:44:56.433 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:44:56.433 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-25 12:44:56.433 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-25 12:44:56.433 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-25 12:44:56.433 -06:00 [DBG] Start authorize callback request
2018-07-25 12:44:56.433 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 12:44:56.433 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:44:56.433 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:44:56.433 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:44:56.433 -06:00 [DBG] No PKCE used.
2018-07-25 12:44:56.433 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:44:56.433 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdArUt1FsrpcVv6E0vMAbNboNg4IN6sbjFL_c5B9JORpK9WVDRwQQ3qQw0TrHIkIOUDcahA51wNjGkP_cG99CFLSWncu5b78Ul-wtafDPxicZHfJvn_Wb6zFAkq2ST9I5dyvBqAXVMTp1h3gQx3tr1D2x4Yb4EAadbMsTCpzkfcn7TVtsmFuprbelcz1MtdqYbcSdW9S3zUEzE7Xo5ZjapigxrkQKKt2PhWzLANMa-kaqGNkWAnZpGEwHeb3to16jRgAt03SyIltosHtvG6r6njI_KQzONsDm8hlEdTtMWbmqv_vEWNOnUXSVyE7oFlhZJjp7XbHmlMz9DrawdJh9BjmoSqMV2Wt1pPnT7h2SV77So3LhGzMwIY1nYgkN0-WHU",
  "Nonce": "636681410804849050.M2I2ZjljMTAtZmY4MS00MWIwLTkyYWEtZTRiOTQyZDU4YzAzMjMxYzQwYjItY2U0OC00NDI2LTg4M2EtMTcxMzYzZDc0Y2Q1",
  "SessionId": "da1379dbdb352f379378460bf04f1361",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681410804849050.M2I2ZjljMTAtZmY4MS00MWIwLTkyYWEtZTRiOTQyZDU4YzAzMjMxYzQwYjItY2U0OC00NDI2LTg4M2EtMTcxMzYzZDc0Y2Q1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdArUt1FsrpcVv6E0vMAbNboNg4IN6sbjFL_c5B9JORpK9WVDRwQQ3qQw0TrHIkIOUDcahA51wNjGkP_cG99CFLSWncu5b78Ul-wtafDPxicZHfJvn_Wb6zFAkq2ST9I5dyvBqAXVMTp1h3gQx3tr1D2x4Yb4EAadbMsTCpzkfcn7TVtsmFuprbelcz1MtdqYbcSdW9S3zUEzE7Xo5ZjapigxrkQKKt2PhWzLANMa-kaqGNkWAnZpGEwHeb3to16jRgAt03SyIltosHtvG6r6njI_KQzONsDm8hlEdTtMWbmqv_vEWNOnUXSVyE7oFlhZJjp7XbHmlMz9DrawdJh9BjmoSqMV2Wt1pPnT7h2SV77So3LhGzMwIY1nYgkN0-WHU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 12:44:56.435 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-25 12:44:56.435 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-25 12:44:56.435 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-25 12:44:56.435 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 12:44:56.435 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-25 12:44:56.440 -06:00 [DBG] Creating Implicit Flow response.
2018-07-25 12:44:56.440 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-25 12:44:56.440 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-25 12:44:56.451 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****FKgA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****c509"
    }
  ],
  "ActivityId": "0HLFHKJ48TII9:00000009",
  "TimeStamp": "2018-07-25T18:44:56Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 12:44:56.451 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdArUt1FsrpcVv6E0vMAbNboNg4IN6sbjFL_c5B9JORpK9WVDRwQQ3qQw0TrHIkIOUDcahA51wNjGkP_cG99CFLSWncu5b78Ul-wtafDPxicZHfJvn_Wb6zFAkq2ST9I5dyvBqAXVMTp1h3gQx3tr1D2x4Yb4EAadbMsTCpzkfcn7TVtsmFuprbelcz1MtdqYbcSdW9S3zUEzE7Xo5ZjapigxrkQKKt2PhWzLANMa-kaqGNkWAnZpGEwHeb3to16jRgAt03SyIltosHtvG6r6njI_KQzONsDm8hlEdTtMWbmqv_vEWNOnUXSVyE7oFlhZJjp7XbHmlMz9DrawdJh9BjmoSqMV2Wt1pPnT7h2SV77So3LhGzMwIY1nYgkN0-WHU",
  "Scope": "openid profile business email"
}
2018-07-25 12:44:56.452 -06:00 [DBG] Augmenting SignInContext
2018-07-25 12:44:56.452 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-25 12:44:56.538 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-25 12:44:56.538 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-25 12:44:56.538 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-25 12:44:56.539 -06:00 [DBG] Start token request.
2018-07-25 12:44:56.539 -06:00 [DBG] Start client validation
2018-07-25 12:44:56.539 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-25 12:44:56.539 -06:00 [DBG] Start parsing for secret in post body
2018-07-25 12:44:56.539 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-25 12:44:56.539 -06:00 [DBG] Secret id found: ideaBox
2018-07-25 12:44:56.539 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:44:56.539 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-25 12:44:56.539 -06:00 [DBG] Client validation success
2018-07-25 12:44:56.539 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFHKJ48TII8:00000003",
  "TimeStamp": "2018-07-25T18:44:56Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 12:44:56.539 -06:00 [DBG] Start token request validation
2018-07-25 12:44:56.539 -06:00 [DBG] Start validation of authorization code token request
2018-07-25 12:44:56.550 -06:00 [DBG] Validation of authorization code token request success
2018-07-25 12:44:56.550 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "a95a9beddc87a33b9ab8756c7345a478e148d7602690fff88de9983b1c17c509",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "a95a9beddc87a33b9ab8756c7345a478e148d7602690fff88de9983b1c17c509",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-25 12:44:56.550 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:44:56.551 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-25 12:44:56.551 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 12:44:56.565 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:44:56.565 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-25 12:44:56.565 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-25 12:44:56.578 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Lj2g"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****3Njw"
    }
  ],
  "ActivityId": "0HLFHKJ48TII8:00000003",
  "TimeStamp": "2018-07-25T18:44:56Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 12:44:56.578 -06:00 [DBG] Token request success.
2018-07-25 12:44:56.585 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-25 12:44:56.585 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-25 12:44:56.585 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-25 12:44:56.585 -06:00 [DBG] Start userinfo request
2018-07-25 12:44:56.585 -06:00 [DBG] Bearer token found in header
2018-07-25 12:44:56.588 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:44:56.588 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:44:56.589 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-25 12:44:56.590 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532544296,
    "exp": 1532547896,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532544292,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-25 12:44:56.590 -06:00 [DBG] Creating userinfo response
2018-07-25 12:44:56.590 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 12:44:56.590 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 12:44:56.590 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-25 12:44:56.590 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 12:44:56.591 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-25 12:44:56.591 -06:00 [DBG] End userinfo request
2018-07-25 12:45:51.212 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-25 12:45:51.212 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-25 12:45:51.213 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-25 12:45:51.213 -06:00 [DBG] Start authorize request
2018-07-25 12:45:51.213 -06:00 [DBG] No user present in authorize request
2018-07-25 12:45:51.213 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:45:51.213 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:45:51.213 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:45:51.213 -06:00 [DBG] No PKCE used.
2018-07-25 12:45:51.213 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:45:51.213 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfUKitufXNyfPv8822r0guSz_aj8TQMrM0RS_yaDuXco7Hu2tiIt2JdgXx_Wwe14kVeIhcdEbfkTdYLQZMp6TkjSyPJJf_ZkYF7WiJEf0cgSv20XMbaDOqoZINPHhP2hrdeFXazrH_tzItQKo-2e6bfV48ll9-hLUtmBVkPtyJbKf3sgsx-SGcUhcprkKsdH5bSuP10fSe0EuKmYiFWNbYjTqoM67kXXa3xvn6jcMm-Pum_KI99EPRhLM3BNgeVEvIlADzE6yD6QXRqCK_V3pg_y_Hk0sTrip5rsy5q3WBE68cB0zpIFt4o50t5ni5vsJrRRNoTsy25Vv5ENnd2D-zNs1x5HgtIRmgkxG0cGkYW4aqPGH6Ll8wpZTud9NpyUBo",
  "Nonce": "636681411512081920.YThiZTU2Y2ItMDczZS00YTViLWFiZmItMTE4MmRiZjUyOGU1YzIxZTJhZjUtMzM2Zi00NjczLTg4YTAtNTY0NWI2MDJlNzQ2",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681411512081920.YThiZTU2Y2ItMDczZS00YTViLWFiZmItMTE4MmRiZjUyOGU1YzIxZTJhZjUtMzM2Zi00NjczLTg4YTAtNTY0NWI2MDJlNzQ2",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfUKitufXNyfPv8822r0guSz_aj8TQMrM0RS_yaDuXco7Hu2tiIt2JdgXx_Wwe14kVeIhcdEbfkTdYLQZMp6TkjSyPJJf_ZkYF7WiJEf0cgSv20XMbaDOqoZINPHhP2hrdeFXazrH_tzItQKo-2e6bfV48ll9-hLUtmBVkPtyJbKf3sgsx-SGcUhcprkKsdH5bSuP10fSe0EuKmYiFWNbYjTqoM67kXXa3xvn6jcMm-Pum_KI99EPRhLM3BNgeVEvIlADzE6yD6QXRqCK_V3pg_y_Hk0sTrip5rsy5q3WBE68cB0zpIFt4o50t5ni5vsJrRRNoTsy25Vv5ENnd2D-zNs1x5HgtIRmgkxG0cGkYW4aqPGH6Ll8wpZTud9NpyUBo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 12:45:51.214 -06:00 [INF] Showing login: User is not authenticated
2018-07-25 12:45:51.216 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:45:51.216 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:45:51.216 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:45:51.216 -06:00 [DBG] No PKCE used.
2018-07-25 12:45:51.216 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:45:51.216 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:45:59.184 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-25 12:45:59.198 -06:00 [DBG] Augmenting SignInContext
2018-07-25 12:45:59.198 -06:00 [DBG] Adding idp claim with value: local
2018-07-25 12:45:59.198 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-25 12:45:59.198 -06:00 [DBG] Adding auth_time claim with value: 1532544359
2018-07-25 12:45:59.199 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-25 12:45:59.199 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFHKJ48TII9:0000000D",
  "TimeStamp": "2018-07-25T18:45:59Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 12:45:59.201 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:45:59.201 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:45:59.202 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-25 12:45:59.202 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-25 12:45:59.202 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-25 12:45:59.202 -06:00 [DBG] Start authorize callback request
2018-07-25 12:45:59.202 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 12:45:59.202 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:45:59.202 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:45:59.202 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:45:59.202 -06:00 [DBG] No PKCE used.
2018-07-25 12:45:59.202 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:45:59.202 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfUKitufXNyfPv8822r0guSz_aj8TQMrM0RS_yaDuXco7Hu2tiIt2JdgXx_Wwe14kVeIhcdEbfkTdYLQZMp6TkjSyPJJf_ZkYF7WiJEf0cgSv20XMbaDOqoZINPHhP2hrdeFXazrH_tzItQKo-2e6bfV48ll9-hLUtmBVkPtyJbKf3sgsx-SGcUhcprkKsdH5bSuP10fSe0EuKmYiFWNbYjTqoM67kXXa3xvn6jcMm-Pum_KI99EPRhLM3BNgeVEvIlADzE6yD6QXRqCK_V3pg_y_Hk0sTrip5rsy5q3WBE68cB0zpIFt4o50t5ni5vsJrRRNoTsy25Vv5ENnd2D-zNs1x5HgtIRmgkxG0cGkYW4aqPGH6Ll8wpZTud9NpyUBo",
  "Nonce": "636681411512081920.YThiZTU2Y2ItMDczZS00YTViLWFiZmItMTE4MmRiZjUyOGU1YzIxZTJhZjUtMzM2Zi00NjczLTg4YTAtNTY0NWI2MDJlNzQ2",
  "SessionId": "45637c2e11e6997c7853f1d87888fa81",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681411512081920.YThiZTU2Y2ItMDczZS00YTViLWFiZmItMTE4MmRiZjUyOGU1YzIxZTJhZjUtMzM2Zi00NjczLTg4YTAtNTY0NWI2MDJlNzQ2",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfUKitufXNyfPv8822r0guSz_aj8TQMrM0RS_yaDuXco7Hu2tiIt2JdgXx_Wwe14kVeIhcdEbfkTdYLQZMp6TkjSyPJJf_ZkYF7WiJEf0cgSv20XMbaDOqoZINPHhP2hrdeFXazrH_tzItQKo-2e6bfV48ll9-hLUtmBVkPtyJbKf3sgsx-SGcUhcprkKsdH5bSuP10fSe0EuKmYiFWNbYjTqoM67kXXa3xvn6jcMm-Pum_KI99EPRhLM3BNgeVEvIlADzE6yD6QXRqCK_V3pg_y_Hk0sTrip5rsy5q3WBE68cB0zpIFt4o50t5ni5vsJrRRNoTsy25Vv5ENnd2D-zNs1x5HgtIRmgkxG0cGkYW4aqPGH6Ll8wpZTud9NpyUBo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 12:45:59.203 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-25 12:45:59.203 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-25 12:45:59.203 -06:00 [INF] Showing consent: User has not yet consented
2018-07-25 12:45:59.206 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:45:59.206 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:45:59.206 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:45:59.206 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:45:59.206 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:45:59.206 -06:00 [DBG] No PKCE used.
2018-07-25 12:45:59.206 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:45:59.206 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:46:02.625 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-25 12:46:02.625 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:46:02.625 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:46:02.626 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:46:02.626 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:46:02.626 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:46:02.626 -06:00 [DBG] No PKCE used.
2018-07-25 12:46:02.626 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:46:02.630 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:46:02.630 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:46:02.630 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-25 12:46:02.630 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-25 12:46:02.630 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-25 12:46:02.630 -06:00 [DBG] Start authorize callback request
2018-07-25 12:46:02.630 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 12:46:02.630 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:46:02.630 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:46:02.630 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:46:02.630 -06:00 [DBG] No PKCE used.
2018-07-25 12:46:02.630 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:46:02.630 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfUKitufXNyfPv8822r0guSz_aj8TQMrM0RS_yaDuXco7Hu2tiIt2JdgXx_Wwe14kVeIhcdEbfkTdYLQZMp6TkjSyPJJf_ZkYF7WiJEf0cgSv20XMbaDOqoZINPHhP2hrdeFXazrH_tzItQKo-2e6bfV48ll9-hLUtmBVkPtyJbKf3sgsx-SGcUhcprkKsdH5bSuP10fSe0EuKmYiFWNbYjTqoM67kXXa3xvn6jcMm-Pum_KI99EPRhLM3BNgeVEvIlADzE6yD6QXRqCK_V3pg_y_Hk0sTrip5rsy5q3WBE68cB0zpIFt4o50t5ni5vsJrRRNoTsy25Vv5ENnd2D-zNs1x5HgtIRmgkxG0cGkYW4aqPGH6Ll8wpZTud9NpyUBo",
  "Nonce": "636681411512081920.YThiZTU2Y2ItMDczZS00YTViLWFiZmItMTE4MmRiZjUyOGU1YzIxZTJhZjUtMzM2Zi00NjczLTg4YTAtNTY0NWI2MDJlNzQ2",
  "SessionId": "45637c2e11e6997c7853f1d87888fa81",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681411512081920.YThiZTU2Y2ItMDczZS00YTViLWFiZmItMTE4MmRiZjUyOGU1YzIxZTJhZjUtMzM2Zi00NjczLTg4YTAtNTY0NWI2MDJlNzQ2",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfUKitufXNyfPv8822r0guSz_aj8TQMrM0RS_yaDuXco7Hu2tiIt2JdgXx_Wwe14kVeIhcdEbfkTdYLQZMp6TkjSyPJJf_ZkYF7WiJEf0cgSv20XMbaDOqoZINPHhP2hrdeFXazrH_tzItQKo-2e6bfV48ll9-hLUtmBVkPtyJbKf3sgsx-SGcUhcprkKsdH5bSuP10fSe0EuKmYiFWNbYjTqoM67kXXa3xvn6jcMm-Pum_KI99EPRhLM3BNgeVEvIlADzE6yD6QXRqCK_V3pg_y_Hk0sTrip5rsy5q3WBE68cB0zpIFt4o50t5ni5vsJrRRNoTsy25Vv5ENnd2D-zNs1x5HgtIRmgkxG0cGkYW4aqPGH6Ll8wpZTud9NpyUBo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 12:46:02.632 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-25 12:46:02.632 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-25 12:46:02.632 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-25 12:46:02.632 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 12:46:02.632 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-25 12:46:02.636 -06:00 [DBG] Creating Implicit Flow response.
2018-07-25 12:46:02.636 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-25 12:46:02.636 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-25 12:46:02.648 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****WX2A"
    },
    {
      "TokenType": "code",
      "TokenValue": "****6ac7"
    }
  ],
  "ActivityId": "0HLFHKJ48TII9:00000011",
  "TimeStamp": "2018-07-25T18:46:02Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 12:46:02.648 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfUKitufXNyfPv8822r0guSz_aj8TQMrM0RS_yaDuXco7Hu2tiIt2JdgXx_Wwe14kVeIhcdEbfkTdYLQZMp6TkjSyPJJf_ZkYF7WiJEf0cgSv20XMbaDOqoZINPHhP2hrdeFXazrH_tzItQKo-2e6bfV48ll9-hLUtmBVkPtyJbKf3sgsx-SGcUhcprkKsdH5bSuP10fSe0EuKmYiFWNbYjTqoM67kXXa3xvn6jcMm-Pum_KI99EPRhLM3BNgeVEvIlADzE6yD6QXRqCK_V3pg_y_Hk0sTrip5rsy5q3WBE68cB0zpIFt4o50t5ni5vsJrRRNoTsy25Vv5ENnd2D-zNs1x5HgtIRmgkxG0cGkYW4aqPGH6Ll8wpZTud9NpyUBo",
  "Scope": "openid profile business email"
}
2018-07-25 12:46:02.648 -06:00 [DBG] Augmenting SignInContext
2018-07-25 12:46:02.649 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-25 12:46:02.731 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-25 12:46:02.732 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-25 12:46:02.732 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-25 12:46:02.732 -06:00 [DBG] Start token request.
2018-07-25 12:46:02.732 -06:00 [DBG] Start client validation
2018-07-25 12:46:02.732 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-25 12:46:02.732 -06:00 [DBG] Start parsing for secret in post body
2018-07-25 12:46:02.732 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-25 12:46:02.732 -06:00 [DBG] Secret id found: ideaBox
2018-07-25 12:46:02.732 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:46:02.732 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-25 12:46:02.732 -06:00 [DBG] Client validation success
2018-07-25 12:46:02.732 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFHKJ48TII8:00000005",
  "TimeStamp": "2018-07-25T18:46:02Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 12:46:02.732 -06:00 [DBG] Start token request validation
2018-07-25 12:46:02.732 -06:00 [DBG] Start validation of authorization code token request
2018-07-25 12:46:02.740 -06:00 [DBG] Validation of authorization code token request success
2018-07-25 12:46:02.740 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "59a87985f323b59988cdddc89eef78911d1d379f97a2b65f248548d014836ac7",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "59a87985f323b59988cdddc89eef78911d1d379f97a2b65f248548d014836ac7",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-25 12:46:02.740 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:46:02.740 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-25 12:46:02.740 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 12:46:02.753 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:46:02.754 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-25 12:46:02.754 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-25 12:46:02.766 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****JeJw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****vifA"
    }
  ],
  "ActivityId": "0HLFHKJ48TII8:00000005",
  "TimeStamp": "2018-07-25T18:46:02Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 12:46:02.766 -06:00 [DBG] Token request success.
2018-07-25 12:46:02.768 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-25 12:46:02.768 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-25 12:46:02.768 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-25 12:46:02.768 -06:00 [DBG] Start userinfo request
2018-07-25 12:46:02.768 -06:00 [DBG] Bearer token found in header
2018-07-25 12:46:02.770 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:46:02.770 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:46:02.771 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-25 12:46:02.771 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532544362,
    "exp": 1532547962,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532544359,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-25 12:46:02.771 -06:00 [DBG] Creating userinfo response
2018-07-25 12:46:02.771 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 12:46:02.771 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 12:46:02.771 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-25 12:46:02.771 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 12:46:02.772 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-25 12:46:02.772 -06:00 [DBG] End userinfo request
2018-07-25 12:53:17.897 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-25 12:53:17.898 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-25 12:53:17.898 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-25 12:53:17.898 -06:00 [DBG] Start discovery request
2018-07-25 12:53:18.034 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-25 12:53:18.034 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-25 12:53:18.034 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-25 12:53:18.034 -06:00 [DBG] Start key discovery request
2018-07-25 12:53:24.950 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-25 12:53:24.950 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-25 12:53:24.950 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-25 12:53:24.950 -06:00 [DBG] Start authorize request
2018-07-25 12:53:24.950 -06:00 [DBG] No user present in authorize request
2018-07-25 12:53:24.950 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:53:24.950 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:53:24.950 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:53:24.950 -06:00 [DBG] No PKCE used.
2018-07-25 12:53:24.950 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:53:24.950 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeTNhp3H0makbms_PVTWqbWqD_GS4I3nfJ8poY8zP16qzu6ypExZ-yZ-_0-quJ8_RaOQ8voSknQxDQwN2BJXUAKy4qi-O974l1id1C3aSF4P1m4ClZYHdpZR7de7YrNlRbO55Lvv4rvcSi34nUSkr7Smbm4Y96SfMxa-Lx3vHzNs4i_E4Pr7KTCcyiMFFE0rFCIAMmNM5llxLy6Tbd-5WeedCmdRUfOE7EmUtxSZE6UgX7YqoAKltnCBNhVo89w7SKG7LxnbHN0v41ibSNSYGXcgY6yyqXdVjNlWic1us2r7WDmkSyG6Krtgii3QwKyLD7N3wsvHY4J4ZD1qkPb0_E166jv7ZJtpYjqU5n6ESOZVHaD_q2KuglldxkxcAFjUn0",
  "Nonce": "636681415980909480.ZjFiNTBhNDAtMjNiYS00NDE2LWE1YmYtM2Y1ZWJiOTFhZjc4ZmJhOTlhM2EtYjU1My00Yzk1LTgzMjUtMzlmZjE5YjgxOGJj",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681415980909480.ZjFiNTBhNDAtMjNiYS00NDE2LWE1YmYtM2Y1ZWJiOTFhZjc4ZmJhOTlhM2EtYjU1My00Yzk1LTgzMjUtMzlmZjE5YjgxOGJj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeTNhp3H0makbms_PVTWqbWqD_GS4I3nfJ8poY8zP16qzu6ypExZ-yZ-_0-quJ8_RaOQ8voSknQxDQwN2BJXUAKy4qi-O974l1id1C3aSF4P1m4ClZYHdpZR7de7YrNlRbO55Lvv4rvcSi34nUSkr7Smbm4Y96SfMxa-Lx3vHzNs4i_E4Pr7KTCcyiMFFE0rFCIAMmNM5llxLy6Tbd-5WeedCmdRUfOE7EmUtxSZE6UgX7YqoAKltnCBNhVo89w7SKG7LxnbHN0v41ibSNSYGXcgY6yyqXdVjNlWic1us2r7WDmkSyG6Krtgii3QwKyLD7N3wsvHY4J4ZD1qkPb0_E166jv7ZJtpYjqU5n6ESOZVHaD_q2KuglldxkxcAFjUn0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 12:53:24.950 -06:00 [INF] Showing login: User is not authenticated
2018-07-25 12:53:24.953 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:53:24.953 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:53:24.953 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:53:24.953 -06:00 [DBG] No PKCE used.
2018-07-25 12:53:24.953 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:53:24.953 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:53:55.878 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-25 12:53:55.892 -06:00 [DBG] Augmenting SignInContext
2018-07-25 12:53:55.892 -06:00 [DBG] Adding idp claim with value: local
2018-07-25 12:53:55.892 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-25 12:53:55.892 -06:00 [DBG] Adding auth_time claim with value: 1532544835
2018-07-25 12:53:55.893 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-25 12:53:55.893 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFHKJ48TIIG:00000003",
  "TimeStamp": "2018-07-25T18:53:55Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 12:53:55.897 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:53:55.897 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:53:55.897 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-25 12:53:55.897 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-25 12:53:55.897 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-25 12:53:55.897 -06:00 [DBG] Start authorize callback request
2018-07-25 12:53:55.897 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 12:53:55.897 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:53:55.897 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:53:55.898 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:53:55.898 -06:00 [DBG] No PKCE used.
2018-07-25 12:53:55.898 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:53:55.898 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeTNhp3H0makbms_PVTWqbWqD_GS4I3nfJ8poY8zP16qzu6ypExZ-yZ-_0-quJ8_RaOQ8voSknQxDQwN2BJXUAKy4qi-O974l1id1C3aSF4P1m4ClZYHdpZR7de7YrNlRbO55Lvv4rvcSi34nUSkr7Smbm4Y96SfMxa-Lx3vHzNs4i_E4Pr7KTCcyiMFFE0rFCIAMmNM5llxLy6Tbd-5WeedCmdRUfOE7EmUtxSZE6UgX7YqoAKltnCBNhVo89w7SKG7LxnbHN0v41ibSNSYGXcgY6yyqXdVjNlWic1us2r7WDmkSyG6Krtgii3QwKyLD7N3wsvHY4J4ZD1qkPb0_E166jv7ZJtpYjqU5n6ESOZVHaD_q2KuglldxkxcAFjUn0",
  "Nonce": "636681415980909480.ZjFiNTBhNDAtMjNiYS00NDE2LWE1YmYtM2Y1ZWJiOTFhZjc4ZmJhOTlhM2EtYjU1My00Yzk1LTgzMjUtMzlmZjE5YjgxOGJj",
  "SessionId": "959ba88c0c5e6ddcabf95360a5ad6cdb",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681415980909480.ZjFiNTBhNDAtMjNiYS00NDE2LWE1YmYtM2Y1ZWJiOTFhZjc4ZmJhOTlhM2EtYjU1My00Yzk1LTgzMjUtMzlmZjE5YjgxOGJj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeTNhp3H0makbms_PVTWqbWqD_GS4I3nfJ8poY8zP16qzu6ypExZ-yZ-_0-quJ8_RaOQ8voSknQxDQwN2BJXUAKy4qi-O974l1id1C3aSF4P1m4ClZYHdpZR7de7YrNlRbO55Lvv4rvcSi34nUSkr7Smbm4Y96SfMxa-Lx3vHzNs4i_E4Pr7KTCcyiMFFE0rFCIAMmNM5llxLy6Tbd-5WeedCmdRUfOE7EmUtxSZE6UgX7YqoAKltnCBNhVo89w7SKG7LxnbHN0v41ibSNSYGXcgY6yyqXdVjNlWic1us2r7WDmkSyG6Krtgii3QwKyLD7N3wsvHY4J4ZD1qkPb0_E166jv7ZJtpYjqU5n6ESOZVHaD_q2KuglldxkxcAFjUn0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 12:53:55.899 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-25 12:53:55.899 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-25 12:53:55.899 -06:00 [INF] Showing consent: User has not yet consented
2018-07-25 12:53:55.902 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:53:55.902 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:53:55.902 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:53:55.902 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:53:55.902 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:53:55.902 -06:00 [DBG] No PKCE used.
2018-07-25 12:53:55.902 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:53:55.902 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:54:03.593 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-25 12:54:03.593 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:54:03.593 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:54:03.594 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:54:03.594 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:54:03.594 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:54:03.594 -06:00 [DBG] No PKCE used.
2018-07-25 12:54:03.594 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:54:03.598 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:54:03.598 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:54:03.598 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-25 12:54:03.598 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-25 12:54:03.598 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-25 12:54:03.598 -06:00 [DBG] Start authorize callback request
2018-07-25 12:54:03.598 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 12:54:03.598 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:54:03.598 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:54:03.598 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:54:03.598 -06:00 [DBG] No PKCE used.
2018-07-25 12:54:03.598 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:54:03.598 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeTNhp3H0makbms_PVTWqbWqD_GS4I3nfJ8poY8zP16qzu6ypExZ-yZ-_0-quJ8_RaOQ8voSknQxDQwN2BJXUAKy4qi-O974l1id1C3aSF4P1m4ClZYHdpZR7de7YrNlRbO55Lvv4rvcSi34nUSkr7Smbm4Y96SfMxa-Lx3vHzNs4i_E4Pr7KTCcyiMFFE0rFCIAMmNM5llxLy6Tbd-5WeedCmdRUfOE7EmUtxSZE6UgX7YqoAKltnCBNhVo89w7SKG7LxnbHN0v41ibSNSYGXcgY6yyqXdVjNlWic1us2r7WDmkSyG6Krtgii3QwKyLD7N3wsvHY4J4ZD1qkPb0_E166jv7ZJtpYjqU5n6ESOZVHaD_q2KuglldxkxcAFjUn0",
  "Nonce": "636681415980909480.ZjFiNTBhNDAtMjNiYS00NDE2LWE1YmYtM2Y1ZWJiOTFhZjc4ZmJhOTlhM2EtYjU1My00Yzk1LTgzMjUtMzlmZjE5YjgxOGJj",
  "SessionId": "959ba88c0c5e6ddcabf95360a5ad6cdb",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681415980909480.ZjFiNTBhNDAtMjNiYS00NDE2LWE1YmYtM2Y1ZWJiOTFhZjc4ZmJhOTlhM2EtYjU1My00Yzk1LTgzMjUtMzlmZjE5YjgxOGJj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeTNhp3H0makbms_PVTWqbWqD_GS4I3nfJ8poY8zP16qzu6ypExZ-yZ-_0-quJ8_RaOQ8voSknQxDQwN2BJXUAKy4qi-O974l1id1C3aSF4P1m4ClZYHdpZR7de7YrNlRbO55Lvv4rvcSi34nUSkr7Smbm4Y96SfMxa-Lx3vHzNs4i_E4Pr7KTCcyiMFFE0rFCIAMmNM5llxLy6Tbd-5WeedCmdRUfOE7EmUtxSZE6UgX7YqoAKltnCBNhVo89w7SKG7LxnbHN0v41ibSNSYGXcgY6yyqXdVjNlWic1us2r7WDmkSyG6Krtgii3QwKyLD7N3wsvHY4J4ZD1qkPb0_E166jv7ZJtpYjqU5n6ESOZVHaD_q2KuglldxkxcAFjUn0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 12:54:03.600 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-25 12:54:03.600 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-25 12:54:03.600 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-25 12:54:03.600 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 12:54:03.600 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-25 12:54:03.604 -06:00 [DBG] Creating Implicit Flow response.
2018-07-25 12:54:03.604 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-25 12:54:03.605 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-25 12:54:03.616 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****9Q8w"
    },
    {
      "TokenType": "code",
      "TokenValue": "****4ed4"
    }
  ],
  "ActivityId": "0HLFHKJ48TIIG:00000007",
  "TimeStamp": "2018-07-25T18:54:03Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 12:54:03.616 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeTNhp3H0makbms_PVTWqbWqD_GS4I3nfJ8poY8zP16qzu6ypExZ-yZ-_0-quJ8_RaOQ8voSknQxDQwN2BJXUAKy4qi-O974l1id1C3aSF4P1m4ClZYHdpZR7de7YrNlRbO55Lvv4rvcSi34nUSkr7Smbm4Y96SfMxa-Lx3vHzNs4i_E4Pr7KTCcyiMFFE0rFCIAMmNM5llxLy6Tbd-5WeedCmdRUfOE7EmUtxSZE6UgX7YqoAKltnCBNhVo89w7SKG7LxnbHN0v41ibSNSYGXcgY6yyqXdVjNlWic1us2r7WDmkSyG6Krtgii3QwKyLD7N3wsvHY4J4ZD1qkPb0_E166jv7ZJtpYjqU5n6ESOZVHaD_q2KuglldxkxcAFjUn0",
  "Scope": "openid profile business email"
}
2018-07-25 12:54:03.616 -06:00 [DBG] Augmenting SignInContext
2018-07-25 12:54:03.617 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-25 12:54:03.893 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-25 12:54:03.893 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-25 12:54:03.893 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-25 12:54:03.894 -06:00 [DBG] Start token request.
2018-07-25 12:54:03.894 -06:00 [DBG] Start client validation
2018-07-25 12:54:03.894 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-25 12:54:03.894 -06:00 [DBG] Start parsing for secret in post body
2018-07-25 12:54:03.894 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-25 12:54:03.894 -06:00 [DBG] Secret id found: ideaBox
2018-07-25 12:54:03.894 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:54:03.894 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-25 12:54:03.894 -06:00 [DBG] Client validation success
2018-07-25 12:54:03.894 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFHKJ48TIIF:00000003",
  "TimeStamp": "2018-07-25T18:54:03Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 12:54:03.894 -06:00 [DBG] Start token request validation
2018-07-25 12:54:03.894 -06:00 [DBG] Start validation of authorization code token request
2018-07-25 12:54:03.901 -06:00 [DBG] Validation of authorization code token request success
2018-07-25 12:54:03.902 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "564f391ec8f2bf5d342a182bd055b674d283f66404121ac2258564a2b59f4ed4",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "564f391ec8f2bf5d342a182bd055b674d283f66404121ac2258564a2b59f4ed4",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-25 12:54:03.902 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:54:03.902 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-25 12:54:03.902 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 12:54:03.914 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:54:03.915 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-25 12:54:03.915 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-25 12:54:03.926 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****-1PA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****JvoQ"
    }
  ],
  "ActivityId": "0HLFHKJ48TIIF:00000003",
  "TimeStamp": "2018-07-25T18:54:03Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 12:54:03.926 -06:00 [DBG] Token request success.
2018-07-25 12:54:03.935 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-25 12:54:03.935 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-25 12:54:03.935 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-25 12:54:03.936 -06:00 [DBG] Start userinfo request
2018-07-25 12:54:03.936 -06:00 [DBG] Bearer token found in header
2018-07-25 12:54:03.938 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:54:03.938 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:54:03.940 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-25 12:54:03.940 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532544843,
    "exp": 1532548443,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532544835,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-25 12:54:03.940 -06:00 [DBG] Creating userinfo response
2018-07-25 12:54:03.940 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 12:54:03.940 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 12:54:03.940 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-25 12:54:03.940 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 12:54:03.942 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-25 12:54:03.942 -06:00 [DBG] End userinfo request
2018-07-25 12:59:12.182 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-25 12:59:12.182 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-25 12:59:12.182 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-25 12:59:12.182 -06:00 [DBG] Start discovery request
2018-07-25 12:59:12.321 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-25 12:59:12.321 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-25 12:59:12.321 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-25 12:59:12.321 -06:00 [DBG] Start key discovery request
2018-07-25 12:59:12.402 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-25 12:59:12.402 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-25 12:59:12.402 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-25 12:59:12.402 -06:00 [DBG] Start authorize request
2018-07-25 12:59:12.402 -06:00 [DBG] No user present in authorize request
2018-07-25 12:59:12.402 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:59:12.402 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:59:12.402 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:59:12.402 -06:00 [DBG] No PKCE used.
2018-07-25 12:59:12.402 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:59:12.402 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcHuM03N7Vi0AnnHZ5Et14gk7jhoCz6qA2X0iObQdKSAl72vvaoDSvMDMkuoaTtk7NCtdgjyKrDcw2yqP038_fUmblEF7aodmiW_D4NbnfB4Gl8oOkj_6N_eDJ3-__qDBkies-xqEKIsHpKREH3wKwJ_bGyIgl7or39D0qe_TE0NRMYBnImkFgEhnBjxEaMTemNKJ2NE4QuRyxaEV_lMVSdhyjwvKDuvJjU2x12PNy1UUs2oMPVvPkcwUgBLL19c79v7ljVha4U2PcPBRkYNGHT6ZiJXS9eLTfKcb9nrgXNHhLshXiZrp3MsfyRiFzdlTlnRhcVvz2ZXUIe5E1nnnm427BYkBbU_0k15YpcXC1dSmVEJ-GnwTFhN3TkXSEH1BY",
  "Nonce": "636681419523802870.Mjg3ZWNhMzAtYzFiMi00NTUzLTgzYTAtZDZmMDFlNzA2ZjM4N2JhNWNjZWEtNDFmYS00MGY4LWIwYjQtNmE1YTk5OWI0NmIz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681419523802870.Mjg3ZWNhMzAtYzFiMi00NTUzLTgzYTAtZDZmMDFlNzA2ZjM4N2JhNWNjZWEtNDFmYS00MGY4LWIwYjQtNmE1YTk5OWI0NmIz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcHuM03N7Vi0AnnHZ5Et14gk7jhoCz6qA2X0iObQdKSAl72vvaoDSvMDMkuoaTtk7NCtdgjyKrDcw2yqP038_fUmblEF7aodmiW_D4NbnfB4Gl8oOkj_6N_eDJ3-__qDBkies-xqEKIsHpKREH3wKwJ_bGyIgl7or39D0qe_TE0NRMYBnImkFgEhnBjxEaMTemNKJ2NE4QuRyxaEV_lMVSdhyjwvKDuvJjU2x12PNy1UUs2oMPVvPkcwUgBLL19c79v7ljVha4U2PcPBRkYNGHT6ZiJXS9eLTfKcb9nrgXNHhLshXiZrp3MsfyRiFzdlTlnRhcVvz2ZXUIe5E1nnnm427BYkBbU_0k15YpcXC1dSmVEJ-GnwTFhN3TkXSEH1BY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 12:59:12.402 -06:00 [INF] Showing login: User is not authenticated
2018-07-25 12:59:12.405 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:59:12.405 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:59:12.405 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:59:12.405 -06:00 [DBG] No PKCE used.
2018-07-25 12:59:12.405 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:59:12.405 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:59:21.022 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-25 12:59:21.037 -06:00 [DBG] Augmenting SignInContext
2018-07-25 12:59:21.037 -06:00 [DBG] Adding idp claim with value: local
2018-07-25 12:59:21.037 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-25 12:59:21.037 -06:00 [DBG] Adding auth_time claim with value: 1532545161
2018-07-25 12:59:21.037 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-25 12:59:21.038 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFHKJ48TIII:00000003",
  "TimeStamp": "2018-07-25T18:59:21Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 12:59:21.040 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:59:21.040 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:59:21.041 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-25 12:59:21.041 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-25 12:59:21.041 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-25 12:59:21.041 -06:00 [DBG] Start authorize callback request
2018-07-25 12:59:21.041 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 12:59:21.041 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:59:21.041 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:59:21.041 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:59:21.041 -06:00 [DBG] No PKCE used.
2018-07-25 12:59:21.041 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:59:21.041 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcHuM03N7Vi0AnnHZ5Et14gk7jhoCz6qA2X0iObQdKSAl72vvaoDSvMDMkuoaTtk7NCtdgjyKrDcw2yqP038_fUmblEF7aodmiW_D4NbnfB4Gl8oOkj_6N_eDJ3-__qDBkies-xqEKIsHpKREH3wKwJ_bGyIgl7or39D0qe_TE0NRMYBnImkFgEhnBjxEaMTemNKJ2NE4QuRyxaEV_lMVSdhyjwvKDuvJjU2x12PNy1UUs2oMPVvPkcwUgBLL19c79v7ljVha4U2PcPBRkYNGHT6ZiJXS9eLTfKcb9nrgXNHhLshXiZrp3MsfyRiFzdlTlnRhcVvz2ZXUIe5E1nnnm427BYkBbU_0k15YpcXC1dSmVEJ-GnwTFhN3TkXSEH1BY",
  "Nonce": "636681419523802870.Mjg3ZWNhMzAtYzFiMi00NTUzLTgzYTAtZDZmMDFlNzA2ZjM4N2JhNWNjZWEtNDFmYS00MGY4LWIwYjQtNmE1YTk5OWI0NmIz",
  "SessionId": "d08c92ce3657c33539b04b4eeddffe15",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681419523802870.Mjg3ZWNhMzAtYzFiMi00NTUzLTgzYTAtZDZmMDFlNzA2ZjM4N2JhNWNjZWEtNDFmYS00MGY4LWIwYjQtNmE1YTk5OWI0NmIz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcHuM03N7Vi0AnnHZ5Et14gk7jhoCz6qA2X0iObQdKSAl72vvaoDSvMDMkuoaTtk7NCtdgjyKrDcw2yqP038_fUmblEF7aodmiW_D4NbnfB4Gl8oOkj_6N_eDJ3-__qDBkies-xqEKIsHpKREH3wKwJ_bGyIgl7or39D0qe_TE0NRMYBnImkFgEhnBjxEaMTemNKJ2NE4QuRyxaEV_lMVSdhyjwvKDuvJjU2x12PNy1UUs2oMPVvPkcwUgBLL19c79v7ljVha4U2PcPBRkYNGHT6ZiJXS9eLTfKcb9nrgXNHhLshXiZrp3MsfyRiFzdlTlnRhcVvz2ZXUIe5E1nnnm427BYkBbU_0k15YpcXC1dSmVEJ-GnwTFhN3TkXSEH1BY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 12:59:21.042 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-25 12:59:21.042 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-25 12:59:21.043 -06:00 [INF] Showing consent: User has not yet consented
2018-07-25 12:59:21.045 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:59:21.046 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:59:21.046 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:59:21.046 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:59:21.046 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:59:21.046 -06:00 [DBG] No PKCE used.
2018-07-25 12:59:21.046 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:59:21.046 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:59:23.694 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-25 12:59:23.694 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:59:23.694 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:59:23.695 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:59:23.695 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:59:23.695 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:59:23.695 -06:00 [DBG] No PKCE used.
2018-07-25 12:59:23.695 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:59:23.699 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:59:23.699 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 12:59:23.699 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-25 12:59:23.699 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-25 12:59:23.699 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-25 12:59:23.699 -06:00 [DBG] Start authorize callback request
2018-07-25 12:59:23.699 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 12:59:23.699 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 12:59:23.699 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:59:23.699 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 12:59:23.699 -06:00 [DBG] No PKCE used.
2018-07-25 12:59:23.699 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 12:59:23.699 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcHuM03N7Vi0AnnHZ5Et14gk7jhoCz6qA2X0iObQdKSAl72vvaoDSvMDMkuoaTtk7NCtdgjyKrDcw2yqP038_fUmblEF7aodmiW_D4NbnfB4Gl8oOkj_6N_eDJ3-__qDBkies-xqEKIsHpKREH3wKwJ_bGyIgl7or39D0qe_TE0NRMYBnImkFgEhnBjxEaMTemNKJ2NE4QuRyxaEV_lMVSdhyjwvKDuvJjU2x12PNy1UUs2oMPVvPkcwUgBLL19c79v7ljVha4U2PcPBRkYNGHT6ZiJXS9eLTfKcb9nrgXNHhLshXiZrp3MsfyRiFzdlTlnRhcVvz2ZXUIe5E1nnnm427BYkBbU_0k15YpcXC1dSmVEJ-GnwTFhN3TkXSEH1BY",
  "Nonce": "636681419523802870.Mjg3ZWNhMzAtYzFiMi00NTUzLTgzYTAtZDZmMDFlNzA2ZjM4N2JhNWNjZWEtNDFmYS00MGY4LWIwYjQtNmE1YTk5OWI0NmIz",
  "SessionId": "d08c92ce3657c33539b04b4eeddffe15",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681419523802870.Mjg3ZWNhMzAtYzFiMi00NTUzLTgzYTAtZDZmMDFlNzA2ZjM4N2JhNWNjZWEtNDFmYS00MGY4LWIwYjQtNmE1YTk5OWI0NmIz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcHuM03N7Vi0AnnHZ5Et14gk7jhoCz6qA2X0iObQdKSAl72vvaoDSvMDMkuoaTtk7NCtdgjyKrDcw2yqP038_fUmblEF7aodmiW_D4NbnfB4Gl8oOkj_6N_eDJ3-__qDBkies-xqEKIsHpKREH3wKwJ_bGyIgl7or39D0qe_TE0NRMYBnImkFgEhnBjxEaMTemNKJ2NE4QuRyxaEV_lMVSdhyjwvKDuvJjU2x12PNy1UUs2oMPVvPkcwUgBLL19c79v7ljVha4U2PcPBRkYNGHT6ZiJXS9eLTfKcb9nrgXNHhLshXiZrp3MsfyRiFzdlTlnRhcVvz2ZXUIe5E1nnnm427BYkBbU_0k15YpcXC1dSmVEJ-GnwTFhN3TkXSEH1BY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 12:59:23.701 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-25 12:59:23.701 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-25 12:59:23.701 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-25 12:59:23.701 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 12:59:23.701 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-25 12:59:23.705 -06:00 [DBG] Creating Implicit Flow response.
2018-07-25 12:59:23.705 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-25 12:59:23.705 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-25 12:59:23.717 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****IzXQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****f063"
    }
  ],
  "ActivityId": "0HLFHKJ48TIII:00000007",
  "TimeStamp": "2018-07-25T18:59:23Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 12:59:23.717 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcHuM03N7Vi0AnnHZ5Et14gk7jhoCz6qA2X0iObQdKSAl72vvaoDSvMDMkuoaTtk7NCtdgjyKrDcw2yqP038_fUmblEF7aodmiW_D4NbnfB4Gl8oOkj_6N_eDJ3-__qDBkies-xqEKIsHpKREH3wKwJ_bGyIgl7or39D0qe_TE0NRMYBnImkFgEhnBjxEaMTemNKJ2NE4QuRyxaEV_lMVSdhyjwvKDuvJjU2x12PNy1UUs2oMPVvPkcwUgBLL19c79v7ljVha4U2PcPBRkYNGHT6ZiJXS9eLTfKcb9nrgXNHhLshXiZrp3MsfyRiFzdlTlnRhcVvz2ZXUIe5E1nnnm427BYkBbU_0k15YpcXC1dSmVEJ-GnwTFhN3TkXSEH1BY",
  "Scope": "openid profile business email"
}
2018-07-25 12:59:23.717 -06:00 [DBG] Augmenting SignInContext
2018-07-25 12:59:23.717 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-25 12:59:23.907 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-25 12:59:23.908 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-25 12:59:23.908 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-25 12:59:23.908 -06:00 [DBG] Start token request.
2018-07-25 12:59:23.908 -06:00 [DBG] Start client validation
2018-07-25 12:59:23.908 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-25 12:59:23.908 -06:00 [DBG] Start parsing for secret in post body
2018-07-25 12:59:23.908 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-25 12:59:23.908 -06:00 [DBG] Secret id found: ideaBox
2018-07-25 12:59:23.908 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:59:23.908 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-25 12:59:23.908 -06:00 [DBG] Client validation success
2018-07-25 12:59:23.908 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFHKJ48TIIH:00000003",
  "TimeStamp": "2018-07-25T18:59:23Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 12:59:23.908 -06:00 [DBG] Start token request validation
2018-07-25 12:59:23.908 -06:00 [DBG] Start validation of authorization code token request
2018-07-25 12:59:23.916 -06:00 [DBG] Validation of authorization code token request success
2018-07-25 12:59:23.916 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "9e4a4f9043691b29533e7b2cd02f34a7245612d0a44b37c78e9620c8d748f063",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "9e4a4f9043691b29533e7b2cd02f34a7245612d0a44b37c78e9620c8d748f063",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-25 12:59:23.916 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:59:23.916 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-25 12:59:23.916 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 12:59:23.929 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:59:23.929 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-25 12:59:23.929 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-25 12:59:23.941 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****U7rw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****7s8A"
    }
  ],
  "ActivityId": "0HLFHKJ48TIIH:00000003",
  "TimeStamp": "2018-07-25T18:59:23Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 12:59:23.941 -06:00 [DBG] Token request success.
2018-07-25 12:59:23.949 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-25 12:59:23.949 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-25 12:59:23.949 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-25 12:59:23.949 -06:00 [DBG] Start userinfo request
2018-07-25 12:59:23.950 -06:00 [DBG] Bearer token found in header
2018-07-25 12:59:23.952 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:59:23.952 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 12:59:23.953 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-25 12:59:23.953 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532545163,
    "exp": 1532548763,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532545161,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-25 12:59:23.953 -06:00 [DBG] Creating userinfo response
2018-07-25 12:59:23.953 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 12:59:23.953 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 12:59:23.953 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-25 12:59:23.953 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 12:59:23.955 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-25 12:59:23.955 -06:00 [DBG] End userinfo request
2018-07-25 16:18:52.817 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-25 16:18:52.817 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-25 16:18:52.817 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-25 16:18:52.817 -06:00 [DBG] Start discovery request
2018-07-25 16:18:52.928 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-25 16:18:52.928 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-25 16:18:52.928 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-25 16:18:52.928 -06:00 [DBG] Start key discovery request
2018-07-25 16:18:53.001 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-25 16:18:53.001 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-25 16:18:53.001 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-25 16:18:53.001 -06:00 [DBG] Start authorize request
2018-07-25 16:18:53.001 -06:00 [DBG] No user present in authorize request
2018-07-25 16:18:53.001 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 16:18:53.001 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:18:53.001 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 16:18:53.001 -06:00 [DBG] No PKCE used.
2018-07-25 16:18:53.001 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 16:18:53.002 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd6gMhNz6Kn9T34gwn_VKPEnqGx7T6e3C1jF1qacwj4iCK5_vWZOTR5Q0Jxdx5TIOpWnoy2K4i_Z96BzxA3DRxBqYyl69Z3Bkhl9TnVqYi5Y9Vm78X2HLozc47UOPLhokUPKAAPD37L0wCriIsNjQhsDeSdYR-Gtjem7mixgaYQp_QKg2fCLHdsqa3rGMPl2nTORu4E6cO2ILgAuOPssjQHUUq7yLXgl2EBDveD2-nSrvOrAn5lGuHHxNlqIe26osNh_rU7IZyieJy8mbqnkOls36h_H5kD9xMaVVh4Epw_kfixTiF4eD9xnsqFnIWhDmF2lQkI6HKXcTP3cvNCwofrL4sdL9opApk-RZBlQeuTrXxJJ5J3tGM6OYUXYB3lobY",
  "Nonce": "636681539329818710.MTNhNjk5ZjYtMjNlNS00OThlLTg0MTYtODczZDJjNzlhMmQ3ZGM5ZTgxZTYtNjljNy00ODY0LThiYWItNDU3YmE4OWRjZTlk",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681539329818710.MTNhNjk5ZjYtMjNlNS00OThlLTg0MTYtODczZDJjNzlhMmQ3ZGM5ZTgxZTYtNjljNy00ODY0LThiYWItNDU3YmE4OWRjZTlk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd6gMhNz6Kn9T34gwn_VKPEnqGx7T6e3C1jF1qacwj4iCK5_vWZOTR5Q0Jxdx5TIOpWnoy2K4i_Z96BzxA3DRxBqYyl69Z3Bkhl9TnVqYi5Y9Vm78X2HLozc47UOPLhokUPKAAPD37L0wCriIsNjQhsDeSdYR-Gtjem7mixgaYQp_QKg2fCLHdsqa3rGMPl2nTORu4E6cO2ILgAuOPssjQHUUq7yLXgl2EBDveD2-nSrvOrAn5lGuHHxNlqIe26osNh_rU7IZyieJy8mbqnkOls36h_H5kD9xMaVVh4Epw_kfixTiF4eD9xnsqFnIWhDmF2lQkI6HKXcTP3cvNCwofrL4sdL9opApk-RZBlQeuTrXxJJ5J3tGM6OYUXYB3lobY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 16:18:53.002 -06:00 [INF] Showing login: User is not authenticated
2018-07-25 16:18:53.004 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 16:18:53.004 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:18:53.004 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 16:18:53.004 -06:00 [DBG] No PKCE used.
2018-07-25 16:18:53.004 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 16:18:53.004 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:19:03.563 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-25 16:19:03.578 -06:00 [DBG] Augmenting SignInContext
2018-07-25 16:19:03.578 -06:00 [DBG] Adding idp claim with value: local
2018-07-25 16:19:03.578 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-25 16:19:03.578 -06:00 [DBG] Adding auth_time claim with value: 1532557143
2018-07-25 16:19:03.579 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-25 16:19:03.579 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFHKJ48TIIK:00000003",
  "TimeStamp": "2018-07-25T22:19:03Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 16:19:03.582 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:19:03.582 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:19:03.582 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-25 16:19:03.582 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-25 16:19:03.582 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-25 16:19:03.582 -06:00 [DBG] Start authorize callback request
2018-07-25 16:19:03.582 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 16:19:03.582 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 16:19:03.582 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:19:03.582 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 16:19:03.582 -06:00 [DBG] No PKCE used.
2018-07-25 16:19:03.582 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 16:19:03.582 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd6gMhNz6Kn9T34gwn_VKPEnqGx7T6e3C1jF1qacwj4iCK5_vWZOTR5Q0Jxdx5TIOpWnoy2K4i_Z96BzxA3DRxBqYyl69Z3Bkhl9TnVqYi5Y9Vm78X2HLozc47UOPLhokUPKAAPD37L0wCriIsNjQhsDeSdYR-Gtjem7mixgaYQp_QKg2fCLHdsqa3rGMPl2nTORu4E6cO2ILgAuOPssjQHUUq7yLXgl2EBDveD2-nSrvOrAn5lGuHHxNlqIe26osNh_rU7IZyieJy8mbqnkOls36h_H5kD9xMaVVh4Epw_kfixTiF4eD9xnsqFnIWhDmF2lQkI6HKXcTP3cvNCwofrL4sdL9opApk-RZBlQeuTrXxJJ5J3tGM6OYUXYB3lobY",
  "Nonce": "636681539329818710.MTNhNjk5ZjYtMjNlNS00OThlLTg0MTYtODczZDJjNzlhMmQ3ZGM5ZTgxZTYtNjljNy00ODY0LThiYWItNDU3YmE4OWRjZTlk",
  "SessionId": "2c8814515914eeb347cbb16e38ae7f52",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681539329818710.MTNhNjk5ZjYtMjNlNS00OThlLTg0MTYtODczZDJjNzlhMmQ3ZGM5ZTgxZTYtNjljNy00ODY0LThiYWItNDU3YmE4OWRjZTlk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd6gMhNz6Kn9T34gwn_VKPEnqGx7T6e3C1jF1qacwj4iCK5_vWZOTR5Q0Jxdx5TIOpWnoy2K4i_Z96BzxA3DRxBqYyl69Z3Bkhl9TnVqYi5Y9Vm78X2HLozc47UOPLhokUPKAAPD37L0wCriIsNjQhsDeSdYR-Gtjem7mixgaYQp_QKg2fCLHdsqa3rGMPl2nTORu4E6cO2ILgAuOPssjQHUUq7yLXgl2EBDveD2-nSrvOrAn5lGuHHxNlqIe26osNh_rU7IZyieJy8mbqnkOls36h_H5kD9xMaVVh4Epw_kfixTiF4eD9xnsqFnIWhDmF2lQkI6HKXcTP3cvNCwofrL4sdL9opApk-RZBlQeuTrXxJJ5J3tGM6OYUXYB3lobY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 16:19:03.584 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-25 16:19:03.584 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-25 16:19:03.584 -06:00 [INF] Showing consent: User has not yet consented
2018-07-25 16:19:03.586 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:19:03.586 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:19:03.586 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 16:19:03.586 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:19:03.586 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 16:19:03.586 -06:00 [DBG] No PKCE used.
2018-07-25 16:19:03.586 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 16:19:03.586 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:19:08.455 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-25 16:19:08.456 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:19:08.456 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:19:08.456 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 16:19:08.456 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:19:08.456 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 16:19:08.456 -06:00 [DBG] No PKCE used.
2018-07-25 16:19:08.456 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 16:19:08.460 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:19:08.460 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:19:08.460 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-25 16:19:08.460 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-25 16:19:08.460 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-25 16:19:08.460 -06:00 [DBG] Start authorize callback request
2018-07-25 16:19:08.461 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 16:19:08.461 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 16:19:08.461 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:19:08.461 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 16:19:08.461 -06:00 [DBG] No PKCE used.
2018-07-25 16:19:08.461 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 16:19:08.461 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd6gMhNz6Kn9T34gwn_VKPEnqGx7T6e3C1jF1qacwj4iCK5_vWZOTR5Q0Jxdx5TIOpWnoy2K4i_Z96BzxA3DRxBqYyl69Z3Bkhl9TnVqYi5Y9Vm78X2HLozc47UOPLhokUPKAAPD37L0wCriIsNjQhsDeSdYR-Gtjem7mixgaYQp_QKg2fCLHdsqa3rGMPl2nTORu4E6cO2ILgAuOPssjQHUUq7yLXgl2EBDveD2-nSrvOrAn5lGuHHxNlqIe26osNh_rU7IZyieJy8mbqnkOls36h_H5kD9xMaVVh4Epw_kfixTiF4eD9xnsqFnIWhDmF2lQkI6HKXcTP3cvNCwofrL4sdL9opApk-RZBlQeuTrXxJJ5J3tGM6OYUXYB3lobY",
  "Nonce": "636681539329818710.MTNhNjk5ZjYtMjNlNS00OThlLTg0MTYtODczZDJjNzlhMmQ3ZGM5ZTgxZTYtNjljNy00ODY0LThiYWItNDU3YmE4OWRjZTlk",
  "SessionId": "2c8814515914eeb347cbb16e38ae7f52",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681539329818710.MTNhNjk5ZjYtMjNlNS00OThlLTg0MTYtODczZDJjNzlhMmQ3ZGM5ZTgxZTYtNjljNy00ODY0LThiYWItNDU3YmE4OWRjZTlk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd6gMhNz6Kn9T34gwn_VKPEnqGx7T6e3C1jF1qacwj4iCK5_vWZOTR5Q0Jxdx5TIOpWnoy2K4i_Z96BzxA3DRxBqYyl69Z3Bkhl9TnVqYi5Y9Vm78X2HLozc47UOPLhokUPKAAPD37L0wCriIsNjQhsDeSdYR-Gtjem7mixgaYQp_QKg2fCLHdsqa3rGMPl2nTORu4E6cO2ILgAuOPssjQHUUq7yLXgl2EBDveD2-nSrvOrAn5lGuHHxNlqIe26osNh_rU7IZyieJy8mbqnkOls36h_H5kD9xMaVVh4Epw_kfixTiF4eD9xnsqFnIWhDmF2lQkI6HKXcTP3cvNCwofrL4sdL9opApk-RZBlQeuTrXxJJ5J3tGM6OYUXYB3lobY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 16:19:08.462 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-25 16:19:08.462 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-25 16:19:08.462 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-25 16:19:08.462 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 16:19:08.462 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-25 16:19:08.467 -06:00 [DBG] Creating Implicit Flow response.
2018-07-25 16:19:08.467 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-25 16:19:08.467 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-25 16:19:08.478 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****kevg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****3e7c"
    }
  ],
  "ActivityId": "0HLFHKJ48TIIK:00000007",
  "TimeStamp": "2018-07-25T22:19:08Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 16:19:08.479 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd6gMhNz6Kn9T34gwn_VKPEnqGx7T6e3C1jF1qacwj4iCK5_vWZOTR5Q0Jxdx5TIOpWnoy2K4i_Z96BzxA3DRxBqYyl69Z3Bkhl9TnVqYi5Y9Vm78X2HLozc47UOPLhokUPKAAPD37L0wCriIsNjQhsDeSdYR-Gtjem7mixgaYQp_QKg2fCLHdsqa3rGMPl2nTORu4E6cO2ILgAuOPssjQHUUq7yLXgl2EBDveD2-nSrvOrAn5lGuHHxNlqIe26osNh_rU7IZyieJy8mbqnkOls36h_H5kD9xMaVVh4Epw_kfixTiF4eD9xnsqFnIWhDmF2lQkI6HKXcTP3cvNCwofrL4sdL9opApk-RZBlQeuTrXxJJ5J3tGM6OYUXYB3lobY",
  "Scope": "openid profile business email"
}
2018-07-25 16:19:08.479 -06:00 [DBG] Augmenting SignInContext
2018-07-25 16:19:08.479 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-25 16:19:08.602 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-25 16:19:08.602 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-25 16:19:08.602 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-25 16:19:08.603 -06:00 [DBG] Start token request.
2018-07-25 16:19:08.603 -06:00 [DBG] Start client validation
2018-07-25 16:19:08.603 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-25 16:19:08.603 -06:00 [DBG] Start parsing for secret in post body
2018-07-25 16:19:08.603 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-25 16:19:08.603 -06:00 [DBG] Secret id found: ideaBox
2018-07-25 16:19:08.603 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:19:08.603 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-25 16:19:08.603 -06:00 [DBG] Client validation success
2018-07-25 16:19:08.603 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFHKJ48TIIJ:00000003",
  "TimeStamp": "2018-07-25T22:19:08Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 16:19:08.603 -06:00 [DBG] Start token request validation
2018-07-25 16:19:08.603 -06:00 [DBG] Start validation of authorization code token request
2018-07-25 16:19:08.610 -06:00 [DBG] Validation of authorization code token request success
2018-07-25 16:19:08.611 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "bed809f519be19b91dfa62ef4cdb8be82f47ded21cd5e5b480e104dcd7733e7c",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "bed809f519be19b91dfa62ef4cdb8be82f47ded21cd5e5b480e104dcd7733e7c",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-25 16:19:08.611 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:19:08.611 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-25 16:19:08.611 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 16:19:08.624 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:19:08.624 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-25 16:19:08.624 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-25 16:19:08.635 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****MpLA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****NNrg"
    }
  ],
  "ActivityId": "0HLFHKJ48TIIJ:00000003",
  "TimeStamp": "2018-07-25T22:19:08Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 16:19:08.635 -06:00 [DBG] Token request success.
2018-07-25 16:19:08.643 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-25 16:19:08.643 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-25 16:19:08.643 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-25 16:19:08.643 -06:00 [DBG] Start userinfo request
2018-07-25 16:19:08.643 -06:00 [DBG] Bearer token found in header
2018-07-25 16:19:08.645 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:19:08.645 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:19:08.646 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-25 16:19:08.646 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532557148,
    "exp": 1532560748,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532557143,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-25 16:19:08.646 -06:00 [DBG] Creating userinfo response
2018-07-25 16:19:08.646 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 16:19:08.646 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 16:19:08.646 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-25 16:19:08.646 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 16:19:08.648 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-25 16:19:08.648 -06:00 [DBG] End userinfo request
2018-07-25 16:20:16.939 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-25 16:20:16.939 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-25 16:20:16.939 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-25 16:20:16.939 -06:00 [DBG] Start discovery request
2018-07-25 16:20:17.056 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-25 16:20:17.056 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-25 16:20:17.056 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-25 16:20:17.056 -06:00 [DBG] Start key discovery request
2018-07-25 16:20:17.134 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-25 16:20:17.134 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-25 16:20:17.134 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-25 16:20:17.134 -06:00 [DBG] Start authorize request
2018-07-25 16:20:17.134 -06:00 [DBG] No user present in authorize request
2018-07-25 16:20:17.134 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 16:20:17.134 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:20:17.134 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 16:20:17.134 -06:00 [DBG] No PKCE used.
2018-07-25 16:20:17.135 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 16:20:17.135 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeTVlVz7wkCHyK8hNYctsLZtOAz5VV_Qw7JrSbUtZAHnz9dCurksLws8bIMRdYnWJgRISTQuPsjuagP65gFe19fN2nsloGxe0kObWvIrakm2veWvt8UkPsrA9fqs4_3eqPmwXDObwdJ1FYNjMf5MM2mX5EdHz0A-yCCLfIlpmgYbMkFdC6M00gFwbLpULhsFrHnaKEc-IXMmGL9HWYv12_u5lOe1Lzjh4NiKC7iAvHVcHOzKSmhIToI8tUsZlkBQmXEbQ2z3lwqXGd_WaTMmhX_tHapyn5Ujc-l9PqVwTMq5fkKeDFR0N8VCxGv8VNf7lPtXvNdpmj3PhmcxN28-HenFH0esPekpD8FcuwkVx6CIKXSSyfoQtNLKOe_Tc3Gpe4",
  "Nonce": "636681540171147870.NzZhNTc0MzAtNTA2NC00ZTc1LWJlMTYtZjJiYzgxYjZkM2YyODY0MWVhMTQtNmY4Yi00YTdiLWE0MjYtYzYxNjMyZjFmNTY1",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681540171147870.NzZhNTc0MzAtNTA2NC00ZTc1LWJlMTYtZjJiYzgxYjZkM2YyODY0MWVhMTQtNmY4Yi00YTdiLWE0MjYtYzYxNjMyZjFmNTY1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeTVlVz7wkCHyK8hNYctsLZtOAz5VV_Qw7JrSbUtZAHnz9dCurksLws8bIMRdYnWJgRISTQuPsjuagP65gFe19fN2nsloGxe0kObWvIrakm2veWvt8UkPsrA9fqs4_3eqPmwXDObwdJ1FYNjMf5MM2mX5EdHz0A-yCCLfIlpmgYbMkFdC6M00gFwbLpULhsFrHnaKEc-IXMmGL9HWYv12_u5lOe1Lzjh4NiKC7iAvHVcHOzKSmhIToI8tUsZlkBQmXEbQ2z3lwqXGd_WaTMmhX_tHapyn5Ujc-l9PqVwTMq5fkKeDFR0N8VCxGv8VNf7lPtXvNdpmj3PhmcxN28-HenFH0esPekpD8FcuwkVx6CIKXSSyfoQtNLKOe_Tc3Gpe4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 16:20:17.135 -06:00 [INF] Showing login: User is not authenticated
2018-07-25 16:20:17.137 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 16:20:17.137 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:20:17.137 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 16:20:17.137 -06:00 [DBG] No PKCE used.
2018-07-25 16:20:17.137 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 16:20:17.137 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:20:26.330 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-25 16:20:26.345 -06:00 [DBG] Augmenting SignInContext
2018-07-25 16:20:26.345 -06:00 [DBG] Adding idp claim with value: local
2018-07-25 16:20:26.345 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-25 16:20:26.345 -06:00 [DBG] Adding auth_time claim with value: 1532557226
2018-07-25 16:20:26.345 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-25 16:20:26.346 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFHKJ48TIIK:0000000A",
  "TimeStamp": "2018-07-25T22:20:26Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 16:20:26.348 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:20:26.348 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:20:26.348 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-25 16:20:26.348 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-25 16:20:26.348 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-25 16:20:26.348 -06:00 [DBG] Start authorize callback request
2018-07-25 16:20:26.348 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 16:20:26.348 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 16:20:26.349 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:20:26.349 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 16:20:26.349 -06:00 [DBG] No PKCE used.
2018-07-25 16:20:26.349 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 16:20:26.349 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeTVlVz7wkCHyK8hNYctsLZtOAz5VV_Qw7JrSbUtZAHnz9dCurksLws8bIMRdYnWJgRISTQuPsjuagP65gFe19fN2nsloGxe0kObWvIrakm2veWvt8UkPsrA9fqs4_3eqPmwXDObwdJ1FYNjMf5MM2mX5EdHz0A-yCCLfIlpmgYbMkFdC6M00gFwbLpULhsFrHnaKEc-IXMmGL9HWYv12_u5lOe1Lzjh4NiKC7iAvHVcHOzKSmhIToI8tUsZlkBQmXEbQ2z3lwqXGd_WaTMmhX_tHapyn5Ujc-l9PqVwTMq5fkKeDFR0N8VCxGv8VNf7lPtXvNdpmj3PhmcxN28-HenFH0esPekpD8FcuwkVx6CIKXSSyfoQtNLKOe_Tc3Gpe4",
  "Nonce": "636681540171147870.NzZhNTc0MzAtNTA2NC00ZTc1LWJlMTYtZjJiYzgxYjZkM2YyODY0MWVhMTQtNmY4Yi00YTdiLWE0MjYtYzYxNjMyZjFmNTY1",
  "SessionId": "75e1e23b03d8eeccf1ff3b56ca661f25",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681540171147870.NzZhNTc0MzAtNTA2NC00ZTc1LWJlMTYtZjJiYzgxYjZkM2YyODY0MWVhMTQtNmY4Yi00YTdiLWE0MjYtYzYxNjMyZjFmNTY1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeTVlVz7wkCHyK8hNYctsLZtOAz5VV_Qw7JrSbUtZAHnz9dCurksLws8bIMRdYnWJgRISTQuPsjuagP65gFe19fN2nsloGxe0kObWvIrakm2veWvt8UkPsrA9fqs4_3eqPmwXDObwdJ1FYNjMf5MM2mX5EdHz0A-yCCLfIlpmgYbMkFdC6M00gFwbLpULhsFrHnaKEc-IXMmGL9HWYv12_u5lOe1Lzjh4NiKC7iAvHVcHOzKSmhIToI8tUsZlkBQmXEbQ2z3lwqXGd_WaTMmhX_tHapyn5Ujc-l9PqVwTMq5fkKeDFR0N8VCxGv8VNf7lPtXvNdpmj3PhmcxN28-HenFH0esPekpD8FcuwkVx6CIKXSSyfoQtNLKOe_Tc3Gpe4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 16:20:26.350 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-25 16:20:26.350 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-25 16:20:26.350 -06:00 [INF] Showing consent: User has not yet consented
2018-07-25 16:20:26.352 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:20:26.352 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:20:26.352 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 16:20:26.352 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:20:26.353 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 16:20:26.353 -06:00 [DBG] No PKCE used.
2018-07-25 16:20:26.353 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 16:20:26.353 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:20:29.175 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-25 16:20:29.175 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:20:29.176 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:20:29.176 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 16:20:29.176 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:20:29.176 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 16:20:29.176 -06:00 [DBG] No PKCE used.
2018-07-25 16:20:29.176 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 16:20:29.180 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:20:29.180 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:20:29.180 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-25 16:20:29.180 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-25 16:20:29.180 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-25 16:20:29.180 -06:00 [DBG] Start authorize callback request
2018-07-25 16:20:29.180 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 16:20:29.180 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 16:20:29.180 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:20:29.180 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 16:20:29.180 -06:00 [DBG] No PKCE used.
2018-07-25 16:20:29.180 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 16:20:29.180 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeTVlVz7wkCHyK8hNYctsLZtOAz5VV_Qw7JrSbUtZAHnz9dCurksLws8bIMRdYnWJgRISTQuPsjuagP65gFe19fN2nsloGxe0kObWvIrakm2veWvt8UkPsrA9fqs4_3eqPmwXDObwdJ1FYNjMf5MM2mX5EdHz0A-yCCLfIlpmgYbMkFdC6M00gFwbLpULhsFrHnaKEc-IXMmGL9HWYv12_u5lOe1Lzjh4NiKC7iAvHVcHOzKSmhIToI8tUsZlkBQmXEbQ2z3lwqXGd_WaTMmhX_tHapyn5Ujc-l9PqVwTMq5fkKeDFR0N8VCxGv8VNf7lPtXvNdpmj3PhmcxN28-HenFH0esPekpD8FcuwkVx6CIKXSSyfoQtNLKOe_Tc3Gpe4",
  "Nonce": "636681540171147870.NzZhNTc0MzAtNTA2NC00ZTc1LWJlMTYtZjJiYzgxYjZkM2YyODY0MWVhMTQtNmY4Yi00YTdiLWE0MjYtYzYxNjMyZjFmNTY1",
  "SessionId": "75e1e23b03d8eeccf1ff3b56ca661f25",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681540171147870.NzZhNTc0MzAtNTA2NC00ZTc1LWJlMTYtZjJiYzgxYjZkM2YyODY0MWVhMTQtNmY4Yi00YTdiLWE0MjYtYzYxNjMyZjFmNTY1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeTVlVz7wkCHyK8hNYctsLZtOAz5VV_Qw7JrSbUtZAHnz9dCurksLws8bIMRdYnWJgRISTQuPsjuagP65gFe19fN2nsloGxe0kObWvIrakm2veWvt8UkPsrA9fqs4_3eqPmwXDObwdJ1FYNjMf5MM2mX5EdHz0A-yCCLfIlpmgYbMkFdC6M00gFwbLpULhsFrHnaKEc-IXMmGL9HWYv12_u5lOe1Lzjh4NiKC7iAvHVcHOzKSmhIToI8tUsZlkBQmXEbQ2z3lwqXGd_WaTMmhX_tHapyn5Ujc-l9PqVwTMq5fkKeDFR0N8VCxGv8VNf7lPtXvNdpmj3PhmcxN28-HenFH0esPekpD8FcuwkVx6CIKXSSyfoQtNLKOe_Tc3Gpe4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 16:20:29.182 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-25 16:20:29.182 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-25 16:20:29.182 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-25 16:20:29.182 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 16:20:29.182 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-25 16:20:29.186 -06:00 [DBG] Creating Implicit Flow response.
2018-07-25 16:20:29.186 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-25 16:20:29.186 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-25 16:20:29.198 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****VhZw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****2bc7"
    }
  ],
  "ActivityId": "0HLFHKJ48TIIK:0000000E",
  "TimeStamp": "2018-07-25T22:20:29Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 16:20:29.198 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeTVlVz7wkCHyK8hNYctsLZtOAz5VV_Qw7JrSbUtZAHnz9dCurksLws8bIMRdYnWJgRISTQuPsjuagP65gFe19fN2nsloGxe0kObWvIrakm2veWvt8UkPsrA9fqs4_3eqPmwXDObwdJ1FYNjMf5MM2mX5EdHz0A-yCCLfIlpmgYbMkFdC6M00gFwbLpULhsFrHnaKEc-IXMmGL9HWYv12_u5lOe1Lzjh4NiKC7iAvHVcHOzKSmhIToI8tUsZlkBQmXEbQ2z3lwqXGd_WaTMmhX_tHapyn5Ujc-l9PqVwTMq5fkKeDFR0N8VCxGv8VNf7lPtXvNdpmj3PhmcxN28-HenFH0esPekpD8FcuwkVx6CIKXSSyfoQtNLKOe_Tc3Gpe4",
  "Scope": "openid profile business email"
}
2018-07-25 16:20:29.198 -06:00 [DBG] Augmenting SignInContext
2018-07-25 16:20:29.198 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-25 16:20:29.312 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-25 16:20:29.312 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-25 16:20:29.313 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-25 16:20:29.313 -06:00 [DBG] Start token request.
2018-07-25 16:20:29.313 -06:00 [DBG] Start client validation
2018-07-25 16:20:29.313 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-25 16:20:29.313 -06:00 [DBG] Start parsing for secret in post body
2018-07-25 16:20:29.313 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-25 16:20:29.313 -06:00 [DBG] Secret id found: ideaBox
2018-07-25 16:20:29.313 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:20:29.313 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-25 16:20:29.313 -06:00 [DBG] Client validation success
2018-07-25 16:20:29.313 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFHKJ48TIIL:00000003",
  "TimeStamp": "2018-07-25T22:20:29Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 16:20:29.313 -06:00 [DBG] Start token request validation
2018-07-25 16:20:29.313 -06:00 [DBG] Start validation of authorization code token request
2018-07-25 16:20:29.321 -06:00 [DBG] Validation of authorization code token request success
2018-07-25 16:20:29.321 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "ccbff5264d4e1efcf1d19e232f6df1f6b303d5afa7ccfd49b412b0b7e3272bc7",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "ccbff5264d4e1efcf1d19e232f6df1f6b303d5afa7ccfd49b412b0b7e3272bc7",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-25 16:20:29.321 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:20:29.321 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-25 16:20:29.321 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 16:20:29.333 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:20:29.334 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-25 16:20:29.334 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-25 16:20:29.345 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****YJNg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****oW-w"
    }
  ],
  "ActivityId": "0HLFHKJ48TIIL:00000003",
  "TimeStamp": "2018-07-25T22:20:29Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 16:20:29.345 -06:00 [DBG] Token request success.
2018-07-25 16:20:29.352 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-25 16:20:29.353 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-25 16:20:29.353 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-25 16:20:29.353 -06:00 [DBG] Start userinfo request
2018-07-25 16:20:29.353 -06:00 [DBG] Bearer token found in header
2018-07-25 16:20:29.355 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:20:29.355 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:20:29.356 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-25 16:20:29.356 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532557229,
    "exp": 1532560829,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532557226,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-25 16:20:29.356 -06:00 [DBG] Creating userinfo response
2018-07-25 16:20:29.356 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 16:20:29.356 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 16:20:29.356 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-25 16:20:29.356 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 16:20:29.358 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-25 16:20:29.358 -06:00 [DBG] End userinfo request
2018-07-25 16:32:38.974 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-25 16:32:38.975 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-25 16:32:38.975 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-25 16:32:38.975 -06:00 [DBG] Start discovery request
2018-07-25 16:32:39.112 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-25 16:32:39.112 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-25 16:32:39.112 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-25 16:32:39.112 -06:00 [DBG] Start key discovery request
2018-07-25 16:32:39.190 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-25 16:32:39.190 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-25 16:32:39.190 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-25 16:32:39.190 -06:00 [DBG] Start authorize request
2018-07-25 16:32:39.190 -06:00 [DBG] No user present in authorize request
2018-07-25 16:32:39.190 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 16:32:39.190 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:32:39.190 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 16:32:39.190 -06:00 [DBG] No PKCE used.
2018-07-25 16:32:39.190 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 16:32:39.190 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd8h55MHkN16HHLaJJ3VBSp_bEtoRoEWfi6U6SpEbxkfLuc0Pozt5nNqQkegY_0fDDVFh7OTukBC7At2nEyiU8mKG7rPyv31rX7s1b2A3r8vC5dFwMB5AkXYCht0n2iseS_XhQGexOzFTXE4BJz5X2cJr4KAo7ebyIhCz1PtQDVocBc-yDlepq_BgSyULFYiZUhBxgsyFYtn5Xzm4A5dg4H5w0-AjpwH5Q1HW6bAR1phRd4MDRC5xY5C4DgDO3xjf4MmCZ4JLAI81b1iLFbZEaH8Nf3aEW1KJgHDmDmNK61xjjeOuC0iqb0_QsAogzjMudmFGbe0uX3nS1bGUnfOliqnxLiJyoTFbuC37cpEmNzmHFIgjQUHYtr4hXsG9gwmJ4",
  "Nonce": "636681547591702290.NmJlNWUzMjUtZjBhOC00NjMzLTgzZWQtMmE1ZTI2NTk3MjQ4ODQ1ODEyOTYtYzlhNS00Yjg5LWJjMTgtNWEzMjM1ODEwZDA5",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681547591702290.NmJlNWUzMjUtZjBhOC00NjMzLTgzZWQtMmE1ZTI2NTk3MjQ4ODQ1ODEyOTYtYzlhNS00Yjg5LWJjMTgtNWEzMjM1ODEwZDA5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd8h55MHkN16HHLaJJ3VBSp_bEtoRoEWfi6U6SpEbxkfLuc0Pozt5nNqQkegY_0fDDVFh7OTukBC7At2nEyiU8mKG7rPyv31rX7s1b2A3r8vC5dFwMB5AkXYCht0n2iseS_XhQGexOzFTXE4BJz5X2cJr4KAo7ebyIhCz1PtQDVocBc-yDlepq_BgSyULFYiZUhBxgsyFYtn5Xzm4A5dg4H5w0-AjpwH5Q1HW6bAR1phRd4MDRC5xY5C4DgDO3xjf4MmCZ4JLAI81b1iLFbZEaH8Nf3aEW1KJgHDmDmNK61xjjeOuC0iqb0_QsAogzjMudmFGbe0uX3nS1bGUnfOliqnxLiJyoTFbuC37cpEmNzmHFIgjQUHYtr4hXsG9gwmJ4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 16:32:39.190 -06:00 [INF] Showing login: User is not authenticated
2018-07-25 16:32:39.193 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 16:32:39.193 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:32:39.193 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 16:32:39.193 -06:00 [DBG] No PKCE used.
2018-07-25 16:32:39.193 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 16:32:39.193 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:32:46.436 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-25 16:32:46.451 -06:00 [DBG] Augmenting SignInContext
2018-07-25 16:32:46.451 -06:00 [DBG] Adding idp claim with value: local
2018-07-25 16:32:46.451 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-25 16:32:46.451 -06:00 [DBG] Adding auth_time claim with value: 1532557966
2018-07-25 16:32:46.451 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-25 16:32:46.452 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFHKJ48TIIN:00000003",
  "TimeStamp": "2018-07-25T22:32:46Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 16:32:46.454 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:32:46.455 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:32:46.455 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-25 16:32:46.455 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-25 16:32:46.455 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-25 16:32:46.455 -06:00 [DBG] Start authorize callback request
2018-07-25 16:32:46.455 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 16:32:46.455 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 16:32:46.455 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:32:46.455 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 16:32:46.455 -06:00 [DBG] No PKCE used.
2018-07-25 16:32:46.455 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 16:32:46.455 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd8h55MHkN16HHLaJJ3VBSp_bEtoRoEWfi6U6SpEbxkfLuc0Pozt5nNqQkegY_0fDDVFh7OTukBC7At2nEyiU8mKG7rPyv31rX7s1b2A3r8vC5dFwMB5AkXYCht0n2iseS_XhQGexOzFTXE4BJz5X2cJr4KAo7ebyIhCz1PtQDVocBc-yDlepq_BgSyULFYiZUhBxgsyFYtn5Xzm4A5dg4H5w0-AjpwH5Q1HW6bAR1phRd4MDRC5xY5C4DgDO3xjf4MmCZ4JLAI81b1iLFbZEaH8Nf3aEW1KJgHDmDmNK61xjjeOuC0iqb0_QsAogzjMudmFGbe0uX3nS1bGUnfOliqnxLiJyoTFbuC37cpEmNzmHFIgjQUHYtr4hXsG9gwmJ4",
  "Nonce": "636681547591702290.NmJlNWUzMjUtZjBhOC00NjMzLTgzZWQtMmE1ZTI2NTk3MjQ4ODQ1ODEyOTYtYzlhNS00Yjg5LWJjMTgtNWEzMjM1ODEwZDA5",
  "SessionId": "ebaa4112314da78aed48923dd3685754",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681547591702290.NmJlNWUzMjUtZjBhOC00NjMzLTgzZWQtMmE1ZTI2NTk3MjQ4ODQ1ODEyOTYtYzlhNS00Yjg5LWJjMTgtNWEzMjM1ODEwZDA5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd8h55MHkN16HHLaJJ3VBSp_bEtoRoEWfi6U6SpEbxkfLuc0Pozt5nNqQkegY_0fDDVFh7OTukBC7At2nEyiU8mKG7rPyv31rX7s1b2A3r8vC5dFwMB5AkXYCht0n2iseS_XhQGexOzFTXE4BJz5X2cJr4KAo7ebyIhCz1PtQDVocBc-yDlepq_BgSyULFYiZUhBxgsyFYtn5Xzm4A5dg4H5w0-AjpwH5Q1HW6bAR1phRd4MDRC5xY5C4DgDO3xjf4MmCZ4JLAI81b1iLFbZEaH8Nf3aEW1KJgHDmDmNK61xjjeOuC0iqb0_QsAogzjMudmFGbe0uX3nS1bGUnfOliqnxLiJyoTFbuC37cpEmNzmHFIgjQUHYtr4hXsG9gwmJ4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 16:32:46.457 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-25 16:32:46.457 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-25 16:32:46.457 -06:00 [INF] Showing consent: User has not yet consented
2018-07-25 16:32:46.459 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:32:46.459 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:32:46.459 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 16:32:46.459 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:32:46.459 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 16:32:46.459 -06:00 [DBG] No PKCE used.
2018-07-25 16:32:46.459 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 16:32:46.459 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:32:48.425 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-25 16:32:48.426 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:32:48.426 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:32:48.426 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 16:32:48.426 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:32:48.426 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 16:32:48.426 -06:00 [DBG] No PKCE used.
2018-07-25 16:32:48.426 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 16:32:48.430 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:32:48.430 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-25 16:32:48.430 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-25 16:32:48.430 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-25 16:32:48.430 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-25 16:32:48.430 -06:00 [DBG] Start authorize callback request
2018-07-25 16:32:48.431 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 16:32:48.431 -06:00 [DBG] Start authorize request protocol validation
2018-07-25 16:32:48.431 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:32:48.431 -06:00 [DBG] Checking for PKCE parameters
2018-07-25 16:32:48.431 -06:00 [DBG] No PKCE used.
2018-07-25 16:32:48.431 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-25 16:32:48.431 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd8h55MHkN16HHLaJJ3VBSp_bEtoRoEWfi6U6SpEbxkfLuc0Pozt5nNqQkegY_0fDDVFh7OTukBC7At2nEyiU8mKG7rPyv31rX7s1b2A3r8vC5dFwMB5AkXYCht0n2iseS_XhQGexOzFTXE4BJz5X2cJr4KAo7ebyIhCz1PtQDVocBc-yDlepq_BgSyULFYiZUhBxgsyFYtn5Xzm4A5dg4H5w0-AjpwH5Q1HW6bAR1phRd4MDRC5xY5C4DgDO3xjf4MmCZ4JLAI81b1iLFbZEaH8Nf3aEW1KJgHDmDmNK61xjjeOuC0iqb0_QsAogzjMudmFGbe0uX3nS1bGUnfOliqnxLiJyoTFbuC37cpEmNzmHFIgjQUHYtr4hXsG9gwmJ4",
  "Nonce": "636681547591702290.NmJlNWUzMjUtZjBhOC00NjMzLTgzZWQtMmE1ZTI2NTk3MjQ4ODQ1ODEyOTYtYzlhNS00Yjg5LWJjMTgtNWEzMjM1ODEwZDA5",
  "SessionId": "ebaa4112314da78aed48923dd3685754",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636681547591702290.NmJlNWUzMjUtZjBhOC00NjMzLTgzZWQtMmE1ZTI2NTk3MjQ4ODQ1ODEyOTYtYzlhNS00Yjg5LWJjMTgtNWEzMjM1ODEwZDA5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd8h55MHkN16HHLaJJ3VBSp_bEtoRoEWfi6U6SpEbxkfLuc0Pozt5nNqQkegY_0fDDVFh7OTukBC7At2nEyiU8mKG7rPyv31rX7s1b2A3r8vC5dFwMB5AkXYCht0n2iseS_XhQGexOzFTXE4BJz5X2cJr4KAo7ebyIhCz1PtQDVocBc-yDlepq_BgSyULFYiZUhBxgsyFYtn5Xzm4A5dg4H5w0-AjpwH5Q1HW6bAR1phRd4MDRC5xY5C4DgDO3xjf4MmCZ4JLAI81b1iLFbZEaH8Nf3aEW1KJgHDmDmNK61xjjeOuC0iqb0_QsAogzjMudmFGbe0uX3nS1bGUnfOliqnxLiJyoTFbuC37cpEmNzmHFIgjQUHYtr4hXsG9gwmJ4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-25 16:32:48.432 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-25 16:32:48.432 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-25 16:32:48.432 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-25 16:32:48.432 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 16:32:48.432 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-25 16:32:48.437 -06:00 [DBG] Creating Implicit Flow response.
2018-07-25 16:32:48.437 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-25 16:32:48.437 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-25 16:32:48.448 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ZC2A"
    },
    {
      "TokenType": "code",
      "TokenValue": "****67d9"
    }
  ],
  "ActivityId": "0HLFHKJ48TIIN:00000007",
  "TimeStamp": "2018-07-25T22:32:48Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 16:32:48.448 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd8h55MHkN16HHLaJJ3VBSp_bEtoRoEWfi6U6SpEbxkfLuc0Pozt5nNqQkegY_0fDDVFh7OTukBC7At2nEyiU8mKG7rPyv31rX7s1b2A3r8vC5dFwMB5AkXYCht0n2iseS_XhQGexOzFTXE4BJz5X2cJr4KAo7ebyIhCz1PtQDVocBc-yDlepq_BgSyULFYiZUhBxgsyFYtn5Xzm4A5dg4H5w0-AjpwH5Q1HW6bAR1phRd4MDRC5xY5C4DgDO3xjf4MmCZ4JLAI81b1iLFbZEaH8Nf3aEW1KJgHDmDmNK61xjjeOuC0iqb0_QsAogzjMudmFGbe0uX3nS1bGUnfOliqnxLiJyoTFbuC37cpEmNzmHFIgjQUHYtr4hXsG9gwmJ4",
  "Scope": "openid profile business email"
}
2018-07-25 16:32:48.449 -06:00 [DBG] Augmenting SignInContext
2018-07-25 16:32:48.449 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-25 16:32:48.577 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-25 16:32:48.577 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-25 16:32:48.577 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-25 16:32:48.577 -06:00 [DBG] Start token request.
2018-07-25 16:32:48.577 -06:00 [DBG] Start client validation
2018-07-25 16:32:48.577 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-25 16:32:48.577 -06:00 [DBG] Start parsing for secret in post body
2018-07-25 16:32:48.577 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-25 16:32:48.578 -06:00 [DBG] Secret id found: ideaBox
2018-07-25 16:32:48.578 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:32:48.578 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-25 16:32:48.578 -06:00 [DBG] Client validation success
2018-07-25 16:32:48.578 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFHKJ48TIIM:00000003",
  "TimeStamp": "2018-07-25T22:32:48Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 16:32:48.578 -06:00 [DBG] Start token request validation
2018-07-25 16:32:48.578 -06:00 [DBG] Start validation of authorization code token request
2018-07-25 16:32:48.585 -06:00 [DBG] Validation of authorization code token request success
2018-07-25 16:32:48.585 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "a8fe73492dcb58d33cb41190828bb82d320d445b666626646b0f62ad210e67d9",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "a8fe73492dcb58d33cb41190828bb82d320d445b666626646b0f62ad210e67d9",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-25 16:32:48.585 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:32:48.585 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-25 16:32:48.585 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-25 16:32:48.598 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:32:48.598 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-25 16:32:48.598 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-25 16:32:48.610 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****8IrA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****zy5Q"
    }
  ],
  "ActivityId": "0HLFHKJ48TIIM:00000003",
  "TimeStamp": "2018-07-25T22:32:48Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-25 16:32:48.610 -06:00 [DBG] Token request success.
2018-07-25 16:32:48.617 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-25 16:32:48.617 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-25 16:32:48.618 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-25 16:32:48.618 -06:00 [DBG] Start userinfo request
2018-07-25 16:32:48.618 -06:00 [DBG] Bearer token found in header
2018-07-25 16:32:48.620 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:32:48.620 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-25 16:32:48.621 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-25 16:32:48.621 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532557968,
    "exp": 1532561568,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532557966,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-25 16:32:48.621 -06:00 [DBG] Creating userinfo response
2018-07-25 16:32:48.621 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 16:32:48.621 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 16:32:48.621 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-25 16:32:48.621 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-25 16:32:48.623 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-25 16:32:48.623 -06:00 [DBG] End userinfo request
2018-07-27 08:39:38.316 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-27 08:39:38.317 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-27 08:39:38.317 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-27 08:39:38.317 -06:00 [DBG] Start discovery request
2018-07-27 08:39:38.436 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-27 08:39:38.436 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-27 08:39:38.436 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-27 08:39:38.436 -06:00 [DBG] Start key discovery request
2018-07-27 08:39:55.560 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 08:39:55.560 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 08:39:55.560 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 08:39:55.560 -06:00 [DBG] Start authorize request
2018-07-27 08:39:55.560 -06:00 [DBG] No user present in authorize request
2018-07-27 08:39:55.560 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:39:55.560 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:39:55.560 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:39:55.560 -06:00 [DBG] No PKCE used.
2018-07-27 08:39:55.560 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:39:55.560 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfU8xXvckE8WWisMEPhJS5dephZRUCh8yCVKoQr4r1-Yi_Jn4AMlgNsi_uuXrwiUaf8-rEhmIyym2YpaT4GoJSPWbqM_-buv4Qbjztozubxg2-4ovO6lSulLrLGMhSz_mO0s2kok4lYPfFKwXFfSu04f-CdXcwv6i3ItDV9RBaFcDpxTTUV3uX_aQC8EUETTp1_UScTzfGhphbL_mxL4zInpkHuaSlFD3UplncMti7dBeU57uFg3iWjh_NtMGt4Vx_I3iy3cnpfxZiNFO4ET84Pxte7kaBUIrCVuJnHdcz1TgLCMZJpvksB20p8VQXZ_Gx7HxWHtlBVTnSrrbAuehn0sHMvCqcu9Dn7AeKfAOZckpaXs6ihTX_bgBBRaRtsU8I",
  "Nonce": "636682991784935190.NjZjMTlkMTAtYWViMi00ZTQzLWI4MDItYzYxNGZhOGY1OTNmYjcwZGRlMTQtMGI3Zi00ZjEwLTgwOWMtM2MzNWY3YjM3N2Rh",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636682991784935190.NjZjMTlkMTAtYWViMi00ZTQzLWI4MDItYzYxNGZhOGY1OTNmYjcwZGRlMTQtMGI3Zi00ZjEwLTgwOWMtM2MzNWY3YjM3N2Rh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfU8xXvckE8WWisMEPhJS5dephZRUCh8yCVKoQr4r1-Yi_Jn4AMlgNsi_uuXrwiUaf8-rEhmIyym2YpaT4GoJSPWbqM_-buv4Qbjztozubxg2-4ovO6lSulLrLGMhSz_mO0s2kok4lYPfFKwXFfSu04f-CdXcwv6i3ItDV9RBaFcDpxTTUV3uX_aQC8EUETTp1_UScTzfGhphbL_mxL4zInpkHuaSlFD3UplncMti7dBeU57uFg3iWjh_NtMGt4Vx_I3iy3cnpfxZiNFO4ET84Pxte7kaBUIrCVuJnHdcz1TgLCMZJpvksB20p8VQXZ_Gx7HxWHtlBVTnSrrbAuehn0sHMvCqcu9Dn7AeKfAOZckpaXs6ihTX_bgBBRaRtsU8I",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 08:39:55.560 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 08:39:55.562 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:39:55.562 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:39:55.563 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:39:55.563 -06:00 [DBG] No PKCE used.
2018-07-27 08:39:55.563 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:39:55.563 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:40:27.977 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 08:40:27.992 -06:00 [DBG] Augmenting SignInContext
2018-07-27 08:40:27.992 -06:00 [DBG] Adding idp claim with value: local
2018-07-27 08:40:27.992 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-27 08:40:27.992 -06:00 [DBG] Adding auth_time claim with value: 1532702427
2018-07-27 08:40:27.993 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 08:40:27.993 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFHKJ48TIIS:00000004",
  "TimeStamp": "2018-07-27T14:40:27Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:40:27.996 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:40:27.996 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:40:27.996 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 08:40:27.996 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 08:40:27.996 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 08:40:27.996 -06:00 [DBG] Start authorize callback request
2018-07-27 08:40:27.996 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:40:27.996 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:40:27.996 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:40:27.996 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:40:27.997 -06:00 [DBG] No PKCE used.
2018-07-27 08:40:27.997 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:40:27.997 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfU8xXvckE8WWisMEPhJS5dephZRUCh8yCVKoQr4r1-Yi_Jn4AMlgNsi_uuXrwiUaf8-rEhmIyym2YpaT4GoJSPWbqM_-buv4Qbjztozubxg2-4ovO6lSulLrLGMhSz_mO0s2kok4lYPfFKwXFfSu04f-CdXcwv6i3ItDV9RBaFcDpxTTUV3uX_aQC8EUETTp1_UScTzfGhphbL_mxL4zInpkHuaSlFD3UplncMti7dBeU57uFg3iWjh_NtMGt4Vx_I3iy3cnpfxZiNFO4ET84Pxte7kaBUIrCVuJnHdcz1TgLCMZJpvksB20p8VQXZ_Gx7HxWHtlBVTnSrrbAuehn0sHMvCqcu9Dn7AeKfAOZckpaXs6ihTX_bgBBRaRtsU8I",
  "Nonce": "636682991784935190.NjZjMTlkMTAtYWViMi00ZTQzLWI4MDItYzYxNGZhOGY1OTNmYjcwZGRlMTQtMGI3Zi00ZjEwLTgwOWMtM2MzNWY3YjM3N2Rh",
  "SessionId": "facc47b1234cad9251fcb361fe7db487",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636682991784935190.NjZjMTlkMTAtYWViMi00ZTQzLWI4MDItYzYxNGZhOGY1OTNmYjcwZGRlMTQtMGI3Zi00ZjEwLTgwOWMtM2MzNWY3YjM3N2Rh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfU8xXvckE8WWisMEPhJS5dephZRUCh8yCVKoQr4r1-Yi_Jn4AMlgNsi_uuXrwiUaf8-rEhmIyym2YpaT4GoJSPWbqM_-buv4Qbjztozubxg2-4ovO6lSulLrLGMhSz_mO0s2kok4lYPfFKwXFfSu04f-CdXcwv6i3ItDV9RBaFcDpxTTUV3uX_aQC8EUETTp1_UScTzfGhphbL_mxL4zInpkHuaSlFD3UplncMti7dBeU57uFg3iWjh_NtMGt4Vx_I3iy3cnpfxZiNFO4ET84Pxte7kaBUIrCVuJnHdcz1TgLCMZJpvksB20p8VQXZ_Gx7HxWHtlBVTnSrrbAuehn0sHMvCqcu9Dn7AeKfAOZckpaXs6ihTX_bgBBRaRtsU8I",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 08:40:27.998 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 08:40:27.998 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 08:40:27.998 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 08:40:28.001 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:40:28.001 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:40:28.001 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:40:28.001 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:40:28.001 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:40:28.001 -06:00 [DBG] No PKCE used.
2018-07-27 08:40:28.001 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:40:28.001 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:40:33.409 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 08:40:33.409 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:40:33.409 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:40:33.409 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:40:33.409 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:40:33.410 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:40:33.410 -06:00 [DBG] No PKCE used.
2018-07-27 08:40:33.410 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:40:33.414 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:40:33.414 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:40:33.414 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 08:40:33.414 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 08:40:33.414 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 08:40:33.414 -06:00 [DBG] Start authorize callback request
2018-07-27 08:40:33.414 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:40:33.414 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:40:33.414 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:40:33.414 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:40:33.414 -06:00 [DBG] No PKCE used.
2018-07-27 08:40:33.414 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:40:33.414 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfU8xXvckE8WWisMEPhJS5dephZRUCh8yCVKoQr4r1-Yi_Jn4AMlgNsi_uuXrwiUaf8-rEhmIyym2YpaT4GoJSPWbqM_-buv4Qbjztozubxg2-4ovO6lSulLrLGMhSz_mO0s2kok4lYPfFKwXFfSu04f-CdXcwv6i3ItDV9RBaFcDpxTTUV3uX_aQC8EUETTp1_UScTzfGhphbL_mxL4zInpkHuaSlFD3UplncMti7dBeU57uFg3iWjh_NtMGt4Vx_I3iy3cnpfxZiNFO4ET84Pxte7kaBUIrCVuJnHdcz1TgLCMZJpvksB20p8VQXZ_Gx7HxWHtlBVTnSrrbAuehn0sHMvCqcu9Dn7AeKfAOZckpaXs6ihTX_bgBBRaRtsU8I",
  "Nonce": "636682991784935190.NjZjMTlkMTAtYWViMi00ZTQzLWI4MDItYzYxNGZhOGY1OTNmYjcwZGRlMTQtMGI3Zi00ZjEwLTgwOWMtM2MzNWY3YjM3N2Rh",
  "SessionId": "facc47b1234cad9251fcb361fe7db487",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636682991784935190.NjZjMTlkMTAtYWViMi00ZTQzLWI4MDItYzYxNGZhOGY1OTNmYjcwZGRlMTQtMGI3Zi00ZjEwLTgwOWMtM2MzNWY3YjM3N2Rh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfU8xXvckE8WWisMEPhJS5dephZRUCh8yCVKoQr4r1-Yi_Jn4AMlgNsi_uuXrwiUaf8-rEhmIyym2YpaT4GoJSPWbqM_-buv4Qbjztozubxg2-4ovO6lSulLrLGMhSz_mO0s2kok4lYPfFKwXFfSu04f-CdXcwv6i3ItDV9RBaFcDpxTTUV3uX_aQC8EUETTp1_UScTzfGhphbL_mxL4zInpkHuaSlFD3UplncMti7dBeU57uFg3iWjh_NtMGt4Vx_I3iy3cnpfxZiNFO4ET84Pxte7kaBUIrCVuJnHdcz1TgLCMZJpvksB20p8VQXZ_Gx7HxWHtlBVTnSrrbAuehn0sHMvCqcu9Dn7AeKfAOZckpaXs6ihTX_bgBBRaRtsU8I",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 08:40:33.416 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 08:40:33.416 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 08:40:33.416 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 08:40:33.416 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:40:33.416 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 08:40:33.421 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 08:40:33.421 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 08:40:33.421 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 08:40:33.432 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****U9Qw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****7d39"
    }
  ],
  "ActivityId": "0HLFHKJ48TIIS:00000009",
  "TimeStamp": "2018-07-27T14:40:33Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:40:33.432 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfU8xXvckE8WWisMEPhJS5dephZRUCh8yCVKoQr4r1-Yi_Jn4AMlgNsi_uuXrwiUaf8-rEhmIyym2YpaT4GoJSPWbqM_-buv4Qbjztozubxg2-4ovO6lSulLrLGMhSz_mO0s2kok4lYPfFKwXFfSu04f-CdXcwv6i3ItDV9RBaFcDpxTTUV3uX_aQC8EUETTp1_UScTzfGhphbL_mxL4zInpkHuaSlFD3UplncMti7dBeU57uFg3iWjh_NtMGt4Vx_I3iy3cnpfxZiNFO4ET84Pxte7kaBUIrCVuJnHdcz1TgLCMZJpvksB20p8VQXZ_Gx7HxWHtlBVTnSrrbAuehn0sHMvCqcu9Dn7AeKfAOZckpaXs6ihTX_bgBBRaRtsU8I",
  "Scope": "openid profile business email"
}
2018-07-27 08:40:33.432 -06:00 [DBG] Augmenting SignInContext
2018-07-27 08:40:33.433 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 08:40:33.682 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 08:40:33.682 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 08:40:33.682 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 08:40:33.682 -06:00 [DBG] Start token request.
2018-07-27 08:40:33.682 -06:00 [DBG] Start client validation
2018-07-27 08:40:33.682 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 08:40:33.682 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 08:40:33.682 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 08:40:33.682 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 08:40:33.682 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:40:33.682 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 08:40:33.682 -06:00 [DBG] Client validation success
2018-07-27 08:40:33.682 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFHKJ48TIIO:00000003",
  "TimeStamp": "2018-07-27T14:40:33Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:40:33.682 -06:00 [DBG] Start token request validation
2018-07-27 08:40:33.682 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 08:40:33.690 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 08:40:33.690 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "5c48e410d3f57ebe81890a776551942b2b867370cf48d2e8c90747d7b1377d39",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "5c48e410d3f57ebe81890a776551942b2b867370cf48d2e8c90747d7b1377d39",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 08:40:33.690 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:40:33.690 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 08:40:33.690 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:40:33.703 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:40:33.703 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 08:40:33.703 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 08:40:33.715 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****wfLQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****f-sg"
    }
  ],
  "ActivityId": "0HLFHKJ48TIIO:00000003",
  "TimeStamp": "2018-07-27T14:40:33Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:40:33.715 -06:00 [DBG] Token request success.
2018-07-27 08:40:33.723 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 08:40:33.723 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 08:40:33.723 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 08:40:33.723 -06:00 [DBG] Start userinfo request
2018-07-27 08:40:33.724 -06:00 [DBG] Bearer token found in header
2018-07-27 08:40:33.725 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:40:33.726 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:40:33.727 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 08:40:33.727 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532702433,
    "exp": 1532706033,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532702427,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-27 08:40:33.727 -06:00 [DBG] Creating userinfo response
2018-07-27 08:40:33.727 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 08:40:33.727 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 08:40:33.727 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-27 08:40:33.727 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 08:40:33.728 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-27 08:40:33.728 -06:00 [DBG] End userinfo request
2018-07-27 08:43:03.465 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 08:43:03.465 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 08:43:03.466 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 08:43:03.466 -06:00 [DBG] Start authorize request
2018-07-27 08:43:03.466 -06:00 [DBG] No user present in authorize request
2018-07-27 08:43:03.466 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:43:03.466 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:43:03.466 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:43:03.466 -06:00 [DBG] No PKCE used.
2018-07-27 08:43:03.466 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:43:03.466 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHehWlGanbsWjs8xevqoejRCgeaS0Kd6ZFZr67XJwubT3VeBrxTLQ9KVvrEKUgWWGhAsjD7z104w-y18nA_JUzcRE3UOLADheHAKZ8tkkIA1_ejD6EEMIFLskup69sLvqQuSpP2QvXGnfbG2dntF3Su8ok_9kXSoqwt-TpAadVE5Q-TfkCBkOfmxZr7KfJ8dh48HCbfqgr0mSBzEm6ESpVQQ4BKW6lMDTvS3m_xoqECulW-qhd7MKqO_-eYU_EF7gYnt-GK8z88CQRBfbVxqC9lYZV-gLnL9poFA-piSsFVZSS4RE0Y3KsiqxAZOobnkVuxP4HMKXkr418xaT90xrDE8c_KBDJGmcK4L8FkVJ6IU_rc4AuSp9YN20QMcK19vhug",
  "Nonce": "636682993834551800.MmMyYjIxZGEtZDgzMC00OTA0LTk5NTMtNWY5ZTRlYTI1MjFkZjljNTI2ZWMtNGRmOS00NzYxLTk4NGUtZjQxOGJkODkxMDQx",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636682993834551800.MmMyYjIxZGEtZDgzMC00OTA0LTk5NTMtNWY5ZTRlYTI1MjFkZjljNTI2ZWMtNGRmOS00NzYxLTk4NGUtZjQxOGJkODkxMDQx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHehWlGanbsWjs8xevqoejRCgeaS0Kd6ZFZr67XJwubT3VeBrxTLQ9KVvrEKUgWWGhAsjD7z104w-y18nA_JUzcRE3UOLADheHAKZ8tkkIA1_ejD6EEMIFLskup69sLvqQuSpP2QvXGnfbG2dntF3Su8ok_9kXSoqwt-TpAadVE5Q-TfkCBkOfmxZr7KfJ8dh48HCbfqgr0mSBzEm6ESpVQQ4BKW6lMDTvS3m_xoqECulW-qhd7MKqO_-eYU_EF7gYnt-GK8z88CQRBfbVxqC9lYZV-gLnL9poFA-piSsFVZSS4RE0Y3KsiqxAZOobnkVuxP4HMKXkr418xaT90xrDE8c_KBDJGmcK4L8FkVJ6IU_rc4AuSp9YN20QMcK19vhug",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 08:43:03.466 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 08:43:03.469 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:43:03.469 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:43:03.469 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:43:03.469 -06:00 [DBG] No PKCE used.
2018-07-27 08:43:03.469 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:43:03.469 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:43:12.398 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 08:43:12.413 -06:00 [DBG] Augmenting SignInContext
2018-07-27 08:43:12.413 -06:00 [DBG] Adding idp claim with value: local
2018-07-27 08:43:12.413 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-27 08:43:12.413 -06:00 [DBG] Adding auth_time claim with value: 1532702592
2018-07-27 08:43:12.413 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 08:43:12.414 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFHKJ48TIIT:00000003",
  "TimeStamp": "2018-07-27T14:43:12Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:43:12.417 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:43:12.417 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:43:12.417 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 08:43:12.417 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 08:43:12.417 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 08:43:12.417 -06:00 [DBG] Start authorize callback request
2018-07-27 08:43:12.417 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:43:12.417 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:43:12.417 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:43:12.417 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:43:12.417 -06:00 [DBG] No PKCE used.
2018-07-27 08:43:12.418 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:43:12.418 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHehWlGanbsWjs8xevqoejRCgeaS0Kd6ZFZr67XJwubT3VeBrxTLQ9KVvrEKUgWWGhAsjD7z104w-y18nA_JUzcRE3UOLADheHAKZ8tkkIA1_ejD6EEMIFLskup69sLvqQuSpP2QvXGnfbG2dntF3Su8ok_9kXSoqwt-TpAadVE5Q-TfkCBkOfmxZr7KfJ8dh48HCbfqgr0mSBzEm6ESpVQQ4BKW6lMDTvS3m_xoqECulW-qhd7MKqO_-eYU_EF7gYnt-GK8z88CQRBfbVxqC9lYZV-gLnL9poFA-piSsFVZSS4RE0Y3KsiqxAZOobnkVuxP4HMKXkr418xaT90xrDE8c_KBDJGmcK4L8FkVJ6IU_rc4AuSp9YN20QMcK19vhug",
  "Nonce": "636682993834551800.MmMyYjIxZGEtZDgzMC00OTA0LTk5NTMtNWY5ZTRlYTI1MjFkZjljNTI2ZWMtNGRmOS00NzYxLTk4NGUtZjQxOGJkODkxMDQx",
  "SessionId": "83bb2b5c1bba53dc4ec5f14ae63410b1",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636682993834551800.MmMyYjIxZGEtZDgzMC00OTA0LTk5NTMtNWY5ZTRlYTI1MjFkZjljNTI2ZWMtNGRmOS00NzYxLTk4NGUtZjQxOGJkODkxMDQx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHehWlGanbsWjs8xevqoejRCgeaS0Kd6ZFZr67XJwubT3VeBrxTLQ9KVvrEKUgWWGhAsjD7z104w-y18nA_JUzcRE3UOLADheHAKZ8tkkIA1_ejD6EEMIFLskup69sLvqQuSpP2QvXGnfbG2dntF3Su8ok_9kXSoqwt-TpAadVE5Q-TfkCBkOfmxZr7KfJ8dh48HCbfqgr0mSBzEm6ESpVQQ4BKW6lMDTvS3m_xoqECulW-qhd7MKqO_-eYU_EF7gYnt-GK8z88CQRBfbVxqC9lYZV-gLnL9poFA-piSsFVZSS4RE0Y3KsiqxAZOobnkVuxP4HMKXkr418xaT90xrDE8c_KBDJGmcK4L8FkVJ6IU_rc4AuSp9YN20QMcK19vhug",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 08:43:12.419 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 08:43:12.419 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 08:43:12.419 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 08:43:12.421 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:43:12.421 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:43:12.421 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:43:12.421 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:43:12.422 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:43:12.422 -06:00 [DBG] No PKCE used.
2018-07-27 08:43:12.422 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:43:12.422 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:43:16.649 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 08:43:16.649 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:43:16.649 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:43:16.650 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:43:16.650 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:43:16.650 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:43:16.650 -06:00 [DBG] No PKCE used.
2018-07-27 08:43:16.650 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:43:16.654 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:43:16.654 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:43:16.654 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 08:43:16.654 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 08:43:16.654 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 08:43:16.654 -06:00 [DBG] Start authorize callback request
2018-07-27 08:43:16.654 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:43:16.654 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:43:16.654 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:43:16.654 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:43:16.654 -06:00 [DBG] No PKCE used.
2018-07-27 08:43:16.654 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:43:16.655 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHehWlGanbsWjs8xevqoejRCgeaS0Kd6ZFZr67XJwubT3VeBrxTLQ9KVvrEKUgWWGhAsjD7z104w-y18nA_JUzcRE3UOLADheHAKZ8tkkIA1_ejD6EEMIFLskup69sLvqQuSpP2QvXGnfbG2dntF3Su8ok_9kXSoqwt-TpAadVE5Q-TfkCBkOfmxZr7KfJ8dh48HCbfqgr0mSBzEm6ESpVQQ4BKW6lMDTvS3m_xoqECulW-qhd7MKqO_-eYU_EF7gYnt-GK8z88CQRBfbVxqC9lYZV-gLnL9poFA-piSsFVZSS4RE0Y3KsiqxAZOobnkVuxP4HMKXkr418xaT90xrDE8c_KBDJGmcK4L8FkVJ6IU_rc4AuSp9YN20QMcK19vhug",
  "Nonce": "636682993834551800.MmMyYjIxZGEtZDgzMC00OTA0LTk5NTMtNWY5ZTRlYTI1MjFkZjljNTI2ZWMtNGRmOS00NzYxLTk4NGUtZjQxOGJkODkxMDQx",
  "SessionId": "83bb2b5c1bba53dc4ec5f14ae63410b1",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636682993834551800.MmMyYjIxZGEtZDgzMC00OTA0LTk5NTMtNWY5ZTRlYTI1MjFkZjljNTI2ZWMtNGRmOS00NzYxLTk4NGUtZjQxOGJkODkxMDQx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHehWlGanbsWjs8xevqoejRCgeaS0Kd6ZFZr67XJwubT3VeBrxTLQ9KVvrEKUgWWGhAsjD7z104w-y18nA_JUzcRE3UOLADheHAKZ8tkkIA1_ejD6EEMIFLskup69sLvqQuSpP2QvXGnfbG2dntF3Su8ok_9kXSoqwt-TpAadVE5Q-TfkCBkOfmxZr7KfJ8dh48HCbfqgr0mSBzEm6ESpVQQ4BKW6lMDTvS3m_xoqECulW-qhd7MKqO_-eYU_EF7gYnt-GK8z88CQRBfbVxqC9lYZV-gLnL9poFA-piSsFVZSS4RE0Y3KsiqxAZOobnkVuxP4HMKXkr418xaT90xrDE8c_KBDJGmcK4L8FkVJ6IU_rc4AuSp9YN20QMcK19vhug",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 08:43:16.656 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 08:43:16.656 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 08:43:16.656 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 08:43:16.656 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:43:16.656 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 08:43:16.660 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 08:43:16.660 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 08:43:16.660 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 08:43:16.672 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****nFHw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****952d"
    }
  ],
  "ActivityId": "0HLFHKJ48TIIT:00000007",
  "TimeStamp": "2018-07-27T14:43:16Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:43:16.672 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHehWlGanbsWjs8xevqoejRCgeaS0Kd6ZFZr67XJwubT3VeBrxTLQ9KVvrEKUgWWGhAsjD7z104w-y18nA_JUzcRE3UOLADheHAKZ8tkkIA1_ejD6EEMIFLskup69sLvqQuSpP2QvXGnfbG2dntF3Su8ok_9kXSoqwt-TpAadVE5Q-TfkCBkOfmxZr7KfJ8dh48HCbfqgr0mSBzEm6ESpVQQ4BKW6lMDTvS3m_xoqECulW-qhd7MKqO_-eYU_EF7gYnt-GK8z88CQRBfbVxqC9lYZV-gLnL9poFA-piSsFVZSS4RE0Y3KsiqxAZOobnkVuxP4HMKXkr418xaT90xrDE8c_KBDJGmcK4L8FkVJ6IU_rc4AuSp9YN20QMcK19vhug",
  "Scope": "openid profile business email"
}
2018-07-27 08:43:16.672 -06:00 [DBG] Augmenting SignInContext
2018-07-27 08:43:16.672 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 08:43:16.745 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 08:43:16.746 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 08:43:16.746 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 08:43:16.746 -06:00 [DBG] Start token request.
2018-07-27 08:43:16.746 -06:00 [DBG] Start client validation
2018-07-27 08:43:16.746 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 08:43:16.746 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 08:43:16.746 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 08:43:16.746 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 08:43:16.746 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:43:16.746 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 08:43:16.746 -06:00 [DBG] Client validation success
2018-07-27 08:43:16.746 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFHKJ48TIIU:00000001",
  "TimeStamp": "2018-07-27T14:43:16Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:43:16.746 -06:00 [DBG] Start token request validation
2018-07-27 08:43:16.746 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 08:43:16.754 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 08:43:16.754 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "eaee22026ed64067cac6e4754614eb2f05e5063c09f49bf942d667a86591952d",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "eaee22026ed64067cac6e4754614eb2f05e5063c09f49bf942d667a86591952d",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 08:43:16.754 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:43:16.754 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 08:43:16.754 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:43:16.767 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:43:16.767 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 08:43:16.767 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 08:43:16.778 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****H59A"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****SF0g"
    }
  ],
  "ActivityId": "0HLFHKJ48TIIU:00000001",
  "TimeStamp": "2018-07-27T14:43:16Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:43:16.779 -06:00 [DBG] Token request success.
2018-07-27 08:43:16.783 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 08:43:16.784 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 08:43:16.784 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 08:43:16.784 -06:00 [DBG] Start userinfo request
2018-07-27 08:43:16.784 -06:00 [DBG] Bearer token found in header
2018-07-27 08:43:16.786 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:43:16.786 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:43:16.788 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 08:43:16.788 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532702596,
    "exp": 1532706196,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532702592,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-27 08:43:16.788 -06:00 [DBG] Creating userinfo response
2018-07-27 08:43:16.788 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 08:43:16.788 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 08:43:16.788 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-27 08:43:16.788 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 08:43:16.789 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-27 08:43:16.789 -06:00 [DBG] End userinfo request
2018-07-27 08:44:45.919 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-27 08:44:45.919 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-27 08:44:45.919 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-27 08:44:45.919 -06:00 [DBG] Start discovery request
2018-07-27 08:44:45.980 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-27 08:44:45.981 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-27 08:44:45.981 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-27 08:44:45.981 -06:00 [DBG] Start key discovery request
2018-07-27 08:44:46.007 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 08:44:46.007 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 08:44:46.007 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 08:44:46.007 -06:00 [DBG] Start authorize request
2018-07-27 08:44:46.007 -06:00 [DBG] No user present in authorize request
2018-07-27 08:44:46.007 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:44:46.007 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:44:46.007 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:44:46.007 -06:00 [DBG] No PKCE used.
2018-07-27 08:44:46.007 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:44:46.007 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcvtl9q0PJTbcGc3ecYgHk0RMvaONwEoZortRSwHhFCiSTy8MpiiLjlk2TWyjE-DZ8mkSurhunA0Dn9GomanNoCHc2by7o6WZFa9jENO2rx-Sl8iiWdt4sSF1R380tozv6RWpRJXy5cG1XNpXek_qpYJeUUwrYGkUh8b1h0MzRNC0wlS1xmoULwos5PT2OyYuOM0hRPofm-WXbbmOSAz6GOBGsb8RxxeSTriHtFSiL08QGOzdJoGr3K3g9837P-OX95RdbVhcunxPUiF2CYMBdzEqVviT_n8UELNEaJaMQODUK1G_IAVhJYfAMSS9vPXmE",
  "Nonce": "636682994859962930.ZDU1NTBkMWQtZDY1Yi00YzA1LWIyODgtY2ZkMGRiNjY0MWJlNWQxYWQ2MTMtOWYzMC00MWIwLWFmZGYtN2U4ZTEzMDA1ZmQz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636682994859962930.ZDU1NTBkMWQtZDY1Yi00YzA1LWIyODgtY2ZkMGRiNjY0MWJlNWQxYWQ2MTMtOWYzMC00MWIwLWFmZGYtN2U4ZTEzMDA1ZmQz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcvtl9q0PJTbcGc3ecYgHk0RMvaONwEoZortRSwHhFCiSTy8MpiiLjlk2TWyjE-DZ8mkSurhunA0Dn9GomanNoCHc2by7o6WZFa9jENO2rx-Sl8iiWdt4sSF1R380tozv6RWpRJXy5cG1XNpXek_qpYJeUUwrYGkUh8b1h0MzRNC0wlS1xmoULwos5PT2OyYuOM0hRPofm-WXbbmOSAz6GOBGsb8RxxeSTriHtFSiL08QGOzdJoGr3K3g9837P-OX95RdbVhcunxPUiF2CYMBdzEqVviT_n8UELNEaJaMQODUK1G_IAVhJYfAMSS9vPXmE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 08:44:46.007 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 08:44:46.009 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:44:46.009 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:44:46.009 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:44:46.009 -06:00 [DBG] No PKCE used.
2018-07-27 08:44:46.009 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:44:46.009 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:44:54.055 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 08:44:54.070 -06:00 [DBG] Augmenting SignInContext
2018-07-27 08:44:54.070 -06:00 [DBG] Adding idp claim with value: local
2018-07-27 08:44:54.070 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-27 08:44:54.070 -06:00 [DBG] Adding auth_time claim with value: 1532702694
2018-07-27 08:44:54.070 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 08:44:54.071 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFHKJ48TIIT:0000000A",
  "TimeStamp": "2018-07-27T14:44:54Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:44:54.072 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:44:54.073 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:44:54.073 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 08:44:54.073 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 08:44:54.073 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 08:44:54.073 -06:00 [DBG] Start authorize callback request
2018-07-27 08:44:54.073 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:44:54.073 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:44:54.073 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:44:54.073 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:44:54.073 -06:00 [DBG] No PKCE used.
2018-07-27 08:44:54.073 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:44:54.073 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcvtl9q0PJTbcGc3ecYgHk0RMvaONwEoZortRSwHhFCiSTy8MpiiLjlk2TWyjE-DZ8mkSurhunA0Dn9GomanNoCHc2by7o6WZFa9jENO2rx-Sl8iiWdt4sSF1R380tozv6RWpRJXy5cG1XNpXek_qpYJeUUwrYGkUh8b1h0MzRNC0wlS1xmoULwos5PT2OyYuOM0hRPofm-WXbbmOSAz6GOBGsb8RxxeSTriHtFSiL08QGOzdJoGr3K3g9837P-OX95RdbVhcunxPUiF2CYMBdzEqVviT_n8UELNEaJaMQODUK1G_IAVhJYfAMSS9vPXmE",
  "Nonce": "636682994859962930.ZDU1NTBkMWQtZDY1Yi00YzA1LWIyODgtY2ZkMGRiNjY0MWJlNWQxYWQ2MTMtOWYzMC00MWIwLWFmZGYtN2U4ZTEzMDA1ZmQz",
  "SessionId": "23dcf57f58b45cc5036f920e11e77606",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636682994859962930.ZDU1NTBkMWQtZDY1Yi00YzA1LWIyODgtY2ZkMGRiNjY0MWJlNWQxYWQ2MTMtOWYzMC00MWIwLWFmZGYtN2U4ZTEzMDA1ZmQz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcvtl9q0PJTbcGc3ecYgHk0RMvaONwEoZortRSwHhFCiSTy8MpiiLjlk2TWyjE-DZ8mkSurhunA0Dn9GomanNoCHc2by7o6WZFa9jENO2rx-Sl8iiWdt4sSF1R380tozv6RWpRJXy5cG1XNpXek_qpYJeUUwrYGkUh8b1h0MzRNC0wlS1xmoULwos5PT2OyYuOM0hRPofm-WXbbmOSAz6GOBGsb8RxxeSTriHtFSiL08QGOzdJoGr3K3g9837P-OX95RdbVhcunxPUiF2CYMBdzEqVviT_n8UELNEaJaMQODUK1G_IAVhJYfAMSS9vPXmE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 08:44:54.074 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 08:44:54.074 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 08:44:54.074 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 08:44:54.076 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:44:54.076 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:44:54.076 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:44:54.076 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:44:54.076 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:44:54.076 -06:00 [DBG] No PKCE used.
2018-07-27 08:44:54.076 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:44:54.076 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:44:56.269 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 08:44:56.269 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:44:56.269 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:44:56.269 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:44:56.269 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:44:56.270 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:44:56.270 -06:00 [DBG] No PKCE used.
2018-07-27 08:44:56.270 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:44:56.273 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:44:56.273 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:44:56.273 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 08:44:56.273 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 08:44:56.273 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 08:44:56.273 -06:00 [DBG] Start authorize callback request
2018-07-27 08:44:56.273 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:44:56.273 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:44:56.273 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:44:56.273 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:44:56.273 -06:00 [DBG] No PKCE used.
2018-07-27 08:44:56.273 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:44:56.274 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcvtl9q0PJTbcGc3ecYgHk0RMvaONwEoZortRSwHhFCiSTy8MpiiLjlk2TWyjE-DZ8mkSurhunA0Dn9GomanNoCHc2by7o6WZFa9jENO2rx-Sl8iiWdt4sSF1R380tozv6RWpRJXy5cG1XNpXek_qpYJeUUwrYGkUh8b1h0MzRNC0wlS1xmoULwos5PT2OyYuOM0hRPofm-WXbbmOSAz6GOBGsb8RxxeSTriHtFSiL08QGOzdJoGr3K3g9837P-OX95RdbVhcunxPUiF2CYMBdzEqVviT_n8UELNEaJaMQODUK1G_IAVhJYfAMSS9vPXmE",
  "Nonce": "636682994859962930.ZDU1NTBkMWQtZDY1Yi00YzA1LWIyODgtY2ZkMGRiNjY0MWJlNWQxYWQ2MTMtOWYzMC00MWIwLWFmZGYtN2U4ZTEzMDA1ZmQz",
  "SessionId": "23dcf57f58b45cc5036f920e11e77606",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636682994859962930.ZDU1NTBkMWQtZDY1Yi00YzA1LWIyODgtY2ZkMGRiNjY0MWJlNWQxYWQ2MTMtOWYzMC00MWIwLWFmZGYtN2U4ZTEzMDA1ZmQz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcvtl9q0PJTbcGc3ecYgHk0RMvaONwEoZortRSwHhFCiSTy8MpiiLjlk2TWyjE-DZ8mkSurhunA0Dn9GomanNoCHc2by7o6WZFa9jENO2rx-Sl8iiWdt4sSF1R380tozv6RWpRJXy5cG1XNpXek_qpYJeUUwrYGkUh8b1h0MzRNC0wlS1xmoULwos5PT2OyYuOM0hRPofm-WXbbmOSAz6GOBGsb8RxxeSTriHtFSiL08QGOzdJoGr3K3g9837P-OX95RdbVhcunxPUiF2CYMBdzEqVviT_n8UELNEaJaMQODUK1G_IAVhJYfAMSS9vPXmE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 08:44:56.275 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 08:44:56.275 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 08:44:56.275 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 08:44:56.275 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:44:56.275 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 08:44:56.279 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 08:44:56.279 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 08:44:56.279 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 08:44:56.291 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ELsw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****242c"
    }
  ],
  "ActivityId": "0HLFHKJ48TIIT:0000000E",
  "TimeStamp": "2018-07-27T14:44:56Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:44:56.291 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcvtl9q0PJTbcGc3ecYgHk0RMvaONwEoZortRSwHhFCiSTy8MpiiLjlk2TWyjE-DZ8mkSurhunA0Dn9GomanNoCHc2by7o6WZFa9jENO2rx-Sl8iiWdt4sSF1R380tozv6RWpRJXy5cG1XNpXek_qpYJeUUwrYGkUh8b1h0MzRNC0wlS1xmoULwos5PT2OyYuOM0hRPofm-WXbbmOSAz6GOBGsb8RxxeSTriHtFSiL08QGOzdJoGr3K3g9837P-OX95RdbVhcunxPUiF2CYMBdzEqVviT_n8UELNEaJaMQODUK1G_IAVhJYfAMSS9vPXmE",
  "Scope": "openid profile business email"
}
2018-07-27 08:44:56.291 -06:00 [DBG] Augmenting SignInContext
2018-07-27 08:44:56.291 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 08:44:56.381 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 08:44:56.381 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 08:44:56.381 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 08:44:56.381 -06:00 [DBG] Start token request.
2018-07-27 08:44:56.381 -06:00 [DBG] Start client validation
2018-07-27 08:44:56.381 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 08:44:56.381 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 08:44:56.381 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 08:44:56.381 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 08:44:56.382 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:44:56.382 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 08:44:56.382 -06:00 [DBG] Client validation success
2018-07-27 08:44:56.382 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFHKJ48TIIV:00000003",
  "TimeStamp": "2018-07-27T14:44:56Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:44:56.382 -06:00 [DBG] Start token request validation
2018-07-27 08:44:56.382 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 08:44:56.389 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 08:44:56.389 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "e3ced5364512a9cb84990c5cec58f02b58dd1741cb027831af207db9272d242c",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "e3ced5364512a9cb84990c5cec58f02b58dd1741cb027831af207db9272d242c",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 08:44:56.389 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:44:56.389 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 08:44:56.389 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:44:56.402 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:44:56.402 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 08:44:56.402 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 08:44:56.413 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****8iYQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Ql4Q"
    }
  ],
  "ActivityId": "0HLFHKJ48TIIV:00000003",
  "TimeStamp": "2018-07-27T14:44:56Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:44:56.413 -06:00 [DBG] Token request success.
2018-07-27 08:44:56.421 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 08:44:56.421 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 08:44:56.421 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 08:44:56.421 -06:00 [DBG] Start userinfo request
2018-07-27 08:44:56.421 -06:00 [DBG] Bearer token found in header
2018-07-27 08:44:56.423 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:44:56.424 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:44:56.425 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 08:44:56.425 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532702696,
    "exp": 1532706296,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532702694,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-27 08:44:56.425 -06:00 [DBG] Creating userinfo response
2018-07-27 08:44:56.425 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 08:44:56.425 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 08:44:56.425 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-27 08:44:56.425 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 08:44:56.426 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-27 08:44:56.426 -06:00 [DBG] End userinfo request
2018-07-27 08:52:29.972 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-27 08:52:29.972 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-27 08:52:29.972 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-27 08:52:29.972 -06:00 [DBG] Start discovery request
2018-07-27 08:52:30.032 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-27 08:52:30.033 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-27 08:52:30.033 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-27 08:52:30.033 -06:00 [DBG] Start key discovery request
2018-07-27 08:52:30.058 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 08:52:30.058 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 08:52:30.058 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 08:52:30.058 -06:00 [DBG] Start authorize request
2018-07-27 08:52:30.058 -06:00 [DBG] No user present in authorize request
2018-07-27 08:52:30.058 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:52:30.058 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:52:30.058 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:52:30.058 -06:00 [DBG] No PKCE used.
2018-07-27 08:52:30.058 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:52:30.058 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcvFaZsm4g0W_C6w33XqgEITmOK52wC4dV2vEAqI8rtOtfDjcM5dRW5kxk074pdDpgFUkSs2FVUBmjhAg56k_9iHXx3X4X7JJxk9x04soBlOW-FBAiShalPBUNQAZcpISrtgtMh16x_hMbIxxn2R5gfg0kOvyT-BbcIWtxA9TK8XiL5RYSXX0rQEoDXtNFYQzlZSFrrDSsSH4qtDkiQ4P0-XU9z9Azwprcs-HFBSNhpDXLs-NCyKRBxVEUsH5Tjn-h_vM_kYTcWizwB5u56REEKeSLsxafsbJD59Z6ft4OAlHy1yd990Y5uRXLUjs5d-N2n4_gtiFitYD5cByppooeNlFOV3bx4TtOhsuDrY6cgLMLEHBQ6GP8BfiCxEs2TU_0",
  "Nonce": "636682999500474540.OTdiNzhkYWMtMTk1ZC00YTZlLTkwMTMtZGVkNzAyYWUzNjA4ZmU5YzJlN2ItOGM0OC00ODNiLWE0MjctODFlNTU1Y2ZjM2Zm",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636682999500474540.OTdiNzhkYWMtMTk1ZC00YTZlLTkwMTMtZGVkNzAyYWUzNjA4ZmU5YzJlN2ItOGM0OC00ODNiLWE0MjctODFlNTU1Y2ZjM2Zm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcvFaZsm4g0W_C6w33XqgEITmOK52wC4dV2vEAqI8rtOtfDjcM5dRW5kxk074pdDpgFUkSs2FVUBmjhAg56k_9iHXx3X4X7JJxk9x04soBlOW-FBAiShalPBUNQAZcpISrtgtMh16x_hMbIxxn2R5gfg0kOvyT-BbcIWtxA9TK8XiL5RYSXX0rQEoDXtNFYQzlZSFrrDSsSH4qtDkiQ4P0-XU9z9Azwprcs-HFBSNhpDXLs-NCyKRBxVEUsH5Tjn-h_vM_kYTcWizwB5u56REEKeSLsxafsbJD59Z6ft4OAlHy1yd990Y5uRXLUjs5d-N2n4_gtiFitYD5cByppooeNlFOV3bx4TtOhsuDrY6cgLMLEHBQ6GP8BfiCxEs2TU_0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 08:52:30.059 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 08:52:30.061 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:52:30.061 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:52:30.061 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:52:30.061 -06:00 [DBG] No PKCE used.
2018-07-27 08:52:30.061 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:52:30.061 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:52:45.821 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 08:52:45.836 -06:00 [DBG] Augmenting SignInContext
2018-07-27 08:52:45.836 -06:00 [DBG] Adding idp claim with value: local
2018-07-27 08:52:45.837 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-27 08:52:45.837 -06:00 [DBG] Adding auth_time claim with value: 1532703165
2018-07-27 08:52:45.837 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 08:52:45.837 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFHKJ48TIJ1:00000004",
  "TimeStamp": "2018-07-27T14:52:45Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:52:45.840 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:52:45.840 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:52:45.840 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 08:52:45.840 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 08:52:45.840 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 08:52:45.840 -06:00 [DBG] Start authorize callback request
2018-07-27 08:52:45.840 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:52:45.840 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:52:45.840 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:52:45.840 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:52:45.840 -06:00 [DBG] No PKCE used.
2018-07-27 08:52:45.840 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:52:45.840 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcvFaZsm4g0W_C6w33XqgEITmOK52wC4dV2vEAqI8rtOtfDjcM5dRW5kxk074pdDpgFUkSs2FVUBmjhAg56k_9iHXx3X4X7JJxk9x04soBlOW-FBAiShalPBUNQAZcpISrtgtMh16x_hMbIxxn2R5gfg0kOvyT-BbcIWtxA9TK8XiL5RYSXX0rQEoDXtNFYQzlZSFrrDSsSH4qtDkiQ4P0-XU9z9Azwprcs-HFBSNhpDXLs-NCyKRBxVEUsH5Tjn-h_vM_kYTcWizwB5u56REEKeSLsxafsbJD59Z6ft4OAlHy1yd990Y5uRXLUjs5d-N2n4_gtiFitYD5cByppooeNlFOV3bx4TtOhsuDrY6cgLMLEHBQ6GP8BfiCxEs2TU_0",
  "Nonce": "636682999500474540.OTdiNzhkYWMtMTk1ZC00YTZlLTkwMTMtZGVkNzAyYWUzNjA4ZmU5YzJlN2ItOGM0OC00ODNiLWE0MjctODFlNTU1Y2ZjM2Zm",
  "SessionId": "ab945742255cbceafcda38dd9e6dbfa6",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636682999500474540.OTdiNzhkYWMtMTk1ZC00YTZlLTkwMTMtZGVkNzAyYWUzNjA4ZmU5YzJlN2ItOGM0OC00ODNiLWE0MjctODFlNTU1Y2ZjM2Zm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcvFaZsm4g0W_C6w33XqgEITmOK52wC4dV2vEAqI8rtOtfDjcM5dRW5kxk074pdDpgFUkSs2FVUBmjhAg56k_9iHXx3X4X7JJxk9x04soBlOW-FBAiShalPBUNQAZcpISrtgtMh16x_hMbIxxn2R5gfg0kOvyT-BbcIWtxA9TK8XiL5RYSXX0rQEoDXtNFYQzlZSFrrDSsSH4qtDkiQ4P0-XU9z9Azwprcs-HFBSNhpDXLs-NCyKRBxVEUsH5Tjn-h_vM_kYTcWizwB5u56REEKeSLsxafsbJD59Z6ft4OAlHy1yd990Y5uRXLUjs5d-N2n4_gtiFitYD5cByppooeNlFOV3bx4TtOhsuDrY6cgLMLEHBQ6GP8BfiCxEs2TU_0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 08:52:45.842 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 08:52:45.842 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 08:52:45.842 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 08:52:45.844 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:52:45.844 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:52:45.844 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:52:45.844 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:52:45.844 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:52:45.844 -06:00 [DBG] No PKCE used.
2018-07-27 08:52:45.845 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:52:45.845 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:53:02.086 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 08:53:02.086 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:53:02.086 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:53:02.086 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:53:02.087 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:53:02.087 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:53:02.087 -06:00 [DBG] No PKCE used.
2018-07-27 08:53:02.087 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:53:02.091 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:53:02.091 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:53:02.091 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 08:53:02.091 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 08:53:02.091 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 08:53:02.091 -06:00 [DBG] Start authorize callback request
2018-07-27 08:53:02.091 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:53:02.091 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:53:02.091 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:53:02.091 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:53:02.091 -06:00 [DBG] No PKCE used.
2018-07-27 08:53:02.092 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:53:02.092 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcvFaZsm4g0W_C6w33XqgEITmOK52wC4dV2vEAqI8rtOtfDjcM5dRW5kxk074pdDpgFUkSs2FVUBmjhAg56k_9iHXx3X4X7JJxk9x04soBlOW-FBAiShalPBUNQAZcpISrtgtMh16x_hMbIxxn2R5gfg0kOvyT-BbcIWtxA9TK8XiL5RYSXX0rQEoDXtNFYQzlZSFrrDSsSH4qtDkiQ4P0-XU9z9Azwprcs-HFBSNhpDXLs-NCyKRBxVEUsH5Tjn-h_vM_kYTcWizwB5u56REEKeSLsxafsbJD59Z6ft4OAlHy1yd990Y5uRXLUjs5d-N2n4_gtiFitYD5cByppooeNlFOV3bx4TtOhsuDrY6cgLMLEHBQ6GP8BfiCxEs2TU_0",
  "Nonce": "636682999500474540.OTdiNzhkYWMtMTk1ZC00YTZlLTkwMTMtZGVkNzAyYWUzNjA4ZmU5YzJlN2ItOGM0OC00ODNiLWE0MjctODFlNTU1Y2ZjM2Zm",
  "SessionId": "ab945742255cbceafcda38dd9e6dbfa6",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636682999500474540.OTdiNzhkYWMtMTk1ZC00YTZlLTkwMTMtZGVkNzAyYWUzNjA4ZmU5YzJlN2ItOGM0OC00ODNiLWE0MjctODFlNTU1Y2ZjM2Zm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcvFaZsm4g0W_C6w33XqgEITmOK52wC4dV2vEAqI8rtOtfDjcM5dRW5kxk074pdDpgFUkSs2FVUBmjhAg56k_9iHXx3X4X7JJxk9x04soBlOW-FBAiShalPBUNQAZcpISrtgtMh16x_hMbIxxn2R5gfg0kOvyT-BbcIWtxA9TK8XiL5RYSXX0rQEoDXtNFYQzlZSFrrDSsSH4qtDkiQ4P0-XU9z9Azwprcs-HFBSNhpDXLs-NCyKRBxVEUsH5Tjn-h_vM_kYTcWizwB5u56REEKeSLsxafsbJD59Z6ft4OAlHy1yd990Y5uRXLUjs5d-N2n4_gtiFitYD5cByppooeNlFOV3bx4TtOhsuDrY6cgLMLEHBQ6GP8BfiCxEs2TU_0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 08:53:02.093 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 08:53:02.093 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 08:53:02.093 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 08:53:02.093 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:53:02.093 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 08:53:02.097 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 08:53:02.098 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 08:53:02.098 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 08:53:02.110 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****0rLA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****0890"
    }
  ],
  "ActivityId": "0HLFHKJ48TIJ1:00000008",
  "TimeStamp": "2018-07-27T14:53:02Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:53:02.110 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcvFaZsm4g0W_C6w33XqgEITmOK52wC4dV2vEAqI8rtOtfDjcM5dRW5kxk074pdDpgFUkSs2FVUBmjhAg56k_9iHXx3X4X7JJxk9x04soBlOW-FBAiShalPBUNQAZcpISrtgtMh16x_hMbIxxn2R5gfg0kOvyT-BbcIWtxA9TK8XiL5RYSXX0rQEoDXtNFYQzlZSFrrDSsSH4qtDkiQ4P0-XU9z9Azwprcs-HFBSNhpDXLs-NCyKRBxVEUsH5Tjn-h_vM_kYTcWizwB5u56REEKeSLsxafsbJD59Z6ft4OAlHy1yd990Y5uRXLUjs5d-N2n4_gtiFitYD5cByppooeNlFOV3bx4TtOhsuDrY6cgLMLEHBQ6GP8BfiCxEs2TU_0",
  "Scope": "openid profile business email"
}
2018-07-27 08:53:02.110 -06:00 [DBG] Augmenting SignInContext
2018-07-27 08:53:02.110 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 08:53:02.213 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 08:53:02.214 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 08:53:02.214 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 08:53:02.214 -06:00 [DBG] Start token request.
2018-07-27 08:53:02.214 -06:00 [DBG] Start client validation
2018-07-27 08:53:02.214 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 08:53:02.214 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 08:53:02.214 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 08:53:02.214 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 08:53:02.214 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:53:02.214 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 08:53:02.214 -06:00 [DBG] Client validation success
2018-07-27 08:53:02.214 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFHKJ48TIJ0:00000003",
  "TimeStamp": "2018-07-27T14:53:02Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:53:02.214 -06:00 [DBG] Start token request validation
2018-07-27 08:53:02.214 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 08:53:02.221 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 08:53:02.221 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "76ac0d4306a89c3e3389118215066aa8095bea7708bc15a23affc0de6cd80890",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "76ac0d4306a89c3e3389118215066aa8095bea7708bc15a23affc0de6cd80890",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 08:53:02.222 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:53:02.222 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 08:53:02.222 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:53:02.234 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:53:02.234 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 08:53:02.234 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 08:53:02.245 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ToYA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****5Mvw"
    }
  ],
  "ActivityId": "0HLFHKJ48TIJ0:00000003",
  "TimeStamp": "2018-07-27T14:53:02Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:53:02.245 -06:00 [DBG] Token request success.
2018-07-27 08:53:02.253 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 08:53:02.254 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 08:53:02.254 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 08:53:02.254 -06:00 [DBG] Start userinfo request
2018-07-27 08:53:02.254 -06:00 [DBG] Bearer token found in header
2018-07-27 08:53:02.256 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:53:02.256 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:53:02.257 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 08:53:02.257 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532703182,
    "exp": 1532706782,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532703165,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-27 08:53:02.257 -06:00 [DBG] Creating userinfo response
2018-07-27 08:53:02.257 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 08:53:02.257 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 08:53:02.257 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-27 08:53:02.257 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 08:53:02.258 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-27 08:53:02.258 -06:00 [DBG] End userinfo request
2018-07-27 08:56:52.085 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-27 08:56:52.085 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-27 08:56:52.085 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-27 08:56:52.086 -06:00 [DBG] Start discovery request
2018-07-27 08:56:52.147 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-27 08:56:52.147 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-27 08:56:52.147 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-27 08:56:52.147 -06:00 [DBG] Start key discovery request
2018-07-27 08:56:52.173 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 08:56:52.174 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 08:56:52.174 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 08:56:52.174 -06:00 [DBG] Start authorize request
2018-07-27 08:56:52.174 -06:00 [DBG] No user present in authorize request
2018-07-27 08:56:52.174 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:56:52.174 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:56:52.174 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:56:52.174 -06:00 [DBG] No PKCE used.
2018-07-27 08:56:52.174 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:56:52.174 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdybFHFP28xrVZugTa7Zhym57A_zvKnoU1SO4g-FnMI3XllKhkI4mdublEkeZ_MnUlAHfKT7VMlJCF_WSxWDhpilGUzwX92wXPN5w5YGu4mCc-jBY06D0Wv2WAddd4BAxy5RTMULf5G-FKRPLOStrLiYf_WSAoebdlKhBmX41ZlZwTTAV4ymVOhhGy7CyiVQ5aR2ZnDvBPL2jZWJSkjZIGuiD6G6NQpFFfb41NljEfvW5YUJoxZ4t0ZwLvdNM5Jvndf-rOgTFLxK1mNwTUgiOXoxbGr6cNFPIDyRaLjQRy-rtuCo4nATaFaPYx4ix2UIowXrM055JN2P473qu5lArHN6BZLXyg2RUaV1zgVbcV9BXCUZiQjeuCIs1tXVoGY0xk",
  "Nonce": "636683002121628930.M2MzMWZkYTMtMWRjOC00Mjg2LTlmYzYtMTc2NWVhMGU2MWRkZjVkNGExOTAtNWE0NS00ZjRlLTk3N2MtYjFlOWRkN2QzMGQ5",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683002121628930.M2MzMWZkYTMtMWRjOC00Mjg2LTlmYzYtMTc2NWVhMGU2MWRkZjVkNGExOTAtNWE0NS00ZjRlLTk3N2MtYjFlOWRkN2QzMGQ5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdybFHFP28xrVZugTa7Zhym57A_zvKnoU1SO4g-FnMI3XllKhkI4mdublEkeZ_MnUlAHfKT7VMlJCF_WSxWDhpilGUzwX92wXPN5w5YGu4mCc-jBY06D0Wv2WAddd4BAxy5RTMULf5G-FKRPLOStrLiYf_WSAoebdlKhBmX41ZlZwTTAV4ymVOhhGy7CyiVQ5aR2ZnDvBPL2jZWJSkjZIGuiD6G6NQpFFfb41NljEfvW5YUJoxZ4t0ZwLvdNM5Jvndf-rOgTFLxK1mNwTUgiOXoxbGr6cNFPIDyRaLjQRy-rtuCo4nATaFaPYx4ix2UIowXrM055JN2P473qu5lArHN6BZLXyg2RUaV1zgVbcV9BXCUZiQjeuCIs1tXVoGY0xk",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 08:56:52.174 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 08:56:52.176 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:56:52.177 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:56:52.177 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:56:52.177 -06:00 [DBG] No PKCE used.
2018-07-27 08:56:52.177 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:56:52.177 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:57:02.346 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 08:57:02.361 -06:00 [DBG] Augmenting SignInContext
2018-07-27 08:57:02.361 -06:00 [DBG] Adding idp claim with value: local
2018-07-27 08:57:02.361 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-27 08:57:02.361 -06:00 [DBG] Adding auth_time claim with value: 1532703422
2018-07-27 08:57:02.362 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 08:57:02.362 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFHKJ48TIJ3:00000003",
  "TimeStamp": "2018-07-27T14:57:02Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:57:02.365 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:57:02.365 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:57:02.365 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 08:57:02.365 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 08:57:02.365 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 08:57:02.365 -06:00 [DBG] Start authorize callback request
2018-07-27 08:57:02.365 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:57:02.365 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:57:02.365 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:57:02.365 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:57:02.365 -06:00 [DBG] No PKCE used.
2018-07-27 08:57:02.365 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:57:02.366 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdybFHFP28xrVZugTa7Zhym57A_zvKnoU1SO4g-FnMI3XllKhkI4mdublEkeZ_MnUlAHfKT7VMlJCF_WSxWDhpilGUzwX92wXPN5w5YGu4mCc-jBY06D0Wv2WAddd4BAxy5RTMULf5G-FKRPLOStrLiYf_WSAoebdlKhBmX41ZlZwTTAV4ymVOhhGy7CyiVQ5aR2ZnDvBPL2jZWJSkjZIGuiD6G6NQpFFfb41NljEfvW5YUJoxZ4t0ZwLvdNM5Jvndf-rOgTFLxK1mNwTUgiOXoxbGr6cNFPIDyRaLjQRy-rtuCo4nATaFaPYx4ix2UIowXrM055JN2P473qu5lArHN6BZLXyg2RUaV1zgVbcV9BXCUZiQjeuCIs1tXVoGY0xk",
  "Nonce": "636683002121628930.M2MzMWZkYTMtMWRjOC00Mjg2LTlmYzYtMTc2NWVhMGU2MWRkZjVkNGExOTAtNWE0NS00ZjRlLTk3N2MtYjFlOWRkN2QzMGQ5",
  "SessionId": "8897f23ab03e378c1a0cf6ae754a4943",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683002121628930.M2MzMWZkYTMtMWRjOC00Mjg2LTlmYzYtMTc2NWVhMGU2MWRkZjVkNGExOTAtNWE0NS00ZjRlLTk3N2MtYjFlOWRkN2QzMGQ5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdybFHFP28xrVZugTa7Zhym57A_zvKnoU1SO4g-FnMI3XllKhkI4mdublEkeZ_MnUlAHfKT7VMlJCF_WSxWDhpilGUzwX92wXPN5w5YGu4mCc-jBY06D0Wv2WAddd4BAxy5RTMULf5G-FKRPLOStrLiYf_WSAoebdlKhBmX41ZlZwTTAV4ymVOhhGy7CyiVQ5aR2ZnDvBPL2jZWJSkjZIGuiD6G6NQpFFfb41NljEfvW5YUJoxZ4t0ZwLvdNM5Jvndf-rOgTFLxK1mNwTUgiOXoxbGr6cNFPIDyRaLjQRy-rtuCo4nATaFaPYx4ix2UIowXrM055JN2P473qu5lArHN6BZLXyg2RUaV1zgVbcV9BXCUZiQjeuCIs1tXVoGY0xk",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 08:57:02.367 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 08:57:02.367 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 08:57:02.367 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 08:57:02.369 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:57:02.369 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:57:02.369 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:57:02.369 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:57:02.369 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:57:02.369 -06:00 [DBG] No PKCE used.
2018-07-27 08:57:02.370 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:57:02.370 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:57:04.628 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 08:57:04.629 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:57:04.629 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:57:04.629 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:57:04.629 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:57:04.629 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:57:04.629 -06:00 [DBG] No PKCE used.
2018-07-27 08:57:04.629 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:57:04.633 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:57:04.633 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 08:57:04.633 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 08:57:04.633 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 08:57:04.633 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 08:57:04.633 -06:00 [DBG] Start authorize callback request
2018-07-27 08:57:04.633 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:57:04.633 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 08:57:04.634 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:57:04.634 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 08:57:04.634 -06:00 [DBG] No PKCE used.
2018-07-27 08:57:04.634 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 08:57:04.634 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdybFHFP28xrVZugTa7Zhym57A_zvKnoU1SO4g-FnMI3XllKhkI4mdublEkeZ_MnUlAHfKT7VMlJCF_WSxWDhpilGUzwX92wXPN5w5YGu4mCc-jBY06D0Wv2WAddd4BAxy5RTMULf5G-FKRPLOStrLiYf_WSAoebdlKhBmX41ZlZwTTAV4ymVOhhGy7CyiVQ5aR2ZnDvBPL2jZWJSkjZIGuiD6G6NQpFFfb41NljEfvW5YUJoxZ4t0ZwLvdNM5Jvndf-rOgTFLxK1mNwTUgiOXoxbGr6cNFPIDyRaLjQRy-rtuCo4nATaFaPYx4ix2UIowXrM055JN2P473qu5lArHN6BZLXyg2RUaV1zgVbcV9BXCUZiQjeuCIs1tXVoGY0xk",
  "Nonce": "636683002121628930.M2MzMWZkYTMtMWRjOC00Mjg2LTlmYzYtMTc2NWVhMGU2MWRkZjVkNGExOTAtNWE0NS00ZjRlLTk3N2MtYjFlOWRkN2QzMGQ5",
  "SessionId": "8897f23ab03e378c1a0cf6ae754a4943",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683002121628930.M2MzMWZkYTMtMWRjOC00Mjg2LTlmYzYtMTc2NWVhMGU2MWRkZjVkNGExOTAtNWE0NS00ZjRlLTk3N2MtYjFlOWRkN2QzMGQ5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdybFHFP28xrVZugTa7Zhym57A_zvKnoU1SO4g-FnMI3XllKhkI4mdublEkeZ_MnUlAHfKT7VMlJCF_WSxWDhpilGUzwX92wXPN5w5YGu4mCc-jBY06D0Wv2WAddd4BAxy5RTMULf5G-FKRPLOStrLiYf_WSAoebdlKhBmX41ZlZwTTAV4ymVOhhGy7CyiVQ5aR2ZnDvBPL2jZWJSkjZIGuiD6G6NQpFFfb41NljEfvW5YUJoxZ4t0ZwLvdNM5Jvndf-rOgTFLxK1mNwTUgiOXoxbGr6cNFPIDyRaLjQRy-rtuCo4nATaFaPYx4ix2UIowXrM055JN2P473qu5lArHN6BZLXyg2RUaV1zgVbcV9BXCUZiQjeuCIs1tXVoGY0xk",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 08:57:04.635 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 08:57:04.635 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 08:57:04.635 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 08:57:04.635 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:57:04.635 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 08:57:04.640 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 08:57:04.640 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 08:57:04.640 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 08:57:04.651 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****sBDA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****6e0d"
    }
  ],
  "ActivityId": "0HLFHKJ48TIJ3:00000007",
  "TimeStamp": "2018-07-27T14:57:04Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:57:04.651 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdybFHFP28xrVZugTa7Zhym57A_zvKnoU1SO4g-FnMI3XllKhkI4mdublEkeZ_MnUlAHfKT7VMlJCF_WSxWDhpilGUzwX92wXPN5w5YGu4mCc-jBY06D0Wv2WAddd4BAxy5RTMULf5G-FKRPLOStrLiYf_WSAoebdlKhBmX41ZlZwTTAV4ymVOhhGy7CyiVQ5aR2ZnDvBPL2jZWJSkjZIGuiD6G6NQpFFfb41NljEfvW5YUJoxZ4t0ZwLvdNM5Jvndf-rOgTFLxK1mNwTUgiOXoxbGr6cNFPIDyRaLjQRy-rtuCo4nATaFaPYx4ix2UIowXrM055JN2P473qu5lArHN6BZLXyg2RUaV1zgVbcV9BXCUZiQjeuCIs1tXVoGY0xk",
  "Scope": "openid profile business email"
}
2018-07-27 08:57:04.651 -06:00 [DBG] Augmenting SignInContext
2018-07-27 08:57:04.652 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 08:57:04.739 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 08:57:04.739 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 08:57:04.740 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 08:57:04.740 -06:00 [DBG] Start token request.
2018-07-27 08:57:04.740 -06:00 [DBG] Start client validation
2018-07-27 08:57:04.740 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 08:57:04.740 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 08:57:04.740 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 08:57:04.740 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 08:57:04.740 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:57:04.740 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 08:57:04.740 -06:00 [DBG] Client validation success
2018-07-27 08:57:04.740 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFHKJ48TIJ2:00000003",
  "TimeStamp": "2018-07-27T14:57:04Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:57:04.740 -06:00 [DBG] Start token request validation
2018-07-27 08:57:04.740 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 08:57:04.747 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 08:57:04.747 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "79c459f7275e17621acfea55385343bd30fa7c65d1945aa1ca895f7b85356e0d",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "79c459f7275e17621acfea55385343bd30fa7c65d1945aa1ca895f7b85356e0d",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 08:57:04.748 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:57:04.748 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 08:57:04.748 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 08:57:04.760 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:57:04.761 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 08:57:04.761 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 08:57:04.772 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****mp0A"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****94yg"
    }
  ],
  "ActivityId": "0HLFHKJ48TIJ2:00000003",
  "TimeStamp": "2018-07-27T14:57:04Z",
  "ProcessId": 8269,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 08:57:04.772 -06:00 [DBG] Token request success.
2018-07-27 08:57:04.779 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 08:57:04.779 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 08:57:04.779 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 08:57:04.779 -06:00 [DBG] Start userinfo request
2018-07-27 08:57:04.779 -06:00 [DBG] Bearer token found in header
2018-07-27 08:57:04.781 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:57:04.781 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 08:57:04.783 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 08:57:04.783 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532703424,
    "exp": 1532707024,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532703422,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-27 08:57:04.783 -06:00 [DBG] Creating userinfo response
2018-07-27 08:57:04.783 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 08:57:04.783 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 08:57:04.783 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-27 08:57:04.783 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 08:57:04.784 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-27 08:57:04.784 -06:00 [DBG] End userinfo request
2018-07-27 09:54:46.720 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-27 09:54:46.751 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-27 09:54:46.754 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-27 09:54:46.754 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-27 09:54:46.754 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-27 09:54:46.754 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-27 10:06:43.898 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-27 10:06:44.024 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-27 10:06:44.024 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-27 10:06:44.026 -06:00 [DBG] Start discovery request
2018-07-27 10:06:44.162 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-27 10:06:44.163 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-27 10:06:44.163 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-27 10:06:44.166 -06:00 [DBG] Start key discovery request
2018-07-27 10:06:44.214 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 10:06:44.216 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 10:06:44.216 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 10:06:44.219 -06:00 [DBG] Start authorize request
2018-07-27 10:06:44.236 -06:00 [DBG] No user present in authorize request
2018-07-27 10:06:44.240 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:06:44.250 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:06:44.254 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:06:44.255 -06:00 [DBG] No PKCE used.
2018-07-27 10:06:44.281 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:06:44.290 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeJYo1djULt0lIOaQQqHXGRJ18rqLjNpmg7tcC7AQyDyFvxLA_HvBhVKE76JA4ZE2AChiLYo8RLPu0PjmlvLjkRrY8uu2qTChRZABDxVifDK6X7fme6yJ3SmTRquCBhhBPVaj_5X8Njkirp6cyFrEpr5zrdfBz7BnOEZSvI2Loiy23k4CF9rD8EFTWZ-Uk5sTDP6_F0D5U61DMrJo_Kwk_ftoxQTnMuTmV9ZgxqhMx0yhN_aXLOowqOt7sR09StKeELePieKwUNnqtVGbO0KZkaOqutuplX08KMhd6YmKjS7ueBNXofZU4yOWwGAO6S7Xz1gCFnusPUOK0u7Ud3zEOh-mUs5S12PqrC4MPCKh7Knrta4WJEFe52APrx4FZQFpU",
  "Nonce": "636683044041995620.YzNlN2VmYjMtZjY0OS00OTczLTliYjUtYTA5ODYzMmZkYzJiOTM3ZTQzMmUtMjMyNi00NWZjLWEzNDktMmIzMTkyZjEwODBk",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683044041995620.YzNlN2VmYjMtZjY0OS00OTczLTliYjUtYTA5ODYzMmZkYzJiOTM3ZTQzMmUtMjMyNi00NWZjLWEzNDktMmIzMTkyZjEwODBk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeJYo1djULt0lIOaQQqHXGRJ18rqLjNpmg7tcC7AQyDyFvxLA_HvBhVKE76JA4ZE2AChiLYo8RLPu0PjmlvLjkRrY8uu2qTChRZABDxVifDK6X7fme6yJ3SmTRquCBhhBPVaj_5X8Njkirp6cyFrEpr5zrdfBz7BnOEZSvI2Loiy23k4CF9rD8EFTWZ-Uk5sTDP6_F0D5U61DMrJo_Kwk_ftoxQTnMuTmV9ZgxqhMx0yhN_aXLOowqOt7sR09StKeELePieKwUNnqtVGbO0KZkaOqutuplX08KMhd6YmKjS7ueBNXofZU4yOWwGAO6S7Xz1gCFnusPUOK0u7Ud3zEOh-mUs5S12PqrC4MPCKh7Knrta4WJEFe52APrx4FZQFpU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 10:06:44.297 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 10:06:44.409 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:06:44.410 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:06:44.410 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:06:44.410 -06:00 [DBG] No PKCE used.
2018-07-27 10:06:44.410 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:06:44.412 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:06:56.023 -06:00 [DBG] Augmenting SignInContext
2018-07-27 10:06:56.025 -06:00 [DBG] Adding idp claim with value: local
2018-07-27 10:06:56.025 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-27 10:06:56.026 -06:00 [DBG] Adding auth_time claim with value: 1532707616
2018-07-27 10:06:56.056 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 10:06:56.087 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFJR570AFIS:00000003",
  "TimeStamp": "2018-07-27T16:06:56Z",
  "ProcessId": 35867,
  "LocalIpAddress": "127.0.0.1:5004",
  "RemoteIpAddress": "127.0.0.1"
}
2018-07-27 10:06:56.108 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:06:56.108 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:06:56.108 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 10:06:56.109 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 10:06:56.109 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 10:06:56.114 -06:00 [DBG] Start authorize callback request
2018-07-27 10:06:56.117 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 10:06:56.117 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:06:56.117 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:06:56.117 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:06:56.117 -06:00 [DBG] No PKCE used.
2018-07-27 10:06:56.117 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:06:56.117 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeJYo1djULt0lIOaQQqHXGRJ18rqLjNpmg7tcC7AQyDyFvxLA_HvBhVKE76JA4ZE2AChiLYo8RLPu0PjmlvLjkRrY8uu2qTChRZABDxVifDK6X7fme6yJ3SmTRquCBhhBPVaj_5X8Njkirp6cyFrEpr5zrdfBz7BnOEZSvI2Loiy23k4CF9rD8EFTWZ-Uk5sTDP6_F0D5U61DMrJo_Kwk_ftoxQTnMuTmV9ZgxqhMx0yhN_aXLOowqOt7sR09StKeELePieKwUNnqtVGbO0KZkaOqutuplX08KMhd6YmKjS7ueBNXofZU4yOWwGAO6S7Xz1gCFnusPUOK0u7Ud3zEOh-mUs5S12PqrC4MPCKh7Knrta4WJEFe52APrx4FZQFpU",
  "Nonce": "636683044041995620.YzNlN2VmYjMtZjY0OS00OTczLTliYjUtYTA5ODYzMmZkYzJiOTM3ZTQzMmUtMjMyNi00NWZjLWEzNDktMmIzMTkyZjEwODBk",
  "SessionId": "bfcfe693d26924b9f94fabe62a6c7140",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683044041995620.YzNlN2VmYjMtZjY0OS00OTczLTliYjUtYTA5ODYzMmZkYzJiOTM3ZTQzMmUtMjMyNi00NWZjLWEzNDktMmIzMTkyZjEwODBk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeJYo1djULt0lIOaQQqHXGRJ18rqLjNpmg7tcC7AQyDyFvxLA_HvBhVKE76JA4ZE2AChiLYo8RLPu0PjmlvLjkRrY8uu2qTChRZABDxVifDK6X7fme6yJ3SmTRquCBhhBPVaj_5X8Njkirp6cyFrEpr5zrdfBz7BnOEZSvI2Loiy23k4CF9rD8EFTWZ-Uk5sTDP6_F0D5U61DMrJo_Kwk_ftoxQTnMuTmV9ZgxqhMx0yhN_aXLOowqOt7sR09StKeELePieKwUNnqtVGbO0KZkaOqutuplX08KMhd6YmKjS7ueBNXofZU4yOWwGAO6S7Xz1gCFnusPUOK0u7Ud3zEOh-mUs5S12PqrC4MPCKh7Knrta4WJEFe52APrx4FZQFpU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 10:06:56.157 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 10:06:56.157 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 10:06:56.157 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 10:06:56.160 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:06:56.160 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:06:56.188 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:06:56.188 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:06:56.188 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:06:56.188 -06:00 [DBG] No PKCE used.
2018-07-27 10:06:56.188 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:06:56.188 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:06:59.924 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:06:59.924 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:06:59.945 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:06:59.945 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:06:59.945 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:06:59.945 -06:00 [DBG] No PKCE used.
2018-07-27 10:06:59.945 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:06:59.961 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:06:59.961 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:06:59.961 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 10:06:59.961 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 10:06:59.961 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 10:06:59.961 -06:00 [DBG] Start authorize callback request
2018-07-27 10:06:59.992 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 10:06:59.992 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:06:59.992 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:06:59.992 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:06:59.992 -06:00 [DBG] No PKCE used.
2018-07-27 10:06:59.993 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:06:59.993 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeJYo1djULt0lIOaQQqHXGRJ18rqLjNpmg7tcC7AQyDyFvxLA_HvBhVKE76JA4ZE2AChiLYo8RLPu0PjmlvLjkRrY8uu2qTChRZABDxVifDK6X7fme6yJ3SmTRquCBhhBPVaj_5X8Njkirp6cyFrEpr5zrdfBz7BnOEZSvI2Loiy23k4CF9rD8EFTWZ-Uk5sTDP6_F0D5U61DMrJo_Kwk_ftoxQTnMuTmV9ZgxqhMx0yhN_aXLOowqOt7sR09StKeELePieKwUNnqtVGbO0KZkaOqutuplX08KMhd6YmKjS7ueBNXofZU4yOWwGAO6S7Xz1gCFnusPUOK0u7Ud3zEOh-mUs5S12PqrC4MPCKh7Knrta4WJEFe52APrx4FZQFpU",
  "Nonce": "636683044041995620.YzNlN2VmYjMtZjY0OS00OTczLTliYjUtYTA5ODYzMmZkYzJiOTM3ZTQzMmUtMjMyNi00NWZjLWEzNDktMmIzMTkyZjEwODBk",
  "SessionId": "bfcfe693d26924b9f94fabe62a6c7140",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683044041995620.YzNlN2VmYjMtZjY0OS00OTczLTliYjUtYTA5ODYzMmZkYzJiOTM3ZTQzMmUtMjMyNi00NWZjLWEzNDktMmIzMTkyZjEwODBk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeJYo1djULt0lIOaQQqHXGRJ18rqLjNpmg7tcC7AQyDyFvxLA_HvBhVKE76JA4ZE2AChiLYo8RLPu0PjmlvLjkRrY8uu2qTChRZABDxVifDK6X7fme6yJ3SmTRquCBhhBPVaj_5X8Njkirp6cyFrEpr5zrdfBz7BnOEZSvI2Loiy23k4CF9rD8EFTWZ-Uk5sTDP6_F0D5U61DMrJo_Kwk_ftoxQTnMuTmV9ZgxqhMx0yhN_aXLOowqOt7sR09StKeELePieKwUNnqtVGbO0KZkaOqutuplX08KMhd6YmKjS7ueBNXofZU4yOWwGAO6S7Xz1gCFnusPUOK0u7Ud3zEOh-mUs5S12PqrC4MPCKh7Knrta4WJEFe52APrx4FZQFpU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 10:06:59.995 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 10:06:59.995 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 10:07:00.001 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 10:07:00.013 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 10:07:00.020 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 10:07:00.041 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 10:07:00.050 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 10:07:00.053 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 10:07:00.125 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****G-Lg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****8130"
    }
  ],
  "ActivityId": "0HLFJR570AFIS:00000008",
  "TimeStamp": "2018-07-27T16:07:00Z",
  "ProcessId": 35867,
  "LocalIpAddress": "127.0.0.1:5004",
  "RemoteIpAddress": "127.0.0.1"
}
2018-07-27 10:07:00.128 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeJYo1djULt0lIOaQQqHXGRJ18rqLjNpmg7tcC7AQyDyFvxLA_HvBhVKE76JA4ZE2AChiLYo8RLPu0PjmlvLjkRrY8uu2qTChRZABDxVifDK6X7fme6yJ3SmTRquCBhhBPVaj_5X8Njkirp6cyFrEpr5zrdfBz7BnOEZSvI2Loiy23k4CF9rD8EFTWZ-Uk5sTDP6_F0D5U61DMrJo_Kwk_ftoxQTnMuTmV9ZgxqhMx0yhN_aXLOowqOt7sR09StKeELePieKwUNnqtVGbO0KZkaOqutuplX08KMhd6YmKjS7ueBNXofZU4yOWwGAO6S7Xz1gCFnusPUOK0u7Ud3zEOh-mUs5S12PqrC4MPCKh7Knrta4WJEFe52APrx4FZQFpU",
  "Scope": "openid profile business email"
}
2018-07-27 10:07:00.143 -06:00 [DBG] Augmenting SignInContext
2018-07-27 10:07:00.143 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 10:07:00.207 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 10:07:00.209 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 10:07:00.210 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 10:07:00.216 -06:00 [DBG] Start token request.
2018-07-27 10:07:00.221 -06:00 [DBG] Start client validation
2018-07-27 10:07:00.227 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 10:07:00.230 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 10:07:00.230 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 10:07:00.230 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 10:07:00.230 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:07:00.238 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 10:07:00.238 -06:00 [DBG] Client validation success
2018-07-27 10:07:00.240 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFJR570AFIR:00000003",
  "TimeStamp": "2018-07-27T16:07:00Z",
  "ProcessId": 35867,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 10:07:00.245 -06:00 [DBG] Start token request validation
2018-07-27 10:07:00.255 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 10:07:00.275 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 10:07:00.278 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "050aad011f54ad5efd81d06b571489a52b842958b2b6dc458f125a88f2f58130",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "050aad011f54ad5efd81d06b571489a52b842958b2b6dc458f125a88f2f58130",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 10:07:00.290 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:07:00.300 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 10:07:00.300 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 10:07:00.321 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:07:00.322 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 10:07:00.322 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 10:07:00.335 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****yWEw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Lmuw"
    }
  ],
  "ActivityId": "0HLFJR570AFIR:00000003",
  "TimeStamp": "2018-07-27T16:07:00Z",
  "ProcessId": 35867,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 10:07:00.336 -06:00 [DBG] Token request success.
2018-07-27 10:07:00.347 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 10:07:00.348 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 10:07:00.348 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 10:07:00.355 -06:00 [DBG] Start userinfo request
2018-07-27 10:07:00.357 -06:00 [DBG] Bearer token found in header
2018-07-27 10:07:00.419 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:07:00.422 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:07:00.423 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 10:07:00.426 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532707620,
    "exp": 1532711220,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532707616,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-27 10:07:00.431 -06:00 [DBG] Creating userinfo response
2018-07-27 10:07:00.434 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 10:07:00.436 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 10:07:00.438 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-27 10:07:00.438 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 10:07:00.440 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-27 10:07:00.441 -06:00 [DBG] End userinfo request
2018-07-27 10:23:58.912 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 10:23:58.913 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 10:23:58.913 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 10:23:58.913 -06:00 [DBG] Start authorize request
2018-07-27 10:23:58.913 -06:00 [DBG] No user present in authorize request
2018-07-27 10:23:58.913 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:23:58.913 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:23:58.913 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:23:58.913 -06:00 [DBG] No PKCE used.
2018-07-27 10:23:58.914 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:23:58.914 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcDEETG9OjN1ITU7Hune_BbTwDzEkktoUfF_JfyNkX93DssaNFyta3Ktxf_5gtCwwaAc5ySHIwKsiantR10xc3ARAQRV-FsBtw2YGD0AG9bmPg7PL8TsSy-sRiZvIlaK3RV3C0MENDzKnC-udtdbeXVp2BngUeCYBAEL5ZqzRkT6rSgSNjM3NOa9c56evGaM-1Fxv2lPf5fO3ZTirSxr2uFX91DDWRcL0rUrK-xavxUNWOYwFoHw8Y75YICRr-O7SR687WWyBaHyftT0Q_D3FdFoF2XIlaNDfqoh_AK6-V1umLiCEum31nt2EfEe1ENeF6joVVk-UdHTJz-h8IfuWbiu-8Q1BNHA2C8jPvJ64JPFuSspl9elMPEqncuMmN3V8I",
  "Nonce": "636683054389066040.MDRjMDAwMGItMTdmNC00YmZhLWEwMjYtNmUwYTUzNzQ3YmI3MWE2ZDU0ZWItMDA3Yy00MTI5LWI0YzYtNzgyZjQ0MGVlZjYw",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683054389066040.MDRjMDAwMGItMTdmNC00YmZhLWEwMjYtNmUwYTUzNzQ3YmI3MWE2ZDU0ZWItMDA3Yy00MTI5LWI0YzYtNzgyZjQ0MGVlZjYw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcDEETG9OjN1ITU7Hune_BbTwDzEkktoUfF_JfyNkX93DssaNFyta3Ktxf_5gtCwwaAc5ySHIwKsiantR10xc3ARAQRV-FsBtw2YGD0AG9bmPg7PL8TsSy-sRiZvIlaK3RV3C0MENDzKnC-udtdbeXVp2BngUeCYBAEL5ZqzRkT6rSgSNjM3NOa9c56evGaM-1Fxv2lPf5fO3ZTirSxr2uFX91DDWRcL0rUrK-xavxUNWOYwFoHw8Y75YICRr-O7SR687WWyBaHyftT0Q_D3FdFoF2XIlaNDfqoh_AK6-V1umLiCEum31nt2EfEe1ENeF6joVVk-UdHTJz-h8IfuWbiu-8Q1BNHA2C8jPvJ64JPFuSspl9elMPEqncuMmN3V8I",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 10:23:58.914 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 10:23:58.918 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:23:58.918 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:23:58.918 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:23:58.918 -06:00 [DBG] No PKCE used.
2018-07-27 10:23:58.919 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:23:58.919 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:24:08.764 -06:00 [DBG] Augmenting SignInContext
2018-07-27 10:24:08.764 -06:00 [DBG] Adding idp claim with value: local
2018-07-27 10:24:08.765 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-27 10:24:08.765 -06:00 [DBG] Adding auth_time claim with value: 1532708648
2018-07-27 10:24:08.765 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 10:24:08.765 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFJR570AFIT:00000003",
  "TimeStamp": "2018-07-27T16:24:08Z",
  "ProcessId": 35867,
  "LocalIpAddress": "127.0.0.1:5004",
  "RemoteIpAddress": "127.0.0.1"
}
2018-07-27 10:24:08.770 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:24:08.770 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:24:08.770 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 10:24:08.770 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 10:24:08.770 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 10:24:08.770 -06:00 [DBG] Start authorize callback request
2018-07-27 10:24:08.770 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 10:24:08.770 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:24:08.770 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:24:08.770 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:24:08.770 -06:00 [DBG] No PKCE used.
2018-07-27 10:24:08.771 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:24:08.771 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcDEETG9OjN1ITU7Hune_BbTwDzEkktoUfF_JfyNkX93DssaNFyta3Ktxf_5gtCwwaAc5ySHIwKsiantR10xc3ARAQRV-FsBtw2YGD0AG9bmPg7PL8TsSy-sRiZvIlaK3RV3C0MENDzKnC-udtdbeXVp2BngUeCYBAEL5ZqzRkT6rSgSNjM3NOa9c56evGaM-1Fxv2lPf5fO3ZTirSxr2uFX91DDWRcL0rUrK-xavxUNWOYwFoHw8Y75YICRr-O7SR687WWyBaHyftT0Q_D3FdFoF2XIlaNDfqoh_AK6-V1umLiCEum31nt2EfEe1ENeF6joVVk-UdHTJz-h8IfuWbiu-8Q1BNHA2C8jPvJ64JPFuSspl9elMPEqncuMmN3V8I",
  "Nonce": "636683054389066040.MDRjMDAwMGItMTdmNC00YmZhLWEwMjYtNmUwYTUzNzQ3YmI3MWE2ZDU0ZWItMDA3Yy00MTI5LWI0YzYtNzgyZjQ0MGVlZjYw",
  "SessionId": "0ebfc8c82c4802178741cb30ad34d57f",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683054389066040.MDRjMDAwMGItMTdmNC00YmZhLWEwMjYtNmUwYTUzNzQ3YmI3MWE2ZDU0ZWItMDA3Yy00MTI5LWI0YzYtNzgyZjQ0MGVlZjYw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcDEETG9OjN1ITU7Hune_BbTwDzEkktoUfF_JfyNkX93DssaNFyta3Ktxf_5gtCwwaAc5ySHIwKsiantR10xc3ARAQRV-FsBtw2YGD0AG9bmPg7PL8TsSy-sRiZvIlaK3RV3C0MENDzKnC-udtdbeXVp2BngUeCYBAEL5ZqzRkT6rSgSNjM3NOa9c56evGaM-1Fxv2lPf5fO3ZTirSxr2uFX91DDWRcL0rUrK-xavxUNWOYwFoHw8Y75YICRr-O7SR687WWyBaHyftT0Q_D3FdFoF2XIlaNDfqoh_AK6-V1umLiCEum31nt2EfEe1ENeF6joVVk-UdHTJz-h8IfuWbiu-8Q1BNHA2C8jPvJ64JPFuSspl9elMPEqncuMmN3V8I",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 10:24:08.772 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 10:24:08.773 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 10:24:08.773 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 10:24:08.780 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:24:08.780 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:24:08.781 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:24:08.781 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:24:08.781 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:24:08.781 -06:00 [DBG] No PKCE used.
2018-07-27 10:24:08.781 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:24:08.781 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:24:13.664 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:24:13.664 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:24:13.665 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:24:13.665 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:24:13.665 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:24:13.665 -06:00 [DBG] No PKCE used.
2018-07-27 10:24:13.665 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:24:13.669 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:24:13.669 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:24:13.669 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 10:24:13.669 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 10:24:13.669 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 10:24:13.669 -06:00 [DBG] Start authorize callback request
2018-07-27 10:24:13.669 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 10:24:13.670 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:24:13.670 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:24:13.670 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:24:13.670 -06:00 [DBG] No PKCE used.
2018-07-27 10:24:13.670 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:24:13.670 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcDEETG9OjN1ITU7Hune_BbTwDzEkktoUfF_JfyNkX93DssaNFyta3Ktxf_5gtCwwaAc5ySHIwKsiantR10xc3ARAQRV-FsBtw2YGD0AG9bmPg7PL8TsSy-sRiZvIlaK3RV3C0MENDzKnC-udtdbeXVp2BngUeCYBAEL5ZqzRkT6rSgSNjM3NOa9c56evGaM-1Fxv2lPf5fO3ZTirSxr2uFX91DDWRcL0rUrK-xavxUNWOYwFoHw8Y75YICRr-O7SR687WWyBaHyftT0Q_D3FdFoF2XIlaNDfqoh_AK6-V1umLiCEum31nt2EfEe1ENeF6joVVk-UdHTJz-h8IfuWbiu-8Q1BNHA2C8jPvJ64JPFuSspl9elMPEqncuMmN3V8I",
  "Nonce": "636683054389066040.MDRjMDAwMGItMTdmNC00YmZhLWEwMjYtNmUwYTUzNzQ3YmI3MWE2ZDU0ZWItMDA3Yy00MTI5LWI0YzYtNzgyZjQ0MGVlZjYw",
  "SessionId": "0ebfc8c82c4802178741cb30ad34d57f",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683054389066040.MDRjMDAwMGItMTdmNC00YmZhLWEwMjYtNmUwYTUzNzQ3YmI3MWE2ZDU0ZWItMDA3Yy00MTI5LWI0YzYtNzgyZjQ0MGVlZjYw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcDEETG9OjN1ITU7Hune_BbTwDzEkktoUfF_JfyNkX93DssaNFyta3Ktxf_5gtCwwaAc5ySHIwKsiantR10xc3ARAQRV-FsBtw2YGD0AG9bmPg7PL8TsSy-sRiZvIlaK3RV3C0MENDzKnC-udtdbeXVp2BngUeCYBAEL5ZqzRkT6rSgSNjM3NOa9c56evGaM-1Fxv2lPf5fO3ZTirSxr2uFX91DDWRcL0rUrK-xavxUNWOYwFoHw8Y75YICRr-O7SR687WWyBaHyftT0Q_D3FdFoF2XIlaNDfqoh_AK6-V1umLiCEum31nt2EfEe1ENeF6joVVk-UdHTJz-h8IfuWbiu-8Q1BNHA2C8jPvJ64JPFuSspl9elMPEqncuMmN3V8I",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 10:24:13.671 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 10:24:13.671 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 10:24:13.671 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 10:24:13.672 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 10:24:13.672 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 10:24:13.676 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 10:24:13.677 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 10:24:13.677 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 10:24:13.688 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****EHTw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****4323"
    }
  ],
  "ActivityId": "0HLFJR570AFIU:00000002",
  "TimeStamp": "2018-07-27T16:24:13Z",
  "ProcessId": 35867,
  "LocalIpAddress": "127.0.0.1:5004",
  "RemoteIpAddress": "127.0.0.1"
}
2018-07-27 10:24:13.688 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcDEETG9OjN1ITU7Hune_BbTwDzEkktoUfF_JfyNkX93DssaNFyta3Ktxf_5gtCwwaAc5ySHIwKsiantR10xc3ARAQRV-FsBtw2YGD0AG9bmPg7PL8TsSy-sRiZvIlaK3RV3C0MENDzKnC-udtdbeXVp2BngUeCYBAEL5ZqzRkT6rSgSNjM3NOa9c56evGaM-1Fxv2lPf5fO3ZTirSxr2uFX91DDWRcL0rUrK-xavxUNWOYwFoHw8Y75YICRr-O7SR687WWyBaHyftT0Q_D3FdFoF2XIlaNDfqoh_AK6-V1umLiCEum31nt2EfEe1ENeF6joVVk-UdHTJz-h8IfuWbiu-8Q1BNHA2C8jPvJ64JPFuSspl9elMPEqncuMmN3V8I",
  "Scope": "openid profile business email"
}
2018-07-27 10:24:13.689 -06:00 [DBG] Augmenting SignInContext
2018-07-27 10:24:13.689 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 10:24:13.730 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 10:24:13.731 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 10:24:13.731 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 10:24:13.731 -06:00 [DBG] Start token request.
2018-07-27 10:24:13.731 -06:00 [DBG] Start client validation
2018-07-27 10:24:13.731 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 10:24:13.731 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 10:24:13.731 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 10:24:13.731 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 10:24:13.731 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:24:13.731 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 10:24:13.731 -06:00 [DBG] Client validation success
2018-07-27 10:24:13.731 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFJR570AFIV:00000001",
  "TimeStamp": "2018-07-27T16:24:13Z",
  "ProcessId": 35867,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 10:24:13.731 -06:00 [DBG] Start token request validation
2018-07-27 10:24:13.732 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 10:24:13.740 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 10:24:13.740 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "38284363e46a4cbb816187f640164d134a27bc1deea9af10e8068b9a84cd4323",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "38284363e46a4cbb816187f640164d134a27bc1deea9af10e8068b9a84cd4323",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 10:24:13.741 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:24:13.741 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 10:24:13.741 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 10:24:13.754 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:24:13.754 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 10:24:13.754 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 10:24:13.766 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****8Zwg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****FO2g"
    }
  ],
  "ActivityId": "0HLFJR570AFIV:00000001",
  "TimeStamp": "2018-07-27T16:24:13Z",
  "ProcessId": 35867,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 10:24:13.766 -06:00 [DBG] Token request success.
2018-07-27 10:24:13.770 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 10:24:13.771 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 10:24:13.771 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 10:24:13.771 -06:00 [DBG] Start userinfo request
2018-07-27 10:24:13.771 -06:00 [DBG] Bearer token found in header
2018-07-27 10:24:13.774 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:24:13.774 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:24:13.776 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 10:24:13.776 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532708653,
    "exp": 1532712253,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532708648,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-27 10:24:13.777 -06:00 [DBG] Creating userinfo response
2018-07-27 10:24:13.777 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 10:24:13.777 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 10:24:13.777 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-27 10:24:13.777 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 10:24:13.778 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-27 10:24:13.778 -06:00 [DBG] End userinfo request
2018-07-27 10:25:44.020 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 10:25:44.020 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 10:25:44.021 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 10:25:44.021 -06:00 [DBG] Start authorize request
2018-07-27 10:25:44.021 -06:00 [DBG] No user present in authorize request
2018-07-27 10:25:44.021 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:25:44.021 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:25:44.021 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:25:44.021 -06:00 [DBG] No PKCE used.
2018-07-27 10:25:44.021 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:25:44.021 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfnWCCxJDwfr3bcJ2J2z8qnQw5yzSbrbY4mGOASKGdipIhDn8tnnwHJCWIs0TKuIszQA5Dl_ThYd4YCvGcK-RSdo_xrBq3er2xOSEiJIhzaRrWM7AUVJ2zDLNPqgGj4MjTpb3jDDQdAqZNGD2EcLMvpQQ9SLE63FrNN8dY2KEhjpZ0NYE6Go96O5ZfR68mvqNCY5eBW1JfbHfA-GFKCVAqrHQhbDNZfCqh_jQeuHGBqNhNFgdvXhDREyoLGzA82yX0OfNrJExNrHFCVqvXvdDbLXC2H-ycOPwKtjc8tMJLSAsdQZeeJOH49Mqico1_RM_I",
  "Nonce": "636683055440144730.NmI5ZmY3MTUtNWI3ZS00YzM2LWJmZmYtNjUzNGRhZjQ1OTBhNjZiZDI2ZmItNDYzYy00NWViLWEyMzYtYTIwMGY1MGJkYWFj",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683055440144730.NmI5ZmY3MTUtNWI3ZS00YzM2LWJmZmYtNjUzNGRhZjQ1OTBhNjZiZDI2ZmItNDYzYy00NWViLWEyMzYtYTIwMGY1MGJkYWFj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfnWCCxJDwfr3bcJ2J2z8qnQw5yzSbrbY4mGOASKGdipIhDn8tnnwHJCWIs0TKuIszQA5Dl_ThYd4YCvGcK-RSdo_xrBq3er2xOSEiJIhzaRrWM7AUVJ2zDLNPqgGj4MjTpb3jDDQdAqZNGD2EcLMvpQQ9SLE63FrNN8dY2KEhjpZ0NYE6Go96O5ZfR68mvqNCY5eBW1JfbHfA-GFKCVAqrHQhbDNZfCqh_jQeuHGBqNhNFgdvXhDREyoLGzA82yX0OfNrJExNrHFCVqvXvdDbLXC2H-ycOPwKtjc8tMJLSAsdQZeeJOH49Mqico1_RM_I",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 10:25:44.021 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 10:25:44.025 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:25:44.025 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:25:44.025 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:25:44.025 -06:00 [DBG] No PKCE used.
2018-07-27 10:25:44.026 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:25:44.026 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:34:28.282 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 10:34:28.283 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 10:34:28.284 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 10:34:28.284 -06:00 [DBG] Start authorize request
2018-07-27 10:34:28.284 -06:00 [DBG] No user present in authorize request
2018-07-27 10:34:28.284 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:34:28.284 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:34:28.284 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:34:28.284 -06:00 [DBG] No PKCE used.
2018-07-27 10:34:28.284 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:34:28.284 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdI0pqDFUW0cPKUoq83IvD06iMl-pViYTtUWr7_ds2EtRO9WP1GNcGYtgUvLYpeBb3euUIcFWeQ7yBtg5ZohdGKBnCLtMDC-vJtb0NItupgTH7tnzGNcPQZp4OuECPUKZX7Ly2RPnrekVV4hY1s0Fw2AgNp_JIixbDj4viyB_UBy5DMEy21OcG8oGmFH2T7x83-3DpgHNEpWWAFB_aKGBUJ8cCt192tzBV7RiqRel9vRkcCvEZp-s9IHvfvaOp565MTc0KmrKPF776rbgiN1x7rA2bcezpvMyGu1aZ6YxW5xKlbvRMMRHkcdz-I2ytHMskrYUS_nGVpNtr2BbV0veXanpTkrtaEc_vEl0OQMGgciFU0pd0hbUZwWtX8zdhKh4M",
  "Nonce": "636683060682774290.MTg0MTU2ZTYtNTgwYS00MzdlLThmM2UtMjIxMDQzODA1OTlmYzYxMjlhMDMtZWNhOS00MjBmLTgwNGQtOGMyYzY0YzJlNDFi",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683060682774290.MTg0MTU2ZTYtNTgwYS00MzdlLThmM2UtMjIxMDQzODA1OTlmYzYxMjlhMDMtZWNhOS00MjBmLTgwNGQtOGMyYzY0YzJlNDFi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdI0pqDFUW0cPKUoq83IvD06iMl-pViYTtUWr7_ds2EtRO9WP1GNcGYtgUvLYpeBb3euUIcFWeQ7yBtg5ZohdGKBnCLtMDC-vJtb0NItupgTH7tnzGNcPQZp4OuECPUKZX7Ly2RPnrekVV4hY1s0Fw2AgNp_JIixbDj4viyB_UBy5DMEy21OcG8oGmFH2T7x83-3DpgHNEpWWAFB_aKGBUJ8cCt192tzBV7RiqRel9vRkcCvEZp-s9IHvfvaOp565MTc0KmrKPF776rbgiN1x7rA2bcezpvMyGu1aZ6YxW5xKlbvRMMRHkcdz-I2ytHMskrYUS_nGVpNtr2BbV0veXanpTkrtaEc_vEl0OQMGgciFU0pd0hbUZwWtX8zdhKh4M",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 10:34:28.284 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 10:34:28.288 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:34:28.288 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:34:28.289 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:34:28.289 -06:00 [DBG] No PKCE used.
2018-07-27 10:34:28.289 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:34:28.289 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:34:52.590 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 10:34:52.590 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 10:34:52.590 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 10:34:52.590 -06:00 [DBG] Start authorize request
2018-07-27 10:34:52.590 -06:00 [DBG] No user present in authorize request
2018-07-27 10:34:52.590 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:34:52.590 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:34:52.590 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:34:52.590 -06:00 [DBG] No PKCE used.
2018-07-27 10:34:52.590 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:34:52.590 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdAkVmVmRCEtluzvdhuAlRv0SffF-nw-2MzfbtA6PTI8ThMH7fVpsLGwOCGYV5Tvv2zOIBCoNqGv7aCPT7enXBoT8F3vkaotWdXh4FbwvJQkmqCB-iFeCi_gxV6VspDaEfGXSS2tVVhvCXP4Y19YYAGF-idTbiJ-WTwO0RMqL36zrtLQJHV_35Y1vfmwA9X1uY3zjpQlq8E89U8b564n5KG_eBrgBNiIa6G0cKfQVH6aOAQ0mUvo_DFl4S5wFYqUDzdRTYbsV8tZG_HNRrWNcIi7JnLSjHaJ78czDoSm2FkcYdE_nr1lYL_XeUerHKDGU7amPNZvf2fFjAFr345YI-NTHGCaKaKTGVprnWPHse3TeUg6CaqS2hXjLdq3_DSsYE",
  "Nonce": "636683060925864960.NWEyMTlhMDgtNjg2Ny00ZjAwLWExYjMtNjRlZmZlNzgzMmRiNjFjZTRmMDItM2FiZi00YmZiLTk1ZDAtNDhhMjE4YWFmMDk5",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683060925864960.NWEyMTlhMDgtNjg2Ny00ZjAwLWExYjMtNjRlZmZlNzgzMmRiNjFjZTRmMDItM2FiZi00YmZiLTk1ZDAtNDhhMjE4YWFmMDk5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdAkVmVmRCEtluzvdhuAlRv0SffF-nw-2MzfbtA6PTI8ThMH7fVpsLGwOCGYV5Tvv2zOIBCoNqGv7aCPT7enXBoT8F3vkaotWdXh4FbwvJQkmqCB-iFeCi_gxV6VspDaEfGXSS2tVVhvCXP4Y19YYAGF-idTbiJ-WTwO0RMqL36zrtLQJHV_35Y1vfmwA9X1uY3zjpQlq8E89U8b564n5KG_eBrgBNiIa6G0cKfQVH6aOAQ0mUvo_DFl4S5wFYqUDzdRTYbsV8tZG_HNRrWNcIi7JnLSjHaJ78czDoSm2FkcYdE_nr1lYL_XeUerHKDGU7amPNZvf2fFjAFr345YI-NTHGCaKaKTGVprnWPHse3TeUg6CaqS2hXjLdq3_DSsYE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 10:34:52.591 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 10:34:52.597 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:34:52.597 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:34:52.597 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:34:52.597 -06:00 [DBG] No PKCE used.
2018-07-27 10:34:52.597 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:34:52.597 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:37:12.657 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:37:12.657 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:37:12.657 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:37:12.657 -06:00 [DBG] No PKCE used.
2018-07-27 10:37:12.658 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:37:12.658 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:37:19.808 -06:00 [DBG] Augmenting SignInContext
2018-07-27 10:37:19.808 -06:00 [DBG] Adding idp claim with value: local
2018-07-27 10:37:19.808 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-27 10:37:19.808 -06:00 [DBG] Adding auth_time claim with value: 1532709439
2018-07-27 10:37:19.809 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 10:37:19.809 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFJR570AFJ1:00000002",
  "TimeStamp": "2018-07-27T16:37:19Z",
  "ProcessId": 35867,
  "LocalIpAddress": "127.0.0.1:5004",
  "RemoteIpAddress": "127.0.0.1"
}
2018-07-27 10:37:19.814 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:37:19.814 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:37:19.814 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 10:37:19.814 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 10:37:19.814 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 10:37:19.814 -06:00 [DBG] Start authorize callback request
2018-07-27 10:37:19.814 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 10:37:19.814 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:37:19.814 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:37:19.814 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:37:19.814 -06:00 [DBG] No PKCE used.
2018-07-27 10:37:19.814 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:37:19.815 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdAkVmVmRCEtluzvdhuAlRv0SffF-nw-2MzfbtA6PTI8ThMH7fVpsLGwOCGYV5Tvv2zOIBCoNqGv7aCPT7enXBoT8F3vkaotWdXh4FbwvJQkmqCB-iFeCi_gxV6VspDaEfGXSS2tVVhvCXP4Y19YYAGF-idTbiJ-WTwO0RMqL36zrtLQJHV_35Y1vfmwA9X1uY3zjpQlq8E89U8b564n5KG_eBrgBNiIa6G0cKfQVH6aOAQ0mUvo_DFl4S5wFYqUDzdRTYbsV8tZG_HNRrWNcIi7JnLSjHaJ78czDoSm2FkcYdE_nr1lYL_XeUerHKDGU7amPNZvf2fFjAFr345YI-NTHGCaKaKTGVprnWPHse3TeUg6CaqS2hXjLdq3_DSsYE",
  "Nonce": "636683060925864960.NWEyMTlhMDgtNjg2Ny00ZjAwLWExYjMtNjRlZmZlNzgzMmRiNjFjZTRmMDItM2FiZi00YmZiLTk1ZDAtNDhhMjE4YWFmMDk5",
  "SessionId": "61e121f3316a1b65aa956ea7428daf02",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683060925864960.NWEyMTlhMDgtNjg2Ny00ZjAwLWExYjMtNjRlZmZlNzgzMmRiNjFjZTRmMDItM2FiZi00YmZiLTk1ZDAtNDhhMjE4YWFmMDk5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdAkVmVmRCEtluzvdhuAlRv0SffF-nw-2MzfbtA6PTI8ThMH7fVpsLGwOCGYV5Tvv2zOIBCoNqGv7aCPT7enXBoT8F3vkaotWdXh4FbwvJQkmqCB-iFeCi_gxV6VspDaEfGXSS2tVVhvCXP4Y19YYAGF-idTbiJ-WTwO0RMqL36zrtLQJHV_35Y1vfmwA9X1uY3zjpQlq8E89U8b564n5KG_eBrgBNiIa6G0cKfQVH6aOAQ0mUvo_DFl4S5wFYqUDzdRTYbsV8tZG_HNRrWNcIi7JnLSjHaJ78czDoSm2FkcYdE_nr1lYL_XeUerHKDGU7amPNZvf2fFjAFr345YI-NTHGCaKaKTGVprnWPHse3TeUg6CaqS2hXjLdq3_DSsYE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 10:37:19.816 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 10:37:19.816 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 10:37:19.816 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 10:37:19.819 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:37:19.819 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:37:19.819 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:37:19.819 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:37:19.819 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:37:19.819 -06:00 [DBG] No PKCE used.
2018-07-27 10:37:19.819 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:37:19.819 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:37:23.065 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:37:23.065 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:37:23.065 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:37:23.065 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:37:23.065 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:37:23.065 -06:00 [DBG] No PKCE used.
2018-07-27 10:37:23.065 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:37:23.068 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:37:23.068 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:37:23.068 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 10:37:23.068 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 10:37:23.068 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 10:37:23.069 -06:00 [DBG] Start authorize callback request
2018-07-27 10:37:23.069 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 10:37:23.069 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:37:23.069 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:37:23.069 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:37:23.069 -06:00 [DBG] No PKCE used.
2018-07-27 10:37:23.069 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:37:23.069 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdAkVmVmRCEtluzvdhuAlRv0SffF-nw-2MzfbtA6PTI8ThMH7fVpsLGwOCGYV5Tvv2zOIBCoNqGv7aCPT7enXBoT8F3vkaotWdXh4FbwvJQkmqCB-iFeCi_gxV6VspDaEfGXSS2tVVhvCXP4Y19YYAGF-idTbiJ-WTwO0RMqL36zrtLQJHV_35Y1vfmwA9X1uY3zjpQlq8E89U8b564n5KG_eBrgBNiIa6G0cKfQVH6aOAQ0mUvo_DFl4S5wFYqUDzdRTYbsV8tZG_HNRrWNcIi7JnLSjHaJ78czDoSm2FkcYdE_nr1lYL_XeUerHKDGU7amPNZvf2fFjAFr345YI-NTHGCaKaKTGVprnWPHse3TeUg6CaqS2hXjLdq3_DSsYE",
  "Nonce": "636683060925864960.NWEyMTlhMDgtNjg2Ny00ZjAwLWExYjMtNjRlZmZlNzgzMmRiNjFjZTRmMDItM2FiZi00YmZiLTk1ZDAtNDhhMjE4YWFmMDk5",
  "SessionId": "61e121f3316a1b65aa956ea7428daf02",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683060925864960.NWEyMTlhMDgtNjg2Ny00ZjAwLWExYjMtNjRlZmZlNzgzMmRiNjFjZTRmMDItM2FiZi00YmZiLTk1ZDAtNDhhMjE4YWFmMDk5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdAkVmVmRCEtluzvdhuAlRv0SffF-nw-2MzfbtA6PTI8ThMH7fVpsLGwOCGYV5Tvv2zOIBCoNqGv7aCPT7enXBoT8F3vkaotWdXh4FbwvJQkmqCB-iFeCi_gxV6VspDaEfGXSS2tVVhvCXP4Y19YYAGF-idTbiJ-WTwO0RMqL36zrtLQJHV_35Y1vfmwA9X1uY3zjpQlq8E89U8b564n5KG_eBrgBNiIa6G0cKfQVH6aOAQ0mUvo_DFl4S5wFYqUDzdRTYbsV8tZG_HNRrWNcIi7JnLSjHaJ78czDoSm2FkcYdE_nr1lYL_XeUerHKDGU7amPNZvf2fFjAFr345YI-NTHGCaKaKTGVprnWPHse3TeUg6CaqS2hXjLdq3_DSsYE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 10:37:23.070 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 10:37:23.070 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 10:37:23.070 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 10:37:23.070 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 10:37:23.071 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 10:37:23.075 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 10:37:23.075 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 10:37:23.075 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 10:37:23.087 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****76sA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****db63"
    }
  ],
  "ActivityId": "0HLFJR570AFJ1:00000006",
  "TimeStamp": "2018-07-27T16:37:23Z",
  "ProcessId": 35867,
  "LocalIpAddress": "127.0.0.1:5004",
  "RemoteIpAddress": "127.0.0.1"
}
2018-07-27 10:37:23.087 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdAkVmVmRCEtluzvdhuAlRv0SffF-nw-2MzfbtA6PTI8ThMH7fVpsLGwOCGYV5Tvv2zOIBCoNqGv7aCPT7enXBoT8F3vkaotWdXh4FbwvJQkmqCB-iFeCi_gxV6VspDaEfGXSS2tVVhvCXP4Y19YYAGF-idTbiJ-WTwO0RMqL36zrtLQJHV_35Y1vfmwA9X1uY3zjpQlq8E89U8b564n5KG_eBrgBNiIa6G0cKfQVH6aOAQ0mUvo_DFl4S5wFYqUDzdRTYbsV8tZG_HNRrWNcIi7JnLSjHaJ78czDoSm2FkcYdE_nr1lYL_XeUerHKDGU7amPNZvf2fFjAFr345YI-NTHGCaKaKTGVprnWPHse3TeUg6CaqS2hXjLdq3_DSsYE",
  "Scope": "openid profile business email"
}
2018-07-27 10:37:23.087 -06:00 [DBG] Augmenting SignInContext
2018-07-27 10:37:23.087 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 10:37:23.138 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 10:37:23.139 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 10:37:23.139 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 10:37:23.139 -06:00 [DBG] Start token request.
2018-07-27 10:37:23.139 -06:00 [DBG] Start client validation
2018-07-27 10:37:23.139 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 10:37:23.139 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 10:37:23.139 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 10:37:23.139 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 10:37:23.139 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:37:23.139 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 10:37:23.139 -06:00 [DBG] Client validation success
2018-07-27 10:37:23.139 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFJR570AFJ2:00000001",
  "TimeStamp": "2018-07-27T16:37:23Z",
  "ProcessId": 35867,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 10:37:23.139 -06:00 [DBG] Start token request validation
2018-07-27 10:37:23.139 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 10:37:23.147 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 10:37:23.147 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "a4557311b051476f837b6f3393830486efc0d894aa24794f6ef196c6cc9cdb63",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "a4557311b051476f837b6f3393830486efc0d894aa24794f6ef196c6cc9cdb63",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 10:37:23.147 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:37:23.147 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 10:37:23.147 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 10:37:23.160 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:37:23.160 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 10:37:23.160 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 10:37:23.172 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****dBXA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****H46w"
    }
  ],
  "ActivityId": "0HLFJR570AFJ2:00000001",
  "TimeStamp": "2018-07-27T16:37:23Z",
  "ProcessId": 35867,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 10:37:23.172 -06:00 [DBG] Token request success.
2018-07-27 10:37:23.175 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 10:37:23.176 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 10:37:23.176 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 10:37:23.176 -06:00 [DBG] Start userinfo request
2018-07-27 10:37:23.176 -06:00 [DBG] Bearer token found in header
2018-07-27 10:37:23.178 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:37:23.178 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:37:23.180 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 10:37:23.180 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532709443,
    "exp": 1532713043,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532709439,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-27 10:37:23.181 -06:00 [DBG] Creating userinfo response
2018-07-27 10:37:23.181 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 10:37:23.181 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 10:37:23.181 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-27 10:37:23.181 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 10:37:23.182 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-27 10:37:23.183 -06:00 [DBG] End userinfo request
2018-07-27 10:56:24.071 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 10:56:24.071 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 10:56:24.071 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 10:56:24.071 -06:00 [DBG] Start authorize request
2018-07-27 10:56:24.071 -06:00 [DBG] No user present in authorize request
2018-07-27 10:56:24.071 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:56:24.071 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:56:24.071 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:56:24.071 -06:00 [DBG] No PKCE used.
2018-07-27 10:56:24.072 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:56:24.072 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd0ahGmwgvoPMjE_iCikzbACIhbq1DFgyqEqEfockpNrc4TGe4qyT0mUPN6ZtOH483wGnLdApDDDVw6Id0PG5fQESCZsDBfdjAXo2asWI2XE-84ptRZLlUIbSOo7XDYmrktvaZ56xFowJuZJXHkXEBTmZHFr-D-CS1Z9sqGAw79aXxIqe0pWe7ChTJKFqqCzpWvIa_gWVW7Vtt7Xq_MvvxfnB5Y7-QdUaJW2NALpaeQ9rSyqtjzDeHpz4yUVZPoFjQJfjmnN0m4SwLfMtNm4mPVC_r7QGAFwZ2fTkEY5fUcCxwNbzAZk1MZeVEjg2cCbtwLTR4tvRxk85gCUaJ8e_-0_emGeB3NCroThuukipDKRhR7FJel40MtaR7INYAHP4o",
  "Nonce": "636683073836707110.ODJiODU4NmUtYTMyNi00MWQ1LWFkNmYtYWFlZWEwYjFmZTM0ZWFiOTYwOWEtMTRhOS00MDM2LTg3MWQtODQzNzY0OThmY2Iw",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683073836707110.ODJiODU4NmUtYTMyNi00MWQ1LWFkNmYtYWFlZWEwYjFmZTM0ZWFiOTYwOWEtMTRhOS00MDM2LTg3MWQtODQzNzY0OThmY2Iw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd0ahGmwgvoPMjE_iCikzbACIhbq1DFgyqEqEfockpNrc4TGe4qyT0mUPN6ZtOH483wGnLdApDDDVw6Id0PG5fQESCZsDBfdjAXo2asWI2XE-84ptRZLlUIbSOo7XDYmrktvaZ56xFowJuZJXHkXEBTmZHFr-D-CS1Z9sqGAw79aXxIqe0pWe7ChTJKFqqCzpWvIa_gWVW7Vtt7Xq_MvvxfnB5Y7-QdUaJW2NALpaeQ9rSyqtjzDeHpz4yUVZPoFjQJfjmnN0m4SwLfMtNm4mPVC_r7QGAFwZ2fTkEY5fUcCxwNbzAZk1MZeVEjg2cCbtwLTR4tvRxk85gCUaJ8e_-0_emGeB3NCroThuukipDKRhR7FJel40MtaR7INYAHP4o",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 10:56:24.072 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 10:56:24.076 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:56:24.076 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:56:24.076 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:56:24.076 -06:00 [DBG] No PKCE used.
2018-07-27 10:56:24.076 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:56:24.076 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:56:37.280 -06:00 [DBG] Augmenting SignInContext
2018-07-27 10:56:37.280 -06:00 [DBG] Adding idp claim with value: local
2018-07-27 10:56:37.280 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-27 10:56:37.280 -06:00 [DBG] Adding auth_time claim with value: 1532710597
2018-07-27 10:56:37.280 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 10:56:37.280 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFJR570AFJ3:00000003",
  "TimeStamp": "2018-07-27T16:56:37Z",
  "ProcessId": 35867,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 10:56:37.346 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:56:37.346 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:56:37.346 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 10:56:37.346 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 10:56:37.346 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 10:56:37.346 -06:00 [DBG] Start authorize callback request
2018-07-27 10:56:37.347 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 10:56:37.347 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:56:37.347 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:56:37.347 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:56:37.347 -06:00 [DBG] No PKCE used.
2018-07-27 10:56:37.347 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:56:37.347 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd0ahGmwgvoPMjE_iCikzbACIhbq1DFgyqEqEfockpNrc4TGe4qyT0mUPN6ZtOH483wGnLdApDDDVw6Id0PG5fQESCZsDBfdjAXo2asWI2XE-84ptRZLlUIbSOo7XDYmrktvaZ56xFowJuZJXHkXEBTmZHFr-D-CS1Z9sqGAw79aXxIqe0pWe7ChTJKFqqCzpWvIa_gWVW7Vtt7Xq_MvvxfnB5Y7-QdUaJW2NALpaeQ9rSyqtjzDeHpz4yUVZPoFjQJfjmnN0m4SwLfMtNm4mPVC_r7QGAFwZ2fTkEY5fUcCxwNbzAZk1MZeVEjg2cCbtwLTR4tvRxk85gCUaJ8e_-0_emGeB3NCroThuukipDKRhR7FJel40MtaR7INYAHP4o",
  "Nonce": "636683073836707110.ODJiODU4NmUtYTMyNi00MWQ1LWFkNmYtYWFlZWEwYjFmZTM0ZWFiOTYwOWEtMTRhOS00MDM2LTg3MWQtODQzNzY0OThmY2Iw",
  "SessionId": "f5f5bfd69d764ba84e2736b87202e450",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683073836707110.ODJiODU4NmUtYTMyNi00MWQ1LWFkNmYtYWFlZWEwYjFmZTM0ZWFiOTYwOWEtMTRhOS00MDM2LTg3MWQtODQzNzY0OThmY2Iw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd0ahGmwgvoPMjE_iCikzbACIhbq1DFgyqEqEfockpNrc4TGe4qyT0mUPN6ZtOH483wGnLdApDDDVw6Id0PG5fQESCZsDBfdjAXo2asWI2XE-84ptRZLlUIbSOo7XDYmrktvaZ56xFowJuZJXHkXEBTmZHFr-D-CS1Z9sqGAw79aXxIqe0pWe7ChTJKFqqCzpWvIa_gWVW7Vtt7Xq_MvvxfnB5Y7-QdUaJW2NALpaeQ9rSyqtjzDeHpz4yUVZPoFjQJfjmnN0m4SwLfMtNm4mPVC_r7QGAFwZ2fTkEY5fUcCxwNbzAZk1MZeVEjg2cCbtwLTR4tvRxk85gCUaJ8e_-0_emGeB3NCroThuukipDKRhR7FJel40MtaR7INYAHP4o",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 10:56:37.348 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 10:56:37.348 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 10:56:37.348 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 10:56:37.352 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:56:37.352 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:56:37.352 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:56:37.352 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:56:37.352 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:56:37.353 -06:00 [DBG] No PKCE used.
2018-07-27 10:56:37.353 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:56:37.353 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:57:15.195 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:57:15.195 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:57:15.196 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:57:15.196 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:57:15.196 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:57:15.196 -06:00 [DBG] No PKCE used.
2018-07-27 10:57:15.196 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:57:15.277 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:57:15.278 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 10:57:15.278 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 10:57:15.278 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 10:57:15.278 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 10:57:15.278 -06:00 [DBG] Start authorize callback request
2018-07-27 10:57:15.278 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 10:57:15.278 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 10:57:15.278 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:57:15.278 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 10:57:15.278 -06:00 [DBG] No PKCE used.
2018-07-27 10:57:15.278 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 10:57:15.278 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd0ahGmwgvoPMjE_iCikzbACIhbq1DFgyqEqEfockpNrc4TGe4qyT0mUPN6ZtOH483wGnLdApDDDVw6Id0PG5fQESCZsDBfdjAXo2asWI2XE-84ptRZLlUIbSOo7XDYmrktvaZ56xFowJuZJXHkXEBTmZHFr-D-CS1Z9sqGAw79aXxIqe0pWe7ChTJKFqqCzpWvIa_gWVW7Vtt7Xq_MvvxfnB5Y7-QdUaJW2NALpaeQ9rSyqtjzDeHpz4yUVZPoFjQJfjmnN0m4SwLfMtNm4mPVC_r7QGAFwZ2fTkEY5fUcCxwNbzAZk1MZeVEjg2cCbtwLTR4tvRxk85gCUaJ8e_-0_emGeB3NCroThuukipDKRhR7FJel40MtaR7INYAHP4o",
  "Nonce": "636683073836707110.ODJiODU4NmUtYTMyNi00MWQ1LWFkNmYtYWFlZWEwYjFmZTM0ZWFiOTYwOWEtMTRhOS00MDM2LTg3MWQtODQzNzY0OThmY2Iw",
  "SessionId": "f5f5bfd69d764ba84e2736b87202e450",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683073836707110.ODJiODU4NmUtYTMyNi00MWQ1LWFkNmYtYWFlZWEwYjFmZTM0ZWFiOTYwOWEtMTRhOS00MDM2LTg3MWQtODQzNzY0OThmY2Iw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd0ahGmwgvoPMjE_iCikzbACIhbq1DFgyqEqEfockpNrc4TGe4qyT0mUPN6ZtOH483wGnLdApDDDVw6Id0PG5fQESCZsDBfdjAXo2asWI2XE-84ptRZLlUIbSOo7XDYmrktvaZ56xFowJuZJXHkXEBTmZHFr-D-CS1Z9sqGAw79aXxIqe0pWe7ChTJKFqqCzpWvIa_gWVW7Vtt7Xq_MvvxfnB5Y7-QdUaJW2NALpaeQ9rSyqtjzDeHpz4yUVZPoFjQJfjmnN0m4SwLfMtNm4mPVC_r7QGAFwZ2fTkEY5fUcCxwNbzAZk1MZeVEjg2cCbtwLTR4tvRxk85gCUaJ8e_-0_emGeB3NCroThuukipDKRhR7FJel40MtaR7INYAHP4o",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 10:57:15.280 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 10:57:15.280 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 10:57:15.280 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 10:57:15.280 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 10:57:15.280 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 10:57:15.285 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 10:57:15.285 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 10:57:15.285 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 10:57:15.296 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****hrxg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****bae5"
    }
  ],
  "ActivityId": "0HLFJR570AFJ3:00000007",
  "TimeStamp": "2018-07-27T16:57:15Z",
  "ProcessId": 35867,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 10:57:15.297 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd0ahGmwgvoPMjE_iCikzbACIhbq1DFgyqEqEfockpNrc4TGe4qyT0mUPN6ZtOH483wGnLdApDDDVw6Id0PG5fQESCZsDBfdjAXo2asWI2XE-84ptRZLlUIbSOo7XDYmrktvaZ56xFowJuZJXHkXEBTmZHFr-D-CS1Z9sqGAw79aXxIqe0pWe7ChTJKFqqCzpWvIa_gWVW7Vtt7Xq_MvvxfnB5Y7-QdUaJW2NALpaeQ9rSyqtjzDeHpz4yUVZPoFjQJfjmnN0m4SwLfMtNm4mPVC_r7QGAFwZ2fTkEY5fUcCxwNbzAZk1MZeVEjg2cCbtwLTR4tvRxk85gCUaJ8e_-0_emGeB3NCroThuukipDKRhR7FJel40MtaR7INYAHP4o",
  "Scope": "openid profile business email"
}
2018-07-27 10:57:15.297 -06:00 [DBG] Augmenting SignInContext
2018-07-27 10:57:15.297 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 10:57:15.328 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 10:57:15.328 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 10:57:15.328 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 10:57:15.328 -06:00 [DBG] Start token request.
2018-07-27 10:57:15.328 -06:00 [DBG] Start client validation
2018-07-27 10:57:15.328 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 10:57:15.329 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 10:57:15.329 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 10:57:15.329 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 10:57:15.329 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:57:15.329 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 10:57:15.329 -06:00 [DBG] Client validation success
2018-07-27 10:57:15.329 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFJR570AFJ4:00000001",
  "TimeStamp": "2018-07-27T16:57:15Z",
  "ProcessId": 35867,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 10:57:15.329 -06:00 [DBG] Start token request validation
2018-07-27 10:57:15.329 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 10:57:15.344 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 10:57:15.344 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "1968fb25ef11bdae44cb8463e4e9f4610cb048d99fc394790db89d467d50bae5",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "1968fb25ef11bdae44cb8463e4e9f4610cb048d99fc394790db89d467d50bae5",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 10:57:15.344 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:57:15.344 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 10:57:15.344 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 10:57:15.357 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:57:15.358 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 10:57:15.358 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 10:57:15.369 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****6ROw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****CDcw"
    }
  ],
  "ActivityId": "0HLFJR570AFJ4:00000001",
  "TimeStamp": "2018-07-27T16:57:15Z",
  "ProcessId": 35867,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 10:57:15.369 -06:00 [DBG] Token request success.
2018-07-27 10:57:15.371 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 10:57:15.372 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 10:57:15.372 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 10:57:15.372 -06:00 [DBG] Start userinfo request
2018-07-27 10:57:15.372 -06:00 [DBG] Bearer token found in header
2018-07-27 10:57:15.374 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:57:15.374 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 10:57:15.375 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 10:57:15.375 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532710635,
    "exp": 1532714235,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532710597,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-27 10:57:15.375 -06:00 [DBG] Creating userinfo response
2018-07-27 10:57:15.375 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 10:57:15.375 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 10:57:15.375 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-27 10:57:15.375 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 10:57:15.377 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-27 10:57:15.377 -06:00 [DBG] End userinfo request
2018-07-27 11:04:35.618 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 11:04:35.618 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 11:04:35.618 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 11:04:35.618 -06:00 [DBG] Start authorize request
2018-07-27 11:04:35.618 -06:00 [DBG] No user present in authorize request
2018-07-27 11:04:35.618 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 11:04:35.618 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:04:35.618 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 11:04:35.619 -06:00 [DBG] No PKCE used.
2018-07-27 11:04:35.619 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 11:04:35.619 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd0TJHK2HT4dqVRRIMF6nYE99olWwD_RrSfQjN1G4x4NY4phmNQaOc10yLKzECe09zGD3VxmT7md6_XiCiW584NovrwdnqaJtw1zi1JKrSc7BktfUOa2I18eb0YmXyLHqXUToHc6-guZmPEovnEymuEebZI6SExQ4L5UViaXMkOJxJYi34ud0NZR_uqDtghQxdmEKM275UGvrX4pS7te3gO-1HtWI8fTNA12naXqBEo8sH3kisE_HlY_s4rg1iUKHZxcAGTIfygkph_G1jDx7-xEC3pvM0hLze8mh6JUG4NeNEd3lj2a9IlWqgfIxMb4TYIri2im5huyQPAXiwI62UhGDnXGS9l2CkjHQ6sLtO4BoraHm6RtRlTDjsgSScZgBc",
  "Nonce": "636683078756144630.NGFiYTY0MWQtMDU1NS00ZTQyLWI5ZTQtOTE4NmM3NzE4YTQ2MjAzZjg2NzItNTE1Yy00MTViLTg1NjAtZDE5ZWY5MzhjYWU1",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683078756144630.NGFiYTY0MWQtMDU1NS00ZTQyLWI5ZTQtOTE4NmM3NzE4YTQ2MjAzZjg2NzItNTE1Yy00MTViLTg1NjAtZDE5ZWY5MzhjYWU1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd0TJHK2HT4dqVRRIMF6nYE99olWwD_RrSfQjN1G4x4NY4phmNQaOc10yLKzECe09zGD3VxmT7md6_XiCiW584NovrwdnqaJtw1zi1JKrSc7BktfUOa2I18eb0YmXyLHqXUToHc6-guZmPEovnEymuEebZI6SExQ4L5UViaXMkOJxJYi34ud0NZR_uqDtghQxdmEKM275UGvrX4pS7te3gO-1HtWI8fTNA12naXqBEo8sH3kisE_HlY_s4rg1iUKHZxcAGTIfygkph_G1jDx7-xEC3pvM0hLze8mh6JUG4NeNEd3lj2a9IlWqgfIxMb4TYIri2im5huyQPAXiwI62UhGDnXGS9l2CkjHQ6sLtO4BoraHm6RtRlTDjsgSScZgBc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 11:04:35.619 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 11:04:35.622 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 11:04:35.622 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:04:35.622 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 11:04:35.622 -06:00 [DBG] No PKCE used.
2018-07-27 11:04:35.622 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 11:04:35.622 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:04:44.320 -06:00 [DBG] Augmenting SignInContext
2018-07-27 11:04:44.320 -06:00 [DBG] Adding idp claim with value: local
2018-07-27 11:04:44.320 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-27 11:04:44.320 -06:00 [DBG] Adding auth_time claim with value: 1532711084
2018-07-27 11:04:44.321 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 11:04:44.321 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFJR570AFJ5:00000003",
  "TimeStamp": "2018-07-27T17:04:44Z",
  "ProcessId": 35867,
  "LocalIpAddress": "127.0.0.1:5004",
  "RemoteIpAddress": "127.0.0.1"
}
2018-07-27 11:04:44.327 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:04:44.327 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:04:44.328 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 11:04:44.328 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 11:04:44.328 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 11:04:44.328 -06:00 [DBG] Start authorize callback request
2018-07-27 11:04:44.328 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 11:04:44.328 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 11:04:44.328 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:04:44.328 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 11:04:44.328 -06:00 [DBG] No PKCE used.
2018-07-27 11:04:44.328 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 11:04:44.328 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd0TJHK2HT4dqVRRIMF6nYE99olWwD_RrSfQjN1G4x4NY4phmNQaOc10yLKzECe09zGD3VxmT7md6_XiCiW584NovrwdnqaJtw1zi1JKrSc7BktfUOa2I18eb0YmXyLHqXUToHc6-guZmPEovnEymuEebZI6SExQ4L5UViaXMkOJxJYi34ud0NZR_uqDtghQxdmEKM275UGvrX4pS7te3gO-1HtWI8fTNA12naXqBEo8sH3kisE_HlY_s4rg1iUKHZxcAGTIfygkph_G1jDx7-xEC3pvM0hLze8mh6JUG4NeNEd3lj2a9IlWqgfIxMb4TYIri2im5huyQPAXiwI62UhGDnXGS9l2CkjHQ6sLtO4BoraHm6RtRlTDjsgSScZgBc",
  "Nonce": "636683078756144630.NGFiYTY0MWQtMDU1NS00ZTQyLWI5ZTQtOTE4NmM3NzE4YTQ2MjAzZjg2NzItNTE1Yy00MTViLTg1NjAtZDE5ZWY5MzhjYWU1",
  "SessionId": "f4df84679ceddfdabad9a511ef690ba9",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683078756144630.NGFiYTY0MWQtMDU1NS00ZTQyLWI5ZTQtOTE4NmM3NzE4YTQ2MjAzZjg2NzItNTE1Yy00MTViLTg1NjAtZDE5ZWY5MzhjYWU1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd0TJHK2HT4dqVRRIMF6nYE99olWwD_RrSfQjN1G4x4NY4phmNQaOc10yLKzECe09zGD3VxmT7md6_XiCiW584NovrwdnqaJtw1zi1JKrSc7BktfUOa2I18eb0YmXyLHqXUToHc6-guZmPEovnEymuEebZI6SExQ4L5UViaXMkOJxJYi34ud0NZR_uqDtghQxdmEKM275UGvrX4pS7te3gO-1HtWI8fTNA12naXqBEo8sH3kisE_HlY_s4rg1iUKHZxcAGTIfygkph_G1jDx7-xEC3pvM0hLze8mh6JUG4NeNEd3lj2a9IlWqgfIxMb4TYIri2im5huyQPAXiwI62UhGDnXGS9l2CkjHQ6sLtO4BoraHm6RtRlTDjsgSScZgBc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 11:04:44.329 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 11:04:44.329 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 11:04:44.329 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 11:04:44.342 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:04:44.342 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:04:44.342 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 11:04:44.342 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:04:44.342 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 11:04:44.342 -06:00 [DBG] No PKCE used.
2018-07-27 11:04:44.342 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 11:04:44.343 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:04:48.269 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:04:48.269 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:04:48.269 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 11:04:48.269 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:04:48.269 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 11:04:48.269 -06:00 [DBG] No PKCE used.
2018-07-27 11:04:48.269 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 11:04:48.272 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:04:48.272 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:04:48.272 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 11:04:48.272 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 11:04:48.272 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 11:04:48.273 -06:00 [DBG] Start authorize callback request
2018-07-27 11:04:48.273 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 11:04:48.273 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 11:04:48.273 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:04:48.273 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 11:04:48.273 -06:00 [DBG] No PKCE used.
2018-07-27 11:04:48.273 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 11:04:48.273 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd0TJHK2HT4dqVRRIMF6nYE99olWwD_RrSfQjN1G4x4NY4phmNQaOc10yLKzECe09zGD3VxmT7md6_XiCiW584NovrwdnqaJtw1zi1JKrSc7BktfUOa2I18eb0YmXyLHqXUToHc6-guZmPEovnEymuEebZI6SExQ4L5UViaXMkOJxJYi34ud0NZR_uqDtghQxdmEKM275UGvrX4pS7te3gO-1HtWI8fTNA12naXqBEo8sH3kisE_HlY_s4rg1iUKHZxcAGTIfygkph_G1jDx7-xEC3pvM0hLze8mh6JUG4NeNEd3lj2a9IlWqgfIxMb4TYIri2im5huyQPAXiwI62UhGDnXGS9l2CkjHQ6sLtO4BoraHm6RtRlTDjsgSScZgBc",
  "Nonce": "636683078756144630.NGFiYTY0MWQtMDU1NS00ZTQyLWI5ZTQtOTE4NmM3NzE4YTQ2MjAzZjg2NzItNTE1Yy00MTViLTg1NjAtZDE5ZWY5MzhjYWU1",
  "SessionId": "f4df84679ceddfdabad9a511ef690ba9",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683078756144630.NGFiYTY0MWQtMDU1NS00ZTQyLWI5ZTQtOTE4NmM3NzE4YTQ2MjAzZjg2NzItNTE1Yy00MTViLTg1NjAtZDE5ZWY5MzhjYWU1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd0TJHK2HT4dqVRRIMF6nYE99olWwD_RrSfQjN1G4x4NY4phmNQaOc10yLKzECe09zGD3VxmT7md6_XiCiW584NovrwdnqaJtw1zi1JKrSc7BktfUOa2I18eb0YmXyLHqXUToHc6-guZmPEovnEymuEebZI6SExQ4L5UViaXMkOJxJYi34ud0NZR_uqDtghQxdmEKM275UGvrX4pS7te3gO-1HtWI8fTNA12naXqBEo8sH3kisE_HlY_s4rg1iUKHZxcAGTIfygkph_G1jDx7-xEC3pvM0hLze8mh6JUG4NeNEd3lj2a9IlWqgfIxMb4TYIri2im5huyQPAXiwI62UhGDnXGS9l2CkjHQ6sLtO4BoraHm6RtRlTDjsgSScZgBc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 11:04:48.275 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 11:04:48.275 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 11:04:48.275 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 11:04:48.275 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 11:04:48.275 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 11:04:48.279 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 11:04:48.279 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 11:04:48.279 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 11:04:48.291 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****SKCA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****145b"
    }
  ],
  "ActivityId": "0HLFJR570AFJ5:00000007",
  "TimeStamp": "2018-07-27T17:04:48Z",
  "ProcessId": 35867,
  "LocalIpAddress": "127.0.0.1:5004",
  "RemoteIpAddress": "127.0.0.1"
}
2018-07-27 11:04:48.291 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd0TJHK2HT4dqVRRIMF6nYE99olWwD_RrSfQjN1G4x4NY4phmNQaOc10yLKzECe09zGD3VxmT7md6_XiCiW584NovrwdnqaJtw1zi1JKrSc7BktfUOa2I18eb0YmXyLHqXUToHc6-guZmPEovnEymuEebZI6SExQ4L5UViaXMkOJxJYi34ud0NZR_uqDtghQxdmEKM275UGvrX4pS7te3gO-1HtWI8fTNA12naXqBEo8sH3kisE_HlY_s4rg1iUKHZxcAGTIfygkph_G1jDx7-xEC3pvM0hLze8mh6JUG4NeNEd3lj2a9IlWqgfIxMb4TYIri2im5huyQPAXiwI62UhGDnXGS9l2CkjHQ6sLtO4BoraHm6RtRlTDjsgSScZgBc",
  "Scope": "openid profile business email"
}
2018-07-27 11:04:48.291 -06:00 [DBG] Augmenting SignInContext
2018-07-27 11:04:48.291 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 11:04:48.331 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 11:04:48.331 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 11:04:48.331 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 11:04:48.331 -06:00 [DBG] Start token request.
2018-07-27 11:04:48.331 -06:00 [DBG] Start client validation
2018-07-27 11:04:48.331 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 11:04:48.331 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 11:04:48.331 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 11:04:48.331 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 11:04:48.331 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:04:48.332 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 11:04:48.332 -06:00 [DBG] Client validation success
2018-07-27 11:04:48.332 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFJR570AFJ6:00000001",
  "TimeStamp": "2018-07-27T17:04:48Z",
  "ProcessId": 35867,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 11:04:48.332 -06:00 [DBG] Start token request validation
2018-07-27 11:04:48.332 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 11:04:48.341 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 11:04:48.341 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "1f46eb8d5eec0026174958e6b428d69e32111604e8031ff562e70d8362fe145b",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "1f46eb8d5eec0026174958e6b428d69e32111604e8031ff562e70d8362fe145b",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 11:04:48.341 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:04:48.341 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 11:04:48.341 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 11:04:48.354 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:04:48.354 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 11:04:48.354 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 11:04:48.366 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****_Suw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****I12Q"
    }
  ],
  "ActivityId": "0HLFJR570AFJ6:00000001",
  "TimeStamp": "2018-07-27T17:04:48Z",
  "ProcessId": 35867,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 11:04:48.366 -06:00 [DBG] Token request success.
2018-07-27 11:04:48.368 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 11:04:48.368 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 11:04:48.368 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 11:04:48.368 -06:00 [DBG] Start userinfo request
2018-07-27 11:04:48.368 -06:00 [DBG] Bearer token found in header
2018-07-27 11:04:48.371 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:04:48.371 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:04:48.373 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 11:04:48.373 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532711088,
    "exp": 1532714688,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532711084,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-27 11:04:48.373 -06:00 [DBG] Creating userinfo response
2018-07-27 11:04:48.373 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 11:04:48.373 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 11:04:48.373 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-27 11:04:48.373 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 11:04:48.375 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-27 11:04:48.376 -06:00 [DBG] End userinfo request
2018-07-27 11:05:29.440 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 11:05:29.440 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 11:05:29.440 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 11:05:29.440 -06:00 [DBG] Start authorize request
2018-07-27 11:05:29.440 -06:00 [DBG] No user present in authorize request
2018-07-27 11:05:29.440 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 11:05:29.440 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:05:29.440 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 11:05:29.440 -06:00 [DBG] No PKCE used.
2018-07-27 11:05:29.440 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 11:05:29.440 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfqj2ExfKwhpV3LbkAY8cKYmSrWLaMsvz3t4wxgHt3ZCQGphnbaiJnXgrlBM_Q2j8MKJch21wFmiyTGajM9RyyxjAXExSnIhzCzZdNunIETdMLjhR6H0ItwLHzs2ReouRg3pRtQdjxXvf_4LgZhNyPNjJoxzE2YgXXXBt51o-g-hUoDb8gphJFnpFmsXUCWCh8wRz66G69YWcvp5Gk0xeh6Ko7BRauwIDko6T376L75GzAuq4UMk4-ZIWSNElMG6H593JwhHGSO85AjzjcgDFtUBu48Nxg9Q4szf_JRwh-tewEfGB8CTtGR_oJUQLdB0jzRChSct2Dx2tmC3uR450M2m30LSA5PJT-KsYReUZgXUIutjv0VlwcbTh0bKDqptiI",
  "Nonce": "636683079294372890.MTMyYWJjNjItNTZjNS00YjgyLWIzZGItYmM2YjM0MDM1OTBhNjQ0MjUyYzMtMTMxMi00MDY1LWJkODItOTMzYjA3M2JjNDcz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683079294372890.MTMyYWJjNjItNTZjNS00YjgyLWIzZGItYmM2YjM0MDM1OTBhNjQ0MjUyYzMtMTMxMi00MDY1LWJkODItOTMzYjA3M2JjNDcz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfqj2ExfKwhpV3LbkAY8cKYmSrWLaMsvz3t4wxgHt3ZCQGphnbaiJnXgrlBM_Q2j8MKJch21wFmiyTGajM9RyyxjAXExSnIhzCzZdNunIETdMLjhR6H0ItwLHzs2ReouRg3pRtQdjxXvf_4LgZhNyPNjJoxzE2YgXXXBt51o-g-hUoDb8gphJFnpFmsXUCWCh8wRz66G69YWcvp5Gk0xeh6Ko7BRauwIDko6T376L75GzAuq4UMk4-ZIWSNElMG6H593JwhHGSO85AjzjcgDFtUBu48Nxg9Q4szf_JRwh-tewEfGB8CTtGR_oJUQLdB0jzRChSct2Dx2tmC3uR450M2m30LSA5PJT-KsYReUZgXUIutjv0VlwcbTh0bKDqptiI",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 11:05:29.440 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 11:05:29.443 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 11:05:29.443 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:05:29.443 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 11:05:29.443 -06:00 [DBG] No PKCE used.
2018-07-27 11:05:29.443 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 11:05:29.444 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:05:39.104 -06:00 [DBG] Augmenting SignInContext
2018-07-27 11:05:39.104 -06:00 [DBG] Adding idp claim with value: local
2018-07-27 11:05:39.104 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-27 11:05:39.104 -06:00 [DBG] Adding auth_time claim with value: 1532711139
2018-07-27 11:05:39.104 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 11:05:39.104 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFJR570AFJ5:0000000A",
  "TimeStamp": "2018-07-27T17:05:39Z",
  "ProcessId": 35867,
  "LocalIpAddress": "127.0.0.1:5004",
  "RemoteIpAddress": "127.0.0.1"
}
2018-07-27 11:05:39.107 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:05:39.108 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:05:39.108 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 11:05:39.108 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 11:05:39.108 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 11:05:39.108 -06:00 [DBG] Start authorize callback request
2018-07-27 11:05:39.108 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 11:05:39.108 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 11:05:39.108 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:05:39.108 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 11:05:39.108 -06:00 [DBG] No PKCE used.
2018-07-27 11:05:39.108 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 11:05:39.108 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfqj2ExfKwhpV3LbkAY8cKYmSrWLaMsvz3t4wxgHt3ZCQGphnbaiJnXgrlBM_Q2j8MKJch21wFmiyTGajM9RyyxjAXExSnIhzCzZdNunIETdMLjhR6H0ItwLHzs2ReouRg3pRtQdjxXvf_4LgZhNyPNjJoxzE2YgXXXBt51o-g-hUoDb8gphJFnpFmsXUCWCh8wRz66G69YWcvp5Gk0xeh6Ko7BRauwIDko6T376L75GzAuq4UMk4-ZIWSNElMG6H593JwhHGSO85AjzjcgDFtUBu48Nxg9Q4szf_JRwh-tewEfGB8CTtGR_oJUQLdB0jzRChSct2Dx2tmC3uR450M2m30LSA5PJT-KsYReUZgXUIutjv0VlwcbTh0bKDqptiI",
  "Nonce": "636683079294372890.MTMyYWJjNjItNTZjNS00YjgyLWIzZGItYmM2YjM0MDM1OTBhNjQ0MjUyYzMtMTMxMi00MDY1LWJkODItOTMzYjA3M2JjNDcz",
  "SessionId": "10b8d96470abcb5a2327404a96055ed6",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683079294372890.MTMyYWJjNjItNTZjNS00YjgyLWIzZGItYmM2YjM0MDM1OTBhNjQ0MjUyYzMtMTMxMi00MDY1LWJkODItOTMzYjA3M2JjNDcz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfqj2ExfKwhpV3LbkAY8cKYmSrWLaMsvz3t4wxgHt3ZCQGphnbaiJnXgrlBM_Q2j8MKJch21wFmiyTGajM9RyyxjAXExSnIhzCzZdNunIETdMLjhR6H0ItwLHzs2ReouRg3pRtQdjxXvf_4LgZhNyPNjJoxzE2YgXXXBt51o-g-hUoDb8gphJFnpFmsXUCWCh8wRz66G69YWcvp5Gk0xeh6Ko7BRauwIDko6T376L75GzAuq4UMk4-ZIWSNElMG6H593JwhHGSO85AjzjcgDFtUBu48Nxg9Q4szf_JRwh-tewEfGB8CTtGR_oJUQLdB0jzRChSct2Dx2tmC3uR450M2m30LSA5PJT-KsYReUZgXUIutjv0VlwcbTh0bKDqptiI",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 11:05:39.110 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 11:05:39.110 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 11:05:39.110 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 11:05:39.113 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:05:39.113 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:05:39.113 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 11:05:39.113 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:05:39.113 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 11:05:39.113 -06:00 [DBG] No PKCE used.
2018-07-27 11:05:39.113 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 11:05:39.113 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:05:45.960 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:05:45.960 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:05:45.961 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 11:05:45.961 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:05:45.961 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 11:05:45.961 -06:00 [DBG] No PKCE used.
2018-07-27 11:05:45.961 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 11:05:45.964 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:05:45.964 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:05:45.964 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 11:05:45.964 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 11:05:45.964 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 11:05:45.964 -06:00 [DBG] Start authorize callback request
2018-07-27 11:05:45.964 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 11:05:45.964 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 11:05:45.964 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:05:45.964 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 11:05:45.964 -06:00 [DBG] No PKCE used.
2018-07-27 11:05:45.964 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 11:05:45.964 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfqj2ExfKwhpV3LbkAY8cKYmSrWLaMsvz3t4wxgHt3ZCQGphnbaiJnXgrlBM_Q2j8MKJch21wFmiyTGajM9RyyxjAXExSnIhzCzZdNunIETdMLjhR6H0ItwLHzs2ReouRg3pRtQdjxXvf_4LgZhNyPNjJoxzE2YgXXXBt51o-g-hUoDb8gphJFnpFmsXUCWCh8wRz66G69YWcvp5Gk0xeh6Ko7BRauwIDko6T376L75GzAuq4UMk4-ZIWSNElMG6H593JwhHGSO85AjzjcgDFtUBu48Nxg9Q4szf_JRwh-tewEfGB8CTtGR_oJUQLdB0jzRChSct2Dx2tmC3uR450M2m30LSA5PJT-KsYReUZgXUIutjv0VlwcbTh0bKDqptiI",
  "Nonce": "636683079294372890.MTMyYWJjNjItNTZjNS00YjgyLWIzZGItYmM2YjM0MDM1OTBhNjQ0MjUyYzMtMTMxMi00MDY1LWJkODItOTMzYjA3M2JjNDcz",
  "SessionId": "10b8d96470abcb5a2327404a96055ed6",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683079294372890.MTMyYWJjNjItNTZjNS00YjgyLWIzZGItYmM2YjM0MDM1OTBhNjQ0MjUyYzMtMTMxMi00MDY1LWJkODItOTMzYjA3M2JjNDcz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfqj2ExfKwhpV3LbkAY8cKYmSrWLaMsvz3t4wxgHt3ZCQGphnbaiJnXgrlBM_Q2j8MKJch21wFmiyTGajM9RyyxjAXExSnIhzCzZdNunIETdMLjhR6H0ItwLHzs2ReouRg3pRtQdjxXvf_4LgZhNyPNjJoxzE2YgXXXBt51o-g-hUoDb8gphJFnpFmsXUCWCh8wRz66G69YWcvp5Gk0xeh6Ko7BRauwIDko6T376L75GzAuq4UMk4-ZIWSNElMG6H593JwhHGSO85AjzjcgDFtUBu48Nxg9Q4szf_JRwh-tewEfGB8CTtGR_oJUQLdB0jzRChSct2Dx2tmC3uR450M2m30LSA5PJT-KsYReUZgXUIutjv0VlwcbTh0bKDqptiI",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 11:05:45.966 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 11:05:45.966 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 11:05:45.966 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 11:05:45.966 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 11:05:45.966 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 11:05:45.971 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 11:05:45.971 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 11:05:45.971 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 11:05:45.982 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****wBsA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****eb4d"
    }
  ],
  "ActivityId": "0HLFJR570AFJ5:0000000E",
  "TimeStamp": "2018-07-27T17:05:45Z",
  "ProcessId": 35867,
  "LocalIpAddress": "127.0.0.1:5004",
  "RemoteIpAddress": "127.0.0.1"
}
2018-07-27 11:05:45.982 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfqj2ExfKwhpV3LbkAY8cKYmSrWLaMsvz3t4wxgHt3ZCQGphnbaiJnXgrlBM_Q2j8MKJch21wFmiyTGajM9RyyxjAXExSnIhzCzZdNunIETdMLjhR6H0ItwLHzs2ReouRg3pRtQdjxXvf_4LgZhNyPNjJoxzE2YgXXXBt51o-g-hUoDb8gphJFnpFmsXUCWCh8wRz66G69YWcvp5Gk0xeh6Ko7BRauwIDko6T376L75GzAuq4UMk4-ZIWSNElMG6H593JwhHGSO85AjzjcgDFtUBu48Nxg9Q4szf_JRwh-tewEfGB8CTtGR_oJUQLdB0jzRChSct2Dx2tmC3uR450M2m30LSA5PJT-KsYReUZgXUIutjv0VlwcbTh0bKDqptiI",
  "Scope": "openid profile business email"
}
2018-07-27 11:05:45.983 -06:00 [DBG] Augmenting SignInContext
2018-07-27 11:05:45.983 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 11:05:46.010 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 11:05:46.010 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 11:05:46.010 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 11:05:46.010 -06:00 [DBG] Start token request.
2018-07-27 11:05:46.010 -06:00 [DBG] Start client validation
2018-07-27 11:05:46.010 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 11:05:46.010 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 11:05:46.010 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 11:05:46.010 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 11:05:46.010 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:05:46.010 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 11:05:46.010 -06:00 [DBG] Client validation success
2018-07-27 11:05:46.010 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFJR570AFJ6:00000003",
  "TimeStamp": "2018-07-27T17:05:46Z",
  "ProcessId": 35867,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 11:05:46.011 -06:00 [DBG] Start token request validation
2018-07-27 11:05:46.011 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 11:05:46.022 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 11:05:46.022 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "560ab661033b9ed46f838d0a2467095d236c0c1b199b6ab1010ab531845beb4d",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "560ab661033b9ed46f838d0a2467095d236c0c1b199b6ab1010ab531845beb4d",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 11:05:46.022 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:05:46.022 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 11:05:46.022 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 11:05:46.035 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:05:46.036 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 11:05:46.036 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 11:05:46.047 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****PWSg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Ch5A"
    }
  ],
  "ActivityId": "0HLFJR570AFJ6:00000003",
  "TimeStamp": "2018-07-27T17:05:46Z",
  "ProcessId": 35867,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 11:05:46.047 -06:00 [DBG] Token request success.
2018-07-27 11:05:46.049 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 11:05:46.049 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 11:05:46.049 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 11:05:46.049 -06:00 [DBG] Start userinfo request
2018-07-27 11:05:46.049 -06:00 [DBG] Bearer token found in header
2018-07-27 11:05:46.051 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:05:46.051 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:05:46.052 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 11:05:46.053 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532711146,
    "exp": 1532714746,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532711139,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-27 11:05:46.053 -06:00 [DBG] Creating userinfo response
2018-07-27 11:05:46.053 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 11:05:46.053 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 11:05:46.053 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-27 11:05:46.053 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 11:05:46.054 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-27 11:05:46.054 -06:00 [DBG] End userinfo request
2018-07-27 11:09:29.784 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-27 11:09:29.784 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-27 11:09:29.784 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-27 11:09:29.784 -06:00 [DBG] Start discovery request
2018-07-27 11:09:29.847 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-27 11:09:29.848 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-27 11:09:29.848 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-27 11:09:29.848 -06:00 [DBG] Start key discovery request
2018-07-27 11:09:29.877 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 11:09:29.878 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 11:09:29.878 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 11:09:29.878 -06:00 [DBG] Start authorize request
2018-07-27 11:09:29.878 -06:00 [DBG] No user present in authorize request
2018-07-27 11:09:29.878 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 11:09:29.878 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:09:29.878 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 11:09:29.878 -06:00 [DBG] No PKCE used.
2018-07-27 11:09:29.878 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 11:09:29.878 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdq1MT7NxxS0ZlO9vJqyA6Zw5VUW87cFgRdQbFyTA4Z28-oh4Paiv4VWQe_0HACN8lO701US4zRXSsop-09oL-YBpnZUyP2iqhqHe-UBt71cMysW9HVn79lpbSqOqh3ObfwaRii5LV8wujMaXpbB-yc8ax0HbXYiKcorOb6P7TubYhMdfjupYQxjmgF3i2Z7m2aiK5Hi579DjW6YrwB0r-ahDs20eqAG0XQYA4UO2eZ1DjxvBDMxrL4cbArqw1Ju8M9bB1I3YL3i1jGw5Wg1gBoOngWEgYaRVXTXO9-wiW2OzDMCgzPBCxqSu8rkwj8tUEMGwuBEiylkWP_njvfshU-RsVrfdm2L-LJIYOHyWaG4H85_CyPO07r44AQybZoekM",
  "Nonce": "636683081698623940.NGE3NTZhMmItOGQxYi00MDUwLTk2OGYtNmFiNmFlMGZiNTg2ZGFjYjMxZmMtOWY5Zi00MzYyLTkyYTktMDhjNDYzMDhlYjRk",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683081698623940.NGE3NTZhMmItOGQxYi00MDUwLTk2OGYtNmFiNmFlMGZiNTg2ZGFjYjMxZmMtOWY5Zi00MzYyLTkyYTktMDhjNDYzMDhlYjRk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdq1MT7NxxS0ZlO9vJqyA6Zw5VUW87cFgRdQbFyTA4Z28-oh4Paiv4VWQe_0HACN8lO701US4zRXSsop-09oL-YBpnZUyP2iqhqHe-UBt71cMysW9HVn79lpbSqOqh3ObfwaRii5LV8wujMaXpbB-yc8ax0HbXYiKcorOb6P7TubYhMdfjupYQxjmgF3i2Z7m2aiK5Hi579DjW6YrwB0r-ahDs20eqAG0XQYA4UO2eZ1DjxvBDMxrL4cbArqw1Ju8M9bB1I3YL3i1jGw5Wg1gBoOngWEgYaRVXTXO9-wiW2OzDMCgzPBCxqSu8rkwj8tUEMGwuBEiylkWP_njvfshU-RsVrfdm2L-LJIYOHyWaG4H85_CyPO07r44AQybZoekM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 11:09:29.878 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 11:09:29.881 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 11:09:29.881 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:09:29.881 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 11:09:29.882 -06:00 [DBG] No PKCE used.
2018-07-27 11:09:29.882 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 11:09:29.882 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:09:38.171 -06:00 [DBG] Augmenting SignInContext
2018-07-27 11:09:38.171 -06:00 [DBG] Adding idp claim with value: local
2018-07-27 11:09:38.171 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-27 11:09:38.171 -06:00 [DBG] Adding auth_time claim with value: 1532711378
2018-07-27 11:09:38.171 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 11:09:38.172 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFJR570AFJ8:00000003",
  "TimeStamp": "2018-07-27T17:09:38Z",
  "ProcessId": 35867,
  "LocalIpAddress": "127.0.0.1:5004",
  "RemoteIpAddress": "127.0.0.1"
}
2018-07-27 11:09:38.181 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:09:38.181 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:09:38.181 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 11:09:38.181 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 11:09:38.181 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 11:09:38.181 -06:00 [DBG] Start authorize callback request
2018-07-27 11:09:38.182 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 11:09:38.182 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 11:09:38.182 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:09:38.182 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 11:09:38.182 -06:00 [DBG] No PKCE used.
2018-07-27 11:09:38.182 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 11:09:38.182 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdq1MT7NxxS0ZlO9vJqyA6Zw5VUW87cFgRdQbFyTA4Z28-oh4Paiv4VWQe_0HACN8lO701US4zRXSsop-09oL-YBpnZUyP2iqhqHe-UBt71cMysW9HVn79lpbSqOqh3ObfwaRii5LV8wujMaXpbB-yc8ax0HbXYiKcorOb6P7TubYhMdfjupYQxjmgF3i2Z7m2aiK5Hi579DjW6YrwB0r-ahDs20eqAG0XQYA4UO2eZ1DjxvBDMxrL4cbArqw1Ju8M9bB1I3YL3i1jGw5Wg1gBoOngWEgYaRVXTXO9-wiW2OzDMCgzPBCxqSu8rkwj8tUEMGwuBEiylkWP_njvfshU-RsVrfdm2L-LJIYOHyWaG4H85_CyPO07r44AQybZoekM",
  "Nonce": "636683081698623940.NGE3NTZhMmItOGQxYi00MDUwLTk2OGYtNmFiNmFlMGZiNTg2ZGFjYjMxZmMtOWY5Zi00MzYyLTkyYTktMDhjNDYzMDhlYjRk",
  "SessionId": "add1df004212030cdbfa052e1e06b603",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683081698623940.NGE3NTZhMmItOGQxYi00MDUwLTk2OGYtNmFiNmFlMGZiNTg2ZGFjYjMxZmMtOWY5Zi00MzYyLTkyYTktMDhjNDYzMDhlYjRk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdq1MT7NxxS0ZlO9vJqyA6Zw5VUW87cFgRdQbFyTA4Z28-oh4Paiv4VWQe_0HACN8lO701US4zRXSsop-09oL-YBpnZUyP2iqhqHe-UBt71cMysW9HVn79lpbSqOqh3ObfwaRii5LV8wujMaXpbB-yc8ax0HbXYiKcorOb6P7TubYhMdfjupYQxjmgF3i2Z7m2aiK5Hi579DjW6YrwB0r-ahDs20eqAG0XQYA4UO2eZ1DjxvBDMxrL4cbArqw1Ju8M9bB1I3YL3i1jGw5Wg1gBoOngWEgYaRVXTXO9-wiW2OzDMCgzPBCxqSu8rkwj8tUEMGwuBEiylkWP_njvfshU-RsVrfdm2L-LJIYOHyWaG4H85_CyPO07r44AQybZoekM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 11:09:38.184 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 11:09:38.184 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 11:09:38.184 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 11:09:38.189 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:09:38.189 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:09:38.190 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 11:09:38.190 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:09:38.190 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 11:09:38.190 -06:00 [DBG] No PKCE used.
2018-07-27 11:09:38.190 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 11:09:38.190 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:09:42.192 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:09:42.192 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:09:42.192 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 11:09:42.192 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:09:42.192 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 11:09:42.192 -06:00 [DBG] No PKCE used.
2018-07-27 11:09:42.192 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 11:09:42.198 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:09:42.198 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 11:09:42.198 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 11:09:42.198 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 11:09:42.198 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 11:09:42.198 -06:00 [DBG] Start authorize callback request
2018-07-27 11:09:42.198 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 11:09:42.198 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 11:09:42.198 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:09:42.198 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 11:09:42.198 -06:00 [DBG] No PKCE used.
2018-07-27 11:09:42.199 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 11:09:42.199 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdq1MT7NxxS0ZlO9vJqyA6Zw5VUW87cFgRdQbFyTA4Z28-oh4Paiv4VWQe_0HACN8lO701US4zRXSsop-09oL-YBpnZUyP2iqhqHe-UBt71cMysW9HVn79lpbSqOqh3ObfwaRii5LV8wujMaXpbB-yc8ax0HbXYiKcorOb6P7TubYhMdfjupYQxjmgF3i2Z7m2aiK5Hi579DjW6YrwB0r-ahDs20eqAG0XQYA4UO2eZ1DjxvBDMxrL4cbArqw1Ju8M9bB1I3YL3i1jGw5Wg1gBoOngWEgYaRVXTXO9-wiW2OzDMCgzPBCxqSu8rkwj8tUEMGwuBEiylkWP_njvfshU-RsVrfdm2L-LJIYOHyWaG4H85_CyPO07r44AQybZoekM",
  "Nonce": "636683081698623940.NGE3NTZhMmItOGQxYi00MDUwLTk2OGYtNmFiNmFlMGZiNTg2ZGFjYjMxZmMtOWY5Zi00MzYyLTkyYTktMDhjNDYzMDhlYjRk",
  "SessionId": "add1df004212030cdbfa052e1e06b603",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683081698623940.NGE3NTZhMmItOGQxYi00MDUwLTk2OGYtNmFiNmFlMGZiNTg2ZGFjYjMxZmMtOWY5Zi00MzYyLTkyYTktMDhjNDYzMDhlYjRk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdq1MT7NxxS0ZlO9vJqyA6Zw5VUW87cFgRdQbFyTA4Z28-oh4Paiv4VWQe_0HACN8lO701US4zRXSsop-09oL-YBpnZUyP2iqhqHe-UBt71cMysW9HVn79lpbSqOqh3ObfwaRii5LV8wujMaXpbB-yc8ax0HbXYiKcorOb6P7TubYhMdfjupYQxjmgF3i2Z7m2aiK5Hi579DjW6YrwB0r-ahDs20eqAG0XQYA4UO2eZ1DjxvBDMxrL4cbArqw1Ju8M9bB1I3YL3i1jGw5Wg1gBoOngWEgYaRVXTXO9-wiW2OzDMCgzPBCxqSu8rkwj8tUEMGwuBEiylkWP_njvfshU-RsVrfdm2L-LJIYOHyWaG4H85_CyPO07r44AQybZoekM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 11:09:42.200 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 11:09:42.200 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 11:09:42.200 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 11:09:42.200 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 11:09:42.200 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 11:09:42.205 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 11:09:42.205 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 11:09:42.205 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 11:09:42.217 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ihHA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****ca37"
    }
  ],
  "ActivityId": "0HLFJR570AFJ8:00000007",
  "TimeStamp": "2018-07-27T17:09:42Z",
  "ProcessId": 35867,
  "LocalIpAddress": "127.0.0.1:5004",
  "RemoteIpAddress": "127.0.0.1"
}
2018-07-27 11:09:42.217 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdq1MT7NxxS0ZlO9vJqyA6Zw5VUW87cFgRdQbFyTA4Z28-oh4Paiv4VWQe_0HACN8lO701US4zRXSsop-09oL-YBpnZUyP2iqhqHe-UBt71cMysW9HVn79lpbSqOqh3ObfwaRii5LV8wujMaXpbB-yc8ax0HbXYiKcorOb6P7TubYhMdfjupYQxjmgF3i2Z7m2aiK5Hi579DjW6YrwB0r-ahDs20eqAG0XQYA4UO2eZ1DjxvBDMxrL4cbArqw1Ju8M9bB1I3YL3i1jGw5Wg1gBoOngWEgYaRVXTXO9-wiW2OzDMCgzPBCxqSu8rkwj8tUEMGwuBEiylkWP_njvfshU-RsVrfdm2L-LJIYOHyWaG4H85_CyPO07r44AQybZoekM",
  "Scope": "openid profile business email"
}
2018-07-27 11:09:42.217 -06:00 [DBG] Augmenting SignInContext
2018-07-27 11:09:42.217 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 11:09:42.278 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 11:09:42.278 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 11:09:42.278 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 11:09:42.278 -06:00 [DBG] Start token request.
2018-07-27 11:09:42.278 -06:00 [DBG] Start client validation
2018-07-27 11:09:42.278 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 11:09:42.278 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 11:09:42.278 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 11:09:42.278 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 11:09:42.278 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:09:42.278 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 11:09:42.278 -06:00 [DBG] Client validation success
2018-07-27 11:09:42.278 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFJR570AFJ7:00000003",
  "TimeStamp": "2018-07-27T17:09:42Z",
  "ProcessId": 35867,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 11:09:42.278 -06:00 [DBG] Start token request validation
2018-07-27 11:09:42.278 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 11:09:42.286 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 11:09:42.286 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "b09d23d63fcfaa0e2e7c3358c44be2eceb7623fde1fe82a228dac6e560a2ca37",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "b09d23d63fcfaa0e2e7c3358c44be2eceb7623fde1fe82a228dac6e560a2ca37",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 11:09:42.286 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:09:42.286 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 11:09:42.286 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 11:09:42.300 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:09:42.300 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 11:09:42.300 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 11:09:42.312 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****MXmA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****iAaA"
    }
  ],
  "ActivityId": "0HLFJR570AFJ7:00000003",
  "TimeStamp": "2018-07-27T17:09:42Z",
  "ProcessId": 35867,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 11:09:42.312 -06:00 [DBG] Token request success.
2018-07-27 11:09:42.319 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 11:09:42.319 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 11:09:42.319 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 11:09:42.319 -06:00 [DBG] Start userinfo request
2018-07-27 11:09:42.319 -06:00 [DBG] Bearer token found in header
2018-07-27 11:09:42.322 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:09:42.322 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 11:09:42.323 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 11:09:42.323 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532711382,
    "exp": 1532714982,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532711378,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-27 11:09:42.324 -06:00 [DBG] Creating userinfo response
2018-07-27 11:09:42.324 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 11:09:42.324 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 11:09:42.324 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-27 11:09:42.324 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 11:09:42.326 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-27 11:09:42.326 -06:00 [DBG] End userinfo request
2018-07-27 12:27:19.122 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-27 12:27:19.153 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-27 12:27:19.155 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-27 12:27:19.156 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-27 12:27:19.156 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-27 12:27:19.156 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-27 12:27:19.570 -06:00 [FTL] Unable to start Kestrel.
System.IO.IOException: Failed to bind to address http://127.0.0.1:5000: address already in use. ---> Microsoft.AspNetCore.Server.Kestrel.Transport.Abstractions.Internal.AddressInUseException: Error -48 EADDRINUSE address already in use ---> Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Networking.UvException: Error -48 EADDRINUSE address already in use
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Networking.LibuvFunctions.ThrowError(Int32 statusCode)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Networking.UvTcpHandle.GetSockIPEndPoint()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Listener.ListenTcp(Boolean useFileHandle)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Listener.<>c.<StartAsync>b__8_0(Listener listener)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.LibuvThread.DoPostWork()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.ListenerPrimary.StartAsync(String pipeName, Byte[] pipeMessage, IEndPointInformation endPointInformation, LibuvThread thread)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.LibuvTransport.BindAsync()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.LibuvTransport.BindAsync()
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.<>c__DisplayClass23_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindLocalhostAsync(ServerAddress address, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.DefaultAddressStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, List`1 listenOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2018-07-27 12:27:54.269 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-27 12:27:54.300 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-27 12:27:54.303 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-27 12:27:54.303 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-27 12:27:54.303 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-27 12:27:54.303 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-27 12:27:54.709 -06:00 [FTL] Unable to start Kestrel.
System.IO.IOException: Failed to bind to address http://127.0.0.1:5000: address already in use. ---> Microsoft.AspNetCore.Server.Kestrel.Transport.Abstractions.Internal.AddressInUseException: Error -48 EADDRINUSE address already in use ---> Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Networking.UvException: Error -48 EADDRINUSE address already in use
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Networking.LibuvFunctions.ThrowError(Int32 statusCode)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Networking.UvTcpHandle.GetSockIPEndPoint()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Listener.ListenTcp(Boolean useFileHandle)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.Listener.<>c.<StartAsync>b__8_0(Listener listener)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.LibuvThread.DoPostWork()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.Internal.ListenerPrimary.StartAsync(String pipeName, Byte[] pipeMessage, IEndPointInformation endPointInformation, LibuvThread thread)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.LibuvTransport.BindAsync()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Libuv.LibuvTransport.BindAsync()
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.<>c__DisplayClass23_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindLocalhostAsync(ServerAddress address, AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.DefaultAddressStrategy.BindAsync(AddressBindContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, List`1 listenOptions, ILogger logger, Func`2 createBinding)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
2018-07-27 12:32:06.755 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-27 12:32:06.785 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-27 12:32:06.788 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-27 12:32:06.788 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-27 12:32:06.788 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-27 12:32:06.789 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-27 12:32:09.006 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:32:09.021 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:34:17.281 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-27 12:34:17.284 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-27 12:34:17.285 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-27 12:34:17.287 -06:00 [DBG] Start discovery request
2018-07-27 12:34:17.443 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-27 12:34:17.443 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-27 12:34:17.443 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-27 12:34:17.446 -06:00 [DBG] Start key discovery request
2018-07-27 12:34:17.535 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 12:34:17.538 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 12:34:17.538 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 12:34:17.541 -06:00 [DBG] Start authorize request
2018-07-27 12:34:17.558 -06:00 [DBG] No user present in authorize request
2018-07-27 12:34:17.562 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:34:17.572 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:34:17.577 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:34:17.578 -06:00 [DBG] No PKCE used.
2018-07-27 12:34:17.601 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:34:17.610 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHenGP76gbYCsLswcwPSgxQU-7nzMVDYhQQt9XSidmwqTXeJqj5XAkaOEw4SnM24KZkNkODD_nLOZY0sRPTHq3YoADKOoTmPtFfR7RnnOLU-34kDw47D4d79VseVctJoYr6EVBVrLkS4bjmxOsv2_Tc8xzCKbAe40Ky-UX_l7nQG10EE4_EoCaGaq5qAQpps9s8sECDKXZW3uN13lUWisLXZ9lip0YSO2PWvjYKs30dkJLKZ_7lA96cjEfRTySeApTS8eqVj2awesw-6eAUL6XTk9xaSaFq8N904jgyIt7qNmUA5NLBfASrkC2uNyuLOQDalj8b3iLPMZTRKLlX_s9W-Qzqu6hM_XbTcaBf_4dMCM_n9ke9yVWlfzWeIRIMzJt4",
  "Nonce": "636683132575152210.MDViZjUzYjYtNjgxOC00NzNlLWJhZjUtM2U0N2NmNzBjMjcyZTdiZjgxY2EtMmVlNy00ZGMyLWFjMWQtZTY2MmZkZTllODI3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683132575152210.MDViZjUzYjYtNjgxOC00NzNlLWJhZjUtM2U0N2NmNzBjMjcyZTdiZjgxY2EtMmVlNy00ZGMyLWFjMWQtZTY2MmZkZTllODI3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHenGP76gbYCsLswcwPSgxQU-7nzMVDYhQQt9XSidmwqTXeJqj5XAkaOEw4SnM24KZkNkODD_nLOZY0sRPTHq3YoADKOoTmPtFfR7RnnOLU-34kDw47D4d79VseVctJoYr6EVBVrLkS4bjmxOsv2_Tc8xzCKbAe40Ky-UX_l7nQG10EE4_EoCaGaq5qAQpps9s8sECDKXZW3uN13lUWisLXZ9lip0YSO2PWvjYKs30dkJLKZ_7lA96cjEfRTySeApTS8eqVj2awesw-6eAUL6XTk9xaSaFq8N904jgyIt7qNmUA5NLBfASrkC2uNyuLOQDalj8b3iLPMZTRKLlX_s9W-Qzqu6hM_XbTcaBf_4dMCM_n9ke9yVWlfzWeIRIMzJt4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:34:17.616 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 12:34:17.723 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:34:17.724 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:34:17.724 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:34:17.724 -06:00 [DBG] No PKCE used.
2018-07-27 12:34:17.724 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:34:17.727 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:34:51.100 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 12:35:40.976 -06:00 [DBG] Augmenting SignInContext
2018-07-27 12:35:40.978 -06:00 [DBG] Adding idp claim with value: local
2018-07-27 12:35:40.978 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-27 12:35:40.978 -06:00 [DBG] Adding auth_time claim with value: 1532716540
2018-07-27 12:35:40.994 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 12:36:31.824 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFJTT10Q286:00000004",
  "TimeStamp": "2018-07-27T18:36:31Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:37:54.930 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:37:54.931 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:37:54.931 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 12:37:54.931 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 12:37:54.931 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 12:37:54.937 -06:00 [DBG] Start authorize callback request
2018-07-27 12:37:54.940 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:37:54.940 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:37:54.940 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:37:54.940 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:37:54.940 -06:00 [DBG] No PKCE used.
2018-07-27 12:37:54.940 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:37:54.940 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHenGP76gbYCsLswcwPSgxQU-7nzMVDYhQQt9XSidmwqTXeJqj5XAkaOEw4SnM24KZkNkODD_nLOZY0sRPTHq3YoADKOoTmPtFfR7RnnOLU-34kDw47D4d79VseVctJoYr6EVBVrLkS4bjmxOsv2_Tc8xzCKbAe40Ky-UX_l7nQG10EE4_EoCaGaq5qAQpps9s8sECDKXZW3uN13lUWisLXZ9lip0YSO2PWvjYKs30dkJLKZ_7lA96cjEfRTySeApTS8eqVj2awesw-6eAUL6XTk9xaSaFq8N904jgyIt7qNmUA5NLBfASrkC2uNyuLOQDalj8b3iLPMZTRKLlX_s9W-Qzqu6hM_XbTcaBf_4dMCM_n9ke9yVWlfzWeIRIMzJt4",
  "Nonce": "636683132575152210.MDViZjUzYjYtNjgxOC00NzNlLWJhZjUtM2U0N2NmNzBjMjcyZTdiZjgxY2EtMmVlNy00ZGMyLWFjMWQtZTY2MmZkZTllODI3",
  "SessionId": "3dc0e365a73951e40ee765fcce15ca90",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683132575152210.MDViZjUzYjYtNjgxOC00NzNlLWJhZjUtM2U0N2NmNzBjMjcyZTdiZjgxY2EtMmVlNy00ZGMyLWFjMWQtZTY2MmZkZTllODI3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHenGP76gbYCsLswcwPSgxQU-7nzMVDYhQQt9XSidmwqTXeJqj5XAkaOEw4SnM24KZkNkODD_nLOZY0sRPTHq3YoADKOoTmPtFfR7RnnOLU-34kDw47D4d79VseVctJoYr6EVBVrLkS4bjmxOsv2_Tc8xzCKbAe40Ky-UX_l7nQG10EE4_EoCaGaq5qAQpps9s8sECDKXZW3uN13lUWisLXZ9lip0YSO2PWvjYKs30dkJLKZ_7lA96cjEfRTySeApTS8eqVj2awesw-6eAUL6XTk9xaSaFq8N904jgyIt7qNmUA5NLBfASrkC2uNyuLOQDalj8b3iLPMZTRKLlX_s9W-Qzqu6hM_XbTcaBf_4dMCM_n9ke9yVWlfzWeIRIMzJt4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:37:54.956 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 12:37:54.956 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 12:37:54.956 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 12:37:54.960 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:37:54.960 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:37:54.987 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:37:54.987 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:37:54.987 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:37:54.987 -06:00 [DBG] No PKCE used.
2018-07-27 12:37:54.987 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:37:54.987 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:38:09.632 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 12:38:09.633 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:38:09.633 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:38:09.655 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:38:09.655 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:38:09.655 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:38:09.655 -06:00 [DBG] No PKCE used.
2018-07-27 12:38:09.656 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:38:09.671 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:38:09.671 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:38:09.671 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 12:38:09.671 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 12:38:09.671 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 12:38:09.671 -06:00 [DBG] Start authorize callback request
2018-07-27 12:38:09.695 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:38:09.695 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:38:09.695 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:38:09.695 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:38:09.695 -06:00 [DBG] No PKCE used.
2018-07-27 12:38:09.695 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:38:09.695 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHenGP76gbYCsLswcwPSgxQU-7nzMVDYhQQt9XSidmwqTXeJqj5XAkaOEw4SnM24KZkNkODD_nLOZY0sRPTHq3YoADKOoTmPtFfR7RnnOLU-34kDw47D4d79VseVctJoYr6EVBVrLkS4bjmxOsv2_Tc8xzCKbAe40Ky-UX_l7nQG10EE4_EoCaGaq5qAQpps9s8sECDKXZW3uN13lUWisLXZ9lip0YSO2PWvjYKs30dkJLKZ_7lA96cjEfRTySeApTS8eqVj2awesw-6eAUL6XTk9xaSaFq8N904jgyIt7qNmUA5NLBfASrkC2uNyuLOQDalj8b3iLPMZTRKLlX_s9W-Qzqu6hM_XbTcaBf_4dMCM_n9ke9yVWlfzWeIRIMzJt4",
  "Nonce": "636683132575152210.MDViZjUzYjYtNjgxOC00NzNlLWJhZjUtM2U0N2NmNzBjMjcyZTdiZjgxY2EtMmVlNy00ZGMyLWFjMWQtZTY2MmZkZTllODI3",
  "SessionId": "3dc0e365a73951e40ee765fcce15ca90",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683132575152210.MDViZjUzYjYtNjgxOC00NzNlLWJhZjUtM2U0N2NmNzBjMjcyZTdiZjgxY2EtMmVlNy00ZGMyLWFjMWQtZTY2MmZkZTllODI3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHenGP76gbYCsLswcwPSgxQU-7nzMVDYhQQt9XSidmwqTXeJqj5XAkaOEw4SnM24KZkNkODD_nLOZY0sRPTHq3YoADKOoTmPtFfR7RnnOLU-34kDw47D4d79VseVctJoYr6EVBVrLkS4bjmxOsv2_Tc8xzCKbAe40Ky-UX_l7nQG10EE4_EoCaGaq5qAQpps9s8sECDKXZW3uN13lUWisLXZ9lip0YSO2PWvjYKs30dkJLKZ_7lA96cjEfRTySeApTS8eqVj2awesw-6eAUL6XTk9xaSaFq8N904jgyIt7qNmUA5NLBfASrkC2uNyuLOQDalj8b3iLPMZTRKLlX_s9W-Qzqu6hM_XbTcaBf_4dMCM_n9ke9yVWlfzWeIRIMzJt4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:38:09.697 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 12:38:09.697 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 12:38:09.704 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 12:38:09.713 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:38:09.720 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 12:38:09.740 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 12:38:09.748 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 12:38:09.749 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 12:38:09.841 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****E0_g"
    },
    {
      "TokenType": "code",
      "TokenValue": "****2419"
    }
  ],
  "ActivityId": "0HLFJTT10Q286:00000008",
  "TimeStamp": "2018-07-27T18:38:09Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:38:09.844 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHenGP76gbYCsLswcwPSgxQU-7nzMVDYhQQt9XSidmwqTXeJqj5XAkaOEw4SnM24KZkNkODD_nLOZY0sRPTHq3YoADKOoTmPtFfR7RnnOLU-34kDw47D4d79VseVctJoYr6EVBVrLkS4bjmxOsv2_Tc8xzCKbAe40Ky-UX_l7nQG10EE4_EoCaGaq5qAQpps9s8sECDKXZW3uN13lUWisLXZ9lip0YSO2PWvjYKs30dkJLKZ_7lA96cjEfRTySeApTS8eqVj2awesw-6eAUL6XTk9xaSaFq8N904jgyIt7qNmUA5NLBfASrkC2uNyuLOQDalj8b3iLPMZTRKLlX_s9W-Qzqu6hM_XbTcaBf_4dMCM_n9ke9yVWlfzWeIRIMzJt4",
  "Scope": "openid profile business email"
}
2018-07-27 12:38:09.859 -06:00 [DBG] Augmenting SignInContext
2018-07-27 12:38:09.859 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 12:38:10.188 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 12:38:10.191 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 12:38:10.191 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 12:38:10.197 -06:00 [DBG] Start token request.
2018-07-27 12:38:10.202 -06:00 [DBG] Start client validation
2018-07-27 12:38:10.206 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 12:38:10.209 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 12:38:10.211 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 12:38:10.211 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 12:38:10.211 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:38:10.219 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 12:38:10.219 -06:00 [DBG] Client validation success
2018-07-27 12:38:10.222 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFJTT10Q288:00000001",
  "TimeStamp": "2018-07-27T18:38:10Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:38:10.227 -06:00 [DBG] Start token request validation
2018-07-27 12:38:10.236 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 12:38:10.255 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 12:38:10.258 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "0a929823699804e91faa93191f29e08d6736697cf5539bfc09c85a59ba512419",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "0a929823699804e91faa93191f29e08d6736697cf5539bfc09c85a59ba512419",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 12:38:10.268 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:38:10.277 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 12:38:10.277 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:38:10.298 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:38:10.299 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 12:38:10.299 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 12:38:10.312 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****YZ_g"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****j2ew"
    }
  ],
  "ActivityId": "0HLFJTT10Q288:00000001",
  "TimeStamp": "2018-07-27T18:38:10Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:38:10.312 -06:00 [DBG] Token request success.
2018-07-27 12:38:10.323 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 12:38:10.324 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 12:38:10.324 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 12:38:10.330 -06:00 [DBG] Start userinfo request
2018-07-27 12:38:10.332 -06:00 [DBG] Bearer token found in header
2018-07-27 12:38:10.387 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:38:10.390 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:38:10.391 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 12:38:10.394 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532716690,
    "exp": 1532720290,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532716540,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-27 12:38:10.399 -06:00 [DBG] Creating userinfo response
2018-07-27 12:38:10.402 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:38:10.404 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:38:10.406 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-27 12:38:10.406 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:38:10.408 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-27 12:38:10.408 -06:00 [DBG] End userinfo request
2018-07-27 12:40:29.381 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-27 12:40:29.386 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-27 12:40:29.387 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-27 12:40:29.387 -06:00 [DBG] Start discovery request
2018-07-27 12:40:29.526 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-27 12:40:29.526 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-27 12:40:29.526 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-27 12:40:29.526 -06:00 [DBG] Start key discovery request
2018-07-27 12:40:29.623 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 12:40:29.624 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 12:40:29.624 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 12:40:29.624 -06:00 [DBG] Start authorize request
2018-07-27 12:40:29.624 -06:00 [DBG] No user present in authorize request
2018-07-27 12:40:29.624 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:40:29.624 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:40:29.624 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:40:29.624 -06:00 [DBG] No PKCE used.
2018-07-27 12:40:29.624 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:40:29.624 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeK94Cg0eE39lvAnMvLB6XhzK7iSifDaJi8MoE8DjTKUC7CmrRVv2ZYpVEEK2vE3RWPO9udjwP2DAnsc6dT596XlQim_mzWt8zKgbSiAHZM32KeLHZTZ0SIQm8oP03FMLXiV7sXgnxDle0Pa7I0guisVcbkkxD5tiwEexSTuTetdutql8FHAXqCBtKgF_upjXt87U9vfQRtmavdDop-d55moK40CPSGN_K5mlabQIcFudbgm072OTXEj0Zka6UroKRbbMgAhbm78IjTTzse2KQ3AHSBgpKL7QWP4emVNFYFqmx_9rPflZgBEDYZIYD5Z5SUt1qECeBP4_T5tPWlzbUvWb4euO8u_Q4PR5MDGPdMBqEyWTWOzFT0HHGDaQ1M52o",
  "Nonce": "636683136296039770.YjgzMzM4ZGItNzkyZi00ZjgxLThhNTEtMmY2NTdhNWRlZjRkMjliZjVjYzgtOGI1ZS00MDJiLWE4NDAtYzM5ZDQzMzk4YWZm",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683136296039770.YjgzMzM4ZGItNzkyZi00ZjgxLThhNTEtMmY2NTdhNWRlZjRkMjliZjVjYzgtOGI1ZS00MDJiLWE4NDAtYzM5ZDQzMzk4YWZm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeK94Cg0eE39lvAnMvLB6XhzK7iSifDaJi8MoE8DjTKUC7CmrRVv2ZYpVEEK2vE3RWPO9udjwP2DAnsc6dT596XlQim_mzWt8zKgbSiAHZM32KeLHZTZ0SIQm8oP03FMLXiV7sXgnxDle0Pa7I0guisVcbkkxD5tiwEexSTuTetdutql8FHAXqCBtKgF_upjXt87U9vfQRtmavdDop-d55moK40CPSGN_K5mlabQIcFudbgm072OTXEj0Zka6UroKRbbMgAhbm78IjTTzse2KQ3AHSBgpKL7QWP4emVNFYFqmx_9rPflZgBEDYZIYD5Z5SUt1qECeBP4_T5tPWlzbUvWb4euO8u_Q4PR5MDGPdMBqEyWTWOzFT0HHGDaQ1M52o",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:40:29.624 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 12:40:29.654 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:40:29.655 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:40:29.655 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:40:29.655 -06:00 [DBG] No PKCE used.
2018-07-27 12:40:29.655 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:40:29.655 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:40:39.737 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 12:40:50.176 -06:00 [DBG] Augmenting SignInContext
2018-07-27 12:40:50.176 -06:00 [DBG] Adding idp claim with value: local
2018-07-27 12:40:50.176 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-27 12:40:50.176 -06:00 [DBG] Adding auth_time claim with value: 1532716850
2018-07-27 12:40:50.177 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 12:40:50.177 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFJTT10Q286:0000000B",
  "TimeStamp": "2018-07-27T18:40:50Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:40:50.180 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:40:50.180 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:40:50.180 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 12:40:50.180 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 12:40:50.180 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 12:40:50.180 -06:00 [DBG] Start authorize callback request
2018-07-27 12:40:50.180 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:40:50.180 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:40:50.180 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:40:50.180 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:40:50.180 -06:00 [DBG] No PKCE used.
2018-07-27 12:40:50.181 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:40:50.181 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeK94Cg0eE39lvAnMvLB6XhzK7iSifDaJi8MoE8DjTKUC7CmrRVv2ZYpVEEK2vE3RWPO9udjwP2DAnsc6dT596XlQim_mzWt8zKgbSiAHZM32KeLHZTZ0SIQm8oP03FMLXiV7sXgnxDle0Pa7I0guisVcbkkxD5tiwEexSTuTetdutql8FHAXqCBtKgF_upjXt87U9vfQRtmavdDop-d55moK40CPSGN_K5mlabQIcFudbgm072OTXEj0Zka6UroKRbbMgAhbm78IjTTzse2KQ3AHSBgpKL7QWP4emVNFYFqmx_9rPflZgBEDYZIYD5Z5SUt1qECeBP4_T5tPWlzbUvWb4euO8u_Q4PR5MDGPdMBqEyWTWOzFT0HHGDaQ1M52o",
  "Nonce": "636683136296039770.YjgzMzM4ZGItNzkyZi00ZjgxLThhNTEtMmY2NTdhNWRlZjRkMjliZjVjYzgtOGI1ZS00MDJiLWE4NDAtYzM5ZDQzMzk4YWZm",
  "SessionId": "4f39b88ee3e7f71765fab88f9d5d79a2",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683136296039770.YjgzMzM4ZGItNzkyZi00ZjgxLThhNTEtMmY2NTdhNWRlZjRkMjliZjVjYzgtOGI1ZS00MDJiLWE4NDAtYzM5ZDQzMzk4YWZm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeK94Cg0eE39lvAnMvLB6XhzK7iSifDaJi8MoE8DjTKUC7CmrRVv2ZYpVEEK2vE3RWPO9udjwP2DAnsc6dT596XlQim_mzWt8zKgbSiAHZM32KeLHZTZ0SIQm8oP03FMLXiV7sXgnxDle0Pa7I0guisVcbkkxD5tiwEexSTuTetdutql8FHAXqCBtKgF_upjXt87U9vfQRtmavdDop-d55moK40CPSGN_K5mlabQIcFudbgm072OTXEj0Zka6UroKRbbMgAhbm78IjTTzse2KQ3AHSBgpKL7QWP4emVNFYFqmx_9rPflZgBEDYZIYD5Z5SUt1qECeBP4_T5tPWlzbUvWb4euO8u_Q4PR5MDGPdMBqEyWTWOzFT0HHGDaQ1M52o",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:40:50.182 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 12:40:50.182 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 12:40:50.182 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 12:40:50.185 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:40:50.185 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:40:50.186 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:40:50.186 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:40:50.186 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:40:50.186 -06:00 [DBG] No PKCE used.
2018-07-27 12:40:50.186 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:40:50.186 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:40:55.972 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 12:40:55.975 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:40:55.975 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:40:55.977 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:40:55.977 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:40:55.977 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:40:55.977 -06:00 [DBG] No PKCE used.
2018-07-27 12:40:55.977 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:40:55.980 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:40:55.980 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:40:55.980 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 12:40:55.980 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 12:40:55.980 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 12:40:55.980 -06:00 [DBG] Start authorize callback request
2018-07-27 12:40:55.980 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:40:55.980 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:40:55.980 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:40:55.980 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:40:55.980 -06:00 [DBG] No PKCE used.
2018-07-27 12:40:55.981 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:40:55.981 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeK94Cg0eE39lvAnMvLB6XhzK7iSifDaJi8MoE8DjTKUC7CmrRVv2ZYpVEEK2vE3RWPO9udjwP2DAnsc6dT596XlQim_mzWt8zKgbSiAHZM32KeLHZTZ0SIQm8oP03FMLXiV7sXgnxDle0Pa7I0guisVcbkkxD5tiwEexSTuTetdutql8FHAXqCBtKgF_upjXt87U9vfQRtmavdDop-d55moK40CPSGN_K5mlabQIcFudbgm072OTXEj0Zka6UroKRbbMgAhbm78IjTTzse2KQ3AHSBgpKL7QWP4emVNFYFqmx_9rPflZgBEDYZIYD5Z5SUt1qECeBP4_T5tPWlzbUvWb4euO8u_Q4PR5MDGPdMBqEyWTWOzFT0HHGDaQ1M52o",
  "Nonce": "636683136296039770.YjgzMzM4ZGItNzkyZi00ZjgxLThhNTEtMmY2NTdhNWRlZjRkMjliZjVjYzgtOGI1ZS00MDJiLWE4NDAtYzM5ZDQzMzk4YWZm",
  "SessionId": "4f39b88ee3e7f71765fab88f9d5d79a2",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683136296039770.YjgzMzM4ZGItNzkyZi00ZjgxLThhNTEtMmY2NTdhNWRlZjRkMjliZjVjYzgtOGI1ZS00MDJiLWE4NDAtYzM5ZDQzMzk4YWZm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeK94Cg0eE39lvAnMvLB6XhzK7iSifDaJi8MoE8DjTKUC7CmrRVv2ZYpVEEK2vE3RWPO9udjwP2DAnsc6dT596XlQim_mzWt8zKgbSiAHZM32KeLHZTZ0SIQm8oP03FMLXiV7sXgnxDle0Pa7I0guisVcbkkxD5tiwEexSTuTetdutql8FHAXqCBtKgF_upjXt87U9vfQRtmavdDop-d55moK40CPSGN_K5mlabQIcFudbgm072OTXEj0Zka6UroKRbbMgAhbm78IjTTzse2KQ3AHSBgpKL7QWP4emVNFYFqmx_9rPflZgBEDYZIYD5Z5SUt1qECeBP4_T5tPWlzbUvWb4euO8u_Q4PR5MDGPdMBqEyWTWOzFT0HHGDaQ1M52o",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:40:55.982 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 12:40:55.982 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 12:40:55.982 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 12:40:55.982 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:40:55.982 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 12:40:55.987 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 12:40:55.988 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 12:40:55.988 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 12:40:55.999 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****L7CQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****78d0"
    }
  ],
  "ActivityId": "0HLFJTT10Q286:0000000F",
  "TimeStamp": "2018-07-27T18:40:55Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:40:55.999 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeK94Cg0eE39lvAnMvLB6XhzK7iSifDaJi8MoE8DjTKUC7CmrRVv2ZYpVEEK2vE3RWPO9udjwP2DAnsc6dT596XlQim_mzWt8zKgbSiAHZM32KeLHZTZ0SIQm8oP03FMLXiV7sXgnxDle0Pa7I0guisVcbkkxD5tiwEexSTuTetdutql8FHAXqCBtKgF_upjXt87U9vfQRtmavdDop-d55moK40CPSGN_K5mlabQIcFudbgm072OTXEj0Zka6UroKRbbMgAhbm78IjTTzse2KQ3AHSBgpKL7QWP4emVNFYFqmx_9rPflZgBEDYZIYD5Z5SUt1qECeBP4_T5tPWlzbUvWb4euO8u_Q4PR5MDGPdMBqEyWTWOzFT0HHGDaQ1M52o",
  "Scope": "openid profile business email"
}
2018-07-27 12:40:55.999 -06:00 [DBG] Augmenting SignInContext
2018-07-27 12:40:56.000 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 12:40:56.211 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 12:40:56.215 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 12:40:56.216 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 12:40:56.216 -06:00 [DBG] Start token request.
2018-07-27 12:40:56.216 -06:00 [DBG] Start client validation
2018-07-27 12:40:56.216 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 12:40:56.216 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 12:40:56.218 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 12:40:56.218 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 12:40:56.218 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:40:56.218 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 12:40:56.218 -06:00 [DBG] Client validation success
2018-07-27 12:40:56.218 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFJTT10Q289:00000003",
  "TimeStamp": "2018-07-27T18:40:56Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:40:56.218 -06:00 [DBG] Start token request validation
2018-07-27 12:40:56.219 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 12:40:56.227 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 12:40:56.227 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "a5e15c866304bfb6bfa13d26c60600e53c693e604ee074acc6340595ecb578d0",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "a5e15c866304bfb6bfa13d26c60600e53c693e604ee074acc6340595ecb578d0",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 12:40:56.227 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:40:56.227 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 12:40:56.227 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:40:56.242 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:40:56.242 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 12:40:56.242 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 12:40:56.253 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****BFxw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****R1vQ"
    }
  ],
  "ActivityId": "0HLFJTT10Q289:00000003",
  "TimeStamp": "2018-07-27T18:40:56Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:40:56.254 -06:00 [DBG] Token request success.
2018-07-27 12:45:21.164 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-27 12:45:21.166 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-27 12:45:21.166 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-27 12:45:21.166 -06:00 [DBG] Start discovery request
2018-07-27 12:45:21.312 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-27 12:45:21.312 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-27 12:45:21.312 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-27 12:45:21.312 -06:00 [DBG] Start key discovery request
2018-07-27 12:45:21.400 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:45:21.400 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:45:21.400 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 12:45:21.400 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 12:45:21.400 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 12:45:21.400 -06:00 [DBG] Start authorize request
2018-07-27 12:45:21.401 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:45:21.401 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:45:21.401 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:45:21.401 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:45:21.401 -06:00 [DBG] No PKCE used.
2018-07-27 12:45:21.401 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:45:21.401 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHclWTQ0J3hdyQCTe199euN4-hhrNVsCC2M0Sp2dV6T-IwWke4z7OZAfR0Yqt8TT8c8lZ2RM2lExJ5lmZr4YP9_vnq5TCSpHatJzJAkyKZK9EObdGjCFPu4eanPsT6JLVlBY8qk6JDUxr8cl6IKBWuZl0qwMxuAM6Jjgw7YnoPHlCHyFKUeolM_CpQYANOU03N3IquxV9pgpX8jjHiYFnHwFvvno0nK7MTPe4K5EpEZO0-TiXRpRDi6k_d77s5gZ_JWlZW_xc497VNv6QRR6gTLD2Q2aAmbpCYzFUr7kLioIYEdYf1mjYX8cAwoJ6cpcw3gxeCqylFEzWkhCe5V9HBMkQFnGrgkuZJ9qclAfalTEiIfsanXbv20MTz11tvcyRek",
  "Nonce": "636683139213727070.YjEyNzc1NWQtYWM3NC00NGNlLWI0MTItYzg2YTNjOGEyY2UzN2NjMGJmMjAtMDA2Mi00OTg4LWI5MDQtZGJhMGY5NDVjOTEy",
  "SessionId": "4f39b88ee3e7f71765fab88f9d5d79a2",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683139213727070.YjEyNzc1NWQtYWM3NC00NGNlLWI0MTItYzg2YTNjOGEyY2UzN2NjMGJmMjAtMDA2Mi00OTg4LWI5MDQtZGJhMGY5NDVjOTEy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHclWTQ0J3hdyQCTe199euN4-hhrNVsCC2M0Sp2dV6T-IwWke4z7OZAfR0Yqt8TT8c8lZ2RM2lExJ5lmZr4YP9_vnq5TCSpHatJzJAkyKZK9EObdGjCFPu4eanPsT6JLVlBY8qk6JDUxr8cl6IKBWuZl0qwMxuAM6Jjgw7YnoPHlCHyFKUeolM_CpQYANOU03N3IquxV9pgpX8jjHiYFnHwFvvno0nK7MTPe4K5EpEZO0-TiXRpRDi6k_d77s5gZ_JWlZW_xc497VNv6QRR6gTLD2Q2aAmbpCYzFUr7kLioIYEdYf1mjYX8cAwoJ6cpcw3gxeCqylFEzWkhCe5V9HBMkQFnGrgkuZJ9qclAfalTEiIfsanXbv20MTz11tvcyRek",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:45:21.402 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 12:45:21.402 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 12:45:21.402 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 12:45:21.409 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:45:21.409 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:45:21.409 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:45:21.409 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:45:21.409 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:45:21.409 -06:00 [DBG] No PKCE used.
2018-07-27 12:45:21.409 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:45:21.410 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:45:28.307 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 12:45:28.333 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:45:28.333 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:45:28.336 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:45:28.336 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:45:28.336 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:45:28.336 -06:00 [DBG] No PKCE used.
2018-07-27 12:45:28.336 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:45:28.338 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:45:28.339 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:45:28.339 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 12:45:28.339 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 12:45:28.339 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 12:45:28.339 -06:00 [DBG] Start authorize callback request
2018-07-27 12:45:28.339 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:45:28.339 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:45:28.339 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:45:28.339 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:45:28.339 -06:00 [DBG] No PKCE used.
2018-07-27 12:45:28.339 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:45:28.339 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHclWTQ0J3hdyQCTe199euN4-hhrNVsCC2M0Sp2dV6T-IwWke4z7OZAfR0Yqt8TT8c8lZ2RM2lExJ5lmZr4YP9_vnq5TCSpHatJzJAkyKZK9EObdGjCFPu4eanPsT6JLVlBY8qk6JDUxr8cl6IKBWuZl0qwMxuAM6Jjgw7YnoPHlCHyFKUeolM_CpQYANOU03N3IquxV9pgpX8jjHiYFnHwFvvno0nK7MTPe4K5EpEZO0-TiXRpRDi6k_d77s5gZ_JWlZW_xc497VNv6QRR6gTLD2Q2aAmbpCYzFUr7kLioIYEdYf1mjYX8cAwoJ6cpcw3gxeCqylFEzWkhCe5V9HBMkQFnGrgkuZJ9qclAfalTEiIfsanXbv20MTz11tvcyRek",
  "Nonce": "636683139213727070.YjEyNzc1NWQtYWM3NC00NGNlLWI0MTItYzg2YTNjOGEyY2UzN2NjMGJmMjAtMDA2Mi00OTg4LWI5MDQtZGJhMGY5NDVjOTEy",
  "SessionId": "4f39b88ee3e7f71765fab88f9d5d79a2",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683139213727070.YjEyNzc1NWQtYWM3NC00NGNlLWI0MTItYzg2YTNjOGEyY2UzN2NjMGJmMjAtMDA2Mi00OTg4LWI5MDQtZGJhMGY5NDVjOTEy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHclWTQ0J3hdyQCTe199euN4-hhrNVsCC2M0Sp2dV6T-IwWke4z7OZAfR0Yqt8TT8c8lZ2RM2lExJ5lmZr4YP9_vnq5TCSpHatJzJAkyKZK9EObdGjCFPu4eanPsT6JLVlBY8qk6JDUxr8cl6IKBWuZl0qwMxuAM6Jjgw7YnoPHlCHyFKUeolM_CpQYANOU03N3IquxV9pgpX8jjHiYFnHwFvvno0nK7MTPe4K5EpEZO0-TiXRpRDi6k_d77s5gZ_JWlZW_xc497VNv6QRR6gTLD2Q2aAmbpCYzFUr7kLioIYEdYf1mjYX8cAwoJ6cpcw3gxeCqylFEzWkhCe5V9HBMkQFnGrgkuZJ9qclAfalTEiIfsanXbv20MTz11tvcyRek",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:45:28.340 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 12:45:28.341 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 12:45:28.341 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 12:45:28.341 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:45:28.341 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 12:45:28.345 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 12:45:28.346 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 12:45:28.346 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 12:45:28.357 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****b0jg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****38dd"
    }
  ],
  "ActivityId": "0HLFJTT10Q286:00000013",
  "TimeStamp": "2018-07-27T18:45:28Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:45:28.357 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHclWTQ0J3hdyQCTe199euN4-hhrNVsCC2M0Sp2dV6T-IwWke4z7OZAfR0Yqt8TT8c8lZ2RM2lExJ5lmZr4YP9_vnq5TCSpHatJzJAkyKZK9EObdGjCFPu4eanPsT6JLVlBY8qk6JDUxr8cl6IKBWuZl0qwMxuAM6Jjgw7YnoPHlCHyFKUeolM_CpQYANOU03N3IquxV9pgpX8jjHiYFnHwFvvno0nK7MTPe4K5EpEZO0-TiXRpRDi6k_d77s5gZ_JWlZW_xc497VNv6QRR6gTLD2Q2aAmbpCYzFUr7kLioIYEdYf1mjYX8cAwoJ6cpcw3gxeCqylFEzWkhCe5V9HBMkQFnGrgkuZJ9qclAfalTEiIfsanXbv20MTz11tvcyRek",
  "Scope": "openid profile business email"
}
2018-07-27 12:45:28.493 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 12:45:28.493 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 12:45:28.493 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 12:45:28.493 -06:00 [DBG] Start token request.
2018-07-27 12:45:28.493 -06:00 [DBG] Start client validation
2018-07-27 12:45:28.493 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 12:45:28.493 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 12:45:28.495 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 12:45:28.495 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 12:45:28.495 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:45:28.495 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 12:45:28.495 -06:00 [DBG] Client validation success
2018-07-27 12:45:28.496 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFJTT10Q28D:00000003",
  "TimeStamp": "2018-07-27T18:45:28Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:45:28.496 -06:00 [DBG] Start token request validation
2018-07-27 12:45:28.496 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 12:45:28.504 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 12:45:28.504 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "0482bf6488b2cf7b097837f33eb7ec93c05668d2b47c8937947c6c8f461438dd",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "0482bf6488b2cf7b097837f33eb7ec93c05668d2b47c8937947c6c8f461438dd",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 12:45:28.504 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:45:28.504 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 12:45:28.504 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:45:28.517 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:45:28.517 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 12:45:28.517 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 12:45:28.529 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****lRPQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****--yw"
    }
  ],
  "ActivityId": "0HLFJTT10Q28D:00000003",
  "TimeStamp": "2018-07-27T18:45:28Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:45:28.529 -06:00 [DBG] Token request success.
2018-07-27 12:45:28.537 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 12:45:28.537 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 12:45:28.537 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 12:45:28.537 -06:00 [DBG] Start userinfo request
2018-07-27 12:45:28.537 -06:00 [DBG] Bearer token found in header
2018-07-27 12:45:28.539 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:45:28.539 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:45:28.541 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 12:45:28.541 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532717128,
    "exp": 1532720728,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532716850,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-27 12:45:28.541 -06:00 [DBG] Creating userinfo response
2018-07-27 12:45:28.541 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:45:28.541 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:45:28.541 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-27 12:45:28.541 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:45:28.543 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-27 12:45:28.543 -06:00 [DBG] End userinfo request
2018-07-27 12:45:45.335 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 12:45:45.336 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 12:45:45.336 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 12:45:45.336 -06:00 [DBG] Start authorize request
2018-07-27 12:45:45.336 -06:00 [DBG] No user present in authorize request
2018-07-27 12:45:45.336 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:45:45.336 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:45:45.336 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:45:45.336 -06:00 [DBG] No PKCE used.
2018-07-27 12:45:45.336 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:45:45.337 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeJBPpSlKPSkVBP4cKt7VgdqFCs-xmrflnUsSvlTRCQ4tfdAPDpRTQt9sUnV6UtT-fO4BvfJvyik8FpclsvL_GmNoKuh2-AMP6izV-Vq4gc3WzZ-n-wrdfPT68_w31CZtB50GmH4D-VuAAX742AI_5tHkuo39pO6A-yRkM4qTbU-TZl33BKrk0RFJC9EaBo42eap4lGr8rWMJaoRPyVVufoKLwfYMLcRh9rZNOVtxQKuJ-3_CiX2ziDvqB3Dn9w_BWFiAwR745Hd8duYgzdSoISHHq8zt_fzTE9IpGIxw4NA-m6aOTbmbTaT7uZoCHJ6KIY5hdlXduwe0fu8KbehPWOeAo8gd81GNxQRMt6bcPCz_J_c12mfP8NYfdbPnPWQWk",
  "Nonce": "636683139452671570.Njk3OTQ3MWMtZDdjNi00MTNjLTkwYjctZWY2OTc2ODM0ZjM0OTcxZmVmM2EtMDE1MS00ZjBjLTk2Y2MtMjk1YTI5ODQ3ZjRj",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683139452671570.Njk3OTQ3MWMtZDdjNi00MTNjLTkwYjctZWY2OTc2ODM0ZjM0OTcxZmVmM2EtMDE1MS00ZjBjLTk2Y2MtMjk1YTI5ODQ3ZjRj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeJBPpSlKPSkVBP4cKt7VgdqFCs-xmrflnUsSvlTRCQ4tfdAPDpRTQt9sUnV6UtT-fO4BvfJvyik8FpclsvL_GmNoKuh2-AMP6izV-Vq4gc3WzZ-n-wrdfPT68_w31CZtB50GmH4D-VuAAX742AI_5tHkuo39pO6A-yRkM4qTbU-TZl33BKrk0RFJC9EaBo42eap4lGr8rWMJaoRPyVVufoKLwfYMLcRh9rZNOVtxQKuJ-3_CiX2ziDvqB3Dn9w_BWFiAwR745Hd8duYgzdSoISHHq8zt_fzTE9IpGIxw4NA-m6aOTbmbTaT7uZoCHJ6KIY5hdlXduwe0fu8KbehPWOeAo8gd81GNxQRMt6bcPCz_J_c12mfP8NYfdbPnPWQWk",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:45:45.337 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 12:45:45.339 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:45:45.339 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:45:45.339 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:45:45.339 -06:00 [DBG] No PKCE used.
2018-07-27 12:45:45.339 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:45:45.339 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:45:54.987 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 12:46:02.918 -06:00 [DBG] Augmenting SignInContext
2018-07-27 12:46:02.918 -06:00 [DBG] Adding idp claim with value: local
2018-07-27 12:46:02.918 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-27 12:46:02.918 -06:00 [DBG] Adding auth_time claim with value: 1532717162
2018-07-27 12:46:02.919 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 12:46:05.572 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFJTT10Q286:00000016",
  "TimeStamp": "2018-07-27T18:46:05Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:46:05.602 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:46:05.602 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:46:05.602 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 12:46:05.602 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 12:46:05.602 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 12:46:05.603 -06:00 [DBG] Start authorize callback request
2018-07-27 12:46:05.603 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:46:05.603 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:46:05.603 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:46:05.603 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:46:05.603 -06:00 [DBG] No PKCE used.
2018-07-27 12:46:05.603 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:46:05.603 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeJBPpSlKPSkVBP4cKt7VgdqFCs-xmrflnUsSvlTRCQ4tfdAPDpRTQt9sUnV6UtT-fO4BvfJvyik8FpclsvL_GmNoKuh2-AMP6izV-Vq4gc3WzZ-n-wrdfPT68_w31CZtB50GmH4D-VuAAX742AI_5tHkuo39pO6A-yRkM4qTbU-TZl33BKrk0RFJC9EaBo42eap4lGr8rWMJaoRPyVVufoKLwfYMLcRh9rZNOVtxQKuJ-3_CiX2ziDvqB3Dn9w_BWFiAwR745Hd8duYgzdSoISHHq8zt_fzTE9IpGIxw4NA-m6aOTbmbTaT7uZoCHJ6KIY5hdlXduwe0fu8KbehPWOeAo8gd81GNxQRMt6bcPCz_J_c12mfP8NYfdbPnPWQWk",
  "Nonce": "636683139452671570.Njk3OTQ3MWMtZDdjNi00MTNjLTkwYjctZWY2OTc2ODM0ZjM0OTcxZmVmM2EtMDE1MS00ZjBjLTk2Y2MtMjk1YTI5ODQ3ZjRj",
  "SessionId": "c58ae4b3bbf7877ba5122291e18acc0f",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683139452671570.Njk3OTQ3MWMtZDdjNi00MTNjLTkwYjctZWY2OTc2ODM0ZjM0OTcxZmVmM2EtMDE1MS00ZjBjLTk2Y2MtMjk1YTI5ODQ3ZjRj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeJBPpSlKPSkVBP4cKt7VgdqFCs-xmrflnUsSvlTRCQ4tfdAPDpRTQt9sUnV6UtT-fO4BvfJvyik8FpclsvL_GmNoKuh2-AMP6izV-Vq4gc3WzZ-n-wrdfPT68_w31CZtB50GmH4D-VuAAX742AI_5tHkuo39pO6A-yRkM4qTbU-TZl33BKrk0RFJC9EaBo42eap4lGr8rWMJaoRPyVVufoKLwfYMLcRh9rZNOVtxQKuJ-3_CiX2ziDvqB3Dn9w_BWFiAwR745Hd8duYgzdSoISHHq8zt_fzTE9IpGIxw4NA-m6aOTbmbTaT7uZoCHJ6KIY5hdlXduwe0fu8KbehPWOeAo8gd81GNxQRMt6bcPCz_J_c12mfP8NYfdbPnPWQWk",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:46:05.604 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 12:46:05.604 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 12:46:05.604 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 12:46:05.607 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:46:05.607 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:46:05.607 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:46:05.607 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:46:05.607 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:46:05.607 -06:00 [DBG] No PKCE used.
2018-07-27 12:46:05.607 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:46:05.607 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:46:10.352 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 12:46:10.353 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:46:10.353 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:46:10.356 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:46:10.356 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:46:10.356 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:46:10.356 -06:00 [DBG] No PKCE used.
2018-07-27 12:46:10.356 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:46:10.359 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:46:10.359 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:46:10.359 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 12:46:10.359 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 12:46:10.359 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 12:46:10.359 -06:00 [DBG] Start authorize callback request
2018-07-27 12:46:10.359 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:46:10.359 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:46:10.359 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:46:10.359 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:46:10.359 -06:00 [DBG] No PKCE used.
2018-07-27 12:46:10.359 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:46:10.359 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeJBPpSlKPSkVBP4cKt7VgdqFCs-xmrflnUsSvlTRCQ4tfdAPDpRTQt9sUnV6UtT-fO4BvfJvyik8FpclsvL_GmNoKuh2-AMP6izV-Vq4gc3WzZ-n-wrdfPT68_w31CZtB50GmH4D-VuAAX742AI_5tHkuo39pO6A-yRkM4qTbU-TZl33BKrk0RFJC9EaBo42eap4lGr8rWMJaoRPyVVufoKLwfYMLcRh9rZNOVtxQKuJ-3_CiX2ziDvqB3Dn9w_BWFiAwR745Hd8duYgzdSoISHHq8zt_fzTE9IpGIxw4NA-m6aOTbmbTaT7uZoCHJ6KIY5hdlXduwe0fu8KbehPWOeAo8gd81GNxQRMt6bcPCz_J_c12mfP8NYfdbPnPWQWk",
  "Nonce": "636683139452671570.Njk3OTQ3MWMtZDdjNi00MTNjLTkwYjctZWY2OTc2ODM0ZjM0OTcxZmVmM2EtMDE1MS00ZjBjLTk2Y2MtMjk1YTI5ODQ3ZjRj",
  "SessionId": "c58ae4b3bbf7877ba5122291e18acc0f",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683139452671570.Njk3OTQ3MWMtZDdjNi00MTNjLTkwYjctZWY2OTc2ODM0ZjM0OTcxZmVmM2EtMDE1MS00ZjBjLTk2Y2MtMjk1YTI5ODQ3ZjRj",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeJBPpSlKPSkVBP4cKt7VgdqFCs-xmrflnUsSvlTRCQ4tfdAPDpRTQt9sUnV6UtT-fO4BvfJvyik8FpclsvL_GmNoKuh2-AMP6izV-Vq4gc3WzZ-n-wrdfPT68_w31CZtB50GmH4D-VuAAX742AI_5tHkuo39pO6A-yRkM4qTbU-TZl33BKrk0RFJC9EaBo42eap4lGr8rWMJaoRPyVVufoKLwfYMLcRh9rZNOVtxQKuJ-3_CiX2ziDvqB3Dn9w_BWFiAwR745Hd8duYgzdSoISHHq8zt_fzTE9IpGIxw4NA-m6aOTbmbTaT7uZoCHJ6KIY5hdlXduwe0fu8KbehPWOeAo8gd81GNxQRMt6bcPCz_J_c12mfP8NYfdbPnPWQWk",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:46:10.361 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 12:46:10.361 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 12:46:10.361 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 12:46:10.361 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:46:10.361 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 12:46:10.366 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 12:46:10.366 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 12:46:10.366 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 12:46:10.378 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****wZKg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****ef89"
    }
  ],
  "ActivityId": "0HLFJTT10Q286:0000001A",
  "TimeStamp": "2018-07-27T18:46:10Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:46:10.378 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeJBPpSlKPSkVBP4cKt7VgdqFCs-xmrflnUsSvlTRCQ4tfdAPDpRTQt9sUnV6UtT-fO4BvfJvyik8FpclsvL_GmNoKuh2-AMP6izV-Vq4gc3WzZ-n-wrdfPT68_w31CZtB50GmH4D-VuAAX742AI_5tHkuo39pO6A-yRkM4qTbU-TZl33BKrk0RFJC9EaBo42eap4lGr8rWMJaoRPyVVufoKLwfYMLcRh9rZNOVtxQKuJ-3_CiX2ziDvqB3Dn9w_BWFiAwR745Hd8duYgzdSoISHHq8zt_fzTE9IpGIxw4NA-m6aOTbmbTaT7uZoCHJ6KIY5hdlXduwe0fu8KbehPWOeAo8gd81GNxQRMt6bcPCz_J_c12mfP8NYfdbPnPWQWk",
  "Scope": "openid profile business email"
}
2018-07-27 12:46:10.378 -06:00 [DBG] Augmenting SignInContext
2018-07-27 12:46:10.378 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 12:46:10.578 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 12:46:10.578 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 12:46:10.578 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 12:46:10.578 -06:00 [DBG] Start token request.
2018-07-27 12:46:10.578 -06:00 [DBG] Start client validation
2018-07-27 12:46:10.578 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 12:46:10.578 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 12:46:10.581 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 12:46:10.581 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 12:46:10.581 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:46:10.581 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 12:46:10.581 -06:00 [DBG] Client validation success
2018-07-27 12:46:10.581 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFJTT10Q28D:00000005",
  "TimeStamp": "2018-07-27T18:46:10Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:46:10.581 -06:00 [DBG] Start token request validation
2018-07-27 12:46:10.581 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 12:46:10.589 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 12:46:10.589 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "516075bdc4522f221d3ad6fb17fcda9eab73db934b62f8512bfd7263c49eef89",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "516075bdc4522f221d3ad6fb17fcda9eab73db934b62f8512bfd7263c49eef89",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 12:46:10.589 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:46:10.590 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 12:46:10.590 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:46:10.603 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:46:10.603 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 12:46:10.603 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 12:46:10.615 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****DD7g"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****by7A"
    }
  ],
  "ActivityId": "0HLFJTT10Q28D:00000005",
  "TimeStamp": "2018-07-27T18:46:10Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:46:10.615 -06:00 [DBG] Token request success.
2018-07-27 12:46:10.618 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 12:46:10.618 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 12:46:10.618 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 12:46:10.618 -06:00 [DBG] Start userinfo request
2018-07-27 12:46:10.618 -06:00 [DBG] Bearer token found in header
2018-07-27 12:46:10.620 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:46:10.620 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:46:10.621 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 12:46:10.621 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532717170,
    "exp": 1532720770,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532717162,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-27 12:46:10.621 -06:00 [DBG] Creating userinfo response
2018-07-27 12:46:10.621 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:46:10.621 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:46:10.622 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-27 12:46:10.622 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:46:10.623 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-27 12:46:10.623 -06:00 [DBG] End userinfo request
2018-07-27 12:47:40.971 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:47:40.972 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:47:40.972 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 12:47:40.972 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 12:47:40.973 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 12:47:40.973 -06:00 [DBG] Start authorize request
2018-07-27 12:47:40.973 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:47:40.973 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:47:40.973 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:47:40.973 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:47:40.973 -06:00 [DBG] No PKCE used.
2018-07-27 12:47:40.973 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:47:40.973 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeYFr5wkygBcaIF73pCuyp8PRYjqSYlUvDZQ4WzlDW-RQIYOyK2ruUVOrgqmNVGjX6MwoIixxVtFfKO86NC4dop5erbgg1Mo9BNhFh8Pa4CffHHT_qiZrv4UYqDyyol1E1fAXidcAfT_jhBOJKF7iqvp1BoVJTaREW4pWDh4tA85nZ5BdeaqE5lVeWNmTL-Ebbkx_InGQMWDjqg2akgn92BblFCVxqvcttg4RwVeLoaJJMZfr-cPJNMngqqiP3hBfuK3UUB4JKGKvPE3B325lcaNeeI0M87enyHlqcjfs1rLq6cFvmy97tSzFHw2n4aiQ-dLSbejVyJYxuGCbyE7J_SUqVexopyrQqa7_iXVzsP1G78q1rpagQE-8Lnoy2ER4k",
  "Nonce": "636683140609569450.MzVmN2ViY2YtNzFhMi00YzE4LTk4ZTUtOGEwZjBjMmFjMTdjNWU5OGIzZDctZWUxMy00ZmI3LTk3ZTktZTYzNjBmNTkwMmE1",
  "SessionId": "c58ae4b3bbf7877ba5122291e18acc0f",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683140609569450.MzVmN2ViY2YtNzFhMi00YzE4LTk4ZTUtOGEwZjBjMmFjMTdjNWU5OGIzZDctZWUxMy00ZmI3LTk3ZTktZTYzNjBmNTkwMmE1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeYFr5wkygBcaIF73pCuyp8PRYjqSYlUvDZQ4WzlDW-RQIYOyK2ruUVOrgqmNVGjX6MwoIixxVtFfKO86NC4dop5erbgg1Mo9BNhFh8Pa4CffHHT_qiZrv4UYqDyyol1E1fAXidcAfT_jhBOJKF7iqvp1BoVJTaREW4pWDh4tA85nZ5BdeaqE5lVeWNmTL-Ebbkx_InGQMWDjqg2akgn92BblFCVxqvcttg4RwVeLoaJJMZfr-cPJNMngqqiP3hBfuK3UUB4JKGKvPE3B325lcaNeeI0M87enyHlqcjfs1rLq6cFvmy97tSzFHw2n4aiQ-dLSbejVyJYxuGCbyE7J_SUqVexopyrQqa7_iXVzsP1G78q1rpagQE-8Lnoy2ER4k",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:47:40.975 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 12:47:40.975 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 12:47:40.975 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 12:47:40.978 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:47:40.979 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:47:40.979 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:47:40.979 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:47:40.979 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:47:40.979 -06:00 [DBG] No PKCE used.
2018-07-27 12:47:40.980 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:47:40.980 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:47:53.522 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 12:47:53.522 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 12:47:53.523 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 12:47:53.523 -06:00 [DBG] Start authorize request
2018-07-27 12:47:53.523 -06:00 [DBG] No user present in authorize request
2018-07-27 12:47:53.523 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:47:53.523 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:47:53.523 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:47:53.523 -06:00 [DBG] No PKCE used.
2018-07-27 12:47:53.523 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:47:53.523 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdFrzKif2xLooQitDCWS_345YGoA9nDO3erCx2WuD7PD3dU20HQJVT0c5G50KJD_d_4DpSKKiH6ASHjHedaDk44PqAlqJIdaDZ4q-J3Ml_Xgd7Sv7c1CVi_hBVCRzDVxWZd2D_UGtOfTepDSSwXQlr_cR734-89Ziovai8d0R_dJqDHxVRiOenkpJIIU40yDFOX_US-h11olvfN0IT_Q5Pq3jvCB0by4XG6dvO_zXhXw3f8cMewNdKNMaUnvUkaA-WyfgaD71R9Uf5q3nfF4IAzetbEicZkAy8FuvurcfGqgPCaIol73NUSZqePs_-usPkQXgavlkyDU_FNrjGayJXtGpUDNtYLKiU9BkHkwtkDgUvNO5xmMGkylLhY99pcKKE",
  "Nonce": "636683140735119220.YmNiMzUxZTgtOTcxYS00NmIzLTgxZjYtZDU4NjEyNDNhMjNlNTE5ODgwMjgtNGI1YS00YjU1LWIzMWYtM2EwYzk1NzRlZDBl",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683140735119220.YmNiMzUxZTgtOTcxYS00NmIzLTgxZjYtZDU4NjEyNDNhMjNlNTE5ODgwMjgtNGI1YS00YjU1LWIzMWYtM2EwYzk1NzRlZDBl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdFrzKif2xLooQitDCWS_345YGoA9nDO3erCx2WuD7PD3dU20HQJVT0c5G50KJD_d_4DpSKKiH6ASHjHedaDk44PqAlqJIdaDZ4q-J3Ml_Xgd7Sv7c1CVi_hBVCRzDVxWZd2D_UGtOfTepDSSwXQlr_cR734-89Ziovai8d0R_dJqDHxVRiOenkpJIIU40yDFOX_US-h11olvfN0IT_Q5Pq3jvCB0by4XG6dvO_zXhXw3f8cMewNdKNMaUnvUkaA-WyfgaD71R9Uf5q3nfF4IAzetbEicZkAy8FuvurcfGqgPCaIol73NUSZqePs_-usPkQXgavlkyDU_FNrjGayJXtGpUDNtYLKiU9BkHkwtkDgUvNO5xmMGkylLhY99pcKKE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:47:53.524 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 12:47:53.527 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:47:53.527 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:47:53.527 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:47:53.527 -06:00 [DBG] No PKCE used.
2018-07-27 12:47:53.527 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:47:53.527 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:48:09.887 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 12:48:16.358 -06:00 [DBG] Augmenting SignInContext
2018-07-27 12:48:16.358 -06:00 [DBG] Adding idp claim with value: local
2018-07-27 12:48:16.358 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-27 12:48:16.358 -06:00 [DBG] Adding auth_time claim with value: 1532717296
2018-07-27 12:48:16.358 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 12:48:16.359 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFJTT10Q286:0000001F",
  "TimeStamp": "2018-07-27T18:48:16Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:48:16.362 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:48:16.362 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:48:16.362 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 12:48:16.362 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 12:48:16.362 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 12:48:16.362 -06:00 [DBG] Start authorize callback request
2018-07-27 12:48:16.362 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:48:16.362 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:48:16.362 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:48:16.362 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:48:16.362 -06:00 [DBG] No PKCE used.
2018-07-27 12:48:16.362 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:48:16.362 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdFrzKif2xLooQitDCWS_345YGoA9nDO3erCx2WuD7PD3dU20HQJVT0c5G50KJD_d_4DpSKKiH6ASHjHedaDk44PqAlqJIdaDZ4q-J3Ml_Xgd7Sv7c1CVi_hBVCRzDVxWZd2D_UGtOfTepDSSwXQlr_cR734-89Ziovai8d0R_dJqDHxVRiOenkpJIIU40yDFOX_US-h11olvfN0IT_Q5Pq3jvCB0by4XG6dvO_zXhXw3f8cMewNdKNMaUnvUkaA-WyfgaD71R9Uf5q3nfF4IAzetbEicZkAy8FuvurcfGqgPCaIol73NUSZqePs_-usPkQXgavlkyDU_FNrjGayJXtGpUDNtYLKiU9BkHkwtkDgUvNO5xmMGkylLhY99pcKKE",
  "Nonce": "636683140735119220.YmNiMzUxZTgtOTcxYS00NmIzLTgxZjYtZDU4NjEyNDNhMjNlNTE5ODgwMjgtNGI1YS00YjU1LWIzMWYtM2EwYzk1NzRlZDBl",
  "SessionId": "42abb54bcd6f1a0f6af9efdf95467595",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683140735119220.YmNiMzUxZTgtOTcxYS00NmIzLTgxZjYtZDU4NjEyNDNhMjNlNTE5ODgwMjgtNGI1YS00YjU1LWIzMWYtM2EwYzk1NzRlZDBl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdFrzKif2xLooQitDCWS_345YGoA9nDO3erCx2WuD7PD3dU20HQJVT0c5G50KJD_d_4DpSKKiH6ASHjHedaDk44PqAlqJIdaDZ4q-J3Ml_Xgd7Sv7c1CVi_hBVCRzDVxWZd2D_UGtOfTepDSSwXQlr_cR734-89Ziovai8d0R_dJqDHxVRiOenkpJIIU40yDFOX_US-h11olvfN0IT_Q5Pq3jvCB0by4XG6dvO_zXhXw3f8cMewNdKNMaUnvUkaA-WyfgaD71R9Uf5q3nfF4IAzetbEicZkAy8FuvurcfGqgPCaIol73NUSZqePs_-usPkQXgavlkyDU_FNrjGayJXtGpUDNtYLKiU9BkHkwtkDgUvNO5xmMGkylLhY99pcKKE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:48:16.364 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 12:48:16.364 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 12:48:16.365 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 12:48:16.367 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:48:16.367 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:48:16.367 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:48:16.368 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:48:16.368 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:48:16.368 -06:00 [DBG] No PKCE used.
2018-07-27 12:48:16.368 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:48:16.368 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:48:20.765 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 12:48:20.765 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:48:20.765 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:48:20.768 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:48:20.768 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:48:20.768 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:48:20.768 -06:00 [DBG] No PKCE used.
2018-07-27 12:48:20.768 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:48:20.771 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:48:20.771 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:48:20.771 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 12:48:20.771 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 12:48:20.771 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 12:48:20.771 -06:00 [DBG] Start authorize callback request
2018-07-27 12:48:20.771 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:48:20.771 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:48:20.771 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:48:20.771 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:48:20.771 -06:00 [DBG] No PKCE used.
2018-07-27 12:48:20.772 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:48:20.772 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdFrzKif2xLooQitDCWS_345YGoA9nDO3erCx2WuD7PD3dU20HQJVT0c5G50KJD_d_4DpSKKiH6ASHjHedaDk44PqAlqJIdaDZ4q-J3Ml_Xgd7Sv7c1CVi_hBVCRzDVxWZd2D_UGtOfTepDSSwXQlr_cR734-89Ziovai8d0R_dJqDHxVRiOenkpJIIU40yDFOX_US-h11olvfN0IT_Q5Pq3jvCB0by4XG6dvO_zXhXw3f8cMewNdKNMaUnvUkaA-WyfgaD71R9Uf5q3nfF4IAzetbEicZkAy8FuvurcfGqgPCaIol73NUSZqePs_-usPkQXgavlkyDU_FNrjGayJXtGpUDNtYLKiU9BkHkwtkDgUvNO5xmMGkylLhY99pcKKE",
  "Nonce": "636683140735119220.YmNiMzUxZTgtOTcxYS00NmIzLTgxZjYtZDU4NjEyNDNhMjNlNTE5ODgwMjgtNGI1YS00YjU1LWIzMWYtM2EwYzk1NzRlZDBl",
  "SessionId": "42abb54bcd6f1a0f6af9efdf95467595",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683140735119220.YmNiMzUxZTgtOTcxYS00NmIzLTgxZjYtZDU4NjEyNDNhMjNlNTE5ODgwMjgtNGI1YS00YjU1LWIzMWYtM2EwYzk1NzRlZDBl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdFrzKif2xLooQitDCWS_345YGoA9nDO3erCx2WuD7PD3dU20HQJVT0c5G50KJD_d_4DpSKKiH6ASHjHedaDk44PqAlqJIdaDZ4q-J3Ml_Xgd7Sv7c1CVi_hBVCRzDVxWZd2D_UGtOfTepDSSwXQlr_cR734-89Ziovai8d0R_dJqDHxVRiOenkpJIIU40yDFOX_US-h11olvfN0IT_Q5Pq3jvCB0by4XG6dvO_zXhXw3f8cMewNdKNMaUnvUkaA-WyfgaD71R9Uf5q3nfF4IAzetbEicZkAy8FuvurcfGqgPCaIol73NUSZqePs_-usPkQXgavlkyDU_FNrjGayJXtGpUDNtYLKiU9BkHkwtkDgUvNO5xmMGkylLhY99pcKKE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:48:20.773 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 12:48:20.773 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 12:48:20.773 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 12:48:20.773 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:48:20.773 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 12:48:20.778 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 12:48:20.778 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 12:48:20.778 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 12:48:20.790 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****pW-Q"
    },
    {
      "TokenType": "code",
      "TokenValue": "****972f"
    }
  ],
  "ActivityId": "0HLFJTT10Q286:00000023",
  "TimeStamp": "2018-07-27T18:48:20Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:48:20.790 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdFrzKif2xLooQitDCWS_345YGoA9nDO3erCx2WuD7PD3dU20HQJVT0c5G50KJD_d_4DpSKKiH6ASHjHedaDk44PqAlqJIdaDZ4q-J3Ml_Xgd7Sv7c1CVi_hBVCRzDVxWZd2D_UGtOfTepDSSwXQlr_cR734-89Ziovai8d0R_dJqDHxVRiOenkpJIIU40yDFOX_US-h11olvfN0IT_Q5Pq3jvCB0by4XG6dvO_zXhXw3f8cMewNdKNMaUnvUkaA-WyfgaD71R9Uf5q3nfF4IAzetbEicZkAy8FuvurcfGqgPCaIol73NUSZqePs_-usPkQXgavlkyDU_FNrjGayJXtGpUDNtYLKiU9BkHkwtkDgUvNO5xmMGkylLhY99pcKKE",
  "Scope": "openid profile business email"
}
2018-07-27 12:48:20.791 -06:00 [DBG] Augmenting SignInContext
2018-07-27 12:48:20.791 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 12:48:21.121 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 12:48:21.125 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 12:48:21.125 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 12:48:21.125 -06:00 [DBG] Start token request.
2018-07-27 12:48:21.126 -06:00 [DBG] Start client validation
2018-07-27 12:48:21.126 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 12:48:21.126 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 12:48:21.128 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 12:48:21.128 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 12:48:21.128 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:48:21.128 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 12:48:21.128 -06:00 [DBG] Client validation success
2018-07-27 12:48:21.128 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFJTT10Q28J:00000001",
  "TimeStamp": "2018-07-27T18:48:21Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:48:21.128 -06:00 [DBG] Start token request validation
2018-07-27 12:48:21.128 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 12:48:21.136 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 12:48:21.136 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "f6e3f14ffe041d7cd3f1c5c93b04d90474123a09cfddb17398c8943c1a49972f",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "f6e3f14ffe041d7cd3f1c5c93b04d90474123a09cfddb17398c8943c1a49972f",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 12:48:21.136 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:48:21.136 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 12:48:21.136 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:48:21.149 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:48:21.149 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 12:48:21.149 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 12:48:21.160 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****o9qQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****FL1A"
    }
  ],
  "ActivityId": "0HLFJTT10Q28J:00000001",
  "TimeStamp": "2018-07-27T18:48:21Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:48:21.160 -06:00 [DBG] Token request success.
2018-07-27 12:48:21.162 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 12:48:21.163 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 12:48:21.163 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 12:48:21.163 -06:00 [DBG] Start userinfo request
2018-07-27 12:48:21.163 -06:00 [DBG] Bearer token found in header
2018-07-27 12:48:21.165 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:48:21.165 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:48:21.166 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 12:48:21.166 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532717301,
    "exp": 1532720901,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532717296,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-27 12:48:21.167 -06:00 [DBG] Creating userinfo response
2018-07-27 12:48:21.167 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:48:21.167 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:48:21.167 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-27 12:48:21.167 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:48:21.168 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-27 12:48:21.168 -06:00 [DBG] End userinfo request
2018-07-27 12:52:20.507 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-27 12:52:20.512 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-27 12:52:20.512 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-27 12:52:20.512 -06:00 [DBG] Start discovery request
2018-07-27 12:52:20.638 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-27 12:52:20.638 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-27 12:52:20.638 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-27 12:52:20.638 -06:00 [DBG] Start key discovery request
2018-07-27 12:52:20.713 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 12:52:20.714 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 12:52:20.714 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 12:52:20.714 -06:00 [DBG] Start authorize request
2018-07-27 12:52:20.714 -06:00 [DBG] No user present in authorize request
2018-07-27 12:52:20.714 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:52:20.714 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:52:20.714 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:52:20.714 -06:00 [DBG] No PKCE used.
2018-07-27 12:52:20.714 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:52:20.714 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe-Qz_E22YFLueyLjgXh6IMAvA6WvwqoYWjajAH3jMMD2XpnRO9FeUXDQGTkX5VTU_VaK0YkubSmcO7OAthYfDzNw20g4HntMPyoUcInEBaJYbpeVpnhPtAR5e5PX1pUuIJleemPlWgIV_ZD92dOf2Q8G8mqV1s4lrDLmE10Ir52p3qqzgtcI74mVIRL7tvRRa-gK0EQlwv7goOUQb-BFt3a0Tz1YdyOVk5fX0oJYFMhHOPySAuhcrESsGLco0PZeO2vo2MrGhHhPvPdeVW9TMIRNN1P1iep6_g6vLO_dvSwWdpi1QmzFrBHiYVVnpQV5td9RJ2E4MiLRsh1cUzT8ns5ucjt9zNNPsbG9e-QMQJ19JpGAsx9OCdfzqpzgapZig",
  "Nonce": "636683143406942900.Mzg2MDFkZGQtZTYwMy00ZGMzLWE3MTgtMzI0YTAxMGYyYWJjNTVmMDQ0ODctOWE0ZS00ZGU0LThlNGEtZTY4OGU3ZWMzNWYx",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683143406942900.Mzg2MDFkZGQtZTYwMy00ZGMzLWE3MTgtMzI0YTAxMGYyYWJjNTVmMDQ0ODctOWE0ZS00ZGU0LThlNGEtZTY4OGU3ZWMzNWYx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe-Qz_E22YFLueyLjgXh6IMAvA6WvwqoYWjajAH3jMMD2XpnRO9FeUXDQGTkX5VTU_VaK0YkubSmcO7OAthYfDzNw20g4HntMPyoUcInEBaJYbpeVpnhPtAR5e5PX1pUuIJleemPlWgIV_ZD92dOf2Q8G8mqV1s4lrDLmE10Ir52p3qqzgtcI74mVIRL7tvRRa-gK0EQlwv7goOUQb-BFt3a0Tz1YdyOVk5fX0oJYFMhHOPySAuhcrESsGLco0PZeO2vo2MrGhHhPvPdeVW9TMIRNN1P1iep6_g6vLO_dvSwWdpi1QmzFrBHiYVVnpQV5td9RJ2E4MiLRsh1cUzT8ns5ucjt9zNNPsbG9e-QMQJ19JpGAsx9OCdfzqpzgapZig",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:52:20.714 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 12:52:20.717 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:52:20.717 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:52:20.718 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:52:20.718 -06:00 [DBG] No PKCE used.
2018-07-27 12:52:20.718 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:52:20.718 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:52:29.002 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 12:52:32.635 -06:00 [DBG] Augmenting SignInContext
2018-07-27 12:52:32.635 -06:00 [DBG] Adding idp claim with value: local
2018-07-27 12:52:32.635 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-27 12:52:32.635 -06:00 [DBG] Adding auth_time claim with value: 1532717552
2018-07-27 12:52:32.635 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 12:52:34.439 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFJTT10Q286:00000026",
  "TimeStamp": "2018-07-27T18:52:34Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:52:34.443 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:52:34.443 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:52:34.443 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 12:52:34.443 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 12:52:34.443 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 12:52:34.443 -06:00 [DBG] Start authorize callback request
2018-07-27 12:52:34.443 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:52:34.443 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:52:34.443 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:52:34.443 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:52:34.443 -06:00 [DBG] No PKCE used.
2018-07-27 12:52:34.443 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:52:34.444 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe-Qz_E22YFLueyLjgXh6IMAvA6WvwqoYWjajAH3jMMD2XpnRO9FeUXDQGTkX5VTU_VaK0YkubSmcO7OAthYfDzNw20g4HntMPyoUcInEBaJYbpeVpnhPtAR5e5PX1pUuIJleemPlWgIV_ZD92dOf2Q8G8mqV1s4lrDLmE10Ir52p3qqzgtcI74mVIRL7tvRRa-gK0EQlwv7goOUQb-BFt3a0Tz1YdyOVk5fX0oJYFMhHOPySAuhcrESsGLco0PZeO2vo2MrGhHhPvPdeVW9TMIRNN1P1iep6_g6vLO_dvSwWdpi1QmzFrBHiYVVnpQV5td9RJ2E4MiLRsh1cUzT8ns5ucjt9zNNPsbG9e-QMQJ19JpGAsx9OCdfzqpzgapZig",
  "Nonce": "636683143406942900.Mzg2MDFkZGQtZTYwMy00ZGMzLWE3MTgtMzI0YTAxMGYyYWJjNTVmMDQ0ODctOWE0ZS00ZGU0LThlNGEtZTY4OGU3ZWMzNWYx",
  "SessionId": "4a3cd2e7e6ef18e077733a5ecd8970f3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683143406942900.Mzg2MDFkZGQtZTYwMy00ZGMzLWE3MTgtMzI0YTAxMGYyYWJjNTVmMDQ0ODctOWE0ZS00ZGU0LThlNGEtZTY4OGU3ZWMzNWYx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe-Qz_E22YFLueyLjgXh6IMAvA6WvwqoYWjajAH3jMMD2XpnRO9FeUXDQGTkX5VTU_VaK0YkubSmcO7OAthYfDzNw20g4HntMPyoUcInEBaJYbpeVpnhPtAR5e5PX1pUuIJleemPlWgIV_ZD92dOf2Q8G8mqV1s4lrDLmE10Ir52p3qqzgtcI74mVIRL7tvRRa-gK0EQlwv7goOUQb-BFt3a0Tz1YdyOVk5fX0oJYFMhHOPySAuhcrESsGLco0PZeO2vo2MrGhHhPvPdeVW9TMIRNN1P1iep6_g6vLO_dvSwWdpi1QmzFrBHiYVVnpQV5td9RJ2E4MiLRsh1cUzT8ns5ucjt9zNNPsbG9e-QMQJ19JpGAsx9OCdfzqpzgapZig",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:52:34.445 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 12:52:34.445 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 12:52:34.445 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 12:52:34.447 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:52:34.447 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:52:34.448 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:52:34.448 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:52:34.448 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:52:34.448 -06:00 [DBG] No PKCE used.
2018-07-27 12:52:34.448 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:52:34.448 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:52:40.745 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 12:52:40.745 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:52:40.745 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:52:40.748 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:52:40.748 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:52:40.748 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:52:40.748 -06:00 [DBG] No PKCE used.
2018-07-27 12:52:40.748 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:52:40.752 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:52:40.752 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:52:40.752 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 12:52:40.752 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 12:52:40.752 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 12:52:40.752 -06:00 [DBG] Start authorize callback request
2018-07-27 12:52:40.752 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:52:40.752 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:52:40.752 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:52:40.752 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:52:40.752 -06:00 [DBG] No PKCE used.
2018-07-27 12:52:40.752 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:52:40.752 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe-Qz_E22YFLueyLjgXh6IMAvA6WvwqoYWjajAH3jMMD2XpnRO9FeUXDQGTkX5VTU_VaK0YkubSmcO7OAthYfDzNw20g4HntMPyoUcInEBaJYbpeVpnhPtAR5e5PX1pUuIJleemPlWgIV_ZD92dOf2Q8G8mqV1s4lrDLmE10Ir52p3qqzgtcI74mVIRL7tvRRa-gK0EQlwv7goOUQb-BFt3a0Tz1YdyOVk5fX0oJYFMhHOPySAuhcrESsGLco0PZeO2vo2MrGhHhPvPdeVW9TMIRNN1P1iep6_g6vLO_dvSwWdpi1QmzFrBHiYVVnpQV5td9RJ2E4MiLRsh1cUzT8ns5ucjt9zNNPsbG9e-QMQJ19JpGAsx9OCdfzqpzgapZig",
  "Nonce": "636683143406942900.Mzg2MDFkZGQtZTYwMy00ZGMzLWE3MTgtMzI0YTAxMGYyYWJjNTVmMDQ0ODctOWE0ZS00ZGU0LThlNGEtZTY4OGU3ZWMzNWYx",
  "SessionId": "4a3cd2e7e6ef18e077733a5ecd8970f3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683143406942900.Mzg2MDFkZGQtZTYwMy00ZGMzLWE3MTgtMzI0YTAxMGYyYWJjNTVmMDQ0ODctOWE0ZS00ZGU0LThlNGEtZTY4OGU3ZWMzNWYx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe-Qz_E22YFLueyLjgXh6IMAvA6WvwqoYWjajAH3jMMD2XpnRO9FeUXDQGTkX5VTU_VaK0YkubSmcO7OAthYfDzNw20g4HntMPyoUcInEBaJYbpeVpnhPtAR5e5PX1pUuIJleemPlWgIV_ZD92dOf2Q8G8mqV1s4lrDLmE10Ir52p3qqzgtcI74mVIRL7tvRRa-gK0EQlwv7goOUQb-BFt3a0Tz1YdyOVk5fX0oJYFMhHOPySAuhcrESsGLco0PZeO2vo2MrGhHhPvPdeVW9TMIRNN1P1iep6_g6vLO_dvSwWdpi1QmzFrBHiYVVnpQV5td9RJ2E4MiLRsh1cUzT8ns5ucjt9zNNPsbG9e-QMQJ19JpGAsx9OCdfzqpzgapZig",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:52:40.754 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 12:52:40.754 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 12:52:40.754 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 12:52:40.754 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:52:40.754 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 12:52:40.759 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 12:52:40.759 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 12:52:40.759 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 12:52:40.771 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****X7VQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****a7f1"
    }
  ],
  "ActivityId": "0HLFJTT10Q286:0000002A",
  "TimeStamp": "2018-07-27T18:52:40Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:52:40.771 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe-Qz_E22YFLueyLjgXh6IMAvA6WvwqoYWjajAH3jMMD2XpnRO9FeUXDQGTkX5VTU_VaK0YkubSmcO7OAthYfDzNw20g4HntMPyoUcInEBaJYbpeVpnhPtAR5e5PX1pUuIJleemPlWgIV_ZD92dOf2Q8G8mqV1s4lrDLmE10Ir52p3qqzgtcI74mVIRL7tvRRa-gK0EQlwv7goOUQb-BFt3a0Tz1YdyOVk5fX0oJYFMhHOPySAuhcrESsGLco0PZeO2vo2MrGhHhPvPdeVW9TMIRNN1P1iep6_g6vLO_dvSwWdpi1QmzFrBHiYVVnpQV5td9RJ2E4MiLRsh1cUzT8ns5ucjt9zNNPsbG9e-QMQJ19JpGAsx9OCdfzqpzgapZig",
  "Scope": "openid profile business email"
}
2018-07-27 12:52:40.771 -06:00 [DBG] Augmenting SignInContext
2018-07-27 12:52:40.771 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 12:52:41.090 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 12:52:41.090 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 12:52:41.091 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 12:52:41.091 -06:00 [DBG] Start token request.
2018-07-27 12:52:41.091 -06:00 [DBG] Start client validation
2018-07-27 12:52:41.091 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 12:52:41.091 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 12:52:41.093 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 12:52:41.093 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 12:52:41.093 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:52:41.093 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 12:52:41.093 -06:00 [DBG] Client validation success
2018-07-27 12:52:41.093 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFJTT10Q28K:00000003",
  "TimeStamp": "2018-07-27T18:52:41Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:52:41.093 -06:00 [DBG] Start token request validation
2018-07-27 12:52:41.094 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 12:52:41.103 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 12:52:41.103 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "6919216e173c1b34d36bd77a534275cc66e30b2ef46b3c1e2fd6199c4e99a7f1",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "6919216e173c1b34d36bd77a534275cc66e30b2ef46b3c1e2fd6199c4e99a7f1",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 12:52:41.103 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:52:41.103 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 12:52:41.103 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:52:41.116 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:52:41.116 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 12:52:41.116 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 12:52:41.128 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****kXAQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****lIbA"
    }
  ],
  "ActivityId": "0HLFJTT10Q28K:00000003",
  "TimeStamp": "2018-07-27T18:52:41Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:52:41.128 -06:00 [DBG] Token request success.
2018-07-27 12:52:41.135 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 12:52:41.135 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 12:52:41.135 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 12:52:41.135 -06:00 [DBG] Start userinfo request
2018-07-27 12:52:41.136 -06:00 [DBG] Bearer token found in header
2018-07-27 12:52:41.138 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:52:41.138 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:52:41.139 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 12:52:41.139 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532717561,
    "exp": 1532721161,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532717552,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-27 12:52:41.139 -06:00 [DBG] Creating userinfo response
2018-07-27 12:52:41.139 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:52:41.139 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:52:41.139 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-27 12:52:41.139 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:52:41.140 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-27 12:52:41.141 -06:00 [DBG] End userinfo request
2018-07-27 12:57:43.760 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-27 12:57:43.783 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-27 12:57:43.783 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-27 12:57:43.783 -06:00 [DBG] Start discovery request
2018-07-27 12:57:43.916 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-27 12:57:43.917 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-27 12:57:43.917 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-27 12:57:43.917 -06:00 [DBG] Start key discovery request
2018-07-27 12:57:44.001 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 12:57:44.001 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 12:57:44.001 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 12:57:44.001 -06:00 [DBG] Start authorize request
2018-07-27 12:57:44.001 -06:00 [DBG] No user present in authorize request
2018-07-27 12:57:44.001 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:57:44.001 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:57:44.001 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:57:44.001 -06:00 [DBG] No PKCE used.
2018-07-27 12:57:44.002 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:57:44.002 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcqT2CBjOhGKtPPUyOHlRTXlahapTOTTAlR5vydDMaaBHmHwjOIkDfrdsFTJzu1kz1iCHk2iEuNIakQgee_RLNf8AvUEpKqwAo7bFWRvX044b4F-UJTFKdGc-NlN8wCzkudQXMGJCQtMvhsRBlbPMYXkGhnflxHLQ0AmgYVu0B_aDKxQen_rzUo5A_nf7cHEVIvXPn8fNtfe_vhIm9_UutFaOIZShAqB42xmSFBY4oG6B4yhOe378wUpEmK4D2OcBlqpiVFTrZvW0_gn6elzNsLZpbzUITECfnJiF6ukQOqSy0THBPxaXO5TDojIo4Ru9mMu-scLnCbIbuE3QTIfjA3OMj8U8gGjt0vmdyIgUMdMrU1HsOudZI_gq4yrqJY-Kk",
  "Nonce": "636683146639685120.M2EyODE3NDItMmQ2Mi00N2RjLThkNWQtNzQwYjVjZjMxZjk3MTI5NjVjNjItZjZkYS00MDJlLTlmODQtYTA4OTc0MTYzNDE2",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683146639685120.M2EyODE3NDItMmQ2Mi00N2RjLThkNWQtNzQwYjVjZjMxZjk3MTI5NjVjNjItZjZkYS00MDJlLTlmODQtYTA4OTc0MTYzNDE2",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcqT2CBjOhGKtPPUyOHlRTXlahapTOTTAlR5vydDMaaBHmHwjOIkDfrdsFTJzu1kz1iCHk2iEuNIakQgee_RLNf8AvUEpKqwAo7bFWRvX044b4F-UJTFKdGc-NlN8wCzkudQXMGJCQtMvhsRBlbPMYXkGhnflxHLQ0AmgYVu0B_aDKxQen_rzUo5A_nf7cHEVIvXPn8fNtfe_vhIm9_UutFaOIZShAqB42xmSFBY4oG6B4yhOe378wUpEmK4D2OcBlqpiVFTrZvW0_gn6elzNsLZpbzUITECfnJiF6ukQOqSy0THBPxaXO5TDojIo4Ru9mMu-scLnCbIbuE3QTIfjA3OMj8U8gGjt0vmdyIgUMdMrU1HsOudZI_gq4yrqJY-Kk",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:57:44.002 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 12:57:44.004 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:57:44.004 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:57:44.004 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:57:44.004 -06:00 [DBG] No PKCE used.
2018-07-27 12:57:44.004 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:57:44.005 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:57:52.411 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 12:57:58.551 -06:00 [DBG] Augmenting SignInContext
2018-07-27 12:57:58.551 -06:00 [DBG] Adding idp claim with value: local
2018-07-27 12:57:58.551 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-27 12:57:58.551 -06:00 [DBG] Adding auth_time claim with value: 1532717878
2018-07-27 12:57:58.551 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 12:57:58.552 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFJTT10Q28M:00000003",
  "TimeStamp": "2018-07-27T18:57:58Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:57:58.555 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:57:58.555 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:57:58.555 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 12:57:58.555 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 12:57:58.555 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 12:57:58.555 -06:00 [DBG] Start authorize callback request
2018-07-27 12:57:58.555 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:57:58.555 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:57:58.555 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:57:58.555 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:57:58.555 -06:00 [DBG] No PKCE used.
2018-07-27 12:57:58.555 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:57:58.556 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcqT2CBjOhGKtPPUyOHlRTXlahapTOTTAlR5vydDMaaBHmHwjOIkDfrdsFTJzu1kz1iCHk2iEuNIakQgee_RLNf8AvUEpKqwAo7bFWRvX044b4F-UJTFKdGc-NlN8wCzkudQXMGJCQtMvhsRBlbPMYXkGhnflxHLQ0AmgYVu0B_aDKxQen_rzUo5A_nf7cHEVIvXPn8fNtfe_vhIm9_UutFaOIZShAqB42xmSFBY4oG6B4yhOe378wUpEmK4D2OcBlqpiVFTrZvW0_gn6elzNsLZpbzUITECfnJiF6ukQOqSy0THBPxaXO5TDojIo4Ru9mMu-scLnCbIbuE3QTIfjA3OMj8U8gGjt0vmdyIgUMdMrU1HsOudZI_gq4yrqJY-Kk",
  "Nonce": "636683146639685120.M2EyODE3NDItMmQ2Mi00N2RjLThkNWQtNzQwYjVjZjMxZjk3MTI5NjVjNjItZjZkYS00MDJlLTlmODQtYTA4OTc0MTYzNDE2",
  "SessionId": "1ec418f88996bd0eecfa3dab51283f7b",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683146639685120.M2EyODE3NDItMmQ2Mi00N2RjLThkNWQtNzQwYjVjZjMxZjk3MTI5NjVjNjItZjZkYS00MDJlLTlmODQtYTA4OTc0MTYzNDE2",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcqT2CBjOhGKtPPUyOHlRTXlahapTOTTAlR5vydDMaaBHmHwjOIkDfrdsFTJzu1kz1iCHk2iEuNIakQgee_RLNf8AvUEpKqwAo7bFWRvX044b4F-UJTFKdGc-NlN8wCzkudQXMGJCQtMvhsRBlbPMYXkGhnflxHLQ0AmgYVu0B_aDKxQen_rzUo5A_nf7cHEVIvXPn8fNtfe_vhIm9_UutFaOIZShAqB42xmSFBY4oG6B4yhOe378wUpEmK4D2OcBlqpiVFTrZvW0_gn6elzNsLZpbzUITECfnJiF6ukQOqSy0THBPxaXO5TDojIo4Ru9mMu-scLnCbIbuE3QTIfjA3OMj8U8gGjt0vmdyIgUMdMrU1HsOudZI_gq4yrqJY-Kk",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:57:58.557 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 12:57:58.557 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 12:57:58.557 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 12:57:58.560 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:57:58.560 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:57:58.560 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:57:58.560 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:57:58.560 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:57:58.560 -06:00 [DBG] No PKCE used.
2018-07-27 12:57:58.560 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:57:58.560 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:58:03.423 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 12:58:03.423 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:58:03.423 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:58:03.426 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:58:03.426 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:58:03.426 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:58:03.426 -06:00 [DBG] No PKCE used.
2018-07-27 12:58:03.426 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:58:03.429 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:58:03.429 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:58:03.429 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 12:58:03.429 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 12:58:03.429 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 12:58:03.429 -06:00 [DBG] Start authorize callback request
2018-07-27 12:58:03.429 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:58:03.429 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:58:03.430 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:58:03.430 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:58:03.430 -06:00 [DBG] No PKCE used.
2018-07-27 12:58:03.430 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:58:03.430 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcqT2CBjOhGKtPPUyOHlRTXlahapTOTTAlR5vydDMaaBHmHwjOIkDfrdsFTJzu1kz1iCHk2iEuNIakQgee_RLNf8AvUEpKqwAo7bFWRvX044b4F-UJTFKdGc-NlN8wCzkudQXMGJCQtMvhsRBlbPMYXkGhnflxHLQ0AmgYVu0B_aDKxQen_rzUo5A_nf7cHEVIvXPn8fNtfe_vhIm9_UutFaOIZShAqB42xmSFBY4oG6B4yhOe378wUpEmK4D2OcBlqpiVFTrZvW0_gn6elzNsLZpbzUITECfnJiF6ukQOqSy0THBPxaXO5TDojIo4Ru9mMu-scLnCbIbuE3QTIfjA3OMj8U8gGjt0vmdyIgUMdMrU1HsOudZI_gq4yrqJY-Kk",
  "Nonce": "636683146639685120.M2EyODE3NDItMmQ2Mi00N2RjLThkNWQtNzQwYjVjZjMxZjk3MTI5NjVjNjItZjZkYS00MDJlLTlmODQtYTA4OTc0MTYzNDE2",
  "SessionId": "1ec418f88996bd0eecfa3dab51283f7b",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683146639685120.M2EyODE3NDItMmQ2Mi00N2RjLThkNWQtNzQwYjVjZjMxZjk3MTI5NjVjNjItZjZkYS00MDJlLTlmODQtYTA4OTc0MTYzNDE2",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcqT2CBjOhGKtPPUyOHlRTXlahapTOTTAlR5vydDMaaBHmHwjOIkDfrdsFTJzu1kz1iCHk2iEuNIakQgee_RLNf8AvUEpKqwAo7bFWRvX044b4F-UJTFKdGc-NlN8wCzkudQXMGJCQtMvhsRBlbPMYXkGhnflxHLQ0AmgYVu0B_aDKxQen_rzUo5A_nf7cHEVIvXPn8fNtfe_vhIm9_UutFaOIZShAqB42xmSFBY4oG6B4yhOe378wUpEmK4D2OcBlqpiVFTrZvW0_gn6elzNsLZpbzUITECfnJiF6ukQOqSy0THBPxaXO5TDojIo4Ru9mMu-scLnCbIbuE3QTIfjA3OMj8U8gGjt0vmdyIgUMdMrU1HsOudZI_gq4yrqJY-Kk",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:58:03.431 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 12:58:03.431 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 12:58:03.431 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 12:58:03.431 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:58:03.431 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 12:58:03.436 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 12:58:03.436 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 12:58:03.436 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 12:58:03.448 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****B2hA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****7ffb"
    }
  ],
  "ActivityId": "0HLFJTT10Q28M:00000007",
  "TimeStamp": "2018-07-27T18:58:03Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:58:03.448 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcqT2CBjOhGKtPPUyOHlRTXlahapTOTTAlR5vydDMaaBHmHwjOIkDfrdsFTJzu1kz1iCHk2iEuNIakQgee_RLNf8AvUEpKqwAo7bFWRvX044b4F-UJTFKdGc-NlN8wCzkudQXMGJCQtMvhsRBlbPMYXkGhnflxHLQ0AmgYVu0B_aDKxQen_rzUo5A_nf7cHEVIvXPn8fNtfe_vhIm9_UutFaOIZShAqB42xmSFBY4oG6B4yhOe378wUpEmK4D2OcBlqpiVFTrZvW0_gn6elzNsLZpbzUITECfnJiF6ukQOqSy0THBPxaXO5TDojIo4Ru9mMu-scLnCbIbuE3QTIfjA3OMj8U8gGjt0vmdyIgUMdMrU1HsOudZI_gq4yrqJY-Kk",
  "Scope": "openid profile business email"
}
2018-07-27 12:58:03.448 -06:00 [DBG] Augmenting SignInContext
2018-07-27 12:58:03.448 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 12:58:03.681 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 12:58:03.682 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 12:58:03.682 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 12:58:03.682 -06:00 [DBG] Start token request.
2018-07-27 12:58:03.682 -06:00 [DBG] Start client validation
2018-07-27 12:58:03.682 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 12:58:03.682 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 12:58:03.684 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 12:58:03.684 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 12:58:03.684 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:58:03.684 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 12:58:03.684 -06:00 [DBG] Client validation success
2018-07-27 12:58:03.684 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFJTT10Q28L:00000003",
  "TimeStamp": "2018-07-27T18:58:03Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:58:03.684 -06:00 [DBG] Start token request validation
2018-07-27 12:58:03.684 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 12:58:03.692 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 12:58:03.692 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "f9cf845df6287a52abfb64f5040c3f2c9104d0381fb6c17c9990748fb3407ffb",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "f9cf845df6287a52abfb64f5040c3f2c9104d0381fb6c17c9990748fb3407ffb",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 12:58:03.692 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:58:03.692 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 12:58:03.692 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:58:03.705 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:58:03.705 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 12:58:03.706 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 12:58:03.717 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Cauw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****YTlA"
    }
  ],
  "ActivityId": "0HLFJTT10Q28L:00000003",
  "TimeStamp": "2018-07-27T18:58:03Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:58:03.717 -06:00 [DBG] Token request success.
2018-07-27 12:58:03.724 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 12:58:03.724 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 12:58:03.724 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 12:58:03.725 -06:00 [DBG] Start userinfo request
2018-07-27 12:58:03.725 -06:00 [DBG] Bearer token found in header
2018-07-27 12:58:03.726 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:58:03.727 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:58:03.728 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 12:58:03.728 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532717883,
    "exp": 1532721483,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532717878,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-27 12:58:03.728 -06:00 [DBG] Creating userinfo response
2018-07-27 12:58:03.728 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:58:03.728 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:58:03.728 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-27 12:58:03.728 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:58:03.729 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-27 12:58:03.730 -06:00 [DBG] End userinfo request
2018-07-27 12:58:58.473 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-27 12:58:58.473 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-27 12:58:58.473 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-27 12:58:58.473 -06:00 [DBG] Start discovery request
2018-07-27 12:58:58.601 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-27 12:58:58.601 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-27 12:58:58.601 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-27 12:58:58.602 -06:00 [DBG] Start key discovery request
2018-07-27 12:58:58.674 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-27 12:58:58.675 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-27 12:58:58.675 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-27 12:58:58.675 -06:00 [DBG] Start authorize request
2018-07-27 12:58:58.675 -06:00 [DBG] No user present in authorize request
2018-07-27 12:58:58.675 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:58:58.675 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:58:58.675 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:58:58.675 -06:00 [DBG] No PKCE used.
2018-07-27 12:58:58.675 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:58:58.675 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfS5_y7_gykyYCsT5KSVUth3tUyTYGnjBg34yhpVrQg7S_SYBpXb8m3CB_mbKslDs5UQZ2vAfKKvxsybLsAU07vXDEda5zrhJDLzAzIYbLoaHaOuGnxYgYO-LDVmNtr1gTtTlWFFX1N0S4n4lTV193stVZclAzNu52Dr03ks6a4_tIfCosCgkyfrv0jXXMYeXDCI7nvTnXSD6fK-KkM3UdxaTOSUA80oS-Y_NFYTLhO0jRjlBa30aBk4H45XWRiBN9dXUzHwRbt---4T0ivDDFTVCRgEvxAZnkbruj0KJzSREVaaxZd049cAxGHj1CGkvZz0OeKMeuD2LWD_rbOO8zUxy6MTKYWGXrzp6Kv-v2zs7Sk4y48sKP8BxAaGvfEoUs",
  "Nonce": "636683147386557640.YzM3OTE3MmUtZDMwNy00MjIxLTg5NzQtMGZiNzM5N2Y1NzIyYmI0ODQzNmYtMzU1Yy00OWRhLWIzMzQtMDU2NTIzNmQwZjA0",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683147386557640.YzM3OTE3MmUtZDMwNy00MjIxLTg5NzQtMGZiNzM5N2Y1NzIyYmI0ODQzNmYtMzU1Yy00OWRhLWIzMzQtMDU2NTIzNmQwZjA0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfS5_y7_gykyYCsT5KSVUth3tUyTYGnjBg34yhpVrQg7S_SYBpXb8m3CB_mbKslDs5UQZ2vAfKKvxsybLsAU07vXDEda5zrhJDLzAzIYbLoaHaOuGnxYgYO-LDVmNtr1gTtTlWFFX1N0S4n4lTV193stVZclAzNu52Dr03ks6a4_tIfCosCgkyfrv0jXXMYeXDCI7nvTnXSD6fK-KkM3UdxaTOSUA80oS-Y_NFYTLhO0jRjlBa30aBk4H45XWRiBN9dXUzHwRbt---4T0ivDDFTVCRgEvxAZnkbruj0KJzSREVaaxZd049cAxGHj1CGkvZz0OeKMeuD2LWD_rbOO8zUxy6MTKYWGXrzp6Kv-v2zs7Sk4y48sKP8BxAaGvfEoUs",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:58:58.675 -06:00 [INF] Showing login: User is not authenticated
2018-07-27 12:58:58.678 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:58:58.678 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:58:58.678 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:58:58.678 -06:00 [DBG] No PKCE used.
2018-07-27 12:58:58.678 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:58:58.678 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:59:06.246 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 12:59:08.901 -06:00 [DBG] Augmenting SignInContext
2018-07-27 12:59:08.901 -06:00 [DBG] Adding idp claim with value: local
2018-07-27 12:59:08.901 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-27 12:59:08.901 -06:00 [DBG] Adding auth_time claim with value: 1532717948
2018-07-27 12:59:08.901 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 12:59:08.902 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFJTT10Q28M:0000000A",
  "TimeStamp": "2018-07-27T18:59:08Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:59:08.905 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:59:08.905 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:59:08.905 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 12:59:08.905 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 12:59:08.905 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 12:59:08.905 -06:00 [DBG] Start authorize callback request
2018-07-27 12:59:08.905 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:59:08.905 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:59:08.905 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:59:08.905 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:59:08.905 -06:00 [DBG] No PKCE used.
2018-07-27 12:59:08.905 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:59:08.905 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfS5_y7_gykyYCsT5KSVUth3tUyTYGnjBg34yhpVrQg7S_SYBpXb8m3CB_mbKslDs5UQZ2vAfKKvxsybLsAU07vXDEda5zrhJDLzAzIYbLoaHaOuGnxYgYO-LDVmNtr1gTtTlWFFX1N0S4n4lTV193stVZclAzNu52Dr03ks6a4_tIfCosCgkyfrv0jXXMYeXDCI7nvTnXSD6fK-KkM3UdxaTOSUA80oS-Y_NFYTLhO0jRjlBa30aBk4H45XWRiBN9dXUzHwRbt---4T0ivDDFTVCRgEvxAZnkbruj0KJzSREVaaxZd049cAxGHj1CGkvZz0OeKMeuD2LWD_rbOO8zUxy6MTKYWGXrzp6Kv-v2zs7Sk4y48sKP8BxAaGvfEoUs",
  "Nonce": "636683147386557640.YzM3OTE3MmUtZDMwNy00MjIxLTg5NzQtMGZiNzM5N2Y1NzIyYmI0ODQzNmYtMzU1Yy00OWRhLWIzMzQtMDU2NTIzNmQwZjA0",
  "SessionId": "070b6649627c64632d9f0928ce1af546",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683147386557640.YzM3OTE3MmUtZDMwNy00MjIxLTg5NzQtMGZiNzM5N2Y1NzIyYmI0ODQzNmYtMzU1Yy00OWRhLWIzMzQtMDU2NTIzNmQwZjA0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfS5_y7_gykyYCsT5KSVUth3tUyTYGnjBg34yhpVrQg7S_SYBpXb8m3CB_mbKslDs5UQZ2vAfKKvxsybLsAU07vXDEda5zrhJDLzAzIYbLoaHaOuGnxYgYO-LDVmNtr1gTtTlWFFX1N0S4n4lTV193stVZclAzNu52Dr03ks6a4_tIfCosCgkyfrv0jXXMYeXDCI7nvTnXSD6fK-KkM3UdxaTOSUA80oS-Y_NFYTLhO0jRjlBa30aBk4H45XWRiBN9dXUzHwRbt---4T0ivDDFTVCRgEvxAZnkbruj0KJzSREVaaxZd049cAxGHj1CGkvZz0OeKMeuD2LWD_rbOO8zUxy6MTKYWGXrzp6Kv-v2zs7Sk4y48sKP8BxAaGvfEoUs",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:59:08.907 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 12:59:08.907 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 12:59:08.907 -06:00 [INF] Showing consent: User has not yet consented
2018-07-27 12:59:08.909 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:59:08.909 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:59:08.909 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:59:08.909 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:59:08.909 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:59:08.909 -06:00 [DBG] No PKCE used.
2018-07-27 12:59:08.909 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:59:08.910 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:59:13.084 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-27 12:59:13.084 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:59:13.084 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:59:13.087 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:59:13.087 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:59:13.087 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:59:13.087 -06:00 [DBG] No PKCE used.
2018-07-27 12:59:13.087 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:59:13.090 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:59:13.090 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-27 12:59:13.090 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-27 12:59:13.090 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-27 12:59:13.090 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-27 12:59:13.090 -06:00 [DBG] Start authorize callback request
2018-07-27 12:59:13.090 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:59:13.090 -06:00 [DBG] Start authorize request protocol validation
2018-07-27 12:59:13.090 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:59:13.091 -06:00 [DBG] Checking for PKCE parameters
2018-07-27 12:59:13.091 -06:00 [DBG] No PKCE used.
2018-07-27 12:59:13.091 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-27 12:59:13.091 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfS5_y7_gykyYCsT5KSVUth3tUyTYGnjBg34yhpVrQg7S_SYBpXb8m3CB_mbKslDs5UQZ2vAfKKvxsybLsAU07vXDEda5zrhJDLzAzIYbLoaHaOuGnxYgYO-LDVmNtr1gTtTlWFFX1N0S4n4lTV193stVZclAzNu52Dr03ks6a4_tIfCosCgkyfrv0jXXMYeXDCI7nvTnXSD6fK-KkM3UdxaTOSUA80oS-Y_NFYTLhO0jRjlBa30aBk4H45XWRiBN9dXUzHwRbt---4T0ivDDFTVCRgEvxAZnkbruj0KJzSREVaaxZd049cAxGHj1CGkvZz0OeKMeuD2LWD_rbOO8zUxy6MTKYWGXrzp6Kv-v2zs7Sk4y48sKP8BxAaGvfEoUs",
  "Nonce": "636683147386557640.YzM3OTE3MmUtZDMwNy00MjIxLTg5NzQtMGZiNzM5N2Y1NzIyYmI0ODQzNmYtMzU1Yy00OWRhLWIzMzQtMDU2NTIzNmQwZjA0",
  "SessionId": "070b6649627c64632d9f0928ce1af546",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636683147386557640.YzM3OTE3MmUtZDMwNy00MjIxLTg5NzQtMGZiNzM5N2Y1NzIyYmI0ODQzNmYtMzU1Yy00OWRhLWIzMzQtMDU2NTIzNmQwZjA0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfS5_y7_gykyYCsT5KSVUth3tUyTYGnjBg34yhpVrQg7S_SYBpXb8m3CB_mbKslDs5UQZ2vAfKKvxsybLsAU07vXDEda5zrhJDLzAzIYbLoaHaOuGnxYgYO-LDVmNtr1gTtTlWFFX1N0S4n4lTV193stVZclAzNu52Dr03ks6a4_tIfCosCgkyfrv0jXXMYeXDCI7nvTnXSD6fK-KkM3UdxaTOSUA80oS-Y_NFYTLhO0jRjlBa30aBk4H45XWRiBN9dXUzHwRbt---4T0ivDDFTVCRgEvxAZnkbruj0KJzSREVaaxZd049cAxGHj1CGkvZz0OeKMeuD2LWD_rbOO8zUxy6MTKYWGXrzp6Kv-v2zs7Sk4y48sKP8BxAaGvfEoUs",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-27 12:59:13.092 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-27 12:59:13.092 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-27 12:59:13.092 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-27 12:59:13.092 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:59:13.092 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-27 12:59:13.097 -06:00 [DBG] Creating Implicit Flow response.
2018-07-27 12:59:13.097 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 12:59:13.097 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 12:59:13.109 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****OZqg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****4467"
    }
  ],
  "ActivityId": "0HLFJTT10Q28M:0000000E",
  "TimeStamp": "2018-07-27T18:59:13Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:59:13.109 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfS5_y7_gykyYCsT5KSVUth3tUyTYGnjBg34yhpVrQg7S_SYBpXb8m3CB_mbKslDs5UQZ2vAfKKvxsybLsAU07vXDEda5zrhJDLzAzIYbLoaHaOuGnxYgYO-LDVmNtr1gTtTlWFFX1N0S4n4lTV193stVZclAzNu52Dr03ks6a4_tIfCosCgkyfrv0jXXMYeXDCI7nvTnXSD6fK-KkM3UdxaTOSUA80oS-Y_NFYTLhO0jRjlBa30aBk4H45XWRiBN9dXUzHwRbt---4T0ivDDFTVCRgEvxAZnkbruj0KJzSREVaaxZd049cAxGHj1CGkvZz0OeKMeuD2LWD_rbOO8zUxy6MTKYWGXrzp6Kv-v2zs7Sk4y48sKP8BxAaGvfEoUs",
  "Scope": "openid profile business email"
}
2018-07-27 12:59:13.109 -06:00 [DBG] Augmenting SignInContext
2018-07-27 12:59:13.109 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-27 12:59:13.298 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-27 12:59:13.298 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-27 12:59:13.298 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-27 12:59:13.298 -06:00 [DBG] Start token request.
2018-07-27 12:59:13.298 -06:00 [DBG] Start client validation
2018-07-27 12:59:13.298 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-27 12:59:13.298 -06:00 [DBG] Start parsing for secret in post body
2018-07-27 12:59:13.301 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-27 12:59:13.301 -06:00 [DBG] Secret id found: ideaBox
2018-07-27 12:59:13.301 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:59:13.301 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-27 12:59:13.301 -06:00 [DBG] Client validation success
2018-07-27 12:59:13.301 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFJTT10Q28N:00000003",
  "TimeStamp": "2018-07-27T18:59:13Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:59:13.301 -06:00 [DBG] Start token request validation
2018-07-27 12:59:13.301 -06:00 [DBG] Start validation of authorization code token request
2018-07-27 12:59:13.310 -06:00 [DBG] Validation of authorization code token request success
2018-07-27 12:59:13.310 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "3cfe3ef77bb30392e96a809e395457ad6ab680f1b001a2134858b448036d4467",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "3cfe3ef77bb30392e96a809e395457ad6ab680f1b001a2134858b448036d4467",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-27 12:59:13.310 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:59:13.310 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-27 12:59:13.310 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-27 12:59:13.323 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:59:13.323 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-27 12:59:13.323 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-27 12:59:13.335 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****fmcw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****4N_A"
    }
  ],
  "ActivityId": "0HLFJTT10Q28N:00000003",
  "TimeStamp": "2018-07-27T18:59:13Z",
  "ProcessId": 42072,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-27 12:59:13.335 -06:00 [DBG] Token request success.
2018-07-27 12:59:13.343 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-27 12:59:13.343 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-27 12:59:13.343 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-27 12:59:13.343 -06:00 [DBG] Start userinfo request
2018-07-27 12:59:13.344 -06:00 [DBG] Bearer token found in header
2018-07-27 12:59:13.346 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:59:13.346 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-27 12:59:13.348 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-27 12:59:13.348 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1532717953,
    "exp": 1532721553,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1532717948,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-27 12:59:13.348 -06:00 [DBG] Creating userinfo response
2018-07-27 12:59:13.348 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:59:13.348 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:59:13.348 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-27 12:59:13.348 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-27 12:59:13.350 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-27 12:59:13.350 -06:00 [DBG] End userinfo request
2018-07-31 08:45:19.948 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-31 08:45:19.980 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-31 08:45:19.983 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-31 08:45:19.983 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-31 08:45:19.983 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-31 08:45:19.983 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-31 08:46:36.282 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-31 08:46:36.404 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-31 08:46:36.404 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-31 08:46:36.407 -06:00 [DBG] Start discovery request
2018-07-31 08:46:36.618 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-31 08:46:36.619 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-31 08:46:36.619 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-31 08:46:36.623 -06:00 [DBG] Start key discovery request
2018-07-31 08:46:36.726 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-31 08:46:36.729 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-31 08:46:36.729 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-31 08:46:36.732 -06:00 [DBG] Start authorize request
2018-07-31 08:46:36.747 -06:00 [DBG] No user present in authorize request
2018-07-31 08:46:36.750 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 08:46:36.760 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:46:36.766 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 08:46:36.767 -06:00 [DBG] No PKCE used.
2018-07-31 08:46:36.793 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 08:46:36.801 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfPvj9QN-FyzBXX668Fo1CF2gIt5BJrs1FRz7GC9yON75oJOhmhzrsXIfJS4pFetXHwQDmxNu1cEI4qh8VfBhQxqAXfe3Oc_CPGsh-BsPF_hd3TPiA4m-pm8a_tQ4WrVboEbSSHR77hPBuzdapcdVPTqYewFE-mc3plAvwg84mihpI9sz5WShsBnHR91yEzxFcGmw58_QNQOunQLmGuWt_5RpPoAI-4JTcf_FjZAzqNaYF5q2zIAAk2TuHuZiXstCzjnX_fdE4luqIoLbE6sHAd9VMS1QXslmEJX9mq2PDKXavUTxfWul3ua6IsJrg08a4U6262-MTvL2uEgcVw5p3miESiFsh6ViqPgdeDPFPv3pGZYr12UR1SxdfzLgp07jM",
  "Nonce": "636686451966947020.MDY5MmExZmEtZWI1OS00YzZiLThjODMtMmNmMjkwOGQ2YTU1ZTJjNmJjYmQtMTM4NS00MjJkLWJiNTUtYmJkMDZiYjlkNGVi",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686451966947020.MDY5MmExZmEtZWI1OS00YzZiLThjODMtMmNmMjkwOGQ2YTU1ZTJjNmJjYmQtMTM4NS00MjJkLWJiNTUtYmJkMDZiYjlkNGVi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfPvj9QN-FyzBXX668Fo1CF2gIt5BJrs1FRz7GC9yON75oJOhmhzrsXIfJS4pFetXHwQDmxNu1cEI4qh8VfBhQxqAXfe3Oc_CPGsh-BsPF_hd3TPiA4m-pm8a_tQ4WrVboEbSSHR77hPBuzdapcdVPTqYewFE-mc3plAvwg84mihpI9sz5WShsBnHR91yEzxFcGmw58_QNQOunQLmGuWt_5RpPoAI-4JTcf_FjZAzqNaYF5q2zIAAk2TuHuZiXstCzjnX_fdE4luqIoLbE6sHAd9VMS1QXslmEJX9mq2PDKXavUTxfWul3ua6IsJrg08a4U6262-MTvL2uEgcVw5p3miESiFsh6ViqPgdeDPFPv3pGZYr12UR1SxdfzLgp07jM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 08:46:36.807 -06:00 [INF] Showing login: User is not authenticated
2018-07-31 08:46:37.111 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 08:46:37.112 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:46:37.112 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 08:46:37.112 -06:00 [DBG] No PKCE used.
2018-07-31 08:46:37.112 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 08:46:37.114 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:46:52.111 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 08:46:53.423 -06:00 [DBG] Augmenting SignInContext
2018-07-31 08:46:53.425 -06:00 [DBG] Adding idp claim with value: local
2018-07-31 08:46:53.425 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-31 08:46:53.425 -06:00 [DBG] Adding auth_time claim with value: 1533048413
2018-07-31 08:46:53.455 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 08:46:53.485 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFMUHL6F4L7:00000003",
  "TimeStamp": "2018-07-31T14:46:53Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 08:46:53.504 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 08:46:53.505 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 08:46:53.505 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 08:46:53.505 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 08:46:53.505 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 08:46:53.511 -06:00 [DBG] Start authorize callback request
2018-07-31 08:46:53.514 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 08:46:53.514 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 08:46:53.514 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:46:53.514 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 08:46:53.515 -06:00 [DBG] No PKCE used.
2018-07-31 08:46:53.515 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 08:46:53.515 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfPvj9QN-FyzBXX668Fo1CF2gIt5BJrs1FRz7GC9yON75oJOhmhzrsXIfJS4pFetXHwQDmxNu1cEI4qh8VfBhQxqAXfe3Oc_CPGsh-BsPF_hd3TPiA4m-pm8a_tQ4WrVboEbSSHR77hPBuzdapcdVPTqYewFE-mc3plAvwg84mihpI9sz5WShsBnHR91yEzxFcGmw58_QNQOunQLmGuWt_5RpPoAI-4JTcf_FjZAzqNaYF5q2zIAAk2TuHuZiXstCzjnX_fdE4luqIoLbE6sHAd9VMS1QXslmEJX9mq2PDKXavUTxfWul3ua6IsJrg08a4U6262-MTvL2uEgcVw5p3miESiFsh6ViqPgdeDPFPv3pGZYr12UR1SxdfzLgp07jM",
  "Nonce": "636686451966947020.MDY5MmExZmEtZWI1OS00YzZiLThjODMtMmNmMjkwOGQ2YTU1ZTJjNmJjYmQtMTM4NS00MjJkLWJiNTUtYmJkMDZiYjlkNGVi",
  "SessionId": "f9b5571ce64aa20ad984ff08a35f4676",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686451966947020.MDY5MmExZmEtZWI1OS00YzZiLThjODMtMmNmMjkwOGQ2YTU1ZTJjNmJjYmQtMTM4NS00MjJkLWJiNTUtYmJkMDZiYjlkNGVi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfPvj9QN-FyzBXX668Fo1CF2gIt5BJrs1FRz7GC9yON75oJOhmhzrsXIfJS4pFetXHwQDmxNu1cEI4qh8VfBhQxqAXfe3Oc_CPGsh-BsPF_hd3TPiA4m-pm8a_tQ4WrVboEbSSHR77hPBuzdapcdVPTqYewFE-mc3plAvwg84mihpI9sz5WShsBnHR91yEzxFcGmw58_QNQOunQLmGuWt_5RpPoAI-4JTcf_FjZAzqNaYF5q2zIAAk2TuHuZiXstCzjnX_fdE4luqIoLbE6sHAd9VMS1QXslmEJX9mq2PDKXavUTxfWul3ua6IsJrg08a4U6262-MTvL2uEgcVw5p3miESiFsh6ViqPgdeDPFPv3pGZYr12UR1SxdfzLgp07jM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 08:46:53.555 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 08:46:53.556 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 08:46:53.556 -06:00 [INF] Showing consent: User has not yet consented
2018-07-31 08:46:53.559 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 08:46:53.559 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 08:46:53.588 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 08:46:53.588 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:46:53.588 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 08:46:53.588 -06:00 [DBG] No PKCE used.
2018-07-31 08:46:53.588 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 08:46:53.589 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:46:57.907 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 08:46:57.908 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 08:46:57.908 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 08:46:57.930 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 08:46:57.931 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:46:57.931 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 08:46:57.931 -06:00 [DBG] No PKCE used.
2018-07-31 08:46:57.931 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 08:46:57.948 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 08:46:57.948 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 08:46:57.948 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 08:46:57.948 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 08:46:57.948 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 08:46:57.948 -06:00 [DBG] Start authorize callback request
2018-07-31 08:46:57.980 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 08:46:57.980 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 08:46:57.980 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:46:57.980 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 08:46:57.980 -06:00 [DBG] No PKCE used.
2018-07-31 08:46:57.980 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 08:46:57.980 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfPvj9QN-FyzBXX668Fo1CF2gIt5BJrs1FRz7GC9yON75oJOhmhzrsXIfJS4pFetXHwQDmxNu1cEI4qh8VfBhQxqAXfe3Oc_CPGsh-BsPF_hd3TPiA4m-pm8a_tQ4WrVboEbSSHR77hPBuzdapcdVPTqYewFE-mc3plAvwg84mihpI9sz5WShsBnHR91yEzxFcGmw58_QNQOunQLmGuWt_5RpPoAI-4JTcf_FjZAzqNaYF5q2zIAAk2TuHuZiXstCzjnX_fdE4luqIoLbE6sHAd9VMS1QXslmEJX9mq2PDKXavUTxfWul3ua6IsJrg08a4U6262-MTvL2uEgcVw5p3miESiFsh6ViqPgdeDPFPv3pGZYr12UR1SxdfzLgp07jM",
  "Nonce": "636686451966947020.MDY5MmExZmEtZWI1OS00YzZiLThjODMtMmNmMjkwOGQ2YTU1ZTJjNmJjYmQtMTM4NS00MjJkLWJiNTUtYmJkMDZiYjlkNGVi",
  "SessionId": "f9b5571ce64aa20ad984ff08a35f4676",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686451966947020.MDY5MmExZmEtZWI1OS00YzZiLThjODMtMmNmMjkwOGQ2YTU1ZTJjNmJjYmQtMTM4NS00MjJkLWJiNTUtYmJkMDZiYjlkNGVi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfPvj9QN-FyzBXX668Fo1CF2gIt5BJrs1FRz7GC9yON75oJOhmhzrsXIfJS4pFetXHwQDmxNu1cEI4qh8VfBhQxqAXfe3Oc_CPGsh-BsPF_hd3TPiA4m-pm8a_tQ4WrVboEbSSHR77hPBuzdapcdVPTqYewFE-mc3plAvwg84mihpI9sz5WShsBnHR91yEzxFcGmw58_QNQOunQLmGuWt_5RpPoAI-4JTcf_FjZAzqNaYF5q2zIAAk2TuHuZiXstCzjnX_fdE4luqIoLbE6sHAd9VMS1QXslmEJX9mq2PDKXavUTxfWul3ua6IsJrg08a4U6262-MTvL2uEgcVw5p3miESiFsh6ViqPgdeDPFPv3pGZYr12UR1SxdfzLgp07jM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 08:46:57.982 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 08:46:57.982 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 08:46:57.991 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-31 08:46:58.001 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 08:46:58.008 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-31 08:46:58.031 -06:00 [DBG] Creating Implicit Flow response.
2018-07-31 08:46:58.041 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 08:46:58.043 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 08:46:58.119 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****6eBQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****05d3"
    }
  ],
  "ActivityId": "0HLFMUHL6F4L7:00000008",
  "TimeStamp": "2018-07-31T14:46:58Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 08:46:58.122 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfPvj9QN-FyzBXX668Fo1CF2gIt5BJrs1FRz7GC9yON75oJOhmhzrsXIfJS4pFetXHwQDmxNu1cEI4qh8VfBhQxqAXfe3Oc_CPGsh-BsPF_hd3TPiA4m-pm8a_tQ4WrVboEbSSHR77hPBuzdapcdVPTqYewFE-mc3plAvwg84mihpI9sz5WShsBnHR91yEzxFcGmw58_QNQOunQLmGuWt_5RpPoAI-4JTcf_FjZAzqNaYF5q2zIAAk2TuHuZiXstCzjnX_fdE4luqIoLbE6sHAd9VMS1QXslmEJX9mq2PDKXavUTxfWul3ua6IsJrg08a4U6262-MTvL2uEgcVw5p3miESiFsh6ViqPgdeDPFPv3pGZYr12UR1SxdfzLgp07jM",
  "Scope": "openid profile business email"
}
2018-07-31 08:46:58.137 -06:00 [DBG] Augmenting SignInContext
2018-07-31 08:46:58.137 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 08:46:58.390 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-31 08:46:58.393 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-31 08:46:58.393 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-31 08:46:58.399 -06:00 [DBG] Start token request.
2018-07-31 08:46:58.404 -06:00 [DBG] Start client validation
2018-07-31 08:46:58.408 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-31 08:46:58.411 -06:00 [DBG] Start parsing for secret in post body
2018-07-31 08:46:58.412 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-31 08:46:58.412 -06:00 [DBG] Secret id found: ideaBox
2018-07-31 08:46:58.412 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:46:58.418 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-31 08:46:58.419 -06:00 [DBG] Client validation success
2018-07-31 08:46:58.421 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFMUHL6F4L5:00000003",
  "TimeStamp": "2018-07-31T14:46:58Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 08:46:58.427 -06:00 [DBG] Start token request validation
2018-07-31 08:46:58.437 -06:00 [DBG] Start validation of authorization code token request
2018-07-31 08:46:58.457 -06:00 [DBG] Validation of authorization code token request success
2018-07-31 08:46:58.461 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "ffaca9a8df4915a140eb77376482cbd5a4d57d3f39ab015774ac9d86fb5e05d3",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "ffaca9a8df4915a140eb77376482cbd5a4d57d3f39ab015774ac9d86fb5e05d3",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-31 08:46:58.473 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:46:58.481 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-31 08:46:58.482 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 08:46:58.505 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:46:58.505 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 08:46:58.505 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 08:46:58.520 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Ozrw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****dE_A"
    }
  ],
  "ActivityId": "0HLFMUHL6F4L5:00000003",
  "TimeStamp": "2018-07-31T14:46:58Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 08:46:58.521 -06:00 [DBG] Token request success.
2018-07-31 08:46:58.532 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-31 08:46:58.533 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-31 08:46:58.533 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-31 08:46:58.539 -06:00 [DBG] Start userinfo request
2018-07-31 08:46:58.542 -06:00 [DBG] Bearer token found in header
2018-07-31 08:46:58.602 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:46:58.604 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:46:58.606 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-31 08:46:58.608 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533048418,
    "exp": 1533052018,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1533048413,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-31 08:46:58.613 -06:00 [DBG] Creating userinfo response
2018-07-31 08:46:58.616 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 08:46:58.618 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 08:46:58.620 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-31 08:46:58.620 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 08:46:58.622 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-31 08:46:58.622 -06:00 [DBG] End userinfo request
2018-07-31 08:55:57.211 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-31 08:55:57.211 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-31 08:55:57.211 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-31 08:55:57.211 -06:00 [DBG] Start discovery request
2018-07-31 08:55:57.333 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-31 08:55:57.333 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-31 08:55:57.333 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-31 08:55:57.333 -06:00 [DBG] Start key discovery request
2018-07-31 08:55:57.415 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-31 08:55:57.415 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-31 08:55:57.416 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-31 08:55:57.416 -06:00 [DBG] Start authorize request
2018-07-31 08:55:57.416 -06:00 [DBG] No user present in authorize request
2018-07-31 08:55:57.416 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 08:55:57.416 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:55:57.416 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 08:55:57.416 -06:00 [DBG] No PKCE used.
2018-07-31 08:55:57.416 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 08:55:57.416 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHea759vctQ3Q5yUgjaN0JgtorczdNs3y-zuFcSw76c0PGsj20PLUekoF41rEeyPYQcxTE1l0mlCKDzY4iQxlaR7_nFlXqaS2nBPvK3uX01otNpxqoZuX_COmt-kMvJEO0t3OkZMFUs-4Z-Xaart51DPzXed2wfnARlEqYT6PyRfT2yUmFUGg6z2dIuxtQWjvYKWFZBXwRUyj8fjkPczJ0d8YkEwCiMAe4fRjSIyLFsIcc_61zIf7SP_GjputKXUkLs_kipk5jQAtSnUgTig57xb2FtZd23TYV_8c7HWVaYYfFgH9mqcW0ycBYaKEoWQ464M6hVuT8Y16ZDhEC3SBLx_FT8WNFEtwhJjWGFoStYXvnvco1O-ILsuCVZFc5e9dno",
  "Nonce": "636686457573947980.ZjAyZTlhYTMtZDNlNC00ZWYwLTlhMGItNDFhZGVlMjcyOGNlODY3OTBlNmEtY2JlNy00Mjc0LWE1ZDYtNzA3YjY4NWIwMTJm",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686457573947980.ZjAyZTlhYTMtZDNlNC00ZWYwLTlhMGItNDFhZGVlMjcyOGNlODY3OTBlNmEtY2JlNy00Mjc0LWE1ZDYtNzA3YjY4NWIwMTJm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHea759vctQ3Q5yUgjaN0JgtorczdNs3y-zuFcSw76c0PGsj20PLUekoF41rEeyPYQcxTE1l0mlCKDzY4iQxlaR7_nFlXqaS2nBPvK3uX01otNpxqoZuX_COmt-kMvJEO0t3OkZMFUs-4Z-Xaart51DPzXed2wfnARlEqYT6PyRfT2yUmFUGg6z2dIuxtQWjvYKWFZBXwRUyj8fjkPczJ0d8YkEwCiMAe4fRjSIyLFsIcc_61zIf7SP_GjputKXUkLs_kipk5jQAtSnUgTig57xb2FtZd23TYV_8c7HWVaYYfFgH9mqcW0ycBYaKEoWQ464M6hVuT8Y16ZDhEC3SBLx_FT8WNFEtwhJjWGFoStYXvnvco1O-ILsuCVZFc5e9dno",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 08:55:57.416 -06:00 [INF] Showing login: User is not authenticated
2018-07-31 08:55:57.419 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 08:55:57.419 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:55:57.419 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 08:55:57.419 -06:00 [DBG] No PKCE used.
2018-07-31 08:55:57.419 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 08:55:57.419 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:56:07.694 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 08:56:07.709 -06:00 [DBG] Augmenting SignInContext
2018-07-31 08:56:07.709 -06:00 [DBG] Adding idp claim with value: local
2018-07-31 08:56:07.709 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-31 08:56:07.709 -06:00 [DBG] Adding auth_time claim with value: 1533048967
2018-07-31 08:56:07.709 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 08:56:07.710 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFMUHL6F4LC:00000003",
  "TimeStamp": "2018-07-31T14:56:07Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 08:56:07.711 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 08:56:07.711 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 08:56:07.711 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 08:56:07.712 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 08:56:07.712 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 08:56:07.712 -06:00 [DBG] Start authorize callback request
2018-07-31 08:56:07.712 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 08:56:07.712 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 08:56:07.712 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:56:07.712 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 08:56:07.712 -06:00 [DBG] No PKCE used.
2018-07-31 08:56:07.712 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 08:56:07.712 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHea759vctQ3Q5yUgjaN0JgtorczdNs3y-zuFcSw76c0PGsj20PLUekoF41rEeyPYQcxTE1l0mlCKDzY4iQxlaR7_nFlXqaS2nBPvK3uX01otNpxqoZuX_COmt-kMvJEO0t3OkZMFUs-4Z-Xaart51DPzXed2wfnARlEqYT6PyRfT2yUmFUGg6z2dIuxtQWjvYKWFZBXwRUyj8fjkPczJ0d8YkEwCiMAe4fRjSIyLFsIcc_61zIf7SP_GjputKXUkLs_kipk5jQAtSnUgTig57xb2FtZd23TYV_8c7HWVaYYfFgH9mqcW0ycBYaKEoWQ464M6hVuT8Y16ZDhEC3SBLx_FT8WNFEtwhJjWGFoStYXvnvco1O-ILsuCVZFc5e9dno",
  "Nonce": "636686457573947980.ZjAyZTlhYTMtZDNlNC00ZWYwLTlhMGItNDFhZGVlMjcyOGNlODY3OTBlNmEtY2JlNy00Mjc0LWE1ZDYtNzA3YjY4NWIwMTJm",
  "SessionId": "729b67eee2003b2457756b5194855919",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686457573947980.ZjAyZTlhYTMtZDNlNC00ZWYwLTlhMGItNDFhZGVlMjcyOGNlODY3OTBlNmEtY2JlNy00Mjc0LWE1ZDYtNzA3YjY4NWIwMTJm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHea759vctQ3Q5yUgjaN0JgtorczdNs3y-zuFcSw76c0PGsj20PLUekoF41rEeyPYQcxTE1l0mlCKDzY4iQxlaR7_nFlXqaS2nBPvK3uX01otNpxqoZuX_COmt-kMvJEO0t3OkZMFUs-4Z-Xaart51DPzXed2wfnARlEqYT6PyRfT2yUmFUGg6z2dIuxtQWjvYKWFZBXwRUyj8fjkPczJ0d8YkEwCiMAe4fRjSIyLFsIcc_61zIf7SP_GjputKXUkLs_kipk5jQAtSnUgTig57xb2FtZd23TYV_8c7HWVaYYfFgH9mqcW0ycBYaKEoWQ464M6hVuT8Y16ZDhEC3SBLx_FT8WNFEtwhJjWGFoStYXvnvco1O-ILsuCVZFc5e9dno",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 08:56:07.713 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 08:56:07.713 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 08:56:07.713 -06:00 [INF] Showing consent: User has not yet consented
2018-07-31 08:56:07.715 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 08:56:07.715 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 08:56:07.715 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 08:56:07.715 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:56:07.715 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 08:56:07.715 -06:00 [DBG] No PKCE used.
2018-07-31 08:56:07.715 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 08:56:07.715 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:56:14.060 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 08:56:14.061 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 08:56:14.061 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 08:56:14.061 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 08:56:14.061 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:56:14.061 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 08:56:14.061 -06:00 [DBG] No PKCE used.
2018-07-31 08:56:14.061 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 08:56:14.064 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 08:56:14.064 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 08:56:14.064 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 08:56:14.065 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 08:56:14.065 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 08:56:14.065 -06:00 [DBG] Start authorize callback request
2018-07-31 08:56:14.065 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 08:56:14.065 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 08:56:14.065 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:56:14.065 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 08:56:14.065 -06:00 [DBG] No PKCE used.
2018-07-31 08:56:14.065 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 08:56:14.065 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHea759vctQ3Q5yUgjaN0JgtorczdNs3y-zuFcSw76c0PGsj20PLUekoF41rEeyPYQcxTE1l0mlCKDzY4iQxlaR7_nFlXqaS2nBPvK3uX01otNpxqoZuX_COmt-kMvJEO0t3OkZMFUs-4Z-Xaart51DPzXed2wfnARlEqYT6PyRfT2yUmFUGg6z2dIuxtQWjvYKWFZBXwRUyj8fjkPczJ0d8YkEwCiMAe4fRjSIyLFsIcc_61zIf7SP_GjputKXUkLs_kipk5jQAtSnUgTig57xb2FtZd23TYV_8c7HWVaYYfFgH9mqcW0ycBYaKEoWQ464M6hVuT8Y16ZDhEC3SBLx_FT8WNFEtwhJjWGFoStYXvnvco1O-ILsuCVZFc5e9dno",
  "Nonce": "636686457573947980.ZjAyZTlhYTMtZDNlNC00ZWYwLTlhMGItNDFhZGVlMjcyOGNlODY3OTBlNmEtY2JlNy00Mjc0LWE1ZDYtNzA3YjY4NWIwMTJm",
  "SessionId": "729b67eee2003b2457756b5194855919",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686457573947980.ZjAyZTlhYTMtZDNlNC00ZWYwLTlhMGItNDFhZGVlMjcyOGNlODY3OTBlNmEtY2JlNy00Mjc0LWE1ZDYtNzA3YjY4NWIwMTJm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHea759vctQ3Q5yUgjaN0JgtorczdNs3y-zuFcSw76c0PGsj20PLUekoF41rEeyPYQcxTE1l0mlCKDzY4iQxlaR7_nFlXqaS2nBPvK3uX01otNpxqoZuX_COmt-kMvJEO0t3OkZMFUs-4Z-Xaart51DPzXed2wfnARlEqYT6PyRfT2yUmFUGg6z2dIuxtQWjvYKWFZBXwRUyj8fjkPczJ0d8YkEwCiMAe4fRjSIyLFsIcc_61zIf7SP_GjputKXUkLs_kipk5jQAtSnUgTig57xb2FtZd23TYV_8c7HWVaYYfFgH9mqcW0ycBYaKEoWQ464M6hVuT8Y16ZDhEC3SBLx_FT8WNFEtwhJjWGFoStYXvnvco1O-ILsuCVZFc5e9dno",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 08:56:14.066 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 08:56:14.066 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 08:56:14.066 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-31 08:56:14.067 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 08:56:14.067 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-31 08:56:14.072 -06:00 [DBG] Creating Implicit Flow response.
2018-07-31 08:56:14.072 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 08:56:14.072 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 08:56:14.084 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ix0A"
    },
    {
      "TokenType": "code",
      "TokenValue": "****5fbb"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LC:00000007",
  "TimeStamp": "2018-07-31T14:56:14Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 08:56:14.084 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHea759vctQ3Q5yUgjaN0JgtorczdNs3y-zuFcSw76c0PGsj20PLUekoF41rEeyPYQcxTE1l0mlCKDzY4iQxlaR7_nFlXqaS2nBPvK3uX01otNpxqoZuX_COmt-kMvJEO0t3OkZMFUs-4Z-Xaart51DPzXed2wfnARlEqYT6PyRfT2yUmFUGg6z2dIuxtQWjvYKWFZBXwRUyj8fjkPczJ0d8YkEwCiMAe4fRjSIyLFsIcc_61zIf7SP_GjputKXUkLs_kipk5jQAtSnUgTig57xb2FtZd23TYV_8c7HWVaYYfFgH9mqcW0ycBYaKEoWQ464M6hVuT8Y16ZDhEC3SBLx_FT8WNFEtwhJjWGFoStYXvnvco1O-ILsuCVZFc5e9dno",
  "Scope": "openid profile business email"
}
2018-07-31 08:56:14.084 -06:00 [DBG] Augmenting SignInContext
2018-07-31 08:56:14.084 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 08:56:14.315 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-31 08:56:14.315 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-31 08:56:14.315 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-31 08:56:14.315 -06:00 [DBG] Start token request.
2018-07-31 08:56:14.315 -06:00 [DBG] Start client validation
2018-07-31 08:56:14.315 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-31 08:56:14.315 -06:00 [DBG] Start parsing for secret in post body
2018-07-31 08:56:14.315 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-31 08:56:14.315 -06:00 [DBG] Secret id found: ideaBox
2018-07-31 08:56:14.315 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:56:14.316 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-31 08:56:14.316 -06:00 [DBG] Client validation success
2018-07-31 08:56:14.316 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFMUHL6F4LB:00000003",
  "TimeStamp": "2018-07-31T14:56:14Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 08:56:14.316 -06:00 [DBG] Start token request validation
2018-07-31 08:56:14.316 -06:00 [DBG] Start validation of authorization code token request
2018-07-31 08:56:14.325 -06:00 [DBG] Validation of authorization code token request success
2018-07-31 08:56:14.325 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "5f3f2a12a149de9c614bd8f7990532cc2a8e1eb97b17578a7f85ee0214545fbb",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "5f3f2a12a149de9c614bd8f7990532cc2a8e1eb97b17578a7f85ee0214545fbb",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-31 08:56:14.325 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:56:14.325 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-31 08:56:14.325 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 08:56:14.338 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:56:14.338 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 08:56:14.338 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 08:56:14.350 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****UoCg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****39Fw"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LB:00000003",
  "TimeStamp": "2018-07-31T14:56:14Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 08:56:14.350 -06:00 [DBG] Token request success.
2018-07-31 08:56:14.359 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-31 08:56:14.360 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-31 08:56:14.360 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-31 08:56:14.360 -06:00 [DBG] Start userinfo request
2018-07-31 08:56:14.360 -06:00 [DBG] Bearer token found in header
2018-07-31 08:56:14.363 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:56:14.363 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 08:56:14.364 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-31 08:56:14.365 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533048974,
    "exp": 1533052574,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1533048967,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-31 08:56:14.365 -06:00 [DBG] Creating userinfo response
2018-07-31 08:56:14.365 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 08:56:14.365 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 08:56:14.365 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-31 08:56:14.365 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 08:56:14.367 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-31 08:56:14.367 -06:00 [DBG] End userinfo request
2018-07-31 09:01:09.384 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-31 09:01:09.384 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-31 09:01:09.384 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-31 09:01:09.384 -06:00 [DBG] Start discovery request
2018-07-31 09:01:09.508 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-31 09:01:09.508 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-31 09:01:09.508 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-31 09:01:09.508 -06:00 [DBG] Start key discovery request
2018-07-31 09:01:09.591 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-31 09:01:09.592 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-31 09:01:09.592 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-31 09:01:09.592 -06:00 [DBG] Start authorize request
2018-07-31 09:01:09.592 -06:00 [DBG] No user present in authorize request
2018-07-31 09:01:09.592 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:01:09.592 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:01:09.592 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:01:09.592 -06:00 [DBG] No PKCE used.
2018-07-31 09:01:09.592 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:01:09.592 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHesl3WdA9Q49MBCWMsiBZyPIYEG6Xecgsv9nuK4jinXqFc9J0s5JecIWRTOFFbTFfYXsuVxSI0DQorR8HhzKpRRt8CAt8R5NISyXXJorMNetScbRDlnajeTGfAe9vcoXgEFfQz41a5KIggErToqm20myD95V6-k1lom-X09BjnJ08bBqAAErrX1hQzuls_c2kvguP0zEwgblSIlBy1VDePtW9Lv5U9NKA8I1qy616b5-Hf9cAwW-nA_QVsv-uG3noTXaiXEM4z2pbmhz5mrn2Rwes20MS8Wh1ClnZJPbghF7a86NNQ89ztd-8n7bzYYoKsW0x66Gf91txqwC30SgtZ6RDIhN_e2QTgzZ9423gUKjJzFdG2VjTD5YFY4Pgrg3_U",
  "Nonce": "636686460695695720.ZDk5NGZiYTAtOTdiYi00MjQ0LWIzZTAtZWJhOTA2YzUxNTI0MTZhM2MzMzItYzZiNS00ZjI5LWE1MTAtMzAwNTA2ZDFkMjZm",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686460695695720.ZDk5NGZiYTAtOTdiYi00MjQ0LWIzZTAtZWJhOTA2YzUxNTI0MTZhM2MzMzItYzZiNS00ZjI5LWE1MTAtMzAwNTA2ZDFkMjZm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHesl3WdA9Q49MBCWMsiBZyPIYEG6Xecgsv9nuK4jinXqFc9J0s5JecIWRTOFFbTFfYXsuVxSI0DQorR8HhzKpRRt8CAt8R5NISyXXJorMNetScbRDlnajeTGfAe9vcoXgEFfQz41a5KIggErToqm20myD95V6-k1lom-X09BjnJ08bBqAAErrX1hQzuls_c2kvguP0zEwgblSIlBy1VDePtW9Lv5U9NKA8I1qy616b5-Hf9cAwW-nA_QVsv-uG3noTXaiXEM4z2pbmhz5mrn2Rwes20MS8Wh1ClnZJPbghF7a86NNQ89ztd-8n7bzYYoKsW0x66Gf91txqwC30SgtZ6RDIhN_e2QTgzZ9423gUKjJzFdG2VjTD5YFY4Pgrg3_U",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:01:09.592 -06:00 [INF] Showing login: User is not authenticated
2018-07-31 09:01:09.595 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:01:09.595 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:01:09.595 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:01:09.595 -06:00 [DBG] No PKCE used.
2018-07-31 09:01:09.595 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:01:09.595 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:01:19.235 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 09:01:19.250 -06:00 [DBG] Augmenting SignInContext
2018-07-31 09:01:19.250 -06:00 [DBG] Adding idp claim with value: local
2018-07-31 09:01:19.250 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-31 09:01:19.250 -06:00 [DBG] Adding auth_time claim with value: 1533049279
2018-07-31 09:01:19.250 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 09:01:19.251 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFMUHL6F4LE:00000003",
  "TimeStamp": "2018-07-31T15:01:19Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:01:19.254 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:01:19.254 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:01:19.254 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 09:01:19.254 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 09:01:19.254 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 09:01:19.254 -06:00 [DBG] Start authorize callback request
2018-07-31 09:01:19.254 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:01:19.254 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:01:19.254 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:01:19.254 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:01:19.254 -06:00 [DBG] No PKCE used.
2018-07-31 09:01:19.255 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:01:19.255 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHesl3WdA9Q49MBCWMsiBZyPIYEG6Xecgsv9nuK4jinXqFc9J0s5JecIWRTOFFbTFfYXsuVxSI0DQorR8HhzKpRRt8CAt8R5NISyXXJorMNetScbRDlnajeTGfAe9vcoXgEFfQz41a5KIggErToqm20myD95V6-k1lom-X09BjnJ08bBqAAErrX1hQzuls_c2kvguP0zEwgblSIlBy1VDePtW9Lv5U9NKA8I1qy616b5-Hf9cAwW-nA_QVsv-uG3noTXaiXEM4z2pbmhz5mrn2Rwes20MS8Wh1ClnZJPbghF7a86NNQ89ztd-8n7bzYYoKsW0x66Gf91txqwC30SgtZ6RDIhN_e2QTgzZ9423gUKjJzFdG2VjTD5YFY4Pgrg3_U",
  "Nonce": "636686460695695720.ZDk5NGZiYTAtOTdiYi00MjQ0LWIzZTAtZWJhOTA2YzUxNTI0MTZhM2MzMzItYzZiNS00ZjI5LWE1MTAtMzAwNTA2ZDFkMjZm",
  "SessionId": "a1498f4e1ef81a9a4dd0de6a38615db3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686460695695720.ZDk5NGZiYTAtOTdiYi00MjQ0LWIzZTAtZWJhOTA2YzUxNTI0MTZhM2MzMzItYzZiNS00ZjI5LWE1MTAtMzAwNTA2ZDFkMjZm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHesl3WdA9Q49MBCWMsiBZyPIYEG6Xecgsv9nuK4jinXqFc9J0s5JecIWRTOFFbTFfYXsuVxSI0DQorR8HhzKpRRt8CAt8R5NISyXXJorMNetScbRDlnajeTGfAe9vcoXgEFfQz41a5KIggErToqm20myD95V6-k1lom-X09BjnJ08bBqAAErrX1hQzuls_c2kvguP0zEwgblSIlBy1VDePtW9Lv5U9NKA8I1qy616b5-Hf9cAwW-nA_QVsv-uG3noTXaiXEM4z2pbmhz5mrn2Rwes20MS8Wh1ClnZJPbghF7a86NNQ89ztd-8n7bzYYoKsW0x66Gf91txqwC30SgtZ6RDIhN_e2QTgzZ9423gUKjJzFdG2VjTD5YFY4Pgrg3_U",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:01:19.256 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 09:01:19.256 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 09:01:19.256 -06:00 [INF] Showing consent: User has not yet consented
2018-07-31 09:01:19.258 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:01:19.258 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:01:19.258 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:01:19.259 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:01:19.259 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:01:19.259 -06:00 [DBG] No PKCE used.
2018-07-31 09:01:19.259 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:01:19.259 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:01:23.901 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 09:01:23.902 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:01:23.902 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:01:23.902 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:01:23.902 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:01:23.902 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:01:23.902 -06:00 [DBG] No PKCE used.
2018-07-31 09:01:23.902 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:01:23.906 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:01:23.906 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:01:23.906 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 09:01:23.907 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 09:01:23.907 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 09:01:23.907 -06:00 [DBG] Start authorize callback request
2018-07-31 09:01:23.907 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:01:23.907 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:01:23.907 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:01:23.907 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:01:23.907 -06:00 [DBG] No PKCE used.
2018-07-31 09:01:23.907 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:01:23.907 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHesl3WdA9Q49MBCWMsiBZyPIYEG6Xecgsv9nuK4jinXqFc9J0s5JecIWRTOFFbTFfYXsuVxSI0DQorR8HhzKpRRt8CAt8R5NISyXXJorMNetScbRDlnajeTGfAe9vcoXgEFfQz41a5KIggErToqm20myD95V6-k1lom-X09BjnJ08bBqAAErrX1hQzuls_c2kvguP0zEwgblSIlBy1VDePtW9Lv5U9NKA8I1qy616b5-Hf9cAwW-nA_QVsv-uG3noTXaiXEM4z2pbmhz5mrn2Rwes20MS8Wh1ClnZJPbghF7a86NNQ89ztd-8n7bzYYoKsW0x66Gf91txqwC30SgtZ6RDIhN_e2QTgzZ9423gUKjJzFdG2VjTD5YFY4Pgrg3_U",
  "Nonce": "636686460695695720.ZDk5NGZiYTAtOTdiYi00MjQ0LWIzZTAtZWJhOTA2YzUxNTI0MTZhM2MzMzItYzZiNS00ZjI5LWE1MTAtMzAwNTA2ZDFkMjZm",
  "SessionId": "a1498f4e1ef81a9a4dd0de6a38615db3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686460695695720.ZDk5NGZiYTAtOTdiYi00MjQ0LWIzZTAtZWJhOTA2YzUxNTI0MTZhM2MzMzItYzZiNS00ZjI5LWE1MTAtMzAwNTA2ZDFkMjZm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHesl3WdA9Q49MBCWMsiBZyPIYEG6Xecgsv9nuK4jinXqFc9J0s5JecIWRTOFFbTFfYXsuVxSI0DQorR8HhzKpRRt8CAt8R5NISyXXJorMNetScbRDlnajeTGfAe9vcoXgEFfQz41a5KIggErToqm20myD95V6-k1lom-X09BjnJ08bBqAAErrX1hQzuls_c2kvguP0zEwgblSIlBy1VDePtW9Lv5U9NKA8I1qy616b5-Hf9cAwW-nA_QVsv-uG3noTXaiXEM4z2pbmhz5mrn2Rwes20MS8Wh1ClnZJPbghF7a86NNQ89ztd-8n7bzYYoKsW0x66Gf91txqwC30SgtZ6RDIhN_e2QTgzZ9423gUKjJzFdG2VjTD5YFY4Pgrg3_U",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:01:23.908 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 09:01:23.909 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 09:01:23.909 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-31 09:01:23.909 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:01:23.909 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-31 09:01:23.913 -06:00 [DBG] Creating Implicit Flow response.
2018-07-31 09:01:23.913 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 09:01:23.913 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 09:01:23.925 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****XhFw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****a76c"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LE:00000007",
  "TimeStamp": "2018-07-31T15:01:23Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:01:23.925 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHesl3WdA9Q49MBCWMsiBZyPIYEG6Xecgsv9nuK4jinXqFc9J0s5JecIWRTOFFbTFfYXsuVxSI0DQorR8HhzKpRRt8CAt8R5NISyXXJorMNetScbRDlnajeTGfAe9vcoXgEFfQz41a5KIggErToqm20myD95V6-k1lom-X09BjnJ08bBqAAErrX1hQzuls_c2kvguP0zEwgblSIlBy1VDePtW9Lv5U9NKA8I1qy616b5-Hf9cAwW-nA_QVsv-uG3noTXaiXEM4z2pbmhz5mrn2Rwes20MS8Wh1ClnZJPbghF7a86NNQ89ztd-8n7bzYYoKsW0x66Gf91txqwC30SgtZ6RDIhN_e2QTgzZ9423gUKjJzFdG2VjTD5YFY4Pgrg3_U",
  "Scope": "openid profile business email"
}
2018-07-31 09:01:23.925 -06:00 [DBG] Augmenting SignInContext
2018-07-31 09:01:23.925 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 09:01:24.066 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-31 09:01:24.066 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-31 09:01:24.066 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-31 09:01:24.066 -06:00 [DBG] Start token request.
2018-07-31 09:01:24.066 -06:00 [DBG] Start client validation
2018-07-31 09:01:24.066 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-31 09:01:24.066 -06:00 [DBG] Start parsing for secret in post body
2018-07-31 09:01:24.066 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-31 09:01:24.066 -06:00 [DBG] Secret id found: ideaBox
2018-07-31 09:01:24.066 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:01:24.066 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-31 09:01:24.066 -06:00 [DBG] Client validation success
2018-07-31 09:01:24.066 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFMUHL6F4LD:00000003",
  "TimeStamp": "2018-07-31T15:01:24Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:01:24.067 -06:00 [DBG] Start token request validation
2018-07-31 09:01:24.067 -06:00 [DBG] Start validation of authorization code token request
2018-07-31 09:01:24.074 -06:00 [DBG] Validation of authorization code token request success
2018-07-31 09:01:24.074 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "21fc4f679cb422f9d59b6019698dd4224bffbe454c967f600d1c8c011c40a76c",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "21fc4f679cb422f9d59b6019698dd4224bffbe454c967f600d1c8c011c40a76c",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-31 09:01:24.074 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:01:24.074 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-31 09:01:24.075 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:01:24.087 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:01:24.087 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 09:01:24.087 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 09:01:24.099 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****U8gg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****_qGg"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LD:00000003",
  "TimeStamp": "2018-07-31T15:01:24Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:01:24.099 -06:00 [DBG] Token request success.
2018-07-31 09:01:24.108 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-31 09:01:24.108 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-31 09:01:24.108 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-31 09:01:24.108 -06:00 [DBG] Start userinfo request
2018-07-31 09:01:24.108 -06:00 [DBG] Bearer token found in header
2018-07-31 09:01:24.111 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:01:24.111 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:01:24.112 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-31 09:01:24.112 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533049284,
    "exp": 1533052884,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1533049279,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-31 09:01:24.112 -06:00 [DBG] Creating userinfo response
2018-07-31 09:01:24.112 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:01:24.112 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:01:24.112 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-31 09:01:24.112 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:01:24.113 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-31 09:01:24.113 -06:00 [DBG] End userinfo request
2018-07-31 09:10:56.008 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-31 09:10:56.008 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-31 09:10:56.008 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-31 09:10:56.008 -06:00 [DBG] Start discovery request
2018-07-31 09:10:56.147 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-31 09:10:56.147 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-31 09:10:56.147 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-31 09:10:56.147 -06:00 [DBG] Start key discovery request
2018-07-31 09:10:56.228 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-31 09:10:56.228 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-31 09:10:56.229 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-31 09:10:56.229 -06:00 [DBG] Start authorize request
2018-07-31 09:10:56.229 -06:00 [DBG] No user present in authorize request
2018-07-31 09:10:56.229 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:10:56.229 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:10:56.229 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:10:56.229 -06:00 [DBG] No PKCE used.
2018-07-31 09:10:56.229 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:10:56.229 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeq3am8Rmu5S1EhBpxT0lrx5nwvS76HjozYFFrrQaTBWATPEoP4n3Cd5yduwdSQaz7oLIrWOVlEcvd1jdJK1ha5TWF2jpsdY1yxSr7hXS0KT51RQ5H9ZT_eVSFxRvs0TGLMtc7f4Yv8ktDXbX6TdAtCMItl7sKwQyOz-5M36xjyBTlYH6MU49sIyD0PEewBktnW8Twonw5qHVbPR6RTjVQ7oYQOwU2Ay2T_Dq4TwncNeJqufs0k8Ui2zAMeblVPIpuyK4fcbU1yAhUCCBZq1XyZuUrvKTXk2EsN6gE3azpHnxd5j0mKa036CQ4P48QvoJQvTjoW8SVC5ehgBXN-ek6QQU9QkGWFN8HIdr34RNvW4o9jTLpg6IZkvIA33Xucq0s",
  "Nonce": "636686466562070090.OWFkMGY1MGUtOWFlYi00NWNmLThmODMtYmE3YjExOTAwODc5ZmZhMjZjNzctNjJlMi00OTM2LThjZmUtNjk2YjgyYzE4M2Rm",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686466562070090.OWFkMGY1MGUtOWFlYi00NWNmLThmODMtYmE3YjExOTAwODc5ZmZhMjZjNzctNjJlMi00OTM2LThjZmUtNjk2YjgyYzE4M2Rm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeq3am8Rmu5S1EhBpxT0lrx5nwvS76HjozYFFrrQaTBWATPEoP4n3Cd5yduwdSQaz7oLIrWOVlEcvd1jdJK1ha5TWF2jpsdY1yxSr7hXS0KT51RQ5H9ZT_eVSFxRvs0TGLMtc7f4Yv8ktDXbX6TdAtCMItl7sKwQyOz-5M36xjyBTlYH6MU49sIyD0PEewBktnW8Twonw5qHVbPR6RTjVQ7oYQOwU2Ay2T_Dq4TwncNeJqufs0k8Ui2zAMeblVPIpuyK4fcbU1yAhUCCBZq1XyZuUrvKTXk2EsN6gE3azpHnxd5j0mKa036CQ4P48QvoJQvTjoW8SVC5ehgBXN-ek6QQU9QkGWFN8HIdr34RNvW4o9jTLpg6IZkvIA33Xucq0s",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:10:56.229 -06:00 [INF] Showing login: User is not authenticated
2018-07-31 09:10:56.232 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:10:56.232 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:10:56.232 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:10:56.232 -06:00 [DBG] No PKCE used.
2018-07-31 09:10:56.232 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:10:56.232 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:11:05.797 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 09:11:05.811 -06:00 [DBG] Augmenting SignInContext
2018-07-31 09:11:05.811 -06:00 [DBG] Adding idp claim with value: local
2018-07-31 09:11:05.811 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-31 09:11:05.811 -06:00 [DBG] Adding auth_time claim with value: 1533049865
2018-07-31 09:11:05.811 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 09:11:05.812 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFMUHL6F4LG:00000003",
  "TimeStamp": "2018-07-31T15:11:05Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:11:05.814 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:11:05.814 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:11:05.814 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 09:11:05.814 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 09:11:05.814 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 09:11:05.814 -06:00 [DBG] Start authorize callback request
2018-07-31 09:11:05.814 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:11:05.814 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:11:05.815 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:11:05.815 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:11:05.815 -06:00 [DBG] No PKCE used.
2018-07-31 09:11:05.815 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:11:05.815 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeq3am8Rmu5S1EhBpxT0lrx5nwvS76HjozYFFrrQaTBWATPEoP4n3Cd5yduwdSQaz7oLIrWOVlEcvd1jdJK1ha5TWF2jpsdY1yxSr7hXS0KT51RQ5H9ZT_eVSFxRvs0TGLMtc7f4Yv8ktDXbX6TdAtCMItl7sKwQyOz-5M36xjyBTlYH6MU49sIyD0PEewBktnW8Twonw5qHVbPR6RTjVQ7oYQOwU2Ay2T_Dq4TwncNeJqufs0k8Ui2zAMeblVPIpuyK4fcbU1yAhUCCBZq1XyZuUrvKTXk2EsN6gE3azpHnxd5j0mKa036CQ4P48QvoJQvTjoW8SVC5ehgBXN-ek6QQU9QkGWFN8HIdr34RNvW4o9jTLpg6IZkvIA33Xucq0s",
  "Nonce": "636686466562070090.OWFkMGY1MGUtOWFlYi00NWNmLThmODMtYmE3YjExOTAwODc5ZmZhMjZjNzctNjJlMi00OTM2LThjZmUtNjk2YjgyYzE4M2Rm",
  "SessionId": "80af7c1d711aef6522dc6e34d5c3d591",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686466562070090.OWFkMGY1MGUtOWFlYi00NWNmLThmODMtYmE3YjExOTAwODc5ZmZhMjZjNzctNjJlMi00OTM2LThjZmUtNjk2YjgyYzE4M2Rm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeq3am8Rmu5S1EhBpxT0lrx5nwvS76HjozYFFrrQaTBWATPEoP4n3Cd5yduwdSQaz7oLIrWOVlEcvd1jdJK1ha5TWF2jpsdY1yxSr7hXS0KT51RQ5H9ZT_eVSFxRvs0TGLMtc7f4Yv8ktDXbX6TdAtCMItl7sKwQyOz-5M36xjyBTlYH6MU49sIyD0PEewBktnW8Twonw5qHVbPR6RTjVQ7oYQOwU2Ay2T_Dq4TwncNeJqufs0k8Ui2zAMeblVPIpuyK4fcbU1yAhUCCBZq1XyZuUrvKTXk2EsN6gE3azpHnxd5j0mKa036CQ4P48QvoJQvTjoW8SVC5ehgBXN-ek6QQU9QkGWFN8HIdr34RNvW4o9jTLpg6IZkvIA33Xucq0s",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:11:05.816 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 09:11:05.816 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 09:11:05.816 -06:00 [INF] Showing consent: User has not yet consented
2018-07-31 09:11:05.818 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:11:05.818 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:11:05.818 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:11:05.819 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:11:05.819 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:11:05.819 -06:00 [DBG] No PKCE used.
2018-07-31 09:11:05.819 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:11:05.819 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:11:11.049 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 09:11:11.049 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:11:11.049 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:11:11.050 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:11:11.050 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:11:11.050 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:11:11.050 -06:00 [DBG] No PKCE used.
2018-07-31 09:11:11.050 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:11:11.054 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:11:11.054 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:11:11.054 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 09:11:11.054 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 09:11:11.054 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 09:11:11.054 -06:00 [DBG] Start authorize callback request
2018-07-31 09:11:11.054 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:11:11.054 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:11:11.054 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:11:11.054 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:11:11.054 -06:00 [DBG] No PKCE used.
2018-07-31 09:11:11.054 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:11:11.054 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeq3am8Rmu5S1EhBpxT0lrx5nwvS76HjozYFFrrQaTBWATPEoP4n3Cd5yduwdSQaz7oLIrWOVlEcvd1jdJK1ha5TWF2jpsdY1yxSr7hXS0KT51RQ5H9ZT_eVSFxRvs0TGLMtc7f4Yv8ktDXbX6TdAtCMItl7sKwQyOz-5M36xjyBTlYH6MU49sIyD0PEewBktnW8Twonw5qHVbPR6RTjVQ7oYQOwU2Ay2T_Dq4TwncNeJqufs0k8Ui2zAMeblVPIpuyK4fcbU1yAhUCCBZq1XyZuUrvKTXk2EsN6gE3azpHnxd5j0mKa036CQ4P48QvoJQvTjoW8SVC5ehgBXN-ek6QQU9QkGWFN8HIdr34RNvW4o9jTLpg6IZkvIA33Xucq0s",
  "Nonce": "636686466562070090.OWFkMGY1MGUtOWFlYi00NWNmLThmODMtYmE3YjExOTAwODc5ZmZhMjZjNzctNjJlMi00OTM2LThjZmUtNjk2YjgyYzE4M2Rm",
  "SessionId": "80af7c1d711aef6522dc6e34d5c3d591",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686466562070090.OWFkMGY1MGUtOWFlYi00NWNmLThmODMtYmE3YjExOTAwODc5ZmZhMjZjNzctNjJlMi00OTM2LThjZmUtNjk2YjgyYzE4M2Rm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeq3am8Rmu5S1EhBpxT0lrx5nwvS76HjozYFFrrQaTBWATPEoP4n3Cd5yduwdSQaz7oLIrWOVlEcvd1jdJK1ha5TWF2jpsdY1yxSr7hXS0KT51RQ5H9ZT_eVSFxRvs0TGLMtc7f4Yv8ktDXbX6TdAtCMItl7sKwQyOz-5M36xjyBTlYH6MU49sIyD0PEewBktnW8Twonw5qHVbPR6RTjVQ7oYQOwU2Ay2T_Dq4TwncNeJqufs0k8Ui2zAMeblVPIpuyK4fcbU1yAhUCCBZq1XyZuUrvKTXk2EsN6gE3azpHnxd5j0mKa036CQ4P48QvoJQvTjoW8SVC5ehgBXN-ek6QQU9QkGWFN8HIdr34RNvW4o9jTLpg6IZkvIA33Xucq0s",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:11:11.056 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 09:11:11.056 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 09:11:11.056 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-31 09:11:11.056 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:11:11.056 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-31 09:11:11.060 -06:00 [DBG] Creating Implicit Flow response.
2018-07-31 09:11:11.060 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 09:11:11.060 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 09:11:11.072 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****SC0g"
    },
    {
      "TokenType": "code",
      "TokenValue": "****6001"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LG:00000007",
  "TimeStamp": "2018-07-31T15:11:11Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:11:11.072 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeq3am8Rmu5S1EhBpxT0lrx5nwvS76HjozYFFrrQaTBWATPEoP4n3Cd5yduwdSQaz7oLIrWOVlEcvd1jdJK1ha5TWF2jpsdY1yxSr7hXS0KT51RQ5H9ZT_eVSFxRvs0TGLMtc7f4Yv8ktDXbX6TdAtCMItl7sKwQyOz-5M36xjyBTlYH6MU49sIyD0PEewBktnW8Twonw5qHVbPR6RTjVQ7oYQOwU2Ay2T_Dq4TwncNeJqufs0k8Ui2zAMeblVPIpuyK4fcbU1yAhUCCBZq1XyZuUrvKTXk2EsN6gE3azpHnxd5j0mKa036CQ4P48QvoJQvTjoW8SVC5ehgBXN-ek6QQU9QkGWFN8HIdr34RNvW4o9jTLpg6IZkvIA33Xucq0s",
  "Scope": "openid profile business email"
}
2018-07-31 09:11:11.072 -06:00 [DBG] Augmenting SignInContext
2018-07-31 09:11:11.072 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 09:11:11.314 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-31 09:11:11.314 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-31 09:11:11.314 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-31 09:11:11.314 -06:00 [DBG] Start token request.
2018-07-31 09:11:11.314 -06:00 [DBG] Start client validation
2018-07-31 09:11:11.314 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-31 09:11:11.314 -06:00 [DBG] Start parsing for secret in post body
2018-07-31 09:11:11.314 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-31 09:11:11.314 -06:00 [DBG] Secret id found: ideaBox
2018-07-31 09:11:11.314 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:11:11.314 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-31 09:11:11.314 -06:00 [DBG] Client validation success
2018-07-31 09:11:11.314 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFMUHL6F4LF:00000003",
  "TimeStamp": "2018-07-31T15:11:11Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:11:11.314 -06:00 [DBG] Start token request validation
2018-07-31 09:11:11.314 -06:00 [DBG] Start validation of authorization code token request
2018-07-31 09:11:11.322 -06:00 [DBG] Validation of authorization code token request success
2018-07-31 09:11:11.322 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "6f79e8e33e24881bba010c2ad889f40c5273e80bb1478e3c4024279052bb6001",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "6f79e8e33e24881bba010c2ad889f40c5273e80bb1478e3c4024279052bb6001",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-31 09:11:11.322 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:11:11.322 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-31 09:11:11.322 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:11:11.335 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:11:11.335 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 09:11:11.335 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 09:11:11.347 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****zPNw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****ortQ"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LF:00000003",
  "TimeStamp": "2018-07-31T15:11:11Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:11:11.347 -06:00 [DBG] Token request success.
2018-07-31 09:11:11.355 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-31 09:11:11.355 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-31 09:11:11.355 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-31 09:11:11.355 -06:00 [DBG] Start userinfo request
2018-07-31 09:11:11.355 -06:00 [DBG] Bearer token found in header
2018-07-31 09:11:11.357 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:11:11.357 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:11:11.359 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-31 09:11:11.359 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533049871,
    "exp": 1533053471,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1533049865,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-31 09:11:11.359 -06:00 [DBG] Creating userinfo response
2018-07-31 09:11:11.359 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:11:11.359 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:11:11.359 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-31 09:11:11.359 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:11:11.360 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-31 09:11:11.360 -06:00 [DBG] End userinfo request
2018-07-31 09:20:01.337 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-31 09:20:01.337 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-31 09:20:01.337 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-31 09:20:01.337 -06:00 [DBG] Start discovery request
2018-07-31 09:20:01.396 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-31 09:20:01.396 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-31 09:20:01.396 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-31 09:20:01.396 -06:00 [DBG] Start key discovery request
2018-07-31 09:20:01.421 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-31 09:20:01.422 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-31 09:20:01.422 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-31 09:20:01.422 -06:00 [DBG] Start authorize request
2018-07-31 09:20:01.422 -06:00 [DBG] No user present in authorize request
2018-07-31 09:20:01.422 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:20:01.422 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:20:01.422 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:20:01.422 -06:00 [DBG] No PKCE used.
2018-07-31 09:20:01.422 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:20:01.422 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf5T_rXg05htYSvIz4xq0hSMXH_eObwGFGIJN3tiU4Byp1eY3MZhq0KpBZ9c25gm2f_itpaH3Q3O83FbkEEtUUfxxfuXbltZeKwdZgHxrwRklZjdsEFrmZQVcSXqFf2cyvLct7-qNK6LTrKNet1Rq_07MF5mvjL7lTwf8VrKfDSnncjIcMYZdJ-hPxOKqEMhMJmUcKqnipXvmiU_gNnxz1Kg-SoJN7ang2503EmQoUG6Xdj60Iinil0R_PngwV1Bu52drTHysKjaxVifAmLZMThxO3WZyIkyHM0ieFSNVieJTiudNSgI76xQOaElKZe82E4of6B28uM4EcjsuGD-bZRoMUehg2XNcw2_3fJ_vLAxHhYGYrgKbNbuqv3xyq7QaA",
  "Nonce": "636686472014114770.ZTIyYjgyZjctYmQzYS00MDM4LWJmNzgtNjlkYzE3ZWRhYjFiM2RhMDhiNTEtM2ZlYy00YjQ5LWE1ZTAtZDU5ZmJhNjhmNTBi",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686472014114770.ZTIyYjgyZjctYmQzYS00MDM4LWJmNzgtNjlkYzE3ZWRhYjFiM2RhMDhiNTEtM2ZlYy00YjQ5LWE1ZTAtZDU5ZmJhNjhmNTBi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf5T_rXg05htYSvIz4xq0hSMXH_eObwGFGIJN3tiU4Byp1eY3MZhq0KpBZ9c25gm2f_itpaH3Q3O83FbkEEtUUfxxfuXbltZeKwdZgHxrwRklZjdsEFrmZQVcSXqFf2cyvLct7-qNK6LTrKNet1Rq_07MF5mvjL7lTwf8VrKfDSnncjIcMYZdJ-hPxOKqEMhMJmUcKqnipXvmiU_gNnxz1Kg-SoJN7ang2503EmQoUG6Xdj60Iinil0R_PngwV1Bu52drTHysKjaxVifAmLZMThxO3WZyIkyHM0ieFSNVieJTiudNSgI76xQOaElKZe82E4of6B28uM4EcjsuGD-bZRoMUehg2XNcw2_3fJ_vLAxHhYGYrgKbNbuqv3xyq7QaA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:20:01.422 -06:00 [INF] Showing login: User is not authenticated
2018-07-31 09:20:01.424 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:20:01.424 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:20:01.424 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:20:01.424 -06:00 [DBG] No PKCE used.
2018-07-31 09:20:01.424 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:20:01.424 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:20:45.272 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 09:20:45.287 -06:00 [DBG] Augmenting SignInContext
2018-07-31 09:20:45.287 -06:00 [DBG] Adding idp claim with value: local
2018-07-31 09:20:45.287 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-31 09:20:45.287 -06:00 [DBG] Adding auth_time claim with value: 1533050445
2018-07-31 09:20:45.287 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 09:20:45.288 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFMUHL6F4LI:00000003",
  "TimeStamp": "2018-07-31T15:20:45Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:20:45.290 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:20:45.290 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:20:45.290 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 09:20:45.290 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 09:20:45.290 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 09:20:45.290 -06:00 [DBG] Start authorize callback request
2018-07-31 09:20:45.290 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:20:45.290 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:20:45.290 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:20:45.291 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:20:45.291 -06:00 [DBG] No PKCE used.
2018-07-31 09:20:45.291 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:20:45.291 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf5T_rXg05htYSvIz4xq0hSMXH_eObwGFGIJN3tiU4Byp1eY3MZhq0KpBZ9c25gm2f_itpaH3Q3O83FbkEEtUUfxxfuXbltZeKwdZgHxrwRklZjdsEFrmZQVcSXqFf2cyvLct7-qNK6LTrKNet1Rq_07MF5mvjL7lTwf8VrKfDSnncjIcMYZdJ-hPxOKqEMhMJmUcKqnipXvmiU_gNnxz1Kg-SoJN7ang2503EmQoUG6Xdj60Iinil0R_PngwV1Bu52drTHysKjaxVifAmLZMThxO3WZyIkyHM0ieFSNVieJTiudNSgI76xQOaElKZe82E4of6B28uM4EcjsuGD-bZRoMUehg2XNcw2_3fJ_vLAxHhYGYrgKbNbuqv3xyq7QaA",
  "Nonce": "636686472014114770.ZTIyYjgyZjctYmQzYS00MDM4LWJmNzgtNjlkYzE3ZWRhYjFiM2RhMDhiNTEtM2ZlYy00YjQ5LWE1ZTAtZDU5ZmJhNjhmNTBi",
  "SessionId": "6b0b913a16d491c82747f402c394c154",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686472014114770.ZTIyYjgyZjctYmQzYS00MDM4LWJmNzgtNjlkYzE3ZWRhYjFiM2RhMDhiNTEtM2ZlYy00YjQ5LWE1ZTAtZDU5ZmJhNjhmNTBi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf5T_rXg05htYSvIz4xq0hSMXH_eObwGFGIJN3tiU4Byp1eY3MZhq0KpBZ9c25gm2f_itpaH3Q3O83FbkEEtUUfxxfuXbltZeKwdZgHxrwRklZjdsEFrmZQVcSXqFf2cyvLct7-qNK6LTrKNet1Rq_07MF5mvjL7lTwf8VrKfDSnncjIcMYZdJ-hPxOKqEMhMJmUcKqnipXvmiU_gNnxz1Kg-SoJN7ang2503EmQoUG6Xdj60Iinil0R_PngwV1Bu52drTHysKjaxVifAmLZMThxO3WZyIkyHM0ieFSNVieJTiudNSgI76xQOaElKZe82E4of6B28uM4EcjsuGD-bZRoMUehg2XNcw2_3fJ_vLAxHhYGYrgKbNbuqv3xyq7QaA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:20:45.292 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 09:20:45.292 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 09:20:45.292 -06:00 [INF] Showing consent: User has not yet consented
2018-07-31 09:20:45.294 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:20:45.294 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:20:45.294 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:20:45.294 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:20:45.294 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:20:45.294 -06:00 [DBG] No PKCE used.
2018-07-31 09:20:45.294 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:20:45.294 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:20:47.599 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 09:20:47.599 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:20:47.599 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:20:47.599 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:20:47.599 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:20:47.600 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:20:47.600 -06:00 [DBG] No PKCE used.
2018-07-31 09:20:47.600 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:20:47.603 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:20:47.603 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:20:47.603 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 09:20:47.603 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 09:20:47.603 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 09:20:47.603 -06:00 [DBG] Start authorize callback request
2018-07-31 09:20:47.603 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:20:47.603 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:20:47.603 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:20:47.603 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:20:47.604 -06:00 [DBG] No PKCE used.
2018-07-31 09:20:47.604 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:20:47.604 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf5T_rXg05htYSvIz4xq0hSMXH_eObwGFGIJN3tiU4Byp1eY3MZhq0KpBZ9c25gm2f_itpaH3Q3O83FbkEEtUUfxxfuXbltZeKwdZgHxrwRklZjdsEFrmZQVcSXqFf2cyvLct7-qNK6LTrKNet1Rq_07MF5mvjL7lTwf8VrKfDSnncjIcMYZdJ-hPxOKqEMhMJmUcKqnipXvmiU_gNnxz1Kg-SoJN7ang2503EmQoUG6Xdj60Iinil0R_PngwV1Bu52drTHysKjaxVifAmLZMThxO3WZyIkyHM0ieFSNVieJTiudNSgI76xQOaElKZe82E4of6B28uM4EcjsuGD-bZRoMUehg2XNcw2_3fJ_vLAxHhYGYrgKbNbuqv3xyq7QaA",
  "Nonce": "636686472014114770.ZTIyYjgyZjctYmQzYS00MDM4LWJmNzgtNjlkYzE3ZWRhYjFiM2RhMDhiNTEtM2ZlYy00YjQ5LWE1ZTAtZDU5ZmJhNjhmNTBi",
  "SessionId": "6b0b913a16d491c82747f402c394c154",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686472014114770.ZTIyYjgyZjctYmQzYS00MDM4LWJmNzgtNjlkYzE3ZWRhYjFiM2RhMDhiNTEtM2ZlYy00YjQ5LWE1ZTAtZDU5ZmJhNjhmNTBi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf5T_rXg05htYSvIz4xq0hSMXH_eObwGFGIJN3tiU4Byp1eY3MZhq0KpBZ9c25gm2f_itpaH3Q3O83FbkEEtUUfxxfuXbltZeKwdZgHxrwRklZjdsEFrmZQVcSXqFf2cyvLct7-qNK6LTrKNet1Rq_07MF5mvjL7lTwf8VrKfDSnncjIcMYZdJ-hPxOKqEMhMJmUcKqnipXvmiU_gNnxz1Kg-SoJN7ang2503EmQoUG6Xdj60Iinil0R_PngwV1Bu52drTHysKjaxVifAmLZMThxO3WZyIkyHM0ieFSNVieJTiudNSgI76xQOaElKZe82E4of6B28uM4EcjsuGD-bZRoMUehg2XNcw2_3fJ_vLAxHhYGYrgKbNbuqv3xyq7QaA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:20:47.605 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 09:20:47.605 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 09:20:47.605 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-31 09:20:47.605 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:20:47.605 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-31 09:20:47.610 -06:00 [DBG] Creating Implicit Flow response.
2018-07-31 09:20:47.610 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 09:20:47.610 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 09:20:47.622 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****gSxg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****5033"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LI:00000007",
  "TimeStamp": "2018-07-31T15:20:47Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:20:47.622 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf5T_rXg05htYSvIz4xq0hSMXH_eObwGFGIJN3tiU4Byp1eY3MZhq0KpBZ9c25gm2f_itpaH3Q3O83FbkEEtUUfxxfuXbltZeKwdZgHxrwRklZjdsEFrmZQVcSXqFf2cyvLct7-qNK6LTrKNet1Rq_07MF5mvjL7lTwf8VrKfDSnncjIcMYZdJ-hPxOKqEMhMJmUcKqnipXvmiU_gNnxz1Kg-SoJN7ang2503EmQoUG6Xdj60Iinil0R_PngwV1Bu52drTHysKjaxVifAmLZMThxO3WZyIkyHM0ieFSNVieJTiudNSgI76xQOaElKZe82E4of6B28uM4EcjsuGD-bZRoMUehg2XNcw2_3fJ_vLAxHhYGYrgKbNbuqv3xyq7QaA",
  "Scope": "openid profile business email"
}
2018-07-31 09:20:47.622 -06:00 [DBG] Augmenting SignInContext
2018-07-31 09:20:47.622 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 09:20:47.706 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-31 09:20:47.706 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-31 09:20:47.706 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-31 09:20:47.706 -06:00 [DBG] Start token request.
2018-07-31 09:20:47.706 -06:00 [DBG] Start client validation
2018-07-31 09:20:47.706 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-31 09:20:47.706 -06:00 [DBG] Start parsing for secret in post body
2018-07-31 09:20:47.706 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-31 09:20:47.706 -06:00 [DBG] Secret id found: ideaBox
2018-07-31 09:20:47.706 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:20:47.706 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-31 09:20:47.706 -06:00 [DBG] Client validation success
2018-07-31 09:20:47.706 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFMUHL6F4LH:00000003",
  "TimeStamp": "2018-07-31T15:20:47Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:20:47.707 -06:00 [DBG] Start token request validation
2018-07-31 09:20:47.707 -06:00 [DBG] Start validation of authorization code token request
2018-07-31 09:20:47.714 -06:00 [DBG] Validation of authorization code token request success
2018-07-31 09:20:47.714 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "7b287d20d2f77a299930a34628d049944c211f10826b94a6007e17d7af485033",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "7b287d20d2f77a299930a34628d049944c211f10826b94a6007e17d7af485033",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-31 09:20:47.714 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:20:47.714 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-31 09:20:47.714 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:20:47.727 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:20:47.727 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 09:20:47.727 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 09:20:47.738 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****kOpA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****6pFA"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LH:00000003",
  "TimeStamp": "2018-07-31T15:20:47Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:20:47.738 -06:00 [DBG] Token request success.
2018-07-31 09:20:47.746 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-31 09:20:47.746 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-31 09:20:47.746 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-31 09:20:47.746 -06:00 [DBG] Start userinfo request
2018-07-31 09:20:47.747 -06:00 [DBG] Bearer token found in header
2018-07-31 09:20:47.749 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:20:47.749 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:20:47.750 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-31 09:20:47.750 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533050447,
    "exp": 1533054047,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1533050445,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-31 09:20:47.750 -06:00 [DBG] Creating userinfo response
2018-07-31 09:20:47.750 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:20:47.750 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:20:47.750 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-31 09:20:47.750 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:20:47.751 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-31 09:20:47.751 -06:00 [DBG] End userinfo request
2018-07-31 09:24:26.167 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-31 09:24:26.167 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-31 09:24:26.167 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-31 09:24:26.167 -06:00 [DBG] Start discovery request
2018-07-31 09:24:26.227 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-31 09:24:26.227 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-31 09:24:26.227 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-31 09:24:26.227 -06:00 [DBG] Start key discovery request
2018-07-31 09:24:26.253 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-31 09:24:26.253 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-31 09:24:26.253 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-31 09:24:26.253 -06:00 [DBG] Start authorize request
2018-07-31 09:24:26.254 -06:00 [DBG] No user present in authorize request
2018-07-31 09:24:26.254 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:24:26.254 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:24:26.254 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:24:26.254 -06:00 [DBG] No PKCE used.
2018-07-31 09:24:26.254 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:24:26.254 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeXqw3RzOKx1kSem3WE7CuHDenzddxwFqz5Jn2fd6_aKmWmebE8vxw7ISoFh1jd8Qt8eTQktuOQO8okosJ7-mBBVcvTmz8-NHX5MhRPw5fOTzK4mVBv6xQ7086AXR3d8IAA6ZCHKQGS5OadAVUTMb9Im7R7ZriseOvZgEN2hKw53ZeObv8i-jV69uNJ__Qb0FR0A_Yn-Go3EUsG1ZgHdH2RUjfoSC4-8cAg3yi2oOvMyebFUyiUvO5FwraWRxipNtqkex9LHvqNSaEZJESusc1-j5f7TR3QT5yhyPQLNOeacIUwwUhgJrJuNLvIzBn_ht62C4gUIfFMoT7563-r8QfrZRHrqwyjb1BshHBM1YUMHAkVA-fiOsPtjtmJUqX47KA",
  "Nonce": "636686474662421340.NWYzNTQzMzMtOGY0Mi00OGUyLWFjNTAtNjg2ZDNjMDk0ZWI0OTZjNWE2NGYtZTY0NS00ZGUyLTliYmYtZmNhNDMwMTU1NTg0",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686474662421340.NWYzNTQzMzMtOGY0Mi00OGUyLWFjNTAtNjg2ZDNjMDk0ZWI0OTZjNWE2NGYtZTY0NS00ZGUyLTliYmYtZmNhNDMwMTU1NTg0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeXqw3RzOKx1kSem3WE7CuHDenzddxwFqz5Jn2fd6_aKmWmebE8vxw7ISoFh1jd8Qt8eTQktuOQO8okosJ7-mBBVcvTmz8-NHX5MhRPw5fOTzK4mVBv6xQ7086AXR3d8IAA6ZCHKQGS5OadAVUTMb9Im7R7ZriseOvZgEN2hKw53ZeObv8i-jV69uNJ__Qb0FR0A_Yn-Go3EUsG1ZgHdH2RUjfoSC4-8cAg3yi2oOvMyebFUyiUvO5FwraWRxipNtqkex9LHvqNSaEZJESusc1-j5f7TR3QT5yhyPQLNOeacIUwwUhgJrJuNLvIzBn_ht62C4gUIfFMoT7563-r8QfrZRHrqwyjb1BshHBM1YUMHAkVA-fiOsPtjtmJUqX47KA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:24:26.254 -06:00 [INF] Showing login: User is not authenticated
2018-07-31 09:24:26.256 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:24:26.256 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:24:26.256 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:24:26.256 -06:00 [DBG] No PKCE used.
2018-07-31 09:24:26.256 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:24:26.256 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:24:37.588 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 09:24:37.603 -06:00 [DBG] Augmenting SignInContext
2018-07-31 09:24:37.603 -06:00 [DBG] Adding idp claim with value: local
2018-07-31 09:24:37.603 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-31 09:24:37.603 -06:00 [DBG] Adding auth_time claim with value: 1533050677
2018-07-31 09:24:37.603 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 09:24:37.604 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFMUHL6F4LK:00000003",
  "TimeStamp": "2018-07-31T15:24:37Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:24:37.606 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:24:37.606 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:24:37.606 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 09:24:37.606 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 09:24:37.606 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 09:24:37.606 -06:00 [DBG] Start authorize callback request
2018-07-31 09:24:37.607 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:24:37.607 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:24:37.607 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:24:37.607 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:24:37.607 -06:00 [DBG] No PKCE used.
2018-07-31 09:24:37.607 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:24:37.607 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeXqw3RzOKx1kSem3WE7CuHDenzddxwFqz5Jn2fd6_aKmWmebE8vxw7ISoFh1jd8Qt8eTQktuOQO8okosJ7-mBBVcvTmz8-NHX5MhRPw5fOTzK4mVBv6xQ7086AXR3d8IAA6ZCHKQGS5OadAVUTMb9Im7R7ZriseOvZgEN2hKw53ZeObv8i-jV69uNJ__Qb0FR0A_Yn-Go3EUsG1ZgHdH2RUjfoSC4-8cAg3yi2oOvMyebFUyiUvO5FwraWRxipNtqkex9LHvqNSaEZJESusc1-j5f7TR3QT5yhyPQLNOeacIUwwUhgJrJuNLvIzBn_ht62C4gUIfFMoT7563-r8QfrZRHrqwyjb1BshHBM1YUMHAkVA-fiOsPtjtmJUqX47KA",
  "Nonce": "636686474662421340.NWYzNTQzMzMtOGY0Mi00OGUyLWFjNTAtNjg2ZDNjMDk0ZWI0OTZjNWE2NGYtZTY0NS00ZGUyLTliYmYtZmNhNDMwMTU1NTg0",
  "SessionId": "de078275db943149dd63186717da8d8e",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686474662421340.NWYzNTQzMzMtOGY0Mi00OGUyLWFjNTAtNjg2ZDNjMDk0ZWI0OTZjNWE2NGYtZTY0NS00ZGUyLTliYmYtZmNhNDMwMTU1NTg0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeXqw3RzOKx1kSem3WE7CuHDenzddxwFqz5Jn2fd6_aKmWmebE8vxw7ISoFh1jd8Qt8eTQktuOQO8okosJ7-mBBVcvTmz8-NHX5MhRPw5fOTzK4mVBv6xQ7086AXR3d8IAA6ZCHKQGS5OadAVUTMb9Im7R7ZriseOvZgEN2hKw53ZeObv8i-jV69uNJ__Qb0FR0A_Yn-Go3EUsG1ZgHdH2RUjfoSC4-8cAg3yi2oOvMyebFUyiUvO5FwraWRxipNtqkex9LHvqNSaEZJESusc1-j5f7TR3QT5yhyPQLNOeacIUwwUhgJrJuNLvIzBn_ht62C4gUIfFMoT7563-r8QfrZRHrqwyjb1BshHBM1YUMHAkVA-fiOsPtjtmJUqX47KA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:24:37.608 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 09:24:37.608 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 09:24:37.608 -06:00 [INF] Showing consent: User has not yet consented
2018-07-31 09:24:37.611 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:24:37.611 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:24:37.611 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:24:37.611 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:24:37.611 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:24:37.611 -06:00 [DBG] No PKCE used.
2018-07-31 09:24:37.611 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:24:37.611 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:24:53.291 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 09:24:53.292 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:24:53.292 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:24:53.292 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:24:53.292 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:24:53.292 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:24:53.292 -06:00 [DBG] No PKCE used.
2018-07-31 09:24:53.292 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:24:53.296 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:24:53.296 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:24:53.297 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 09:24:53.297 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 09:24:53.297 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 09:24:53.297 -06:00 [DBG] Start authorize callback request
2018-07-31 09:24:53.297 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:24:53.297 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:24:53.297 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:24:53.297 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:24:53.297 -06:00 [DBG] No PKCE used.
2018-07-31 09:24:53.297 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:24:53.297 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeXqw3RzOKx1kSem3WE7CuHDenzddxwFqz5Jn2fd6_aKmWmebE8vxw7ISoFh1jd8Qt8eTQktuOQO8okosJ7-mBBVcvTmz8-NHX5MhRPw5fOTzK4mVBv6xQ7086AXR3d8IAA6ZCHKQGS5OadAVUTMb9Im7R7ZriseOvZgEN2hKw53ZeObv8i-jV69uNJ__Qb0FR0A_Yn-Go3EUsG1ZgHdH2RUjfoSC4-8cAg3yi2oOvMyebFUyiUvO5FwraWRxipNtqkex9LHvqNSaEZJESusc1-j5f7TR3QT5yhyPQLNOeacIUwwUhgJrJuNLvIzBn_ht62C4gUIfFMoT7563-r8QfrZRHrqwyjb1BshHBM1YUMHAkVA-fiOsPtjtmJUqX47KA",
  "Nonce": "636686474662421340.NWYzNTQzMzMtOGY0Mi00OGUyLWFjNTAtNjg2ZDNjMDk0ZWI0OTZjNWE2NGYtZTY0NS00ZGUyLTliYmYtZmNhNDMwMTU1NTg0",
  "SessionId": "de078275db943149dd63186717da8d8e",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686474662421340.NWYzNTQzMzMtOGY0Mi00OGUyLWFjNTAtNjg2ZDNjMDk0ZWI0OTZjNWE2NGYtZTY0NS00ZGUyLTliYmYtZmNhNDMwMTU1NTg0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeXqw3RzOKx1kSem3WE7CuHDenzddxwFqz5Jn2fd6_aKmWmebE8vxw7ISoFh1jd8Qt8eTQktuOQO8okosJ7-mBBVcvTmz8-NHX5MhRPw5fOTzK4mVBv6xQ7086AXR3d8IAA6ZCHKQGS5OadAVUTMb9Im7R7ZriseOvZgEN2hKw53ZeObv8i-jV69uNJ__Qb0FR0A_Yn-Go3EUsG1ZgHdH2RUjfoSC4-8cAg3yi2oOvMyebFUyiUvO5FwraWRxipNtqkex9LHvqNSaEZJESusc1-j5f7TR3QT5yhyPQLNOeacIUwwUhgJrJuNLvIzBn_ht62C4gUIfFMoT7563-r8QfrZRHrqwyjb1BshHBM1YUMHAkVA-fiOsPtjtmJUqX47KA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:24:53.298 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 09:24:53.299 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 09:24:53.299 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-31 09:24:53.299 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:24:53.299 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-31 09:24:53.303 -06:00 [DBG] Creating Implicit Flow response.
2018-07-31 09:24:53.303 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 09:24:53.304 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 09:24:53.316 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****0zwg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****eca9"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LK:00000007",
  "TimeStamp": "2018-07-31T15:24:53Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:24:53.316 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeXqw3RzOKx1kSem3WE7CuHDenzddxwFqz5Jn2fd6_aKmWmebE8vxw7ISoFh1jd8Qt8eTQktuOQO8okosJ7-mBBVcvTmz8-NHX5MhRPw5fOTzK4mVBv6xQ7086AXR3d8IAA6ZCHKQGS5OadAVUTMb9Im7R7ZriseOvZgEN2hKw53ZeObv8i-jV69uNJ__Qb0FR0A_Yn-Go3EUsG1ZgHdH2RUjfoSC4-8cAg3yi2oOvMyebFUyiUvO5FwraWRxipNtqkex9LHvqNSaEZJESusc1-j5f7TR3QT5yhyPQLNOeacIUwwUhgJrJuNLvIzBn_ht62C4gUIfFMoT7563-r8QfrZRHrqwyjb1BshHBM1YUMHAkVA-fiOsPtjtmJUqX47KA",
  "Scope": "openid profile business email"
}
2018-07-31 09:24:53.316 -06:00 [DBG] Augmenting SignInContext
2018-07-31 09:24:53.316 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 09:24:53.408 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-31 09:24:53.408 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-31 09:24:53.408 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-31 09:24:53.408 -06:00 [DBG] Start token request.
2018-07-31 09:24:53.408 -06:00 [DBG] Start client validation
2018-07-31 09:24:53.408 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-31 09:24:53.408 -06:00 [DBG] Start parsing for secret in post body
2018-07-31 09:24:53.408 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-31 09:24:53.408 -06:00 [DBG] Secret id found: ideaBox
2018-07-31 09:24:53.408 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:24:53.409 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-31 09:24:53.409 -06:00 [DBG] Client validation success
2018-07-31 09:24:53.409 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFMUHL6F4LJ:00000003",
  "TimeStamp": "2018-07-31T15:24:53Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:24:53.409 -06:00 [DBG] Start token request validation
2018-07-31 09:24:53.409 -06:00 [DBG] Start validation of authorization code token request
2018-07-31 09:24:53.416 -06:00 [DBG] Validation of authorization code token request success
2018-07-31 09:24:53.416 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "d40c80a19d21b49b877f5d8f89938a096bcff4d521656880a749f3b93546eca9",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "d40c80a19d21b49b877f5d8f89938a096bcff4d521656880a749f3b93546eca9",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-31 09:24:53.416 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:24:53.416 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-31 09:24:53.416 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:24:53.429 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:24:53.429 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 09:24:53.429 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 09:24:53.440 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Gn0Q"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****I7YQ"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LJ:00000003",
  "TimeStamp": "2018-07-31T15:24:53Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:24:53.440 -06:00 [DBG] Token request success.
2018-07-31 09:24:53.448 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-31 09:24:53.448 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-31 09:24:53.448 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-31 09:24:53.448 -06:00 [DBG] Start userinfo request
2018-07-31 09:24:53.448 -06:00 [DBG] Bearer token found in header
2018-07-31 09:24:53.450 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:24:53.450 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:24:53.452 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-31 09:24:53.452 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533050693,
    "exp": 1533054293,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1533050677,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-31 09:24:53.452 -06:00 [DBG] Creating userinfo response
2018-07-31 09:24:53.452 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:24:53.452 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:24:53.452 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-31 09:24:53.452 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:24:53.453 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-31 09:24:53.453 -06:00 [DBG] End userinfo request
2018-07-31 09:25:47.618 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-31 09:25:47.618 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-31 09:25:47.618 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-31 09:25:47.618 -06:00 [DBG] Start discovery request
2018-07-31 09:25:47.736 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-31 09:25:47.736 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-31 09:25:47.736 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-31 09:25:47.736 -06:00 [DBG] Start key discovery request
2018-07-31 09:25:47.815 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-31 09:25:47.815 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-31 09:25:47.815 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-31 09:25:47.815 -06:00 [DBG] Start authorize request
2018-07-31 09:25:47.815 -06:00 [DBG] No user present in authorize request
2018-07-31 09:25:47.815 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:25:47.815 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:25:47.815 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:25:47.815 -06:00 [DBG] No PKCE used.
2018-07-31 09:25:47.815 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:25:47.816 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcj9ne6BMKsj26ZGj9UTH1JUjngJEpXETrAg8132WwFofdpCZ11QzQSKmJ9YansonuIKF1SY6fcm1UeqmVdJaZRFqNAHyes0nWgUtmVcWwSZmBlnY46J2cF-O2hK01hy3nUncy4pTxl04VncA5PqdTiUDU489JZ3dvCSjQLXul46F1KPzxKRjcZx1jFSCrnnsPnPDCnC9RYpkkJ-VPUhfx_Am8ud1CiDPDXewqNAjmhUzfUxi9PwVkmZuGJVsTE7WJ-lj60M10ltvXvqB68PZdi1ccaYWsN0u6IpjWA9hgAWjmQw9HwxrjKIW2wobA6stiG_EO-86OQDrvXnaccaUJTTHUCzdj-cZcGQim8BWUfD-sxsb1HiDDkLqkuT_KE6b4",
  "Nonce": "636686475477948560.YzFmZDk0ZWQtNTVlMi00MmIyLWFlZTUtNmNjNGZmZTZiYTg5OWZjYzQ0NTUtMWY2Zi00YTUxLWI2MzctZDk0Njg1MjY4MzEx",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686475477948560.YzFmZDk0ZWQtNTVlMi00MmIyLWFlZTUtNmNjNGZmZTZiYTg5OWZjYzQ0NTUtMWY2Zi00YTUxLWI2MzctZDk0Njg1MjY4MzEx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcj9ne6BMKsj26ZGj9UTH1JUjngJEpXETrAg8132WwFofdpCZ11QzQSKmJ9YansonuIKF1SY6fcm1UeqmVdJaZRFqNAHyes0nWgUtmVcWwSZmBlnY46J2cF-O2hK01hy3nUncy4pTxl04VncA5PqdTiUDU489JZ3dvCSjQLXul46F1KPzxKRjcZx1jFSCrnnsPnPDCnC9RYpkkJ-VPUhfx_Am8ud1CiDPDXewqNAjmhUzfUxi9PwVkmZuGJVsTE7WJ-lj60M10ltvXvqB68PZdi1ccaYWsN0u6IpjWA9hgAWjmQw9HwxrjKIW2wobA6stiG_EO-86OQDrvXnaccaUJTTHUCzdj-cZcGQim8BWUfD-sxsb1HiDDkLqkuT_KE6b4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:25:47.816 -06:00 [INF] Showing login: User is not authenticated
2018-07-31 09:25:47.818 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:25:47.818 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:25:47.819 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:25:47.819 -06:00 [DBG] No PKCE used.
2018-07-31 09:25:47.819 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:25:47.819 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:31:28.220 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 09:31:28.235 -06:00 [DBG] Augmenting SignInContext
2018-07-31 09:31:28.235 -06:00 [DBG] Adding idp claim with value: local
2018-07-31 09:31:28.235 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-31 09:31:28.235 -06:00 [DBG] Adding auth_time claim with value: 1533051088
2018-07-31 09:31:28.235 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 09:31:28.236 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFMUHL6F4LM:00000001",
  "TimeStamp": "2018-07-31T15:31:28Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:31:28.238 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:31:28.238 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:31:28.238 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 09:31:28.238 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 09:31:28.238 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 09:31:28.238 -06:00 [DBG] Start authorize callback request
2018-07-31 09:31:28.238 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:31:28.239 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:31:28.239 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:31:28.239 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:31:28.239 -06:00 [DBG] No PKCE used.
2018-07-31 09:31:28.239 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:31:28.239 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcj9ne6BMKsj26ZGj9UTH1JUjngJEpXETrAg8132WwFofdpCZ11QzQSKmJ9YansonuIKF1SY6fcm1UeqmVdJaZRFqNAHyes0nWgUtmVcWwSZmBlnY46J2cF-O2hK01hy3nUncy4pTxl04VncA5PqdTiUDU489JZ3dvCSjQLXul46F1KPzxKRjcZx1jFSCrnnsPnPDCnC9RYpkkJ-VPUhfx_Am8ud1CiDPDXewqNAjmhUzfUxi9PwVkmZuGJVsTE7WJ-lj60M10ltvXvqB68PZdi1ccaYWsN0u6IpjWA9hgAWjmQw9HwxrjKIW2wobA6stiG_EO-86OQDrvXnaccaUJTTHUCzdj-cZcGQim8BWUfD-sxsb1HiDDkLqkuT_KE6b4",
  "Nonce": "636686475477948560.YzFmZDk0ZWQtNTVlMi00MmIyLWFlZTUtNmNjNGZmZTZiYTg5OWZjYzQ0NTUtMWY2Zi00YTUxLWI2MzctZDk0Njg1MjY4MzEx",
  "SessionId": "70bcf6654186dd179932722dc73f0537",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686475477948560.YzFmZDk0ZWQtNTVlMi00MmIyLWFlZTUtNmNjNGZmZTZiYTg5OWZjYzQ0NTUtMWY2Zi00YTUxLWI2MzctZDk0Njg1MjY4MzEx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcj9ne6BMKsj26ZGj9UTH1JUjngJEpXETrAg8132WwFofdpCZ11QzQSKmJ9YansonuIKF1SY6fcm1UeqmVdJaZRFqNAHyes0nWgUtmVcWwSZmBlnY46J2cF-O2hK01hy3nUncy4pTxl04VncA5PqdTiUDU489JZ3dvCSjQLXul46F1KPzxKRjcZx1jFSCrnnsPnPDCnC9RYpkkJ-VPUhfx_Am8ud1CiDPDXewqNAjmhUzfUxi9PwVkmZuGJVsTE7WJ-lj60M10ltvXvqB68PZdi1ccaYWsN0u6IpjWA9hgAWjmQw9HwxrjKIW2wobA6stiG_EO-86OQDrvXnaccaUJTTHUCzdj-cZcGQim8BWUfD-sxsb1HiDDkLqkuT_KE6b4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:31:28.240 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 09:31:28.240 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 09:31:28.240 -06:00 [INF] Showing consent: User has not yet consented
2018-07-31 09:31:28.243 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:31:28.243 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:31:28.243 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:31:28.243 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:31:28.243 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:31:28.243 -06:00 [DBG] No PKCE used.
2018-07-31 09:31:28.243 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:31:28.244 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:31:51.292 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 09:31:51.293 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:31:51.293 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:31:51.293 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:31:51.293 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:31:51.293 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:31:51.293 -06:00 [DBG] No PKCE used.
2018-07-31 09:31:51.293 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:31:51.297 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:31:51.297 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:31:51.297 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 09:31:51.297 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 09:31:51.297 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 09:31:51.298 -06:00 [DBG] Start authorize callback request
2018-07-31 09:31:51.298 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:31:51.298 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:31:51.298 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:31:51.298 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:31:51.298 -06:00 [DBG] No PKCE used.
2018-07-31 09:31:51.298 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:31:51.298 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcj9ne6BMKsj26ZGj9UTH1JUjngJEpXETrAg8132WwFofdpCZ11QzQSKmJ9YansonuIKF1SY6fcm1UeqmVdJaZRFqNAHyes0nWgUtmVcWwSZmBlnY46J2cF-O2hK01hy3nUncy4pTxl04VncA5PqdTiUDU489JZ3dvCSjQLXul46F1KPzxKRjcZx1jFSCrnnsPnPDCnC9RYpkkJ-VPUhfx_Am8ud1CiDPDXewqNAjmhUzfUxi9PwVkmZuGJVsTE7WJ-lj60M10ltvXvqB68PZdi1ccaYWsN0u6IpjWA9hgAWjmQw9HwxrjKIW2wobA6stiG_EO-86OQDrvXnaccaUJTTHUCzdj-cZcGQim8BWUfD-sxsb1HiDDkLqkuT_KE6b4",
  "Nonce": "636686475477948560.YzFmZDk0ZWQtNTVlMi00MmIyLWFlZTUtNmNjNGZmZTZiYTg5OWZjYzQ0NTUtMWY2Zi00YTUxLWI2MzctZDk0Njg1MjY4MzEx",
  "SessionId": "70bcf6654186dd179932722dc73f0537",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686475477948560.YzFmZDk0ZWQtNTVlMi00MmIyLWFlZTUtNmNjNGZmZTZiYTg5OWZjYzQ0NTUtMWY2Zi00YTUxLWI2MzctZDk0Njg1MjY4MzEx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcj9ne6BMKsj26ZGj9UTH1JUjngJEpXETrAg8132WwFofdpCZ11QzQSKmJ9YansonuIKF1SY6fcm1UeqmVdJaZRFqNAHyes0nWgUtmVcWwSZmBlnY46J2cF-O2hK01hy3nUncy4pTxl04VncA5PqdTiUDU489JZ3dvCSjQLXul46F1KPzxKRjcZx1jFSCrnnsPnPDCnC9RYpkkJ-VPUhfx_Am8ud1CiDPDXewqNAjmhUzfUxi9PwVkmZuGJVsTE7WJ-lj60M10ltvXvqB68PZdi1ccaYWsN0u6IpjWA9hgAWjmQw9HwxrjKIW2wobA6stiG_EO-86OQDrvXnaccaUJTTHUCzdj-cZcGQim8BWUfD-sxsb1HiDDkLqkuT_KE6b4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:31:51.299 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 09:31:51.299 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 09:31:51.300 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-31 09:31:51.300 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:31:51.300 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-31 09:31:51.305 -06:00 [DBG] Creating Implicit Flow response.
2018-07-31 09:31:51.305 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 09:31:51.305 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 09:31:51.318 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****qheg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****c0a1"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LM:00000005",
  "TimeStamp": "2018-07-31T15:31:51Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:31:51.318 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcj9ne6BMKsj26ZGj9UTH1JUjngJEpXETrAg8132WwFofdpCZ11QzQSKmJ9YansonuIKF1SY6fcm1UeqmVdJaZRFqNAHyes0nWgUtmVcWwSZmBlnY46J2cF-O2hK01hy3nUncy4pTxl04VncA5PqdTiUDU489JZ3dvCSjQLXul46F1KPzxKRjcZx1jFSCrnnsPnPDCnC9RYpkkJ-VPUhfx_Am8ud1CiDPDXewqNAjmhUzfUxi9PwVkmZuGJVsTE7WJ-lj60M10ltvXvqB68PZdi1ccaYWsN0u6IpjWA9hgAWjmQw9HwxrjKIW2wobA6stiG_EO-86OQDrvXnaccaUJTTHUCzdj-cZcGQim8BWUfD-sxsb1HiDDkLqkuT_KE6b4",
  "Scope": "openid profile business email"
}
2018-07-31 09:31:51.318 -06:00 [DBG] Augmenting SignInContext
2018-07-31 09:31:51.318 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 09:31:51.880 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-31 09:31:51.880 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-31 09:31:51.880 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-31 09:31:51.881 -06:00 [DBG] Start token request.
2018-07-31 09:31:51.881 -06:00 [DBG] Start client validation
2018-07-31 09:31:51.881 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-31 09:31:51.881 -06:00 [DBG] Start parsing for secret in post body
2018-07-31 09:31:51.881 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-31 09:31:51.881 -06:00 [DBG] Secret id found: ideaBox
2018-07-31 09:31:51.881 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:31:51.881 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-31 09:31:51.881 -06:00 [DBG] Client validation success
2018-07-31 09:31:51.881 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFMUHL6F4LN:00000001",
  "TimeStamp": "2018-07-31T15:31:51Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:31:51.881 -06:00 [DBG] Start token request validation
2018-07-31 09:31:51.881 -06:00 [DBG] Start validation of authorization code token request
2018-07-31 09:31:51.889 -06:00 [DBG] Validation of authorization code token request success
2018-07-31 09:31:51.889 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "94b790216dd0c9107ebe8ca37a364f0f349d719d3ff618298802948f7813c0a1",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "94b790216dd0c9107ebe8ca37a364f0f349d719d3ff618298802948f7813c0a1",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-31 09:31:51.889 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:31:51.889 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-31 09:31:51.889 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:31:51.902 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:31:51.902 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 09:31:51.902 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 09:31:51.913 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****e1LA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****vEAQ"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LN:00000001",
  "TimeStamp": "2018-07-31T15:31:51Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:31:51.913 -06:00 [DBG] Token request success.
2018-07-31 09:31:51.923 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-31 09:31:51.924 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-31 09:31:51.924 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-31 09:31:51.924 -06:00 [DBG] Start userinfo request
2018-07-31 09:31:51.924 -06:00 [DBG] Bearer token found in header
2018-07-31 09:31:51.926 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:31:51.926 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:31:51.927 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-31 09:31:51.927 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533051111,
    "exp": 1533054711,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1533051088,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-31 09:31:51.928 -06:00 [DBG] Creating userinfo response
2018-07-31 09:31:51.928 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:31:51.928 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:31:51.928 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-31 09:31:51.928 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:31:51.929 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-31 09:31:51.929 -06:00 [DBG] End userinfo request
2018-07-31 09:36:53.893 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-31 09:36:53.893 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-31 09:36:53.893 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-31 09:36:53.893 -06:00 [DBG] Start discovery request
2018-07-31 09:36:54.017 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-31 09:36:54.017 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-31 09:36:54.017 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-31 09:36:54.017 -06:00 [DBG] Start key discovery request
2018-07-31 09:36:54.098 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-31 09:36:54.098 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-31 09:36:54.098 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-31 09:36:54.098 -06:00 [DBG] Start authorize request
2018-07-31 09:36:54.099 -06:00 [DBG] No user present in authorize request
2018-07-31 09:36:54.099 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:36:54.099 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:36:54.099 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:36:54.099 -06:00 [DBG] No PKCE used.
2018-07-31 09:36:54.099 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:36:54.099 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdY78tVQaic__1My_SEtN776Woe4GMOOL_s2L03D3v8CjXiu9MQMyfTUCzTylU-VZloiJwnmkzQaZRCLdw6Tb2YI8fVqbafv9-tLT964F2Ue5CSyyBINxiJTu9Cpsl-aW_Gnh8iXz7dxkrWyO7aAIjG7yS8OKIOcPrWuNVEmomEByUj42nw9RcCXDVR_TI5Ux0NjNisrPZ1UDGEFLU1xKmqNw6biaSqu_aO9-M0pmz0l2pnUfHATUhTm2wCdCwy5Z4OwLvFI-CzG2jDZN-MEOh9KXXiSoFxPmYsYxXeJB-qHTOgGISB-uu_wG4_tfpKf5AO3QIby_0EHV_yC3RVNt2wdG0FPXUl_HIBwWu66puA6wTVWX5fR9AqKfO4HElU8Dk",
  "Nonce": "636686482140772200.MjRmN2Q0OGUtYzYzYS00ZDM3LTljZGMtMGQyY2YzNTU1NjQ5NGE1NTMzODktZmQ4Mi00YjVmLWJhMTgtMTI5YWJjOWQ4NGRi",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686482140772200.MjRmN2Q0OGUtYzYzYS00ZDM3LTljZGMtMGQyY2YzNTU1NjQ5NGE1NTMzODktZmQ4Mi00YjVmLWJhMTgtMTI5YWJjOWQ4NGRi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdY78tVQaic__1My_SEtN776Woe4GMOOL_s2L03D3v8CjXiu9MQMyfTUCzTylU-VZloiJwnmkzQaZRCLdw6Tb2YI8fVqbafv9-tLT964F2Ue5CSyyBINxiJTu9Cpsl-aW_Gnh8iXz7dxkrWyO7aAIjG7yS8OKIOcPrWuNVEmomEByUj42nw9RcCXDVR_TI5Ux0NjNisrPZ1UDGEFLU1xKmqNw6biaSqu_aO9-M0pmz0l2pnUfHATUhTm2wCdCwy5Z4OwLvFI-CzG2jDZN-MEOh9KXXiSoFxPmYsYxXeJB-qHTOgGISB-uu_wG4_tfpKf5AO3QIby_0EHV_yC3RVNt2wdG0FPXUl_HIBwWu66puA6wTVWX5fR9AqKfO4HElU8Dk",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:36:54.099 -06:00 [INF] Showing login: User is not authenticated
2018-07-31 09:36:54.102 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:36:54.102 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:36:54.102 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:36:54.102 -06:00 [DBG] No PKCE used.
2018-07-31 09:36:54.102 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:36:54.102 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:37:03.454 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 09:37:03.469 -06:00 [DBG] Augmenting SignInContext
2018-07-31 09:37:03.469 -06:00 [DBG] Adding idp claim with value: local
2018-07-31 09:37:03.469 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-31 09:37:03.469 -06:00 [DBG] Adding auth_time claim with value: 1533051423
2018-07-31 09:37:03.469 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 09:37:03.470 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFMUHL6F4LP:00000003",
  "TimeStamp": "2018-07-31T15:37:03Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:37:03.473 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:37:03.473 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:37:03.473 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 09:37:03.473 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 09:37:03.473 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 09:37:03.473 -06:00 [DBG] Start authorize callback request
2018-07-31 09:37:03.473 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:37:03.473 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:37:03.473 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:37:03.473 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:37:03.473 -06:00 [DBG] No PKCE used.
2018-07-31 09:37:03.473 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:37:03.473 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdY78tVQaic__1My_SEtN776Woe4GMOOL_s2L03D3v8CjXiu9MQMyfTUCzTylU-VZloiJwnmkzQaZRCLdw6Tb2YI8fVqbafv9-tLT964F2Ue5CSyyBINxiJTu9Cpsl-aW_Gnh8iXz7dxkrWyO7aAIjG7yS8OKIOcPrWuNVEmomEByUj42nw9RcCXDVR_TI5Ux0NjNisrPZ1UDGEFLU1xKmqNw6biaSqu_aO9-M0pmz0l2pnUfHATUhTm2wCdCwy5Z4OwLvFI-CzG2jDZN-MEOh9KXXiSoFxPmYsYxXeJB-qHTOgGISB-uu_wG4_tfpKf5AO3QIby_0EHV_yC3RVNt2wdG0FPXUl_HIBwWu66puA6wTVWX5fR9AqKfO4HElU8Dk",
  "Nonce": "636686482140772200.MjRmN2Q0OGUtYzYzYS00ZDM3LTljZGMtMGQyY2YzNTU1NjQ5NGE1NTMzODktZmQ4Mi00YjVmLWJhMTgtMTI5YWJjOWQ4NGRi",
  "SessionId": "e3f43cb1fd29cf6e6ff25543e7a4f862",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686482140772200.MjRmN2Q0OGUtYzYzYS00ZDM3LTljZGMtMGQyY2YzNTU1NjQ5NGE1NTMzODktZmQ4Mi00YjVmLWJhMTgtMTI5YWJjOWQ4NGRi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdY78tVQaic__1My_SEtN776Woe4GMOOL_s2L03D3v8CjXiu9MQMyfTUCzTylU-VZloiJwnmkzQaZRCLdw6Tb2YI8fVqbafv9-tLT964F2Ue5CSyyBINxiJTu9Cpsl-aW_Gnh8iXz7dxkrWyO7aAIjG7yS8OKIOcPrWuNVEmomEByUj42nw9RcCXDVR_TI5Ux0NjNisrPZ1UDGEFLU1xKmqNw6biaSqu_aO9-M0pmz0l2pnUfHATUhTm2wCdCwy5Z4OwLvFI-CzG2jDZN-MEOh9KXXiSoFxPmYsYxXeJB-qHTOgGISB-uu_wG4_tfpKf5AO3QIby_0EHV_yC3RVNt2wdG0FPXUl_HIBwWu66puA6wTVWX5fR9AqKfO4HElU8Dk",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:37:03.475 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 09:37:03.475 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 09:37:03.475 -06:00 [INF] Showing consent: User has not yet consented
2018-07-31 09:37:03.477 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:37:03.477 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:37:03.477 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:37:03.477 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:37:03.478 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:37:03.478 -06:00 [DBG] No PKCE used.
2018-07-31 09:37:03.478 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:37:03.478 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:37:05.848 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 09:37:05.848 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:37:05.848 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:37:05.849 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:37:05.849 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:37:05.849 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:37:05.849 -06:00 [DBG] No PKCE used.
2018-07-31 09:37:05.849 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:37:05.853 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:37:05.853 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:37:05.853 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 09:37:05.853 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 09:37:05.853 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 09:37:05.853 -06:00 [DBG] Start authorize callback request
2018-07-31 09:37:05.853 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:37:05.853 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:37:05.853 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:37:05.853 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:37:05.853 -06:00 [DBG] No PKCE used.
2018-07-31 09:37:05.853 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:37:05.853 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdY78tVQaic__1My_SEtN776Woe4GMOOL_s2L03D3v8CjXiu9MQMyfTUCzTylU-VZloiJwnmkzQaZRCLdw6Tb2YI8fVqbafv9-tLT964F2Ue5CSyyBINxiJTu9Cpsl-aW_Gnh8iXz7dxkrWyO7aAIjG7yS8OKIOcPrWuNVEmomEByUj42nw9RcCXDVR_TI5Ux0NjNisrPZ1UDGEFLU1xKmqNw6biaSqu_aO9-M0pmz0l2pnUfHATUhTm2wCdCwy5Z4OwLvFI-CzG2jDZN-MEOh9KXXiSoFxPmYsYxXeJB-qHTOgGISB-uu_wG4_tfpKf5AO3QIby_0EHV_yC3RVNt2wdG0FPXUl_HIBwWu66puA6wTVWX5fR9AqKfO4HElU8Dk",
  "Nonce": "636686482140772200.MjRmN2Q0OGUtYzYzYS00ZDM3LTljZGMtMGQyY2YzNTU1NjQ5NGE1NTMzODktZmQ4Mi00YjVmLWJhMTgtMTI5YWJjOWQ4NGRi",
  "SessionId": "e3f43cb1fd29cf6e6ff25543e7a4f862",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686482140772200.MjRmN2Q0OGUtYzYzYS00ZDM3LTljZGMtMGQyY2YzNTU1NjQ5NGE1NTMzODktZmQ4Mi00YjVmLWJhMTgtMTI5YWJjOWQ4NGRi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdY78tVQaic__1My_SEtN776Woe4GMOOL_s2L03D3v8CjXiu9MQMyfTUCzTylU-VZloiJwnmkzQaZRCLdw6Tb2YI8fVqbafv9-tLT964F2Ue5CSyyBINxiJTu9Cpsl-aW_Gnh8iXz7dxkrWyO7aAIjG7yS8OKIOcPrWuNVEmomEByUj42nw9RcCXDVR_TI5Ux0NjNisrPZ1UDGEFLU1xKmqNw6biaSqu_aO9-M0pmz0l2pnUfHATUhTm2wCdCwy5Z4OwLvFI-CzG2jDZN-MEOh9KXXiSoFxPmYsYxXeJB-qHTOgGISB-uu_wG4_tfpKf5AO3QIby_0EHV_yC3RVNt2wdG0FPXUl_HIBwWu66puA6wTVWX5fR9AqKfO4HElU8Dk",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:37:05.855 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 09:37:05.855 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 09:37:05.855 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-31 09:37:05.855 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:37:05.855 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-31 09:37:05.860 -06:00 [DBG] Creating Implicit Flow response.
2018-07-31 09:37:05.860 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 09:37:05.860 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 09:37:05.872 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ysGA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****2a51"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LP:00000007",
  "TimeStamp": "2018-07-31T15:37:05Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:37:05.872 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdY78tVQaic__1My_SEtN776Woe4GMOOL_s2L03D3v8CjXiu9MQMyfTUCzTylU-VZloiJwnmkzQaZRCLdw6Tb2YI8fVqbafv9-tLT964F2Ue5CSyyBINxiJTu9Cpsl-aW_Gnh8iXz7dxkrWyO7aAIjG7yS8OKIOcPrWuNVEmomEByUj42nw9RcCXDVR_TI5Ux0NjNisrPZ1UDGEFLU1xKmqNw6biaSqu_aO9-M0pmz0l2pnUfHATUhTm2wCdCwy5Z4OwLvFI-CzG2jDZN-MEOh9KXXiSoFxPmYsYxXeJB-qHTOgGISB-uu_wG4_tfpKf5AO3QIby_0EHV_yC3RVNt2wdG0FPXUl_HIBwWu66puA6wTVWX5fR9AqKfO4HElU8Dk",
  "Scope": "openid profile business email"
}
2018-07-31 09:37:05.872 -06:00 [DBG] Augmenting SignInContext
2018-07-31 09:37:05.872 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 09:37:05.981 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-31 09:37:05.981 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-31 09:37:05.981 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-31 09:37:05.981 -06:00 [DBG] Start token request.
2018-07-31 09:37:05.981 -06:00 [DBG] Start client validation
2018-07-31 09:37:05.981 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-31 09:37:05.981 -06:00 [DBG] Start parsing for secret in post body
2018-07-31 09:37:05.981 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-31 09:37:05.981 -06:00 [DBG] Secret id found: ideaBox
2018-07-31 09:37:05.981 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:37:05.981 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-31 09:37:05.981 -06:00 [DBG] Client validation success
2018-07-31 09:37:05.981 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFMUHL6F4LO:00000003",
  "TimeStamp": "2018-07-31T15:37:05Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:37:05.981 -06:00 [DBG] Start token request validation
2018-07-31 09:37:05.981 -06:00 [DBG] Start validation of authorization code token request
2018-07-31 09:37:05.989 -06:00 [DBG] Validation of authorization code token request success
2018-07-31 09:37:05.989 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "d62b48f6067f20b14dd596ea9b8ecb0dad531cf51da275b50d29ba20c31f2a51",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "d62b48f6067f20b14dd596ea9b8ecb0dad531cf51da275b50d29ba20c31f2a51",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-31 09:37:05.989 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:37:05.989 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-31 09:37:05.989 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:37:06.002 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:37:06.002 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 09:37:06.002 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 09:37:06.013 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****DihA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****z6Fg"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LO:00000003",
  "TimeStamp": "2018-07-31T15:37:06Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:37:06.014 -06:00 [DBG] Token request success.
2018-07-31 09:37:06.022 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-31 09:37:06.023 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-31 09:37:06.023 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-31 09:37:06.023 -06:00 [DBG] Start userinfo request
2018-07-31 09:37:06.023 -06:00 [DBG] Bearer token found in header
2018-07-31 09:37:06.025 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:37:06.025 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:37:06.026 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-31 09:37:06.026 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533051425,
    "exp": 1533055025,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1533051423,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-31 09:37:06.026 -06:00 [DBG] Creating userinfo response
2018-07-31 09:37:06.026 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:37:06.026 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:37:06.026 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-31 09:37:06.026 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:37:06.027 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-31 09:37:06.027 -06:00 [DBG] End userinfo request
2018-07-31 09:42:00.563 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-31 09:42:00.563 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-31 09:42:00.563 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-31 09:42:00.563 -06:00 [DBG] Start discovery request
2018-07-31 09:42:00.683 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-31 09:42:00.683 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-31 09:42:00.683 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-31 09:42:00.683 -06:00 [DBG] Start key discovery request
2018-07-31 09:42:00.764 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-31 09:42:00.764 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-31 09:42:00.764 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-31 09:42:00.764 -06:00 [DBG] Start authorize request
2018-07-31 09:42:00.764 -06:00 [DBG] No user present in authorize request
2018-07-31 09:42:00.764 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:42:00.764 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:42:00.764 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:42:00.764 -06:00 [DBG] No PKCE used.
2018-07-31 09:42:00.764 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:42:00.764 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcSJMsgTvHbfE5osNIpb5VKj0VGkLTq0BEyXkgq5yqq_que7j1j37YIL2SRNs06kl_DBPdEfx3A7vxO1xcxoc3jroopXFbNiIBU22iSZrZLubBAvgu0ipwB2yNHZEmt3ZJb28OjVxMNiWomPchpPguVNkqKflrYxE41Hq0_EnUuusYpobEJA-EKBWbfJZ09P7NTAWbc1Ll0nbWBI4_qfvOgkZRfHhPbgALudwjmnDYRP2BLEo7HvljnIQ4XXmgDPQ2lNWMzjgwRN145rRImugXdTfX7mbRQ87zS66j3v2N9P610o_WUshoyDGF0S2y4IHWSiP9MPRY2YXxSJTqCT-7ppKnimU4zH4YFPzKTEBqR_A6R8Nutpsnvxu89Y4acWf4",
  "Nonce": "636686485207427370.ZDQ0ZDI3NjktMDEzYi00YWE0LWI0MDgtOTJkOWY1NTAzYzg5Y2MxZWMyYWItNjkzOC00NTA3LWI5NzAtZDVhMWQwYzY5ODNh",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686485207427370.ZDQ0ZDI3NjktMDEzYi00YWE0LWI0MDgtOTJkOWY1NTAzYzg5Y2MxZWMyYWItNjkzOC00NTA3LWI5NzAtZDVhMWQwYzY5ODNh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcSJMsgTvHbfE5osNIpb5VKj0VGkLTq0BEyXkgq5yqq_que7j1j37YIL2SRNs06kl_DBPdEfx3A7vxO1xcxoc3jroopXFbNiIBU22iSZrZLubBAvgu0ipwB2yNHZEmt3ZJb28OjVxMNiWomPchpPguVNkqKflrYxE41Hq0_EnUuusYpobEJA-EKBWbfJZ09P7NTAWbc1Ll0nbWBI4_qfvOgkZRfHhPbgALudwjmnDYRP2BLEo7HvljnIQ4XXmgDPQ2lNWMzjgwRN145rRImugXdTfX7mbRQ87zS66j3v2N9P610o_WUshoyDGF0S2y4IHWSiP9MPRY2YXxSJTqCT-7ppKnimU4zH4YFPzKTEBqR_A6R8Nutpsnvxu89Y4acWf4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:42:00.765 -06:00 [INF] Showing login: User is not authenticated
2018-07-31 09:42:00.767 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:42:00.767 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:42:00.767 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:42:00.767 -06:00 [DBG] No PKCE used.
2018-07-31 09:42:00.768 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:42:00.768 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:42:20.349 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 09:42:20.365 -06:00 [DBG] Augmenting SignInContext
2018-07-31 09:42:20.365 -06:00 [DBG] Adding idp claim with value: local
2018-07-31 09:42:20.366 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-31 09:42:20.366 -06:00 [DBG] Adding auth_time claim with value: 1533051740
2018-07-31 09:42:20.366 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 09:42:20.366 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFMUHL6F4LR:00000003",
  "TimeStamp": "2018-07-31T15:42:20Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:42:20.369 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:42:20.369 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:42:20.369 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 09:42:20.370 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 09:42:20.370 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 09:42:20.370 -06:00 [DBG] Start authorize callback request
2018-07-31 09:42:20.370 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:42:20.370 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:42:20.370 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:42:20.370 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:42:20.370 -06:00 [DBG] No PKCE used.
2018-07-31 09:42:20.370 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:42:20.370 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcSJMsgTvHbfE5osNIpb5VKj0VGkLTq0BEyXkgq5yqq_que7j1j37YIL2SRNs06kl_DBPdEfx3A7vxO1xcxoc3jroopXFbNiIBU22iSZrZLubBAvgu0ipwB2yNHZEmt3ZJb28OjVxMNiWomPchpPguVNkqKflrYxE41Hq0_EnUuusYpobEJA-EKBWbfJZ09P7NTAWbc1Ll0nbWBI4_qfvOgkZRfHhPbgALudwjmnDYRP2BLEo7HvljnIQ4XXmgDPQ2lNWMzjgwRN145rRImugXdTfX7mbRQ87zS66j3v2N9P610o_WUshoyDGF0S2y4IHWSiP9MPRY2YXxSJTqCT-7ppKnimU4zH4YFPzKTEBqR_A6R8Nutpsnvxu89Y4acWf4",
  "Nonce": "636686485207427370.ZDQ0ZDI3NjktMDEzYi00YWE0LWI0MDgtOTJkOWY1NTAzYzg5Y2MxZWMyYWItNjkzOC00NTA3LWI5NzAtZDVhMWQwYzY5ODNh",
  "SessionId": "9be9315e6971f521ddfba441dd6d74a5",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686485207427370.ZDQ0ZDI3NjktMDEzYi00YWE0LWI0MDgtOTJkOWY1NTAzYzg5Y2MxZWMyYWItNjkzOC00NTA3LWI5NzAtZDVhMWQwYzY5ODNh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcSJMsgTvHbfE5osNIpb5VKj0VGkLTq0BEyXkgq5yqq_que7j1j37YIL2SRNs06kl_DBPdEfx3A7vxO1xcxoc3jroopXFbNiIBU22iSZrZLubBAvgu0ipwB2yNHZEmt3ZJb28OjVxMNiWomPchpPguVNkqKflrYxE41Hq0_EnUuusYpobEJA-EKBWbfJZ09P7NTAWbc1Ll0nbWBI4_qfvOgkZRfHhPbgALudwjmnDYRP2BLEo7HvljnIQ4XXmgDPQ2lNWMzjgwRN145rRImugXdTfX7mbRQ87zS66j3v2N9P610o_WUshoyDGF0S2y4IHWSiP9MPRY2YXxSJTqCT-7ppKnimU4zH4YFPzKTEBqR_A6R8Nutpsnvxu89Y4acWf4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:42:20.371 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 09:42:20.372 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 09:42:20.372 -06:00 [INF] Showing consent: User has not yet consented
2018-07-31 09:42:20.374 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:42:20.374 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:42:20.374 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:42:20.374 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:42:20.374 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:42:20.374 -06:00 [DBG] No PKCE used.
2018-07-31 09:42:20.374 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:42:20.374 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:42:40.416 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 09:42:40.417 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:42:40.417 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:42:40.417 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:42:40.417 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:42:40.417 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:42:40.417 -06:00 [DBG] No PKCE used.
2018-07-31 09:42:40.417 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:42:40.422 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:42:40.422 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:42:40.422 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 09:42:40.422 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 09:42:40.422 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 09:42:40.422 -06:00 [DBG] Start authorize callback request
2018-07-31 09:42:40.422 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:42:40.422 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:42:40.422 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:42:40.423 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:42:40.423 -06:00 [DBG] No PKCE used.
2018-07-31 09:42:40.423 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:42:40.423 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcSJMsgTvHbfE5osNIpb5VKj0VGkLTq0BEyXkgq5yqq_que7j1j37YIL2SRNs06kl_DBPdEfx3A7vxO1xcxoc3jroopXFbNiIBU22iSZrZLubBAvgu0ipwB2yNHZEmt3ZJb28OjVxMNiWomPchpPguVNkqKflrYxE41Hq0_EnUuusYpobEJA-EKBWbfJZ09P7NTAWbc1Ll0nbWBI4_qfvOgkZRfHhPbgALudwjmnDYRP2BLEo7HvljnIQ4XXmgDPQ2lNWMzjgwRN145rRImugXdTfX7mbRQ87zS66j3v2N9P610o_WUshoyDGF0S2y4IHWSiP9MPRY2YXxSJTqCT-7ppKnimU4zH4YFPzKTEBqR_A6R8Nutpsnvxu89Y4acWf4",
  "Nonce": "636686485207427370.ZDQ0ZDI3NjktMDEzYi00YWE0LWI0MDgtOTJkOWY1NTAzYzg5Y2MxZWMyYWItNjkzOC00NTA3LWI5NzAtZDVhMWQwYzY5ODNh",
  "SessionId": "9be9315e6971f521ddfba441dd6d74a5",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686485207427370.ZDQ0ZDI3NjktMDEzYi00YWE0LWI0MDgtOTJkOWY1NTAzYzg5Y2MxZWMyYWItNjkzOC00NTA3LWI5NzAtZDVhMWQwYzY5ODNh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcSJMsgTvHbfE5osNIpb5VKj0VGkLTq0BEyXkgq5yqq_que7j1j37YIL2SRNs06kl_DBPdEfx3A7vxO1xcxoc3jroopXFbNiIBU22iSZrZLubBAvgu0ipwB2yNHZEmt3ZJb28OjVxMNiWomPchpPguVNkqKflrYxE41Hq0_EnUuusYpobEJA-EKBWbfJZ09P7NTAWbc1Ll0nbWBI4_qfvOgkZRfHhPbgALudwjmnDYRP2BLEo7HvljnIQ4XXmgDPQ2lNWMzjgwRN145rRImugXdTfX7mbRQ87zS66j3v2N9P610o_WUshoyDGF0S2y4IHWSiP9MPRY2YXxSJTqCT-7ppKnimU4zH4YFPzKTEBqR_A6R8Nutpsnvxu89Y4acWf4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:42:40.424 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 09:42:40.424 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 09:42:40.424 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-31 09:42:40.424 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:42:40.424 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-31 09:42:40.429 -06:00 [DBG] Creating Implicit Flow response.
2018-07-31 09:42:40.429 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 09:42:40.429 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 09:42:40.442 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****cd-g"
    },
    {
      "TokenType": "code",
      "TokenValue": "****be40"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LR:00000007",
  "TimeStamp": "2018-07-31T15:42:40Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:42:40.442 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcSJMsgTvHbfE5osNIpb5VKj0VGkLTq0BEyXkgq5yqq_que7j1j37YIL2SRNs06kl_DBPdEfx3A7vxO1xcxoc3jroopXFbNiIBU22iSZrZLubBAvgu0ipwB2yNHZEmt3ZJb28OjVxMNiWomPchpPguVNkqKflrYxE41Hq0_EnUuusYpobEJA-EKBWbfJZ09P7NTAWbc1Ll0nbWBI4_qfvOgkZRfHhPbgALudwjmnDYRP2BLEo7HvljnIQ4XXmgDPQ2lNWMzjgwRN145rRImugXdTfX7mbRQ87zS66j3v2N9P610o_WUshoyDGF0S2y4IHWSiP9MPRY2YXxSJTqCT-7ppKnimU4zH4YFPzKTEBqR_A6R8Nutpsnvxu89Y4acWf4",
  "Scope": "openid profile business email"
}
2018-07-31 09:42:40.442 -06:00 [DBG] Augmenting SignInContext
2018-07-31 09:42:40.442 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 09:42:40.683 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-31 09:42:40.683 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-31 09:42:40.683 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-31 09:42:40.683 -06:00 [DBG] Start token request.
2018-07-31 09:42:40.683 -06:00 [DBG] Start client validation
2018-07-31 09:42:40.683 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-31 09:42:40.683 -06:00 [DBG] Start parsing for secret in post body
2018-07-31 09:42:40.683 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-31 09:42:40.683 -06:00 [DBG] Secret id found: ideaBox
2018-07-31 09:42:40.683 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:42:40.683 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-31 09:42:40.683 -06:00 [DBG] Client validation success
2018-07-31 09:42:40.684 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFMUHL6F4LQ:00000003",
  "TimeStamp": "2018-07-31T15:42:40Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:42:40.684 -06:00 [DBG] Start token request validation
2018-07-31 09:42:40.684 -06:00 [DBG] Start validation of authorization code token request
2018-07-31 09:42:40.692 -06:00 [DBG] Validation of authorization code token request success
2018-07-31 09:42:40.692 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "bdb2f619a586230e050538e2cb512dc744bc603153b28c39ac6e0898d9c7be40",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "bdb2f619a586230e050538e2cb512dc744bc603153b28c39ac6e0898d9c7be40",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-31 09:42:40.692 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:42:40.692 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-31 09:42:40.692 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:42:40.705 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:42:40.705 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 09:42:40.705 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 09:42:40.716 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****-G3A"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****3S8g"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LQ:00000003",
  "TimeStamp": "2018-07-31T15:42:40Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:42:40.717 -06:00 [DBG] Token request success.
2018-07-31 09:42:40.726 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-31 09:42:40.726 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-31 09:42:40.726 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-31 09:42:40.726 -06:00 [DBG] Start userinfo request
2018-07-31 09:42:40.726 -06:00 [DBG] Bearer token found in header
2018-07-31 09:42:40.729 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:42:40.729 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:42:40.731 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-31 09:42:40.731 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533051760,
    "exp": 1533055360,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1533051740,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-31 09:42:40.731 -06:00 [DBG] Creating userinfo response
2018-07-31 09:42:40.731 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:42:40.731 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:42:40.731 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-31 09:42:40.731 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:42:40.732 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-31 09:42:40.732 -06:00 [DBG] End userinfo request
2018-07-31 09:49:54.877 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-31 09:49:54.878 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-31 09:49:54.878 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-31 09:49:54.878 -06:00 [DBG] Start authorize request
2018-07-31 09:49:54.878 -06:00 [DBG] No user present in authorize request
2018-07-31 09:49:54.878 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:49:54.878 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:49:54.878 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:49:54.878 -06:00 [DBG] No PKCE used.
2018-07-31 09:49:54.878 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:49:54.878 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfyEaWba9lt5U0yFPC5qbYIT0WSoiHwWJTlVp8riKbrWV52DiwSjHXjXo2f0s-wTm6i69P_X0VIE1YNvjSq0aWGKqG-3QLjKuv0xTHXpSny9RsIr55sNFjUw-XoZBLQKajMhwALAIqSh3R7lv_JGRuGSehp5t_Nh3_Agv7g32uCODJSP3pqPaiNAYC76LmgsMHgFs8KTX-Pk9uys1NEm5_aJ1gfy7WkghK5jRFIo5gVBkPj_BdGNzlWQpHm2KQOxv-_IngXiTbhNFQjdRZ2vJeCE0Sb4hBtnG0d29BzxspKCooUk_x3SqMS_Kcpf5jcSzFp5a7Q638Ip0THsrd9MB65yh5XTc5v3XUEp0ZzweeOpx2dgp9W0gpPZ5X3i5x-LU0",
  "Nonce": "636686489909676740.NGM1ZmViMWQtY2UxMC00OWIzLTg3NGEtYzU1MTIyMTNiZDQwMzIwOTMzNzctOTZhYi00MmQ2LTg4M2YtY2QxZTRkZjRkZDc2",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686489909676740.NGM1ZmViMWQtY2UxMC00OWIzLTg3NGEtYzU1MTIyMTNiZDQwMzIwOTMzNzctOTZhYi00MmQ2LTg4M2YtY2QxZTRkZjRkZDc2",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfyEaWba9lt5U0yFPC5qbYIT0WSoiHwWJTlVp8riKbrWV52DiwSjHXjXo2f0s-wTm6i69P_X0VIE1YNvjSq0aWGKqG-3QLjKuv0xTHXpSny9RsIr55sNFjUw-XoZBLQKajMhwALAIqSh3R7lv_JGRuGSehp5t_Nh3_Agv7g32uCODJSP3pqPaiNAYC76LmgsMHgFs8KTX-Pk9uys1NEm5_aJ1gfy7WkghK5jRFIo5gVBkPj_BdGNzlWQpHm2KQOxv-_IngXiTbhNFQjdRZ2vJeCE0Sb4hBtnG0d29BzxspKCooUk_x3SqMS_Kcpf5jcSzFp5a7Q638Ip0THsrd9MB65yh5XTc5v3XUEp0ZzweeOpx2dgp9W0gpPZ5X3i5x-LU0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:49:54.878 -06:00 [INF] Showing login: User is not authenticated
2018-07-31 09:49:54.880 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:49:54.881 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:49:54.881 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:49:54.881 -06:00 [DBG] No PKCE used.
2018-07-31 09:49:54.881 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:49:54.881 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:50:14.803 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 09:50:14.818 -06:00 [DBG] Augmenting SignInContext
2018-07-31 09:50:14.818 -06:00 [DBG] Adding idp claim with value: local
2018-07-31 09:50:14.818 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-31 09:50:14.818 -06:00 [DBG] Adding auth_time claim with value: 1533052214
2018-07-31 09:50:14.818 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 09:50:14.819 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFMUHL6F4LS:00000003",
  "TimeStamp": "2018-07-31T15:50:14Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:50:14.821 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:50:14.821 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:50:14.821 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 09:50:14.821 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 09:50:14.821 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 09:50:14.822 -06:00 [DBG] Start authorize callback request
2018-07-31 09:50:14.822 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:50:14.822 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:50:14.822 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:50:14.822 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:50:14.822 -06:00 [DBG] No PKCE used.
2018-07-31 09:50:14.822 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:50:14.822 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfyEaWba9lt5U0yFPC5qbYIT0WSoiHwWJTlVp8riKbrWV52DiwSjHXjXo2f0s-wTm6i69P_X0VIE1YNvjSq0aWGKqG-3QLjKuv0xTHXpSny9RsIr55sNFjUw-XoZBLQKajMhwALAIqSh3R7lv_JGRuGSehp5t_Nh3_Agv7g32uCODJSP3pqPaiNAYC76LmgsMHgFs8KTX-Pk9uys1NEm5_aJ1gfy7WkghK5jRFIo5gVBkPj_BdGNzlWQpHm2KQOxv-_IngXiTbhNFQjdRZ2vJeCE0Sb4hBtnG0d29BzxspKCooUk_x3SqMS_Kcpf5jcSzFp5a7Q638Ip0THsrd9MB65yh5XTc5v3XUEp0ZzweeOpx2dgp9W0gpPZ5X3i5x-LU0",
  "Nonce": "636686489909676740.NGM1ZmViMWQtY2UxMC00OWIzLTg3NGEtYzU1MTIyMTNiZDQwMzIwOTMzNzctOTZhYi00MmQ2LTg4M2YtY2QxZTRkZjRkZDc2",
  "SessionId": "0d3d4011d395f39de294bef55e8b880a",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686489909676740.NGM1ZmViMWQtY2UxMC00OWIzLTg3NGEtYzU1MTIyMTNiZDQwMzIwOTMzNzctOTZhYi00MmQ2LTg4M2YtY2QxZTRkZjRkZDc2",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfyEaWba9lt5U0yFPC5qbYIT0WSoiHwWJTlVp8riKbrWV52DiwSjHXjXo2f0s-wTm6i69P_X0VIE1YNvjSq0aWGKqG-3QLjKuv0xTHXpSny9RsIr55sNFjUw-XoZBLQKajMhwALAIqSh3R7lv_JGRuGSehp5t_Nh3_Agv7g32uCODJSP3pqPaiNAYC76LmgsMHgFs8KTX-Pk9uys1NEm5_aJ1gfy7WkghK5jRFIo5gVBkPj_BdGNzlWQpHm2KQOxv-_IngXiTbhNFQjdRZ2vJeCE0Sb4hBtnG0d29BzxspKCooUk_x3SqMS_Kcpf5jcSzFp5a7Q638Ip0THsrd9MB65yh5XTc5v3XUEp0ZzweeOpx2dgp9W0gpPZ5X3i5x-LU0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:50:14.823 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 09:50:14.823 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 09:50:14.823 -06:00 [INF] Showing consent: User has not yet consented
2018-07-31 09:50:14.825 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:50:14.825 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:50:14.826 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:50:14.826 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:50:14.826 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:50:14.826 -06:00 [DBG] No PKCE used.
2018-07-31 09:50:14.826 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:50:14.826 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:50:17.939 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 09:50:17.940 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:50:17.940 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:50:17.940 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:50:17.940 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:50:17.940 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:50:17.940 -06:00 [DBG] No PKCE used.
2018-07-31 09:50:17.940 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:50:17.944 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:50:17.944 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 09:50:17.944 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 09:50:17.944 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 09:50:17.944 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 09:50:17.944 -06:00 [DBG] Start authorize callback request
2018-07-31 09:50:17.944 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:50:17.944 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 09:50:17.945 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:50:17.945 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 09:50:17.945 -06:00 [DBG] No PKCE used.
2018-07-31 09:50:17.945 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 09:50:17.945 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfyEaWba9lt5U0yFPC5qbYIT0WSoiHwWJTlVp8riKbrWV52DiwSjHXjXo2f0s-wTm6i69P_X0VIE1YNvjSq0aWGKqG-3QLjKuv0xTHXpSny9RsIr55sNFjUw-XoZBLQKajMhwALAIqSh3R7lv_JGRuGSehp5t_Nh3_Agv7g32uCODJSP3pqPaiNAYC76LmgsMHgFs8KTX-Pk9uys1NEm5_aJ1gfy7WkghK5jRFIo5gVBkPj_BdGNzlWQpHm2KQOxv-_IngXiTbhNFQjdRZ2vJeCE0Sb4hBtnG0d29BzxspKCooUk_x3SqMS_Kcpf5jcSzFp5a7Q638Ip0THsrd9MB65yh5XTc5v3XUEp0ZzweeOpx2dgp9W0gpPZ5X3i5x-LU0",
  "Nonce": "636686489909676740.NGM1ZmViMWQtY2UxMC00OWIzLTg3NGEtYzU1MTIyMTNiZDQwMzIwOTMzNzctOTZhYi00MmQ2LTg4M2YtY2QxZTRkZjRkZDc2",
  "SessionId": "0d3d4011d395f39de294bef55e8b880a",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686489909676740.NGM1ZmViMWQtY2UxMC00OWIzLTg3NGEtYzU1MTIyMTNiZDQwMzIwOTMzNzctOTZhYi00MmQ2LTg4M2YtY2QxZTRkZjRkZDc2",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfyEaWba9lt5U0yFPC5qbYIT0WSoiHwWJTlVp8riKbrWV52DiwSjHXjXo2f0s-wTm6i69P_X0VIE1YNvjSq0aWGKqG-3QLjKuv0xTHXpSny9RsIr55sNFjUw-XoZBLQKajMhwALAIqSh3R7lv_JGRuGSehp5t_Nh3_Agv7g32uCODJSP3pqPaiNAYC76LmgsMHgFs8KTX-Pk9uys1NEm5_aJ1gfy7WkghK5jRFIo5gVBkPj_BdGNzlWQpHm2KQOxv-_IngXiTbhNFQjdRZ2vJeCE0Sb4hBtnG0d29BzxspKCooUk_x3SqMS_Kcpf5jcSzFp5a7Q638Ip0THsrd9MB65yh5XTc5v3XUEp0ZzweeOpx2dgp9W0gpPZ5X3i5x-LU0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 09:50:17.946 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 09:50:17.946 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 09:50:17.946 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-31 09:50:17.946 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:50:17.946 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-31 09:50:17.951 -06:00 [DBG] Creating Implicit Flow response.
2018-07-31 09:50:17.951 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 09:50:17.951 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 09:50:17.963 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****-r5w"
    },
    {
      "TokenType": "code",
      "TokenValue": "****c5b1"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LS:00000007",
  "TimeStamp": "2018-07-31T15:50:17Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:50:17.963 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfyEaWba9lt5U0yFPC5qbYIT0WSoiHwWJTlVp8riKbrWV52DiwSjHXjXo2f0s-wTm6i69P_X0VIE1YNvjSq0aWGKqG-3QLjKuv0xTHXpSny9RsIr55sNFjUw-XoZBLQKajMhwALAIqSh3R7lv_JGRuGSehp5t_Nh3_Agv7g32uCODJSP3pqPaiNAYC76LmgsMHgFs8KTX-Pk9uys1NEm5_aJ1gfy7WkghK5jRFIo5gVBkPj_BdGNzlWQpHm2KQOxv-_IngXiTbhNFQjdRZ2vJeCE0Sb4hBtnG0d29BzxspKCooUk_x3SqMS_Kcpf5jcSzFp5a7Q638Ip0THsrd9MB65yh5XTc5v3XUEp0ZzweeOpx2dgp9W0gpPZ5X3i5x-LU0",
  "Scope": "openid profile business email"
}
2018-07-31 09:50:17.963 -06:00 [DBG] Augmenting SignInContext
2018-07-31 09:50:17.963 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 09:50:18.681 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-31 09:50:18.681 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-31 09:50:18.682 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-31 09:50:18.682 -06:00 [DBG] Start token request.
2018-07-31 09:50:18.682 -06:00 [DBG] Start client validation
2018-07-31 09:50:18.682 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-31 09:50:18.682 -06:00 [DBG] Start parsing for secret in post body
2018-07-31 09:50:18.682 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-31 09:50:18.682 -06:00 [DBG] Secret id found: ideaBox
2018-07-31 09:50:18.682 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:50:18.682 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-31 09:50:18.682 -06:00 [DBG] Client validation success
2018-07-31 09:50:18.682 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFMUHL6F4LT:00000001",
  "TimeStamp": "2018-07-31T15:50:18Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:50:18.682 -06:00 [DBG] Start token request validation
2018-07-31 09:50:18.682 -06:00 [DBG] Start validation of authorization code token request
2018-07-31 09:50:18.690 -06:00 [DBG] Validation of authorization code token request success
2018-07-31 09:50:18.690 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "39b962dbf949e6a1f8ecf6c163301e386abbcf8610660d268f823d5c6233c5b1",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "39b962dbf949e6a1f8ecf6c163301e386abbcf8610660d268f823d5c6233c5b1",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-31 09:50:18.690 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:50:18.690 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-31 09:50:18.690 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 09:50:18.704 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:50:18.704 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 09:50:18.704 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 09:50:18.716 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****SPqQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Gz8g"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LT:00000001",
  "TimeStamp": "2018-07-31T15:50:18Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 09:50:18.716 -06:00 [DBG] Token request success.
2018-07-31 09:50:18.722 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-31 09:50:18.723 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-31 09:50:18.723 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-31 09:50:18.723 -06:00 [DBG] Start userinfo request
2018-07-31 09:50:18.723 -06:00 [DBG] Bearer token found in header
2018-07-31 09:50:18.726 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:50:18.726 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 09:50:18.727 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-31 09:50:18.728 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533052218,
    "exp": 1533055818,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1533052214,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-31 09:50:18.728 -06:00 [DBG] Creating userinfo response
2018-07-31 09:50:18.728 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:50:18.728 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:50:18.728 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-31 09:50:18.728 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 09:50:18.729 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-31 09:50:18.729 -06:00 [DBG] End userinfo request
2018-07-31 10:01:48.828 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-31 10:01:48.828 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-31 10:01:48.828 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-31 10:01:48.828 -06:00 [DBG] Start discovery request
2018-07-31 10:01:48.955 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-31 10:01:48.955 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-31 10:01:48.955 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-31 10:01:48.956 -06:00 [DBG] Start key discovery request
2018-07-31 10:01:49.038 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-31 10:01:49.038 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-31 10:01:49.038 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-31 10:01:49.038 -06:00 [DBG] Start authorize request
2018-07-31 10:01:49.038 -06:00 [DBG] No user present in authorize request
2018-07-31 10:01:49.038 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:01:49.038 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:01:49.038 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:01:49.039 -06:00 [DBG] No PKCE used.
2018-07-31 10:01:49.039 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:01:49.039 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcLhieLQj628kwF30DeoOj8D72r0WISYRzDIBYPDHi3Dp7lrelWUUG_l4LR-ppP02xRVpiGKm2LW5RgeqLwGUQxQU1PYugKGZP2exmlNgWKCpmclTLZqL9rp3c442XYj0AgObCU_nkTaRMVheG-q4I0kuDmF4xPnIIqgPX4x9OHDQWIZTMzokZscQd-XLz-7QT0IHsfeSvK9AaDqrZOezEpIAlZIiNA1_3ZD4eVgvmfMRw2MY_nh3Vw2bqnQXATzKTNqVmyDrVYOi431N8XvMr0zl1Fw2_v2ds05M9cH6nrbiFvgpgxErprnKohNkG9a1Zv3xgPcmiGew0oAoxpLxq0HnyK-1_0vWeAJCylc7otPAYzxXGbRyTRm81boXm-L8U",
  "Nonce": "636686497090168200.Njc5ZTY1NzgtNGJjMy00OThiLWFjNjktZWFkYmQwOGNkYzA0N2FjNzlkNjktYzExMi00MGJiLWI2ZDAtYmUzMmJiYmM1NGEx",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686497090168200.Njc5ZTY1NzgtNGJjMy00OThiLWFjNjktZWFkYmQwOGNkYzA0N2FjNzlkNjktYzExMi00MGJiLWI2ZDAtYmUzMmJiYmM1NGEx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcLhieLQj628kwF30DeoOj8D72r0WISYRzDIBYPDHi3Dp7lrelWUUG_l4LR-ppP02xRVpiGKm2LW5RgeqLwGUQxQU1PYugKGZP2exmlNgWKCpmclTLZqL9rp3c442XYj0AgObCU_nkTaRMVheG-q4I0kuDmF4xPnIIqgPX4x9OHDQWIZTMzokZscQd-XLz-7QT0IHsfeSvK9AaDqrZOezEpIAlZIiNA1_3ZD4eVgvmfMRw2MY_nh3Vw2bqnQXATzKTNqVmyDrVYOi431N8XvMr0zl1Fw2_v2ds05M9cH6nrbiFvgpgxErprnKohNkG9a1Zv3xgPcmiGew0oAoxpLxq0HnyK-1_0vWeAJCylc7otPAYzxXGbRyTRm81boXm-L8U",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 10:01:49.039 -06:00 [INF] Showing login: User is not authenticated
2018-07-31 10:01:49.045 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:01:49.045 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:01:49.045 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:01:49.045 -06:00 [DBG] No PKCE used.
2018-07-31 10:01:49.045 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:01:49.045 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:01:59.289 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 10:01:59.304 -06:00 [DBG] Augmenting SignInContext
2018-07-31 10:01:59.304 -06:00 [DBG] Adding idp claim with value: local
2018-07-31 10:01:59.304 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-31 10:01:59.304 -06:00 [DBG] Adding auth_time claim with value: 1533052919
2018-07-31 10:01:59.304 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 10:01:59.305 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFMUHL6F4LV:00000003",
  "TimeStamp": "2018-07-31T16:01:59Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:01:59.307 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:01:59.307 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:01:59.307 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 10:01:59.307 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 10:01:59.307 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 10:01:59.307 -06:00 [DBG] Start authorize callback request
2018-07-31 10:01:59.307 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:01:59.307 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:01:59.307 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:01:59.307 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:01:59.308 -06:00 [DBG] No PKCE used.
2018-07-31 10:01:59.308 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:01:59.308 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcLhieLQj628kwF30DeoOj8D72r0WISYRzDIBYPDHi3Dp7lrelWUUG_l4LR-ppP02xRVpiGKm2LW5RgeqLwGUQxQU1PYugKGZP2exmlNgWKCpmclTLZqL9rp3c442XYj0AgObCU_nkTaRMVheG-q4I0kuDmF4xPnIIqgPX4x9OHDQWIZTMzokZscQd-XLz-7QT0IHsfeSvK9AaDqrZOezEpIAlZIiNA1_3ZD4eVgvmfMRw2MY_nh3Vw2bqnQXATzKTNqVmyDrVYOi431N8XvMr0zl1Fw2_v2ds05M9cH6nrbiFvgpgxErprnKohNkG9a1Zv3xgPcmiGew0oAoxpLxq0HnyK-1_0vWeAJCylc7otPAYzxXGbRyTRm81boXm-L8U",
  "Nonce": "636686497090168200.Njc5ZTY1NzgtNGJjMy00OThiLWFjNjktZWFkYmQwOGNkYzA0N2FjNzlkNjktYzExMi00MGJiLWI2ZDAtYmUzMmJiYmM1NGEx",
  "SessionId": "73e23a4bde30b1f3c2cf09fa829f58b8",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686497090168200.Njc5ZTY1NzgtNGJjMy00OThiLWFjNjktZWFkYmQwOGNkYzA0N2FjNzlkNjktYzExMi00MGJiLWI2ZDAtYmUzMmJiYmM1NGEx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcLhieLQj628kwF30DeoOj8D72r0WISYRzDIBYPDHi3Dp7lrelWUUG_l4LR-ppP02xRVpiGKm2LW5RgeqLwGUQxQU1PYugKGZP2exmlNgWKCpmclTLZqL9rp3c442XYj0AgObCU_nkTaRMVheG-q4I0kuDmF4xPnIIqgPX4x9OHDQWIZTMzokZscQd-XLz-7QT0IHsfeSvK9AaDqrZOezEpIAlZIiNA1_3ZD4eVgvmfMRw2MY_nh3Vw2bqnQXATzKTNqVmyDrVYOi431N8XvMr0zl1Fw2_v2ds05M9cH6nrbiFvgpgxErprnKohNkG9a1Zv3xgPcmiGew0oAoxpLxq0HnyK-1_0vWeAJCylc7otPAYzxXGbRyTRm81boXm-L8U",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 10:01:59.309 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 10:01:59.309 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 10:01:59.309 -06:00 [INF] Showing consent: User has not yet consented
2018-07-31 10:01:59.312 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:01:59.312 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:01:59.312 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:01:59.312 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:01:59.312 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:01:59.312 -06:00 [DBG] No PKCE used.
2018-07-31 10:01:59.312 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:01:59.312 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:02:01.627 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 10:02:01.628 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:02:01.628 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:02:01.628 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:02:01.628 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:02:01.628 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:02:01.628 -06:00 [DBG] No PKCE used.
2018-07-31 10:02:01.629 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:02:01.633 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:02:01.633 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:02:01.633 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 10:02:01.633 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 10:02:01.633 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 10:02:01.633 -06:00 [DBG] Start authorize callback request
2018-07-31 10:02:01.633 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:02:01.633 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:02:01.633 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:02:01.633 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:02:01.633 -06:00 [DBG] No PKCE used.
2018-07-31 10:02:01.633 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:02:01.633 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcLhieLQj628kwF30DeoOj8D72r0WISYRzDIBYPDHi3Dp7lrelWUUG_l4LR-ppP02xRVpiGKm2LW5RgeqLwGUQxQU1PYugKGZP2exmlNgWKCpmclTLZqL9rp3c442XYj0AgObCU_nkTaRMVheG-q4I0kuDmF4xPnIIqgPX4x9OHDQWIZTMzokZscQd-XLz-7QT0IHsfeSvK9AaDqrZOezEpIAlZIiNA1_3ZD4eVgvmfMRw2MY_nh3Vw2bqnQXATzKTNqVmyDrVYOi431N8XvMr0zl1Fw2_v2ds05M9cH6nrbiFvgpgxErprnKohNkG9a1Zv3xgPcmiGew0oAoxpLxq0HnyK-1_0vWeAJCylc7otPAYzxXGbRyTRm81boXm-L8U",
  "Nonce": "636686497090168200.Njc5ZTY1NzgtNGJjMy00OThiLWFjNjktZWFkYmQwOGNkYzA0N2FjNzlkNjktYzExMi00MGJiLWI2ZDAtYmUzMmJiYmM1NGEx",
  "SessionId": "73e23a4bde30b1f3c2cf09fa829f58b8",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686497090168200.Njc5ZTY1NzgtNGJjMy00OThiLWFjNjktZWFkYmQwOGNkYzA0N2FjNzlkNjktYzExMi00MGJiLWI2ZDAtYmUzMmJiYmM1NGEx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcLhieLQj628kwF30DeoOj8D72r0WISYRzDIBYPDHi3Dp7lrelWUUG_l4LR-ppP02xRVpiGKm2LW5RgeqLwGUQxQU1PYugKGZP2exmlNgWKCpmclTLZqL9rp3c442XYj0AgObCU_nkTaRMVheG-q4I0kuDmF4xPnIIqgPX4x9OHDQWIZTMzokZscQd-XLz-7QT0IHsfeSvK9AaDqrZOezEpIAlZIiNA1_3ZD4eVgvmfMRw2MY_nh3Vw2bqnQXATzKTNqVmyDrVYOi431N8XvMr0zl1Fw2_v2ds05M9cH6nrbiFvgpgxErprnKohNkG9a1Zv3xgPcmiGew0oAoxpLxq0HnyK-1_0vWeAJCylc7otPAYzxXGbRyTRm81boXm-L8U",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 10:02:01.635 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 10:02:01.635 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 10:02:01.635 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-31 10:02:01.635 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:02:01.635 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-31 10:02:01.640 -06:00 [DBG] Creating Implicit Flow response.
2018-07-31 10:02:01.640 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 10:02:01.640 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 10:02:01.651 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ZWCQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****b8e6"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LV:00000007",
  "TimeStamp": "2018-07-31T16:02:01Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:02:01.651 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcLhieLQj628kwF30DeoOj8D72r0WISYRzDIBYPDHi3Dp7lrelWUUG_l4LR-ppP02xRVpiGKm2LW5RgeqLwGUQxQU1PYugKGZP2exmlNgWKCpmclTLZqL9rp3c442XYj0AgObCU_nkTaRMVheG-q4I0kuDmF4xPnIIqgPX4x9OHDQWIZTMzokZscQd-XLz-7QT0IHsfeSvK9AaDqrZOezEpIAlZIiNA1_3ZD4eVgvmfMRw2MY_nh3Vw2bqnQXATzKTNqVmyDrVYOi431N8XvMr0zl1Fw2_v2ds05M9cH6nrbiFvgpgxErprnKohNkG9a1Zv3xgPcmiGew0oAoxpLxq0HnyK-1_0vWeAJCylc7otPAYzxXGbRyTRm81boXm-L8U",
  "Scope": "openid profile business email"
}
2018-07-31 10:02:01.651 -06:00 [DBG] Augmenting SignInContext
2018-07-31 10:02:01.652 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 10:02:01.805 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-31 10:02:01.805 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-31 10:02:01.805 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-31 10:02:01.805 -06:00 [DBG] Start token request.
2018-07-31 10:02:01.805 -06:00 [DBG] Start client validation
2018-07-31 10:02:01.805 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-31 10:02:01.805 -06:00 [DBG] Start parsing for secret in post body
2018-07-31 10:02:01.805 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-31 10:02:01.805 -06:00 [DBG] Secret id found: ideaBox
2018-07-31 10:02:01.805 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:02:01.805 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-31 10:02:01.805 -06:00 [DBG] Client validation success
2018-07-31 10:02:01.805 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFMUHL6F4LU:00000003",
  "TimeStamp": "2018-07-31T16:02:01Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:02:01.805 -06:00 [DBG] Start token request validation
2018-07-31 10:02:01.805 -06:00 [DBG] Start validation of authorization code token request
2018-07-31 10:02:01.813 -06:00 [DBG] Validation of authorization code token request success
2018-07-31 10:02:01.813 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "c573e45d37d3bf50b1e518f34686644e99d7be65242e3dd54a23ffe9c5c0b8e6",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "c573e45d37d3bf50b1e518f34686644e99d7be65242e3dd54a23ffe9c5c0b8e6",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-31 10:02:01.813 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:02:01.813 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-31 10:02:01.813 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:02:01.826 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:02:01.826 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 10:02:01.826 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 10:02:01.838 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Hntw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****xQTQ"
    }
  ],
  "ActivityId": "0HLFMUHL6F4LU:00000003",
  "TimeStamp": "2018-07-31T16:02:01Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:02:01.838 -06:00 [DBG] Token request success.
2018-07-31 10:02:01.846 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-31 10:02:01.846 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-31 10:02:01.847 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-31 10:02:01.847 -06:00 [DBG] Start userinfo request
2018-07-31 10:02:01.847 -06:00 [DBG] Bearer token found in header
2018-07-31 10:02:01.849 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:02:01.849 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:02:01.850 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-31 10:02:01.850 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533052921,
    "exp": 1533056521,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1533052919,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-31 10:02:01.850 -06:00 [DBG] Creating userinfo response
2018-07-31 10:02:01.850 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 10:02:01.850 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 10:02:01.850 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-31 10:02:01.850 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 10:02:01.851 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-31 10:02:01.851 -06:00 [DBG] End userinfo request
2018-07-31 10:04:26.894 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-31 10:04:26.895 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-31 10:04:26.895 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-31 10:04:26.895 -06:00 [DBG] Start discovery request
2018-07-31 10:04:27.012 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-31 10:04:27.012 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-31 10:04:27.012 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-31 10:04:27.012 -06:00 [DBG] Start key discovery request
2018-07-31 10:04:27.088 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-31 10:04:27.088 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-31 10:04:27.088 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-31 10:04:27.088 -06:00 [DBG] Start authorize request
2018-07-31 10:04:27.088 -06:00 [DBG] No user present in authorize request
2018-07-31 10:04:27.088 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:04:27.088 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:04:27.088 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:04:27.088 -06:00 [DBG] No PKCE used.
2018-07-31 10:04:27.088 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:04:27.088 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPXQyv04Hq_Axw-JQFoxekwA5LOQeGQTr-QLaT46PaKKVFfKDhYoQ2P54i6cCtn3pDhF3lh1QalUrJfwHBwcjxqzzcl4Bl12fjbFFAHKYjEntDMI-vVJMYxq2NVvmssiysD07KQGf-6fbvSbakk4gJKNPXRqW8ydfvK0ZCUpqBpSMoPags-gUDFHBolglAg1GegS59OH7YTd7MLY2brmx8Rpr1gY9Cnj_c5BTOyEzcAbTsnzc48Zug1c8ScYvOZ8K5KfJHeFI6GDTEHPTXzXgdYbas61cZLbaRQpKGV7o3YK8ef8QDXLEXwR4-tRQPvbjsyrNf7cR-P3xNv3j6VNydEg5-eMt-Jsv6zUY8is7mLPzeu2CrJrlZ1ZBxwYhe4xA",
  "Nonce": "636686498670682690.MGRkNTI0MmMtYjVjMS00NDlmLTlkMmUtODExZmE5ZDZhMjI2ODQ4Yjc2NDgtY2FhZS00MzY0LTlkYmYtYWY3NTE1OGE0Y2Vm",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686498670682690.MGRkNTI0MmMtYjVjMS00NDlmLTlkMmUtODExZmE5ZDZhMjI2ODQ4Yjc2NDgtY2FhZS00MzY0LTlkYmYtYWY3NTE1OGE0Y2Vm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPXQyv04Hq_Axw-JQFoxekwA5LOQeGQTr-QLaT46PaKKVFfKDhYoQ2P54i6cCtn3pDhF3lh1QalUrJfwHBwcjxqzzcl4Bl12fjbFFAHKYjEntDMI-vVJMYxq2NVvmssiysD07KQGf-6fbvSbakk4gJKNPXRqW8ydfvK0ZCUpqBpSMoPags-gUDFHBolglAg1GegS59OH7YTd7MLY2brmx8Rpr1gY9Cnj_c5BTOyEzcAbTsnzc48Zug1c8ScYvOZ8K5KfJHeFI6GDTEHPTXzXgdYbas61cZLbaRQpKGV7o3YK8ef8QDXLEXwR4-tRQPvbjsyrNf7cR-P3xNv3j6VNydEg5-eMt-Jsv6zUY8is7mLPzeu2CrJrlZ1ZBxwYhe4xA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 10:04:27.088 -06:00 [INF] Showing login: User is not authenticated
2018-07-31 10:04:27.090 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:04:27.090 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:04:27.090 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:04:27.090 -06:00 [DBG] No PKCE used.
2018-07-31 10:04:27.090 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:04:27.091 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:04:38.974 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 10:04:38.989 -06:00 [DBG] Augmenting SignInContext
2018-07-31 10:04:38.989 -06:00 [DBG] Adding idp claim with value: local
2018-07-31 10:04:38.989 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-31 10:04:38.989 -06:00 [DBG] Adding auth_time claim with value: 1533053078
2018-07-31 10:04:38.989 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 10:04:38.989 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFMUHL6F4M1:00000003",
  "TimeStamp": "2018-07-31T16:04:38Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:04:38.991 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:04:38.991 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:04:38.991 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 10:04:38.991 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 10:04:38.991 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 10:04:38.991 -06:00 [DBG] Start authorize callback request
2018-07-31 10:04:38.991 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:04:38.992 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:04:38.992 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:04:38.992 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:04:38.992 -06:00 [DBG] No PKCE used.
2018-07-31 10:04:38.992 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:04:38.992 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPXQyv04Hq_Axw-JQFoxekwA5LOQeGQTr-QLaT46PaKKVFfKDhYoQ2P54i6cCtn3pDhF3lh1QalUrJfwHBwcjxqzzcl4Bl12fjbFFAHKYjEntDMI-vVJMYxq2NVvmssiysD07KQGf-6fbvSbakk4gJKNPXRqW8ydfvK0ZCUpqBpSMoPags-gUDFHBolglAg1GegS59OH7YTd7MLY2brmx8Rpr1gY9Cnj_c5BTOyEzcAbTsnzc48Zug1c8ScYvOZ8K5KfJHeFI6GDTEHPTXzXgdYbas61cZLbaRQpKGV7o3YK8ef8QDXLEXwR4-tRQPvbjsyrNf7cR-P3xNv3j6VNydEg5-eMt-Jsv6zUY8is7mLPzeu2CrJrlZ1ZBxwYhe4xA",
  "Nonce": "636686498670682690.MGRkNTI0MmMtYjVjMS00NDlmLTlkMmUtODExZmE5ZDZhMjI2ODQ4Yjc2NDgtY2FhZS00MzY0LTlkYmYtYWY3NTE1OGE0Y2Vm",
  "SessionId": "4f3b76764a34cee356119e8fec98555d",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686498670682690.MGRkNTI0MmMtYjVjMS00NDlmLTlkMmUtODExZmE5ZDZhMjI2ODQ4Yjc2NDgtY2FhZS00MzY0LTlkYmYtYWY3NTE1OGE0Y2Vm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPXQyv04Hq_Axw-JQFoxekwA5LOQeGQTr-QLaT46PaKKVFfKDhYoQ2P54i6cCtn3pDhF3lh1QalUrJfwHBwcjxqzzcl4Bl12fjbFFAHKYjEntDMI-vVJMYxq2NVvmssiysD07KQGf-6fbvSbakk4gJKNPXRqW8ydfvK0ZCUpqBpSMoPags-gUDFHBolglAg1GegS59OH7YTd7MLY2brmx8Rpr1gY9Cnj_c5BTOyEzcAbTsnzc48Zug1c8ScYvOZ8K5KfJHeFI6GDTEHPTXzXgdYbas61cZLbaRQpKGV7o3YK8ef8QDXLEXwR4-tRQPvbjsyrNf7cR-P3xNv3j6VNydEg5-eMt-Jsv6zUY8is7mLPzeu2CrJrlZ1ZBxwYhe4xA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 10:04:38.993 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 10:04:38.993 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 10:04:38.993 -06:00 [INF] Showing consent: User has not yet consented
2018-07-31 10:04:38.995 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:04:38.995 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:04:38.995 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:04:38.995 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:04:38.996 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:04:38.996 -06:00 [DBG] No PKCE used.
2018-07-31 10:04:38.996 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:04:38.996 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:04:40.986 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 10:04:40.986 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:04:40.986 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:04:40.986 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:04:40.986 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:04:40.986 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:04:40.986 -06:00 [DBG] No PKCE used.
2018-07-31 10:04:40.987 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:04:40.990 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:04:40.990 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:04:40.990 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 10:04:40.990 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 10:04:40.990 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 10:04:40.990 -06:00 [DBG] Start authorize callback request
2018-07-31 10:04:40.990 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:04:40.990 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:04:40.990 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:04:40.990 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:04:40.990 -06:00 [DBG] No PKCE used.
2018-07-31 10:04:40.990 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:04:40.991 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPXQyv04Hq_Axw-JQFoxekwA5LOQeGQTr-QLaT46PaKKVFfKDhYoQ2P54i6cCtn3pDhF3lh1QalUrJfwHBwcjxqzzcl4Bl12fjbFFAHKYjEntDMI-vVJMYxq2NVvmssiysD07KQGf-6fbvSbakk4gJKNPXRqW8ydfvK0ZCUpqBpSMoPags-gUDFHBolglAg1GegS59OH7YTd7MLY2brmx8Rpr1gY9Cnj_c5BTOyEzcAbTsnzc48Zug1c8ScYvOZ8K5KfJHeFI6GDTEHPTXzXgdYbas61cZLbaRQpKGV7o3YK8ef8QDXLEXwR4-tRQPvbjsyrNf7cR-P3xNv3j6VNydEg5-eMt-Jsv6zUY8is7mLPzeu2CrJrlZ1ZBxwYhe4xA",
  "Nonce": "636686498670682690.MGRkNTI0MmMtYjVjMS00NDlmLTlkMmUtODExZmE5ZDZhMjI2ODQ4Yjc2NDgtY2FhZS00MzY0LTlkYmYtYWY3NTE1OGE0Y2Vm",
  "SessionId": "4f3b76764a34cee356119e8fec98555d",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686498670682690.MGRkNTI0MmMtYjVjMS00NDlmLTlkMmUtODExZmE5ZDZhMjI2ODQ4Yjc2NDgtY2FhZS00MzY0LTlkYmYtYWY3NTE1OGE0Y2Vm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPXQyv04Hq_Axw-JQFoxekwA5LOQeGQTr-QLaT46PaKKVFfKDhYoQ2P54i6cCtn3pDhF3lh1QalUrJfwHBwcjxqzzcl4Bl12fjbFFAHKYjEntDMI-vVJMYxq2NVvmssiysD07KQGf-6fbvSbakk4gJKNPXRqW8ydfvK0ZCUpqBpSMoPags-gUDFHBolglAg1GegS59OH7YTd7MLY2brmx8Rpr1gY9Cnj_c5BTOyEzcAbTsnzc48Zug1c8ScYvOZ8K5KfJHeFI6GDTEHPTXzXgdYbas61cZLbaRQpKGV7o3YK8ef8QDXLEXwR4-tRQPvbjsyrNf7cR-P3xNv3j6VNydEg5-eMt-Jsv6zUY8is7mLPzeu2CrJrlZ1ZBxwYhe4xA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 10:04:40.992 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 10:04:40.992 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 10:04:40.992 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-31 10:04:40.992 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:04:40.992 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-31 10:04:40.996 -06:00 [DBG] Creating Implicit Flow response.
2018-07-31 10:04:40.996 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 10:04:40.997 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 10:04:41.008 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****0phw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****817f"
    }
  ],
  "ActivityId": "0HLFMUHL6F4M1:00000007",
  "TimeStamp": "2018-07-31T16:04:41Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:04:41.008 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdPXQyv04Hq_Axw-JQFoxekwA5LOQeGQTr-QLaT46PaKKVFfKDhYoQ2P54i6cCtn3pDhF3lh1QalUrJfwHBwcjxqzzcl4Bl12fjbFFAHKYjEntDMI-vVJMYxq2NVvmssiysD07KQGf-6fbvSbakk4gJKNPXRqW8ydfvK0ZCUpqBpSMoPags-gUDFHBolglAg1GegS59OH7YTd7MLY2brmx8Rpr1gY9Cnj_c5BTOyEzcAbTsnzc48Zug1c8ScYvOZ8K5KfJHeFI6GDTEHPTXzXgdYbas61cZLbaRQpKGV7o3YK8ef8QDXLEXwR4-tRQPvbjsyrNf7cR-P3xNv3j6VNydEg5-eMt-Jsv6zUY8is7mLPzeu2CrJrlZ1ZBxwYhe4xA",
  "Scope": "openid profile business email"
}
2018-07-31 10:04:41.008 -06:00 [DBG] Augmenting SignInContext
2018-07-31 10:04:41.009 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 10:04:41.178 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-31 10:04:41.178 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-31 10:04:41.178 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-31 10:04:41.178 -06:00 [DBG] Start token request.
2018-07-31 10:04:41.178 -06:00 [DBG] Start client validation
2018-07-31 10:04:41.178 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-31 10:04:41.178 -06:00 [DBG] Start parsing for secret in post body
2018-07-31 10:04:41.178 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-31 10:04:41.178 -06:00 [DBG] Secret id found: ideaBox
2018-07-31 10:04:41.178 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:04:41.178 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-31 10:04:41.178 -06:00 [DBG] Client validation success
2018-07-31 10:04:41.178 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFMUHL6F4M0:00000003",
  "TimeStamp": "2018-07-31T16:04:41Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:04:41.178 -06:00 [DBG] Start token request validation
2018-07-31 10:04:41.178 -06:00 [DBG] Start validation of authorization code token request
2018-07-31 10:04:41.186 -06:00 [DBG] Validation of authorization code token request success
2018-07-31 10:04:41.186 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "8c4ebda1bb9483f74b33f345b4449604f28f7790d05a913cee323d17b156817f",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "8c4ebda1bb9483f74b33f345b4449604f28f7790d05a913cee323d17b156817f",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-31 10:04:41.186 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:04:41.186 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-31 10:04:41.187 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:04:41.200 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:04:41.200 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 10:04:41.200 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 10:04:41.212 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****xfqQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****zGPQ"
    }
  ],
  "ActivityId": "0HLFMUHL6F4M0:00000003",
  "TimeStamp": "2018-07-31T16:04:41Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:04:41.212 -06:00 [DBG] Token request success.
2018-07-31 10:04:41.220 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-31 10:04:41.221 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-31 10:04:41.221 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-31 10:04:41.221 -06:00 [DBG] Start userinfo request
2018-07-31 10:04:41.221 -06:00 [DBG] Bearer token found in header
2018-07-31 10:04:41.223 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:04:41.223 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:04:41.224 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-31 10:04:41.224 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533053081,
    "exp": 1533056681,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1533053078,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-31 10:04:41.224 -06:00 [DBG] Creating userinfo response
2018-07-31 10:04:41.224 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 10:04:41.224 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 10:04:41.224 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-31 10:04:41.224 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 10:04:41.225 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-31 10:04:41.225 -06:00 [DBG] End userinfo request
2018-07-31 10:11:21.696 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-31 10:11:21.697 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-31 10:11:21.697 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-31 10:11:21.697 -06:00 [DBG] Start discovery request
2018-07-31 10:11:21.824 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-31 10:11:21.824 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-31 10:11:21.824 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-31 10:11:21.824 -06:00 [DBG] Start key discovery request
2018-07-31 10:11:21.909 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-31 10:11:21.909 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-31 10:11:21.909 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-31 10:11:21.909 -06:00 [DBG] Start authorize request
2018-07-31 10:11:21.909 -06:00 [DBG] No user present in authorize request
2018-07-31 10:11:21.909 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:11:21.910 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:11:21.910 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:11:21.910 -06:00 [DBG] No PKCE used.
2018-07-31 10:11:21.910 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:11:21.910 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdDY56uYsWj_c7pV4LKlj0T1t273C3P7oZcUBBgBU8ysOk3hCGlvGrtuNKFWnydmM_cruwcSduW1xHqClzdWsRRuKsv8iB7BohYVepxEY91UX3-g9CDitxZjSJP8ccKiuPdg89H3vvuwpBgsPLAuqGq3VNv4ZLUHpR659Kw47SGI--IIC8WeOjxAlyVmuT5Q-6FaJZeu1WdVi2BrVK_FeLar1mNEO671FXacalOWr4NrbBeQ8YoCPv9l4CcblY5tNY1QNDJwzaMrVRUJJsErqqDTPdlvOKTNIjca3PIk-mE6IADJUp6U798Z3To9Wy-NXKXrJbRhpVArONmtqNhJCRyytgJD3U_hhtvlq4u6rEtUdjGnX9YUEMAzhQhc3cUBGs",
  "Nonce": "636686502818898200.OTViZjE3NWQtMmNmNC00NDJlLWI3ZjItMzZiMTg1NjMwYzlkMWM5MTFjMTAtNWE4YS00ZjgzLTkxZmQtOGRlN2U5ZTA5NTEz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686502818898200.OTViZjE3NWQtMmNmNC00NDJlLWI3ZjItMzZiMTg1NjMwYzlkMWM5MTFjMTAtNWE4YS00ZjgzLTkxZmQtOGRlN2U5ZTA5NTEz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdDY56uYsWj_c7pV4LKlj0T1t273C3P7oZcUBBgBU8ysOk3hCGlvGrtuNKFWnydmM_cruwcSduW1xHqClzdWsRRuKsv8iB7BohYVepxEY91UX3-g9CDitxZjSJP8ccKiuPdg89H3vvuwpBgsPLAuqGq3VNv4ZLUHpR659Kw47SGI--IIC8WeOjxAlyVmuT5Q-6FaJZeu1WdVi2BrVK_FeLar1mNEO671FXacalOWr4NrbBeQ8YoCPv9l4CcblY5tNY1QNDJwzaMrVRUJJsErqqDTPdlvOKTNIjca3PIk-mE6IADJUp6U798Z3To9Wy-NXKXrJbRhpVArONmtqNhJCRyytgJD3U_hhtvlq4u6rEtUdjGnX9YUEMAzhQhc3cUBGs",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 10:11:21.910 -06:00 [INF] Showing login: User is not authenticated
2018-07-31 10:11:21.912 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:11:21.912 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:11:21.912 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:11:21.912 -06:00 [DBG] No PKCE used.
2018-07-31 10:11:21.912 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:11:21.912 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:11:32.374 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 10:11:32.389 -06:00 [DBG] Augmenting SignInContext
2018-07-31 10:11:32.390 -06:00 [DBG] Adding idp claim with value: local
2018-07-31 10:11:32.390 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-31 10:11:32.390 -06:00 [DBG] Adding auth_time claim with value: 1533053492
2018-07-31 10:11:32.390 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 10:11:32.390 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFMUHL6F4M3:00000003",
  "TimeStamp": "2018-07-31T16:11:32Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:11:32.392 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:11:32.392 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:11:32.392 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 10:11:32.392 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 10:11:32.392 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 10:11:32.392 -06:00 [DBG] Start authorize callback request
2018-07-31 10:11:32.393 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:11:32.393 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:11:32.393 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:11:32.393 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:11:32.393 -06:00 [DBG] No PKCE used.
2018-07-31 10:11:32.393 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:11:32.393 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdDY56uYsWj_c7pV4LKlj0T1t273C3P7oZcUBBgBU8ysOk3hCGlvGrtuNKFWnydmM_cruwcSduW1xHqClzdWsRRuKsv8iB7BohYVepxEY91UX3-g9CDitxZjSJP8ccKiuPdg89H3vvuwpBgsPLAuqGq3VNv4ZLUHpR659Kw47SGI--IIC8WeOjxAlyVmuT5Q-6FaJZeu1WdVi2BrVK_FeLar1mNEO671FXacalOWr4NrbBeQ8YoCPv9l4CcblY5tNY1QNDJwzaMrVRUJJsErqqDTPdlvOKTNIjca3PIk-mE6IADJUp6U798Z3To9Wy-NXKXrJbRhpVArONmtqNhJCRyytgJD3U_hhtvlq4u6rEtUdjGnX9YUEMAzhQhc3cUBGs",
  "Nonce": "636686502818898200.OTViZjE3NWQtMmNmNC00NDJlLWI3ZjItMzZiMTg1NjMwYzlkMWM5MTFjMTAtNWE4YS00ZjgzLTkxZmQtOGRlN2U5ZTA5NTEz",
  "SessionId": "24186932b2a752a0de4865490ce5ac8b",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686502818898200.OTViZjE3NWQtMmNmNC00NDJlLWI3ZjItMzZiMTg1NjMwYzlkMWM5MTFjMTAtNWE4YS00ZjgzLTkxZmQtOGRlN2U5ZTA5NTEz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdDY56uYsWj_c7pV4LKlj0T1t273C3P7oZcUBBgBU8ysOk3hCGlvGrtuNKFWnydmM_cruwcSduW1xHqClzdWsRRuKsv8iB7BohYVepxEY91UX3-g9CDitxZjSJP8ccKiuPdg89H3vvuwpBgsPLAuqGq3VNv4ZLUHpR659Kw47SGI--IIC8WeOjxAlyVmuT5Q-6FaJZeu1WdVi2BrVK_FeLar1mNEO671FXacalOWr4NrbBeQ8YoCPv9l4CcblY5tNY1QNDJwzaMrVRUJJsErqqDTPdlvOKTNIjca3PIk-mE6IADJUp6U798Z3To9Wy-NXKXrJbRhpVArONmtqNhJCRyytgJD3U_hhtvlq4u6rEtUdjGnX9YUEMAzhQhc3cUBGs",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 10:11:32.394 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 10:11:32.394 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 10:11:32.394 -06:00 [INF] Showing consent: User has not yet consented
2018-07-31 10:11:32.396 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:11:32.396 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:11:32.396 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:11:32.396 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:11:32.397 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:11:32.397 -06:00 [DBG] No PKCE used.
2018-07-31 10:11:32.397 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:11:32.397 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:11:36.208 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 10:11:36.208 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:11:36.208 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:11:36.209 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:11:36.209 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:11:36.209 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:11:36.209 -06:00 [DBG] No PKCE used.
2018-07-31 10:11:36.209 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:11:36.212 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:11:36.212 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:11:36.212 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 10:11:36.212 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 10:11:36.212 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 10:11:36.212 -06:00 [DBG] Start authorize callback request
2018-07-31 10:11:36.213 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:11:36.213 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:11:36.213 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:11:36.213 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:11:36.213 -06:00 [DBG] No PKCE used.
2018-07-31 10:11:36.213 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:11:36.213 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdDY56uYsWj_c7pV4LKlj0T1t273C3P7oZcUBBgBU8ysOk3hCGlvGrtuNKFWnydmM_cruwcSduW1xHqClzdWsRRuKsv8iB7BohYVepxEY91UX3-g9CDitxZjSJP8ccKiuPdg89H3vvuwpBgsPLAuqGq3VNv4ZLUHpR659Kw47SGI--IIC8WeOjxAlyVmuT5Q-6FaJZeu1WdVi2BrVK_FeLar1mNEO671FXacalOWr4NrbBeQ8YoCPv9l4CcblY5tNY1QNDJwzaMrVRUJJsErqqDTPdlvOKTNIjca3PIk-mE6IADJUp6U798Z3To9Wy-NXKXrJbRhpVArONmtqNhJCRyytgJD3U_hhtvlq4u6rEtUdjGnX9YUEMAzhQhc3cUBGs",
  "Nonce": "636686502818898200.OTViZjE3NWQtMmNmNC00NDJlLWI3ZjItMzZiMTg1NjMwYzlkMWM5MTFjMTAtNWE4YS00ZjgzLTkxZmQtOGRlN2U5ZTA5NTEz",
  "SessionId": "24186932b2a752a0de4865490ce5ac8b",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686502818898200.OTViZjE3NWQtMmNmNC00NDJlLWI3ZjItMzZiMTg1NjMwYzlkMWM5MTFjMTAtNWE4YS00ZjgzLTkxZmQtOGRlN2U5ZTA5NTEz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdDY56uYsWj_c7pV4LKlj0T1t273C3P7oZcUBBgBU8ysOk3hCGlvGrtuNKFWnydmM_cruwcSduW1xHqClzdWsRRuKsv8iB7BohYVepxEY91UX3-g9CDitxZjSJP8ccKiuPdg89H3vvuwpBgsPLAuqGq3VNv4ZLUHpR659Kw47SGI--IIC8WeOjxAlyVmuT5Q-6FaJZeu1WdVi2BrVK_FeLar1mNEO671FXacalOWr4NrbBeQ8YoCPv9l4CcblY5tNY1QNDJwzaMrVRUJJsErqqDTPdlvOKTNIjca3PIk-mE6IADJUp6U798Z3To9Wy-NXKXrJbRhpVArONmtqNhJCRyytgJD3U_hhtvlq4u6rEtUdjGnX9YUEMAzhQhc3cUBGs",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 10:11:36.214 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 10:11:36.214 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 10:11:36.214 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-31 10:11:36.214 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:11:36.214 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-31 10:11:36.219 -06:00 [DBG] Creating Implicit Flow response.
2018-07-31 10:11:36.219 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 10:11:36.219 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 10:11:36.230 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****yrtA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****bab9"
    }
  ],
  "ActivityId": "0HLFMUHL6F4M3:00000007",
  "TimeStamp": "2018-07-31T16:11:36Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:11:36.231 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdDY56uYsWj_c7pV4LKlj0T1t273C3P7oZcUBBgBU8ysOk3hCGlvGrtuNKFWnydmM_cruwcSduW1xHqClzdWsRRuKsv8iB7BohYVepxEY91UX3-g9CDitxZjSJP8ccKiuPdg89H3vvuwpBgsPLAuqGq3VNv4ZLUHpR659Kw47SGI--IIC8WeOjxAlyVmuT5Q-6FaJZeu1WdVi2BrVK_FeLar1mNEO671FXacalOWr4NrbBeQ8YoCPv9l4CcblY5tNY1QNDJwzaMrVRUJJsErqqDTPdlvOKTNIjca3PIk-mE6IADJUp6U798Z3To9Wy-NXKXrJbRhpVArONmtqNhJCRyytgJD3U_hhtvlq4u6rEtUdjGnX9YUEMAzhQhc3cUBGs",
  "Scope": "openid profile business email"
}
2018-07-31 10:11:36.231 -06:00 [DBG] Augmenting SignInContext
2018-07-31 10:11:36.231 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 10:11:36.409 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-31 10:11:36.409 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-31 10:11:36.409 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-31 10:11:36.409 -06:00 [DBG] Start token request.
2018-07-31 10:11:36.409 -06:00 [DBG] Start client validation
2018-07-31 10:11:36.409 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-31 10:11:36.409 -06:00 [DBG] Start parsing for secret in post body
2018-07-31 10:11:36.410 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-31 10:11:36.410 -06:00 [DBG] Secret id found: ideaBox
2018-07-31 10:11:36.410 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:11:36.410 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-31 10:11:36.410 -06:00 [DBG] Client validation success
2018-07-31 10:11:36.410 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFMUHL6F4M2:00000003",
  "TimeStamp": "2018-07-31T16:11:36Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:11:36.410 -06:00 [DBG] Start token request validation
2018-07-31 10:11:36.410 -06:00 [DBG] Start validation of authorization code token request
2018-07-31 10:11:36.418 -06:00 [DBG] Validation of authorization code token request success
2018-07-31 10:11:36.418 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "d60606fc65a0a1726a8d3056bc42345a8533a7284363efbea5cec211fbcabab9",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "d60606fc65a0a1726a8d3056bc42345a8533a7284363efbea5cec211fbcabab9",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-31 10:11:36.418 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:11:36.418 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-31 10:11:36.418 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:11:36.431 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:11:36.431 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 10:11:36.431 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 10:11:36.442 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ipmA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****iHyA"
    }
  ],
  "ActivityId": "0HLFMUHL6F4M2:00000003",
  "TimeStamp": "2018-07-31T16:11:36Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:11:36.442 -06:00 [DBG] Token request success.
2018-07-31 10:11:36.452 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-31 10:11:36.452 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-31 10:11:36.452 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-31 10:11:36.452 -06:00 [DBG] Start userinfo request
2018-07-31 10:11:36.452 -06:00 [DBG] Bearer token found in header
2018-07-31 10:11:36.455 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:11:36.455 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:11:36.457 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-31 10:11:36.457 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533053496,
    "exp": 1533057096,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1533053492,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-31 10:11:36.457 -06:00 [DBG] Creating userinfo response
2018-07-31 10:11:36.457 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 10:11:36.457 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 10:11:36.457 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-31 10:11:36.457 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 10:11:36.459 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-31 10:11:36.459 -06:00 [DBG] End userinfo request
2018-07-31 10:23:18.776 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-31 10:23:18.777 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-31 10:23:18.777 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-31 10:23:18.777 -06:00 [DBG] Start discovery request
2018-07-31 10:23:18.905 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-31 10:23:18.905 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-31 10:23:18.905 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-31 10:23:18.905 -06:00 [DBG] Start key discovery request
2018-07-31 10:23:18.989 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-31 10:23:18.989 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-31 10:23:18.990 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-31 10:23:18.990 -06:00 [DBG] Start authorize request
2018-07-31 10:23:18.990 -06:00 [DBG] No user present in authorize request
2018-07-31 10:23:18.990 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:23:18.990 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:23:18.990 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:23:18.990 -06:00 [DBG] No PKCE used.
2018-07-31 10:23:18.990 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:23:18.990 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcjDoeHOnc7D6InJ-lMxkWEDaxIHfMIDIfQv36-80UWIjYtXZzhe-lTCV9aOmWmiYaBKY3WD9nPdT-xO_50K2MxQYqEUxx6WUAuHV56eLlbXqAMwc-UXUhpDhzi4ouzdMP47I_cyt-TtmJUrllolNfvVu3MURkZiqFhzoJ4vNlJIL1FyVA8XwZ87GAjUtvlTPY74b-mnRx42or0NJtRgt_A1hSzTptgw0dUzDN0JCS3GU7MoXSnURSekTkD4EQN4J1mKEhpx6ahY9Hg3kR7O9yIuMovL7BsB7lLBdPnXoEM9FG_gDm4CNmgZgZPDBlGvT66D52gjoCjaI7yVEm-sIn43PNPkQd1N7uWyA9f2lGF7bcyka_DAw_9r47zdyAZ3R0",
  "Nonce": "636686509989669950.ZmIwZWNlNTMtY2YxMy00MGRjLTk2ODEtNjMzYzAwZTQ5NzAyZGE1NTFiNzUtYjg5ZS00OGUzLWExNzMtZjliMTJlZWY2Mjc5",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686509989669950.ZmIwZWNlNTMtY2YxMy00MGRjLTk2ODEtNjMzYzAwZTQ5NzAyZGE1NTFiNzUtYjg5ZS00OGUzLWExNzMtZjliMTJlZWY2Mjc5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcjDoeHOnc7D6InJ-lMxkWEDaxIHfMIDIfQv36-80UWIjYtXZzhe-lTCV9aOmWmiYaBKY3WD9nPdT-xO_50K2MxQYqEUxx6WUAuHV56eLlbXqAMwc-UXUhpDhzi4ouzdMP47I_cyt-TtmJUrllolNfvVu3MURkZiqFhzoJ4vNlJIL1FyVA8XwZ87GAjUtvlTPY74b-mnRx42or0NJtRgt_A1hSzTptgw0dUzDN0JCS3GU7MoXSnURSekTkD4EQN4J1mKEhpx6ahY9Hg3kR7O9yIuMovL7BsB7lLBdPnXoEM9FG_gDm4CNmgZgZPDBlGvT66D52gjoCjaI7yVEm-sIn43PNPkQd1N7uWyA9f2lGF7bcyka_DAw_9r47zdyAZ3R0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 10:23:18.990 -06:00 [INF] Showing login: User is not authenticated
2018-07-31 10:23:18.993 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:23:18.993 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:23:18.993 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:23:18.993 -06:00 [DBG] No PKCE used.
2018-07-31 10:23:18.993 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:23:18.993 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:23:27.999 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 10:23:28.014 -06:00 [DBG] Augmenting SignInContext
2018-07-31 10:23:28.014 -06:00 [DBG] Adding idp claim with value: local
2018-07-31 10:23:28.014 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-31 10:23:28.014 -06:00 [DBG] Adding auth_time claim with value: 1533054208
2018-07-31 10:23:28.014 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 10:23:28.014 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFMUHL6F4M5:00000003",
  "TimeStamp": "2018-07-31T16:23:28Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:23:28.017 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:23:28.017 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:23:28.017 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 10:23:28.017 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 10:23:28.017 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 10:23:28.017 -06:00 [DBG] Start authorize callback request
2018-07-31 10:23:28.017 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:23:28.017 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:23:28.017 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:23:28.017 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:23:28.017 -06:00 [DBG] No PKCE used.
2018-07-31 10:23:28.017 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:23:28.017 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcjDoeHOnc7D6InJ-lMxkWEDaxIHfMIDIfQv36-80UWIjYtXZzhe-lTCV9aOmWmiYaBKY3WD9nPdT-xO_50K2MxQYqEUxx6WUAuHV56eLlbXqAMwc-UXUhpDhzi4ouzdMP47I_cyt-TtmJUrllolNfvVu3MURkZiqFhzoJ4vNlJIL1FyVA8XwZ87GAjUtvlTPY74b-mnRx42or0NJtRgt_A1hSzTptgw0dUzDN0JCS3GU7MoXSnURSekTkD4EQN4J1mKEhpx6ahY9Hg3kR7O9yIuMovL7BsB7lLBdPnXoEM9FG_gDm4CNmgZgZPDBlGvT66D52gjoCjaI7yVEm-sIn43PNPkQd1N7uWyA9f2lGF7bcyka_DAw_9r47zdyAZ3R0",
  "Nonce": "636686509989669950.ZmIwZWNlNTMtY2YxMy00MGRjLTk2ODEtNjMzYzAwZTQ5NzAyZGE1NTFiNzUtYjg5ZS00OGUzLWExNzMtZjliMTJlZWY2Mjc5",
  "SessionId": "ad56c45d98d12d90e92f20f905b2af73",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686509989669950.ZmIwZWNlNTMtY2YxMy00MGRjLTk2ODEtNjMzYzAwZTQ5NzAyZGE1NTFiNzUtYjg5ZS00OGUzLWExNzMtZjliMTJlZWY2Mjc5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcjDoeHOnc7D6InJ-lMxkWEDaxIHfMIDIfQv36-80UWIjYtXZzhe-lTCV9aOmWmiYaBKY3WD9nPdT-xO_50K2MxQYqEUxx6WUAuHV56eLlbXqAMwc-UXUhpDhzi4ouzdMP47I_cyt-TtmJUrllolNfvVu3MURkZiqFhzoJ4vNlJIL1FyVA8XwZ87GAjUtvlTPY74b-mnRx42or0NJtRgt_A1hSzTptgw0dUzDN0JCS3GU7MoXSnURSekTkD4EQN4J1mKEhpx6ahY9Hg3kR7O9yIuMovL7BsB7lLBdPnXoEM9FG_gDm4CNmgZgZPDBlGvT66D52gjoCjaI7yVEm-sIn43PNPkQd1N7uWyA9f2lGF7bcyka_DAw_9r47zdyAZ3R0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 10:23:28.019 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 10:23:28.019 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 10:23:28.019 -06:00 [INF] Showing consent: User has not yet consented
2018-07-31 10:23:28.021 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:23:28.021 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:23:28.022 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:23:28.022 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:23:28.022 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:23:28.022 -06:00 [DBG] No PKCE used.
2018-07-31 10:23:28.022 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:23:28.022 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:23:30.257 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 10:23:30.258 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:23:30.258 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:23:30.258 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:23:30.258 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:23:30.258 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:23:30.258 -06:00 [DBG] No PKCE used.
2018-07-31 10:23:30.258 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:23:30.262 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:23:30.262 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:23:30.262 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 10:23:30.262 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 10:23:30.262 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 10:23:30.262 -06:00 [DBG] Start authorize callback request
2018-07-31 10:23:30.262 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:23:30.263 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:23:30.263 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:23:30.263 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:23:30.263 -06:00 [DBG] No PKCE used.
2018-07-31 10:23:30.263 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:23:30.263 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcjDoeHOnc7D6InJ-lMxkWEDaxIHfMIDIfQv36-80UWIjYtXZzhe-lTCV9aOmWmiYaBKY3WD9nPdT-xO_50K2MxQYqEUxx6WUAuHV56eLlbXqAMwc-UXUhpDhzi4ouzdMP47I_cyt-TtmJUrllolNfvVu3MURkZiqFhzoJ4vNlJIL1FyVA8XwZ87GAjUtvlTPY74b-mnRx42or0NJtRgt_A1hSzTptgw0dUzDN0JCS3GU7MoXSnURSekTkD4EQN4J1mKEhpx6ahY9Hg3kR7O9yIuMovL7BsB7lLBdPnXoEM9FG_gDm4CNmgZgZPDBlGvT66D52gjoCjaI7yVEm-sIn43PNPkQd1N7uWyA9f2lGF7bcyka_DAw_9r47zdyAZ3R0",
  "Nonce": "636686509989669950.ZmIwZWNlNTMtY2YxMy00MGRjLTk2ODEtNjMzYzAwZTQ5NzAyZGE1NTFiNzUtYjg5ZS00OGUzLWExNzMtZjliMTJlZWY2Mjc5",
  "SessionId": "ad56c45d98d12d90e92f20f905b2af73",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686509989669950.ZmIwZWNlNTMtY2YxMy00MGRjLTk2ODEtNjMzYzAwZTQ5NzAyZGE1NTFiNzUtYjg5ZS00OGUzLWExNzMtZjliMTJlZWY2Mjc5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcjDoeHOnc7D6InJ-lMxkWEDaxIHfMIDIfQv36-80UWIjYtXZzhe-lTCV9aOmWmiYaBKY3WD9nPdT-xO_50K2MxQYqEUxx6WUAuHV56eLlbXqAMwc-UXUhpDhzi4ouzdMP47I_cyt-TtmJUrllolNfvVu3MURkZiqFhzoJ4vNlJIL1FyVA8XwZ87GAjUtvlTPY74b-mnRx42or0NJtRgt_A1hSzTptgw0dUzDN0JCS3GU7MoXSnURSekTkD4EQN4J1mKEhpx6ahY9Hg3kR7O9yIuMovL7BsB7lLBdPnXoEM9FG_gDm4CNmgZgZPDBlGvT66D52gjoCjaI7yVEm-sIn43PNPkQd1N7uWyA9f2lGF7bcyka_DAw_9r47zdyAZ3R0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 10:23:30.264 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 10:23:30.264 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 10:23:30.264 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-31 10:23:30.264 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:23:30.264 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-31 10:23:30.269 -06:00 [DBG] Creating Implicit Flow response.
2018-07-31 10:23:30.269 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 10:23:30.269 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 10:23:30.281 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****S-LA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****66f2"
    }
  ],
  "ActivityId": "0HLFMUHL6F4M5:00000007",
  "TimeStamp": "2018-07-31T16:23:30Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:23:30.281 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcjDoeHOnc7D6InJ-lMxkWEDaxIHfMIDIfQv36-80UWIjYtXZzhe-lTCV9aOmWmiYaBKY3WD9nPdT-xO_50K2MxQYqEUxx6WUAuHV56eLlbXqAMwc-UXUhpDhzi4ouzdMP47I_cyt-TtmJUrllolNfvVu3MURkZiqFhzoJ4vNlJIL1FyVA8XwZ87GAjUtvlTPY74b-mnRx42or0NJtRgt_A1hSzTptgw0dUzDN0JCS3GU7MoXSnURSekTkD4EQN4J1mKEhpx6ahY9Hg3kR7O9yIuMovL7BsB7lLBdPnXoEM9FG_gDm4CNmgZgZPDBlGvT66D52gjoCjaI7yVEm-sIn43PNPkQd1N7uWyA9f2lGF7bcyka_DAw_9r47zdyAZ3R0",
  "Scope": "openid profile business email"
}
2018-07-31 10:23:30.281 -06:00 [DBG] Augmenting SignInContext
2018-07-31 10:23:30.281 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 10:23:30.420 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-31 10:23:30.420 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-31 10:23:30.420 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-31 10:23:30.420 -06:00 [DBG] Start token request.
2018-07-31 10:23:30.420 -06:00 [DBG] Start client validation
2018-07-31 10:23:30.420 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-31 10:23:30.420 -06:00 [DBG] Start parsing for secret in post body
2018-07-31 10:23:30.421 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-31 10:23:30.421 -06:00 [DBG] Secret id found: ideaBox
2018-07-31 10:23:30.421 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:23:30.421 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-31 10:23:30.421 -06:00 [DBG] Client validation success
2018-07-31 10:23:30.421 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFMUHL6F4M4:00000003",
  "TimeStamp": "2018-07-31T16:23:30Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:23:30.421 -06:00 [DBG] Start token request validation
2018-07-31 10:23:30.421 -06:00 [DBG] Start validation of authorization code token request
2018-07-31 10:23:30.429 -06:00 [DBG] Validation of authorization code token request success
2018-07-31 10:23:30.429 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "8e976a750589ef5cd3e0d22a04e7b31b1913ff5b107788bc5ef77390bd3966f2",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "8e976a750589ef5cd3e0d22a04e7b31b1913ff5b107788bc5ef77390bd3966f2",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-31 10:23:30.429 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:23:30.429 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-31 10:23:30.429 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:23:30.442 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:23:30.442 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 10:23:30.443 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 10:23:30.454 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****e6Fw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****5m9w"
    }
  ],
  "ActivityId": "0HLFMUHL6F4M4:00000003",
  "TimeStamp": "2018-07-31T16:23:30Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:23:30.454 -06:00 [DBG] Token request success.
2018-07-31 10:23:30.464 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-31 10:23:30.465 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-31 10:23:30.465 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-31 10:23:30.465 -06:00 [DBG] Start userinfo request
2018-07-31 10:23:30.465 -06:00 [DBG] Bearer token found in header
2018-07-31 10:23:30.467 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:23:30.467 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:23:30.469 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-31 10:23:30.469 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533054210,
    "exp": 1533057810,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1533054208,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-31 10:23:30.469 -06:00 [DBG] Creating userinfo response
2018-07-31 10:23:30.469 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 10:23:30.469 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 10:23:30.469 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-31 10:23:30.469 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 10:23:30.470 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-31 10:23:30.470 -06:00 [DBG] End userinfo request
2018-07-31 10:24:13.358 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-31 10:24:13.358 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-31 10:24:13.358 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-31 10:24:13.358 -06:00 [DBG] Start discovery request
2018-07-31 10:24:13.484 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-31 10:24:13.485 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-31 10:24:13.485 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-31 10:24:13.485 -06:00 [DBG] Start key discovery request
2018-07-31 10:24:13.567 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-31 10:24:13.568 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-31 10:24:13.568 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-31 10:24:13.568 -06:00 [DBG] Start authorize request
2018-07-31 10:24:13.568 -06:00 [DBG] No user present in authorize request
2018-07-31 10:24:13.568 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:24:13.568 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:24:13.568 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:24:13.568 -06:00 [DBG] No PKCE used.
2018-07-31 10:24:13.568 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:24:13.568 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdD0OhI5R4rhrPF1aCMyxd_X3hrk1qnrEOp261PJFEL5Hurf1WyK4SkwttjxPBeqqUqMzamKl31WXsNQFSUjNmf5NgVdiFFihy3ihl5hsnu9o6cynQ1IrBj-0o8slghrbSjb_0wuPLsdfUqQ1p_Uh9m6fqn_mUKDOdyuucrWnxoVBoE9y7S95jTe7e3HOd75QqXrghaGgNp_LR8V_kyox5G7Z08nzv1fVUhgwwk8c6HL5Yf8UefXcanmkwiJahuDyxQCaCwwaXBLYFCFaxOAi7sq2l-W1af6VPP1P91Mq4FTvLUTzln_KHcLYcX7gVpiQzqOoM_b_yBImOOUqaS8EVt_VT_zFbFoC9EChjFo_1YhAeNm3AGDrBSFLTfMhJCCVc",
  "Nonce": "636686510535462670.NWYwZDY3MTQtNzZlMC00ZTc5LWJlMDEtNTc1M2IwYTgzZTkyYzU1N2Q4NzctZTNkMy00OTM5LTg0YzMtOGU0NzJhMmVhOGFm",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686510535462670.NWYwZDY3MTQtNzZlMC00ZTc5LWJlMDEtNTc1M2IwYTgzZTkyYzU1N2Q4NzctZTNkMy00OTM5LTg0YzMtOGU0NzJhMmVhOGFm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdD0OhI5R4rhrPF1aCMyxd_X3hrk1qnrEOp261PJFEL5Hurf1WyK4SkwttjxPBeqqUqMzamKl31WXsNQFSUjNmf5NgVdiFFihy3ihl5hsnu9o6cynQ1IrBj-0o8slghrbSjb_0wuPLsdfUqQ1p_Uh9m6fqn_mUKDOdyuucrWnxoVBoE9y7S95jTe7e3HOd75QqXrghaGgNp_LR8V_kyox5G7Z08nzv1fVUhgwwk8c6HL5Yf8UefXcanmkwiJahuDyxQCaCwwaXBLYFCFaxOAi7sq2l-W1af6VPP1P91Mq4FTvLUTzln_KHcLYcX7gVpiQzqOoM_b_yBImOOUqaS8EVt_VT_zFbFoC9EChjFo_1YhAeNm3AGDrBSFLTfMhJCCVc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 10:24:13.568 -06:00 [INF] Showing login: User is not authenticated
2018-07-31 10:24:13.571 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:24:13.571 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:24:13.571 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:24:13.571 -06:00 [DBG] No PKCE used.
2018-07-31 10:24:13.571 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:24:13.571 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:24:21.616 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 10:24:21.632 -06:00 [DBG] Augmenting SignInContext
2018-07-31 10:24:21.632 -06:00 [DBG] Adding idp claim with value: local
2018-07-31 10:24:21.632 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-31 10:24:21.632 -06:00 [DBG] Adding auth_time claim with value: 1533054261
2018-07-31 10:24:21.632 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 10:24:21.633 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFMUHL6F4M5:0000000A",
  "TimeStamp": "2018-07-31T16:24:21Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:24:21.635 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:24:21.635 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:24:21.635 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 10:24:21.635 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 10:24:21.635 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 10:24:21.635 -06:00 [DBG] Start authorize callback request
2018-07-31 10:24:21.635 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:24:21.635 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:24:21.635 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:24:21.635 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:24:21.635 -06:00 [DBG] No PKCE used.
2018-07-31 10:24:21.636 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:24:21.636 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdD0OhI5R4rhrPF1aCMyxd_X3hrk1qnrEOp261PJFEL5Hurf1WyK4SkwttjxPBeqqUqMzamKl31WXsNQFSUjNmf5NgVdiFFihy3ihl5hsnu9o6cynQ1IrBj-0o8slghrbSjb_0wuPLsdfUqQ1p_Uh9m6fqn_mUKDOdyuucrWnxoVBoE9y7S95jTe7e3HOd75QqXrghaGgNp_LR8V_kyox5G7Z08nzv1fVUhgwwk8c6HL5Yf8UefXcanmkwiJahuDyxQCaCwwaXBLYFCFaxOAi7sq2l-W1af6VPP1P91Mq4FTvLUTzln_KHcLYcX7gVpiQzqOoM_b_yBImOOUqaS8EVt_VT_zFbFoC9EChjFo_1YhAeNm3AGDrBSFLTfMhJCCVc",
  "Nonce": "636686510535462670.NWYwZDY3MTQtNzZlMC00ZTc5LWJlMDEtNTc1M2IwYTgzZTkyYzU1N2Q4NzctZTNkMy00OTM5LTg0YzMtOGU0NzJhMmVhOGFm",
  "SessionId": "f85de965550b96d23c61a63e61df943a",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686510535462670.NWYwZDY3MTQtNzZlMC00ZTc5LWJlMDEtNTc1M2IwYTgzZTkyYzU1N2Q4NzctZTNkMy00OTM5LTg0YzMtOGU0NzJhMmVhOGFm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdD0OhI5R4rhrPF1aCMyxd_X3hrk1qnrEOp261PJFEL5Hurf1WyK4SkwttjxPBeqqUqMzamKl31WXsNQFSUjNmf5NgVdiFFihy3ihl5hsnu9o6cynQ1IrBj-0o8slghrbSjb_0wuPLsdfUqQ1p_Uh9m6fqn_mUKDOdyuucrWnxoVBoE9y7S95jTe7e3HOd75QqXrghaGgNp_LR8V_kyox5G7Z08nzv1fVUhgwwk8c6HL5Yf8UefXcanmkwiJahuDyxQCaCwwaXBLYFCFaxOAi7sq2l-W1af6VPP1P91Mq4FTvLUTzln_KHcLYcX7gVpiQzqOoM_b_yBImOOUqaS8EVt_VT_zFbFoC9EChjFo_1YhAeNm3AGDrBSFLTfMhJCCVc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 10:24:21.638 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 10:24:21.638 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 10:24:21.638 -06:00 [INF] Showing consent: User has not yet consented
2018-07-31 10:24:21.640 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:24:21.640 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:24:21.640 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:24:21.641 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:24:21.641 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:24:21.641 -06:00 [DBG] No PKCE used.
2018-07-31 10:24:21.641 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:24:21.641 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:24:23.425 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 10:24:23.426 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:24:23.426 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:24:23.426 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:24:23.426 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:24:23.426 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:24:23.426 -06:00 [DBG] No PKCE used.
2018-07-31 10:24:23.427 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:24:23.430 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:24:23.430 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:24:23.430 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 10:24:23.430 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 10:24:23.430 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 10:24:23.430 -06:00 [DBG] Start authorize callback request
2018-07-31 10:24:23.430 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:24:23.430 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:24:23.430 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:24:23.430 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:24:23.430 -06:00 [DBG] No PKCE used.
2018-07-31 10:24:23.431 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:24:23.431 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdD0OhI5R4rhrPF1aCMyxd_X3hrk1qnrEOp261PJFEL5Hurf1WyK4SkwttjxPBeqqUqMzamKl31WXsNQFSUjNmf5NgVdiFFihy3ihl5hsnu9o6cynQ1IrBj-0o8slghrbSjb_0wuPLsdfUqQ1p_Uh9m6fqn_mUKDOdyuucrWnxoVBoE9y7S95jTe7e3HOd75QqXrghaGgNp_LR8V_kyox5G7Z08nzv1fVUhgwwk8c6HL5Yf8UefXcanmkwiJahuDyxQCaCwwaXBLYFCFaxOAi7sq2l-W1af6VPP1P91Mq4FTvLUTzln_KHcLYcX7gVpiQzqOoM_b_yBImOOUqaS8EVt_VT_zFbFoC9EChjFo_1YhAeNm3AGDrBSFLTfMhJCCVc",
  "Nonce": "636686510535462670.NWYwZDY3MTQtNzZlMC00ZTc5LWJlMDEtNTc1M2IwYTgzZTkyYzU1N2Q4NzctZTNkMy00OTM5LTg0YzMtOGU0NzJhMmVhOGFm",
  "SessionId": "f85de965550b96d23c61a63e61df943a",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686510535462670.NWYwZDY3MTQtNzZlMC00ZTc5LWJlMDEtNTc1M2IwYTgzZTkyYzU1N2Q4NzctZTNkMy00OTM5LTg0YzMtOGU0NzJhMmVhOGFm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdD0OhI5R4rhrPF1aCMyxd_X3hrk1qnrEOp261PJFEL5Hurf1WyK4SkwttjxPBeqqUqMzamKl31WXsNQFSUjNmf5NgVdiFFihy3ihl5hsnu9o6cynQ1IrBj-0o8slghrbSjb_0wuPLsdfUqQ1p_Uh9m6fqn_mUKDOdyuucrWnxoVBoE9y7S95jTe7e3HOd75QqXrghaGgNp_LR8V_kyox5G7Z08nzv1fVUhgwwk8c6HL5Yf8UefXcanmkwiJahuDyxQCaCwwaXBLYFCFaxOAi7sq2l-W1af6VPP1P91Mq4FTvLUTzln_KHcLYcX7gVpiQzqOoM_b_yBImOOUqaS8EVt_VT_zFbFoC9EChjFo_1YhAeNm3AGDrBSFLTfMhJCCVc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 10:24:23.432 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 10:24:23.432 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 10:24:23.432 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-31 10:24:23.432 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:24:23.432 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-31 10:24:23.437 -06:00 [DBG] Creating Implicit Flow response.
2018-07-31 10:24:23.437 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 10:24:23.437 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 10:24:23.449 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****4LXg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****2682"
    }
  ],
  "ActivityId": "0HLFMUHL6F4M5:0000000E",
  "TimeStamp": "2018-07-31T16:24:23Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:24:23.449 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdD0OhI5R4rhrPF1aCMyxd_X3hrk1qnrEOp261PJFEL5Hurf1WyK4SkwttjxPBeqqUqMzamKl31WXsNQFSUjNmf5NgVdiFFihy3ihl5hsnu9o6cynQ1IrBj-0o8slghrbSjb_0wuPLsdfUqQ1p_Uh9m6fqn_mUKDOdyuucrWnxoVBoE9y7S95jTe7e3HOd75QqXrghaGgNp_LR8V_kyox5G7Z08nzv1fVUhgwwk8c6HL5Yf8UefXcanmkwiJahuDyxQCaCwwaXBLYFCFaxOAi7sq2l-W1af6VPP1P91Mq4FTvLUTzln_KHcLYcX7gVpiQzqOoM_b_yBImOOUqaS8EVt_VT_zFbFoC9EChjFo_1YhAeNm3AGDrBSFLTfMhJCCVc",
  "Scope": "openid profile business email"
}
2018-07-31 10:24:23.449 -06:00 [DBG] Augmenting SignInContext
2018-07-31 10:24:23.449 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 10:24:23.553 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-31 10:24:23.553 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-31 10:24:23.553 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-31 10:24:23.553 -06:00 [DBG] Start token request.
2018-07-31 10:24:23.553 -06:00 [DBG] Start client validation
2018-07-31 10:24:23.553 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-31 10:24:23.553 -06:00 [DBG] Start parsing for secret in post body
2018-07-31 10:24:23.553 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-31 10:24:23.553 -06:00 [DBG] Secret id found: ideaBox
2018-07-31 10:24:23.553 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:24:23.553 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-31 10:24:23.553 -06:00 [DBG] Client validation success
2018-07-31 10:24:23.553 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFMUHL6F4M6:00000003",
  "TimeStamp": "2018-07-31T16:24:23Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:24:23.553 -06:00 [DBG] Start token request validation
2018-07-31 10:24:23.553 -06:00 [DBG] Start validation of authorization code token request
2018-07-31 10:24:23.561 -06:00 [DBG] Validation of authorization code token request success
2018-07-31 10:24:23.561 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "12410e539fb64ca5c87854d420965ddfb009b3d4107111b5573dbed072382682",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "12410e539fb64ca5c87854d420965ddfb009b3d4107111b5573dbed072382682",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-31 10:24:23.561 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:24:23.562 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-31 10:24:23.562 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:24:23.574 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:24:23.574 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 10:24:23.575 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 10:24:23.587 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Ypfg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****7fZA"
    }
  ],
  "ActivityId": "0HLFMUHL6F4M6:00000003",
  "TimeStamp": "2018-07-31T16:24:23Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:24:23.587 -06:00 [DBG] Token request success.
2018-07-31 10:24:23.597 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-31 10:24:23.597 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-31 10:24:23.597 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-31 10:24:23.597 -06:00 [DBG] Start userinfo request
2018-07-31 10:24:23.597 -06:00 [DBG] Bearer token found in header
2018-07-31 10:24:23.599 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:24:23.600 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:24:23.601 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-31 10:24:23.601 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533054263,
    "exp": 1533057863,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1533054261,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-31 10:24:23.601 -06:00 [DBG] Creating userinfo response
2018-07-31 10:24:23.601 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 10:24:23.601 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 10:24:23.601 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-31 10:24:23.602 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 10:24:23.603 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-31 10:24:23.603 -06:00 [DBG] End userinfo request
2018-07-31 10:26:36.396 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-31 10:26:36.396 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-31 10:26:36.396 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-31 10:26:36.396 -06:00 [DBG] Start discovery request
2018-07-31 10:26:36.535 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-31 10:26:36.535 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-31 10:26:36.535 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-31 10:26:36.535 -06:00 [DBG] Start key discovery request
2018-07-31 10:26:36.615 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-31 10:26:36.616 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-31 10:26:36.616 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-31 10:26:36.616 -06:00 [DBG] Start authorize request
2018-07-31 10:26:36.616 -06:00 [DBG] No user present in authorize request
2018-07-31 10:26:36.616 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:26:36.616 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:26:36.616 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:26:36.616 -06:00 [DBG] No PKCE used.
2018-07-31 10:26:36.616 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:26:36.616 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcYDz2WEBR0SXWSqEJNmWWDk8dpI68rY-jMSwvkcWX6PHKcOcYRdWj-_MwkaR3UhbTN2dYJ2i9__STKuprs82FBBTeOfXMBPgRhF9JzDCVVo6fBxYgh0lM4bEgaHK3z2_8ZMF8UU9RgxmEbE3Bi6BOgwfxa7vrgMXXv8_i6ZOuBJ3zGh3cRlFX36BSa9u9P7LTePt-Y1-LMfvPVw17XEZ55X6TMfc2qxOSoZ3m9WFuigUnVz4nYWYBQVfsFWheRJ3toCelObwsKQcYIBO9QdKiR3Q5dnzdGLnjSoa1ce5bohzojd9wJZK_ptiztAtk_VCO6t9VHY-EUj03kz50-eoVYaVI_IlxZDsT6SnMzq-ZcCAwMcg_ASiPI5VGrQlJHIuI",
  "Nonce": "636686511965932660.N2EyMmZiYzItYjA4OS00YjkzLWIxN2YtNzMzMGE3YTM3YjllYWE2MTYzZjgtYTllYy00ODUxLWE5MDEtZDdiMGQ3MzVjZGE5",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686511965932660.N2EyMmZiYzItYjA4OS00YjkzLWIxN2YtNzMzMGE3YTM3YjllYWE2MTYzZjgtYTllYy00ODUxLWE5MDEtZDdiMGQ3MzVjZGE5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcYDz2WEBR0SXWSqEJNmWWDk8dpI68rY-jMSwvkcWX6PHKcOcYRdWj-_MwkaR3UhbTN2dYJ2i9__STKuprs82FBBTeOfXMBPgRhF9JzDCVVo6fBxYgh0lM4bEgaHK3z2_8ZMF8UU9RgxmEbE3Bi6BOgwfxa7vrgMXXv8_i6ZOuBJ3zGh3cRlFX36BSa9u9P7LTePt-Y1-LMfvPVw17XEZ55X6TMfc2qxOSoZ3m9WFuigUnVz4nYWYBQVfsFWheRJ3toCelObwsKQcYIBO9QdKiR3Q5dnzdGLnjSoa1ce5bohzojd9wJZK_ptiztAtk_VCO6t9VHY-EUj03kz50-eoVYaVI_IlxZDsT6SnMzq-ZcCAwMcg_ASiPI5VGrQlJHIuI",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 10:26:36.616 -06:00 [INF] Showing login: User is not authenticated
2018-07-31 10:26:36.618 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:26:36.618 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:26:36.618 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:26:36.618 -06:00 [DBG] No PKCE used.
2018-07-31 10:26:36.619 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:26:36.619 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:26:47.045 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 10:26:47.060 -06:00 [DBG] Augmenting SignInContext
2018-07-31 10:26:47.061 -06:00 [DBG] Adding idp claim with value: local
2018-07-31 10:26:47.061 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-31 10:26:47.061 -06:00 [DBG] Adding auth_time claim with value: 1533054407
2018-07-31 10:26:47.061 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 10:26:47.061 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFMUHL6F4M8:00000005",
  "TimeStamp": "2018-07-31T16:26:47Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:26:47.063 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:26:47.063 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:26:47.064 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 10:26:47.064 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 10:26:47.064 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 10:26:47.064 -06:00 [DBG] Start authorize callback request
2018-07-31 10:26:47.064 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:26:47.064 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:26:47.064 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:26:47.064 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:26:47.064 -06:00 [DBG] No PKCE used.
2018-07-31 10:26:47.064 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:26:47.064 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcYDz2WEBR0SXWSqEJNmWWDk8dpI68rY-jMSwvkcWX6PHKcOcYRdWj-_MwkaR3UhbTN2dYJ2i9__STKuprs82FBBTeOfXMBPgRhF9JzDCVVo6fBxYgh0lM4bEgaHK3z2_8ZMF8UU9RgxmEbE3Bi6BOgwfxa7vrgMXXv8_i6ZOuBJ3zGh3cRlFX36BSa9u9P7LTePt-Y1-LMfvPVw17XEZ55X6TMfc2qxOSoZ3m9WFuigUnVz4nYWYBQVfsFWheRJ3toCelObwsKQcYIBO9QdKiR3Q5dnzdGLnjSoa1ce5bohzojd9wJZK_ptiztAtk_VCO6t9VHY-EUj03kz50-eoVYaVI_IlxZDsT6SnMzq-ZcCAwMcg_ASiPI5VGrQlJHIuI",
  "Nonce": "636686511965932660.N2EyMmZiYzItYjA4OS00YjkzLWIxN2YtNzMzMGE3YTM3YjllYWE2MTYzZjgtYTllYy00ODUxLWE5MDEtZDdiMGQ3MzVjZGE5",
  "SessionId": "fc8f656335fc06cfdba9b62d704dd393",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686511965932660.N2EyMmZiYzItYjA4OS00YjkzLWIxN2YtNzMzMGE3YTM3YjllYWE2MTYzZjgtYTllYy00ODUxLWE5MDEtZDdiMGQ3MzVjZGE5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcYDz2WEBR0SXWSqEJNmWWDk8dpI68rY-jMSwvkcWX6PHKcOcYRdWj-_MwkaR3UhbTN2dYJ2i9__STKuprs82FBBTeOfXMBPgRhF9JzDCVVo6fBxYgh0lM4bEgaHK3z2_8ZMF8UU9RgxmEbE3Bi6BOgwfxa7vrgMXXv8_i6ZOuBJ3zGh3cRlFX36BSa9u9P7LTePt-Y1-LMfvPVw17XEZ55X6TMfc2qxOSoZ3m9WFuigUnVz4nYWYBQVfsFWheRJ3toCelObwsKQcYIBO9QdKiR3Q5dnzdGLnjSoa1ce5bohzojd9wJZK_ptiztAtk_VCO6t9VHY-EUj03kz50-eoVYaVI_IlxZDsT6SnMzq-ZcCAwMcg_ASiPI5VGrQlJHIuI",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 10:26:47.065 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 10:26:47.065 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 10:26:47.065 -06:00 [INF] Showing consent: User has not yet consented
2018-07-31 10:26:47.067 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:26:47.067 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:26:47.068 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:26:47.068 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:26:47.068 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:26:47.068 -06:00 [DBG] No PKCE used.
2018-07-31 10:26:47.068 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:26:47.068 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:26:48.935 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 10:26:48.936 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:26:48.936 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:26:48.936 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:26:48.936 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:26:48.936 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:26:48.936 -06:00 [DBG] No PKCE used.
2018-07-31 10:26:48.936 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:26:48.940 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:26:48.940 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 10:26:48.940 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 10:26:48.940 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 10:26:48.941 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 10:26:48.941 -06:00 [DBG] Start authorize callback request
2018-07-31 10:26:48.941 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:26:48.941 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 10:26:48.941 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:26:48.941 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 10:26:48.941 -06:00 [DBG] No PKCE used.
2018-07-31 10:26:48.941 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 10:26:48.941 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcYDz2WEBR0SXWSqEJNmWWDk8dpI68rY-jMSwvkcWX6PHKcOcYRdWj-_MwkaR3UhbTN2dYJ2i9__STKuprs82FBBTeOfXMBPgRhF9JzDCVVo6fBxYgh0lM4bEgaHK3z2_8ZMF8UU9RgxmEbE3Bi6BOgwfxa7vrgMXXv8_i6ZOuBJ3zGh3cRlFX36BSa9u9P7LTePt-Y1-LMfvPVw17XEZ55X6TMfc2qxOSoZ3m9WFuigUnVz4nYWYBQVfsFWheRJ3toCelObwsKQcYIBO9QdKiR3Q5dnzdGLnjSoa1ce5bohzojd9wJZK_ptiztAtk_VCO6t9VHY-EUj03kz50-eoVYaVI_IlxZDsT6SnMzq-ZcCAwMcg_ASiPI5VGrQlJHIuI",
  "Nonce": "636686511965932660.N2EyMmZiYzItYjA4OS00YjkzLWIxN2YtNzMzMGE3YTM3YjllYWE2MTYzZjgtYTllYy00ODUxLWE5MDEtZDdiMGQ3MzVjZGE5",
  "SessionId": "fc8f656335fc06cfdba9b62d704dd393",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686511965932660.N2EyMmZiYzItYjA4OS00YjkzLWIxN2YtNzMzMGE3YTM3YjllYWE2MTYzZjgtYTllYy00ODUxLWE5MDEtZDdiMGQ3MzVjZGE5",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcYDz2WEBR0SXWSqEJNmWWDk8dpI68rY-jMSwvkcWX6PHKcOcYRdWj-_MwkaR3UhbTN2dYJ2i9__STKuprs82FBBTeOfXMBPgRhF9JzDCVVo6fBxYgh0lM4bEgaHK3z2_8ZMF8UU9RgxmEbE3Bi6BOgwfxa7vrgMXXv8_i6ZOuBJ3zGh3cRlFX36BSa9u9P7LTePt-Y1-LMfvPVw17XEZ55X6TMfc2qxOSoZ3m9WFuigUnVz4nYWYBQVfsFWheRJ3toCelObwsKQcYIBO9QdKiR3Q5dnzdGLnjSoa1ce5bohzojd9wJZK_ptiztAtk_VCO6t9VHY-EUj03kz50-eoVYaVI_IlxZDsT6SnMzq-ZcCAwMcg_ASiPI5VGrQlJHIuI",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 10:26:48.943 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 10:26:48.943 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 10:26:48.943 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-31 10:26:48.943 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:26:48.943 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-31 10:26:48.947 -06:00 [DBG] Creating Implicit Flow response.
2018-07-31 10:26:48.947 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 10:26:48.947 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 10:26:48.959 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ANyQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****7786"
    }
  ],
  "ActivityId": "0HLFMUHL6F4M8:0000000A",
  "TimeStamp": "2018-07-31T16:26:48Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:26:48.959 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcYDz2WEBR0SXWSqEJNmWWDk8dpI68rY-jMSwvkcWX6PHKcOcYRdWj-_MwkaR3UhbTN2dYJ2i9__STKuprs82FBBTeOfXMBPgRhF9JzDCVVo6fBxYgh0lM4bEgaHK3z2_8ZMF8UU9RgxmEbE3Bi6BOgwfxa7vrgMXXv8_i6ZOuBJ3zGh3cRlFX36BSa9u9P7LTePt-Y1-LMfvPVw17XEZ55X6TMfc2qxOSoZ3m9WFuigUnVz4nYWYBQVfsFWheRJ3toCelObwsKQcYIBO9QdKiR3Q5dnzdGLnjSoa1ce5bohzojd9wJZK_ptiztAtk_VCO6t9VHY-EUj03kz50-eoVYaVI_IlxZDsT6SnMzq-ZcCAwMcg_ASiPI5VGrQlJHIuI",
  "Scope": "openid profile business email"
}
2018-07-31 10:26:48.959 -06:00 [DBG] Augmenting SignInContext
2018-07-31 10:26:48.959 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 10:26:49.041 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-31 10:26:49.041 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-31 10:26:49.041 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-31 10:26:49.042 -06:00 [DBG] Start token request.
2018-07-31 10:26:49.042 -06:00 [DBG] Start client validation
2018-07-31 10:26:49.042 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-31 10:26:49.042 -06:00 [DBG] Start parsing for secret in post body
2018-07-31 10:26:49.042 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-31 10:26:49.042 -06:00 [DBG] Secret id found: ideaBox
2018-07-31 10:26:49.042 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:26:49.042 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-31 10:26:49.042 -06:00 [DBG] Client validation success
2018-07-31 10:26:49.042 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFMUHL6F4M7:00000003",
  "TimeStamp": "2018-07-31T16:26:49Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:26:49.042 -06:00 [DBG] Start token request validation
2018-07-31 10:26:49.042 -06:00 [DBG] Start validation of authorization code token request
2018-07-31 10:26:49.050 -06:00 [DBG] Validation of authorization code token request success
2018-07-31 10:26:49.050 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "2ec737fd5117e42ec3025f47e7f8c44ac796012f6d0cc1e56b718a0fceb57786",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "2ec737fd5117e42ec3025f47e7f8c44ac796012f6d0cc1e56b718a0fceb57786",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-31 10:26:49.050 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:26:49.050 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-31 10:26:49.050 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 10:26:49.064 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:26:49.064 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 10:26:49.064 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 10:26:49.076 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****0HoA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Cs4Q"
    }
  ],
  "ActivityId": "0HLFMUHL6F4M7:00000003",
  "TimeStamp": "2018-07-31T16:26:49Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 10:26:49.076 -06:00 [DBG] Token request success.
2018-07-31 10:26:49.084 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-31 10:26:49.085 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-31 10:26:49.085 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-31 10:26:49.085 -06:00 [DBG] Start userinfo request
2018-07-31 10:26:49.085 -06:00 [DBG] Bearer token found in header
2018-07-31 10:26:49.087 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:26:49.087 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 10:26:49.088 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-31 10:26:49.088 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533054409,
    "exp": 1533058009,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1533054407,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-31 10:26:49.089 -06:00 [DBG] Creating userinfo response
2018-07-31 10:26:49.089 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 10:26:49.089 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 10:26:49.089 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-31 10:26:49.089 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 10:26:49.090 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-31 10:26:49.090 -06:00 [DBG] End userinfo request
2018-07-31 11:09:29.271 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-31 11:09:29.272 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-31 11:09:29.272 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-31 11:09:29.272 -06:00 [DBG] Start discovery request
2018-07-31 11:09:29.390 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-31 11:09:29.390 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-31 11:09:29.390 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-31 11:09:29.391 -06:00 [DBG] Start key discovery request
2018-07-31 11:09:29.469 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-31 11:09:29.469 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-31 11:09:29.470 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-31 11:09:29.470 -06:00 [DBG] Start authorize request
2018-07-31 11:09:29.470 -06:00 [DBG] No user present in authorize request
2018-07-31 11:09:29.470 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 11:09:29.470 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:09:29.470 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 11:09:29.470 -06:00 [DBG] No PKCE used.
2018-07-31 11:09:29.470 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 11:09:29.470 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdVPg3SXNsoU7Zf1J8gxrXjoXHa6NmSurUl7W19lKhauv7U-cVEtKoSDMBOQluwlAhTlrlqsI6ZegxnB6dCsrEy-nn22WorNky0h7c8yQ4u5S4zpM3LlGnokR0cH2HA5XLUS--pF5KowL3q2xJHlIh9rmeZXbvzvPpB4RsP-pyWpxQCsbeAhCR8bqGTHQ-Twk9Jdgf_YGaF58ae2ZX10Vb_ZPO4HrK5xcya42SJrBGvJiUzftr97e58I_6penI89XlLp6sz2LdlUlP6bKhGfbqNsPGGc8A8bUFaBwYPBd0kxKuryZ11nzdJz0Gr_1oGQwhYBIvSAKh6XOS2ms3M0km_bMKeUEln3JcTK6D1qcO_WM9uN14yaU0ibxxF8v3uWmI",
  "Nonce": "636686537694488260.OTIxOGIxMzMtNWZiMi00NmMzLWFhYjUtMGUwYjUyZjYxNDUzMDYzY2RjMWItM2MyOC00Y2ZjLTgxMWUtN2UyYzMxZWU4NzRi",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686537694488260.OTIxOGIxMzMtNWZiMi00NmMzLWFhYjUtMGUwYjUyZjYxNDUzMDYzY2RjMWItM2MyOC00Y2ZjLTgxMWUtN2UyYzMxZWU4NzRi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdVPg3SXNsoU7Zf1J8gxrXjoXHa6NmSurUl7W19lKhauv7U-cVEtKoSDMBOQluwlAhTlrlqsI6ZegxnB6dCsrEy-nn22WorNky0h7c8yQ4u5S4zpM3LlGnokR0cH2HA5XLUS--pF5KowL3q2xJHlIh9rmeZXbvzvPpB4RsP-pyWpxQCsbeAhCR8bqGTHQ-Twk9Jdgf_YGaF58ae2ZX10Vb_ZPO4HrK5xcya42SJrBGvJiUzftr97e58I_6penI89XlLp6sz2LdlUlP6bKhGfbqNsPGGc8A8bUFaBwYPBd0kxKuryZ11nzdJz0Gr_1oGQwhYBIvSAKh6XOS2ms3M0km_bMKeUEln3JcTK6D1qcO_WM9uN14yaU0ibxxF8v3uWmI",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 11:09:29.470 -06:00 [INF] Showing login: User is not authenticated
2018-07-31 11:09:29.472 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 11:09:29.472 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:09:29.472 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 11:09:29.472 -06:00 [DBG] No PKCE used.
2018-07-31 11:09:29.472 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 11:09:29.472 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:09:38.775 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 11:09:38.789 -06:00 [DBG] Augmenting SignInContext
2018-07-31 11:09:38.789 -06:00 [DBG] Adding idp claim with value: local
2018-07-31 11:09:38.789 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-31 11:09:38.789 -06:00 [DBG] Adding auth_time claim with value: 1533056978
2018-07-31 11:09:38.789 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 11:09:38.790 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFMUHL6F4ME:00000003",
  "TimeStamp": "2018-07-31T17:09:38Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 11:09:38.793 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 11:09:38.793 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 11:09:38.793 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 11:09:38.793 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 11:09:38.793 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 11:09:38.793 -06:00 [DBG] Start authorize callback request
2018-07-31 11:09:38.794 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 11:09:38.794 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 11:09:38.794 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:09:38.794 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 11:09:38.794 -06:00 [DBG] No PKCE used.
2018-07-31 11:09:38.794 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 11:09:38.794 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdVPg3SXNsoU7Zf1J8gxrXjoXHa6NmSurUl7W19lKhauv7U-cVEtKoSDMBOQluwlAhTlrlqsI6ZegxnB6dCsrEy-nn22WorNky0h7c8yQ4u5S4zpM3LlGnokR0cH2HA5XLUS--pF5KowL3q2xJHlIh9rmeZXbvzvPpB4RsP-pyWpxQCsbeAhCR8bqGTHQ-Twk9Jdgf_YGaF58ae2ZX10Vb_ZPO4HrK5xcya42SJrBGvJiUzftr97e58I_6penI89XlLp6sz2LdlUlP6bKhGfbqNsPGGc8A8bUFaBwYPBd0kxKuryZ11nzdJz0Gr_1oGQwhYBIvSAKh6XOS2ms3M0km_bMKeUEln3JcTK6D1qcO_WM9uN14yaU0ibxxF8v3uWmI",
  "Nonce": "636686537694488260.OTIxOGIxMzMtNWZiMi00NmMzLWFhYjUtMGUwYjUyZjYxNDUzMDYzY2RjMWItM2MyOC00Y2ZjLTgxMWUtN2UyYzMxZWU4NzRi",
  "SessionId": "6073b045f7d991732066bb34e820c174",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686537694488260.OTIxOGIxMzMtNWZiMi00NmMzLWFhYjUtMGUwYjUyZjYxNDUzMDYzY2RjMWItM2MyOC00Y2ZjLTgxMWUtN2UyYzMxZWU4NzRi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdVPg3SXNsoU7Zf1J8gxrXjoXHa6NmSurUl7W19lKhauv7U-cVEtKoSDMBOQluwlAhTlrlqsI6ZegxnB6dCsrEy-nn22WorNky0h7c8yQ4u5S4zpM3LlGnokR0cH2HA5XLUS--pF5KowL3q2xJHlIh9rmeZXbvzvPpB4RsP-pyWpxQCsbeAhCR8bqGTHQ-Twk9Jdgf_YGaF58ae2ZX10Vb_ZPO4HrK5xcya42SJrBGvJiUzftr97e58I_6penI89XlLp6sz2LdlUlP6bKhGfbqNsPGGc8A8bUFaBwYPBd0kxKuryZ11nzdJz0Gr_1oGQwhYBIvSAKh6XOS2ms3M0km_bMKeUEln3JcTK6D1qcO_WM9uN14yaU0ibxxF8v3uWmI",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 11:09:38.795 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 11:09:38.795 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 11:09:38.795 -06:00 [INF] Showing consent: User has not yet consented
2018-07-31 11:09:38.797 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 11:09:38.797 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 11:09:38.797 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 11:09:38.797 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:09:38.797 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 11:09:38.797 -06:00 [DBG] No PKCE used.
2018-07-31 11:09:38.797 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 11:09:38.798 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:09:42.023 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 11:09:42.023 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 11:09:42.023 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 11:09:42.024 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 11:09:42.024 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:09:42.024 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 11:09:42.024 -06:00 [DBG] No PKCE used.
2018-07-31 11:09:42.024 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 11:09:42.027 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 11:09:42.027 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 11:09:42.027 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 11:09:42.027 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 11:09:42.027 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 11:09:42.027 -06:00 [DBG] Start authorize callback request
2018-07-31 11:09:42.028 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 11:09:42.028 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 11:09:42.028 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:09:42.028 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 11:09:42.028 -06:00 [DBG] No PKCE used.
2018-07-31 11:09:42.028 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 11:09:42.028 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdVPg3SXNsoU7Zf1J8gxrXjoXHa6NmSurUl7W19lKhauv7U-cVEtKoSDMBOQluwlAhTlrlqsI6ZegxnB6dCsrEy-nn22WorNky0h7c8yQ4u5S4zpM3LlGnokR0cH2HA5XLUS--pF5KowL3q2xJHlIh9rmeZXbvzvPpB4RsP-pyWpxQCsbeAhCR8bqGTHQ-Twk9Jdgf_YGaF58ae2ZX10Vb_ZPO4HrK5xcya42SJrBGvJiUzftr97e58I_6penI89XlLp6sz2LdlUlP6bKhGfbqNsPGGc8A8bUFaBwYPBd0kxKuryZ11nzdJz0Gr_1oGQwhYBIvSAKh6XOS2ms3M0km_bMKeUEln3JcTK6D1qcO_WM9uN14yaU0ibxxF8v3uWmI",
  "Nonce": "636686537694488260.OTIxOGIxMzMtNWZiMi00NmMzLWFhYjUtMGUwYjUyZjYxNDUzMDYzY2RjMWItM2MyOC00Y2ZjLTgxMWUtN2UyYzMxZWU4NzRi",
  "SessionId": "6073b045f7d991732066bb34e820c174",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686537694488260.OTIxOGIxMzMtNWZiMi00NmMzLWFhYjUtMGUwYjUyZjYxNDUzMDYzY2RjMWItM2MyOC00Y2ZjLTgxMWUtN2UyYzMxZWU4NzRi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdVPg3SXNsoU7Zf1J8gxrXjoXHa6NmSurUl7W19lKhauv7U-cVEtKoSDMBOQluwlAhTlrlqsI6ZegxnB6dCsrEy-nn22WorNky0h7c8yQ4u5S4zpM3LlGnokR0cH2HA5XLUS--pF5KowL3q2xJHlIh9rmeZXbvzvPpB4RsP-pyWpxQCsbeAhCR8bqGTHQ-Twk9Jdgf_YGaF58ae2ZX10Vb_ZPO4HrK5xcya42SJrBGvJiUzftr97e58I_6penI89XlLp6sz2LdlUlP6bKhGfbqNsPGGc8A8bUFaBwYPBd0kxKuryZ11nzdJz0Gr_1oGQwhYBIvSAKh6XOS2ms3M0km_bMKeUEln3JcTK6D1qcO_WM9uN14yaU0ibxxF8v3uWmI",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 11:09:42.029 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 11:09:42.029 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 11:09:42.029 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-31 11:09:42.029 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 11:09:42.029 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-31 11:09:42.034 -06:00 [DBG] Creating Implicit Flow response.
2018-07-31 11:09:42.034 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 11:09:42.034 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 11:09:42.045 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****z8UQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****381e"
    }
  ],
  "ActivityId": "0HLFMUHL6F4ME:00000007",
  "TimeStamp": "2018-07-31T17:09:42Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 11:09:42.045 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdVPg3SXNsoU7Zf1J8gxrXjoXHa6NmSurUl7W19lKhauv7U-cVEtKoSDMBOQluwlAhTlrlqsI6ZegxnB6dCsrEy-nn22WorNky0h7c8yQ4u5S4zpM3LlGnokR0cH2HA5XLUS--pF5KowL3q2xJHlIh9rmeZXbvzvPpB4RsP-pyWpxQCsbeAhCR8bqGTHQ-Twk9Jdgf_YGaF58ae2ZX10Vb_ZPO4HrK5xcya42SJrBGvJiUzftr97e58I_6penI89XlLp6sz2LdlUlP6bKhGfbqNsPGGc8A8bUFaBwYPBd0kxKuryZ11nzdJz0Gr_1oGQwhYBIvSAKh6XOS2ms3M0km_bMKeUEln3JcTK6D1qcO_WM9uN14yaU0ibxxF8v3uWmI",
  "Scope": "openid profile business email"
}
2018-07-31 11:09:42.046 -06:00 [DBG] Augmenting SignInContext
2018-07-31 11:09:42.046 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 11:09:42.260 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-31 11:09:42.260 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-31 11:09:42.260 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-31 11:09:42.260 -06:00 [DBG] Start token request.
2018-07-31 11:09:42.260 -06:00 [DBG] Start client validation
2018-07-31 11:09:42.260 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-31 11:09:42.260 -06:00 [DBG] Start parsing for secret in post body
2018-07-31 11:09:42.260 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-31 11:09:42.260 -06:00 [DBG] Secret id found: ideaBox
2018-07-31 11:09:42.260 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:09:42.261 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-31 11:09:42.261 -06:00 [DBG] Client validation success
2018-07-31 11:09:42.261 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFMUHL6F4MD:00000003",
  "TimeStamp": "2018-07-31T17:09:42Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 11:09:42.261 -06:00 [DBG] Start token request validation
2018-07-31 11:09:42.261 -06:00 [DBG] Start validation of authorization code token request
2018-07-31 11:09:42.268 -06:00 [DBG] Validation of authorization code token request success
2018-07-31 11:09:42.268 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "4e461c9790ee4f1fc12c10e0a912307ef7c2a6ab4c1aa1913f708b6edc0f381e",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "4e461c9790ee4f1fc12c10e0a912307ef7c2a6ab4c1aa1913f708b6edc0f381e",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-31 11:09:42.268 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:09:42.268 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-31 11:09:42.268 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 11:09:42.282 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:09:42.282 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 11:09:42.282 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 11:09:42.293 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****X9Tg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****d-lA"
    }
  ],
  "ActivityId": "0HLFMUHL6F4MD:00000003",
  "TimeStamp": "2018-07-31T17:09:42Z",
  "ProcessId": 6755,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 11:09:42.293 -06:00 [DBG] Token request success.
2018-07-31 11:09:42.302 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-31 11:09:42.302 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-31 11:09:42.302 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-31 11:09:42.302 -06:00 [DBG] Start userinfo request
2018-07-31 11:09:42.302 -06:00 [DBG] Bearer token found in header
2018-07-31 11:09:42.304 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:09:42.304 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:09:42.305 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-31 11:09:42.305 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533056982,
    "exp": 1533060582,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1533056978,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-31 11:09:42.305 -06:00 [DBG] Creating userinfo response
2018-07-31 11:09:42.306 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 11:09:42.306 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 11:09:42.306 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-31 11:09:42.306 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 11:09:42.307 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-31 11:09:42.307 -06:00 [DBG] End userinfo request
2018-07-31 11:10:19.250 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-31 11:10:19.281 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-31 11:10:19.283 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-31 11:10:19.283 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-31 11:10:19.283 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-31 11:10:19.284 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-31 11:10:42.004 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-07-31 11:10:42.037 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-07-31 11:10:42.040 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-07-31 11:10:42.040 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-07-31 11:10:42.040 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-07-31 11:10:42.040 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-07-31 11:11:15.755 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-07-31 11:11:15.909 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-07-31 11:11:15.909 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-07-31 11:11:15.913 -06:00 [DBG] Start discovery request
2018-07-31 11:11:16.068 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-07-31 11:11:16.069 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-07-31 11:11:16.069 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-07-31 11:11:16.072 -06:00 [DBG] Start key discovery request
2018-07-31 11:11:16.163 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-07-31 11:11:16.165 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-07-31 11:11:16.165 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-07-31 11:11:16.168 -06:00 [DBG] Start authorize request
2018-07-31 11:11:16.184 -06:00 [DBG] No user present in authorize request
2018-07-31 11:11:16.188 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 11:11:16.198 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:11:16.202 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 11:11:16.203 -06:00 [DBG] No PKCE used.
2018-07-31 11:11:16.226 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 11:11:16.237 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfGof0wbWouskTtDypXlc4XJZx9bvtSCLgpgXbQ0gmI_LhTqYHwEvspYwovobNYqIPrJv_ppDzHg7wZOULRO_BJp-ZDBNq4s4G1-H0Z-sGY3nbNnTLuXPBDwzh8TqWW4-HbFgR1-omshgtGEB1_pMTon8ERtsAlag9vFqTedABgehBl6LFBkTFM-s-Ixt5ILZNMMYwp7qfNWh_E63JHs7KSNywHP0SKARZRF0NIo4VykoF85RwB4KjUFFo5GtbkaOiz610Zyp1TgmGC3XQl4jvcqHeCprJq9dNEMPxRX9y04yGluhLN47SzhvqQXLWDIDr8awILT5abScI9iPS1p7kvhq7YHq2Lv6dCs_TWjyV2j_M5cX3MCAo4Q51dP5B0P0w",
  "Nonce": "636686538761403070.MGYzZTQyNTYtNTg1MS00OGZlLTlmYWUtODBkMjNjZjJmYmY0MGI4NjYxNDktZGRhMi00MjBhLWIyMTItYjFmYTUwY2Q2MjQz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686538761403070.MGYzZTQyNTYtNTg1MS00OGZlLTlmYWUtODBkMjNjZjJmYmY0MGI4NjYxNDktZGRhMi00MjBhLWIyMTItYjFmYTUwY2Q2MjQz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfGof0wbWouskTtDypXlc4XJZx9bvtSCLgpgXbQ0gmI_LhTqYHwEvspYwovobNYqIPrJv_ppDzHg7wZOULRO_BJp-ZDBNq4s4G1-H0Z-sGY3nbNnTLuXPBDwzh8TqWW4-HbFgR1-omshgtGEB1_pMTon8ERtsAlag9vFqTedABgehBl6LFBkTFM-s-Ixt5ILZNMMYwp7qfNWh_E63JHs7KSNywHP0SKARZRF0NIo4VykoF85RwB4KjUFFo5GtbkaOiz610Zyp1TgmGC3XQl4jvcqHeCprJq9dNEMPxRX9y04yGluhLN47SzhvqQXLWDIDr8awILT5abScI9iPS1p7kvhq7YHq2Lv6dCs_TWjyV2j_M5cX3MCAo4Q51dP5B0P0w",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 11:11:16.243 -06:00 [INF] Showing login: User is not authenticated
2018-07-31 11:11:16.365 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 11:11:16.366 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:11:16.366 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 11:11:16.366 -06:00 [DBG] No PKCE used.
2018-07-31 11:11:16.366 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 11:11:16.369 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:11:26.353 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 11:11:35.019 -06:00 [DBG] Augmenting SignInContext
2018-07-31 11:11:35.020 -06:00 [DBG] Adding idp claim with value: local
2018-07-31 11:11:35.020 -06:00 [DBG] Adding amr claim with value: pwd
2018-07-31 11:11:35.021 -06:00 [DBG] Adding auth_time claim with value: 1533057095
2018-07-31 11:11:35.051 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 11:12:00.956 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFN1262EP19:00000004",
  "TimeStamp": "2018-07-31T17:12:00Z",
  "ProcessId": 12333,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 11:13:00.425 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 11:13:00.426 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 11:13:00.426 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 11:13:00.426 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 11:13:00.426 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 11:13:00.431 -06:00 [DBG] Start authorize callback request
2018-07-31 11:13:00.434 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 11:13:00.434 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 11:13:00.434 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:13:00.434 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 11:13:00.434 -06:00 [DBG] No PKCE used.
2018-07-31 11:13:00.434 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 11:13:00.435 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfGof0wbWouskTtDypXlc4XJZx9bvtSCLgpgXbQ0gmI_LhTqYHwEvspYwovobNYqIPrJv_ppDzHg7wZOULRO_BJp-ZDBNq4s4G1-H0Z-sGY3nbNnTLuXPBDwzh8TqWW4-HbFgR1-omshgtGEB1_pMTon8ERtsAlag9vFqTedABgehBl6LFBkTFM-s-Ixt5ILZNMMYwp7qfNWh_E63JHs7KSNywHP0SKARZRF0NIo4VykoF85RwB4KjUFFo5GtbkaOiz610Zyp1TgmGC3XQl4jvcqHeCprJq9dNEMPxRX9y04yGluhLN47SzhvqQXLWDIDr8awILT5abScI9iPS1p7kvhq7YHq2Lv6dCs_TWjyV2j_M5cX3MCAo4Q51dP5B0P0w",
  "Nonce": "636686538761403070.MGYzZTQyNTYtNTg1MS00OGZlLTlmYWUtODBkMjNjZjJmYmY0MGI4NjYxNDktZGRhMi00MjBhLWIyMTItYjFmYTUwY2Q2MjQz",
  "SessionId": "33614359b659e25a99bc1de866c87163",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686538761403070.MGYzZTQyNTYtNTg1MS00OGZlLTlmYWUtODBkMjNjZjJmYmY0MGI4NjYxNDktZGRhMi00MjBhLWIyMTItYjFmYTUwY2Q2MjQz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfGof0wbWouskTtDypXlc4XJZx9bvtSCLgpgXbQ0gmI_LhTqYHwEvspYwovobNYqIPrJv_ppDzHg7wZOULRO_BJp-ZDBNq4s4G1-H0Z-sGY3nbNnTLuXPBDwzh8TqWW4-HbFgR1-omshgtGEB1_pMTon8ERtsAlag9vFqTedABgehBl6LFBkTFM-s-Ixt5ILZNMMYwp7qfNWh_E63JHs7KSNywHP0SKARZRF0NIo4VykoF85RwB4KjUFFo5GtbkaOiz610Zyp1TgmGC3XQl4jvcqHeCprJq9dNEMPxRX9y04yGluhLN47SzhvqQXLWDIDr8awILT5abScI9iPS1p7kvhq7YHq2Lv6dCs_TWjyV2j_M5cX3MCAo4Q51dP5B0P0w",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 11:13:00.764 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 11:13:00.764 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 11:13:00.764 -06:00 [INF] Showing consent: User has not yet consented
2018-07-31 11:13:08.439 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 11:13:08.440 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 11:13:26.174 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 11:13:26.174 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:13:26.174 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 11:13:26.174 -06:00 [DBG] No PKCE used.
2018-07-31 11:13:26.174 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 11:13:26.174 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:14:25.014 -06:00 [WRN] Heartbeat took longer than ""00:00:01"" at ""2018-07-31T17:14:18.7841030+00:00"".
2018-07-31 11:14:47.713 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-07-31 11:14:58.703 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 11:14:58.703 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 11:15:26.580 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 11:15:26.580 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:15:26.580 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 11:15:26.580 -06:00 [DBG] No PKCE used.
2018-07-31 11:15:26.580 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 11:15:40.721 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 11:15:40.722 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-07-31 11:15:40.722 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-07-31 11:15:40.722 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-07-31 11:15:40.722 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-07-31 11:15:40.722 -06:00 [DBG] Start authorize callback request
2018-07-31 11:15:40.748 -06:00 [DBG] User in authorize request: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 11:15:40.748 -06:00 [DBG] Start authorize request protocol validation
2018-07-31 11:15:40.748 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:15:40.748 -06:00 [DBG] Checking for PKCE parameters
2018-07-31 11:15:40.748 -06:00 [DBG] No PKCE used.
2018-07-31 11:15:40.748 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-07-31 11:15:40.749 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfGof0wbWouskTtDypXlc4XJZx9bvtSCLgpgXbQ0gmI_LhTqYHwEvspYwovobNYqIPrJv_ppDzHg7wZOULRO_BJp-ZDBNq4s4G1-H0Z-sGY3nbNnTLuXPBDwzh8TqWW4-HbFgR1-omshgtGEB1_pMTon8ERtsAlag9vFqTedABgehBl6LFBkTFM-s-Ixt5ILZNMMYwp7qfNWh_E63JHs7KSNywHP0SKARZRF0NIo4VykoF85RwB4KjUFFo5GtbkaOiz610Zyp1TgmGC3XQl4jvcqHeCprJq9dNEMPxRX9y04yGluhLN47SzhvqQXLWDIDr8awILT5abScI9iPS1p7kvhq7YHq2Lv6dCs_TWjyV2j_M5cX3MCAo4Q51dP5B0P0w",
  "Nonce": "636686538761403070.MGYzZTQyNTYtNTg1MS00OGZlLTlmYWUtODBkMjNjZjJmYmY0MGI4NjYxNDktZGRhMi00MjBhLWIyMTItYjFmYTUwY2Q2MjQz",
  "SessionId": "33614359b659e25a99bc1de866c87163",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636686538761403070.MGYzZTQyNTYtNTg1MS00OGZlLTlmYWUtODBkMjNjZjJmYmY0MGI4NjYxNDktZGRhMi00MjBhLWIyMTItYjFmYTUwY2Q2MjQz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfGof0wbWouskTtDypXlc4XJZx9bvtSCLgpgXbQ0gmI_LhTqYHwEvspYwovobNYqIPrJv_ppDzHg7wZOULRO_BJp-ZDBNq4s4G1-H0Z-sGY3nbNnTLuXPBDwzh8TqWW4-HbFgR1-omshgtGEB1_pMTon8ERtsAlag9vFqTedABgehBl6LFBkTFM-s-Ixt5ILZNMMYwp7qfNWh_E63JHs7KSNywHP0SKARZRF0NIo4VykoF85RwB4KjUFFo5GtbkaOiz610Zyp1TgmGC3XQl4jvcqHeCprJq9dNEMPxRX9y04yGluhLN47SzhvqQXLWDIDr8awILT5abScI9iPS1p7kvhq7YHq2Lv6dCs_TWjyV2j_M5cX3MCAo4Q51dP5B0P0w",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-07-31 11:15:40.750 -06:00 [DBG] user_consent grant with value: ideaBox|2cccfd57-d4e9-4dd3-9c34-76061eb5e71a not found in store.
2018-07-31 11:15:40.750 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-07-31 11:15:40.758 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-07-31 11:15:40.765 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 11:15:40.772 -06:00 [DBG] Creating Hybrid Flow response.
2018-07-31 11:15:40.794 -06:00 [DBG] Creating Implicit Flow response.
2018-07-31 11:15:40.801 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 11:15:40.803 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 11:15:40.896 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****wR4g"
    },
    {
      "TokenType": "code",
      "TokenValue": "****27fb"
    }
  ],
  "ActivityId": "0HLFN1262EP19:00000008",
  "TimeStamp": "2018-07-31T17:15:40Z",
  "ProcessId": 12333,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 11:15:40.898 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfGof0wbWouskTtDypXlc4XJZx9bvtSCLgpgXbQ0gmI_LhTqYHwEvspYwovobNYqIPrJv_ppDzHg7wZOULRO_BJp-ZDBNq4s4G1-H0Z-sGY3nbNnTLuXPBDwzh8TqWW4-HbFgR1-omshgtGEB1_pMTon8ERtsAlag9vFqTedABgehBl6LFBkTFM-s-Ixt5ILZNMMYwp7qfNWh_E63JHs7KSNywHP0SKARZRF0NIo4VykoF85RwB4KjUFFo5GtbkaOiz610Zyp1TgmGC3XQl4jvcqHeCprJq9dNEMPxRX9y04yGluhLN47SzhvqQXLWDIDr8awILT5abScI9iPS1p7kvhq7YHq2Lv6dCs_TWjyV2j_M5cX3MCAo4Q51dP5B0P0w",
  "Scope": "openid profile business email"
}
2018-07-31 11:15:40.913 -06:00 [DBG] Augmenting SignInContext
2018-07-31 11:15:40.913 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-07-31 11:15:41.174 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-07-31 11:15:52.887 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-07-31 11:15:52.888 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-07-31 11:15:52.895 -06:00 [DBG] Start token request.
2018-07-31 11:15:52.900 -06:00 [DBG] Start client validation
2018-07-31 11:15:52.904 -06:00 [DBG] Start parsing Basic Authentication secret
2018-07-31 11:15:52.907 -06:00 [DBG] Start parsing for secret in post body
2018-07-31 11:15:52.909 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-07-31 11:15:52.909 -06:00 [DBG] Secret id found: ideaBox
2018-07-31 11:15:52.909 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:15:52.917 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-07-31 11:15:52.917 -06:00 [DBG] Client validation success
2018-07-31 11:15:52.920 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFN1262EP1B:00000001",
  "TimeStamp": "2018-07-31T17:15:52Z",
  "ProcessId": 12333,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 11:15:52.925 -06:00 [DBG] Start token request validation
2018-07-31 11:15:52.933 -06:00 [DBG] Start validation of authorization code token request
2018-07-31 11:15:52.952 -06:00 [DBG] Validation of authorization code token request success
2018-07-31 11:15:52.956 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "1eb45cb8654ad0c48cc356197f493e31af43ef9a4053314e1bbc5242976e27fb",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "1eb45cb8654ad0c48cc356197f493e31af43ef9a4053314e1bbc5242976e27fb",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-07-31 11:15:52.966 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:15:52.974 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-07-31 11:15:52.975 -06:00 [DBG] Getting claims for access token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a
2018-07-31 11:15:52.994 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:15:52.994 -06:00 [DBG] Getting claims for identity token for subject: 2cccfd57-d4e9-4dd3-9c34-76061eb5e71a and client: ideaBox
2018-07-31 11:15:52.995 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-07-31 11:15:53.007 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****r3uw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****XT2A"
    }
  ],
  "ActivityId": "0HLFN1262EP1B:00000001",
  "TimeStamp": "2018-07-31T17:15:53Z",
  "ProcessId": 12333,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-07-31 11:15:53.008 -06:00 [DBG] Token request success.
2018-07-31 11:15:53.019 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-07-31 11:15:59.754 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-07-31 11:15:59.754 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-07-31 11:15:59.759 -06:00 [DBG] Start userinfo request
2018-07-31 11:15:59.761 -06:00 [DBG] Bearer token found in header
2018-07-31 11:15:59.823 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:15:59.826 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-07-31 11:15:59.828 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-07-31 11:15:59.831 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533057352,
    "exp": 1533060952,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "2cccfd57-d4e9-4dd3-9c34-76061eb5e71a",
    "auth_time": 1533057095,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-07-31 11:15:59.838 -06:00 [DBG] Creating userinfo response
2018-07-31 11:15:59.841 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 11:15:59.843 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 11:15:59.845 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-07-31 11:15:59.845 -06:00 [DBG] Scopes in access token: openid profile business email
2018-07-31 11:15:59.848 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-07-31 11:15:59.848 -06:00 [DBG] End userinfo request
2018-08-01 10:56:31.335 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 10:56:31.369 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 10:56:31.372 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 10:56:31.372 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 10:56:31.372 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 10:56:31.372 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 10:57:03.260 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 10:57:03.294 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 10:57:03.296 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 10:57:03.297 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 10:57:03.297 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 10:57:03.297 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 10:57:05.456 -06:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-08-01 10:57:05.460 -06:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-08-01 10:57:05.460 -06:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-08-01 10:57:05.462 -06:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-08-01 10:57:05.474 -06:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-08-01 10:57:40.274 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 10:57:40.282 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 10:57:40.283 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 10:57:40.286 -06:00 [DBG] Start discovery request
2018-08-01 10:57:40.463 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-01 10:57:40.463 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-01 10:57:40.464 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-01 10:57:40.467 -06:00 [DBG] Start key discovery request
2018-08-01 10:57:40.594 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 10:57:40.597 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 10:57:40.597 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 10:57:40.600 -06:00 [DBG] Start authorize request
2018-08-01 10:57:40.617 -06:00 [DBG] No user present in authorize request
2018-08-01 10:57:40.621 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 10:57:40.633 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 10:57:40.638 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 10:57:40.639 -06:00 [DBG] No PKCE used.
2018-08-01 10:57:40.667 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 10:57:40.678 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcRN1m_IB8pOFFuPxmwcDOMgU6LTIu-Vrjt1Sk6O1mzjC2gCxnY0_8RO5UFGexN57r_N5ZilVksY7BvIPmVQj1v7vXsi1nsj2p42sksfWU9_NrjzDYHqxlFEyWtzzRT58kuCV5Y9TXQbqbMgc5r9np6mneZp0yLydxhzVL5ZFjiDoHBkKIZH3_2qcQ9XTmXI00NhujEA6iOTcDQoLnemdpqKMNHfBhJXGjmYB60ygLV3G3ovv41SR8ifcuXK7GPNkM90UdFs1ma82Rhr3LyTplXun_LfiPrqWdvLjEQdvrMXpoJzd1r3uOPIGat4IDfNgsjtInJu9cxAcu5vezzqGOZ2T_xUlnJRhBFnxQL2AK3l48-AuJjghkaVRKTRUsbaNw",
  "Nonce": "636687394605436180.ZTBmYWE2ODctNWIxOS00YTM2LTlkMzMtOTZlNDJkYjEyYzQ2YmI0MjEzNmQtOGE5MC00YTg3LTlhNzQtY2IwYjhjYmQ1NjMz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687394605436180.ZTBmYWE2ODctNWIxOS00YTM2LTlkMzMtOTZlNDJkYjEyYzQ2YmI0MjEzNmQtOGE5MC00YTg3LTlhNzQtY2IwYjhjYmQ1NjMz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcRN1m_IB8pOFFuPxmwcDOMgU6LTIu-Vrjt1Sk6O1mzjC2gCxnY0_8RO5UFGexN57r_N5ZilVksY7BvIPmVQj1v7vXsi1nsj2p42sksfWU9_NrjzDYHqxlFEyWtzzRT58kuCV5Y9TXQbqbMgc5r9np6mneZp0yLydxhzVL5ZFjiDoHBkKIZH3_2qcQ9XTmXI00NhujEA6iOTcDQoLnemdpqKMNHfBhJXGjmYB60ygLV3G3ovv41SR8ifcuXK7GPNkM90UdFs1ma82Rhr3LyTplXun_LfiPrqWdvLjEQdvrMXpoJzd1r3uOPIGat4IDfNgsjtInJu9cxAcu5vezzqGOZ2T_xUlnJRhBFnxQL2AK3l48-AuJjghkaVRKTRUsbaNw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 10:57:40.687 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 10:57:40.818 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 10:57:40.819 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 10:57:40.819 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 10:57:40.819 -06:00 [DBG] No PKCE used.
2018-08-01 10:57:40.819 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 10:57:40.822 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 10:57:51.789 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 10:57:56.064 -06:00 [DBG] Augmenting SignInContext
2018-08-01 10:57:56.066 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 10:57:56.066 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 10:57:56.066 -06:00 [DBG] Adding auth_time claim with value: 1533142676
2018-08-01 10:57:56.090 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 10:57:58.003 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "5b956e38-6cbc-4af4-92cc-28212af196c6",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNPV7978CA:00000004",
  "TimeStamp": "2018-08-01T16:57:57Z",
  "ProcessId": 36959,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 10:57:58.012 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 10:57:58.013 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 10:57:58.013 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 10:57:58.014 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 10:57:58.014 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 10:57:58.020 -06:00 [DBG] Start authorize callback request
2018-08-01 10:57:58.024 -06:00 [DBG] User in authorize request: 5b956e38-6cbc-4af4-92cc-28212af196c6
2018-08-01 10:57:58.024 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 10:57:58.024 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 10:57:58.024 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 10:57:58.024 -06:00 [DBG] No PKCE used.
2018-08-01 10:57:58.024 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 10:57:58.024 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "5b956e38-6cbc-4af4-92cc-28212af196c6",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcRN1m_IB8pOFFuPxmwcDOMgU6LTIu-Vrjt1Sk6O1mzjC2gCxnY0_8RO5UFGexN57r_N5ZilVksY7BvIPmVQj1v7vXsi1nsj2p42sksfWU9_NrjzDYHqxlFEyWtzzRT58kuCV5Y9TXQbqbMgc5r9np6mneZp0yLydxhzVL5ZFjiDoHBkKIZH3_2qcQ9XTmXI00NhujEA6iOTcDQoLnemdpqKMNHfBhJXGjmYB60ygLV3G3ovv41SR8ifcuXK7GPNkM90UdFs1ma82Rhr3LyTplXun_LfiPrqWdvLjEQdvrMXpoJzd1r3uOPIGat4IDfNgsjtInJu9cxAcu5vezzqGOZ2T_xUlnJRhBFnxQL2AK3l48-AuJjghkaVRKTRUsbaNw",
  "Nonce": "636687394605436180.ZTBmYWE2ODctNWIxOS00YTM2LTlkMzMtOTZlNDJkYjEyYzQ2YmI0MjEzNmQtOGE5MC00YTg3LTlhNzQtY2IwYjhjYmQ1NjMz",
  "SessionId": "1eef7fe4bbbfdacf7a9e3325c380d920",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687394605436180.ZTBmYWE2ODctNWIxOS00YTM2LTlkMzMtOTZlNDJkYjEyYzQ2YmI0MjEzNmQtOGE5MC00YTg3LTlhNzQtY2IwYjhjYmQ1NjMz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcRN1m_IB8pOFFuPxmwcDOMgU6LTIu-Vrjt1Sk6O1mzjC2gCxnY0_8RO5UFGexN57r_N5ZilVksY7BvIPmVQj1v7vXsi1nsj2p42sksfWU9_NrjzDYHqxlFEyWtzzRT58kuCV5Y9TXQbqbMgc5r9np6mneZp0yLydxhzVL5ZFjiDoHBkKIZH3_2qcQ9XTmXI00NhujEA6iOTcDQoLnemdpqKMNHfBhJXGjmYB60ygLV3G3ovv41SR8ifcuXK7GPNkM90UdFs1ma82Rhr3LyTplXun_LfiPrqWdvLjEQdvrMXpoJzd1r3uOPIGat4IDfNgsjtInJu9cxAcu5vezzqGOZ2T_xUlnJRhBFnxQL2AK3l48-AuJjghkaVRKTRUsbaNw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 10:57:58.049 -06:00 [DBG] user_consent grant with value: ideaBox|5b956e38-6cbc-4af4-92cc-28212af196c6 not found in store.
2018-08-01 10:57:58.049 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 10:57:58.049 -06:00 [INF] Showing consent: User has not yet consented
2018-08-01 10:57:58.052 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 10:57:58.052 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 10:57:58.082 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 10:57:58.082 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 10:57:58.082 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 10:57:58.082 -06:00 [DBG] No PKCE used.
2018-08-01 10:57:58.082 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 10:57:58.082 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 10:58:04.801 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 10:58:04.802 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 10:58:04.802 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 10:58:04.826 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 10:58:04.826 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 10:58:04.826 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 10:58:04.826 -06:00 [DBG] No PKCE used.
2018-08-01 10:58:04.826 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 10:58:04.843 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 10:58:04.843 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 10:58:04.843 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 10:58:04.843 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 10:58:04.843 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 10:58:04.843 -06:00 [DBG] Start authorize callback request
2018-08-01 10:58:04.870 -06:00 [DBG] User in authorize request: 5b956e38-6cbc-4af4-92cc-28212af196c6
2018-08-01 10:58:04.870 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 10:58:04.870 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 10:58:04.870 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 10:58:04.870 -06:00 [DBG] No PKCE used.
2018-08-01 10:58:04.871 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 10:58:04.871 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "5b956e38-6cbc-4af4-92cc-28212af196c6",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcRN1m_IB8pOFFuPxmwcDOMgU6LTIu-Vrjt1Sk6O1mzjC2gCxnY0_8RO5UFGexN57r_N5ZilVksY7BvIPmVQj1v7vXsi1nsj2p42sksfWU9_NrjzDYHqxlFEyWtzzRT58kuCV5Y9TXQbqbMgc5r9np6mneZp0yLydxhzVL5ZFjiDoHBkKIZH3_2qcQ9XTmXI00NhujEA6iOTcDQoLnemdpqKMNHfBhJXGjmYB60ygLV3G3ovv41SR8ifcuXK7GPNkM90UdFs1ma82Rhr3LyTplXun_LfiPrqWdvLjEQdvrMXpoJzd1r3uOPIGat4IDfNgsjtInJu9cxAcu5vezzqGOZ2T_xUlnJRhBFnxQL2AK3l48-AuJjghkaVRKTRUsbaNw",
  "Nonce": "636687394605436180.ZTBmYWE2ODctNWIxOS00YTM2LTlkMzMtOTZlNDJkYjEyYzQ2YmI0MjEzNmQtOGE5MC00YTg3LTlhNzQtY2IwYjhjYmQ1NjMz",
  "SessionId": "1eef7fe4bbbfdacf7a9e3325c380d920",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687394605436180.ZTBmYWE2ODctNWIxOS00YTM2LTlkMzMtOTZlNDJkYjEyYzQ2YmI0MjEzNmQtOGE5MC00YTg3LTlhNzQtY2IwYjhjYmQ1NjMz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcRN1m_IB8pOFFuPxmwcDOMgU6LTIu-Vrjt1Sk6O1mzjC2gCxnY0_8RO5UFGexN57r_N5ZilVksY7BvIPmVQj1v7vXsi1nsj2p42sksfWU9_NrjzDYHqxlFEyWtzzRT58kuCV5Y9TXQbqbMgc5r9np6mneZp0yLydxhzVL5ZFjiDoHBkKIZH3_2qcQ9XTmXI00NhujEA6iOTcDQoLnemdpqKMNHfBhJXGjmYB60ygLV3G3ovv41SR8ifcuXK7GPNkM90UdFs1ma82Rhr3LyTplXun_LfiPrqWdvLjEQdvrMXpoJzd1r3uOPIGat4IDfNgsjtInJu9cxAcu5vezzqGOZ2T_xUlnJRhBFnxQL2AK3l48-AuJjghkaVRKTRUsbaNw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 10:58:04.873 -06:00 [DBG] user_consent grant with value: ideaBox|5b956e38-6cbc-4af4-92cc-28212af196c6 not found in store.
2018-08-01 10:58:04.873 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 10:58:04.880 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-08-01 10:58:04.894 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 5b956e38-6cbc-4af4-92cc-28212af196c6
2018-08-01 10:58:04.901 -06:00 [DBG] Creating Hybrid Flow response.
2018-08-01 10:58:04.923 -06:00 [DBG] Creating Implicit Flow response.
2018-08-01 10:58:04.932 -06:00 [DBG] Getting claims for identity token for subject: 5b956e38-6cbc-4af4-92cc-28212af196c6 and client: ideaBox
2018-08-01 10:58:04.934 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 10:58:05.035 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "5b956e38-6cbc-4af4-92cc-28212af196c6",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ka1A"
    },
    {
      "TokenType": "code",
      "TokenValue": "****1112"
    }
  ],
  "ActivityId": "0HLFNPV7978CA:00000008",
  "TimeStamp": "2018-08-01T16:58:05Z",
  "ProcessId": 36959,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 10:58:05.038 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "5b956e38-6cbc-4af4-92cc-28212af196c6",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcRN1m_IB8pOFFuPxmwcDOMgU6LTIu-Vrjt1Sk6O1mzjC2gCxnY0_8RO5UFGexN57r_N5ZilVksY7BvIPmVQj1v7vXsi1nsj2p42sksfWU9_NrjzDYHqxlFEyWtzzRT58kuCV5Y9TXQbqbMgc5r9np6mneZp0yLydxhzVL5ZFjiDoHBkKIZH3_2qcQ9XTmXI00NhujEA6iOTcDQoLnemdpqKMNHfBhJXGjmYB60ygLV3G3ovv41SR8ifcuXK7GPNkM90UdFs1ma82Rhr3LyTplXun_LfiPrqWdvLjEQdvrMXpoJzd1r3uOPIGat4IDfNgsjtInJu9cxAcu5vezzqGOZ2T_xUlnJRhBFnxQL2AK3l48-AuJjghkaVRKTRUsbaNw",
  "Scope": "openid profile business email"
}
2018-08-01 10:58:05.054 -06:00 [DBG] Augmenting SignInContext
2018-08-01 10:58:05.054 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 10:58:05.369 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-08-01 10:58:05.372 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-08-01 10:58:05.372 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-08-01 10:58:05.379 -06:00 [DBG] Start token request.
2018-08-01 10:58:05.384 -06:00 [DBG] Start client validation
2018-08-01 10:58:05.389 -06:00 [DBG] Start parsing Basic Authentication secret
2018-08-01 10:58:05.393 -06:00 [DBG] Start parsing for secret in post body
2018-08-01 10:58:05.396 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-08-01 10:58:05.396 -06:00 [DBG] Secret id found: ideaBox
2018-08-01 10:58:05.396 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 10:58:05.407 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-08-01 10:58:05.407 -06:00 [DBG] Client validation success
2018-08-01 10:58:05.410 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFNPV7978CB:00000003",
  "TimeStamp": "2018-08-01T16:58:05Z",
  "ProcessId": 36959,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 10:58:05.415 -06:00 [DBG] Start token request validation
2018-08-01 10:58:05.427 -06:00 [DBG] Start validation of authorization code token request
2018-08-01 10:58:05.447 -06:00 [DBG] Validation of authorization code token request success
2018-08-01 10:58:05.450 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "177506ea1c40f002f3866d2a08808dece184468ffcd588ed0fb186d1be801112",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "177506ea1c40f002f3866d2a08808dece184468ffcd588ed0fb186d1be801112",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-08-01 10:58:05.465 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 10:58:05.475 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-08-01 10:58:05.475 -06:00 [DBG] Getting claims for access token for subject: 5b956e38-6cbc-4af4-92cc-28212af196c6
2018-08-01 10:58:05.494 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 10:58:05.494 -06:00 [DBG] Getting claims for identity token for subject: 5b956e38-6cbc-4af4-92cc-28212af196c6 and client: ideaBox
2018-08-01 10:58:05.494 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 10:58:05.508 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****RQsg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****y0LA"
    }
  ],
  "ActivityId": "0HLFNPV7978CB:00000003",
  "TimeStamp": "2018-08-01T16:58:05Z",
  "ProcessId": 36959,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 10:58:05.510 -06:00 [DBG] Token request success.
2018-08-01 10:58:05.521 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-01 10:58:05.522 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-01 10:58:05.522 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-01 10:58:05.527 -06:00 [DBG] Start userinfo request
2018-08-01 10:58:05.530 -06:00 [DBG] Bearer token found in header
2018-08-01 10:58:05.594 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 10:58:05.597 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 10:58:05.600 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-01 10:58:05.603 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533142685,
    "exp": 1533146285,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "5b956e38-6cbc-4af4-92cc-28212af196c6",
    "auth_time": 1533142676,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-08-01 10:58:05.609 -06:00 [DBG] Creating userinfo response
2018-08-01 10:58:05.614 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 10:58:05.616 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 10:58:05.619 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-08-01 10:58:05.619 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 10:58:05.621 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-08-01 10:58:05.621 -06:00 [DBG] End userinfo request
2018-08-01 10:59:51.590 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 10:59:51.623 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 10:59:51.625 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 10:59:51.626 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 10:59:51.626 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 10:59:51.626 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 10:59:52.815 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 10:59:52.830 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:13:27.778 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 11:13:27.812 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 11:13:27.814 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 11:13:27.814 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 11:13:27.814 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 11:13:27.815 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 11:13:28.967 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:13:28.982 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:13:57.956 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 11:13:57.960 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 11:13:57.960 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 11:13:57.963 -06:00 [DBG] Start discovery request
2018-08-01 11:13:58.143 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-01 11:13:58.143 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-01 11:13:58.143 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-01 11:13:58.146 -06:00 [DBG] Start key discovery request
2018-08-01 11:13:58.239 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 11:13:58.242 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 11:13:58.242 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 11:13:58.247 -06:00 [DBG] Start authorize request
2018-08-01 11:13:58.264 -06:00 [DBG] No user present in authorize request
2018-08-01 11:13:58.268 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 11:13:58.280 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:13:58.284 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 11:13:58.285 -06:00 [DBG] No PKCE used.
2018-08-01 11:13:58.310 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 11:13:58.321 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebxcx6o4UXVHcp5TAgte-Axb2tGVM3SMDiHY3QZHbPBinEzTLzQ1In53REfEgjFNoHeGiYG8ktxtfxqOqo8wH-MblFvlWbrfebqTPXtzClteUnRU3Qq-LQ-hc3fc88r10TrnChi0RTnIXlFHkd0bDwDUbnTz-u8irXRUOnlYNbMkooGQ1WA34WzZxAi3Mw4ngSytKstvbZNwmm219TzlUt39KAB47wzEYsQSn410WeqzTdHpiMJPns0TxfyCFdJTEZa_ObdyanyDvGXE6Xx4ISu2c5_BYiX5xANkMBZkcOq-cXjj79Q5xwwYyCKsReR9Fq7X2CBlqD-ls7EBZDqBgIH_Hnx1as4crFk9W4isMahwP4MZh7kCZ9uFuebR7jXJk",
  "Nonce": "636687404382179010.MDM1MmRlMGItMTQzZC00MmY3LTlhYWYtYTM2ZjVjYTIwMjM4YjIzZTQyZTgtZTNmYy00MGNhLTkwMWMtMTU0N2E1OWI4ZWMx",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687404382179010.MDM1MmRlMGItMTQzZC00MmY3LTlhYWYtYTM2ZjVjYTIwMjM4YjIzZTQyZTgtZTNmYy00MGNhLTkwMWMtMTU0N2E1OWI4ZWMx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebxcx6o4UXVHcp5TAgte-Axb2tGVM3SMDiHY3QZHbPBinEzTLzQ1In53REfEgjFNoHeGiYG8ktxtfxqOqo8wH-MblFvlWbrfebqTPXtzClteUnRU3Qq-LQ-hc3fc88r10TrnChi0RTnIXlFHkd0bDwDUbnTz-u8irXRUOnlYNbMkooGQ1WA34WzZxAi3Mw4ngSytKstvbZNwmm219TzlUt39KAB47wzEYsQSn410WeqzTdHpiMJPns0TxfyCFdJTEZa_ObdyanyDvGXE6Xx4ISu2c5_BYiX5xANkMBZkcOq-cXjj79Q5xwwYyCKsReR9Fq7X2CBlqD-ls7EBZDqBgIH_Hnx1as4crFk9W4isMahwP4MZh7kCZ9uFuebR7jXJk",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 11:13:58.328 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 11:13:58.462 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 11:13:58.463 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:13:58.463 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 11:13:58.463 -06:00 [DBG] No PKCE used.
2018-08-01 11:13:58.463 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 11:13:58.466 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:14:07.787 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 11:14:12.137 -06:00 [DBG] Augmenting SignInContext
2018-08-01 11:14:12.139 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 11:14:12.139 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 11:14:12.139 -06:00 [DBG] Adding auth_time claim with value: 1533143652
2018-08-01 11:14:12.167 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 11:14:12.210 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "5b956e38-6cbc-4af4-92cc-28212af196c6",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNQ8CMHFMI:00000004",
  "TimeStamp": "2018-08-01T17:14:12Z",
  "ProcessId": 37131,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 11:14:12.219 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:14:12.220 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:14:12.220 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 11:14:12.220 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 11:14:12.220 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 11:14:12.225 -06:00 [DBG] Start authorize callback request
2018-08-01 11:14:12.229 -06:00 [DBG] User in authorize request: 5b956e38-6cbc-4af4-92cc-28212af196c6
2018-08-01 11:14:12.229 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 11:14:12.229 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:14:12.229 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 11:14:12.229 -06:00 [DBG] No PKCE used.
2018-08-01 11:14:12.230 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 11:14:12.230 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "5b956e38-6cbc-4af4-92cc-28212af196c6",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebxcx6o4UXVHcp5TAgte-Axb2tGVM3SMDiHY3QZHbPBinEzTLzQ1In53REfEgjFNoHeGiYG8ktxtfxqOqo8wH-MblFvlWbrfebqTPXtzClteUnRU3Qq-LQ-hc3fc88r10TrnChi0RTnIXlFHkd0bDwDUbnTz-u8irXRUOnlYNbMkooGQ1WA34WzZxAi3Mw4ngSytKstvbZNwmm219TzlUt39KAB47wzEYsQSn410WeqzTdHpiMJPns0TxfyCFdJTEZa_ObdyanyDvGXE6Xx4ISu2c5_BYiX5xANkMBZkcOq-cXjj79Q5xwwYyCKsReR9Fq7X2CBlqD-ls7EBZDqBgIH_Hnx1as4crFk9W4isMahwP4MZh7kCZ9uFuebR7jXJk",
  "Nonce": "636687404382179010.MDM1MmRlMGItMTQzZC00MmY3LTlhYWYtYTM2ZjVjYTIwMjM4YjIzZTQyZTgtZTNmYy00MGNhLTkwMWMtMTU0N2E1OWI4ZWMx",
  "SessionId": "74a6c1b454f11eaf64c670d06469be24",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687404382179010.MDM1MmRlMGItMTQzZC00MmY3LTlhYWYtYTM2ZjVjYTIwMjM4YjIzZTQyZTgtZTNmYy00MGNhLTkwMWMtMTU0N2E1OWI4ZWMx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebxcx6o4UXVHcp5TAgte-Axb2tGVM3SMDiHY3QZHbPBinEzTLzQ1In53REfEgjFNoHeGiYG8ktxtfxqOqo8wH-MblFvlWbrfebqTPXtzClteUnRU3Qq-LQ-hc3fc88r10TrnChi0RTnIXlFHkd0bDwDUbnTz-u8irXRUOnlYNbMkooGQ1WA34WzZxAi3Mw4ngSytKstvbZNwmm219TzlUt39KAB47wzEYsQSn410WeqzTdHpiMJPns0TxfyCFdJTEZa_ObdyanyDvGXE6Xx4ISu2c5_BYiX5xANkMBZkcOq-cXjj79Q5xwwYyCKsReR9Fq7X2CBlqD-ls7EBZDqBgIH_Hnx1as4crFk9W4isMahwP4MZh7kCZ9uFuebR7jXJk",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 11:14:12.270 -06:00 [DBG] user_consent grant with value: ideaBox|5b956e38-6cbc-4af4-92cc-28212af196c6 not found in store.
2018-08-01 11:14:12.270 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 11:14:12.270 -06:00 [INF] Showing consent: User has not yet consented
2018-08-01 11:14:12.273 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:14:12.273 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:14:12.303 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 11:14:12.303 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:14:12.303 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 11:14:12.303 -06:00 [DBG] No PKCE used.
2018-08-01 11:14:12.303 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 11:14:12.303 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:14:17.274 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 11:14:17.274 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:14:17.274 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:14:17.301 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 11:14:17.302 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:14:17.302 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 11:14:17.302 -06:00 [DBG] No PKCE used.
2018-08-01 11:14:17.302 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 11:14:17.318 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:14:17.318 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:14:17.318 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 11:14:17.318 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 11:14:17.318 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 11:14:17.318 -06:00 [DBG] Start authorize callback request
2018-08-01 11:14:17.346 -06:00 [DBG] User in authorize request: 5b956e38-6cbc-4af4-92cc-28212af196c6
2018-08-01 11:14:17.346 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 11:14:17.346 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:14:17.346 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 11:14:17.346 -06:00 [DBG] No PKCE used.
2018-08-01 11:14:17.347 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 11:14:17.347 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "5b956e38-6cbc-4af4-92cc-28212af196c6",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebxcx6o4UXVHcp5TAgte-Axb2tGVM3SMDiHY3QZHbPBinEzTLzQ1In53REfEgjFNoHeGiYG8ktxtfxqOqo8wH-MblFvlWbrfebqTPXtzClteUnRU3Qq-LQ-hc3fc88r10TrnChi0RTnIXlFHkd0bDwDUbnTz-u8irXRUOnlYNbMkooGQ1WA34WzZxAi3Mw4ngSytKstvbZNwmm219TzlUt39KAB47wzEYsQSn410WeqzTdHpiMJPns0TxfyCFdJTEZa_ObdyanyDvGXE6Xx4ISu2c5_BYiX5xANkMBZkcOq-cXjj79Q5xwwYyCKsReR9Fq7X2CBlqD-ls7EBZDqBgIH_Hnx1as4crFk9W4isMahwP4MZh7kCZ9uFuebR7jXJk",
  "Nonce": "636687404382179010.MDM1MmRlMGItMTQzZC00MmY3LTlhYWYtYTM2ZjVjYTIwMjM4YjIzZTQyZTgtZTNmYy00MGNhLTkwMWMtMTU0N2E1OWI4ZWMx",
  "SessionId": "74a6c1b454f11eaf64c670d06469be24",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687404382179010.MDM1MmRlMGItMTQzZC00MmY3LTlhYWYtYTM2ZjVjYTIwMjM4YjIzZTQyZTgtZTNmYy00MGNhLTkwMWMtMTU0N2E1OWI4ZWMx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebxcx6o4UXVHcp5TAgte-Axb2tGVM3SMDiHY3QZHbPBinEzTLzQ1In53REfEgjFNoHeGiYG8ktxtfxqOqo8wH-MblFvlWbrfebqTPXtzClteUnRU3Qq-LQ-hc3fc88r10TrnChi0RTnIXlFHkd0bDwDUbnTz-u8irXRUOnlYNbMkooGQ1WA34WzZxAi3Mw4ngSytKstvbZNwmm219TzlUt39KAB47wzEYsQSn410WeqzTdHpiMJPns0TxfyCFdJTEZa_ObdyanyDvGXE6Xx4ISu2c5_BYiX5xANkMBZkcOq-cXjj79Q5xwwYyCKsReR9Fq7X2CBlqD-ls7EBZDqBgIH_Hnx1as4crFk9W4isMahwP4MZh7kCZ9uFuebR7jXJk",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 11:14:17.348 -06:00 [DBG] user_consent grant with value: ideaBox|5b956e38-6cbc-4af4-92cc-28212af196c6 not found in store.
2018-08-01 11:14:17.348 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 11:14:17.355 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-08-01 11:14:17.366 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 5b956e38-6cbc-4af4-92cc-28212af196c6
2018-08-01 11:14:17.373 -06:00 [DBG] Creating Hybrid Flow response.
2018-08-01 11:14:17.395 -06:00 [DBG] Creating Implicit Flow response.
2018-08-01 11:14:17.403 -06:00 [DBG] Getting claims for identity token for subject: 5b956e38-6cbc-4af4-92cc-28212af196c6 and client: ideaBox
2018-08-01 11:14:17.405 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 11:14:17.501 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "5b956e38-6cbc-4af4-92cc-28212af196c6",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****Ugrg"
    },
    {
      "TokenType": "code",
      "TokenValue": "****d718"
    }
  ],
  "ActivityId": "0HLFNQ8CMHFMI:00000008",
  "TimeStamp": "2018-08-01T17:14:17Z",
  "ProcessId": 37131,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 11:14:17.504 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "5b956e38-6cbc-4af4-92cc-28212af196c6",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebxcx6o4UXVHcp5TAgte-Axb2tGVM3SMDiHY3QZHbPBinEzTLzQ1In53REfEgjFNoHeGiYG8ktxtfxqOqo8wH-MblFvlWbrfebqTPXtzClteUnRU3Qq-LQ-hc3fc88r10TrnChi0RTnIXlFHkd0bDwDUbnTz-u8irXRUOnlYNbMkooGQ1WA34WzZxAi3Mw4ngSytKstvbZNwmm219TzlUt39KAB47wzEYsQSn410WeqzTdHpiMJPns0TxfyCFdJTEZa_ObdyanyDvGXE6Xx4ISu2c5_BYiX5xANkMBZkcOq-cXjj79Q5xwwYyCKsReR9Fq7X2CBlqD-ls7EBZDqBgIH_Hnx1as4crFk9W4isMahwP4MZh7kCZ9uFuebR7jXJk",
  "Scope": "openid profile business email"
}
2018-08-01 11:14:17.519 -06:00 [DBG] Augmenting SignInContext
2018-08-01 11:14:17.519 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 11:14:17.759 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-08-01 11:14:17.761 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-08-01 11:14:17.761 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-08-01 11:14:17.769 -06:00 [DBG] Start token request.
2018-08-01 11:14:17.773 -06:00 [DBG] Start client validation
2018-08-01 11:14:17.779 -06:00 [DBG] Start parsing Basic Authentication secret
2018-08-01 11:14:17.782 -06:00 [DBG] Start parsing for secret in post body
2018-08-01 11:14:17.785 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-08-01 11:14:17.785 -06:00 [DBG] Secret id found: ideaBox
2018-08-01 11:14:17.785 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:14:17.795 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-08-01 11:14:17.795 -06:00 [DBG] Client validation success
2018-08-01 11:14:17.798 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFNQ8CMHFMK:00000003",
  "TimeStamp": "2018-08-01T17:14:17Z",
  "ProcessId": 37131,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 11:14:17.803 -06:00 [DBG] Start token request validation
2018-08-01 11:14:17.814 -06:00 [DBG] Start validation of authorization code token request
2018-08-01 11:14:17.833 -06:00 [DBG] Validation of authorization code token request success
2018-08-01 11:14:17.836 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "bd96547d28dfa9a8ebafd1ccf4e6824e0fa453082fa10d32552cffcef477d718",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "bd96547d28dfa9a8ebafd1ccf4e6824e0fa453082fa10d32552cffcef477d718",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-08-01 11:14:17.847 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:14:17.856 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-08-01 11:14:17.856 -06:00 [DBG] Getting claims for access token for subject: 5b956e38-6cbc-4af4-92cc-28212af196c6
2018-08-01 11:14:17.879 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:14:17.879 -06:00 [DBG] Getting claims for identity token for subject: 5b956e38-6cbc-4af4-92cc-28212af196c6 and client: ideaBox
2018-08-01 11:14:17.879 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 11:14:17.892 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****u_aQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****J8mg"
    }
  ],
  "ActivityId": "0HLFNQ8CMHFMK:00000003",
  "TimeStamp": "2018-08-01T17:14:17Z",
  "ProcessId": 37131,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 11:14:17.893 -06:00 [DBG] Token request success.
2018-08-01 11:14:17.906 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-01 11:14:17.907 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-01 11:14:17.907 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-01 11:14:17.915 -06:00 [DBG] Start userinfo request
2018-08-01 11:14:17.918 -06:00 [DBG] Bearer token found in header
2018-08-01 11:14:17.978 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:14:17.981 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:14:17.983 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-01 11:14:17.986 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533143657,
    "exp": 1533147257,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "5b956e38-6cbc-4af4-92cc-28212af196c6",
    "auth_time": 1533143652,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-08-01 11:14:17.992 -06:00 [DBG] Creating userinfo response
2018-08-01 11:14:17.995 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 11:14:17.997 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 11:14:17.999 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-08-01 11:14:17.999 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 11:14:18.001 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-08-01 11:14:18.002 -06:00 [DBG] End userinfo request
2018-08-01 11:19:19.851 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:19:19.852 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:19:19.852 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 11:19:19.852 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 11:19:19.852 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 11:19:19.852 -06:00 [DBG] Start discovery request
2018-08-01 11:19:44.845 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:19:44.845 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:21:48.354 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 11:21:48.359 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 11:21:48.359 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 11:21:48.359 -06:00 [DBG] Start discovery request
2018-08-01 11:21:48.534 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-01 11:21:48.534 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-01 11:21:48.534 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-01 11:21:48.557 -06:00 [DBG] Start key discovery request
2018-08-01 11:21:48.626 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 11:21:48.626 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 11:21:48.626 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 11:21:48.626 -06:00 [DBG] Start authorize request
2018-08-01 11:21:48.626 -06:00 [DBG] No user present in authorize request
2018-08-01 11:21:48.626 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 11:21:48.626 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:21:48.626 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 11:21:48.626 -06:00 [DBG] No PKCE used.
2018-08-01 11:21:48.627 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 11:21:48.627 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfK5hAYB8AaZ93ewAjLMQRrHhDOqYb4JPuXdEUJgYDv146HzXE7N4i_xhGLb1B8t6Limco_zdeOZ0lJo19v188E6t58lgyFeScsnOkWNOVK4ilpNXJJUuSAPEtfK3n0pEjN0hZa8gIlAU_wuyerepXMiyF6ft4_-ntPpGM_dt8hB2Eh5a2VSKDW4rQ_k274IrwZua90BBX8vTiBX0GsuqCLT2BpiYlQiqiWitdTe2Vi7p_cxk-yXZOHXAOj40VktbV3nn22l3BH0Rn0p1d-WYflLHwl4BBppB9u0BSjYevBbWbXBXXUwhLbdVct9DdV3OvrJNBUiQI07TBzPsMez_C_8sLZ-3mfEtYG259EXyX7kwNXa6tvgq534d13U9qMAU0",
  "Nonce": "636687409086056210.ODVlODMyMDgtZWY4Ni00ZmQwLWFhZmEtMGQ1ZjczNGE0MWZkMjQwNjI3NDMtMzgxZi00NjI3LTlhMWQtNzJmY2NkYWI3NWU3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687409086056210.ODVlODMyMDgtZWY4Ni00ZmQwLWFhZmEtMGQ1ZjczNGE0MWZkMjQwNjI3NDMtMzgxZi00NjI3LTlhMWQtNzJmY2NkYWI3NWU3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfK5hAYB8AaZ93ewAjLMQRrHhDOqYb4JPuXdEUJgYDv146HzXE7N4i_xhGLb1B8t6Limco_zdeOZ0lJo19v188E6t58lgyFeScsnOkWNOVK4ilpNXJJUuSAPEtfK3n0pEjN0hZa8gIlAU_wuyerepXMiyF6ft4_-ntPpGM_dt8hB2Eh5a2VSKDW4rQ_k274IrwZua90BBX8vTiBX0GsuqCLT2BpiYlQiqiWitdTe2Vi7p_cxk-yXZOHXAOj40VktbV3nn22l3BH0Rn0p1d-WYflLHwl4BBppB9u0BSjYevBbWbXBXXUwhLbdVct9DdV3OvrJNBUiQI07TBzPsMez_C_8sLZ-3mfEtYG259EXyX7kwNXa6tvgq534d13U9qMAU0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 11:21:48.627 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 11:21:48.631 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 11:21:48.631 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:21:48.631 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 11:21:48.631 -06:00 [DBG] No PKCE used.
2018-08-01 11:21:48.631 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 11:21:48.631 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:21:57.773 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 11:22:03.912 -06:00 [DBG] Augmenting SignInContext
2018-08-01 11:22:03.912 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 11:22:03.913 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 11:22:03.913 -06:00 [DBG] Adding auth_time claim with value: 1533144123
2018-08-01 11:22:03.913 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 11:22:59.943 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "5b956e38-6cbc-4af4-92cc-28212af196c6",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNQ8CMHFML:00000005",
  "TimeStamp": "2018-08-01T17:22:59Z",
  "ProcessId": 37131,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 11:23:55.904 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:23:55.904 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:23:55.904 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 11:23:55.904 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 11:23:55.904 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 11:23:55.904 -06:00 [DBG] Start authorize callback request
2018-08-01 11:23:55.904 -06:00 [DBG] User in authorize request: 5b956e38-6cbc-4af4-92cc-28212af196c6
2018-08-01 11:23:55.904 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 11:23:55.904 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:23:55.904 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 11:23:55.904 -06:00 [DBG] No PKCE used.
2018-08-01 11:23:55.904 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 11:23:55.905 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "5b956e38-6cbc-4af4-92cc-28212af196c6",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfK5hAYB8AaZ93ewAjLMQRrHhDOqYb4JPuXdEUJgYDv146HzXE7N4i_xhGLb1B8t6Limco_zdeOZ0lJo19v188E6t58lgyFeScsnOkWNOVK4ilpNXJJUuSAPEtfK3n0pEjN0hZa8gIlAU_wuyerepXMiyF6ft4_-ntPpGM_dt8hB2Eh5a2VSKDW4rQ_k274IrwZua90BBX8vTiBX0GsuqCLT2BpiYlQiqiWitdTe2Vi7p_cxk-yXZOHXAOj40VktbV3nn22l3BH0Rn0p1d-WYflLHwl4BBppB9u0BSjYevBbWbXBXXUwhLbdVct9DdV3OvrJNBUiQI07TBzPsMez_C_8sLZ-3mfEtYG259EXyX7kwNXa6tvgq534d13U9qMAU0",
  "Nonce": "636687409086056210.ODVlODMyMDgtZWY4Ni00ZmQwLWFhZmEtMGQ1ZjczNGE0MWZkMjQwNjI3NDMtMzgxZi00NjI3LTlhMWQtNzJmY2NkYWI3NWU3",
  "SessionId": "b52aa471b84f6bb9611f203cf4fb48f1",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687409086056210.ODVlODMyMDgtZWY4Ni00ZmQwLWFhZmEtMGQ1ZjczNGE0MWZkMjQwNjI3NDMtMzgxZi00NjI3LTlhMWQtNzJmY2NkYWI3NWU3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfK5hAYB8AaZ93ewAjLMQRrHhDOqYb4JPuXdEUJgYDv146HzXE7N4i_xhGLb1B8t6Limco_zdeOZ0lJo19v188E6t58lgyFeScsnOkWNOVK4ilpNXJJUuSAPEtfK3n0pEjN0hZa8gIlAU_wuyerepXMiyF6ft4_-ntPpGM_dt8hB2Eh5a2VSKDW4rQ_k274IrwZua90BBX8vTiBX0GsuqCLT2BpiYlQiqiWitdTe2Vi7p_cxk-yXZOHXAOj40VktbV3nn22l3BH0Rn0p1d-WYflLHwl4BBppB9u0BSjYevBbWbXBXXUwhLbdVct9DdV3OvrJNBUiQI07TBzPsMez_C_8sLZ-3mfEtYG259EXyX7kwNXa6tvgq534d13U9qMAU0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 11:23:56.267 -06:00 [DBG] user_consent grant with value: ideaBox|5b956e38-6cbc-4af4-92cc-28212af196c6 not found in store.
2018-08-01 11:23:56.267 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 11:23:56.267 -06:00 [INF] Showing consent: User has not yet consented
2018-08-01 11:24:02.196 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:24:02.197 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:24:10.919 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 11:24:10.919 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:24:10.919 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 11:24:10.919 -06:00 [DBG] No PKCE used.
2018-08-01 11:24:10.920 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 11:24:10.920 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:25:25.000 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 11:25:36.348 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:25:36.348 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:26:01.885 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 11:26:01.886 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:26:01.886 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 11:26:01.886 -06:00 [DBG] No PKCE used.
2018-08-01 11:26:01.886 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 11:26:07.258 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:26:07.258 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:26:07.258 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 11:26:07.258 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 11:26:07.259 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 11:26:07.259 -06:00 [DBG] Start authorize callback request
2018-08-01 11:26:07.259 -06:00 [DBG] User in authorize request: 5b956e38-6cbc-4af4-92cc-28212af196c6
2018-08-01 11:26:07.259 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 11:26:07.259 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:26:07.259 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 11:26:07.259 -06:00 [DBG] No PKCE used.
2018-08-01 11:26:07.259 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 11:26:07.259 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "5b956e38-6cbc-4af4-92cc-28212af196c6",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfK5hAYB8AaZ93ewAjLMQRrHhDOqYb4JPuXdEUJgYDv146HzXE7N4i_xhGLb1B8t6Limco_zdeOZ0lJo19v188E6t58lgyFeScsnOkWNOVK4ilpNXJJUuSAPEtfK3n0pEjN0hZa8gIlAU_wuyerepXMiyF6ft4_-ntPpGM_dt8hB2Eh5a2VSKDW4rQ_k274IrwZua90BBX8vTiBX0GsuqCLT2BpiYlQiqiWitdTe2Vi7p_cxk-yXZOHXAOj40VktbV3nn22l3BH0Rn0p1d-WYflLHwl4BBppB9u0BSjYevBbWbXBXXUwhLbdVct9DdV3OvrJNBUiQI07TBzPsMez_C_8sLZ-3mfEtYG259EXyX7kwNXa6tvgq534d13U9qMAU0",
  "Nonce": "636687409086056210.ODVlODMyMDgtZWY4Ni00ZmQwLWFhZmEtMGQ1ZjczNGE0MWZkMjQwNjI3NDMtMzgxZi00NjI3LTlhMWQtNzJmY2NkYWI3NWU3",
  "SessionId": "b52aa471b84f6bb9611f203cf4fb48f1",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687409086056210.ODVlODMyMDgtZWY4Ni00ZmQwLWFhZmEtMGQ1ZjczNGE0MWZkMjQwNjI3NDMtMzgxZi00NjI3LTlhMWQtNzJmY2NkYWI3NWU3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfK5hAYB8AaZ93ewAjLMQRrHhDOqYb4JPuXdEUJgYDv146HzXE7N4i_xhGLb1B8t6Limco_zdeOZ0lJo19v188E6t58lgyFeScsnOkWNOVK4ilpNXJJUuSAPEtfK3n0pEjN0hZa8gIlAU_wuyerepXMiyF6ft4_-ntPpGM_dt8hB2Eh5a2VSKDW4rQ_k274IrwZua90BBX8vTiBX0GsuqCLT2BpiYlQiqiWitdTe2Vi7p_cxk-yXZOHXAOj40VktbV3nn22l3BH0Rn0p1d-WYflLHwl4BBppB9u0BSjYevBbWbXBXXUwhLbdVct9DdV3OvrJNBUiQI07TBzPsMez_C_8sLZ-3mfEtYG259EXyX7kwNXa6tvgq534d13U9qMAU0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 11:26:07.261 -06:00 [DBG] user_consent grant with value: ideaBox|5b956e38-6cbc-4af4-92cc-28212af196c6 not found in store.
2018-08-01 11:26:07.261 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 11:26:07.261 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-08-01 11:26:07.261 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 5b956e38-6cbc-4af4-92cc-28212af196c6
2018-08-01 11:26:07.261 -06:00 [DBG] Creating Hybrid Flow response.
2018-08-01 11:26:07.267 -06:00 [DBG] Creating Implicit Flow response.
2018-08-01 11:26:07.268 -06:00 [DBG] Getting claims for identity token for subject: 5b956e38-6cbc-4af4-92cc-28212af196c6 and client: ideaBox
2018-08-01 11:26:07.268 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 11:26:07.283 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "5b956e38-6cbc-4af4-92cc-28212af196c6",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****xeug"
    },
    {
      "TokenType": "code",
      "TokenValue": "****de0a"
    }
  ],
  "ActivityId": "0HLFNQ8CMHFML:00000009",
  "TimeStamp": "2018-08-01T17:26:07Z",
  "ProcessId": 37131,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 11:26:07.283 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "5b956e38-6cbc-4af4-92cc-28212af196c6",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfK5hAYB8AaZ93ewAjLMQRrHhDOqYb4JPuXdEUJgYDv146HzXE7N4i_xhGLb1B8t6Limco_zdeOZ0lJo19v188E6t58lgyFeScsnOkWNOVK4ilpNXJJUuSAPEtfK3n0pEjN0hZa8gIlAU_wuyerepXMiyF6ft4_-ntPpGM_dt8hB2Eh5a2VSKDW4rQ_k274IrwZua90BBX8vTiBX0GsuqCLT2BpiYlQiqiWitdTe2Vi7p_cxk-yXZOHXAOj40VktbV3nn22l3BH0Rn0p1d-WYflLHwl4BBppB9u0BSjYevBbWbXBXXUwhLbdVct9DdV3OvrJNBUiQI07TBzPsMez_C_8sLZ-3mfEtYG259EXyX7kwNXa6tvgq534d13U9qMAU0",
  "Scope": "openid profile business email"
}
2018-08-01 11:26:07.284 -06:00 [DBG] Augmenting SignInContext
2018-08-01 11:26:07.284 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 11:26:07.874 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-08-01 11:26:27.578 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-08-01 11:26:27.578 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-08-01 11:26:27.578 -06:00 [DBG] Start token request.
2018-08-01 11:26:27.578 -06:00 [DBG] Start client validation
2018-08-01 11:26:27.578 -06:00 [DBG] Start parsing Basic Authentication secret
2018-08-01 11:26:27.578 -06:00 [DBG] Start parsing for secret in post body
2018-08-01 11:26:27.580 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-08-01 11:26:27.580 -06:00 [DBG] Secret id found: ideaBox
2018-08-01 11:26:27.580 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:26:27.581 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-08-01 11:26:27.581 -06:00 [DBG] Client validation success
2018-08-01 11:26:27.581 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFNQ8CMHFMP:00000001",
  "TimeStamp": "2018-08-01T17:26:27Z",
  "ProcessId": 37131,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 11:26:27.581 -06:00 [DBG] Start token request validation
2018-08-01 11:26:27.581 -06:00 [DBG] Start validation of authorization code token request
2018-08-01 11:26:27.593 -06:00 [DBG] Validation of authorization code token request success
2018-08-01 11:26:27.593 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "3d9c72ee50c4e0e73e769c81c533977fae5219763bfd1ea08a6930b427b0de0a",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "3d9c72ee50c4e0e73e769c81c533977fae5219763bfd1ea08a6930b427b0de0a",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-08-01 11:26:27.593 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:26:27.593 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-08-01 11:26:27.594 -06:00 [DBG] Getting claims for access token for subject: 5b956e38-6cbc-4af4-92cc-28212af196c6
2018-08-01 11:26:27.608 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:26:27.609 -06:00 [DBG] Getting claims for identity token for subject: 5b956e38-6cbc-4af4-92cc-28212af196c6 and client: ideaBox
2018-08-01 11:26:27.609 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 11:26:27.622 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****XSPw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****aF9g"
    }
  ],
  "ActivityId": "0HLFNQ8CMHFMP:00000001",
  "TimeStamp": "2018-08-01T17:26:27Z",
  "ProcessId": 37131,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 11:26:27.622 -06:00 [DBG] Token request success.
2018-08-01 11:26:27.631 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-01 11:26:27.631 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-01 11:26:27.631 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-01 11:26:27.631 -06:00 [DBG] Start userinfo request
2018-08-01 11:26:27.631 -06:00 [DBG] Bearer token found in header
2018-08-01 11:26:27.634 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:26:27.635 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:26:27.637 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-01 11:26:27.637 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533144387,
    "exp": 1533147987,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "5b956e38-6cbc-4af4-92cc-28212af196c6",
    "auth_time": 1533144123,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-08-01 11:26:27.637 -06:00 [DBG] Creating userinfo response
2018-08-01 11:26:27.637 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 11:26:27.637 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 11:26:27.637 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-08-01 11:26:27.637 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 11:26:27.640 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-08-01 11:26:27.640 -06:00 [DBG] End userinfo request
2018-08-01 11:30:34.532 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 11:30:34.564 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 11:30:34.566 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 11:30:34.567 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 11:30:34.567 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 11:30:34.567 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 11:31:04.850 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 11:31:04.886 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 11:31:04.888 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 11:31:04.888 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 11:31:04.889 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 11:31:04.889 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 11:31:06.058 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:31:06.074 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:34:14.389 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 11:34:14.392 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 11:34:14.393 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 11:34:14.396 -06:00 [DBG] Start discovery request
2018-08-01 11:34:14.583 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-01 11:34:14.584 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-01 11:34:14.584 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-01 11:34:14.587 -06:00 [DBG] Start key discovery request
2018-08-01 11:34:14.713 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 11:34:14.716 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 11:34:14.716 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 11:34:14.719 -06:00 [DBG] Start authorize request
2018-08-01 11:34:14.735 -06:00 [DBG] No user present in authorize request
2018-08-01 11:34:14.739 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 11:34:14.751 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:34:14.755 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 11:34:14.756 -06:00 [DBG] No PKCE used.
2018-08-01 11:34:14.786 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 11:34:14.797 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcVVUK5Sqh1QxRh22RYImaxDm9Dhto-rEIJr4z8hot3YbKHZ_lEaspt1Xjkt88x3bVYxeypjndUpdODtmr6tKGuIQdn8Xw3HJrNxGZ8UTv74rNHqST4sICVOQqtJnrgKHeOKw4-xVoj1w2O_6h_E6NBcrMCeWQ_ZuqCvYfuqIPoxur_L0X1OBiPUmE6N99KJEADxqfksE3QNCuAXEgd__oOJwwre82qkjqd5R-iDqoVXRSGwO64jranFvg1_N3uxqy5V6S_xflVELAzjCfOvw-3wTpIMhL7g_Uj-bk8kV0TL1e5GYx6RVY2LywrkGTgv8PsmrtQxCjY_Pzvgds2tta-4hBq9vHmNd3NspUgCWX2Pq5EaNhVxojlc5zWW7_SlH8",
  "Nonce": "636687416546639540.NmRjMTQ0OTEtNzIxZS00MjZhLWI5ZjYtZmFhNmQwYWI2NTIxZjYyMzg3YzAtMGE1MS00ZDUxLWExODYtNzA0ZjgxNTZiODgy",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687416546639540.NmRjMTQ0OTEtNzIxZS00MjZhLWI5ZjYtZmFhNmQwYWI2NTIxZjYyMzg3YzAtMGE1MS00ZDUxLWExODYtNzA0ZjgxNTZiODgy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcVVUK5Sqh1QxRh22RYImaxDm9Dhto-rEIJr4z8hot3YbKHZ_lEaspt1Xjkt88x3bVYxeypjndUpdODtmr6tKGuIQdn8Xw3HJrNxGZ8UTv74rNHqST4sICVOQqtJnrgKHeOKw4-xVoj1w2O_6h_E6NBcrMCeWQ_ZuqCvYfuqIPoxur_L0X1OBiPUmE6N99KJEADxqfksE3QNCuAXEgd__oOJwwre82qkjqd5R-iDqoVXRSGwO64jranFvg1_N3uxqy5V6S_xflVELAzjCfOvw-3wTpIMhL7g_Uj-bk8kV0TL1e5GYx6RVY2LywrkGTgv8PsmrtQxCjY_Pzvgds2tta-4hBq9vHmNd3NspUgCWX2Pq5EaNhVxojlc5zWW7_SlH8",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 11:34:14.805 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 11:34:14.942 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 11:34:14.943 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:34:14.943 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 11:34:14.943 -06:00 [DBG] No PKCE used.
2018-08-01 11:34:14.943 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 11:34:14.947 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:34:23.957 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 11:34:30.073 -06:00 [DBG] Augmenting SignInContext
2018-08-01 11:34:30.074 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 11:34:30.074 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 11:34:30.075 -06:00 [DBG] Adding auth_time claim with value: 1533144870
2018-08-01 11:34:30.102 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 11:34:30.142 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNQI7NPN8O:00000004",
  "TimeStamp": "2018-08-01T17:34:30Z",
  "ProcessId": 37332,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 11:34:30.152 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:34:30.152 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:34:30.152 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 11:34:30.152 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 11:34:30.152 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 11:34:30.157 -06:00 [DBG] Start authorize callback request
2018-08-01 11:34:30.161 -06:00 [DBG] User in authorize request: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 11:34:30.161 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 11:34:30.161 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:34:30.161 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 11:34:30.161 -06:00 [DBG] No PKCE used.
2018-08-01 11:34:30.161 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 11:34:30.161 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcVVUK5Sqh1QxRh22RYImaxDm9Dhto-rEIJr4z8hot3YbKHZ_lEaspt1Xjkt88x3bVYxeypjndUpdODtmr6tKGuIQdn8Xw3HJrNxGZ8UTv74rNHqST4sICVOQqtJnrgKHeOKw4-xVoj1w2O_6h_E6NBcrMCeWQ_ZuqCvYfuqIPoxur_L0X1OBiPUmE6N99KJEADxqfksE3QNCuAXEgd__oOJwwre82qkjqd5R-iDqoVXRSGwO64jranFvg1_N3uxqy5V6S_xflVELAzjCfOvw-3wTpIMhL7g_Uj-bk8kV0TL1e5GYx6RVY2LywrkGTgv8PsmrtQxCjY_Pzvgds2tta-4hBq9vHmNd3NspUgCWX2Pq5EaNhVxojlc5zWW7_SlH8",
  "Nonce": "636687416546639540.NmRjMTQ0OTEtNzIxZS00MjZhLWI5ZjYtZmFhNmQwYWI2NTIxZjYyMzg3YzAtMGE1MS00ZDUxLWExODYtNzA0ZjgxNTZiODgy",
  "SessionId": "d95d788fdf868894854480045331e9f2",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687416546639540.NmRjMTQ0OTEtNzIxZS00MjZhLWI5ZjYtZmFhNmQwYWI2NTIxZjYyMzg3YzAtMGE1MS00ZDUxLWExODYtNzA0ZjgxNTZiODgy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcVVUK5Sqh1QxRh22RYImaxDm9Dhto-rEIJr4z8hot3YbKHZ_lEaspt1Xjkt88x3bVYxeypjndUpdODtmr6tKGuIQdn8Xw3HJrNxGZ8UTv74rNHqST4sICVOQqtJnrgKHeOKw4-xVoj1w2O_6h_E6NBcrMCeWQ_ZuqCvYfuqIPoxur_L0X1OBiPUmE6N99KJEADxqfksE3QNCuAXEgd__oOJwwre82qkjqd5R-iDqoVXRSGwO64jranFvg1_N3uxqy5V6S_xflVELAzjCfOvw-3wTpIMhL7g_Uj-bk8kV0TL1e5GYx6RVY2LywrkGTgv8PsmrtQxCjY_Pzvgds2tta-4hBq9vHmNd3NspUgCWX2Pq5EaNhVxojlc5zWW7_SlH8",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 11:34:30.207 -06:00 [DBG] user_consent grant with value: ideaBox|80029ac6-6e39-48ef-a677-2f32fb737b84 not found in store.
2018-08-01 11:34:30.208 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 11:34:30.208 -06:00 [INF] Showing consent: User has not yet consented
2018-08-01 11:34:30.211 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:34:30.211 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:34:30.239 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 11:34:30.239 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:34:30.239 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 11:34:30.239 -06:00 [DBG] No PKCE used.
2018-08-01 11:34:30.240 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 11:34:30.240 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:34:37.413 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 11:34:37.413 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:34:37.413 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:34:37.441 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 11:34:37.441 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:34:37.441 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 11:34:37.441 -06:00 [DBG] No PKCE used.
2018-08-01 11:34:37.441 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 11:34:37.457 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:34:37.457 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 11:34:37.457 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 11:34:37.457 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 11:34:37.457 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 11:34:37.457 -06:00 [DBG] Start authorize callback request
2018-08-01 11:34:37.485 -06:00 [DBG] User in authorize request: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 11:34:37.485 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 11:34:37.485 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:34:37.485 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 11:34:37.485 -06:00 [DBG] No PKCE used.
2018-08-01 11:34:37.485 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 11:34:37.485 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcVVUK5Sqh1QxRh22RYImaxDm9Dhto-rEIJr4z8hot3YbKHZ_lEaspt1Xjkt88x3bVYxeypjndUpdODtmr6tKGuIQdn8Xw3HJrNxGZ8UTv74rNHqST4sICVOQqtJnrgKHeOKw4-xVoj1w2O_6h_E6NBcrMCeWQ_ZuqCvYfuqIPoxur_L0X1OBiPUmE6N99KJEADxqfksE3QNCuAXEgd__oOJwwre82qkjqd5R-iDqoVXRSGwO64jranFvg1_N3uxqy5V6S_xflVELAzjCfOvw-3wTpIMhL7g_Uj-bk8kV0TL1e5GYx6RVY2LywrkGTgv8PsmrtQxCjY_Pzvgds2tta-4hBq9vHmNd3NspUgCWX2Pq5EaNhVxojlc5zWW7_SlH8",
  "Nonce": "636687416546639540.NmRjMTQ0OTEtNzIxZS00MjZhLWI5ZjYtZmFhNmQwYWI2NTIxZjYyMzg3YzAtMGE1MS00ZDUxLWExODYtNzA0ZjgxNTZiODgy",
  "SessionId": "d95d788fdf868894854480045331e9f2",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687416546639540.NmRjMTQ0OTEtNzIxZS00MjZhLWI5ZjYtZmFhNmQwYWI2NTIxZjYyMzg3YzAtMGE1MS00ZDUxLWExODYtNzA0ZjgxNTZiODgy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcVVUK5Sqh1QxRh22RYImaxDm9Dhto-rEIJr4z8hot3YbKHZ_lEaspt1Xjkt88x3bVYxeypjndUpdODtmr6tKGuIQdn8Xw3HJrNxGZ8UTv74rNHqST4sICVOQqtJnrgKHeOKw4-xVoj1w2O_6h_E6NBcrMCeWQ_ZuqCvYfuqIPoxur_L0X1OBiPUmE6N99KJEADxqfksE3QNCuAXEgd__oOJwwre82qkjqd5R-iDqoVXRSGwO64jranFvg1_N3uxqy5V6S_xflVELAzjCfOvw-3wTpIMhL7g_Uj-bk8kV0TL1e5GYx6RVY2LywrkGTgv8PsmrtQxCjY_Pzvgds2tta-4hBq9vHmNd3NspUgCWX2Pq5EaNhVxojlc5zWW7_SlH8",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 11:34:37.488 -06:00 [DBG] user_consent grant with value: ideaBox|80029ac6-6e39-48ef-a677-2f32fb737b84 not found in store.
2018-08-01 11:34:37.488 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 11:34:37.497 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-08-01 11:34:37.508 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 11:34:37.515 -06:00 [DBG] Creating Hybrid Flow response.
2018-08-01 11:34:37.537 -06:00 [DBG] Creating Implicit Flow response.
2018-08-01 11:34:37.545 -06:00 [DBG] Getting claims for identity token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84 and client: ideaBox
2018-08-01 11:34:37.547 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 11:34:37.645 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****HLDw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****45f3"
    }
  ],
  "ActivityId": "0HLFNQI7NPN8O:00000008",
  "TimeStamp": "2018-08-01T17:34:37Z",
  "ProcessId": 37332,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 11:34:37.647 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcVVUK5Sqh1QxRh22RYImaxDm9Dhto-rEIJr4z8hot3YbKHZ_lEaspt1Xjkt88x3bVYxeypjndUpdODtmr6tKGuIQdn8Xw3HJrNxGZ8UTv74rNHqST4sICVOQqtJnrgKHeOKw4-xVoj1w2O_6h_E6NBcrMCeWQ_ZuqCvYfuqIPoxur_L0X1OBiPUmE6N99KJEADxqfksE3QNCuAXEgd__oOJwwre82qkjqd5R-iDqoVXRSGwO64jranFvg1_N3uxqy5V6S_xflVELAzjCfOvw-3wTpIMhL7g_Uj-bk8kV0TL1e5GYx6RVY2LywrkGTgv8PsmrtQxCjY_Pzvgds2tta-4hBq9vHmNd3NspUgCWX2Pq5EaNhVxojlc5zWW7_SlH8",
  "Scope": "openid profile business email"
}
2018-08-01 11:34:37.663 -06:00 [DBG] Augmenting SignInContext
2018-08-01 11:34:37.663 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 11:34:37.792 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-08-01 11:34:37.794 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-08-01 11:34:37.794 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-08-01 11:34:37.801 -06:00 [DBG] Start token request.
2018-08-01 11:34:37.808 -06:00 [DBG] Start client validation
2018-08-01 11:34:37.814 -06:00 [DBG] Start parsing Basic Authentication secret
2018-08-01 11:34:37.818 -06:00 [DBG] Start parsing for secret in post body
2018-08-01 11:34:37.822 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-08-01 11:34:37.822 -06:00 [DBG] Secret id found: ideaBox
2018-08-01 11:34:37.822 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:34:37.829 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-08-01 11:34:37.830 -06:00 [DBG] Client validation success
2018-08-01 11:34:37.833 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFNQI7NPN8P:00000003",
  "TimeStamp": "2018-08-01T17:34:37Z",
  "ProcessId": 37332,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 11:34:37.839 -06:00 [DBG] Start token request validation
2018-08-01 11:34:37.848 -06:00 [DBG] Start validation of authorization code token request
2018-08-01 11:34:37.866 -06:00 [DBG] Validation of authorization code token request success
2018-08-01 11:34:37.869 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "8ae8b37c9cf3cf8d92e878dabc32da16b5ebd39e2842970131548886bfd645f3",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "8ae8b37c9cf3cf8d92e878dabc32da16b5ebd39e2842970131548886bfd645f3",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-08-01 11:34:37.881 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:34:37.893 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-08-01 11:34:37.894 -06:00 [DBG] Getting claims for access token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 11:34:37.913 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:34:37.916 -06:00 [DBG] Getting claims for identity token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84 and client: ideaBox
2018-08-01 11:34:37.916 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 11:34:37.930 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****2D-g"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****icYQ"
    }
  ],
  "ActivityId": "0HLFNQI7NPN8P:00000003",
  "TimeStamp": "2018-08-01T17:34:37Z",
  "ProcessId": 37332,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 11:34:37.931 -06:00 [DBG] Token request success.
2018-08-01 11:34:37.944 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-01 11:34:37.945 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-01 11:34:37.945 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-01 11:34:37.951 -06:00 [DBG] Start userinfo request
2018-08-01 11:34:37.955 -06:00 [DBG] Bearer token found in header
2018-08-01 11:34:38.021 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:34:38.023 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 11:34:38.025 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-01 11:34:38.027 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533144877,
    "exp": 1533148477,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "80029ac6-6e39-48ef-a677-2f32fb737b84",
    "auth_time": 1533144870,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-08-01 11:34:38.033 -06:00 [DBG] Creating userinfo response
2018-08-01 11:34:38.036 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 11:34:38.039 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 11:34:38.041 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-08-01 11:34:38.042 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 11:34:38.044 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-08-01 11:34:38.044 -06:00 [DBG] End userinfo request
2018-08-01 14:04:14.268 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 14:04:14.300 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 14:04:14.302 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 14:04:14.303 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 14:04:14.303 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 14:04:14.303 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 14:04:16.540 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:04:16.556 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:05:15.994 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 14:05:15.998 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 14:05:15.998 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 14:05:16.001 -06:00 [DBG] Start discovery request
2018-08-01 14:05:16.170 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-01 14:05:16.170 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-01 14:05:16.170 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-01 14:05:16.173 -06:00 [DBG] Start key discovery request
2018-08-01 14:05:16.308 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 14:05:16.311 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 14:05:16.311 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 14:05:16.314 -06:00 [DBG] Start authorize request
2018-08-01 14:05:16.329 -06:00 [DBG] No user present in authorize request
2018-08-01 14:05:16.333 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:05:16.344 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:05:16.348 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:05:16.349 -06:00 [DBG] No PKCE used.
2018-08-01 14:05:16.375 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:05:16.385 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeGX0RzbNwGcH0fnNV2auzylDyYr6Ey9jef-z0BYDz_jSogjok6vMiDHaZvy8mcIPPCSfcteG8gnIr-D14l4Em8plaYh9_gVwu3t0Vf3o2eYMO1Myi0Sz2byBmADCoIVTKGvEYv5EC6XaNLcRXUR-SWSonBWUJ-r-8onlaZg99WvMkpvGwyMg50iYl9EZ_q_DetDMx_YiRTfAYeCqB_a6iiGTs5-bYvs-7QdVoosHOMdg2IysiZ8duP5TSAQ5y15t5wqMQzRaqThRFkSLP60iJ_2xXzTtHdifB08ZWEQOVU-PT09cDGXCH95ED1sKtkD62YVVNEgjZqG5u5NUP-Nyl1v6w7zLurkXV-nL-tnE4IxUfcbsTjispZiKF05XdShRY",
  "Nonce": "636687507162526120.YzViZGQ1NmEtZjU3ZC00OTU2LWE4ZWQtZjMyYjc4NjcwMmU4OTFlOWJmMzQtYTNlMy00ZmU3LWE2NmQtMTIxYmZlM2RiODJl",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687507162526120.YzViZGQ1NmEtZjU3ZC00OTU2LWE4ZWQtZjMyYjc4NjcwMmU4OTFlOWJmMzQtYTNlMy00ZmU3LWE2NmQtMTIxYmZlM2RiODJl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeGX0RzbNwGcH0fnNV2auzylDyYr6Ey9jef-z0BYDz_jSogjok6vMiDHaZvy8mcIPPCSfcteG8gnIr-D14l4Em8plaYh9_gVwu3t0Vf3o2eYMO1Myi0Sz2byBmADCoIVTKGvEYv5EC6XaNLcRXUR-SWSonBWUJ-r-8onlaZg99WvMkpvGwyMg50iYl9EZ_q_DetDMx_YiRTfAYeCqB_a6iiGTs5-bYvs-7QdVoosHOMdg2IysiZ8duP5TSAQ5y15t5wqMQzRaqThRFkSLP60iJ_2xXzTtHdifB08ZWEQOVU-PT09cDGXCH95ED1sKtkD62YVVNEgjZqG5u5NUP-Nyl1v6w7zLurkXV-nL-tnE4IxUfcbsTjispZiKF05XdShRY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:05:16.391 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 14:05:16.507 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:05:16.508 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:05:16.508 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:05:16.508 -06:00 [DBG] No PKCE used.
2018-08-01 14:05:16.509 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:05:16.511 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:05:27.005 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 14:05:31.500 -06:00 [DBG] Augmenting SignInContext
2018-08-01 14:05:31.501 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 14:05:31.501 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 14:05:31.502 -06:00 [DBG] Adding auth_time claim with value: 1533153931
2018-08-01 14:05:31.517 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 14:05:31.553 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNT7QC8CV7:00000004",
  "TimeStamp": "2018-08-01T20:05:31Z",
  "ProcessId": 37898,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:05:31.561 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:05:31.561 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:05:31.561 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 14:05:31.562 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 14:05:31.562 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 14:05:31.567 -06:00 [DBG] Start authorize callback request
2018-08-01 14:05:31.570 -06:00 [DBG] User in authorize request: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:05:31.570 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:05:31.570 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:05:31.570 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:05:31.570 -06:00 [DBG] No PKCE used.
2018-08-01 14:05:31.571 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:05:31.571 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeGX0RzbNwGcH0fnNV2auzylDyYr6Ey9jef-z0BYDz_jSogjok6vMiDHaZvy8mcIPPCSfcteG8gnIr-D14l4Em8plaYh9_gVwu3t0Vf3o2eYMO1Myi0Sz2byBmADCoIVTKGvEYv5EC6XaNLcRXUR-SWSonBWUJ-r-8onlaZg99WvMkpvGwyMg50iYl9EZ_q_DetDMx_YiRTfAYeCqB_a6iiGTs5-bYvs-7QdVoosHOMdg2IysiZ8duP5TSAQ5y15t5wqMQzRaqThRFkSLP60iJ_2xXzTtHdifB08ZWEQOVU-PT09cDGXCH95ED1sKtkD62YVVNEgjZqG5u5NUP-Nyl1v6w7zLurkXV-nL-tnE4IxUfcbsTjispZiKF05XdShRY",
  "Nonce": "636687507162526120.YzViZGQ1NmEtZjU3ZC00OTU2LWE4ZWQtZjMyYjc4NjcwMmU4OTFlOWJmMzQtYTNlMy00ZmU3LWE2NmQtMTIxYmZlM2RiODJl",
  "SessionId": "cbf21539a9f9165afb24352606f5f2ad",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687507162526120.YzViZGQ1NmEtZjU3ZC00OTU2LWE4ZWQtZjMyYjc4NjcwMmU4OTFlOWJmMzQtYTNlMy00ZmU3LWE2NmQtMTIxYmZlM2RiODJl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeGX0RzbNwGcH0fnNV2auzylDyYr6Ey9jef-z0BYDz_jSogjok6vMiDHaZvy8mcIPPCSfcteG8gnIr-D14l4Em8plaYh9_gVwu3t0Vf3o2eYMO1Myi0Sz2byBmADCoIVTKGvEYv5EC6XaNLcRXUR-SWSonBWUJ-r-8onlaZg99WvMkpvGwyMg50iYl9EZ_q_DetDMx_YiRTfAYeCqB_a6iiGTs5-bYvs-7QdVoosHOMdg2IysiZ8duP5TSAQ5y15t5wqMQzRaqThRFkSLP60iJ_2xXzTtHdifB08ZWEQOVU-PT09cDGXCH95ED1sKtkD62YVVNEgjZqG5u5NUP-Nyl1v6w7zLurkXV-nL-tnE4IxUfcbsTjispZiKF05XdShRY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:05:31.587 -06:00 [DBG] user_consent grant with value: ideaBox|80029ac6-6e39-48ef-a677-2f32fb737b84 not found in store.
2018-08-01 14:05:31.587 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 14:05:31.587 -06:00 [INF] Showing consent: User has not yet consented
2018-08-01 14:05:31.590 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:05:31.590 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:05:31.619 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:05:31.619 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:05:31.619 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:05:31.619 -06:00 [DBG] No PKCE used.
2018-08-01 14:05:31.619 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:05:31.619 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:05:36.266 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 14:05:36.267 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:05:36.267 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:05:36.291 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:05:36.291 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:05:36.291 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:05:36.291 -06:00 [DBG] No PKCE used.
2018-08-01 14:05:36.291 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:05:36.307 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:05:36.307 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:05:36.307 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 14:05:36.307 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 14:05:36.307 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 14:05:36.307 -06:00 [DBG] Start authorize callback request
2018-08-01 14:05:36.334 -06:00 [DBG] User in authorize request: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:05:36.334 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:05:36.334 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:05:36.334 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:05:36.334 -06:00 [DBG] No PKCE used.
2018-08-01 14:05:36.334 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:05:36.334 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeGX0RzbNwGcH0fnNV2auzylDyYr6Ey9jef-z0BYDz_jSogjok6vMiDHaZvy8mcIPPCSfcteG8gnIr-D14l4Em8plaYh9_gVwu3t0Vf3o2eYMO1Myi0Sz2byBmADCoIVTKGvEYv5EC6XaNLcRXUR-SWSonBWUJ-r-8onlaZg99WvMkpvGwyMg50iYl9EZ_q_DetDMx_YiRTfAYeCqB_a6iiGTs5-bYvs-7QdVoosHOMdg2IysiZ8duP5TSAQ5y15t5wqMQzRaqThRFkSLP60iJ_2xXzTtHdifB08ZWEQOVU-PT09cDGXCH95ED1sKtkD62YVVNEgjZqG5u5NUP-Nyl1v6w7zLurkXV-nL-tnE4IxUfcbsTjispZiKF05XdShRY",
  "Nonce": "636687507162526120.YzViZGQ1NmEtZjU3ZC00OTU2LWE4ZWQtZjMyYjc4NjcwMmU4OTFlOWJmMzQtYTNlMy00ZmU3LWE2NmQtMTIxYmZlM2RiODJl",
  "SessionId": "cbf21539a9f9165afb24352606f5f2ad",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687507162526120.YzViZGQ1NmEtZjU3ZC00OTU2LWE4ZWQtZjMyYjc4NjcwMmU4OTFlOWJmMzQtYTNlMy00ZmU3LWE2NmQtMTIxYmZlM2RiODJl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeGX0RzbNwGcH0fnNV2auzylDyYr6Ey9jef-z0BYDz_jSogjok6vMiDHaZvy8mcIPPCSfcteG8gnIr-D14l4Em8plaYh9_gVwu3t0Vf3o2eYMO1Myi0Sz2byBmADCoIVTKGvEYv5EC6XaNLcRXUR-SWSonBWUJ-r-8onlaZg99WvMkpvGwyMg50iYl9EZ_q_DetDMx_YiRTfAYeCqB_a6iiGTs5-bYvs-7QdVoosHOMdg2IysiZ8duP5TSAQ5y15t5wqMQzRaqThRFkSLP60iJ_2xXzTtHdifB08ZWEQOVU-PT09cDGXCH95ED1sKtkD62YVVNEgjZqG5u5NUP-Nyl1v6w7zLurkXV-nL-tnE4IxUfcbsTjispZiKF05XdShRY",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:05:36.335 -06:00 [DBG] user_consent grant with value: ideaBox|80029ac6-6e39-48ef-a677-2f32fb737b84 not found in store.
2018-08-01 14:05:36.335 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 14:05:36.342 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-08-01 14:05:36.356 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:05:36.364 -06:00 [DBG] Creating Hybrid Flow response.
2018-08-01 14:05:36.384 -06:00 [DBG] Creating Implicit Flow response.
2018-08-01 14:05:36.393 -06:00 [DBG] Getting claims for identity token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84 and client: ideaBox
2018-08-01 14:05:36.394 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 14:05:36.493 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****tMeA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****594c"
    }
  ],
  "ActivityId": "0HLFNT7QC8CV7:00000008",
  "TimeStamp": "2018-08-01T20:05:36Z",
  "ProcessId": 37898,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:05:36.496 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeGX0RzbNwGcH0fnNV2auzylDyYr6Ey9jef-z0BYDz_jSogjok6vMiDHaZvy8mcIPPCSfcteG8gnIr-D14l4Em8plaYh9_gVwu3t0Vf3o2eYMO1Myi0Sz2byBmADCoIVTKGvEYv5EC6XaNLcRXUR-SWSonBWUJ-r-8onlaZg99WvMkpvGwyMg50iYl9EZ_q_DetDMx_YiRTfAYeCqB_a6iiGTs5-bYvs-7QdVoosHOMdg2IysiZ8duP5TSAQ5y15t5wqMQzRaqThRFkSLP60iJ_2xXzTtHdifB08ZWEQOVU-PT09cDGXCH95ED1sKtkD62YVVNEgjZqG5u5NUP-Nyl1v6w7zLurkXV-nL-tnE4IxUfcbsTjispZiKF05XdShRY",
  "Scope": "openid profile business email"
}
2018-08-01 14:05:36.512 -06:00 [DBG] Augmenting SignInContext
2018-08-01 14:05:36.512 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 14:05:36.815 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-08-01 14:05:36.818 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-08-01 14:05:36.818 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-08-01 14:05:36.825 -06:00 [DBG] Start token request.
2018-08-01 14:05:36.832 -06:00 [DBG] Start client validation
2018-08-01 14:05:36.837 -06:00 [DBG] Start parsing Basic Authentication secret
2018-08-01 14:05:36.840 -06:00 [DBG] Start parsing for secret in post body
2018-08-01 14:05:36.842 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-08-01 14:05:36.842 -06:00 [DBG] Secret id found: ideaBox
2018-08-01 14:05:36.842 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:05:36.850 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-08-01 14:05:36.850 -06:00 [DBG] Client validation success
2018-08-01 14:05:36.853 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFNT7QC8CV8:00000003",
  "TimeStamp": "2018-08-01T20:05:36Z",
  "ProcessId": 37898,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:05:36.858 -06:00 [DBG] Start token request validation
2018-08-01 14:05:36.868 -06:00 [DBG] Start validation of authorization code token request
2018-08-01 14:05:36.888 -06:00 [DBG] Validation of authorization code token request success
2018-08-01 14:05:36.891 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "6be8fd1d7a16f3e83b7e1782f06ff117093a67c6d64251664395e0c5f80c594c",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "6be8fd1d7a16f3e83b7e1782f06ff117093a67c6d64251664395e0c5f80c594c",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-08-01 14:05:36.903 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:05:36.912 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-08-01 14:05:36.913 -06:00 [DBG] Getting claims for access token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:05:36.932 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:05:36.933 -06:00 [DBG] Getting claims for identity token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84 and client: ideaBox
2018-08-01 14:05:36.933 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 14:05:36.946 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****WUJQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****jfBQ"
    }
  ],
  "ActivityId": "0HLFNT7QC8CV8:00000003",
  "TimeStamp": "2018-08-01T20:05:36Z",
  "ProcessId": 37898,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:05:36.947 -06:00 [DBG] Token request success.
2018-08-01 14:05:36.957 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-01 14:05:36.958 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-01 14:05:36.958 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-01 14:05:36.964 -06:00 [DBG] Start userinfo request
2018-08-01 14:05:36.966 -06:00 [DBG] Bearer token found in header
2018-08-01 14:05:37.028 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:05:37.031 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:05:37.032 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-01 14:05:37.035 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533153936,
    "exp": 1533157536,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "80029ac6-6e39-48ef-a677-2f32fb737b84",
    "auth_time": 1533153931,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-08-01 14:05:37.040 -06:00 [DBG] Creating userinfo response
2018-08-01 14:05:37.043 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 14:05:37.045 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 14:05:37.047 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-08-01 14:05:37.047 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 14:05:37.049 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-08-01 14:05:37.050 -06:00 [DBG] End userinfo request
2018-08-01 14:09:09.953 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 14:09:09.997 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 14:09:09.997 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 14:09:09.997 -06:00 [DBG] Start discovery request
2018-08-01 14:09:10.110 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-01 14:09:10.110 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-01 14:09:10.110 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-01 14:09:10.110 -06:00 [DBG] Start key discovery request
2018-08-01 14:09:10.193 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 14:09:10.193 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 14:09:10.193 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 14:09:10.193 -06:00 [DBG] Start authorize request
2018-08-01 14:09:10.193 -06:00 [DBG] No user present in authorize request
2018-08-01 14:09:10.193 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:09:10.193 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:09:10.193 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:09:10.193 -06:00 [DBG] No PKCE used.
2018-08-01 14:09:10.193 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:09:10.194 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe7ph3CKbv0sBOYJoY8UuDZ47VM-apRwjbkTW9dw4nlNL2UHj6sXlPta_4QwdG5dB6fjxQdj45pajczPNpymjfjmT6lOBr56gMupSxkmzgLClmcmOcWoyEOqgwpu06sEGYd8ATKR4RqeI65aOCT6nJJXF3tjHqZPFiO29BQZHOZqHpkOPm0i3WVaMNwoXvIpszTXkcZWQOdcnPoO8Xa9hxWE1vaaNLNlvcN5FJjaIFD89EINRiV9iUCqgP9gORgkHfRwWhvy5OYT-WErqlul_WSNFGbsJH5YjAEldJsFmotRb6gI8cE-HmOOMvflC83cbz_vPRm-HeUGlAn9xWMkeeZ9muCaRg5XLlzBSA5VYrq8Dg4Td0eVSpJ7rfTUZKD43M",
  "Nonce": "636687509501719970.NGJkNThiZmQtMTk1Ni00Njc3LTk3MzAtNjJjZDg2YTdhOWEyMzY1MWEwNTctNmEzNy00YzNkLWIyMDAtMTg0N2Q4MmZjMTIx",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687509501719970.NGJkNThiZmQtMTk1Ni00Njc3LTk3MzAtNjJjZDg2YTdhOWEyMzY1MWEwNTctNmEzNy00YzNkLWIyMDAtMTg0N2Q4MmZjMTIx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe7ph3CKbv0sBOYJoY8UuDZ47VM-apRwjbkTW9dw4nlNL2UHj6sXlPta_4QwdG5dB6fjxQdj45pajczPNpymjfjmT6lOBr56gMupSxkmzgLClmcmOcWoyEOqgwpu06sEGYd8ATKR4RqeI65aOCT6nJJXF3tjHqZPFiO29BQZHOZqHpkOPm0i3WVaMNwoXvIpszTXkcZWQOdcnPoO8Xa9hxWE1vaaNLNlvcN5FJjaIFD89EINRiV9iUCqgP9gORgkHfRwWhvy5OYT-WErqlul_WSNFGbsJH5YjAEldJsFmotRb6gI8cE-HmOOMvflC83cbz_vPRm-HeUGlAn9xWMkeeZ9muCaRg5XLlzBSA5VYrq8Dg4Td0eVSpJ7rfTUZKD43M",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:09:10.194 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 14:09:10.197 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:09:10.197 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:09:10.197 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:09:10.197 -06:00 [DBG] No PKCE used.
2018-08-01 14:09:10.198 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:09:10.198 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:09:17.210 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 14:09:27.448 -06:00 [DBG] Augmenting SignInContext
2018-08-01 14:09:27.448 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 14:09:27.448 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 14:09:27.448 -06:00 [DBG] Adding auth_time claim with value: 1533154167
2018-08-01 14:09:27.449 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 14:09:27.449 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNT7QC8CV7:0000000B",
  "TimeStamp": "2018-08-01T20:09:27Z",
  "ProcessId": 37898,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:09:27.452 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:09:27.452 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:09:27.452 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 14:09:27.452 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 14:09:27.452 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 14:09:27.452 -06:00 [DBG] Start authorize callback request
2018-08-01 14:09:27.452 -06:00 [DBG] User in authorize request: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:09:27.452 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:09:27.452 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:09:27.452 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:09:27.452 -06:00 [DBG] No PKCE used.
2018-08-01 14:09:27.452 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:09:27.452 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe7ph3CKbv0sBOYJoY8UuDZ47VM-apRwjbkTW9dw4nlNL2UHj6sXlPta_4QwdG5dB6fjxQdj45pajczPNpymjfjmT6lOBr56gMupSxkmzgLClmcmOcWoyEOqgwpu06sEGYd8ATKR4RqeI65aOCT6nJJXF3tjHqZPFiO29BQZHOZqHpkOPm0i3WVaMNwoXvIpszTXkcZWQOdcnPoO8Xa9hxWE1vaaNLNlvcN5FJjaIFD89EINRiV9iUCqgP9gORgkHfRwWhvy5OYT-WErqlul_WSNFGbsJH5YjAEldJsFmotRb6gI8cE-HmOOMvflC83cbz_vPRm-HeUGlAn9xWMkeeZ9muCaRg5XLlzBSA5VYrq8Dg4Td0eVSpJ7rfTUZKD43M",
  "Nonce": "636687509501719970.NGJkNThiZmQtMTk1Ni00Njc3LTk3MzAtNjJjZDg2YTdhOWEyMzY1MWEwNTctNmEzNy00YzNkLWIyMDAtMTg0N2Q4MmZjMTIx",
  "SessionId": "5f9d04c19e8ef7700e5555ab82a09d66",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687509501719970.NGJkNThiZmQtMTk1Ni00Njc3LTk3MzAtNjJjZDg2YTdhOWEyMzY1MWEwNTctNmEzNy00YzNkLWIyMDAtMTg0N2Q4MmZjMTIx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe7ph3CKbv0sBOYJoY8UuDZ47VM-apRwjbkTW9dw4nlNL2UHj6sXlPta_4QwdG5dB6fjxQdj45pajczPNpymjfjmT6lOBr56gMupSxkmzgLClmcmOcWoyEOqgwpu06sEGYd8ATKR4RqeI65aOCT6nJJXF3tjHqZPFiO29BQZHOZqHpkOPm0i3WVaMNwoXvIpszTXkcZWQOdcnPoO8Xa9hxWE1vaaNLNlvcN5FJjaIFD89EINRiV9iUCqgP9gORgkHfRwWhvy5OYT-WErqlul_WSNFGbsJH5YjAEldJsFmotRb6gI8cE-HmOOMvflC83cbz_vPRm-HeUGlAn9xWMkeeZ9muCaRg5XLlzBSA5VYrq8Dg4Td0eVSpJ7rfTUZKD43M",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:09:27.454 -06:00 [DBG] user_consent grant with value: ideaBox|80029ac6-6e39-48ef-a677-2f32fb737b84 not found in store.
2018-08-01 14:09:27.454 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 14:09:27.454 -06:00 [INF] Showing consent: User has not yet consented
2018-08-01 14:09:27.456 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:09:27.456 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:09:27.456 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:09:27.456 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:09:27.456 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:09:27.456 -06:00 [DBG] No PKCE used.
2018-08-01 14:09:27.457 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:09:27.457 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:09:33.172 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 14:09:33.173 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:09:33.173 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:09:33.175 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:09:33.176 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:09:33.176 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:09:33.176 -06:00 [DBG] No PKCE used.
2018-08-01 14:09:33.176 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:09:33.178 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:09:33.178 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:09:33.178 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 14:09:33.178 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 14:09:33.178 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 14:09:33.178 -06:00 [DBG] Start authorize callback request
2018-08-01 14:09:33.179 -06:00 [DBG] User in authorize request: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:09:33.179 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:09:33.179 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:09:33.179 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:09:33.179 -06:00 [DBG] No PKCE used.
2018-08-01 14:09:33.179 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:09:33.179 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe7ph3CKbv0sBOYJoY8UuDZ47VM-apRwjbkTW9dw4nlNL2UHj6sXlPta_4QwdG5dB6fjxQdj45pajczPNpymjfjmT6lOBr56gMupSxkmzgLClmcmOcWoyEOqgwpu06sEGYd8ATKR4RqeI65aOCT6nJJXF3tjHqZPFiO29BQZHOZqHpkOPm0i3WVaMNwoXvIpszTXkcZWQOdcnPoO8Xa9hxWE1vaaNLNlvcN5FJjaIFD89EINRiV9iUCqgP9gORgkHfRwWhvy5OYT-WErqlul_WSNFGbsJH5YjAEldJsFmotRb6gI8cE-HmOOMvflC83cbz_vPRm-HeUGlAn9xWMkeeZ9muCaRg5XLlzBSA5VYrq8Dg4Td0eVSpJ7rfTUZKD43M",
  "Nonce": "636687509501719970.NGJkNThiZmQtMTk1Ni00Njc3LTk3MzAtNjJjZDg2YTdhOWEyMzY1MWEwNTctNmEzNy00YzNkLWIyMDAtMTg0N2Q4MmZjMTIx",
  "SessionId": "5f9d04c19e8ef7700e5555ab82a09d66",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687509501719970.NGJkNThiZmQtMTk1Ni00Njc3LTk3MzAtNjJjZDg2YTdhOWEyMzY1MWEwNTctNmEzNy00YzNkLWIyMDAtMTg0N2Q4MmZjMTIx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe7ph3CKbv0sBOYJoY8UuDZ47VM-apRwjbkTW9dw4nlNL2UHj6sXlPta_4QwdG5dB6fjxQdj45pajczPNpymjfjmT6lOBr56gMupSxkmzgLClmcmOcWoyEOqgwpu06sEGYd8ATKR4RqeI65aOCT6nJJXF3tjHqZPFiO29BQZHOZqHpkOPm0i3WVaMNwoXvIpszTXkcZWQOdcnPoO8Xa9hxWE1vaaNLNlvcN5FJjaIFD89EINRiV9iUCqgP9gORgkHfRwWhvy5OYT-WErqlul_WSNFGbsJH5YjAEldJsFmotRb6gI8cE-HmOOMvflC83cbz_vPRm-HeUGlAn9xWMkeeZ9muCaRg5XLlzBSA5VYrq8Dg4Td0eVSpJ7rfTUZKD43M",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:09:33.180 -06:00 [DBG] user_consent grant with value: ideaBox|80029ac6-6e39-48ef-a677-2f32fb737b84 not found in store.
2018-08-01 14:09:33.180 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 14:09:33.180 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-08-01 14:09:33.180 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:09:33.180 -06:00 [DBG] Creating Hybrid Flow response.
2018-08-01 14:09:33.186 -06:00 [DBG] Creating Implicit Flow response.
2018-08-01 14:09:33.186 -06:00 [DBG] Getting claims for identity token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84 and client: ideaBox
2018-08-01 14:09:33.186 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 14:09:33.198 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****TfIQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****49fd"
    }
  ],
  "ActivityId": "0HLFNT7QC8CV7:0000000F",
  "TimeStamp": "2018-08-01T20:09:33Z",
  "ProcessId": 37898,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:09:33.198 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe7ph3CKbv0sBOYJoY8UuDZ47VM-apRwjbkTW9dw4nlNL2UHj6sXlPta_4QwdG5dB6fjxQdj45pajczPNpymjfjmT6lOBr56gMupSxkmzgLClmcmOcWoyEOqgwpu06sEGYd8ATKR4RqeI65aOCT6nJJXF3tjHqZPFiO29BQZHOZqHpkOPm0i3WVaMNwoXvIpszTXkcZWQOdcnPoO8Xa9hxWE1vaaNLNlvcN5FJjaIFD89EINRiV9iUCqgP9gORgkHfRwWhvy5OYT-WErqlul_WSNFGbsJH5YjAEldJsFmotRb6gI8cE-HmOOMvflC83cbz_vPRm-HeUGlAn9xWMkeeZ9muCaRg5XLlzBSA5VYrq8Dg4Td0eVSpJ7rfTUZKD43M",
  "Scope": "openid profile business email"
}
2018-08-01 14:09:33.198 -06:00 [DBG] Augmenting SignInContext
2018-08-01 14:09:33.203 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 14:09:33.437 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-08-01 14:09:33.438 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-08-01 14:09:33.438 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-08-01 14:09:33.438 -06:00 [DBG] Start token request.
2018-08-01 14:09:33.438 -06:00 [DBG] Start client validation
2018-08-01 14:09:33.438 -06:00 [DBG] Start parsing Basic Authentication secret
2018-08-01 14:09:33.438 -06:00 [DBG] Start parsing for secret in post body
2018-08-01 14:09:33.440 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-08-01 14:09:33.440 -06:00 [DBG] Secret id found: ideaBox
2018-08-01 14:09:33.440 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:09:33.440 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-08-01 14:09:33.440 -06:00 [DBG] Client validation success
2018-08-01 14:09:33.440 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFNT7QC8CVB:00000003",
  "TimeStamp": "2018-08-01T20:09:33Z",
  "ProcessId": 37898,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:09:33.440 -06:00 [DBG] Start token request validation
2018-08-01 14:09:33.440 -06:00 [DBG] Start validation of authorization code token request
2018-08-01 14:09:33.449 -06:00 [DBG] Validation of authorization code token request success
2018-08-01 14:09:33.449 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "041ed07530e1e69a6dd3a2701c4927b79d8a9b59b5a42ee4366a6606c4aa49fd",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "041ed07530e1e69a6dd3a2701c4927b79d8a9b59b5a42ee4366a6606c4aa49fd",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-08-01 14:09:33.449 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:09:33.449 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-08-01 14:09:33.449 -06:00 [DBG] Getting claims for access token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:09:33.463 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:09:33.464 -06:00 [DBG] Getting claims for identity token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84 and client: ideaBox
2018-08-01 14:09:33.464 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 14:09:33.476 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****-Y8g"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****KSww"
    }
  ],
  "ActivityId": "0HLFNT7QC8CVB:00000003",
  "TimeStamp": "2018-08-01T20:09:33Z",
  "ProcessId": 37898,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:09:33.476 -06:00 [DBG] Token request success.
2018-08-01 14:09:33.484 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-01 14:09:33.489 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-01 14:09:33.489 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-01 14:09:33.489 -06:00 [DBG] Start userinfo request
2018-08-01 14:09:33.489 -06:00 [DBG] Bearer token found in header
2018-08-01 14:09:33.492 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:09:33.492 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:09:33.493 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-01 14:09:33.494 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533154173,
    "exp": 1533157773,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "80029ac6-6e39-48ef-a677-2f32fb737b84",
    "auth_time": 1533154167,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-08-01 14:09:33.494 -06:00 [DBG] Creating userinfo response
2018-08-01 14:09:33.494 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 14:09:33.494 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 14:09:33.494 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-08-01 14:09:33.494 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 14:09:33.495 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-08-01 14:09:33.496 -06:00 [DBG] End userinfo request
2018-08-01 14:23:26.400 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 14:23:26.431 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 14:23:26.433 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 14:23:26.434 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 14:23:26.434 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 14:23:26.434 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 14:23:53.762 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 14:23:53.925 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 14:23:53.925 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 14:23:53.928 -06:00 [DBG] Start discovery request
2018-08-01 14:23:54.095 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-01 14:23:54.096 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-01 14:23:54.096 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-01 14:23:54.098 -06:00 [DBG] Start key discovery request
2018-08-01 14:23:54.215 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 14:23:54.217 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 14:23:54.218 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 14:23:54.220 -06:00 [DBG] Start authorize request
2018-08-01 14:23:54.236 -06:00 [DBG] No user present in authorize request
2018-08-01 14:23:54.240 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:23:54.251 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:23:54.255 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:23:54.257 -06:00 [DBG] No PKCE used.
2018-08-01 14:23:54.284 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:23:54.295 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf2s0SvPvBnYTIrtZWXvnjTssRhDCn77WQvfJvCJH8oJ9t2nrmlJWumu3SpQdTQh-BZRisY292bNz_dmo1rgwQNAjT2D6cXXhBhenLsaP0ybPSJrwro3tDznXrdfqbhQ9NwKZVO-3FZ-Qilv86Cgzj9nH8FEdGasN80mjEm38pm_iANOUvvW0kqnyS84hxXKJDEg8SMJmd19cTHAoqd2s6WBVH8W3xS4Tj9tBLTrf3IzNinDQZZHdVR7NlQNZVSht4f-t14rXhAQVnH_M3qVNXOgtvnIvhitLEQwDmqCTJhNOSHKlXv6BIf_K3HKzUTqPE8dS9L0_hgIRsAP1lvSsvoUVCdjMlvOnv_E2yqbqrscq0xThl6MP3uDTEw77xiurE",
  "Nonce": "636687518341869490.OTUxZWQ1ZmEtNjcxNS00NDM0LTliNGUtOTU0OTk2ODUzNGUxNjlhMjU4MjctZTA3NS00YzhkLTk2ZjUtNmFjOThkMGYxNmIy",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687518341869490.OTUxZWQ1ZmEtNjcxNS00NDM0LTliNGUtOTU0OTk2ODUzNGUxNjlhMjU4MjctZTA3NS00YzhkLTk2ZjUtNmFjOThkMGYxNmIy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf2s0SvPvBnYTIrtZWXvnjTssRhDCn77WQvfJvCJH8oJ9t2nrmlJWumu3SpQdTQh-BZRisY292bNz_dmo1rgwQNAjT2D6cXXhBhenLsaP0ybPSJrwro3tDznXrdfqbhQ9NwKZVO-3FZ-Qilv86Cgzj9nH8FEdGasN80mjEm38pm_iANOUvvW0kqnyS84hxXKJDEg8SMJmd19cTHAoqd2s6WBVH8W3xS4Tj9tBLTrf3IzNinDQZZHdVR7NlQNZVSht4f-t14rXhAQVnH_M3qVNXOgtvnIvhitLEQwDmqCTJhNOSHKlXv6BIf_K3HKzUTqPE8dS9L0_hgIRsAP1lvSsvoUVCdjMlvOnv_E2yqbqrscq0xThl6MP3uDTEw77xiurE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:23:54.301 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 14:23:54.427 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:23:54.428 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:23:54.428 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:23:54.428 -06:00 [DBG] No PKCE used.
2018-08-01 14:23:54.428 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:23:54.431 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:24:03.640 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 14:24:08.186 -06:00 [DBG] Augmenting SignInContext
2018-08-01 14:24:08.188 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 14:24:08.188 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 14:24:08.188 -06:00 [DBG] Adding auth_time claim with value: 1533155048
2018-08-01 14:24:08.219 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 14:24:08.257 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNTIHOBHSJ:00000004",
  "TimeStamp": "2018-08-01T20:24:08Z",
  "ProcessId": 38091,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:24:08.277 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:24:08.278 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:24:08.278 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 14:24:08.278 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 14:24:08.278 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 14:24:08.282 -06:00 [DBG] Start authorize callback request
2018-08-01 14:24:08.285 -06:00 [DBG] User in authorize request: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:24:08.285 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:24:08.285 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:24:08.285 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:24:08.286 -06:00 [DBG] No PKCE used.
2018-08-01 14:24:08.286 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:24:08.286 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf2s0SvPvBnYTIrtZWXvnjTssRhDCn77WQvfJvCJH8oJ9t2nrmlJWumu3SpQdTQh-BZRisY292bNz_dmo1rgwQNAjT2D6cXXhBhenLsaP0ybPSJrwro3tDznXrdfqbhQ9NwKZVO-3FZ-Qilv86Cgzj9nH8FEdGasN80mjEm38pm_iANOUvvW0kqnyS84hxXKJDEg8SMJmd19cTHAoqd2s6WBVH8W3xS4Tj9tBLTrf3IzNinDQZZHdVR7NlQNZVSht4f-t14rXhAQVnH_M3qVNXOgtvnIvhitLEQwDmqCTJhNOSHKlXv6BIf_K3HKzUTqPE8dS9L0_hgIRsAP1lvSsvoUVCdjMlvOnv_E2yqbqrscq0xThl6MP3uDTEw77xiurE",
  "Nonce": "636687518341869490.OTUxZWQ1ZmEtNjcxNS00NDM0LTliNGUtOTU0OTk2ODUzNGUxNjlhMjU4MjctZTA3NS00YzhkLTk2ZjUtNmFjOThkMGYxNmIy",
  "SessionId": "02a726a738f96cdeca3b39f8cee302fc",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687518341869490.OTUxZWQ1ZmEtNjcxNS00NDM0LTliNGUtOTU0OTk2ODUzNGUxNjlhMjU4MjctZTA3NS00YzhkLTk2ZjUtNmFjOThkMGYxNmIy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf2s0SvPvBnYTIrtZWXvnjTssRhDCn77WQvfJvCJH8oJ9t2nrmlJWumu3SpQdTQh-BZRisY292bNz_dmo1rgwQNAjT2D6cXXhBhenLsaP0ybPSJrwro3tDznXrdfqbhQ9NwKZVO-3FZ-Qilv86Cgzj9nH8FEdGasN80mjEm38pm_iANOUvvW0kqnyS84hxXKJDEg8SMJmd19cTHAoqd2s6WBVH8W3xS4Tj9tBLTrf3IzNinDQZZHdVR7NlQNZVSht4f-t14rXhAQVnH_M3qVNXOgtvnIvhitLEQwDmqCTJhNOSHKlXv6BIf_K3HKzUTqPE8dS9L0_hgIRsAP1lvSsvoUVCdjMlvOnv_E2yqbqrscq0xThl6MP3uDTEw77xiurE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:24:08.323 -06:00 [DBG] user_consent grant with value: ideaBox|80029ac6-6e39-48ef-a677-2f32fb737b84 not found in store.
2018-08-01 14:24:08.323 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 14:24:08.323 -06:00 [INF] Showing consent: User has not yet consented
2018-08-01 14:24:08.328 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:24:08.328 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:24:08.356 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:24:08.356 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:24:08.356 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:24:08.356 -06:00 [DBG] No PKCE used.
2018-08-01 14:24:08.356 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:24:08.356 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:24:14.044 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 14:24:14.074 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:24:14.074 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:24:14.099 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:24:14.099 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:24:14.099 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:24:14.099 -06:00 [DBG] No PKCE used.
2018-08-01 14:24:14.099 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:24:14.114 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:24:14.114 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:24:14.114 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 14:24:14.115 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 14:24:14.115 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 14:24:14.115 -06:00 [DBG] Start authorize callback request
2018-08-01 14:24:14.140 -06:00 [DBG] User in authorize request: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:24:14.140 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:24:14.140 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:24:14.140 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:24:14.140 -06:00 [DBG] No PKCE used.
2018-08-01 14:24:14.140 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:24:14.141 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf2s0SvPvBnYTIrtZWXvnjTssRhDCn77WQvfJvCJH8oJ9t2nrmlJWumu3SpQdTQh-BZRisY292bNz_dmo1rgwQNAjT2D6cXXhBhenLsaP0ybPSJrwro3tDznXrdfqbhQ9NwKZVO-3FZ-Qilv86Cgzj9nH8FEdGasN80mjEm38pm_iANOUvvW0kqnyS84hxXKJDEg8SMJmd19cTHAoqd2s6WBVH8W3xS4Tj9tBLTrf3IzNinDQZZHdVR7NlQNZVSht4f-t14rXhAQVnH_M3qVNXOgtvnIvhitLEQwDmqCTJhNOSHKlXv6BIf_K3HKzUTqPE8dS9L0_hgIRsAP1lvSsvoUVCdjMlvOnv_E2yqbqrscq0xThl6MP3uDTEw77xiurE",
  "Nonce": "636687518341869490.OTUxZWQ1ZmEtNjcxNS00NDM0LTliNGUtOTU0OTk2ODUzNGUxNjlhMjU4MjctZTA3NS00YzhkLTk2ZjUtNmFjOThkMGYxNmIy",
  "SessionId": "02a726a738f96cdeca3b39f8cee302fc",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687518341869490.OTUxZWQ1ZmEtNjcxNS00NDM0LTliNGUtOTU0OTk2ODUzNGUxNjlhMjU4MjctZTA3NS00YzhkLTk2ZjUtNmFjOThkMGYxNmIy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf2s0SvPvBnYTIrtZWXvnjTssRhDCn77WQvfJvCJH8oJ9t2nrmlJWumu3SpQdTQh-BZRisY292bNz_dmo1rgwQNAjT2D6cXXhBhenLsaP0ybPSJrwro3tDznXrdfqbhQ9NwKZVO-3FZ-Qilv86Cgzj9nH8FEdGasN80mjEm38pm_iANOUvvW0kqnyS84hxXKJDEg8SMJmd19cTHAoqd2s6WBVH8W3xS4Tj9tBLTrf3IzNinDQZZHdVR7NlQNZVSht4f-t14rXhAQVnH_M3qVNXOgtvnIvhitLEQwDmqCTJhNOSHKlXv6BIf_K3HKzUTqPE8dS9L0_hgIRsAP1lvSsvoUVCdjMlvOnv_E2yqbqrscq0xThl6MP3uDTEw77xiurE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:24:14.142 -06:00 [DBG] user_consent grant with value: ideaBox|80029ac6-6e39-48ef-a677-2f32fb737b84 not found in store.
2018-08-01 14:24:14.142 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 14:24:14.149 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-08-01 14:24:14.159 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:24:14.165 -06:00 [DBG] Creating Hybrid Flow response.
2018-08-01 14:24:14.185 -06:00 [DBG] Creating Implicit Flow response.
2018-08-01 14:24:14.194 -06:00 [DBG] Getting claims for identity token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84 and client: ideaBox
2018-08-01 14:24:14.196 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 14:24:14.290 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****izRA"
    },
    {
      "TokenType": "code",
      "TokenValue": "****81ad"
    }
  ],
  "ActivityId": "0HLFNTIHOBHSJ:00000008",
  "TimeStamp": "2018-08-01T20:24:14Z",
  "ProcessId": 38091,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:24:14.292 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHf2s0SvPvBnYTIrtZWXvnjTssRhDCn77WQvfJvCJH8oJ9t2nrmlJWumu3SpQdTQh-BZRisY292bNz_dmo1rgwQNAjT2D6cXXhBhenLsaP0ybPSJrwro3tDznXrdfqbhQ9NwKZVO-3FZ-Qilv86Cgzj9nH8FEdGasN80mjEm38pm_iANOUvvW0kqnyS84hxXKJDEg8SMJmd19cTHAoqd2s6WBVH8W3xS4Tj9tBLTrf3IzNinDQZZHdVR7NlQNZVSht4f-t14rXhAQVnH_M3qVNXOgtvnIvhitLEQwDmqCTJhNOSHKlXv6BIf_K3HKzUTqPE8dS9L0_hgIRsAP1lvSsvoUVCdjMlvOnv_E2yqbqrscq0xThl6MP3uDTEw77xiurE",
  "Scope": "openid profile business email"
}
2018-08-01 14:24:14.308 -06:00 [DBG] Augmenting SignInContext
2018-08-01 14:24:14.308 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 14:24:14.521 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-08-01 14:24:14.523 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-08-01 14:24:14.523 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-08-01 14:24:14.529 -06:00 [DBG] Start token request.
2018-08-01 14:24:14.534 -06:00 [DBG] Start client validation
2018-08-01 14:24:14.538 -06:00 [DBG] Start parsing Basic Authentication secret
2018-08-01 14:24:14.541 -06:00 [DBG] Start parsing for secret in post body
2018-08-01 14:24:14.544 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-08-01 14:24:14.544 -06:00 [DBG] Secret id found: ideaBox
2018-08-01 14:24:14.544 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:24:14.551 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-08-01 14:24:14.551 -06:00 [DBG] Client validation success
2018-08-01 14:24:14.555 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFNTIHOBHSK:00000003",
  "TimeStamp": "2018-08-01T20:24:14Z",
  "ProcessId": 38091,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:24:14.560 -06:00 [DBG] Start token request validation
2018-08-01 14:24:14.568 -06:00 [DBG] Start validation of authorization code token request
2018-08-01 14:24:14.586 -06:00 [DBG] Validation of authorization code token request success
2018-08-01 14:24:14.590 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "9758e6ca89daf2e3bf5d2e25e18f09dc1d83ad3060118926ba496dd9f44b81ad",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "9758e6ca89daf2e3bf5d2e25e18f09dc1d83ad3060118926ba496dd9f44b81ad",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-08-01 14:24:14.600 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:24:14.609 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-08-01 14:24:14.610 -06:00 [DBG] Getting claims for access token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:24:14.629 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:24:14.629 -06:00 [DBG] Getting claims for identity token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84 and client: ideaBox
2018-08-01 14:24:14.629 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 14:24:14.643 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****OLZA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****0eTQ"
    }
  ],
  "ActivityId": "0HLFNTIHOBHSK:00000003",
  "TimeStamp": "2018-08-01T20:24:14Z",
  "ProcessId": 38091,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:24:14.644 -06:00 [DBG] Token request success.
2018-08-01 14:24:14.657 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-01 14:24:14.658 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-01 14:24:14.658 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-01 14:24:14.664 -06:00 [DBG] Start userinfo request
2018-08-01 14:24:14.666 -06:00 [DBG] Bearer token found in header
2018-08-01 14:24:14.730 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:24:14.733 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:24:14.735 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-01 14:24:14.739 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533155054,
    "exp": 1533158654,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "80029ac6-6e39-48ef-a677-2f32fb737b84",
    "auth_time": 1533155048,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-08-01 14:24:14.745 -06:00 [DBG] Creating userinfo response
2018-08-01 14:24:14.748 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 14:24:14.750 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 14:24:14.752 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-08-01 14:24:14.752 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 14:24:14.754 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-08-01 14:24:14.754 -06:00 [DBG] End userinfo request
2018-08-01 14:26:20.172 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 14:26:20.178 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 14:26:20.200 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 14:26:20.200 -06:00 [DBG] Start discovery request
2018-08-01 14:26:20.320 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-01 14:26:20.320 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-01 14:26:20.320 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-01 14:26:20.320 -06:00 [DBG] Start key discovery request
2018-08-01 14:26:20.438 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 14:26:20.463 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 14:26:20.463 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 14:26:20.463 -06:00 [DBG] Start authorize request
2018-08-01 14:26:20.463 -06:00 [DBG] No user present in authorize request
2018-08-01 14:26:20.463 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:26:20.463 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:26:20.463 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:26:20.463 -06:00 [DBG] No PKCE used.
2018-08-01 14:26:20.463 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:26:20.463 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdJOkJ0Sdk2MBn3a5DvrjsH6wW_yH02FDdCGmnyNm4f2ANMx7M02gTbEJeKm8eFYTYD5jnLB3mNH2ZDJFfvQVAQ4OALnTZOw2bBC-aJ1IVk-77topHUymcOfFtbvSVku3Zt-jX0KjXjIUhSZ7NPSPZ9aenAY0A38fkp3lO3c8i2aJ6V7o3psSevvzJU6rD7-e0DvbqkeCBwzivMrJLZ3wfq5nbdD4l7P1CNKtNsWh-mPwlT9MfcDmHsA44mlCvgDSVgpxOOlIJVrtNQ4Cglnp5pRnNhABG4m6178pyCtiwB_pTMomWjNjHxTIY0giNfD2GWtUCHnQmHGEN-ppethDlKLPnDWB-DM0FzXOZpHLApb4Qhf28A9E3sZLNoMEQZp8g",
  "Nonce": "636687519803809570.Yzg3YjZlM2MtNjczOS00YWVkLWJjMjItMDAwMWRlY2Q5OGVjODRiMWE2NDMtYmQ5Yy00ZWJlLTlhN2UtZWIzOWIzM2NjNWVh",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687519803809570.Yzg3YjZlM2MtNjczOS00YWVkLWJjMjItMDAwMWRlY2Q5OGVjODRiMWE2NDMtYmQ5Yy00ZWJlLTlhN2UtZWIzOWIzM2NjNWVh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdJOkJ0Sdk2MBn3a5DvrjsH6wW_yH02FDdCGmnyNm4f2ANMx7M02gTbEJeKm8eFYTYD5jnLB3mNH2ZDJFfvQVAQ4OALnTZOw2bBC-aJ1IVk-77topHUymcOfFtbvSVku3Zt-jX0KjXjIUhSZ7NPSPZ9aenAY0A38fkp3lO3c8i2aJ6V7o3psSevvzJU6rD7-e0DvbqkeCBwzivMrJLZ3wfq5nbdD4l7P1CNKtNsWh-mPwlT9MfcDmHsA44mlCvgDSVgpxOOlIJVrtNQ4Cglnp5pRnNhABG4m6178pyCtiwB_pTMomWjNjHxTIY0giNfD2GWtUCHnQmHGEN-ppethDlKLPnDWB-DM0FzXOZpHLApb4Qhf28A9E3sZLNoMEQZp8g",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:26:20.463 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 14:26:20.466 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:26:20.466 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:26:20.466 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:26:20.466 -06:00 [DBG] No PKCE used.
2018-08-01 14:26:20.467 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:26:20.467 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:26:29.091 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 14:26:59.405 -06:00 [DBG] Augmenting SignInContext
2018-08-01 14:26:59.405 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 14:26:59.405 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 14:26:59.405 -06:00 [DBG] Adding auth_time claim with value: 1533155219
2018-08-01 14:26:59.405 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 14:27:45.948 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNTIHOBHSJ:0000000B",
  "TimeStamp": "2018-08-01T20:27:45Z",
  "ProcessId": 38091,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:28:04.825 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:28:04.825 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:28:04.825 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 14:28:04.825 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 14:28:04.825 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 14:28:04.825 -06:00 [DBG] Start authorize callback request
2018-08-01 14:28:04.826 -06:00 [DBG] User in authorize request: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:28:04.826 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:28:04.826 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:28:04.826 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:28:04.826 -06:00 [DBG] No PKCE used.
2018-08-01 14:28:04.826 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:28:04.826 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdJOkJ0Sdk2MBn3a5DvrjsH6wW_yH02FDdCGmnyNm4f2ANMx7M02gTbEJeKm8eFYTYD5jnLB3mNH2ZDJFfvQVAQ4OALnTZOw2bBC-aJ1IVk-77topHUymcOfFtbvSVku3Zt-jX0KjXjIUhSZ7NPSPZ9aenAY0A38fkp3lO3c8i2aJ6V7o3psSevvzJU6rD7-e0DvbqkeCBwzivMrJLZ3wfq5nbdD4l7P1CNKtNsWh-mPwlT9MfcDmHsA44mlCvgDSVgpxOOlIJVrtNQ4Cglnp5pRnNhABG4m6178pyCtiwB_pTMomWjNjHxTIY0giNfD2GWtUCHnQmHGEN-ppethDlKLPnDWB-DM0FzXOZpHLApb4Qhf28A9E3sZLNoMEQZp8g",
  "Nonce": "636687519803809570.Yzg3YjZlM2MtNjczOS00YWVkLWJjMjItMDAwMWRlY2Q5OGVjODRiMWE2NDMtYmQ5Yy00ZWJlLTlhN2UtZWIzOWIzM2NjNWVh",
  "SessionId": "6b48fbb3efd5a4b480c7a3343e54f53b",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687519803809570.Yzg3YjZlM2MtNjczOS00YWVkLWJjMjItMDAwMWRlY2Q5OGVjODRiMWE2NDMtYmQ5Yy00ZWJlLTlhN2UtZWIzOWIzM2NjNWVh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdJOkJ0Sdk2MBn3a5DvrjsH6wW_yH02FDdCGmnyNm4f2ANMx7M02gTbEJeKm8eFYTYD5jnLB3mNH2ZDJFfvQVAQ4OALnTZOw2bBC-aJ1IVk-77topHUymcOfFtbvSVku3Zt-jX0KjXjIUhSZ7NPSPZ9aenAY0A38fkp3lO3c8i2aJ6V7o3psSevvzJU6rD7-e0DvbqkeCBwzivMrJLZ3wfq5nbdD4l7P1CNKtNsWh-mPwlT9MfcDmHsA44mlCvgDSVgpxOOlIJVrtNQ4Cglnp5pRnNhABG4m6178pyCtiwB_pTMomWjNjHxTIY0giNfD2GWtUCHnQmHGEN-ppethDlKLPnDWB-DM0FzXOZpHLApb4Qhf28A9E3sZLNoMEQZp8g",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:28:04.828 -06:00 [DBG] user_consent grant with value: ideaBox|80029ac6-6e39-48ef-a677-2f32fb737b84 not found in store.
2018-08-01 14:28:04.828 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 14:28:04.828 -06:00 [INF] Showing consent: User has not yet consented
2018-08-01 14:28:04.830 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:28:04.830 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:28:04.830 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:28:04.830 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:28:04.830 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:28:04.830 -06:00 [DBG] No PKCE used.
2018-08-01 14:28:04.830 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:28:04.830 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:28:09.867 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 14:28:09.867 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:28:09.867 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:28:09.870 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:28:09.870 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:28:09.870 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:28:09.870 -06:00 [DBG] No PKCE used.
2018-08-01 14:28:09.870 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:28:09.873 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:28:09.873 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:28:09.873 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 14:28:09.873 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 14:28:09.873 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 14:28:09.873 -06:00 [DBG] Start authorize callback request
2018-08-01 14:28:09.873 -06:00 [DBG] User in authorize request: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:28:09.873 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:28:09.873 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:28:09.873 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:28:09.873 -06:00 [DBG] No PKCE used.
2018-08-01 14:28:09.873 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:28:09.873 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdJOkJ0Sdk2MBn3a5DvrjsH6wW_yH02FDdCGmnyNm4f2ANMx7M02gTbEJeKm8eFYTYD5jnLB3mNH2ZDJFfvQVAQ4OALnTZOw2bBC-aJ1IVk-77topHUymcOfFtbvSVku3Zt-jX0KjXjIUhSZ7NPSPZ9aenAY0A38fkp3lO3c8i2aJ6V7o3psSevvzJU6rD7-e0DvbqkeCBwzivMrJLZ3wfq5nbdD4l7P1CNKtNsWh-mPwlT9MfcDmHsA44mlCvgDSVgpxOOlIJVrtNQ4Cglnp5pRnNhABG4m6178pyCtiwB_pTMomWjNjHxTIY0giNfD2GWtUCHnQmHGEN-ppethDlKLPnDWB-DM0FzXOZpHLApb4Qhf28A9E3sZLNoMEQZp8g",
  "Nonce": "636687519803809570.Yzg3YjZlM2MtNjczOS00YWVkLWJjMjItMDAwMWRlY2Q5OGVjODRiMWE2NDMtYmQ5Yy00ZWJlLTlhN2UtZWIzOWIzM2NjNWVh",
  "SessionId": "6b48fbb3efd5a4b480c7a3343e54f53b",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687519803809570.Yzg3YjZlM2MtNjczOS00YWVkLWJjMjItMDAwMWRlY2Q5OGVjODRiMWE2NDMtYmQ5Yy00ZWJlLTlhN2UtZWIzOWIzM2NjNWVh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdJOkJ0Sdk2MBn3a5DvrjsH6wW_yH02FDdCGmnyNm4f2ANMx7M02gTbEJeKm8eFYTYD5jnLB3mNH2ZDJFfvQVAQ4OALnTZOw2bBC-aJ1IVk-77topHUymcOfFtbvSVku3Zt-jX0KjXjIUhSZ7NPSPZ9aenAY0A38fkp3lO3c8i2aJ6V7o3psSevvzJU6rD7-e0DvbqkeCBwzivMrJLZ3wfq5nbdD4l7P1CNKtNsWh-mPwlT9MfcDmHsA44mlCvgDSVgpxOOlIJVrtNQ4Cglnp5pRnNhABG4m6178pyCtiwB_pTMomWjNjHxTIY0giNfD2GWtUCHnQmHGEN-ppethDlKLPnDWB-DM0FzXOZpHLApb4Qhf28A9E3sZLNoMEQZp8g",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:28:09.874 -06:00 [DBG] user_consent grant with value: ideaBox|80029ac6-6e39-48ef-a677-2f32fb737b84 not found in store.
2018-08-01 14:28:09.875 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 14:28:09.875 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-08-01 14:28:09.875 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:28:09.875 -06:00 [DBG] Creating Hybrid Flow response.
2018-08-01 14:28:09.879 -06:00 [DBG] Creating Implicit Flow response.
2018-08-01 14:28:09.880 -06:00 [DBG] Getting claims for identity token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84 and client: ideaBox
2018-08-01 14:28:09.880 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 14:28:09.891 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****QZXw"
    },
    {
      "TokenType": "code",
      "TokenValue": "****f640"
    }
  ],
  "ActivityId": "0HLFNTIHOBHSJ:0000000F",
  "TimeStamp": "2018-08-01T20:28:09Z",
  "ProcessId": 38091,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:28:09.891 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdJOkJ0Sdk2MBn3a5DvrjsH6wW_yH02FDdCGmnyNm4f2ANMx7M02gTbEJeKm8eFYTYD5jnLB3mNH2ZDJFfvQVAQ4OALnTZOw2bBC-aJ1IVk-77topHUymcOfFtbvSVku3Zt-jX0KjXjIUhSZ7NPSPZ9aenAY0A38fkp3lO3c8i2aJ6V7o3psSevvzJU6rD7-e0DvbqkeCBwzivMrJLZ3wfq5nbdD4l7P1CNKtNsWh-mPwlT9MfcDmHsA44mlCvgDSVgpxOOlIJVrtNQ4Cglnp5pRnNhABG4m6178pyCtiwB_pTMomWjNjHxTIY0giNfD2GWtUCHnQmHGEN-ppethDlKLPnDWB-DM0FzXOZpHLApb4Qhf28A9E3sZLNoMEQZp8g",
  "Scope": "openid profile business email"
}
2018-08-01 14:28:09.891 -06:00 [DBG] Augmenting SignInContext
2018-08-01 14:28:09.892 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 14:28:10.194 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-08-01 14:28:10.194 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-08-01 14:28:10.194 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-08-01 14:28:10.194 -06:00 [DBG] Start token request.
2018-08-01 14:28:10.194 -06:00 [DBG] Start client validation
2018-08-01 14:28:10.194 -06:00 [DBG] Start parsing Basic Authentication secret
2018-08-01 14:28:10.194 -06:00 [DBG] Start parsing for secret in post body
2018-08-01 14:28:10.196 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-08-01 14:28:10.197 -06:00 [DBG] Secret id found: ideaBox
2018-08-01 14:28:10.197 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:28:10.197 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-08-01 14:28:10.197 -06:00 [DBG] Client validation success
2018-08-01 14:28:10.197 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFNTIHOBHSP:00000003",
  "TimeStamp": "2018-08-01T20:28:10Z",
  "ProcessId": 38091,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:28:10.197 -06:00 [DBG] Start token request validation
2018-08-01 14:28:10.197 -06:00 [DBG] Start validation of authorization code token request
2018-08-01 14:28:10.205 -06:00 [DBG] Validation of authorization code token request success
2018-08-01 14:28:10.205 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "9262bbf52e524db4ffb7c471f257163c53e08b8bc19f34dd0ee494d69f8cf640",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "9262bbf52e524db4ffb7c471f257163c53e08b8bc19f34dd0ee494d69f8cf640",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-08-01 14:28:10.205 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:28:10.205 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-08-01 14:28:10.206 -06:00 [DBG] Getting claims for access token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:28:10.220 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:28:10.220 -06:00 [DBG] Getting claims for identity token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84 and client: ideaBox
2018-08-01 14:28:10.220 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 14:28:10.232 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****nakQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****L_fA"
    }
  ],
  "ActivityId": "0HLFNTIHOBHSP:00000003",
  "TimeStamp": "2018-08-01T20:28:10Z",
  "ProcessId": 38091,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:28:10.232 -06:00 [DBG] Token request success.
2018-08-01 14:28:10.240 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-01 14:28:10.241 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-01 14:28:10.241 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-01 14:28:10.241 -06:00 [DBG] Start userinfo request
2018-08-01 14:28:10.241 -06:00 [DBG] Bearer token found in header
2018-08-01 14:28:10.244 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:28:10.244 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:28:10.245 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-01 14:28:10.245 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533155290,
    "exp": 1533158890,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "80029ac6-6e39-48ef-a677-2f32fb737b84",
    "auth_time": 1533155219,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-08-01 14:28:10.245 -06:00 [DBG] Creating userinfo response
2018-08-01 14:28:10.246 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 14:28:10.246 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 14:28:10.246 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-08-01 14:28:10.246 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 14:28:10.247 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-08-01 14:28:10.247 -06:00 [DBG] End userinfo request
2018-08-01 14:30:45.556 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 14:30:45.556 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 14:30:45.556 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 14:30:45.556 -06:00 [DBG] Start discovery request
2018-08-01 14:30:45.691 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-01 14:30:45.691 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-01 14:30:45.691 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-01 14:30:45.691 -06:00 [DBG] Start key discovery request
2018-08-01 14:30:45.778 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 14:30:45.778 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 14:30:45.778 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 14:30:45.778 -06:00 [DBG] Start authorize request
2018-08-01 14:30:45.778 -06:00 [DBG] No user present in authorize request
2018-08-01 14:30:45.778 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:30:45.778 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:30:45.778 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:30:45.778 -06:00 [DBG] No PKCE used.
2018-08-01 14:30:45.779 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:30:45.779 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHea0McEZdG0pLe-7VeGP85RxiukUapyfPrjjv6J12kwGLjuuBt6sk2Tb9CWd7zhrAUmGMCf5PgObGGh00oco7ev4xp65RjdZwupdtsBzC-16Hjm8XENI_6vNBT7pBS2AIbJ8Y9DY4yRLlcn2lbF5PKBLV6kKKlgHFgf5691KeEOHdKqIIBKuWFo2lxPe_3TsFwMUF_uIlv5nu6g_gwjDVqPIQ3RHyIBCaU0bZfQ5MR-cUPAKiJuwpuikcohQdhpU46w1Q8MEz5fQ06IwHSZEdCkVxusr1bOgZnSpLHgHhEbSNmbAEqlHxfJ-1sEc67caDkuGQllH6JqpiqYSvf-oSyzmbBqnTa4790jjkqMNAc--50D2b9WzkowK8LQfjpgCeo",
  "Nonce": "636687522457570880.NTU4NDE2MTItNGU5ZS00NTk0LThmYmEtNjYxZGRhMmY4MjNiNjc1NzFhOTMtZTE5NC00NjAzLWFjODEtMGUyNjRjOTQ3MGM3",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687522457570880.NTU4NDE2MTItNGU5ZS00NTk0LThmYmEtNjYxZGRhMmY4MjNiNjc1NzFhOTMtZTE5NC00NjAzLWFjODEtMGUyNjRjOTQ3MGM3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHea0McEZdG0pLe-7VeGP85RxiukUapyfPrjjv6J12kwGLjuuBt6sk2Tb9CWd7zhrAUmGMCf5PgObGGh00oco7ev4xp65RjdZwupdtsBzC-16Hjm8XENI_6vNBT7pBS2AIbJ8Y9DY4yRLlcn2lbF5PKBLV6kKKlgHFgf5691KeEOHdKqIIBKuWFo2lxPe_3TsFwMUF_uIlv5nu6g_gwjDVqPIQ3RHyIBCaU0bZfQ5MR-cUPAKiJuwpuikcohQdhpU46w1Q8MEz5fQ06IwHSZEdCkVxusr1bOgZnSpLHgHhEbSNmbAEqlHxfJ-1sEc67caDkuGQllH6JqpiqYSvf-oSyzmbBqnTa4790jjkqMNAc--50D2b9WzkowK8LQfjpgCeo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:30:45.779 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 14:30:45.782 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:30:45.782 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:30:45.782 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:30:45.782 -06:00 [DBG] No PKCE used.
2018-08-01 14:30:45.782 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:30:45.782 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:30:54.955 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 14:30:58.948 -06:00 [DBG] Augmenting SignInContext
2018-08-01 14:30:58.948 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 14:30:58.948 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 14:30:58.948 -06:00 [DBG] Adding auth_time claim with value: 1533155458
2018-08-01 14:30:58.949 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 14:30:58.949 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNTIHOBHSJ:00000012",
  "TimeStamp": "2018-08-01T20:30:58Z",
  "ProcessId": 38091,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:30:58.952 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:30:58.952 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:30:58.952 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 14:30:58.952 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 14:30:58.952 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 14:30:58.952 -06:00 [DBG] Start authorize callback request
2018-08-01 14:30:58.952 -06:00 [DBG] User in authorize request: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:30:58.952 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:30:58.953 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:30:58.953 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:30:58.953 -06:00 [DBG] No PKCE used.
2018-08-01 14:30:58.953 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:30:58.953 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHea0McEZdG0pLe-7VeGP85RxiukUapyfPrjjv6J12kwGLjuuBt6sk2Tb9CWd7zhrAUmGMCf5PgObGGh00oco7ev4xp65RjdZwupdtsBzC-16Hjm8XENI_6vNBT7pBS2AIbJ8Y9DY4yRLlcn2lbF5PKBLV6kKKlgHFgf5691KeEOHdKqIIBKuWFo2lxPe_3TsFwMUF_uIlv5nu6g_gwjDVqPIQ3RHyIBCaU0bZfQ5MR-cUPAKiJuwpuikcohQdhpU46w1Q8MEz5fQ06IwHSZEdCkVxusr1bOgZnSpLHgHhEbSNmbAEqlHxfJ-1sEc67caDkuGQllH6JqpiqYSvf-oSyzmbBqnTa4790jjkqMNAc--50D2b9WzkowK8LQfjpgCeo",
  "Nonce": "636687522457570880.NTU4NDE2MTItNGU5ZS00NTk0LThmYmEtNjYxZGRhMmY4MjNiNjc1NzFhOTMtZTE5NC00NjAzLWFjODEtMGUyNjRjOTQ3MGM3",
  "SessionId": "277d6d27a6456ee83f3946f237b20d80",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687522457570880.NTU4NDE2MTItNGU5ZS00NTk0LThmYmEtNjYxZGRhMmY4MjNiNjc1NzFhOTMtZTE5NC00NjAzLWFjODEtMGUyNjRjOTQ3MGM3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHea0McEZdG0pLe-7VeGP85RxiukUapyfPrjjv6J12kwGLjuuBt6sk2Tb9CWd7zhrAUmGMCf5PgObGGh00oco7ev4xp65RjdZwupdtsBzC-16Hjm8XENI_6vNBT7pBS2AIbJ8Y9DY4yRLlcn2lbF5PKBLV6kKKlgHFgf5691KeEOHdKqIIBKuWFo2lxPe_3TsFwMUF_uIlv5nu6g_gwjDVqPIQ3RHyIBCaU0bZfQ5MR-cUPAKiJuwpuikcohQdhpU46w1Q8MEz5fQ06IwHSZEdCkVxusr1bOgZnSpLHgHhEbSNmbAEqlHxfJ-1sEc67caDkuGQllH6JqpiqYSvf-oSyzmbBqnTa4790jjkqMNAc--50D2b9WzkowK8LQfjpgCeo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:30:58.954 -06:00 [DBG] user_consent grant with value: ideaBox|80029ac6-6e39-48ef-a677-2f32fb737b84 not found in store.
2018-08-01 14:30:58.954 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 14:30:58.954 -06:00 [INF] Showing consent: User has not yet consented
2018-08-01 14:30:58.957 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:30:58.957 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:30:58.957 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:30:58.957 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:30:58.957 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:30:58.957 -06:00 [DBG] No PKCE used.
2018-08-01 14:30:58.957 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:30:58.957 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:31:11.794 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 14:31:11.794 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:31:11.794 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:31:11.797 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:31:11.797 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:31:11.797 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:31:11.797 -06:00 [DBG] No PKCE used.
2018-08-01 14:31:11.797 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:31:11.800 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:31:11.800 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:31:11.800 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 14:31:11.800 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 14:31:11.800 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 14:31:11.800 -06:00 [DBG] Start authorize callback request
2018-08-01 14:31:11.800 -06:00 [DBG] User in authorize request: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:31:11.800 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:31:11.800 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:31:11.800 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:31:11.800 -06:00 [DBG] No PKCE used.
2018-08-01 14:31:11.800 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:31:11.800 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHea0McEZdG0pLe-7VeGP85RxiukUapyfPrjjv6J12kwGLjuuBt6sk2Tb9CWd7zhrAUmGMCf5PgObGGh00oco7ev4xp65RjdZwupdtsBzC-16Hjm8XENI_6vNBT7pBS2AIbJ8Y9DY4yRLlcn2lbF5PKBLV6kKKlgHFgf5691KeEOHdKqIIBKuWFo2lxPe_3TsFwMUF_uIlv5nu6g_gwjDVqPIQ3RHyIBCaU0bZfQ5MR-cUPAKiJuwpuikcohQdhpU46w1Q8MEz5fQ06IwHSZEdCkVxusr1bOgZnSpLHgHhEbSNmbAEqlHxfJ-1sEc67caDkuGQllH6JqpiqYSvf-oSyzmbBqnTa4790jjkqMNAc--50D2b9WzkowK8LQfjpgCeo",
  "Nonce": "636687522457570880.NTU4NDE2MTItNGU5ZS00NTk0LThmYmEtNjYxZGRhMmY4MjNiNjc1NzFhOTMtZTE5NC00NjAzLWFjODEtMGUyNjRjOTQ3MGM3",
  "SessionId": "277d6d27a6456ee83f3946f237b20d80",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687522457570880.NTU4NDE2MTItNGU5ZS00NTk0LThmYmEtNjYxZGRhMmY4MjNiNjc1NzFhOTMtZTE5NC00NjAzLWFjODEtMGUyNjRjOTQ3MGM3",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHea0McEZdG0pLe-7VeGP85RxiukUapyfPrjjv6J12kwGLjuuBt6sk2Tb9CWd7zhrAUmGMCf5PgObGGh00oco7ev4xp65RjdZwupdtsBzC-16Hjm8XENI_6vNBT7pBS2AIbJ8Y9DY4yRLlcn2lbF5PKBLV6kKKlgHFgf5691KeEOHdKqIIBKuWFo2lxPe_3TsFwMUF_uIlv5nu6g_gwjDVqPIQ3RHyIBCaU0bZfQ5MR-cUPAKiJuwpuikcohQdhpU46w1Q8MEz5fQ06IwHSZEdCkVxusr1bOgZnSpLHgHhEbSNmbAEqlHxfJ-1sEc67caDkuGQllH6JqpiqYSvf-oSyzmbBqnTa4790jjkqMNAc--50D2b9WzkowK8LQfjpgCeo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:31:11.802 -06:00 [DBG] user_consent grant with value: ideaBox|80029ac6-6e39-48ef-a677-2f32fb737b84 not found in store.
2018-08-01 14:31:11.802 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 14:31:11.802 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-08-01 14:31:11.802 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:31:11.802 -06:00 [DBG] Creating Hybrid Flow response.
2018-08-01 14:31:11.807 -06:00 [DBG] Creating Implicit Flow response.
2018-08-01 14:31:11.807 -06:00 [DBG] Getting claims for identity token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84 and client: ideaBox
2018-08-01 14:31:11.807 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 14:31:11.819 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****_7Ng"
    },
    {
      "TokenType": "code",
      "TokenValue": "****e737"
    }
  ],
  "ActivityId": "0HLFNTIHOBHSJ:00000016",
  "TimeStamp": "2018-08-01T20:31:11Z",
  "ProcessId": 38091,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:31:11.819 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHea0McEZdG0pLe-7VeGP85RxiukUapyfPrjjv6J12kwGLjuuBt6sk2Tb9CWd7zhrAUmGMCf5PgObGGh00oco7ev4xp65RjdZwupdtsBzC-16Hjm8XENI_6vNBT7pBS2AIbJ8Y9DY4yRLlcn2lbF5PKBLV6kKKlgHFgf5691KeEOHdKqIIBKuWFo2lxPe_3TsFwMUF_uIlv5nu6g_gwjDVqPIQ3RHyIBCaU0bZfQ5MR-cUPAKiJuwpuikcohQdhpU46w1Q8MEz5fQ06IwHSZEdCkVxusr1bOgZnSpLHgHhEbSNmbAEqlHxfJ-1sEc67caDkuGQllH6JqpiqYSvf-oSyzmbBqnTa4790jjkqMNAc--50D2b9WzkowK8LQfjpgCeo",
  "Scope": "openid profile business email"
}
2018-08-01 14:31:11.819 -06:00 [DBG] Augmenting SignInContext
2018-08-01 14:31:11.820 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 14:31:12.078 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-08-01 14:31:12.078 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-08-01 14:31:12.078 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-08-01 14:31:12.078 -06:00 [DBG] Start token request.
2018-08-01 14:31:12.078 -06:00 [DBG] Start client validation
2018-08-01 14:31:12.078 -06:00 [DBG] Start parsing Basic Authentication secret
2018-08-01 14:31:12.078 -06:00 [DBG] Start parsing for secret in post body
2018-08-01 14:31:12.081 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-08-01 14:31:12.081 -06:00 [DBG] Secret id found: ideaBox
2018-08-01 14:31:12.081 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:31:12.081 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-08-01 14:31:12.081 -06:00 [DBG] Client validation success
2018-08-01 14:31:12.082 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFNTIHOBHSS:00000003",
  "TimeStamp": "2018-08-01T20:31:12Z",
  "ProcessId": 38091,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:31:12.082 -06:00 [DBG] Start token request validation
2018-08-01 14:31:12.082 -06:00 [DBG] Start validation of authorization code token request
2018-08-01 14:31:12.090 -06:00 [DBG] Validation of authorization code token request success
2018-08-01 14:31:12.090 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "d65ae18e81e2f3749d9be6c43344a0828a2e87db041c8f672512132802c7e737",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "d65ae18e81e2f3749d9be6c43344a0828a2e87db041c8f672512132802c7e737",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-08-01 14:31:12.090 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:31:12.090 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-08-01 14:31:12.090 -06:00 [DBG] Getting claims for access token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:31:12.103 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:31:12.103 -06:00 [DBG] Getting claims for identity token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84 and client: ideaBox
2018-08-01 14:31:12.103 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 14:31:12.115 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****_SIA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****qWrA"
    }
  ],
  "ActivityId": "0HLFNTIHOBHSS:00000003",
  "TimeStamp": "2018-08-01T20:31:12Z",
  "ProcessId": 38091,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:31:12.115 -06:00 [DBG] Token request success.
2018-08-01 14:31:12.122 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-01 14:31:12.123 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-01 14:31:12.123 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-01 14:31:12.123 -06:00 [DBG] Start userinfo request
2018-08-01 14:31:12.123 -06:00 [DBG] Bearer token found in header
2018-08-01 14:31:12.125 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:31:12.125 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:31:12.126 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-01 14:31:12.127 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533155472,
    "exp": 1533159072,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "80029ac6-6e39-48ef-a677-2f32fb737b84",
    "auth_time": 1533155458,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-08-01 14:31:12.127 -06:00 [DBG] Creating userinfo response
2018-08-01 14:31:12.127 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 14:31:12.127 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 14:31:12.127 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-08-01 14:31:12.127 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 14:31:12.128 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-08-01 14:31:12.128 -06:00 [DBG] End userinfo request
2018-08-01 14:33:04.888 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 14:33:04.889 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 14:33:04.889 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 14:33:04.889 -06:00 [DBG] Start authorize request
2018-08-01 14:33:04.889 -06:00 [DBG] No user present in authorize request
2018-08-01 14:33:04.889 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:33:04.889 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:33:04.889 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:33:04.889 -06:00 [DBG] No PKCE used.
2018-08-01 14:33:04.889 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:33:04.890 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe6B5p3WM1ZqGDVgbQOX34tMAWual1XcjlEdR8JYM-C0jf2fEr9nGBzCmPG8oGxIs8_uLpfXE1zqRYIIRddpxpEH_LIlmlzYml9dLdzSvmJXPZIEs3wOsIE-4B01Bg2e-2if3LgwGQtIrVd_ez2JVI01re0uM1BqJavY0dhZYROJR3-3Smu3iSZ4VjkudanVDDV0hsrQ1csp4VBqlv86wVdeMQNej-TrtSTWs05Mbr10Fsj_zBu48ntAjUIQFjnCOGzL6fuFuNatmFHMkuriwn1Gov-8mmTLO9CM-3JnviN2VfynjkRzlhOhxe57Cb35tsEE9UN5qncjWOtnMkbUHZOpJ5YjfIH1_UUAB6_PmB_J9qgpQoQXyPNdy-eYiVt2Ko",
  "Nonce": "636687523848548670.YmUxMzhiYzAtOWI5OS00MmM5LWI1MjUtMjFkNTQ3ODJkYjQ3ZDI4OTVlNDQtMGVjZC00ZDZhLThjNTAtODYzYzY4NjhkOTFm",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687523848548670.YmUxMzhiYzAtOWI5OS00MmM5LWI1MjUtMjFkNTQ3ODJkYjQ3ZDI4OTVlNDQtMGVjZC00ZDZhLThjNTAtODYzYzY4NjhkOTFm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe6B5p3WM1ZqGDVgbQOX34tMAWual1XcjlEdR8JYM-C0jf2fEr9nGBzCmPG8oGxIs8_uLpfXE1zqRYIIRddpxpEH_LIlmlzYml9dLdzSvmJXPZIEs3wOsIE-4B01Bg2e-2if3LgwGQtIrVd_ez2JVI01re0uM1BqJavY0dhZYROJR3-3Smu3iSZ4VjkudanVDDV0hsrQ1csp4VBqlv86wVdeMQNej-TrtSTWs05Mbr10Fsj_zBu48ntAjUIQFjnCOGzL6fuFuNatmFHMkuriwn1Gov-8mmTLO9CM-3JnviN2VfynjkRzlhOhxe57Cb35tsEE9UN5qncjWOtnMkbUHZOpJ5YjfIH1_UUAB6_PmB_J9qgpQoQXyPNdy-eYiVt2Ko",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:33:04.890 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 14:33:04.892 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:33:04.892 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:33:04.892 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:33:04.892 -06:00 [DBG] No PKCE used.
2018-08-01 14:33:04.893 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:33:04.893 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:33:13.682 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 14:33:17.436 -06:00 [DBG] Augmenting SignInContext
2018-08-01 14:33:17.436 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 14:33:17.436 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 14:33:17.436 -06:00 [DBG] Adding auth_time claim with value: 1533155597
2018-08-01 14:33:17.437 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 14:33:31.607 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNTIHOBHSJ:00000019",
  "TimeStamp": "2018-08-01T20:33:31Z",
  "ProcessId": 38091,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:34:31.863 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:34:31.863 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:34:31.863 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 14:34:31.863 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 14:34:31.863 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 14:34:31.863 -06:00 [DBG] Start authorize callback request
2018-08-01 14:34:31.863 -06:00 [DBG] User in authorize request: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:34:31.863 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:34:31.863 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:34:31.863 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:34:31.863 -06:00 [DBG] No PKCE used.
2018-08-01 14:34:31.863 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:34:31.864 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe6B5p3WM1ZqGDVgbQOX34tMAWual1XcjlEdR8JYM-C0jf2fEr9nGBzCmPG8oGxIs8_uLpfXE1zqRYIIRddpxpEH_LIlmlzYml9dLdzSvmJXPZIEs3wOsIE-4B01Bg2e-2if3LgwGQtIrVd_ez2JVI01re0uM1BqJavY0dhZYROJR3-3Smu3iSZ4VjkudanVDDV0hsrQ1csp4VBqlv86wVdeMQNej-TrtSTWs05Mbr10Fsj_zBu48ntAjUIQFjnCOGzL6fuFuNatmFHMkuriwn1Gov-8mmTLO9CM-3JnviN2VfynjkRzlhOhxe57Cb35tsEE9UN5qncjWOtnMkbUHZOpJ5YjfIH1_UUAB6_PmB_J9qgpQoQXyPNdy-eYiVt2Ko",
  "Nonce": "636687523848548670.YmUxMzhiYzAtOWI5OS00MmM5LWI1MjUtMjFkNTQ3ODJkYjQ3ZDI4OTVlNDQtMGVjZC00ZDZhLThjNTAtODYzYzY4NjhkOTFm",
  "SessionId": "b129e0810ab59c66dc2bc1ff0c5c4da9",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687523848548670.YmUxMzhiYzAtOWI5OS00MmM5LWI1MjUtMjFkNTQ3ODJkYjQ3ZDI4OTVlNDQtMGVjZC00ZDZhLThjNTAtODYzYzY4NjhkOTFm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe6B5p3WM1ZqGDVgbQOX34tMAWual1XcjlEdR8JYM-C0jf2fEr9nGBzCmPG8oGxIs8_uLpfXE1zqRYIIRddpxpEH_LIlmlzYml9dLdzSvmJXPZIEs3wOsIE-4B01Bg2e-2if3LgwGQtIrVd_ez2JVI01re0uM1BqJavY0dhZYROJR3-3Smu3iSZ4VjkudanVDDV0hsrQ1csp4VBqlv86wVdeMQNej-TrtSTWs05Mbr10Fsj_zBu48ntAjUIQFjnCOGzL6fuFuNatmFHMkuriwn1Gov-8mmTLO9CM-3JnviN2VfynjkRzlhOhxe57Cb35tsEE9UN5qncjWOtnMkbUHZOpJ5YjfIH1_UUAB6_PmB_J9qgpQoQXyPNdy-eYiVt2Ko",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:34:31.865 -06:00 [DBG] user_consent grant with value: ideaBox|80029ac6-6e39-48ef-a677-2f32fb737b84 not found in store.
2018-08-01 14:34:31.865 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 14:34:31.865 -06:00 [INF] Showing consent: User has not yet consented
2018-08-01 14:34:31.868 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:34:31.868 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:34:31.868 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:34:31.868 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:34:31.868 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:34:31.868 -06:00 [DBG] No PKCE used.
2018-08-01 14:34:31.868 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:34:31.868 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:34:36.817 -06:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 14:34:36.818 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:34:36.818 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:34:36.820 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:34:36.821 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:34:36.821 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:34:36.821 -06:00 [DBG] No PKCE used.
2018-08-01 14:34:36.821 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:34:36.824 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:34:36.824 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:34:36.824 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 14:34:36.824 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 14:34:36.824 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 14:34:36.824 -06:00 [DBG] Start authorize callback request
2018-08-01 14:34:36.825 -06:00 [DBG] User in authorize request: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:34:36.825 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:34:36.825 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:34:36.825 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:34:36.825 -06:00 [DBG] No PKCE used.
2018-08-01 14:34:36.825 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:34:36.825 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe6B5p3WM1ZqGDVgbQOX34tMAWual1XcjlEdR8JYM-C0jf2fEr9nGBzCmPG8oGxIs8_uLpfXE1zqRYIIRddpxpEH_LIlmlzYml9dLdzSvmJXPZIEs3wOsIE-4B01Bg2e-2if3LgwGQtIrVd_ez2JVI01re0uM1BqJavY0dhZYROJR3-3Smu3iSZ4VjkudanVDDV0hsrQ1csp4VBqlv86wVdeMQNej-TrtSTWs05Mbr10Fsj_zBu48ntAjUIQFjnCOGzL6fuFuNatmFHMkuriwn1Gov-8mmTLO9CM-3JnviN2VfynjkRzlhOhxe57Cb35tsEE9UN5qncjWOtnMkbUHZOpJ5YjfIH1_UUAB6_PmB_J9qgpQoQXyPNdy-eYiVt2Ko",
  "Nonce": "636687523848548670.YmUxMzhiYzAtOWI5OS00MmM5LWI1MjUtMjFkNTQ3ODJkYjQ3ZDI4OTVlNDQtMGVjZC00ZDZhLThjNTAtODYzYzY4NjhkOTFm",
  "SessionId": "b129e0810ab59c66dc2bc1ff0c5c4da9",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687523848548670.YmUxMzhiYzAtOWI5OS00MmM5LWI1MjUtMjFkNTQ3ODJkYjQ3ZDI4OTVlNDQtMGVjZC00ZDZhLThjNTAtODYzYzY4NjhkOTFm",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe6B5p3WM1ZqGDVgbQOX34tMAWual1XcjlEdR8JYM-C0jf2fEr9nGBzCmPG8oGxIs8_uLpfXE1zqRYIIRddpxpEH_LIlmlzYml9dLdzSvmJXPZIEs3wOsIE-4B01Bg2e-2if3LgwGQtIrVd_ez2JVI01re0uM1BqJavY0dhZYROJR3-3Smu3iSZ4VjkudanVDDV0hsrQ1csp4VBqlv86wVdeMQNej-TrtSTWs05Mbr10Fsj_zBu48ntAjUIQFjnCOGzL6fuFuNatmFHMkuriwn1Gov-8mmTLO9CM-3JnviN2VfynjkRzlhOhxe57Cb35tsEE9UN5qncjWOtnMkbUHZOpJ5YjfIH1_UUAB6_PmB_J9qgpQoQXyPNdy-eYiVt2Ko",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:34:36.826 -06:00 [DBG] user_consent grant with value: ideaBox|80029ac6-6e39-48ef-a677-2f32fb737b84 not found in store.
2018-08-01 14:34:36.826 -06:00 [DBG] Found no prior consent from consent store, consent is required
2018-08-01 14:34:36.826 -06:00 [INF] User consented to scopes: ["openid","profile","business","email"]
2018-08-01 14:34:36.826 -06:00 [DBG] Client allows remembering consent, and no scopes provided. Removing consent from consent store for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:34:36.826 -06:00 [DBG] Creating Hybrid Flow response.
2018-08-01 14:34:36.832 -06:00 [DBG] Creating Implicit Flow response.
2018-08-01 14:34:36.832 -06:00 [DBG] Getting claims for identity token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84 and client: ideaBox
2018-08-01 14:34:36.832 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 14:34:36.844 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "Endpoint": "Authorize",
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "Scopes": "openid profile business email",
  "GrantType": "hybrid",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****H8UQ"
    },
    {
      "TokenType": "code",
      "TokenValue": "****7b4e"
    }
  ],
  "ActivityId": "0HLFNTIHOBHSJ:0000001D",
  "TimeStamp": "2018-08-01T20:34:36Z",
  "ProcessId": 38091,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:34:36.844 -06:00 [INF] Authorize endpoint response
{
  "SubjectId": "80029ac6-6e39-48ef-a677-2f32fb737b84",
  "ClientId": "ideaBox",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHe6B5p3WM1ZqGDVgbQOX34tMAWual1XcjlEdR8JYM-C0jf2fEr9nGBzCmPG8oGxIs8_uLpfXE1zqRYIIRddpxpEH_LIlmlzYml9dLdzSvmJXPZIEs3wOsIE-4B01Bg2e-2if3LgwGQtIrVd_ez2JVI01re0uM1BqJavY0dhZYROJR3-3Smu3iSZ4VjkudanVDDV0hsrQ1csp4VBqlv86wVdeMQNej-TrtSTWs05Mbr10Fsj_zBu48ntAjUIQFjnCOGzL6fuFuNatmFHMkuriwn1Gov-8mmTLO9CM-3JnviN2VfynjkRzlhOhxe57Cb35tsEE9UN5qncjWOtnMkbUHZOpJ5YjfIH1_UUAB6_PmB_J9qgpQoQXyPNdy-eYiVt2Ko",
  "Scope": "openid profile business email"
}
2018-08-01 14:34:36.844 -06:00 [DBG] Augmenting SignInContext
2018-08-01 14:34:36.844 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 14:34:37.087 -06:00 [DBG] Request path /connect/token matched to endpoint type Token
2018-08-01 14:34:37.088 -06:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2018-08-01 14:34:37.088 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2018-08-01 14:34:37.088 -06:00 [DBG] Start token request.
2018-08-01 14:34:37.088 -06:00 [DBG] Start client validation
2018-08-01 14:34:37.088 -06:00 [DBG] Start parsing Basic Authentication secret
2018-08-01 14:34:37.088 -06:00 [DBG] Start parsing for secret in post body
2018-08-01 14:34:37.090 -06:00 [DBG] Parser found secret: PostBodySecretParser
2018-08-01 14:34:37.090 -06:00 [DBG] Secret id found: ideaBox
2018-08-01 14:34:37.090 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:34:37.090 -06:00 [DBG] Secret validator success: HashedSharedSecretValidator
2018-08-01 14:34:37.090 -06:00 [DBG] Client validation success
2018-08-01 14:34:37.090 -06:00 [INF] {
  "Name": "Client Authentication Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1010,
  "ClientId": "ideaBox",
  "AuthenticationMethod": "SharedSecret",
  "ActivityId": "0HLFNTIHOBHST:00000001",
  "TimeStamp": "2018-08-01T20:34:37Z",
  "ProcessId": 38091,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:34:37.090 -06:00 [DBG] Start token request validation
2018-08-01 14:34:37.090 -06:00 [DBG] Start validation of authorization code token request
2018-08-01 14:34:37.098 -06:00 [DBG] Validation of authorization code token request success
2018-08-01 14:34:37.098 -06:00 [INF] Token request validation success
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "GrantType": "authorization_code",
  "AuthorizationCode": "f6dfc27ee71f3f1c410ee64f2984b454561c2494ece822ebf279a81bda7b7b4e",
  "Raw": {
    "client_id": "ideaBox",
    "client_secret": "***REDACTED***",
    "code": "f6dfc27ee71f3f1c410ee64f2984b454561c2494ece822ebf279a81bda7b7b4e",
    "grant_type": "authorization_code",
    "redirect_uri": "https://localhost:5001/signin-oidc"
  }
}
2018-08-01 14:34:37.098 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:34:37.098 -06:00 [DBG] Getting claims for access token for client: ideaBox
2018-08-01 14:34:37.098 -06:00 [DBG] Getting claims for access token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84
2018-08-01 14:34:37.111 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:34:37.111 -06:00 [DBG] Getting claims for identity token for subject: 80029ac6-6e39-48ef-a677-2f32fb737b84 and client: ideaBox
2018-08-01 14:34:37.111 -06:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2018-08-01 14:34:37.123 -06:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "Endpoint": "Token",
  "Scopes": "openid profile business email",
  "GrantType": "authorization_code",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****8GYg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****KiAQ"
    }
  ],
  "ActivityId": "0HLFNTIHOBHST:00000001",
  "TimeStamp": "2018-08-01T20:34:37Z",
  "ProcessId": 38091,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:34:37.123 -06:00 [DBG] Token request success.
2018-08-01 14:34:37.127 -06:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-08-01 14:34:37.127 -06:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-08-01 14:34:37.127 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-08-01 14:34:37.127 -06:00 [DBG] Start userinfo request
2018-08-01 14:34:37.128 -06:00 [DBG] Bearer token found in header
2018-08-01 14:34:37.130 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:34:37.130 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:34:37.131 -06:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-08-01 14:34:37.131 -06:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1533155677,
    "exp": 1533159277,
    "iss": "http://localhost:5004",
    "aud": "http://localhost:5004/resources",
    "client_id": "ideaBox",
    "sub": "80029ac6-6e39-48ef-a677-2f32fb737b84",
    "auth_time": 1533155597,
    "idp": "local",
    "scope": [
      "openid",
      "profile",
      "business",
      "email"
    ],
    "amr": "pwd"
  }
}
2018-08-01 14:34:37.131 -06:00 [DBG] Creating userinfo response
2018-08-01 14:34:37.131 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 14:34:37.131 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 14:34:37.131 -06:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at business_name fav_color email email_verified
2018-08-01 14:34:37.131 -06:00 [DBG] Scopes in access token: openid profile business email
2018-08-01 14:34:37.133 -06:00 [INF] Profile service returned to the following claim types: sub business_name fav_color name given_name family_name email email_verified website preferred_username
2018-08-01 14:34:37.133 -06:00 [DBG] End userinfo request
2018-08-01 14:42:53.104 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 14:42:53.137 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 14:42:53.139 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 14:42:53.139 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 14:42:53.140 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 14:42:53.140 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 14:43:56.887 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 14:43:56.918 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 14:43:56.920 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 14:43:56.920 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 14:43:56.921 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 14:43:56.921 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 14:43:57.972 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:43:57.988 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:55:12.647 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 14:55:12.678 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 14:55:12.681 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 14:55:12.681 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 14:55:12.681 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 14:55:12.681 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 14:55:13.761 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:55:13.775 -06:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-08-01 14:56:51.495 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 14:56:51.498 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 14:56:51.498 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 14:56:51.501 -06:00 [DBG] Start discovery request
2018-08-01 14:56:51.659 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-01 14:56:51.659 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-01 14:56:51.659 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-01 14:56:51.662 -06:00 [DBG] Start key discovery request
2018-08-01 14:56:51.783 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 14:56:51.785 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 14:56:51.785 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 14:56:51.788 -06:00 [DBG] Start authorize request
2018-08-01 14:56:51.803 -06:00 [DBG] No user present in authorize request
2018-08-01 14:56:51.806 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:56:51.816 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:56:51.820 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:56:51.821 -06:00 [DBG] No PKCE used.
2018-08-01 14:56:51.844 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:56:51.857 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc8Wle0Obx2k0aX8yRV6hDNMcOF0j78NnwSolaXZnvLYju-2bwmatPhsHeTKU2hKMW6KBC710dcg7_cQp-VFtBGCvhAguOyYw5hVCZAlNc-BU5RpHmzfduS2SZvSv1o_2Bs96zJK5llBlbkUBhFEWuOcCUdDJSffmM5okAQ6UTgkXZgXwL4f1fKbRh1UKCnpR6rjBJdngdF-XFjR9Vlr416TqV0u0fygaL3m7Ijb1CdqlL4QoglGeHju3IfUK2zCUw49zlU_Jj4_tW4NpX1OgieH_SLo9ISsoJK99G1dEqzXO-hXwWFXEpIYPOxyhw9OkRphcyjloEmV3VE4Yb1RovRz_EJp2qOOIXqQx0IeK1V-lGZDMI9fw52vYycMLRf7HU",
  "Nonce": "636687538117334160.ZDNlYjlmYzQtMjRmOC00MmMyLTlmNWEtMDNmYjczYTk4OWVlYzE1YTAyM2YtYzcxNy00Y2FlLTg2MDEtZTMwMmFmMzQ5YjYy",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687538117334160.ZDNlYjlmYzQtMjRmOC00MmMyLTlmNWEtMDNmYjczYTk4OWVlYzE1YTAyM2YtYzcxNy00Y2FlLTg2MDEtZTMwMmFmMzQ5YjYy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc8Wle0Obx2k0aX8yRV6hDNMcOF0j78NnwSolaXZnvLYju-2bwmatPhsHeTKU2hKMW6KBC710dcg7_cQp-VFtBGCvhAguOyYw5hVCZAlNc-BU5RpHmzfduS2SZvSv1o_2Bs96zJK5llBlbkUBhFEWuOcCUdDJSffmM5okAQ6UTgkXZgXwL4f1fKbRh1UKCnpR6rjBJdngdF-XFjR9Vlr416TqV0u0fygaL3m7Ijb1CdqlL4QoglGeHju3IfUK2zCUw49zlU_Jj4_tW4NpX1OgieH_SLo9ISsoJK99G1dEqzXO-hXwWFXEpIYPOxyhw9OkRphcyjloEmV3VE4Yb1RovRz_EJp2qOOIXqQx0IeK1V-lGZDMI9fw52vYycMLRf7HU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:56:51.864 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 14:56:51.984 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:56:51.985 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:56:51.985 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:56:51.985 -06:00 [DBG] No PKCE used.
2018-08-01 14:56:51.985 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:56:51.988 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:57:02.335 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 14:57:08.910 -06:00 [DBG] Augmenting SignInContext
2018-08-01 14:57:08.911 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 14:57:08.911 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 14:57:08.912 -06:00 [DBG] Adding auth_time claim with value: 1533157028
2018-08-01 14:57:08.938 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 14:57:15.456 -06:00 [WRN] Heartbeat took longer than ""00:00:01"" at ""2018-08-01T20:57:14.1660800+00:00"".
2018-08-01 14:57:31.524 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "1417311e-8f3e-404c-b637-57fa6918dfaf",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNU49RP4OD:00000004",
  "TimeStamp": "2018-08-01T20:57:31Z",
  "ProcessId": 38389,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:57:31.539 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 14:57:31.540 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 14:57:31.540 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 14:57:31.545 -06:00 [DBG] Start authorize callback request
2018-08-01 14:57:31.549 -06:00 [DBG] No user present in authorize request
2018-08-01 14:57:31.549 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:57:31.549 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:57:31.549 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:57:31.549 -06:00 [DBG] No PKCE used.
2018-08-01 14:57:31.549 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:57:31.549 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc8Wle0Obx2k0aX8yRV6hDNMcOF0j78NnwSolaXZnvLYju-2bwmatPhsHeTKU2hKMW6KBC710dcg7_cQp-VFtBGCvhAguOyYw5hVCZAlNc-BU5RpHmzfduS2SZvSv1o_2Bs96zJK5llBlbkUBhFEWuOcCUdDJSffmM5okAQ6UTgkXZgXwL4f1fKbRh1UKCnpR6rjBJdngdF-XFjR9Vlr416TqV0u0fygaL3m7Ijb1CdqlL4QoglGeHju3IfUK2zCUw49zlU_Jj4_tW4NpX1OgieH_SLo9ISsoJK99G1dEqzXO-hXwWFXEpIYPOxyhw9OkRphcyjloEmV3VE4Yb1RovRz_EJp2qOOIXqQx0IeK1V-lGZDMI9fw52vYycMLRf7HU",
  "Nonce": "636687538117334160.ZDNlYjlmYzQtMjRmOC00MmMyLTlmNWEtMDNmYjczYTk4OWVlYzE1YTAyM2YtYzcxNy00Y2FlLTg2MDEtZTMwMmFmMzQ5YjYy",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687538117334160.ZDNlYjlmYzQtMjRmOC00MmMyLTlmNWEtMDNmYjczYTk4OWVlYzE1YTAyM2YtYzcxNy00Y2FlLTg2MDEtZTMwMmFmMzQ5YjYy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc8Wle0Obx2k0aX8yRV6hDNMcOF0j78NnwSolaXZnvLYju-2bwmatPhsHeTKU2hKMW6KBC710dcg7_cQp-VFtBGCvhAguOyYw5hVCZAlNc-BU5RpHmzfduS2SZvSv1o_2Bs96zJK5llBlbkUBhFEWuOcCUdDJSffmM5okAQ6UTgkXZgXwL4f1fKbRh1UKCnpR6rjBJdngdF-XFjR9Vlr416TqV0u0fygaL3m7Ijb1CdqlL4QoglGeHju3IfUK2zCUw49zlU_Jj4_tW4NpX1OgieH_SLo9ISsoJK99G1dEqzXO-hXwWFXEpIYPOxyhw9OkRphcyjloEmV3VE4Yb1RovRz_EJp2qOOIXqQx0IeK1V-lGZDMI9fw52vYycMLRf7HU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:57:31.549 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 14:57:31.552 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:57:31.552 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:57:31.552 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:57:31.552 -06:00 [DBG] No PKCE used.
2018-08-01 14:57:31.553 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:57:31.553 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:58:13.103 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 14:58:18.396 -06:00 [DBG] Augmenting SignInContext
2018-08-01 14:58:18.396 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 14:58:18.396 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 14:58:18.397 -06:00 [DBG] Adding auth_time claim with value: 1533157098
2018-08-01 14:58:18.397 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 14:58:18.398 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "1417311e-8f3e-404c-b637-57fa6918dfaf",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNU49RP4OD:00000007",
  "TimeStamp": "2018-08-01T20:58:18Z",
  "ProcessId": 38389,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:58:18.400 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 14:58:18.400 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 14:58:18.400 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 14:58:18.400 -06:00 [DBG] Start authorize callback request
2018-08-01 14:58:18.401 -06:00 [DBG] No user present in authorize request
2018-08-01 14:58:18.401 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:58:18.401 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:58:18.401 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:58:18.401 -06:00 [DBG] No PKCE used.
2018-08-01 14:58:18.401 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:58:18.401 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc8Wle0Obx2k0aX8yRV6hDNMcOF0j78NnwSolaXZnvLYju-2bwmatPhsHeTKU2hKMW6KBC710dcg7_cQp-VFtBGCvhAguOyYw5hVCZAlNc-BU5RpHmzfduS2SZvSv1o_2Bs96zJK5llBlbkUBhFEWuOcCUdDJSffmM5okAQ6UTgkXZgXwL4f1fKbRh1UKCnpR6rjBJdngdF-XFjR9Vlr416TqV0u0fygaL3m7Ijb1CdqlL4QoglGeHju3IfUK2zCUw49zlU_Jj4_tW4NpX1OgieH_SLo9ISsoJK99G1dEqzXO-hXwWFXEpIYPOxyhw9OkRphcyjloEmV3VE4Yb1RovRz_EJp2qOOIXqQx0IeK1V-lGZDMI9fw52vYycMLRf7HU",
  "Nonce": "636687538117334160.ZDNlYjlmYzQtMjRmOC00MmMyLTlmNWEtMDNmYjczYTk4OWVlYzE1YTAyM2YtYzcxNy00Y2FlLTg2MDEtZTMwMmFmMzQ5YjYy",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687538117334160.ZDNlYjlmYzQtMjRmOC00MmMyLTlmNWEtMDNmYjczYTk4OWVlYzE1YTAyM2YtYzcxNy00Y2FlLTg2MDEtZTMwMmFmMzQ5YjYy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc8Wle0Obx2k0aX8yRV6hDNMcOF0j78NnwSolaXZnvLYju-2bwmatPhsHeTKU2hKMW6KBC710dcg7_cQp-VFtBGCvhAguOyYw5hVCZAlNc-BU5RpHmzfduS2SZvSv1o_2Bs96zJK5llBlbkUBhFEWuOcCUdDJSffmM5okAQ6UTgkXZgXwL4f1fKbRh1UKCnpR6rjBJdngdF-XFjR9Vlr416TqV0u0fygaL3m7Ijb1CdqlL4QoglGeHju3IfUK2zCUw49zlU_Jj4_tW4NpX1OgieH_SLo9ISsoJK99G1dEqzXO-hXwWFXEpIYPOxyhw9OkRphcyjloEmV3VE4Yb1RovRz_EJp2qOOIXqQx0IeK1V-lGZDMI9fw52vYycMLRf7HU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:58:18.401 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 14:58:18.404 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:58:18.404 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:58:18.404 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:58:18.404 -06:00 [DBG] No PKCE used.
2018-08-01 14:58:18.404 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:58:18.404 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:58:42.779 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 14:58:47.490 -06:00 [DBG] Augmenting SignInContext
2018-08-01 14:58:47.490 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 14:58:47.490 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 14:58:47.490 -06:00 [DBG] Adding auth_time claim with value: 1533157127
2018-08-01 14:58:47.490 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 14:58:53.798 -06:00 [WRN] Heartbeat took longer than ""00:00:01"" at ""2018-08-01T20:58:53.7986580+00:00"".
2018-08-01 14:59:22.141 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "1417311e-8f3e-404c-b637-57fa6918dfaf",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNU49RP4OD:0000000A",
  "TimeStamp": "2018-08-01T20:59:22Z",
  "ProcessId": 38389,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 14:59:39.443 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 14:59:39.443 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 14:59:39.443 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 14:59:39.443 -06:00 [DBG] Start authorize callback request
2018-08-01 14:59:39.443 -06:00 [DBG] No user present in authorize request
2018-08-01 14:59:39.443 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:59:39.443 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:59:39.443 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:59:39.444 -06:00 [DBG] No PKCE used.
2018-08-01 14:59:39.444 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:59:39.444 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc8Wle0Obx2k0aX8yRV6hDNMcOF0j78NnwSolaXZnvLYju-2bwmatPhsHeTKU2hKMW6KBC710dcg7_cQp-VFtBGCvhAguOyYw5hVCZAlNc-BU5RpHmzfduS2SZvSv1o_2Bs96zJK5llBlbkUBhFEWuOcCUdDJSffmM5okAQ6UTgkXZgXwL4f1fKbRh1UKCnpR6rjBJdngdF-XFjR9Vlr416TqV0u0fygaL3m7Ijb1CdqlL4QoglGeHju3IfUK2zCUw49zlU_Jj4_tW4NpX1OgieH_SLo9ISsoJK99G1dEqzXO-hXwWFXEpIYPOxyhw9OkRphcyjloEmV3VE4Yb1RovRz_EJp2qOOIXqQx0IeK1V-lGZDMI9fw52vYycMLRf7HU",
  "Nonce": "636687538117334160.ZDNlYjlmYzQtMjRmOC00MmMyLTlmNWEtMDNmYjczYTk4OWVlYzE1YTAyM2YtYzcxNy00Y2FlLTg2MDEtZTMwMmFmMzQ5YjYy",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687538117334160.ZDNlYjlmYzQtMjRmOC00MmMyLTlmNWEtMDNmYjczYTk4OWVlYzE1YTAyM2YtYzcxNy00Y2FlLTg2MDEtZTMwMmFmMzQ5YjYy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc8Wle0Obx2k0aX8yRV6hDNMcOF0j78NnwSolaXZnvLYju-2bwmatPhsHeTKU2hKMW6KBC710dcg7_cQp-VFtBGCvhAguOyYw5hVCZAlNc-BU5RpHmzfduS2SZvSv1o_2Bs96zJK5llBlbkUBhFEWuOcCUdDJSffmM5okAQ6UTgkXZgXwL4f1fKbRh1UKCnpR6rjBJdngdF-XFjR9Vlr416TqV0u0fygaL3m7Ijb1CdqlL4QoglGeHju3IfUK2zCUw49zlU_Jj4_tW4NpX1OgieH_SLo9ISsoJK99G1dEqzXO-hXwWFXEpIYPOxyhw9OkRphcyjloEmV3VE4Yb1RovRz_EJp2qOOIXqQx0IeK1V-lGZDMI9fw52vYycMLRf7HU",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 14:59:39.444 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 14:59:39.446 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 14:59:39.446 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 14:59:39.446 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 14:59:39.446 -06:00 [DBG] No PKCE used.
2018-08-01 14:59:39.447 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 14:59:39.447 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:00:03.360 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 15:00:03.360 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 15:00:03.360 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 15:00:03.360 -06:00 [DBG] Start discovery request
2018-08-01 15:00:12.603 -06:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-08-01 15:00:36.627 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 15:00:36.628 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 15:00:36.628 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 15:00:36.628 -06:00 [DBG] Start authorize request
2018-08-01 15:00:36.628 -06:00 [DBG] No user present in authorize request
2018-08-01 15:00:36.628 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:00:36.628 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:00:36.628 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:00:36.628 -06:00 [DBG] No PKCE used.
2018-08-01 15:00:36.628 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:00:36.628 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcF35jJsG5Nijgz4UnH1AcUkPTjzYPzC1xMGpndZJO89DbSNNaup3cIeEyEIq-matHi8hRvy7wvnago_H3Fm9TPDfQvl1bcT0BFvn2H0pOdvivudXj6u2F66zFmXOtLRxMnpzwyriGuclbEACwEJsuLVYyMTKOLquA_GHg1YqJDcs2C6cS1oAW2LsCkW0_O0Y9VYqgGOcRsQG8Aph986gQ1yNQfCidGqkxHLdrO_HrcU67Sy1ak5qH-CA3WHwOhGWDogUm7q54wp71cQQjBpcuAO1ms5yLgbHPe-Ah7WCO-Nas8Jmhz-uxMaG7ISVymhRoEVnIEvnHr8F2C3rflmd9K_BD1aeyh75ORgE5tZglzp-sJDKUiXZ4E7FHttgrZ9MM",
  "Nonce": "636687540366028810.NjA4NjVhNTMtMjEyNi00N2NkLWIxZDUtODU2MTBjNzQ2ODhjZGQ1N2NmYTktZDAyZS00N2E3LTk1ZTQtM2Q1ODdjMTNlMjFi",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687540366028810.NjA4NjVhNTMtMjEyNi00N2NkLWIxZDUtODU2MTBjNzQ2ODhjZGQ1N2NmYTktZDAyZS00N2E3LTk1ZTQtM2Q1ODdjMTNlMjFi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcF35jJsG5Nijgz4UnH1AcUkPTjzYPzC1xMGpndZJO89DbSNNaup3cIeEyEIq-matHi8hRvy7wvnago_H3Fm9TPDfQvl1bcT0BFvn2H0pOdvivudXj6u2F66zFmXOtLRxMnpzwyriGuclbEACwEJsuLVYyMTKOLquA_GHg1YqJDcs2C6cS1oAW2LsCkW0_O0Y9VYqgGOcRsQG8Aph986gQ1yNQfCidGqkxHLdrO_HrcU67Sy1ak5qH-CA3WHwOhGWDogUm7q54wp71cQQjBpcuAO1ms5yLgbHPe-Ah7WCO-Nas8Jmhz-uxMaG7ISVymhRoEVnIEvnHr8F2C3rflmd9K_BD1aeyh75ORgE5tZglzp-sJDKUiXZ4E7FHttgrZ9MM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:00:36.628 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:00:36.631 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:00:36.631 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:00:36.631 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:00:36.631 -06:00 [DBG] No PKCE used.
2018-08-01 15:00:36.631 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:00:36.631 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:00:45.399 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 15:00:50.424 -06:00 [DBG] Augmenting SignInContext
2018-08-01 15:00:50.424 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 15:00:50.424 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 15:00:50.424 -06:00 [DBG] Adding auth_time claim with value: 1533157250
2018-08-01 15:00:50.424 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 15:00:50.425 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "1417311e-8f3e-404c-b637-57fa6918dfaf",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNU49RP4OD:00000012",
  "TimeStamp": "2018-08-01T21:00:50Z",
  "ProcessId": 38389,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 15:00:50.427 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 15:00:50.427 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 15:00:50.427 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 15:00:50.427 -06:00 [DBG] Start authorize callback request
2018-08-01 15:00:50.427 -06:00 [DBG] No user present in authorize request
2018-08-01 15:00:50.427 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:00:50.427 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:00:50.427 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:00:50.427 -06:00 [DBG] No PKCE used.
2018-08-01 15:00:50.427 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:00:50.427 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcF35jJsG5Nijgz4UnH1AcUkPTjzYPzC1xMGpndZJO89DbSNNaup3cIeEyEIq-matHi8hRvy7wvnago_H3Fm9TPDfQvl1bcT0BFvn2H0pOdvivudXj6u2F66zFmXOtLRxMnpzwyriGuclbEACwEJsuLVYyMTKOLquA_GHg1YqJDcs2C6cS1oAW2LsCkW0_O0Y9VYqgGOcRsQG8Aph986gQ1yNQfCidGqkxHLdrO_HrcU67Sy1ak5qH-CA3WHwOhGWDogUm7q54wp71cQQjBpcuAO1ms5yLgbHPe-Ah7WCO-Nas8Jmhz-uxMaG7ISVymhRoEVnIEvnHr8F2C3rflmd9K_BD1aeyh75ORgE5tZglzp-sJDKUiXZ4E7FHttgrZ9MM",
  "Nonce": "636687540366028810.NjA4NjVhNTMtMjEyNi00N2NkLWIxZDUtODU2MTBjNzQ2ODhjZGQ1N2NmYTktZDAyZS00N2E3LTk1ZTQtM2Q1ODdjMTNlMjFi",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687540366028810.NjA4NjVhNTMtMjEyNi00N2NkLWIxZDUtODU2MTBjNzQ2ODhjZGQ1N2NmYTktZDAyZS00N2E3LTk1ZTQtM2Q1ODdjMTNlMjFi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcF35jJsG5Nijgz4UnH1AcUkPTjzYPzC1xMGpndZJO89DbSNNaup3cIeEyEIq-matHi8hRvy7wvnago_H3Fm9TPDfQvl1bcT0BFvn2H0pOdvivudXj6u2F66zFmXOtLRxMnpzwyriGuclbEACwEJsuLVYyMTKOLquA_GHg1YqJDcs2C6cS1oAW2LsCkW0_O0Y9VYqgGOcRsQG8Aph986gQ1yNQfCidGqkxHLdrO_HrcU67Sy1ak5qH-CA3WHwOhGWDogUm7q54wp71cQQjBpcuAO1ms5yLgbHPe-Ah7WCO-Nas8Jmhz-uxMaG7ISVymhRoEVnIEvnHr8F2C3rflmd9K_BD1aeyh75ORgE5tZglzp-sJDKUiXZ4E7FHttgrZ9MM",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:00:50.427 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:00:50.430 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:00:50.430 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:00:50.430 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:00:50.430 -06:00 [DBG] No PKCE used.
2018-08-01 15:00:50.430 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:00:50.430 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:01:28.963 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 15:01:28.996 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 15:01:28.998 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 15:01:28.999 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 15:01:28.999 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 15:01:28.999 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 15:01:45.636 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 15:01:45.669 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 15:01:45.672 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 15:01:45.673 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 15:01:45.674 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 15:01:45.674 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 15:02:02.076 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 15:02:02.244 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 15:02:02.244 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 15:02:02.248 -06:00 [DBG] Start authorize request
2018-08-01 15:02:02.263 -06:00 [DBG] No user present in authorize request
2018-08-01 15:02:02.268 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:02:02.279 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:02:02.283 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:02:02.284 -06:00 [DBG] No PKCE used.
2018-08-01 15:02:02.316 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:02:02.376 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeQomGlP0Sak1KXnC8QcsxQsgFGlc04DTywes9dWm7AGMIPRQ4rxPbGqnx2H-o_Xfvo06c8APsp1gC86kbIWjQYjwgEmYhR5LcakNQUHZ1-_XL8jWDC-rlUjtaUUEyx1jVxYwsMiJk0fCnzgk_b2P75xUbJnNW2CzMQx68CL6r1u00d2ZritUsJNOCmJ00LvyoXZOLtKtivONMVHYSdxzK3RXgGMDUqXGSn9IUF1Oz6_XdfbKYHlA3O2SMPKcoIcRQB7gR6rXwa4VfMq94TyyS1sGzy9Azg_pWeOr5Plfp_T8oNNjXCvuXw07OCkc7L2VI-fsYl7vXg82eDijpVy0hBvSi9zFQ7Ud8rmMri9gagfWNcXOeMRYFFa-mAQXD_v1Y",
  "Nonce": "636687541220520530.OWMyZDk4ODYtNzkxNi00ZTFlLTg0ZWYtNGU0OTIxYWM3NDUxNDJmNzBhMDUtYmYxOS00OGJjLTliMWMtMzQwNGQwZDk3MmE2",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687541220520530.OWMyZDk4ODYtNzkxNi00ZTFlLTg0ZWYtNGU0OTIxYWM3NDUxNDJmNzBhMDUtYmYxOS00OGJjLTliMWMtMzQwNGQwZDk3MmE2",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeQomGlP0Sak1KXnC8QcsxQsgFGlc04DTywes9dWm7AGMIPRQ4rxPbGqnx2H-o_Xfvo06c8APsp1gC86kbIWjQYjwgEmYhR5LcakNQUHZ1-_XL8jWDC-rlUjtaUUEyx1jVxYwsMiJk0fCnzgk_b2P75xUbJnNW2CzMQx68CL6r1u00d2ZritUsJNOCmJ00LvyoXZOLtKtivONMVHYSdxzK3RXgGMDUqXGSn9IUF1Oz6_XdfbKYHlA3O2SMPKcoIcRQB7gR6rXwa4VfMq94TyyS1sGzy9Azg_pWeOr5Plfp_T8oNNjXCvuXw07OCkc7L2VI-fsYl7vXg82eDijpVy0hBvSi9zFQ7Ud8rmMri9gagfWNcXOeMRYFFa-mAQXD_v1Y",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:02:02.383 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:02:02.516 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:02:02.517 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:02:02.517 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:02:02.517 -06:00 [DBG] No PKCE used.
2018-08-01 15:02:02.517 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:02:02.520 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:02:11.863 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 15:02:17.472 -06:00 [DBG] Augmenting SignInContext
2018-08-01 15:02:17.474 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 15:02:17.474 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 15:02:17.474 -06:00 [DBG] Adding auth_time claim with value: 1533157337
2018-08-01 15:02:17.517 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 15:02:17.570 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2dd726ac-eecc-4aef-94a5-10d523390d1b",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNU7V0HERR:00000004",
  "TimeStamp": "2018-08-01T21:02:17Z",
  "ProcessId": 38482,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 15:02:17.578 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 15:02:17.579 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 15:02:17.579 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 15:02:17.583 -06:00 [DBG] Start authorize callback request
2018-08-01 15:02:17.587 -06:00 [DBG] No user present in authorize request
2018-08-01 15:02:17.587 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:02:17.587 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:02:17.587 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:02:17.587 -06:00 [DBG] No PKCE used.
2018-08-01 15:02:17.587 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:02:17.587 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeQomGlP0Sak1KXnC8QcsxQsgFGlc04DTywes9dWm7AGMIPRQ4rxPbGqnx2H-o_Xfvo06c8APsp1gC86kbIWjQYjwgEmYhR5LcakNQUHZ1-_XL8jWDC-rlUjtaUUEyx1jVxYwsMiJk0fCnzgk_b2P75xUbJnNW2CzMQx68CL6r1u00d2ZritUsJNOCmJ00LvyoXZOLtKtivONMVHYSdxzK3RXgGMDUqXGSn9IUF1Oz6_XdfbKYHlA3O2SMPKcoIcRQB7gR6rXwa4VfMq94TyyS1sGzy9Azg_pWeOr5Plfp_T8oNNjXCvuXw07OCkc7L2VI-fsYl7vXg82eDijpVy0hBvSi9zFQ7Ud8rmMri9gagfWNcXOeMRYFFa-mAQXD_v1Y",
  "Nonce": "636687541220520530.OWMyZDk4ODYtNzkxNi00ZTFlLTg0ZWYtNGU0OTIxYWM3NDUxNDJmNzBhMDUtYmYxOS00OGJjLTliMWMtMzQwNGQwZDk3MmE2",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687541220520530.OWMyZDk4ODYtNzkxNi00ZTFlLTg0ZWYtNGU0OTIxYWM3NDUxNDJmNzBhMDUtYmYxOS00OGJjLTliMWMtMzQwNGQwZDk3MmE2",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeQomGlP0Sak1KXnC8QcsxQsgFGlc04DTywes9dWm7AGMIPRQ4rxPbGqnx2H-o_Xfvo06c8APsp1gC86kbIWjQYjwgEmYhR5LcakNQUHZ1-_XL8jWDC-rlUjtaUUEyx1jVxYwsMiJk0fCnzgk_b2P75xUbJnNW2CzMQx68CL6r1u00d2ZritUsJNOCmJ00LvyoXZOLtKtivONMVHYSdxzK3RXgGMDUqXGSn9IUF1Oz6_XdfbKYHlA3O2SMPKcoIcRQB7gR6rXwa4VfMq94TyyS1sGzy9Azg_pWeOr5Plfp_T8oNNjXCvuXw07OCkc7L2VI-fsYl7vXg82eDijpVy0hBvSi9zFQ7Ud8rmMri9gagfWNcXOeMRYFFa-mAQXD_v1Y",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:02:17.587 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:02:17.590 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:02:17.590 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:02:17.590 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:02:17.590 -06:00 [DBG] No PKCE used.
2018-08-01 15:02:17.590 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:02:17.590 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:02:56.409 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 15:02:56.415 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:02:56.415 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:02:56.415 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:02:56.415 -06:00 [DBG] No PKCE used.
2018-08-01 15:02:56.415 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:02:56.415 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:03:04.003 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 15:03:08.793 -06:00 [DBG] Augmenting SignInContext
2018-08-01 15:03:08.793 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 15:03:08.793 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 15:03:08.793 -06:00 [DBG] Adding auth_time claim with value: 1533157388
2018-08-01 15:03:08.793 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 15:03:36.321 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2dd726ac-eecc-4aef-94a5-10d523390d1b",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNU7V0HERR:00000008",
  "TimeStamp": "2018-08-01T21:03:36Z",
  "ProcessId": 38482,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 15:04:23.912 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 15:04:23.936 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 15:04:23.936 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 15:04:23.937 -06:00 [DBG] Start authorize callback request
2018-08-01 15:04:23.937 -06:00 [DBG] No user present in authorize request
2018-08-01 15:04:23.937 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:04:23.937 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:04:23.937 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:04:23.937 -06:00 [DBG] No PKCE used.
2018-08-01 15:04:23.937 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:04:23.937 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeQomGlP0Sak1KXnC8QcsxQsgFGlc04DTywes9dWm7AGMIPRQ4rxPbGqnx2H-o_Xfvo06c8APsp1gC86kbIWjQYjwgEmYhR5LcakNQUHZ1-_XL8jWDC-rlUjtaUUEyx1jVxYwsMiJk0fCnzgk_b2P75xUbJnNW2CzMQx68CL6r1u00d2ZritUsJNOCmJ00LvyoXZOLtKtivONMVHYSdxzK3RXgGMDUqXGSn9IUF1Oz6_XdfbKYHlA3O2SMPKcoIcRQB7gR6rXwa4VfMq94TyyS1sGzy9Azg_pWeOr5Plfp_T8oNNjXCvuXw07OCkc7L2VI-fsYl7vXg82eDijpVy0hBvSi9zFQ7Ud8rmMri9gagfWNcXOeMRYFFa-mAQXD_v1Y",
  "Nonce": "636687541220520530.OWMyZDk4ODYtNzkxNi00ZTFlLTg0ZWYtNGU0OTIxYWM3NDUxNDJmNzBhMDUtYmYxOS00OGJjLTliMWMtMzQwNGQwZDk3MmE2",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687541220520530.OWMyZDk4ODYtNzkxNi00ZTFlLTg0ZWYtNGU0OTIxYWM3NDUxNDJmNzBhMDUtYmYxOS00OGJjLTliMWMtMzQwNGQwZDk3MmE2",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHeQomGlP0Sak1KXnC8QcsxQsgFGlc04DTywes9dWm7AGMIPRQ4rxPbGqnx2H-o_Xfvo06c8APsp1gC86kbIWjQYjwgEmYhR5LcakNQUHZ1-_XL8jWDC-rlUjtaUUEyx1jVxYwsMiJk0fCnzgk_b2P75xUbJnNW2CzMQx68CL6r1u00d2ZritUsJNOCmJ00LvyoXZOLtKtivONMVHYSdxzK3RXgGMDUqXGSn9IUF1Oz6_XdfbKYHlA3O2SMPKcoIcRQB7gR6rXwa4VfMq94TyyS1sGzy9Azg_pWeOr5Plfp_T8oNNjXCvuXw07OCkc7L2VI-fsYl7vXg82eDijpVy0hBvSi9zFQ7Ud8rmMri9gagfWNcXOeMRYFFa-mAQXD_v1Y",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:04:23.937 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:04:23.941 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:04:23.941 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:04:23.941 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:04:23.941 -06:00 [DBG] No PKCE used.
2018-08-01 15:04:23.941 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:04:23.941 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:07:33.912 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 15:07:33.944 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 15:07:33.947 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 15:07:33.947 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 15:07:33.947 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 15:07:33.947 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 15:07:52.738 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 15:07:52.902 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 15:07:52.902 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 15:07:52.905 -06:00 [DBG] Start discovery request
2018-08-01 15:07:53.067 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-01 15:07:53.068 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-01 15:07:53.068 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-01 15:07:53.071 -06:00 [DBG] Start key discovery request
2018-08-01 15:07:53.226 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 15:07:53.228 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 15:07:53.228 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 15:07:53.232 -06:00 [DBG] Start authorize request
2018-08-01 15:07:53.247 -06:00 [DBG] No user present in authorize request
2018-08-01 15:07:53.252 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:07:53.265 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:07:53.270 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:07:53.271 -06:00 [DBG] No PKCE used.
2018-08-01 15:07:53.297 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:07:53.307 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd0600HXCHr5OvrsTE0eRXZgz04frDPyoe7Qlc2mylBzeAjZ95pviNlGyvvPkmWRkWdM5bfXqLk1OQNC0XHaGDeApxU3VaoQabHQ0DITC_4jHf3BI4kjP7PRrf_3rYQkrb8_2ciG9N7kpErcwx3zMfGEClSkVji5pspBNeXoODwCaO33mP2UAbVEJUKpyIW4F9A4GXQDmCM24r7k3qoU41cipaK_0GVkCFNQp7BYw88km3sONaB3zWwFvqfgKMdGQ2bJzMl4eH26PczY80vCBvAuuFtDQtzpRtVQ6WJj9evh-YFSFXiMsg4on4xJ2DwIJA",
  "Nonce": "636687544731550290.NDYyMDQ4NjgtY2FmZi00ZmY4LTg0MzAtMmJjYjM2NjQ3OGJkODg5ZWJiNjMtNThlNi00YjY5LTlhNmQtYTg2ZTg3ZjRkYTU4",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687544731550290.NDYyMDQ4NjgtY2FmZi00ZmY4LTg0MzAtMmJjYjM2NjQ3OGJkODg5ZWJiNjMtNThlNi00YjY5LTlhNmQtYTg2ZTg3ZjRkYTU4",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd0600HXCHr5OvrsTE0eRXZgz04frDPyoe7Qlc2mylBzeAjZ95pviNlGyvvPkmWRkWdM5bfXqLk1OQNC0XHaGDeApxU3VaoQabHQ0DITC_4jHf3BI4kjP7PRrf_3rYQkrb8_2ciG9N7kpErcwx3zMfGEClSkVji5pspBNeXoODwCaO33mP2UAbVEJUKpyIW4F9A4GXQDmCM24r7k3qoU41cipaK_0GVkCFNQp7BYw88km3sONaB3zWwFvqfgKMdGQ2bJzMl4eH26PczY80vCBvAuuFtDQtzpRtVQ6WJj9evh-YFSFXiMsg4on4xJ2DwIJA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:07:53.313 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:07:53.441 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:07:53.442 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:07:53.442 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:07:53.442 -06:00 [DBG] No PKCE used.
2018-08-01 15:07:53.442 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:07:53.445 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:08:01.812 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 15:08:07.022 -06:00 [DBG] Augmenting SignInContext
2018-08-01 15:08:07.024 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 15:08:07.024 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 15:08:07.025 -06:00 [DBG] Adding auth_time claim with value: 1533157687
2018-08-01 15:08:07.070 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 15:08:07.112 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "2dd726ac-eecc-4aef-94a5-10d523390d1b",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNUB6P6ER9:00000004",
  "TimeStamp": "2018-08-01T21:08:07Z",
  "ProcessId": 38541,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 15:08:07.120 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 15:08:07.121 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 15:08:07.121 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 15:08:07.125 -06:00 [DBG] Start authorize callback request
2018-08-01 15:08:07.128 -06:00 [DBG] No user present in authorize request
2018-08-01 15:08:07.128 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:08:07.128 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:08:07.128 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:08:07.128 -06:00 [DBG] No PKCE used.
2018-08-01 15:08:07.129 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:08:07.129 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd0600HXCHr5OvrsTE0eRXZgz04frDPyoe7Qlc2mylBzeAjZ95pviNlGyvvPkmWRkWdM5bfXqLk1OQNC0XHaGDeApxU3VaoQabHQ0DITC_4jHf3BI4kjP7PRrf_3rYQkrb8_2ciG9N7kpErcwx3zMfGEClSkVji5pspBNeXoODwCaO33mP2UAbVEJUKpyIW4F9A4GXQDmCM24r7k3qoU41cipaK_0GVkCFNQp7BYw88km3sONaB3zWwFvqfgKMdGQ2bJzMl4eH26PczY80vCBvAuuFtDQtzpRtVQ6WJj9evh-YFSFXiMsg4on4xJ2DwIJA",
  "Nonce": "636687544731550290.NDYyMDQ4NjgtY2FmZi00ZmY4LTg0MzAtMmJjYjM2NjQ3OGJkODg5ZWJiNjMtNThlNi00YjY5LTlhNmQtYTg2ZTg3ZjRkYTU4",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687544731550290.NDYyMDQ4NjgtY2FmZi00ZmY4LTg0MzAtMmJjYjM2NjQ3OGJkODg5ZWJiNjMtNThlNi00YjY5LTlhNmQtYTg2ZTg3ZjRkYTU4",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd0600HXCHr5OvrsTE0eRXZgz04frDPyoe7Qlc2mylBzeAjZ95pviNlGyvvPkmWRkWdM5bfXqLk1OQNC0XHaGDeApxU3VaoQabHQ0DITC_4jHf3BI4kjP7PRrf_3rYQkrb8_2ciG9N7kpErcwx3zMfGEClSkVji5pspBNeXoODwCaO33mP2UAbVEJUKpyIW4F9A4GXQDmCM24r7k3qoU41cipaK_0GVkCFNQp7BYw88km3sONaB3zWwFvqfgKMdGQ2bJzMl4eH26PczY80vCBvAuuFtDQtzpRtVQ6WJj9evh-YFSFXiMsg4on4xJ2DwIJA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:08:07.129 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:08:07.132 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:08:07.132 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:08:07.132 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:08:07.132 -06:00 [DBG] No PKCE used.
2018-08-01 15:08:07.133 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:08:07.133 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:18:35.741 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 15:18:35.742 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 15:18:35.742 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 15:18:35.742 -06:00 [DBG] Start discovery request
2018-08-01 15:18:35.866 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-01 15:18:35.867 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-01 15:18:35.867 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-01 15:18:35.867 -06:00 [DBG] Start key discovery request
2018-08-01 15:18:35.968 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 15:18:35.969 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 15:18:35.969 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 15:18:35.969 -06:00 [DBG] Start authorize request
2018-08-01 15:18:35.969 -06:00 [DBG] No user present in authorize request
2018-08-01 15:18:35.969 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:18:35.969 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:18:35.969 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:18:35.969 -06:00 [DBG] No PKCE used.
2018-08-01 15:18:35.969 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:18:35.969 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHevH32Wj5h82DDfX423lR_vCd8HeXzGzS-9mL7MLWP9qrDv7Oth4NhjQXvtkSw7xMoTwQ32e_JhAYODnmnXQit5u4oC0A4Ikb_A99mjmUm5_hVTp8_47V1cUht2m0-FMw5qKIRibcklpkdNha3lF_aHW6z56vof98Zz0zxxbfTBlFGNoKi21TfGh7Z4rfMuB8iwufPkc6KVi9Mf88uw0hB5e433xPdAzG0nRnhvqOMZQsUyofJJiDhbipbENbBZIoTwMEy1n4guyUAGoiqDNTXHMR5zJyluqw20mHuVtmGqyBr5lncHDqT6_ehtubiedylEHVxFnkZJKhpmXH8cLZa2C_ovOLvCbuG1VsKMpy6HzSMYGW_d1lb8WTKzUTwfPqE",
  "Nonce": "636687551159310850.MTdkZTQ4ZjYtZmI2ZC00NmY0LThhMGYtMzUwMWRlOGQ3YWNlYjBmYmU5YTUtNjAzZi00NzI5LWI2MmQtZGI3ZjdlMmM3NGE4",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687551159310850.MTdkZTQ4ZjYtZmI2ZC00NmY0LThhMGYtMzUwMWRlOGQ3YWNlYjBmYmU5YTUtNjAzZi00NzI5LWI2MmQtZGI3ZjdlMmM3NGE4",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHevH32Wj5h82DDfX423lR_vCd8HeXzGzS-9mL7MLWP9qrDv7Oth4NhjQXvtkSw7xMoTwQ32e_JhAYODnmnXQit5u4oC0A4Ikb_A99mjmUm5_hVTp8_47V1cUht2m0-FMw5qKIRibcklpkdNha3lF_aHW6z56vof98Zz0zxxbfTBlFGNoKi21TfGh7Z4rfMuB8iwufPkc6KVi9Mf88uw0hB5e433xPdAzG0nRnhvqOMZQsUyofJJiDhbipbENbBZIoTwMEy1n4guyUAGoiqDNTXHMR5zJyluqw20mHuVtmGqyBr5lncHDqT6_ehtubiedylEHVxFnkZJKhpmXH8cLZa2C_ovOLvCbuG1VsKMpy6HzSMYGW_d1lb8WTKzUTwfPqE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:18:35.969 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:18:35.972 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:18:35.972 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:18:35.972 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:18:35.972 -06:00 [DBG] No PKCE used.
2018-08-01 15:18:35.972 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:18:35.972 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:18:43.350 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 15:18:45.805 -06:00 [DBG] Augmenting SignInContext
2018-08-01 15:18:45.806 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 15:18:45.806 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 15:18:45.806 -06:00 [DBG] Adding auth_time claim with value: 1533158325
2018-08-01 15:18:45.806 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 15:18:45.807 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "4ec6d4c7-a5ad-4056-b933-c3c3187ff423",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFNUB6P6ERE:00000003",
  "TimeStamp": "2018-08-01T21:18:45Z",
  "ProcessId": 38541,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 15:18:45.809 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 15:18:45.809 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 15:18:45.809 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 15:18:45.809 -06:00 [DBG] Start authorize callback request
2018-08-01 15:18:45.810 -06:00 [DBG] No user present in authorize request
2018-08-01 15:18:45.810 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:18:45.810 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:18:45.810 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:18:45.810 -06:00 [DBG] No PKCE used.
2018-08-01 15:18:45.810 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:18:45.810 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHevH32Wj5h82DDfX423lR_vCd8HeXzGzS-9mL7MLWP9qrDv7Oth4NhjQXvtkSw7xMoTwQ32e_JhAYODnmnXQit5u4oC0A4Ikb_A99mjmUm5_hVTp8_47V1cUht2m0-FMw5qKIRibcklpkdNha3lF_aHW6z56vof98Zz0zxxbfTBlFGNoKi21TfGh7Z4rfMuB8iwufPkc6KVi9Mf88uw0hB5e433xPdAzG0nRnhvqOMZQsUyofJJiDhbipbENbBZIoTwMEy1n4guyUAGoiqDNTXHMR5zJyluqw20mHuVtmGqyBr5lncHDqT6_ehtubiedylEHVxFnkZJKhpmXH8cLZa2C_ovOLvCbuG1VsKMpy6HzSMYGW_d1lb8WTKzUTwfPqE",
  "Nonce": "636687551159310850.MTdkZTQ4ZjYtZmI2ZC00NmY0LThhMGYtMzUwMWRlOGQ3YWNlYjBmYmU5YTUtNjAzZi00NzI5LWI2MmQtZGI3ZjdlMmM3NGE4",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687551159310850.MTdkZTQ4ZjYtZmI2ZC00NmY0LThhMGYtMzUwMWRlOGQ3YWNlYjBmYmU5YTUtNjAzZi00NzI5LWI2MmQtZGI3ZjdlMmM3NGE4",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHevH32Wj5h82DDfX423lR_vCd8HeXzGzS-9mL7MLWP9qrDv7Oth4NhjQXvtkSw7xMoTwQ32e_JhAYODnmnXQit5u4oC0A4Ikb_A99mjmUm5_hVTp8_47V1cUht2m0-FMw5qKIRibcklpkdNha3lF_aHW6z56vof98Zz0zxxbfTBlFGNoKi21TfGh7Z4rfMuB8iwufPkc6KVi9Mf88uw0hB5e433xPdAzG0nRnhvqOMZQsUyofJJiDhbipbENbBZIoTwMEy1n4guyUAGoiqDNTXHMR5zJyluqw20mHuVtmGqyBr5lncHDqT6_ehtubiedylEHVxFnkZJKhpmXH8cLZa2C_ovOLvCbuG1VsKMpy6HzSMYGW_d1lb8WTKzUTwfPqE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:18:45.810 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:18:45.813 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:18:45.813 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:18:45.813 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:18:45.813 -06:00 [DBG] No PKCE used.
2018-08-01 15:18:45.813 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:18:45.813 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:19:22.621 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 15:19:22.652 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 15:19:22.655 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 15:19:22.655 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 15:19:22.655 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 15:19:22.656 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 15:28:52.778 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 15:28:52.810 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 15:28:52.813 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 15:28:52.813 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 15:28:52.814 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 15:28:52.814 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 15:30:33.233 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 15:30:33.389 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 15:30:33.389 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 15:30:33.392 -06:00 [DBG] Start discovery request
2018-08-01 15:30:33.553 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-01 15:30:33.554 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-01 15:30:33.554 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-01 15:30:33.556 -06:00 [DBG] Start key discovery request
2018-08-01 15:30:33.689 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 15:30:33.692 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 15:30:33.692 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 15:30:33.695 -06:00 [DBG] Start authorize request
2018-08-01 15:30:33.710 -06:00 [DBG] No user present in authorize request
2018-08-01 15:30:33.714 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:30:33.724 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:30:33.728 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:30:33.729 -06:00 [DBG] No PKCE used.
2018-08-01 15:30:33.755 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:30:33.766 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcFhix9kNDX92xaKdoJQUvTKthJaFrLJsh8CCfQMH6G_BBuTZFE86DRrr1Tu_pExre5SbQenF_Mr2kDT5GyK_-I0WRfwbtmut5F0RojH-Xk99xu4Zh7J31oGtrIj4IZZFOYTGwCZWvdYheDe4UIaoeAoRYrwLz24ey56my7NysuahFU_MfSPmBQrsbbyKrq0FUwgpBE3hahFfP05d9D8slekiOaAoW4DLgGEVFBOvEI_OOIPkjUoT2k2Ozd3qc151D-zZXBj_PiVSLlFG6x7qSXMPWi6anbLjtYpsksviO0K2ZjxuUMX_eoGvbnItsI4pDMNkFDrDR16xx8YWkUSJjycWyZoBCgjN7Ln91gExhnaX_Hwi8RBNly5b7S-W368Gc",
  "Nonce": "636687558336400440.MDE5NTNjZWMtZmEwZi00NmVlLTg4YTctMDY3ZjAyOTgyOGEzZGRmZTY5ZjItNWQ0NS00NzBmLWEzYzgtMzc4OTJjZjQwOWZi",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687558336400440.MDE5NTNjZWMtZmEwZi00NmVlLTg4YTctMDY3ZjAyOTgyOGEzZGRmZTY5ZjItNWQ0NS00NzBmLWEzYzgtMzc4OTJjZjQwOWZi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcFhix9kNDX92xaKdoJQUvTKthJaFrLJsh8CCfQMH6G_BBuTZFE86DRrr1Tu_pExre5SbQenF_Mr2kDT5GyK_-I0WRfwbtmut5F0RojH-Xk99xu4Zh7J31oGtrIj4IZZFOYTGwCZWvdYheDe4UIaoeAoRYrwLz24ey56my7NysuahFU_MfSPmBQrsbbyKrq0FUwgpBE3hahFfP05d9D8slekiOaAoW4DLgGEVFBOvEI_OOIPkjUoT2k2Ozd3qc151D-zZXBj_PiVSLlFG6x7qSXMPWi6anbLjtYpsksviO0K2ZjxuUMX_eoGvbnItsI4pDMNkFDrDR16xx8YWkUSJjycWyZoBCgjN7Ln91gExhnaX_Hwi8RBNly5b7S-W368Gc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:30:33.772 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:30:33.894 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:30:33.895 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:30:33.895 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:30:33.895 -06:00 [DBG] No PKCE used.
2018-08-01 15:30:33.895 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:30:33.897 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:30:44.507 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 15:30:49.993 -06:00 [DBG] Augmenting SignInContext
2018-08-01 15:30:49.995 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 15:30:49.995 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 15:30:49.995 -06:00 [DBG] Adding auth_time claim with value: 1533159049
2018-08-01 15:30:50.038 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 15:30:50.077 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "0c239bc3-5811-4d94-99c8-1b538eb8742e",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNUN3SR608:00000004",
  "TimeStamp": "2018-08-01T21:30:50Z",
  "ProcessId": 38862,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 15:30:50.086 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 15:30:50.087 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 15:30:50.087 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 15:30:50.092 -06:00 [DBG] Start authorize callback request
2018-08-01 15:30:50.095 -06:00 [DBG] No user present in authorize request
2018-08-01 15:30:50.095 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:30:50.095 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:30:50.095 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:30:50.095 -06:00 [DBG] No PKCE used.
2018-08-01 15:30:50.095 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:30:50.095 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcFhix9kNDX92xaKdoJQUvTKthJaFrLJsh8CCfQMH6G_BBuTZFE86DRrr1Tu_pExre5SbQenF_Mr2kDT5GyK_-I0WRfwbtmut5F0RojH-Xk99xu4Zh7J31oGtrIj4IZZFOYTGwCZWvdYheDe4UIaoeAoRYrwLz24ey56my7NysuahFU_MfSPmBQrsbbyKrq0FUwgpBE3hahFfP05d9D8slekiOaAoW4DLgGEVFBOvEI_OOIPkjUoT2k2Ozd3qc151D-zZXBj_PiVSLlFG6x7qSXMPWi6anbLjtYpsksviO0K2ZjxuUMX_eoGvbnItsI4pDMNkFDrDR16xx8YWkUSJjycWyZoBCgjN7Ln91gExhnaX_Hwi8RBNly5b7S-W368Gc",
  "Nonce": "636687558336400440.MDE5NTNjZWMtZmEwZi00NmVlLTg4YTctMDY3ZjAyOTgyOGEzZGRmZTY5ZjItNWQ0NS00NzBmLWEzYzgtMzc4OTJjZjQwOWZi",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687558336400440.MDE5NTNjZWMtZmEwZi00NmVlLTg4YTctMDY3ZjAyOTgyOGEzZGRmZTY5ZjItNWQ0NS00NzBmLWEzYzgtMzc4OTJjZjQwOWZi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcFhix9kNDX92xaKdoJQUvTKthJaFrLJsh8CCfQMH6G_BBuTZFE86DRrr1Tu_pExre5SbQenF_Mr2kDT5GyK_-I0WRfwbtmut5F0RojH-Xk99xu4Zh7J31oGtrIj4IZZFOYTGwCZWvdYheDe4UIaoeAoRYrwLz24ey56my7NysuahFU_MfSPmBQrsbbyKrq0FUwgpBE3hahFfP05d9D8slekiOaAoW4DLgGEVFBOvEI_OOIPkjUoT2k2Ozd3qc151D-zZXBj_PiVSLlFG6x7qSXMPWi6anbLjtYpsksviO0K2ZjxuUMX_eoGvbnItsI4pDMNkFDrDR16xx8YWkUSJjycWyZoBCgjN7Ln91gExhnaX_Hwi8RBNly5b7S-W368Gc",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:30:50.095 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:30:50.098 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:30:50.098 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:30:50.098 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:30:50.098 -06:00 [DBG] No PKCE used.
2018-08-01 15:30:50.098 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:30:50.098 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:31:27.568 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 15:31:27.600 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 15:31:27.602 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 15:31:27.603 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 15:31:27.603 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 15:31:27.603 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 15:32:10.445 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 15:32:10.477 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 15:32:10.479 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 15:32:10.479 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 15:32:10.480 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 15:32:10.480 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 15:33:12.401 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 15:33:12.557 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 15:33:12.557 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 15:33:12.560 -06:00 [DBG] Start authorize request
2018-08-01 15:33:12.576 -06:00 [DBG] No user present in authorize request
2018-08-01 15:33:12.581 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:33:12.591 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:33:12.595 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:33:12.596 -06:00 [DBG] No PKCE used.
2018-08-01 15:33:12.625 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:33:12.681 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebir-N1H8henOm3ZY3J08QwzS_Q3fL9DkgOIxO4ET3WbRYGYQwHSg5o4kUheCuuTPak7M3liDBW5-hDcuMUD8zg-tlmcmbXrMrUIH9YqOaVVdgQ_--jTBsNjlImp4l-B_PIhy7vIKYAqW-uRodjKfNwQgfTp0X-OYe6gkVs2khW0lZGQ4-y7dpUucRW7w7z53Qp8P4joJi8i8Zf5b_XKbJjuvcH2g8JVu1Hug_9Pjdk7BKtgPv0zKuUc9FFNx6zx4WKwlDmTBYjCIS-kFjvMgBNgEA6vPuDpPpHVXG1W7mA4B8UQU3_Ytg_6-cGJKIWjw",
  "Nonce": "636687559923256850.NzEzOTkzNWEtNjcwMi00YjIxLWI4NzctOWE4ODA0YmUxMWQ3N2IzOGMyN2EtZWNjOS00N2FkLWEwOTItOTVmMTM1Yjk0MTNi",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687559923256850.NzEzOTkzNWEtNjcwMi00YjIxLWI4NzctOWE4ODA0YmUxMWQ3N2IzOGMyN2EtZWNjOS00N2FkLWEwOTItOTVmMTM1Yjk0MTNi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebir-N1H8henOm3ZY3J08QwzS_Q3fL9DkgOIxO4ET3WbRYGYQwHSg5o4kUheCuuTPak7M3liDBW5-hDcuMUD8zg-tlmcmbXrMrUIH9YqOaVVdgQ_--jTBsNjlImp4l-B_PIhy7vIKYAqW-uRodjKfNwQgfTp0X-OYe6gkVs2khW0lZGQ4-y7dpUucRW7w7z53Qp8P4joJi8i8Zf5b_XKbJjuvcH2g8JVu1Hug_9Pjdk7BKtgPv0zKuUc9FFNx6zx4WKwlDmTBYjCIS-kFjvMgBNgEA6vPuDpPpHVXG1W7mA4B8UQU3_Ytg_6-cGJKIWjw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:33:12.687 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:33:12.815 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:33:12.816 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:33:12.816 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:33:12.816 -06:00 [DBG] No PKCE used.
2018-08-01 15:33:12.816 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:33:12.819 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:33:21.298 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 15:33:26.494 -06:00 [DBG] Augmenting SignInContext
2018-08-01 15:33:26.496 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 15:33:26.496 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 15:33:26.496 -06:00 [DBG] Adding auth_time claim with value: 1533159206
2018-08-01 15:33:26.539 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 15:33:26.592 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "115f19b7-1515-4b6e-8ec5-b29544b309d1",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNUOUPCNKU:00000004",
  "TimeStamp": "2018-08-01T21:33:26Z",
  "ProcessId": 38948,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 15:33:26.601 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 15:33:26.601 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 15:33:26.601 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 15:33:26.606 -06:00 [DBG] Start authorize callback request
2018-08-01 15:33:26.609 -06:00 [DBG] No user present in authorize request
2018-08-01 15:33:26.609 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:33:26.609 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:33:26.609 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:33:26.609 -06:00 [DBG] No PKCE used.
2018-08-01 15:33:26.609 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:33:26.609 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebir-N1H8henOm3ZY3J08QwzS_Q3fL9DkgOIxO4ET3WbRYGYQwHSg5o4kUheCuuTPak7M3liDBW5-hDcuMUD8zg-tlmcmbXrMrUIH9YqOaVVdgQ_--jTBsNjlImp4l-B_PIhy7vIKYAqW-uRodjKfNwQgfTp0X-OYe6gkVs2khW0lZGQ4-y7dpUucRW7w7z53Qp8P4joJi8i8Zf5b_XKbJjuvcH2g8JVu1Hug_9Pjdk7BKtgPv0zKuUc9FFNx6zx4WKwlDmTBYjCIS-kFjvMgBNgEA6vPuDpPpHVXG1W7mA4B8UQU3_Ytg_6-cGJKIWjw",
  "Nonce": "636687559923256850.NzEzOTkzNWEtNjcwMi00YjIxLWI4NzctOWE4ODA0YmUxMWQ3N2IzOGMyN2EtZWNjOS00N2FkLWEwOTItOTVmMTM1Yjk0MTNi",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687559923256850.NzEzOTkzNWEtNjcwMi00YjIxLWI4NzctOWE4ODA0YmUxMWQ3N2IzOGMyN2EtZWNjOS00N2FkLWEwOTItOTVmMTM1Yjk0MTNi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHebir-N1H8henOm3ZY3J08QwzS_Q3fL9DkgOIxO4ET3WbRYGYQwHSg5o4kUheCuuTPak7M3liDBW5-hDcuMUD8zg-tlmcmbXrMrUIH9YqOaVVdgQ_--jTBsNjlImp4l-B_PIhy7vIKYAqW-uRodjKfNwQgfTp0X-OYe6gkVs2khW0lZGQ4-y7dpUucRW7w7z53Qp8P4joJi8i8Zf5b_XKbJjuvcH2g8JVu1Hug_9Pjdk7BKtgPv0zKuUc9FFNx6zx4WKwlDmTBYjCIS-kFjvMgBNgEA6vPuDpPpHVXG1W7mA4B8UQU3_Ytg_6-cGJKIWjw",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:33:26.610 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:33:26.612 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:33:26.612 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:33:26.612 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:33:26.612 -06:00 [DBG] No PKCE used.
2018-08-01 15:33:26.613 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:33:26.613 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:35:24.913 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 15:35:24.945 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 15:35:24.947 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 15:35:24.947 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 15:35:24.948 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 15:35:24.948 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 15:35:32.941 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 15:35:33.095 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 15:35:33.096 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 15:35:33.098 -06:00 [DBG] Start discovery request
2018-08-01 15:36:18.777 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 15:36:18.782 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 15:36:18.807 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 15:36:18.808 -06:00 [DBG] Start discovery request
2018-08-01 15:36:18.919 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-01 15:36:18.919 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-01 15:36:18.919 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-01 15:36:18.922 -06:00 [DBG] Start key discovery request
2018-08-01 15:36:19.034 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 15:36:19.037 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 15:36:19.037 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 15:36:19.040 -06:00 [DBG] Start authorize request
2018-08-01 15:36:19.055 -06:00 [DBG] No user present in authorize request
2018-08-01 15:36:19.059 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:36:19.070 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:36:19.074 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:36:19.075 -06:00 [DBG] No PKCE used.
2018-08-01 15:36:19.100 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:36:19.110 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfSZ2Gdvk9A7yzXFovr2RJavYztqqxFezvaF4V1dLnjrTDORzsjQSYnb-KzBncY_cImvFmjMtBuu_czGpXiayP1hRfTd2nU9w0NaFDVMkil-ZsfwYbnp1vX-mii4Xitj6PKqgxhntrxFXY-aL4Kn9dGWiTV_T4Vlcma1GwIezO3jvuSkThEsTlm6LH4NCw2MdhHMApuGUCa2Vi7j_rvgbNHPrnkorUpsfIhZTyHtNTMgXB056GDDfpEdppOI4CIXdJ9tj4PyTYsfTX0q6JotCl5FACPAmpdxF2vbwDEFvJEQdpbfCKBjkw8AgY2rDjObNHztokEU5eowla_tBxKoen3l-t-zrPnx5E34R-wCm1ewbDsllrNnfOHNTxYUxVjwm4",
  "Nonce": "636687561790067680.YzBiNjQ3ZWYtOTc5ZS00MzE1LTg3YzYtNDM3YzhiZTFmZDEwYzk4MWViYTktMTQ3My00NGY0LTg5NjQtMzY4NDFjOWFiMGNl",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687561790067680.YzBiNjQ3ZWYtOTc5ZS00MzE1LTg3YzYtNDM3YzhiZTFmZDEwYzk4MWViYTktMTQ3My00NGY0LTg5NjQtMzY4NDFjOWFiMGNl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfSZ2Gdvk9A7yzXFovr2RJavYztqqxFezvaF4V1dLnjrTDORzsjQSYnb-KzBncY_cImvFmjMtBuu_czGpXiayP1hRfTd2nU9w0NaFDVMkil-ZsfwYbnp1vX-mii4Xitj6PKqgxhntrxFXY-aL4Kn9dGWiTV_T4Vlcma1GwIezO3jvuSkThEsTlm6LH4NCw2MdhHMApuGUCa2Vi7j_rvgbNHPrnkorUpsfIhZTyHtNTMgXB056GDDfpEdppOI4CIXdJ9tj4PyTYsfTX0q6JotCl5FACPAmpdxF2vbwDEFvJEQdpbfCKBjkw8AgY2rDjObNHztokEU5eowla_tBxKoen3l-t-zrPnx5E34R-wCm1ewbDsllrNnfOHNTxYUxVjwm4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:36:19.117 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:36:19.242 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:36:19.243 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:36:19.243 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:36:19.243 -06:00 [DBG] No PKCE used.
2018-08-01 15:36:19.244 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:36:19.246 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:36:29.110 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 15:36:35.623 -06:00 [DBG] Augmenting SignInContext
2018-08-01 15:36:35.625 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 15:36:35.625 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 15:36:35.625 -06:00 [DBG] Adding auth_time claim with value: 1533159395
2018-08-01 15:36:35.670 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 15:36:44.912 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "115f19b7-1515-4b6e-8ec5-b29544b309d1",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNUQOOKCNE:00000005",
  "TimeStamp": "2018-08-01T21:36:44Z",
  "ProcessId": 38991,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 15:36:44.924 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 15:36:44.925 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 15:36:44.925 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 15:36:44.932 -06:00 [DBG] Start authorize callback request
2018-08-01 15:36:44.935 -06:00 [DBG] No user present in authorize request
2018-08-01 15:36:44.935 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:36:44.935 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:36:44.936 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:36:44.936 -06:00 [DBG] No PKCE used.
2018-08-01 15:36:44.936 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:36:44.936 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfSZ2Gdvk9A7yzXFovr2RJavYztqqxFezvaF4V1dLnjrTDORzsjQSYnb-KzBncY_cImvFmjMtBuu_czGpXiayP1hRfTd2nU9w0NaFDVMkil-ZsfwYbnp1vX-mii4Xitj6PKqgxhntrxFXY-aL4Kn9dGWiTV_T4Vlcma1GwIezO3jvuSkThEsTlm6LH4NCw2MdhHMApuGUCa2Vi7j_rvgbNHPrnkorUpsfIhZTyHtNTMgXB056GDDfpEdppOI4CIXdJ9tj4PyTYsfTX0q6JotCl5FACPAmpdxF2vbwDEFvJEQdpbfCKBjkw8AgY2rDjObNHztokEU5eowla_tBxKoen3l-t-zrPnx5E34R-wCm1ewbDsllrNnfOHNTxYUxVjwm4",
  "Nonce": "636687561790067680.YzBiNjQ3ZWYtOTc5ZS00MzE1LTg3YzYtNDM3YzhiZTFmZDEwYzk4MWViYTktMTQ3My00NGY0LTg5NjQtMzY4NDFjOWFiMGNl",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687561790067680.YzBiNjQ3ZWYtOTc5ZS00MzE1LTg3YzYtNDM3YzhiZTFmZDEwYzk4MWViYTktMTQ3My00NGY0LTg5NjQtMzY4NDFjOWFiMGNl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfSZ2Gdvk9A7yzXFovr2RJavYztqqxFezvaF4V1dLnjrTDORzsjQSYnb-KzBncY_cImvFmjMtBuu_czGpXiayP1hRfTd2nU9w0NaFDVMkil-ZsfwYbnp1vX-mii4Xitj6PKqgxhntrxFXY-aL4Kn9dGWiTV_T4Vlcma1GwIezO3jvuSkThEsTlm6LH4NCw2MdhHMApuGUCa2Vi7j_rvgbNHPrnkorUpsfIhZTyHtNTMgXB056GDDfpEdppOI4CIXdJ9tj4PyTYsfTX0q6JotCl5FACPAmpdxF2vbwDEFvJEQdpbfCKBjkw8AgY2rDjObNHztokEU5eowla_tBxKoen3l-t-zrPnx5E34R-wCm1ewbDsllrNnfOHNTxYUxVjwm4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:36:44.936 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:36:44.939 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:36:44.939 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:36:44.939 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:36:44.939 -06:00 [DBG] No PKCE used.
2018-08-01 15:36:44.939 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:36:44.939 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:37:09.913 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 15:37:12.277 -06:00 [DBG] Augmenting SignInContext
2018-08-01 15:37:12.277 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 15:37:12.277 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 15:37:12.277 -06:00 [DBG] Adding auth_time claim with value: 1533159432
2018-08-01 15:37:12.277 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 15:37:25.815 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "115f19b7-1515-4b6e-8ec5-b29544b309d1",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNUQOOKCNE:00000008",
  "TimeStamp": "2018-08-01T21:37:25Z",
  "ProcessId": 38991,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 15:38:53.300 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 15:39:00.550 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 15:39:00.550 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 15:39:00.550 -06:00 [DBG] Start authorize callback request
2018-08-01 15:39:00.550 -06:00 [DBG] No user present in authorize request
2018-08-01 15:39:00.550 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:39:00.550 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:39:00.550 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:39:00.550 -06:00 [DBG] No PKCE used.
2018-08-01 15:39:00.551 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:39:00.551 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfSZ2Gdvk9A7yzXFovr2RJavYztqqxFezvaF4V1dLnjrTDORzsjQSYnb-KzBncY_cImvFmjMtBuu_czGpXiayP1hRfTd2nU9w0NaFDVMkil-ZsfwYbnp1vX-mii4Xitj6PKqgxhntrxFXY-aL4Kn9dGWiTV_T4Vlcma1GwIezO3jvuSkThEsTlm6LH4NCw2MdhHMApuGUCa2Vi7j_rvgbNHPrnkorUpsfIhZTyHtNTMgXB056GDDfpEdppOI4CIXdJ9tj4PyTYsfTX0q6JotCl5FACPAmpdxF2vbwDEFvJEQdpbfCKBjkw8AgY2rDjObNHztokEU5eowla_tBxKoen3l-t-zrPnx5E34R-wCm1ewbDsllrNnfOHNTxYUxVjwm4",
  "Nonce": "636687561790067680.YzBiNjQ3ZWYtOTc5ZS00MzE1LTg3YzYtNDM3YzhiZTFmZDEwYzk4MWViYTktMTQ3My00NGY0LTg5NjQtMzY4NDFjOWFiMGNl",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687561790067680.YzBiNjQ3ZWYtOTc5ZS00MzE1LTg3YzYtNDM3YzhiZTFmZDEwYzk4MWViYTktMTQ3My00NGY0LTg5NjQtMzY4NDFjOWFiMGNl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfSZ2Gdvk9A7yzXFovr2RJavYztqqxFezvaF4V1dLnjrTDORzsjQSYnb-KzBncY_cImvFmjMtBuu_czGpXiayP1hRfTd2nU9w0NaFDVMkil-ZsfwYbnp1vX-mii4Xitj6PKqgxhntrxFXY-aL4Kn9dGWiTV_T4Vlcma1GwIezO3jvuSkThEsTlm6LH4NCw2MdhHMApuGUCa2Vi7j_rvgbNHPrnkorUpsfIhZTyHtNTMgXB056GDDfpEdppOI4CIXdJ9tj4PyTYsfTX0q6JotCl5FACPAmpdxF2vbwDEFvJEQdpbfCKBjkw8AgY2rDjObNHztokEU5eowla_tBxKoen3l-t-zrPnx5E34R-wCm1ewbDsllrNnfOHNTxYUxVjwm4",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:39:00.551 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:39:00.553 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:39:00.553 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:39:00.553 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:39:00.553 -06:00 [DBG] No PKCE used.
2018-08-01 15:39:00.553 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:39:00.553 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:40:47.991 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 15:40:47.991 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 15:40:47.991 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 15:40:47.991 -06:00 [DBG] Start discovery request
2018-08-01 15:40:48.053 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-01 15:40:48.053 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-01 15:40:48.053 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-01 15:40:48.053 -06:00 [DBG] Start key discovery request
2018-08-01 15:40:48.110 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 15:40:48.117 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 15:40:48.117 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 15:40:48.117 -06:00 [DBG] Start authorize request
2018-08-01 15:40:48.117 -06:00 [DBG] No user present in authorize request
2018-08-01 15:40:48.117 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:40:48.117 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-08-01 15:40:48.117 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:40:48.117 -06:00 [DBG] No PKCE used.
2018-08-01 15:40:48.121 -06:00 [ERR] Invalid scope: color
2018-08-01 15:40:48.124 -06:00 [ERR] Request validation failed
2018-08-01 15:40:48.124 -06:00 [INF] {
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location color",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfa2etcV7qi-D52AiyueuyYxya4YXxPfIW_3VxaYRFsYjSmYYvudTXkY2xBgmYqrtcKIZa9rHYsvVLBOIs015Hd98dNTA4uoGJJhGq5lqgFGUE62t7CFM-noZ4m7PpQGF35iPpAJSGmJWrBm36DlEkDf-s8mzNliy2bBCqVy4Yn_3tKfZJudadcefr-g_w55HhtSRUgdzf2ZXfm38kqbIF4XAyvcHeaZXQhjOvRJFRF_GM2wg0MW6ZI51mne9_wCHiHDfKpKM62-q827qPhnCc0cTJFdB365oSChmBLDiShVzWENvFDz7F2k_SOYN_geI0",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location color",
    "response_mode": "form_post",
    "nonce": "636687564480728230.ZmMwNzQzMTUtNTQ2YS00M2Q4LThjNTYtNWY1NzFmNWUxYzU3Yzg2MTVmYmMtYThlZS00Zjk1LTkxZWUtMzBiNTgyODNmMzQ4",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfa2etcV7qi-D52AiyueuyYxya4YXxPfIW_3VxaYRFsYjSmYYvudTXkY2xBgmYqrtcKIZa9rHYsvVLBOIs015Hd98dNTA4uoGJJhGq5lqgFGUE62t7CFM-noZ4m7PpQGF35iPpAJSGmJWrBm36DlEkDf-s8mzNliy2bBCqVy4Yn_3tKfZJudadcefr-g_w55HhtSRUgdzf2ZXfm38kqbIF4XAyvcHeaZXQhjOvRJFRF_GM2wg0MW6ZI51mne9_wCHiHDfKpKM62-q827qPhnCc0cTJFdB365oSChmBLDiShVzWENvFDz7F2k_SOYN_geI0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:40:48.129 -06:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "Endpoint": "Authorize",
  "Scopes": "openid profile email location color",
  "GrantType": "hybrid",
  "Error": "invalid_scope",
  "ActivityId": "0HLFNUQOOKCNE:0000000B",
  "TimeStamp": "2018-08-01T21:40:48Z",
  "ProcessId": 38991,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 15:41:40.021 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 15:41:40.021 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 15:41:40.021 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 15:41:40.021 -06:00 [DBG] Start discovery request
2018-08-01 15:41:40.081 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-01 15:41:40.081 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-01 15:41:40.081 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-01 15:41:40.081 -06:00 [DBG] Start key discovery request
2018-08-01 15:41:40.134 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 15:41:40.134 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 15:41:40.134 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 15:41:40.135 -06:00 [DBG] Start authorize request
2018-08-01 15:41:40.135 -06:00 [DBG] No user present in authorize request
2018-08-01 15:41:40.135 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:41:40.135 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-08-01 15:41:40.135 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:41:40.135 -06:00 [DBG] No PKCE used.
2018-08-01 15:41:40.135 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:41:40.135 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc-Mtc30jenmoUnx2NbW3Ay9KmDL09MztYYQSj-N2ksruIKHagt3iWPIHCcMdlzKbd-UAB7PxaapWSMFBus_uIYDYI7ErnWimkawdyWFouJrlJmPl8HAU_xG_rTzZkdpgoiW-FrQGueOzzMsY82BPmuDzy9DGgu0HLAFqWBs1zNAyTfrwc89_iLBMQdrUdQq7RjW1nvgA8U56U_ZuQTOqC-t0zKbyFxD61eokEzX1NmtII_kfF6LcAs-VNPnSs6irFQsDrAHUCd3qn5zUduN1jCx3UmCv04tkOfZ5ZhwogO2Wvx2qzzUrT1SFlAJVWGPR0",
  "Nonce": "636687565000953170.N2NmNWJmYTItM2QwYi00MDBkLWFhZjgtOGVmNTBhYTc1NTdkMjI3ZjUxZWUtOWQ1OS00NjM1LWIzN2MtNzU3ZGFjMWUzYTM1",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location",
    "response_mode": "form_post",
    "nonce": "636687565000953170.N2NmNWJmYTItM2QwYi00MDBkLWFhZjgtOGVmNTBhYTc1NTdkMjI3ZjUxZWUtOWQ1OS00NjM1LWIzN2MtNzU3ZGFjMWUzYTM1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc-Mtc30jenmoUnx2NbW3Ay9KmDL09MztYYQSj-N2ksruIKHagt3iWPIHCcMdlzKbd-UAB7PxaapWSMFBus_uIYDYI7ErnWimkawdyWFouJrlJmPl8HAU_xG_rTzZkdpgoiW-FrQGueOzzMsY82BPmuDzy9DGgu0HLAFqWBs1zNAyTfrwc89_iLBMQdrUdQq7RjW1nvgA8U56U_ZuQTOqC-t0zKbyFxD61eokEzX1NmtII_kfF6LcAs-VNPnSs6irFQsDrAHUCd3qn5zUduN1jCx3UmCv04tkOfZ5ZhwogO2Wvx2qzzUrT1SFlAJVWGPR0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:41:40.135 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:41:40.140 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:41:40.140 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-08-01 15:41:40.140 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:41:40.140 -06:00 [DBG] No PKCE used.
2018-08-01 15:41:40.140 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:41:40.140 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-08-01 15:41:47.808 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 15:41:50.462 -06:00 [DBG] Augmenting SignInContext
2018-08-01 15:41:50.462 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 15:41:50.462 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 15:41:50.462 -06:00 [DBG] Adding auth_time claim with value: 1533159710
2018-08-01 15:41:50.462 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 15:41:50.463 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "115f19b7-1515-4b6e-8ec5-b29544b309d1",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNUQOOKCNE:0000000F",
  "TimeStamp": "2018-08-01T21:41:50Z",
  "ProcessId": 38991,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 15:41:50.465 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 15:41:50.465 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 15:41:50.465 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 15:41:50.465 -06:00 [DBG] Start authorize callback request
2018-08-01 15:41:50.465 -06:00 [DBG] No user present in authorize request
2018-08-01 15:41:50.465 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:41:50.465 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-08-01 15:41:50.465 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:41:50.465 -06:00 [DBG] No PKCE used.
2018-08-01 15:41:50.465 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:41:50.465 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "toDoBox",
  "ClientName": "ToDoBox Client",
  "RedirectUri": "https://localhost:5003/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5003/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile email location",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc-Mtc30jenmoUnx2NbW3Ay9KmDL09MztYYQSj-N2ksruIKHagt3iWPIHCcMdlzKbd-UAB7PxaapWSMFBus_uIYDYI7ErnWimkawdyWFouJrlJmPl8HAU_xG_rTzZkdpgoiW-FrQGueOzzMsY82BPmuDzy9DGgu0HLAFqWBs1zNAyTfrwc89_iLBMQdrUdQq7RjW1nvgA8U56U_ZuQTOqC-t0zKbyFxD61eokEzX1NmtII_kfF6LcAs-VNPnSs6irFQsDrAHUCd3qn5zUduN1jCx3UmCv04tkOfZ5ZhwogO2Wvx2qzzUrT1SFlAJVWGPR0",
  "Nonce": "636687565000953170.N2NmNWJmYTItM2QwYi00MDBkLWFhZjgtOGVmNTBhYTc1NTdkMjI3ZjUxZWUtOWQ1OS00NjM1LWIzN2MtNzU3ZGFjMWUzYTM1",
  "Raw": {
    "client_id": "toDoBox",
    "redirect_uri": "https://localhost:5003/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile email location",
    "response_mode": "form_post",
    "nonce": "636687565000953170.N2NmNWJmYTItM2QwYi00MDBkLWFhZjgtOGVmNTBhYTc1NTdkMjI3ZjUxZWUtOWQ1OS00NjM1LWIzN2MtNzU3ZGFjMWUzYTM1",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc-Mtc30jenmoUnx2NbW3Ay9KmDL09MztYYQSj-N2ksruIKHagt3iWPIHCcMdlzKbd-UAB7PxaapWSMFBus_uIYDYI7ErnWimkawdyWFouJrlJmPl8HAU_xG_rTzZkdpgoiW-FrQGueOzzMsY82BPmuDzy9DGgu0HLAFqWBs1zNAyTfrwc89_iLBMQdrUdQq7RjW1nvgA8U56U_ZuQTOqC-t0zKbyFxD61eokEzX1NmtII_kfF6LcAs-VNPnSs6irFQsDrAHUCd3qn5zUduN1jCx3UmCv04tkOfZ5ZhwogO2Wvx2qzzUrT1SFlAJVWGPR0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:41:50.465 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:41:50.489 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:41:50.489 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-08-01 15:41:50.489 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:41:50.489 -06:00 [DBG] No PKCE used.
2018-08-01 15:41:50.489 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:41:50.489 -06:00 [DBG] client configuration validation for client toDoBox succeeded.
2018-08-01 15:45:22.240 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 15:45:22.272 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 15:45:22.275 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 15:45:22.275 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 15:45:22.275 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 15:45:22.275 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 15:46:26.448 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 15:46:26.480 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 15:46:26.482 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 15:46:26.482 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 15:46:26.483 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 15:46:26.483 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 15:47:10.089 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 15:47:10.122 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 15:47:10.125 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 15:47:10.125 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 15:47:10.125 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 15:47:10.126 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 15:47:37.820 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 15:47:37.974 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 15:47:37.974 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 15:47:37.976 -06:00 [DBG] Start discovery request
2018-08-01 15:47:38.135 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-01 15:47:38.136 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-01 15:47:38.136 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-01 15:47:38.139 -06:00 [DBG] Start key discovery request
2018-08-01 15:47:38.280 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 15:47:38.282 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 15:47:38.282 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 15:47:38.285 -06:00 [DBG] Start authorize request
2018-08-01 15:47:38.300 -06:00 [DBG] No user present in authorize request
2018-08-01 15:47:38.304 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:47:38.315 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:47:38.319 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:47:38.320 -06:00 [DBG] No PKCE used.
2018-08-01 15:47:38.345 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:47:38.355 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdmzkiG54htdhn816f2mdztEA21BT4F85vlr0ZJfSPbrn9I6AWQIWC_myYcM2fS4nbdk-onxJmTi-sMmQSubtXhukPi8XyW_Sr82D3uJU-fJ3vnIY7Q7b-mH2IAxHVCEL20wK43T0anb-6ZwN5kByE8HV7x8hCj3fPryL9sCJQM5B1FyG7MzZJa_lsMM6yBCBYQNG8D7asKZ1_iuxcVJ9Yv1CZzWEYSX1uqXV0pcPFxLNWbPpcBKPQXTK3PArNFDwRAP5UKN6qH9MgxONguBE_Sdo0Z9FeSPCUcxOvUVQDRJOSf64RcOw0Xab0bbd8g3eE",
  "Nonce": "636687568582264390.OGZhMWMwYmYtMzViOS00MzNmLWFiMGYtNzE2NDA4N2I0NjU1ZDgwNDQ2MmEtYzAzNi00NjBmLWI1NTctNDA5NTg0NTk1ZmYx",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687568582264390.OGZhMWMwYmYtMzViOS00MzNmLWFiMGYtNzE2NDA4N2I0NjU1ZDgwNDQ2MmEtYzAzNi00NjBmLWI1NTctNDA5NTg0NTk1ZmYx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdmzkiG54htdhn816f2mdztEA21BT4F85vlr0ZJfSPbrn9I6AWQIWC_myYcM2fS4nbdk-onxJmTi-sMmQSubtXhukPi8XyW_Sr82D3uJU-fJ3vnIY7Q7b-mH2IAxHVCEL20wK43T0anb-6ZwN5kByE8HV7x8hCj3fPryL9sCJQM5B1FyG7MzZJa_lsMM6yBCBYQNG8D7asKZ1_iuxcVJ9Yv1CZzWEYSX1uqXV0pcPFxLNWbPpcBKPQXTK3PArNFDwRAP5UKN6qH9MgxONguBE_Sdo0Z9FeSPCUcxOvUVQDRJOSf64RcOw0Xab0bbd8g3eE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:47:38.361 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:47:38.483 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:47:38.484 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:47:38.484 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:47:38.484 -06:00 [DBG] No PKCE used.
2018-08-01 15:47:38.484 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:47:38.486 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:47:46.198 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 15:47:51.571 -06:00 [DBG] Augmenting SignInContext
2018-08-01 15:47:51.573 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 15:47:51.573 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 15:47:51.573 -06:00 [DBG] Adding auth_time claim with value: 1533160071
2018-08-01 15:47:51.615 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 15:47:51.653 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "1c211cc9-82c1-48f7-a363-b2b32764a48f",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNV1ATQNU8:00000004",
  "TimeStamp": "2018-08-01T21:47:51Z",
  "ProcessId": 39174,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 15:47:51.662 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 15:47:51.662 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 15:47:51.662 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 15:47:51.667 -06:00 [DBG] Start authorize callback request
2018-08-01 15:47:51.670 -06:00 [DBG] No user present in authorize request
2018-08-01 15:47:51.670 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:47:51.670 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:47:51.670 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:47:51.670 -06:00 [DBG] No PKCE used.
2018-08-01 15:47:51.670 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:47:51.670 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdmzkiG54htdhn816f2mdztEA21BT4F85vlr0ZJfSPbrn9I6AWQIWC_myYcM2fS4nbdk-onxJmTi-sMmQSubtXhukPi8XyW_Sr82D3uJU-fJ3vnIY7Q7b-mH2IAxHVCEL20wK43T0anb-6ZwN5kByE8HV7x8hCj3fPryL9sCJQM5B1FyG7MzZJa_lsMM6yBCBYQNG8D7asKZ1_iuxcVJ9Yv1CZzWEYSX1uqXV0pcPFxLNWbPpcBKPQXTK3PArNFDwRAP5UKN6qH9MgxONguBE_Sdo0Z9FeSPCUcxOvUVQDRJOSf64RcOw0Xab0bbd8g3eE",
  "Nonce": "636687568582264390.OGZhMWMwYmYtMzViOS00MzNmLWFiMGYtNzE2NDA4N2I0NjU1ZDgwNDQ2MmEtYzAzNi00NjBmLWI1NTctNDA5NTg0NTk1ZmYx",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687568582264390.OGZhMWMwYmYtMzViOS00MzNmLWFiMGYtNzE2NDA4N2I0NjU1ZDgwNDQ2MmEtYzAzNi00NjBmLWI1NTctNDA5NTg0NTk1ZmYx",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHdmzkiG54htdhn816f2mdztEA21BT4F85vlr0ZJfSPbrn9I6AWQIWC_myYcM2fS4nbdk-onxJmTi-sMmQSubtXhukPi8XyW_Sr82D3uJU-fJ3vnIY7Q7b-mH2IAxHVCEL20wK43T0anb-6ZwN5kByE8HV7x8hCj3fPryL9sCJQM5B1FyG7MzZJa_lsMM6yBCBYQNG8D7asKZ1_iuxcVJ9Yv1CZzWEYSX1uqXV0pcPFxLNWbPpcBKPQXTK3PArNFDwRAP5UKN6qH9MgxONguBE_Sdo0Z9FeSPCUcxOvUVQDRJOSf64RcOw0Xab0bbd8g3eE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:47:51.670 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:47:51.673 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:47:51.673 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:47:51.673 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:47:51.673 -06:00 [DBG] No PKCE used.
2018-08-01 15:47:51.673 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:47:51.673 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:54:25.074 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 15:54:50.157 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 15:54:50.190 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 15:54:50.192 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 15:54:50.193 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 15:54:50.193 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 15:54:50.193 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 15:55:13.807 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 15:55:13.964 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 15:55:13.964 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 15:55:13.967 -06:00 [DBG] Start discovery request
2018-08-01 15:55:14.126 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-01 15:55:14.127 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-01 15:55:14.127 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-01 15:55:14.130 -06:00 [DBG] Start key discovery request
2018-08-01 15:55:14.258 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 15:55:14.261 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 15:55:14.261 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 15:55:14.265 -06:00 [DBG] Start authorize request
2018-08-01 15:55:14.281 -06:00 [DBG] No user present in authorize request
2018-08-01 15:55:14.285 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:55:14.296 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:55:14.300 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:55:14.301 -06:00 [DBG] No PKCE used.
2018-08-01 15:55:14.327 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:55:14.338 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcOVnhEYaZ0rLmHrlKTkNz1DZxgeyvqi9N5VidhgSkHxMLZiWLKdfqqrKoSsEjb5OgpYGBzquGtkoOxKLL2OPECS7gnWTVT1ohg7EDl7zGgKngTqvi9uPnjAvw7X42ND9Tt-wdORrZRN8yvxmfdmprnkryoDAbkZkGzdlUrMxfboPKj6X8Frc54pk1kIPPIZSOKgQcEHXjJo8iRjkyuuuoXRnoCTqVLKUtgBl3nkB-ABAgHbHCldapjP-zgerOtNIeVJIA8a5aZwcs3vcm7hMgnh0xdn3bsYOJb-raUxkw52tYudRtYAnTfaBSh_LIlemg",
  "Nonce": "636687573142110310.NzdlYThmNzQtNWU2Yi00NTE2LTg4NWEtNWNiOTQwN2I3OTExMTlhMGNlN2ItZWVmYy00OTM3LTk4NDQtYzc5YjAzNjI5NmZk",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687573142110310.NzdlYThmNzQtNWU2Yi00NTE2LTg4NWEtNWNiOTQwN2I3OTExMTlhMGNlN2ItZWVmYy00OTM3LTk4NDQtYzc5YjAzNjI5NmZk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcOVnhEYaZ0rLmHrlKTkNz1DZxgeyvqi9N5VidhgSkHxMLZiWLKdfqqrKoSsEjb5OgpYGBzquGtkoOxKLL2OPECS7gnWTVT1ohg7EDl7zGgKngTqvi9uPnjAvw7X42ND9Tt-wdORrZRN8yvxmfdmprnkryoDAbkZkGzdlUrMxfboPKj6X8Frc54pk1kIPPIZSOKgQcEHXjJo8iRjkyuuuoXRnoCTqVLKUtgBl3nkB-ABAgHbHCldapjP-zgerOtNIeVJIA8a5aZwcs3vcm7hMgnh0xdn3bsYOJb-raUxkw52tYudRtYAnTfaBSh_LIlemg",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:55:14.344 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:55:14.470 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:55:14.471 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:55:14.471 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:55:14.471 -06:00 [DBG] No PKCE used.
2018-08-01 15:55:14.471 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:55:14.473 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:55:25.338 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 15:55:33.995 -06:00 [DBG] Augmenting SignInContext
2018-08-01 15:55:33.996 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 15:55:33.996 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 15:55:33.997 -06:00 [DBG] Adding auth_time claim with value: 1533160533
2018-08-01 15:55:34.028 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 15:56:28.163 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "1c211cc9-82c1-48f7-a363-b2b32764a48f",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNV5K244U6:00000004",
  "TimeStamp": "2018-08-01T21:56:28Z",
  "ProcessId": 39275,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 15:57:57.339 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 15:58:11.429 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 15:58:11.429 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 15:58:11.435 -06:00 [DBG] Start authorize callback request
2018-08-01 15:58:11.438 -06:00 [DBG] No user present in authorize request
2018-08-01 15:58:11.438 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:58:11.438 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:58:11.438 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:58:11.438 -06:00 [DBG] No PKCE used.
2018-08-01 15:58:11.438 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:58:11.439 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcOVnhEYaZ0rLmHrlKTkNz1DZxgeyvqi9N5VidhgSkHxMLZiWLKdfqqrKoSsEjb5OgpYGBzquGtkoOxKLL2OPECS7gnWTVT1ohg7EDl7zGgKngTqvi9uPnjAvw7X42ND9Tt-wdORrZRN8yvxmfdmprnkryoDAbkZkGzdlUrMxfboPKj6X8Frc54pk1kIPPIZSOKgQcEHXjJo8iRjkyuuuoXRnoCTqVLKUtgBl3nkB-ABAgHbHCldapjP-zgerOtNIeVJIA8a5aZwcs3vcm7hMgnh0xdn3bsYOJb-raUxkw52tYudRtYAnTfaBSh_LIlemg",
  "Nonce": "636687573142110310.NzdlYThmNzQtNWU2Yi00NTE2LTg4NWEtNWNiOTQwN2I3OTExMTlhMGNlN2ItZWVmYy00OTM3LTk4NDQtYzc5YjAzNjI5NmZk",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687573142110310.NzdlYThmNzQtNWU2Yi00NTE2LTg4NWEtNWNiOTQwN2I3OTExMTlhMGNlN2ItZWVmYy00OTM3LTk4NDQtYzc5YjAzNjI5NmZk",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcOVnhEYaZ0rLmHrlKTkNz1DZxgeyvqi9N5VidhgSkHxMLZiWLKdfqqrKoSsEjb5OgpYGBzquGtkoOxKLL2OPECS7gnWTVT1ohg7EDl7zGgKngTqvi9uPnjAvw7X42ND9Tt-wdORrZRN8yvxmfdmprnkryoDAbkZkGzdlUrMxfboPKj6X8Frc54pk1kIPPIZSOKgQcEHXjJo8iRjkyuuuoXRnoCTqVLKUtgBl3nkB-ABAgHbHCldapjP-zgerOtNIeVJIA8a5aZwcs3vcm7hMgnh0xdn3bsYOJb-raUxkw52tYudRtYAnTfaBSh_LIlemg",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:58:11.439 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:58:11.442 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:58:11.442 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:58:11.442 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:58:11.442 -06:00 [DBG] No PKCE used.
2018-08-01 15:58:11.442 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:58:11.442 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:59:46.932 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 15:59:46.932 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 15:59:46.932 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 15:59:46.936 -06:00 [DBG] Start authorize request
2018-08-01 15:59:46.936 -06:00 [DBG] No user present in authorize request
2018-08-01 15:59:46.936 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:59:46.936 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:59:46.936 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:59:46.936 -06:00 [DBG] No PKCE used.
2018-08-01 15:59:46.936 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:59:46.936 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd-gPVybh3ZGY0tonRw3y5a-jQVqWCpfGQrYxGr_KcEZnurWUM3FkFWtgrp8A6AQ4zQSHeREhbzyCsB8_6bVYQ6IG_EyB7pjcZcwA0i_XazQu4_TyjtFA1OC0SdIvibbgBxYZqO9ZVYh8pTUFk-4X7slzS70dqJwAKW7sdMn8uU0AfpbDCBjg3idhW352vS0YsOIdWCFdHBLrtjM_1tZoOCZGoCSdzNJIj_uDhRNVStMD2x8lS7ABjH_Bls35-jZXaKtws9HZySezYziGovMmV9a_lkgJcuPIffy7xu4heIOahdZ9yGpxXZhRCq4kC6evk",
  "Nonce": "636687575868896140.NWM0ZjdhNTMtMmMwYS00NDQ0LTk0ZGItNDBiYmZmOWYxMDk2YTBiMGE2YjItMzA2ZC00ZDlmLTkzNDYtN2E3N2MyMjdkZDVh",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687575868896140.NWM0ZjdhNTMtMmMwYS00NDQ0LTk0ZGItNDBiYmZmOWYxMDk2YTBiMGE2YjItMzA2ZC00ZDlmLTkzNDYtN2E3N2MyMjdkZDVh",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd-gPVybh3ZGY0tonRw3y5a-jQVqWCpfGQrYxGr_KcEZnurWUM3FkFWtgrp8A6AQ4zQSHeREhbzyCsB8_6bVYQ6IG_EyB7pjcZcwA0i_XazQu4_TyjtFA1OC0SdIvibbgBxYZqO9ZVYh8pTUFk-4X7slzS70dqJwAKW7sdMn8uU0AfpbDCBjg3idhW352vS0YsOIdWCFdHBLrtjM_1tZoOCZGoCSdzNJIj_uDhRNVStMD2x8lS7ABjH_Bls35-jZXaKtws9HZySezYziGovMmV9a_lkgJcuPIffy7xu4heIOahdZ9yGpxXZhRCq4kC6evk",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 15:59:46.936 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 15:59:46.938 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 15:59:46.938 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 15:59:46.938 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 15:59:46.938 -06:00 [DBG] No PKCE used.
2018-08-01 15:59:46.938 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 15:59:46.938 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:00:07.824 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 16:00:07.825 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 16:00:07.825 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 16:00:07.825 -06:00 [DBG] Start authorize request
2018-08-01 16:00:07.825 -06:00 [DBG] No user present in authorize request
2018-08-01 16:00:07.825 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:00:07.825 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:00:07.825 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:00:07.825 -06:00 [DBG] No PKCE used.
2018-08-01 16:00:07.825 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:00:07.825 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfOcBRdW01qJJdaAxnkMqG8nSQBkXNnnOuOod7yCpmRL4oSI8Na1zWRy33XFum8FiRwP3iiElyTMjqH142fHMU704_sMs1ItHjn-i5jH5r9rOQIPcqMqS_e4mMyuoIa_3OyUQkvmNeQ8M1s4Drv2cueTW8VDHAOxUcNJYU6rJQVRXCzZV-KwGRPlWAD17Ufr9PWF36-z5BBCPQ8ai1ke6PNZ7QzQ2WpZqJq2Eh5oVkczz6zjx1JkL2VE-oUGUGGhd1SUFsmPHQ8U0iCAJXXvhKgB4LTsGYIaFHXEBZwCKgyzr1yPgIV7iqXZHiL1zIfAQA",
  "Nonce": "636687576077499550.YjAyMzY0YzctNzhkMS00NTM0LTg1MjUtOTQ4MzkxZGUwNWQ4ZDM0YmI5YzUtY2VhOC00ZTc2LWFiMGUtY2YyNDgyNWI4ZTBi",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687576077499550.YjAyMzY0YzctNzhkMS00NTM0LTg1MjUtOTQ4MzkxZGUwNWQ4ZDM0YmI5YzUtY2VhOC00ZTc2LWFiMGUtY2YyNDgyNWI4ZTBi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfOcBRdW01qJJdaAxnkMqG8nSQBkXNnnOuOod7yCpmRL4oSI8Na1zWRy33XFum8FiRwP3iiElyTMjqH142fHMU704_sMs1ItHjn-i5jH5r9rOQIPcqMqS_e4mMyuoIa_3OyUQkvmNeQ8M1s4Drv2cueTW8VDHAOxUcNJYU6rJQVRXCzZV-KwGRPlWAD17Ufr9PWF36-z5BBCPQ8ai1ke6PNZ7QzQ2WpZqJq2Eh5oVkczz6zjx1JkL2VE-oUGUGGhd1SUFsmPHQ8U0iCAJXXvhKgB4LTsGYIaFHXEBZwCKgyzr1yPgIV7iqXZHiL1zIfAQA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 16:00:07.825 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 16:00:07.828 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:00:07.828 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:00:07.828 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:00:07.828 -06:00 [DBG] No PKCE used.
2018-08-01 16:00:07.828 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:00:07.828 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:00:15.625 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 16:00:18.478 -06:00 [DBG] Augmenting SignInContext
2018-08-01 16:00:18.478 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 16:00:18.478 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 16:00:18.478 -06:00 [DBG] Adding auth_time claim with value: 1533160818
2018-08-01 16:00:18.479 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 16:00:18.480 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "1c211cc9-82c1-48f7-a363-b2b32764a48f",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNV5K244U6:0000000B",
  "TimeStamp": "2018-08-01T22:00:18Z",
  "ProcessId": 39275,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 16:00:18.482 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 16:00:18.482 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 16:00:18.483 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 16:00:18.483 -06:00 [DBG] Start authorize callback request
2018-08-01 16:00:18.483 -06:00 [DBG] No user present in authorize request
2018-08-01 16:00:18.483 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:00:18.483 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:00:18.483 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:00:18.483 -06:00 [DBG] No PKCE used.
2018-08-01 16:00:18.483 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:00:18.483 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfOcBRdW01qJJdaAxnkMqG8nSQBkXNnnOuOod7yCpmRL4oSI8Na1zWRy33XFum8FiRwP3iiElyTMjqH142fHMU704_sMs1ItHjn-i5jH5r9rOQIPcqMqS_e4mMyuoIa_3OyUQkvmNeQ8M1s4Drv2cueTW8VDHAOxUcNJYU6rJQVRXCzZV-KwGRPlWAD17Ufr9PWF36-z5BBCPQ8ai1ke6PNZ7QzQ2WpZqJq2Eh5oVkczz6zjx1JkL2VE-oUGUGGhd1SUFsmPHQ8U0iCAJXXvhKgB4LTsGYIaFHXEBZwCKgyzr1yPgIV7iqXZHiL1zIfAQA",
  "Nonce": "636687576077499550.YjAyMzY0YzctNzhkMS00NTM0LTg1MjUtOTQ4MzkxZGUwNWQ4ZDM0YmI5YzUtY2VhOC00ZTc2LWFiMGUtY2YyNDgyNWI4ZTBi",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687576077499550.YjAyMzY0YzctNzhkMS00NTM0LTg1MjUtOTQ4MzkxZGUwNWQ4ZDM0YmI5YzUtY2VhOC00ZTc2LWFiMGUtY2YyNDgyNWI4ZTBi",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfOcBRdW01qJJdaAxnkMqG8nSQBkXNnnOuOod7yCpmRL4oSI8Na1zWRy33XFum8FiRwP3iiElyTMjqH142fHMU704_sMs1ItHjn-i5jH5r9rOQIPcqMqS_e4mMyuoIa_3OyUQkvmNeQ8M1s4Drv2cueTW8VDHAOxUcNJYU6rJQVRXCzZV-KwGRPlWAD17Ufr9PWF36-z5BBCPQ8ai1ke6PNZ7QzQ2WpZqJq2Eh5oVkczz6zjx1JkL2VE-oUGUGGhd1SUFsmPHQ8U0iCAJXXvhKgB4LTsGYIaFHXEBZwCKgyzr1yPgIV7iqXZHiL1zIfAQA",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 16:00:18.484 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 16:00:18.486 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:00:18.486 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:00:18.486 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:00:18.487 -06:00 [DBG] No PKCE used.
2018-08-01 16:00:18.487 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:00:18.487 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:02:12.720 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 16:02:12.750 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 16:02:12.753 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 16:02:12.753 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 16:02:12.753 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 16:02:12.753 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 16:02:28.902 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 16:02:29.067 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 16:02:29.067 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 16:02:29.070 -06:00 [DBG] Start authorize request
2018-08-01 16:02:29.086 -06:00 [DBG] No user present in authorize request
2018-08-01 16:02:29.090 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:02:29.101 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:02:29.105 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:02:29.106 -06:00 [DBG] No PKCE used.
2018-08-01 16:02:29.137 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:02:29.194 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc04q5AYB5i9YMjs8idfuTPrE0HLn4zphA8KMD0jGVvn5VXwIbI6iH7gdAH16nlYIWcJoqqyJ50r_FnBhLVa_Vy_xRY5Wbr8P9ZfjHFnwXoNEZ4UuMYr5updtBkoae1sK0iq_NB_8pMCg_IxZletQ1CVOtfbwk_YUQNMdLlESvljPUWqtEL5bFwLX6GcUegdPVYP5BeQ_6KPROXvGFid-bRt30R0D0iDUkDuNI9phzPXayCeFNDDTUcheJwh4eOoTa5kuQu_d2xf_Dcej8J7fTxjmkvq1TgFF3rKhZBRmNB620G3T_2xhA-kylXZ2xLzvrXuGRvohzTlRAEVpxLq5DK9v-VFIZH-f8e0H34xhFuXSZW9XWY2ddf_8SNFig02SI",
  "Nonce": "636687577488365490.YjdmM2IxYmMtZjM4MS00MzlkLTk5ZWQtNGY3OGEyZjcxY2U1OWU0MGFkZDctNTQ0MS00N2YzLTlmMDMtMGU3NTY4NTQ5MTZl",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687577488365490.YjdmM2IxYmMtZjM4MS00MzlkLTk5ZWQtNGY3OGEyZjcxY2U1OWU0MGFkZDctNTQ0MS00N2YzLTlmMDMtMGU3NTY4NTQ5MTZl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc04q5AYB5i9YMjs8idfuTPrE0HLn4zphA8KMD0jGVvn5VXwIbI6iH7gdAH16nlYIWcJoqqyJ50r_FnBhLVa_Vy_xRY5Wbr8P9ZfjHFnwXoNEZ4UuMYr5updtBkoae1sK0iq_NB_8pMCg_IxZletQ1CVOtfbwk_YUQNMdLlESvljPUWqtEL5bFwLX6GcUegdPVYP5BeQ_6KPROXvGFid-bRt30R0D0iDUkDuNI9phzPXayCeFNDDTUcheJwh4eOoTa5kuQu_d2xf_Dcej8J7fTxjmkvq1TgFF3rKhZBRmNB620G3T_2xhA-kylXZ2xLzvrXuGRvohzTlRAEVpxLq5DK9v-VFIZH-f8e0H34xhFuXSZW9XWY2ddf_8SNFig02SI",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 16:02:29.201 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 16:02:29.328 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:02:29.329 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:02:29.329 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:02:29.329 -06:00 [DBG] No PKCE used.
2018-08-01 16:02:29.329 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:02:29.332 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:02:37.642 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 16:02:42.023 -06:00 [DBG] Augmenting SignInContext
2018-08-01 16:02:42.025 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 16:02:42.025 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 16:02:42.025 -06:00 [DBG] Adding auth_time claim with value: 1533160962
2018-08-01 16:02:42.066 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 16:02:42.118 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "1c211cc9-82c1-48f7-a363-b2b32764a48f",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNV9NTJ5MO:00000004",
  "TimeStamp": "2018-08-01T22:02:42Z",
  "ProcessId": 39390,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 16:02:42.126 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 16:02:42.127 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 16:02:42.127 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 16:02:42.131 -06:00 [DBG] Start authorize callback request
2018-08-01 16:02:42.134 -06:00 [DBG] No user present in authorize request
2018-08-01 16:02:42.134 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:02:42.134 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:02:42.134 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:02:42.134 -06:00 [DBG] No PKCE used.
2018-08-01 16:02:42.134 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:02:42.134 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc04q5AYB5i9YMjs8idfuTPrE0HLn4zphA8KMD0jGVvn5VXwIbI6iH7gdAH16nlYIWcJoqqyJ50r_FnBhLVa_Vy_xRY5Wbr8P9ZfjHFnwXoNEZ4UuMYr5updtBkoae1sK0iq_NB_8pMCg_IxZletQ1CVOtfbwk_YUQNMdLlESvljPUWqtEL5bFwLX6GcUegdPVYP5BeQ_6KPROXvGFid-bRt30R0D0iDUkDuNI9phzPXayCeFNDDTUcheJwh4eOoTa5kuQu_d2xf_Dcej8J7fTxjmkvq1TgFF3rKhZBRmNB620G3T_2xhA-kylXZ2xLzvrXuGRvohzTlRAEVpxLq5DK9v-VFIZH-f8e0H34xhFuXSZW9XWY2ddf_8SNFig02SI",
  "Nonce": "636687577488365490.YjdmM2IxYmMtZjM4MS00MzlkLTk5ZWQtNGY3OGEyZjcxY2U1OWU0MGFkZDctNTQ0MS00N2YzLTlmMDMtMGU3NTY4NTQ5MTZl",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687577488365490.YjdmM2IxYmMtZjM4MS00MzlkLTk5ZWQtNGY3OGEyZjcxY2U1OWU0MGFkZDctNTQ0MS00N2YzLTlmMDMtMGU3NTY4NTQ5MTZl",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHc04q5AYB5i9YMjs8idfuTPrE0HLn4zphA8KMD0jGVvn5VXwIbI6iH7gdAH16nlYIWcJoqqyJ50r_FnBhLVa_Vy_xRY5Wbr8P9ZfjHFnwXoNEZ4UuMYr5updtBkoae1sK0iq_NB_8pMCg_IxZletQ1CVOtfbwk_YUQNMdLlESvljPUWqtEL5bFwLX6GcUegdPVYP5BeQ_6KPROXvGFid-bRt30R0D0iDUkDuNI9phzPXayCeFNDDTUcheJwh4eOoTa5kuQu_d2xf_Dcej8J7fTxjmkvq1TgFF3rKhZBRmNB620G3T_2xhA-kylXZ2xLzvrXuGRvohzTlRAEVpxLq5DK9v-VFIZH-f8e0H34xhFuXSZW9XWY2ddf_8SNFig02SI",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 16:02:42.134 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 16:02:42.137 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:02:42.137 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:02:42.137 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:02:42.137 -06:00 [DBG] No PKCE used.
2018-08-01 16:02:42.138 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:02:42.138 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:03:15.695 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 16:03:15.728 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 16:03:15.730 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 16:03:15.730 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 16:03:15.731 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 16:03:15.731 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 16:03:27.868 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 16:03:28.023 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 16:03:28.023 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 16:03:28.026 -06:00 [DBG] Start authorize request
2018-08-01 16:03:28.041 -06:00 [DBG] No user present in authorize request
2018-08-01 16:03:28.045 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:03:28.055 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:03:28.059 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:03:28.060 -06:00 [DBG] No PKCE used.
2018-08-01 16:03:28.091 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:03:28.147 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfYp8bENDT1n7G1YkzeKf_RquVrtAwizMy7HJ3pc2qN_WLx6Z7LbpoEsHBbLsXjqxp4VlK-NiAeA8dh8UHoMPOV8Emb0FywE0WttZXeZf9PlSzqxb_q4N0p4P8C5n33K0YlA-GP5Ow3xb12UrbjuuMP6Q5LR_o8rFEdyyS_JiejyFwmR_RVXYBN7-W_EItoM1BCxSBWH50W9Pcc8sFdLkIZrx1jPQ2Dek6KBfroCQgDtb0Fgvw_ZevSKH90HjJ8lZ4pf7OkOGbm_yGM2MLhi_by5lkBh1CqhS_4X53StiNxZ4J64DLv9yNeP6I1kegqeWE",
  "Nonce": "636687578078280630.MzVhM2I4ZTktMGMzNC00ZDVjLTllMzgtNTg4NWYxMTU5OGUzYWY4ZWEzNzUtOTkzYi00MDIwLThjNjctMmI3YjQwYmU4MDkz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687578078280630.MzVhM2I4ZTktMGMzNC00ZDVjLTllMzgtNTg4NWYxMTU5OGUzYWY4ZWEzNzUtOTkzYi00MDIwLThjNjctMmI3YjQwYmU4MDkz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfYp8bENDT1n7G1YkzeKf_RquVrtAwizMy7HJ3pc2qN_WLx6Z7LbpoEsHBbLsXjqxp4VlK-NiAeA8dh8UHoMPOV8Emb0FywE0WttZXeZf9PlSzqxb_q4N0p4P8C5n33K0YlA-GP5Ow3xb12UrbjuuMP6Q5LR_o8rFEdyyS_JiejyFwmR_RVXYBN7-W_EItoM1BCxSBWH50W9Pcc8sFdLkIZrx1jPQ2Dek6KBfroCQgDtb0Fgvw_ZevSKH90HjJ8lZ4pf7OkOGbm_yGM2MLhi_by5lkBh1CqhS_4X53StiNxZ4J64DLv9yNeP6I1kegqeWE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 16:03:28.153 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 16:03:28.281 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:03:28.282 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:03:28.282 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:03:28.282 -06:00 [DBG] No PKCE used.
2018-08-01 16:03:28.282 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:03:28.284 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:03:36.514 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 16:03:40.235 -06:00 [DBG] Augmenting SignInContext
2018-08-01 16:03:40.237 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 16:03:40.237 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 16:03:40.238 -06:00 [DBG] Adding auth_time claim with value: 1533161020
2018-08-01 16:03:40.279 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 16:03:40.319 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "1c211cc9-82c1-48f7-a363-b2b32764a48f",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNVAAMBTRP:00000004",
  "TimeStamp": "2018-08-01T22:03:40Z",
  "ProcessId": 39431,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 16:03:40.327 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 16:03:40.328 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 16:03:40.328 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 16:03:40.332 -06:00 [DBG] Start authorize callback request
2018-08-01 16:03:40.335 -06:00 [DBG] No user present in authorize request
2018-08-01 16:03:40.335 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:03:40.336 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:03:40.336 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:03:40.336 -06:00 [DBG] No PKCE used.
2018-08-01 16:03:40.336 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:03:40.336 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfYp8bENDT1n7G1YkzeKf_RquVrtAwizMy7HJ3pc2qN_WLx6Z7LbpoEsHBbLsXjqxp4VlK-NiAeA8dh8UHoMPOV8Emb0FywE0WttZXeZf9PlSzqxb_q4N0p4P8C5n33K0YlA-GP5Ow3xb12UrbjuuMP6Q5LR_o8rFEdyyS_JiejyFwmR_RVXYBN7-W_EItoM1BCxSBWH50W9Pcc8sFdLkIZrx1jPQ2Dek6KBfroCQgDtb0Fgvw_ZevSKH90HjJ8lZ4pf7OkOGbm_yGM2MLhi_by5lkBh1CqhS_4X53StiNxZ4J64DLv9yNeP6I1kegqeWE",
  "Nonce": "636687578078280630.MzVhM2I4ZTktMGMzNC00ZDVjLTllMzgtNTg4NWYxMTU5OGUzYWY4ZWEzNzUtOTkzYi00MDIwLThjNjctMmI3YjQwYmU4MDkz",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687578078280630.MzVhM2I4ZTktMGMzNC00ZDVjLTllMzgtNTg4NWYxMTU5OGUzYWY4ZWEzNzUtOTkzYi00MDIwLThjNjctMmI3YjQwYmU4MDkz",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfYp8bENDT1n7G1YkzeKf_RquVrtAwizMy7HJ3pc2qN_WLx6Z7LbpoEsHBbLsXjqxp4VlK-NiAeA8dh8UHoMPOV8Emb0FywE0WttZXeZf9PlSzqxb_q4N0p4P8C5n33K0YlA-GP5Ow3xb12UrbjuuMP6Q5LR_o8rFEdyyS_JiejyFwmR_RVXYBN7-W_EItoM1BCxSBWH50W9Pcc8sFdLkIZrx1jPQ2Dek6KBfroCQgDtb0Fgvw_ZevSKH90HjJ8lZ4pf7OkOGbm_yGM2MLhi_by5lkBh1CqhS_4X53StiNxZ4J64DLv9yNeP6I1kegqeWE",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 16:03:40.336 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 16:03:40.340 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:03:40.340 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:03:40.340 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:03:40.340 -06:00 [DBG] No PKCE used.
2018-08-01 16:03:40.340 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:03:40.340 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:07:41.057 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 16:07:41.057 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 16:07:41.062 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 16:07:41.062 -06:00 [DBG] Start authorize request
2018-08-01 16:07:41.062 -06:00 [DBG] No user present in authorize request
2018-08-01 16:07:41.062 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:07:41.062 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:07:41.062 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:07:41.062 -06:00 [DBG] No PKCE used.
2018-08-01 16:07:41.062 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:07:41.062 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfsz-emld4c0BhvJPidqJQzi6tiCVYKrGPe8creFoEJ0zoThCkHvP9LaWvFzjTSbwKSgig26gCXYNMWE57JNKy3H-k3sJq9P0DGhWNXSMqej9v7n6nW5VI5OOy1HFFkIHoUgMiU7xRZoHEawFNDAxtRkmlUwSL64Z6vQLeaJWScSjazVVHdztiTNJOldIzmSRhf9li23ZSIRZaoFnnQ5PTbmQ89M4kFTuJKIC-fbiQu1RH4egtlRBsbM-8o5wnMd98r1PtWaLNgumUopkXtvIZd9WJOX8AHI43vv4lz9ngpiBqRWZ_b6FpJ2CrOQwLnlw0",
  "Nonce": "636687580609992720.M2ZmODdmMGEtMjIwZC00ZDg5LWFlOTktOTYxNjYzN2Y4MTMwY2JjZTc1ZDUtOWI5Yi00YzdlLTlkMjgtMzdkZGM3MDcyYmU4",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687580609992720.M2ZmODdmMGEtMjIwZC00ZDg5LWFlOTktOTYxNjYzN2Y4MTMwY2JjZTc1ZDUtOWI5Yi00YzdlLTlkMjgtMzdkZGM3MDcyYmU4",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfsz-emld4c0BhvJPidqJQzi6tiCVYKrGPe8creFoEJ0zoThCkHvP9LaWvFzjTSbwKSgig26gCXYNMWE57JNKy3H-k3sJq9P0DGhWNXSMqej9v7n6nW5VI5OOy1HFFkIHoUgMiU7xRZoHEawFNDAxtRkmlUwSL64Z6vQLeaJWScSjazVVHdztiTNJOldIzmSRhf9li23ZSIRZaoFnnQ5PTbmQ89M4kFTuJKIC-fbiQu1RH4egtlRBsbM-8o5wnMd98r1PtWaLNgumUopkXtvIZd9WJOX8AHI43vv4lz9ngpiBqRWZ_b6FpJ2CrOQwLnlw0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 16:07:41.062 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 16:07:41.064 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:07:41.064 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:07:41.065 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:07:41.065 -06:00 [DBG] No PKCE used.
2018-08-01 16:07:41.065 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:07:41.065 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:07:48.408 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 16:08:00.610 -06:00 [DBG] Augmenting SignInContext
2018-08-01 16:08:00.610 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 16:08:00.610 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 16:08:00.610 -06:00 [DBG] Adding auth_time claim with value: 1533161280
2018-08-01 16:08:00.610 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 16:08:04.975 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "1c211cc9-82c1-48f7-a363-b2b32764a48f",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNVAAMBTRP:00000009",
  "TimeStamp": "2018-08-01T22:08:04Z",
  "ProcessId": 39431,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 16:08:37.864 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 16:08:37.868 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 16:08:37.868 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 16:08:37.868 -06:00 [DBG] Start authorize callback request
2018-08-01 16:08:37.869 -06:00 [DBG] No user present in authorize request
2018-08-01 16:08:37.869 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:08:37.869 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:08:37.869 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:08:37.869 -06:00 [DBG] No PKCE used.
2018-08-01 16:08:37.869 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:08:37.869 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfsz-emld4c0BhvJPidqJQzi6tiCVYKrGPe8creFoEJ0zoThCkHvP9LaWvFzjTSbwKSgig26gCXYNMWE57JNKy3H-k3sJq9P0DGhWNXSMqej9v7n6nW5VI5OOy1HFFkIHoUgMiU7xRZoHEawFNDAxtRkmlUwSL64Z6vQLeaJWScSjazVVHdztiTNJOldIzmSRhf9li23ZSIRZaoFnnQ5PTbmQ89M4kFTuJKIC-fbiQu1RH4egtlRBsbM-8o5wnMd98r1PtWaLNgumUopkXtvIZd9WJOX8AHI43vv4lz9ngpiBqRWZ_b6FpJ2CrOQwLnlw0",
  "Nonce": "636687580609992720.M2ZmODdmMGEtMjIwZC00ZDg5LWFlOTktOTYxNjYzN2Y4MTMwY2JjZTc1ZDUtOWI5Yi00YzdlLTlkMjgtMzdkZGM3MDcyYmU4",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687580609992720.M2ZmODdmMGEtMjIwZC00ZDg5LWFlOTktOTYxNjYzN2Y4MTMwY2JjZTc1ZDUtOWI5Yi00YzdlLTlkMjgtMzdkZGM3MDcyYmU4",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfsz-emld4c0BhvJPidqJQzi6tiCVYKrGPe8creFoEJ0zoThCkHvP9LaWvFzjTSbwKSgig26gCXYNMWE57JNKy3H-k3sJq9P0DGhWNXSMqej9v7n6nW5VI5OOy1HFFkIHoUgMiU7xRZoHEawFNDAxtRkmlUwSL64Z6vQLeaJWScSjazVVHdztiTNJOldIzmSRhf9li23ZSIRZaoFnnQ5PTbmQ89M4kFTuJKIC-fbiQu1RH4egtlRBsbM-8o5wnMd98r1PtWaLNgumUopkXtvIZd9WJOX8AHI43vv4lz9ngpiBqRWZ_b6FpJ2CrOQwLnlw0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 16:08:37.869 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 16:08:37.871 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:08:37.871 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:08:37.871 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:08:37.871 -06:00 [DBG] No PKCE used.
2018-08-01 16:08:37.871 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:08:37.871 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:08:46.323 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 16:08:48.560 -06:00 [DBG] Augmenting SignInContext
2018-08-01 16:08:48.560 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 16:08:48.560 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 16:08:48.560 -06:00 [DBG] Adding auth_time claim with value: 1533161328
2018-08-01 16:08:48.560 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 16:08:48.561 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "bob",
  "SubjectId": "74e9c5a2-e2f3-48cb-b12b-7b11ef54020d",
  "DisplayName": "bob",
  "Endpoint": "UI",
  "ActivityId": "0HLFNVAAMBTRP:0000000C",
  "TimeStamp": "2018-08-01T22:08:48Z",
  "ProcessId": 39431,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 16:08:48.562 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 16:08:48.563 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 16:08:48.563 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 16:08:48.563 -06:00 [DBG] Start authorize callback request
2018-08-01 16:08:48.563 -06:00 [DBG] No user present in authorize request
2018-08-01 16:08:48.563 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:08:48.563 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:08:48.563 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:08:48.563 -06:00 [DBG] No PKCE used.
2018-08-01 16:08:48.563 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:08:48.563 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfsz-emld4c0BhvJPidqJQzi6tiCVYKrGPe8creFoEJ0zoThCkHvP9LaWvFzjTSbwKSgig26gCXYNMWE57JNKy3H-k3sJq9P0DGhWNXSMqej9v7n6nW5VI5OOy1HFFkIHoUgMiU7xRZoHEawFNDAxtRkmlUwSL64Z6vQLeaJWScSjazVVHdztiTNJOldIzmSRhf9li23ZSIRZaoFnnQ5PTbmQ89M4kFTuJKIC-fbiQu1RH4egtlRBsbM-8o5wnMd98r1PtWaLNgumUopkXtvIZd9WJOX8AHI43vv4lz9ngpiBqRWZ_b6FpJ2CrOQwLnlw0",
  "Nonce": "636687580609992720.M2ZmODdmMGEtMjIwZC00ZDg5LWFlOTktOTYxNjYzN2Y4MTMwY2JjZTc1ZDUtOWI5Yi00YzdlLTlkMjgtMzdkZGM3MDcyYmU4",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687580609992720.M2ZmODdmMGEtMjIwZC00ZDg5LWFlOTktOTYxNjYzN2Y4MTMwY2JjZTc1ZDUtOWI5Yi00YzdlLTlkMjgtMzdkZGM3MDcyYmU4",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfsz-emld4c0BhvJPidqJQzi6tiCVYKrGPe8creFoEJ0zoThCkHvP9LaWvFzjTSbwKSgig26gCXYNMWE57JNKy3H-k3sJq9P0DGhWNXSMqej9v7n6nW5VI5OOy1HFFkIHoUgMiU7xRZoHEawFNDAxtRkmlUwSL64Z6vQLeaJWScSjazVVHdztiTNJOldIzmSRhf9li23ZSIRZaoFnnQ5PTbmQ89M4kFTuJKIC-fbiQu1RH4egtlRBsbM-8o5wnMd98r1PtWaLNgumUopkXtvIZd9WJOX8AHI43vv4lz9ngpiBqRWZ_b6FpJ2CrOQwLnlw0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 16:08:48.563 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 16:08:48.565 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:08:48.565 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:08:48.565 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:08:48.565 -06:00 [DBG] No PKCE used.
2018-08-01 16:08:48.565 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:08:48.565 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:10:28.003 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 16:10:31.278 -06:00 [DBG] Augmenting SignInContext
2018-08-01 16:10:31.278 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 16:10:31.278 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 16:10:31.278 -06:00 [DBG] Adding auth_time claim with value: 1533161431
2018-08-01 16:10:31.278 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 16:12:32.263 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "1c211cc9-82c1-48f7-a363-b2b32764a48f",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNVAAMBTRP:0000000F",
  "TimeStamp": "2018-08-01T22:12:32Z",
  "ProcessId": 39431,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 16:12:32.295 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 16:12:32.296 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 16:12:32.296 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 16:12:32.296 -06:00 [DBG] Start authorize callback request
2018-08-01 16:12:32.296 -06:00 [DBG] No user present in authorize request
2018-08-01 16:12:32.296 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:12:32.296 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:12:32.296 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:12:32.296 -06:00 [DBG] No PKCE used.
2018-08-01 16:12:32.296 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:12:32.296 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfsz-emld4c0BhvJPidqJQzi6tiCVYKrGPe8creFoEJ0zoThCkHvP9LaWvFzjTSbwKSgig26gCXYNMWE57JNKy3H-k3sJq9P0DGhWNXSMqej9v7n6nW5VI5OOy1HFFkIHoUgMiU7xRZoHEawFNDAxtRkmlUwSL64Z6vQLeaJWScSjazVVHdztiTNJOldIzmSRhf9li23ZSIRZaoFnnQ5PTbmQ89M4kFTuJKIC-fbiQu1RH4egtlRBsbM-8o5wnMd98r1PtWaLNgumUopkXtvIZd9WJOX8AHI43vv4lz9ngpiBqRWZ_b6FpJ2CrOQwLnlw0",
  "Nonce": "636687580609992720.M2ZmODdmMGEtMjIwZC00ZDg5LWFlOTktOTYxNjYzN2Y4MTMwY2JjZTc1ZDUtOWI5Yi00YzdlLTlkMjgtMzdkZGM3MDcyYmU4",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687580609992720.M2ZmODdmMGEtMjIwZC00ZDg5LWFlOTktOTYxNjYzN2Y4MTMwY2JjZTc1ZDUtOWI5Yi00YzdlLTlkMjgtMzdkZGM3MDcyYmU4",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHfsz-emld4c0BhvJPidqJQzi6tiCVYKrGPe8creFoEJ0zoThCkHvP9LaWvFzjTSbwKSgig26gCXYNMWE57JNKy3H-k3sJq9P0DGhWNXSMqej9v7n6nW5VI5OOy1HFFkIHoUgMiU7xRZoHEawFNDAxtRkmlUwSL64Z6vQLeaJWScSjazVVHdztiTNJOldIzmSRhf9li23ZSIRZaoFnnQ5PTbmQ89M4kFTuJKIC-fbiQu1RH4egtlRBsbM-8o5wnMd98r1PtWaLNgumUopkXtvIZd9WJOX8AHI43vv4lz9ngpiBqRWZ_b6FpJ2CrOQwLnlw0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 16:12:32.296 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 16:12:32.298 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:12:32.298 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:12:32.298 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:12:32.298 -06:00 [DBG] No PKCE used.
2018-08-01 16:12:32.299 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:12:32.299 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:33:39.368 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 16:33:39.400 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 16:33:39.402 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 16:33:39.403 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 16:33:39.403 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 16:33:39.403 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 16:33:54.103 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-01 16:33:54.255 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-01 16:33:54.255 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-01 16:33:54.258 -06:00 [DBG] Start discovery request
2018-08-01 16:33:54.416 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-01 16:33:54.417 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-01 16:33:54.417 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-01 16:33:54.419 -06:00 [DBG] Start key discovery request
2018-08-01 16:33:54.535 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-01 16:33:54.537 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-01 16:33:54.537 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-01 16:33:54.540 -06:00 [DBG] Start authorize request
2018-08-01 16:33:54.556 -06:00 [DBG] No user present in authorize request
2018-08-01 16:33:54.560 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:33:54.570 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:33:54.574 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:33:54.575 -06:00 [DBG] No PKCE used.
2018-08-01 16:33:54.600 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:33:54.609 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcUSG8qRx1cSwe8OLNnfiSliaBp8oF3r4q8S2Jdmh3mXFIY-Utc0HmeIIQLQ2kBvVjEYZkHPSWp6Mqy2R-nVqt-FoICe9EjefCv4GAEJekdedYilFVBg3U3hANefbaq7YgknnvmMUdxkJknm9mL1i4is_h-LPht13sDcnDEqZc413uZzAzdQGNjXw0-k3oOkv4bpgtlq1l1oCs1nOTyMbaK8tBJs2xcEH2fKhQ90pBTrGrR_TUdP-rl_LLXR-4YIG3yc8AHNCXZuhsFzju9ou3cslZw5d6AHtbVLQTvIxDuYthQmOzP_fhXFMz9ycZympo",
  "Nonce": "636687596344887930.OGFlMjYwZTYtZDJmMy00ZTdkLWExNWUtOTFkYmE1OTI2YjkwZDc0YTBiYzktMGUzNi00YTUyLTk0NzEtNzdhMGY5OWU4NmQ0",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687596344887930.OGFlMjYwZTYtZDJmMy00ZTdkLWExNWUtOTFkYmE1OTI2YjkwZDc0YTBiYzktMGUzNi00YTUyLTk0NzEtNzdhMGY5OWU4NmQ0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcUSG8qRx1cSwe8OLNnfiSliaBp8oF3r4q8S2Jdmh3mXFIY-Utc0HmeIIQLQ2kBvVjEYZkHPSWp6Mqy2R-nVqt-FoICe9EjefCv4GAEJekdedYilFVBg3U3hANefbaq7YgknnvmMUdxkJknm9mL1i4is_h-LPht13sDcnDEqZc413uZzAzdQGNjXw0-k3oOkv4bpgtlq1l1oCs1nOTyMbaK8tBJs2xcEH2fKhQ90pBTrGrR_TUdP-rl_LLXR-4YIG3yc8AHNCXZuhsFzju9ou3cslZw5d6AHtbVLQTvIxDuYthQmOzP_fhXFMz9ycZympo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 16:33:54.617 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 16:33:54.747 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:33:54.748 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:33:54.748 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:33:54.748 -06:00 [DBG] No PKCE used.
2018-08-01 16:33:54.748 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:33:54.751 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:34:02.475 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-01 16:34:06.790 -06:00 [DBG] Augmenting SignInContext
2018-08-01 16:34:06.791 -06:00 [DBG] Adding idp claim with value: local
2018-08-01 16:34:06.791 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-01 16:34:06.792 -06:00 [DBG] Adding auth_time claim with value: 1533162846
2018-08-01 16:34:06.833 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-01 16:34:06.872 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "1c211cc9-82c1-48f7-a363-b2b32764a48f",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFNVRA600R8:00000004",
  "TimeStamp": "2018-08-01T22:34:06Z",
  "ProcessId": 39806,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-01 16:34:06.882 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-01 16:34:06.883 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-01 16:34:06.883 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-01 16:34:06.887 -06:00 [DBG] Start authorize callback request
2018-08-01 16:34:06.890 -06:00 [DBG] No user present in authorize request
2018-08-01 16:34:06.890 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:34:06.890 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:34:06.890 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:34:06.890 -06:00 [DBG] No PKCE used.
2018-08-01 16:34:06.890 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:34:06.890 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcUSG8qRx1cSwe8OLNnfiSliaBp8oF3r4q8S2Jdmh3mXFIY-Utc0HmeIIQLQ2kBvVjEYZkHPSWp6Mqy2R-nVqt-FoICe9EjefCv4GAEJekdedYilFVBg3U3hANefbaq7YgknnvmMUdxkJknm9mL1i4is_h-LPht13sDcnDEqZc413uZzAzdQGNjXw0-k3oOkv4bpgtlq1l1oCs1nOTyMbaK8tBJs2xcEH2fKhQ90pBTrGrR_TUdP-rl_LLXR-4YIG3yc8AHNCXZuhsFzju9ou3cslZw5d6AHtbVLQTvIxDuYthQmOzP_fhXFMz9ycZympo",
  "Nonce": "636687596344887930.OGFlMjYwZTYtZDJmMy00ZTdkLWExNWUtOTFkYmE1OTI2YjkwZDc0YTBiYzktMGUzNi00YTUyLTk0NzEtNzdhMGY5OWU4NmQ0",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636687596344887930.OGFlMjYwZTYtZDJmMy00ZTdkLWExNWUtOTFkYmE1OTI2YjkwZDc0YTBiYzktMGUzNi00YTUyLTk0NzEtNzdhMGY5OWU4NmQ0",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHcUSG8qRx1cSwe8OLNnfiSliaBp8oF3r4q8S2Jdmh3mXFIY-Utc0HmeIIQLQ2kBvVjEYZkHPSWp6Mqy2R-nVqt-FoICe9EjefCv4GAEJekdedYilFVBg3U3hANefbaq7YgknnvmMUdxkJknm9mL1i4is_h-LPht13sDcnDEqZc413uZzAzdQGNjXw0-k3oOkv4bpgtlq1l1oCs1nOTyMbaK8tBJs2xcEH2fKhQ90pBTrGrR_TUdP-rl_LLXR-4YIG3yc8AHNCXZuhsFzju9ou3cslZw5d6AHtbVLQTvIxDuYthQmOzP_fhXFMz9ycZympo",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-01 16:34:06.890 -06:00 [INF] Showing login: User is not authenticated
2018-08-01 16:34:06.893 -06:00 [DBG] Start authorize request protocol validation
2018-08-01 16:34:06.893 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:34:06.893 -06:00 [DBG] Checking for PKCE parameters
2018-08-01 16:34:06.893 -06:00 [DBG] No PKCE used.
2018-08-01 16:34:06.893 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-01 16:34:06.893 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-01 16:34:24.142 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 16:34:24.174 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 16:34:24.176 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 16:34:24.176 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 16:34:24.177 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 16:34:24.177 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-01 16:35:16.571 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-01 16:35:16.602 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-01 16:35:16.605 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-01 16:35:16.605 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-01 16:35:16.605 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-01 16:35:16.605 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-02 08:27:37.461 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-02 08:27:37.493 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-02 08:27:37.496 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-02 08:27:37.496 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-02 08:27:37.496 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-02 08:27:37.496 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-02 08:28:42.197 -06:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-08-02 08:28:42.366 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-08-02 08:28:42.366 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-08-02 08:28:42.370 -06:00 [DBG] Start discovery request
2018-08-02 08:28:42.541 -06:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-08-02 08:28:42.542 -06:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-08-02 08:28:42.542 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-08-02 08:28:42.544 -06:00 [DBG] Start key discovery request
2018-08-02 08:28:42.643 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-02 08:28:42.646 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-02 08:28:42.646 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-02 08:28:42.650 -06:00 [DBG] Start authorize request
2018-08-02 08:28:42.669 -06:00 [DBG] No user present in authorize request
2018-08-02 08:28:42.673 -06:00 [DBG] Start authorize request protocol validation
2018-08-02 08:28:42.685 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-02 08:28:42.689 -06:00 [DBG] Checking for PKCE parameters
2018-08-02 08:28:42.690 -06:00 [DBG] No PKCE used.
2018-08-02 08:28:42.718 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-02 08:28:42.729 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd63SJG6wQCTUkOk1uHayPlyvYoFODinBO5_tNuzcztlms4x6a8ULrhg7JUttC0i2atFKcw561ljLYP7HvvfFqS9lqLQSUZy0SV36hh7qLZ3mS1zTZvYAJkrU24f0zykRU6f77yaRCXo6RfbRm5GAQiMvnHY-BR96kyWs5SXYbSZM82dCsluDwz5CT1xM3fa5sKiIjDD8msLYQkySaa_pB6fzVl1VwHcg84r7_9-IZ4ambSl5NhkWmpIoEjgza86t2VKieM7OhnXWFnkLXkQhHHJDQ-YY85JXu0Sok83NWis-7fT3rq2bYeb4SXCIKF_-jhft4ASUJoW-PyAR-IJ-v4MJ4yb_F-BX7Tf2QUWrQoqIB5narM870i-4-d20WGbn0",
  "Nonce": "636688169226226520.NTFiYTNmOWQtYjYyZi00ZjdhLThiZDUtM2FhMDk1OGFjZDQyZDdhYWQ3ZTgtYjBkNS00ZjY1LTkxN2ItMWJhZDYwNjczOWUw",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636688169226226520.NTFiYTNmOWQtYjYyZi00ZjdhLThiZDUtM2FhMDk1OGFjZDQyZDdhYWQ3ZTgtYjBkNS00ZjY1LTkxN2ItMWJhZDYwNjczOWUw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd63SJG6wQCTUkOk1uHayPlyvYoFODinBO5_tNuzcztlms4x6a8ULrhg7JUttC0i2atFKcw561ljLYP7HvvfFqS9lqLQSUZy0SV36hh7qLZ3mS1zTZvYAJkrU24f0zykRU6f77yaRCXo6RfbRm5GAQiMvnHY-BR96kyWs5SXYbSZM82dCsluDwz5CT1xM3fa5sKiIjDD8msLYQkySaa_pB6fzVl1VwHcg84r7_9-IZ4ambSl5NhkWmpIoEjgza86t2VKieM7OhnXWFnkLXkQhHHJDQ-YY85JXu0Sok83NWis-7fT3rq2bYeb4SXCIKF_-jhft4ASUJoW-PyAR-IJ-v4MJ4yb_F-BX7Tf2QUWrQoqIB5narM870i-4-d20WGbn0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-02 08:28:42.736 -06:00 [INF] Showing login: User is not authenticated
2018-08-02 08:28:42.861 -06:00 [DBG] Start authorize request protocol validation
2018-08-02 08:28:42.862 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-02 08:28:42.862 -06:00 [DBG] Checking for PKCE parameters
2018-08-02 08:28:42.862 -06:00 [DBG] No PKCE used.
2018-08-02 08:28:42.862 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-02 08:28:42.864 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-02 08:28:52.607 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-02 08:28:58.402 -06:00 [DBG] Augmenting SignInContext
2018-08-02 08:28:58.403 -06:00 [DBG] Adding idp claim with value: local
2018-08-02 08:28:58.403 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-02 08:28:58.404 -06:00 [DBG] Adding auth_time claim with value: 1533220138
2018-08-02 08:28:58.445 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-02 08:29:19.243 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "3b5d8be0-b69b-4057-a303-81606071cf61",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFOGGCERO8M:00000005",
  "TimeStamp": "2018-08-02T14:29:19Z",
  "ProcessId": 44256,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-02 08:29:32.647 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-02 08:29:32.648 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-02 08:29:32.648 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-02 08:29:32.653 -06:00 [DBG] Start authorize callback request
2018-08-02 08:29:32.656 -06:00 [DBG] No user present in authorize request
2018-08-02 08:29:32.656 -06:00 [DBG] Start authorize request protocol validation
2018-08-02 08:29:32.656 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-02 08:29:32.657 -06:00 [DBG] Checking for PKCE parameters
2018-08-02 08:29:32.657 -06:00 [DBG] No PKCE used.
2018-08-02 08:29:32.657 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-02 08:29:32.657 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd63SJG6wQCTUkOk1uHayPlyvYoFODinBO5_tNuzcztlms4x6a8ULrhg7JUttC0i2atFKcw561ljLYP7HvvfFqS9lqLQSUZy0SV36hh7qLZ3mS1zTZvYAJkrU24f0zykRU6f77yaRCXo6RfbRm5GAQiMvnHY-BR96kyWs5SXYbSZM82dCsluDwz5CT1xM3fa5sKiIjDD8msLYQkySaa_pB6fzVl1VwHcg84r7_9-IZ4ambSl5NhkWmpIoEjgza86t2VKieM7OhnXWFnkLXkQhHHJDQ-YY85JXu0Sok83NWis-7fT3rq2bYeb4SXCIKF_-jhft4ASUJoW-PyAR-IJ-v4MJ4yb_F-BX7Tf2QUWrQoqIB5narM870i-4-d20WGbn0",
  "Nonce": "636688169226226520.NTFiYTNmOWQtYjYyZi00ZjdhLThiZDUtM2FhMDk1OGFjZDQyZDdhYWQ3ZTgtYjBkNS00ZjY1LTkxN2ItMWJhZDYwNjczOWUw",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636688169226226520.NTFiYTNmOWQtYjYyZi00ZjdhLThiZDUtM2FhMDk1OGFjZDQyZDdhYWQ3ZTgtYjBkNS00ZjY1LTkxN2ItMWJhZDYwNjczOWUw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd63SJG6wQCTUkOk1uHayPlyvYoFODinBO5_tNuzcztlms4x6a8ULrhg7JUttC0i2atFKcw561ljLYP7HvvfFqS9lqLQSUZy0SV36hh7qLZ3mS1zTZvYAJkrU24f0zykRU6f77yaRCXo6RfbRm5GAQiMvnHY-BR96kyWs5SXYbSZM82dCsluDwz5CT1xM3fa5sKiIjDD8msLYQkySaa_pB6fzVl1VwHcg84r7_9-IZ4ambSl5NhkWmpIoEjgza86t2VKieM7OhnXWFnkLXkQhHHJDQ-YY85JXu0Sok83NWis-7fT3rq2bYeb4SXCIKF_-jhft4ASUJoW-PyAR-IJ-v4MJ4yb_F-BX7Tf2QUWrQoqIB5narM870i-4-d20WGbn0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-02 08:29:32.657 -06:00 [INF] Showing login: User is not authenticated
2018-08-02 08:29:32.661 -06:00 [DBG] Start authorize request protocol validation
2018-08-02 08:29:32.661 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-02 08:29:32.661 -06:00 [DBG] Checking for PKCE parameters
2018-08-02 08:29:32.661 -06:00 [DBG] No PKCE used.
2018-08-02 08:29:32.662 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-02 08:29:32.662 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-02 08:29:50.015 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-02 08:29:53.868 -06:00 [DBG] Augmenting SignInContext
2018-08-02 08:29:53.868 -06:00 [DBG] Adding idp claim with value: local
2018-08-02 08:29:53.868 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-02 08:29:53.868 -06:00 [DBG] Adding auth_time claim with value: 1533220193
2018-08-02 08:29:53.868 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-02 08:30:01.456 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "3b5d8be0-b69b-4057-a303-81606071cf61",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFOGGCERO8M:00000008",
  "TimeStamp": "2018-08-02T14:30:01Z",
  "ProcessId": 44256,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-02 08:31:05.776 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-02 08:31:33.539 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-02 08:31:33.540 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-02 08:31:33.540 -06:00 [DBG] Start authorize callback request
2018-08-02 08:31:33.540 -06:00 [DBG] No user present in authorize request
2018-08-02 08:31:33.540 -06:00 [DBG] Start authorize request protocol validation
2018-08-02 08:31:33.540 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-02 08:31:33.540 -06:00 [DBG] Checking for PKCE parameters
2018-08-02 08:31:33.540 -06:00 [DBG] No PKCE used.
2018-08-02 08:31:33.540 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-02 08:31:33.540 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd63SJG6wQCTUkOk1uHayPlyvYoFODinBO5_tNuzcztlms4x6a8ULrhg7JUttC0i2atFKcw561ljLYP7HvvfFqS9lqLQSUZy0SV36hh7qLZ3mS1zTZvYAJkrU24f0zykRU6f77yaRCXo6RfbRm5GAQiMvnHY-BR96kyWs5SXYbSZM82dCsluDwz5CT1xM3fa5sKiIjDD8msLYQkySaa_pB6fzVl1VwHcg84r7_9-IZ4ambSl5NhkWmpIoEjgza86t2VKieM7OhnXWFnkLXkQhHHJDQ-YY85JXu0Sok83NWis-7fT3rq2bYeb4SXCIKF_-jhft4ASUJoW-PyAR-IJ-v4MJ4yb_F-BX7Tf2QUWrQoqIB5narM870i-4-d20WGbn0",
  "Nonce": "636688169226226520.NTFiYTNmOWQtYjYyZi00ZjdhLThiZDUtM2FhMDk1OGFjZDQyZDdhYWQ3ZTgtYjBkNS00ZjY1LTkxN2ItMWJhZDYwNjczOWUw",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636688169226226520.NTFiYTNmOWQtYjYyZi00ZjdhLThiZDUtM2FhMDk1OGFjZDQyZDdhYWQ3ZTgtYjBkNS00ZjY1LTkxN2ItMWJhZDYwNjczOWUw",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd63SJG6wQCTUkOk1uHayPlyvYoFODinBO5_tNuzcztlms4x6a8ULrhg7JUttC0i2atFKcw561ljLYP7HvvfFqS9lqLQSUZy0SV36hh7qLZ3mS1zTZvYAJkrU24f0zykRU6f77yaRCXo6RfbRm5GAQiMvnHY-BR96kyWs5SXYbSZM82dCsluDwz5CT1xM3fa5sKiIjDD8msLYQkySaa_pB6fzVl1VwHcg84r7_9-IZ4ambSl5NhkWmpIoEjgza86t2VKieM7OhnXWFnkLXkQhHHJDQ-YY85JXu0Sok83NWis-7fT3rq2bYeb4SXCIKF_-jhft4ASUJoW-PyAR-IJ-v4MJ4yb_F-BX7Tf2QUWrQoqIB5narM870i-4-d20WGbn0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-02 08:31:33.540 -06:00 [INF] Showing login: User is not authenticated
2018-08-02 08:32:19.325 -06:00 [DBG] Start authorize request protocol validation
2018-08-02 08:32:19.326 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-02 08:32:19.326 -06:00 [DBG] Checking for PKCE parameters
2018-08-02 08:32:19.326 -06:00 [DBG] No PKCE used.
2018-08-02 08:32:19.326 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-02 08:32:19.326 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-02 08:35:58.897 -06:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-08-02 08:35:58.931 -06:00 [DBG] Using Identity.Application as default scheme for authentication
2018-08-02 08:35:58.934 -06:00 [DBG] Using Identity.External as default scheme for sign-in
2018-08-02 08:35:58.934 -06:00 [DBG] Using Identity.External as default scheme for sign-out
2018-08-02 08:35:58.934 -06:00 [DBG] Using Identity.Application as default scheme for challenge
2018-08-02 08:35:58.934 -06:00 [DBG] Using Identity.Application as default scheme for forbid
2018-08-02 08:36:03.900 -06:00 [WRN] Heartbeat took longer than ""00:00:01"" at ""2018-08-02T14:36:03.8976020+00:00"".
2018-08-02 08:36:41.250 -06:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-08-02 08:36:41.407 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-08-02 08:36:41.408 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-08-02 08:36:41.411 -06:00 [DBG] Start authorize request
2018-08-02 08:36:41.426 -06:00 [DBG] No user present in authorize request
2018-08-02 08:36:41.431 -06:00 [DBG] Start authorize request protocol validation
2018-08-02 08:36:41.441 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-02 08:36:41.445 -06:00 [DBG] Checking for PKCE parameters
2018-08-02 08:36:41.446 -06:00 [DBG] No PKCE used.
2018-08-02 08:36:41.475 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-02 08:36:41.531 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd3W27cS6otEYIygyN3P4yXgHHWPCDGDYuVL8ZwNQMQ6NMn5t0n3lYzC5ECmn0hbQ69M3D8CVLGm0luluCHacZVDrhQ24JGHF4VVfq9hX_kY6DREItf5gMFEiJFN3sMdJvjx6vFsI69y8snhui4z4WFBMxzDQnaeqb6izLFgfRgdcvhN2VDSgeOdsRIjKnsSDFwd2sptXeYWcrFG_egLnE6JVl7lTdnRFQ9S-z_GWOSXWXmRwYCZqpwLoeIGRhyE-9Nx3GLJjtL07axx13pOdfmurgyfjxddXQVRtP_dR8np-x8EjuOp9FTQORqA_aaBg2eiM8G3CPq-2WicpEH2lGVHth3z9KG0VYZmXtGRM82L1fnhGwnu_zAILHH9u7pEo0",
  "Nonce": "636688174011481620.YTViN2NhNWQtMmIwZS00MWFmLTk4ZDItZDcyYmNlOTI4OTlkYjBmMDkyMTUtZjNmNS00MGE5LWFiMzQtODAzZTlkMWYyMTMy",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636688174011481620.YTViN2NhNWQtMmIwZS00MWFmLTk4ZDItZDcyYmNlOTI4OTlkYjBmMDkyMTUtZjNmNS00MGE5LWFiMzQtODAzZTlkMWYyMTMy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd3W27cS6otEYIygyN3P4yXgHHWPCDGDYuVL8ZwNQMQ6NMn5t0n3lYzC5ECmn0hbQ69M3D8CVLGm0luluCHacZVDrhQ24JGHF4VVfq9hX_kY6DREItf5gMFEiJFN3sMdJvjx6vFsI69y8snhui4z4WFBMxzDQnaeqb6izLFgfRgdcvhN2VDSgeOdsRIjKnsSDFwd2sptXeYWcrFG_egLnE6JVl7lTdnRFQ9S-z_GWOSXWXmRwYCZqpwLoeIGRhyE-9Nx3GLJjtL07axx13pOdfmurgyfjxddXQVRtP_dR8np-x8EjuOp9FTQORqA_aaBg2eiM8G3CPq-2WicpEH2lGVHth3z9KG0VYZmXtGRM82L1fnhGwnu_zAILHH9u7pEo0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-02 08:36:41.537 -06:00 [INF] Showing login: User is not authenticated
2018-08-02 08:36:41.666 -06:00 [DBG] Start authorize request protocol validation
2018-08-02 08:36:41.667 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-02 08:36:41.667 -06:00 [DBG] Checking for PKCE parameters
2018-08-02 08:36:41.667 -06:00 [DBG] No PKCE used.
2018-08-02 08:36:41.667 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-02 08:36:41.670 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-02 08:37:03.235 -06:00 [DBG] CORS request made for path: /account/login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-08-02 08:37:19.854 -06:00 [DBG] Augmenting SignInContext
2018-08-02 08:37:19.856 -06:00 [DBG] Adding idp claim with value: local
2018-08-02 08:37:19.856 -06:00 [DBG] Adding amr claim with value: pwd
2018-08-02 08:37:19.856 -06:00 [DBG] Adding auth_time claim with value: 1533220639
2018-08-02 08:37:19.896 -06:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-08-02 08:37:36.093 -06:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Username": "alice",
  "SubjectId": "3b5d8be0-b69b-4057-a303-81606071cf61",
  "DisplayName": "alice",
  "Endpoint": "UI",
  "ActivityId": "0HLFOGL1TOJLK:00000004",
  "TimeStamp": "2018-08-02T14:37:36Z",
  "ProcessId": 44336,
  "LocalIpAddress": "::1:5004",
  "RemoteIpAddress": "::1"
}
2018-08-02 08:38:24.529 -06:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-08-02 08:38:24.529 -06:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-08-02 08:38:24.529 -06:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-08-02 08:38:24.535 -06:00 [DBG] Start authorize callback request
2018-08-02 08:38:24.540 -06:00 [DBG] No user present in authorize request
2018-08-02 08:38:24.540 -06:00 [DBG] Start authorize request protocol validation
2018-08-02 08:38:24.540 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-02 08:38:24.540 -06:00 [DBG] Checking for PKCE parameters
2018-08-02 08:38:24.540 -06:00 [DBG] No PKCE used.
2018-08-02 08:38:24.540 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-02 08:38:24.540 -06:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "ideaBox",
  "ClientName": "IdeaBox Client",
  "RedirectUri": "https://localhost:5001/signin-oidc",
  "AllowedRedirectUris": [
    "https://localhost:5001/signin-oidc"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "code id_token",
  "ResponseMode": "form_post",
  "GrantType": "hybrid",
  "RequestedScopes": "openid profile business email",
  "State": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd3W27cS6otEYIygyN3P4yXgHHWPCDGDYuVL8ZwNQMQ6NMn5t0n3lYzC5ECmn0hbQ69M3D8CVLGm0luluCHacZVDrhQ24JGHF4VVfq9hX_kY6DREItf5gMFEiJFN3sMdJvjx6vFsI69y8snhui4z4WFBMxzDQnaeqb6izLFgfRgdcvhN2VDSgeOdsRIjKnsSDFwd2sptXeYWcrFG_egLnE6JVl7lTdnRFQ9S-z_GWOSXWXmRwYCZqpwLoeIGRhyE-9Nx3GLJjtL07axx13pOdfmurgyfjxddXQVRtP_dR8np-x8EjuOp9FTQORqA_aaBg2eiM8G3CPq-2WicpEH2lGVHth3z9KG0VYZmXtGRM82L1fnhGwnu_zAILHH9u7pEo0",
  "Nonce": "636688174011481620.YTViN2NhNWQtMmIwZS00MWFmLTk4ZDItZDcyYmNlOTI4OTlkYjBmMDkyMTUtZjNmNS00MGE5LWFiMzQtODAzZTlkMWYyMTMy",
  "Raw": {
    "client_id": "ideaBox",
    "redirect_uri": "https://localhost:5001/signin-oidc",
    "response_type": "code id_token",
    "scope": "openid profile business email",
    "response_mode": "form_post",
    "nonce": "636688174011481620.YTViN2NhNWQtMmIwZS00MWFmLTk4ZDItZDcyYmNlOTI4OTlkYjBmMDkyMTUtZjNmNS00MGE5LWFiMzQtODAzZTlkMWYyMTMy",
    "state": "CfDJ8Kr3_5r6ZoZDlk_PMxCVWHd3W27cS6otEYIygyN3P4yXgHHWPCDGDYuVL8ZwNQMQ6NMn5t0n3lYzC5ECmn0hbQ69M3D8CVLGm0luluCHacZVDrhQ24JGHF4VVfq9hX_kY6DREItf5gMFEiJFN3sMdJvjx6vFsI69y8snhui4z4WFBMxzDQnaeqb6izLFgfRgdcvhN2VDSgeOdsRIjKnsSDFwd2sptXeYWcrFG_egLnE6JVl7lTdnRFQ9S-z_GWOSXWXmRwYCZqpwLoeIGRhyE-9Nx3GLJjtL07axx13pOdfmurgyfjxddXQVRtP_dR8np-x8EjuOp9FTQORqA_aaBg2eiM8G3CPq-2WicpEH2lGVHth3z9KG0VYZmXtGRM82L1fnhGwnu_zAILHH9u7pEo0",
    "x-client-SKU": "ID_NETSTANDARD1_4",
    "x-client-ver": "5.2.0.0"
  }
}
2018-08-02 08:38:24.541 -06:00 [INF] Showing login: User is not authenticated
2018-08-02 08:38:24.544 -06:00 [DBG] Start authorize request protocol validation
2018-08-02 08:38:24.544 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
2018-08-02 08:38:24.544 -06:00 [DBG] Checking for PKCE parameters
2018-08-02 08:38:24.544 -06:00 [DBG] No PKCE used.
2018-08-02 08:38:24.544 -06:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-08-02 08:38:24.544 -06:00 [DBG] client configuration validation for client ideaBox succeeded.
